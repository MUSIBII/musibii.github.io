<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title><![CDATA[ubuntu å®‰è£… Docker CE]]></title>
    <url>%2F2019%2F07%2F27%2Fubuntu-%E5%AE%89%E8%A3%85-Docker-CE%2F</url>
    <content type="text"><![CDATA[Ubuntu18.04 å®‰è£… Docker CE æ·»åŠ ä½¿ç”¨ https ä¼ è¾“çš„è½¯ä»¶åŒ…å’Œ CAè¯ä¹¦ 12sudo apt updatesudo apt install apt-transport-https ca-certificates curl software-properties-common æ·»åŠ è½¯ä»¶æºçš„ GPG å¯†é’¥ 1curl -fsSL https://mirrors.ustc.edu.cn/docker-ce/linux/ubuntu/gpg | sudo apt-key add - æ·»åŠ  docker è½¯ä»¶æº 1sudo add-apt-repository "deb [arch=amd64] https://mirrors.ustc.edu.cn/docker-ce/linux/ubuntu $(lsb_release -cs) stable" å®‰è£… Docker CE 12sudo apt install updatesudo apt install docker-ce æˆ–è€…ä½¿ç”¨è„šæœ¬è‡ªåŠ¨å®‰è£… 12curl -fsSL get.docker.com -o get-docker.shsudo sh get-docker.sh --mirror Aliyun å¯åŠ¨ docker 12sudo systemctl enable dockersudo systemctl start docker å»ºç«‹ docker ç”¨æˆ·ç»„ 1sudo groupadd docker å°†å½“å‰ç”¨æˆ·åŠ å…¥ docker ç»„ 1sudo usermod -aG docker $USER é€€å‡ºç»ˆç«¯å¹¶é‡æ–°ç™»å½•æˆ–è€…é‡å¯ dockerã€‚ 1sudo systemctl restart docker æµ‹è¯•ä½¿ç”¨ä¸ä½¿ç”¨ sudo èƒ½å¦æ‰§è¡Œ docker å‘½ä»¤ 1docker images å¦‚æžœæç¤º 1Got permission denied while trying to connect to the Docker daemon socket at unix:///var/run/docker.sock: Get http://%2Fvar%2Frun%2Fdocker.sock/v1.40/images/json: dial unix /var/run/docker.sock: connect: permission denied åˆ™ä¿®æ”¹/var/run/docker.sockæƒé™ 1sudo chmod a+rw /var/run/docker.sock]]></content>
      <categories>
        <category>docker</category>
      </categories>
  </entry>
  <entry>
    <title><![CDATA[ä¼˜åŒ– Linux]]></title>
    <url>%2F2019%2F07%2F27%2F%E4%BC%98%E5%8C%96-Linux%2F</url>
    <content type="text"><![CDATA[ä¼˜åŒ–Linux1. æ›´æ¢ apt æº12345678910echo 'deb http://mirrors.aliyun.com/ubuntu/ bionic main restricted universe multiversedeb-src http://mirrors.aliyun.com/ubuntu/ bionic main restricted universe multiversedeb http://mirrors.aliyun.com/ubuntu/ bionic-security main restricted universe multiversedeb-src http://mirrors.aliyun.com/ubuntu/ bionic-security main restricted universe multiversedeb http://mirrors.aliyun.com/ubuntu/ bionic-updates main restricted universe multiversedeb-src http://mirrors.aliyun.com/ubuntu/ bionic-updates main restricted universe multiversedeb http://mirrors.aliyun.com/ubuntu/ bionic-backports main restricted universe multiversedeb-src http://mirrors.aliyun.com/ubuntu/ bionic-backports main restricted universe multiversedeb http://mirrors.aliyun.com/ubuntu/ bionic-proposed main restricted universe multiversedeb-src http://mirrors.aliyun.com/ubuntu/ bionic-proposed main restricted universe multiverse' &gt;/etc/apt/sources.list 2. ç³»ç»Ÿæ›´æ–°12sudo apt updatesudo apt upgrade 3. å®‰è£…æœç‹—è¾“å…¥æ³•3.1 å®‰è£… fcitx è¾“å…¥æ¡†æž¶1sudo apt install fcitx 3.2 ä¸‹è½½ linux ç‰ˆæœ¬æœç‹—è¾“å…¥æ³•1wget http://cdn2.ime.sogou.com/dl/index/1524572264/sogoupinyin_2.2.0.0108_amd64.deb 3.3 å®‰è£…1sudo dpkg -i sogoupinyin_2.2.0.0108_amd64.deb å¦‚æžœå‡ºçŽ°ä¾èµ–åŒ…çš„é—®é¢˜æ‰§è¡Œ 1sudo apt --fix-broken install 3.4 è¿›å…¥è®¾ç½® æ ¹æ®æç¤ºå®‰è£…è¾“å…¥æ³• å°†è¾“å…¥æ¡†æž¶æ”¹ä¸º fcitx ç‚¹å‡»Apply System-WideåŽå°†ç”¨æˆ·æ³¨é”€ï¼Œå¦‚æžœæ³¨é”€æ²¡æœ‰æ•ˆæžœé‚£ä¹ˆå°±é‡å¯å§ã€‚ ç™»é™†åŽå³ä¸Šè§’å‡ºçŽ°å°é”®ç›˜ ç‚¹å‡»Configure Current Input Methodï¼Œè¿›å…¥Input Methodç•Œé¢ï¼Œé€‰æ‹©åŠ å·æ·»åŠ æœç‹—è¾“å…¥æ³•ã€‚ 4. è½¯ä»¶å¸è½½ã€å®‰è£…4.1 å¸è½½ libreOffice å®‰è£… wps1sudo apt remove libreoffice-common 4.2 å®‰è£… wps12wget https://wdl1.cache.wps.cn/wps/download/ep/Linux2019/8722/wps-office_11.1.0.8722_amd64.debsudo dpkg -i wps-office_11.1.0.8722_amd64.deb 4.3 å¸è½½ firefox å®‰è£… chrome1234sudp apt remove firefoxwget https://dl.google.com/linux/direct/google-chrome-stable_current_amd64.debsudo dpkg -i google-chrome-stable_current_amd64.deb 5. vim é…ç½®5.1 ä¸‹è½½ vim1sudo apt install vim 5.2 ç¼–è¾‘ vim é…ç½®æ–‡ä»¶1sudo vim /etc/vim/vimrc æ·»åŠ å¦‚ä¸‹ä»£ç ï¼š 1é…ç½®è¿˜åœ¨æ›´æ–° 6. ç¾ŽåŒ– ubuntu6.1 å®‰è£… unity-tweak-tool1sudo apt intall unity-tweak-tool 6.2 ä¸‹è½½ flatabulous ä¸»é¢˜1234# æŒ‰ç…§å®˜æ–¹æ•™ç¨‹ä½¿ç”¨ add-apt-repository æ–¹æ³•å®šä½ä¸åˆ° flatabulous åŒ…ï¼Œæ”¹ç”¨æ‰‹åŠ¨å®‰è£…sudo add-apt-repository ppa://noobslab/themessudo apt updatesudo apt install flatabulous-theme 1234wget https://github.com/anmoljagetia/Flatabulous/archive/master.zipmkdir .thememv ./master.zip ~/.themeunzip master.zip 6.3 ä¸‹è½½ flat icons123sudo add-apt-repository ppa://noobslab/iconssudo apt updatesudo apt install ultra-flat-icons 6.4 æ‰“å¼€ unity-tweak-toolå†æ‰“å¼€ unity-tweak-tool æ—¶å‡ºçŽ°ï¼š 123 Gtk was imported without specifying a version first. Use gi.require_version(&apos;Gtk&apos;, &apos;3.0&apos;) before import to ensure that the right version gets loaded. from gi.repository import GtkError: schema com.canonical.notify-osd not installed è§£å†³åŠžæ³•å¦‚ä¸‹ï¼š 12sudo apt install notify-osdsudo apt install overlay-scrollbar å›¾æ ‡é…ç½®å¥½äº†,ä½†æ˜¯ä¸»é¢˜å› ä¸º GTK çš„åŽŸå› æ²¡æœ‰æˆåŠŸ,è®°å½•å¦‚ä¸‹ï¼š 6.5 ä¸‹è½½å­—ä½“åœ¨ monaco-font åº“ä¸­ä¸‹è½½ zip åŒ… 12unzip monaco-font-master.zipsudo ./install-font-ubuntu.sh https://github.com/todylu/monaco.ttf/blob/master/monaco.ttf?raw=true ä¸‹è½½å®ŒæˆåŽä½¿ç”¨unity-tweak-toolè®¾ç½®å­—ä½“ã€‚ 7. ç»ˆç«¯è¿™ä¸ªæ‰æ˜¯é‡å¤´æˆã€‚ å› ä¸ºå¾ˆå¤š linux é»˜è®¤çš„ç»ˆç«¯ shell éƒ½æ˜¯ bashï¼Œä½†æ˜¯ä¸å¤ªå¥½ç”¨ï¼Œæ‰€ä»¥æ”¹ä¸º zshã€‚ 7.1 ä¸‹è½½ zsh1sudo apt install zsh 7.2 ä¸‹è½½ oh-my-zsh1sh -c "$(wget -O- https://raw.githubusercontent.com/robbyrussell/oh-my-zsh/master/tools/install.sh)" 7.3 ä¿®æ”¹é»˜è®¤ shell1sudo usermod --shell /bin/zsh $USERNAME ä¿®æ”¹åŽè®°å¾— log_out é‡æ–°ç™»å½•ç”¨æˆ·ã€‚ 7.4 ä¿®æ”¹çš®è‚¤1234vim ~/.zshrc# ä¿®æ”¹çš®è‚¤ZSH_THEME="robbyrussell" 8. æ’ä»¶å®‰è£…8.1 autojump ä¸‹è½½ 1sudo apt install aotujump é…ç½® autojump 123vim /usr/share/doc/autojump/README.Debianecho '. /usr/share/autojump/autojump.sh' &gt;&gt; ~/.zshrcsource ~/.zshrc 8.2 zsh-syntax-highlighting å®‰è£… 1git clone https://github.com/zsh-users/zsh-syntax-highlighting.git $&#123;ZSH_CUSTOM:-~/.oh-my-zsh/custom&#125;/plugins/zsh-syntax-highlighting é…ç½® 12plugins=(zsh-syntax-highlighting)source ~/.zshrc 8.3 zsh-autosuggestions å®‰è£… 1git clone git://github.com/zsh-users/zsh-autosuggestions $ZSH_CUSTOM/plugins/zsh-autosuggestions é…ç½® 12plugins=(zsh-autosuggestions)source ~/.zshrc 8.4 git-open ä¸‹è½½ 1git clone https://github.com/paulirish/git-open.git $ZSH_CUSTOM/plugins/git-open é…ç½® 12plugins=(git-open)source ~/.zshrc 8.5 ä¿®æ”¹æŸ¥çœ‹ history æ ¼å¼1HIST_STAMPS="yyyy-mm-dd"]]></content>
      <categories>
        <category>Linux</category>
      </categories>
  </entry>
  <entry>
    <title><![CDATA[å·¥ä½œéšæƒ³]]></title>
    <url>%2F2019%2F07%2F07%2F%E5%B7%A5%E4%BD%9C%E9%9A%8F%E6%83%B3%2F</url>
    <content type="text"><![CDATA[ä¸€ä¸ªæœˆé›¶ 10 å¤©ä»Šå¤©æ˜¯ 7 æœˆçš„ç¬¬ä¸€ä¸ªå‘¨æœ«ï¼Œä¼˜ä¸€å®è´æŽ¥è¿‘å°¾å£°ï¼Œè™½ç„¶ä¸­é€”å‡ºçŽ°äº†è®¸å¤šæ„æ–™ä¹‹å¤–çš„ bugï¼Œä½†å¥½åœ¨æ²¡å‡ºä»€ä¹ˆå¤§é—®é¢˜ã€‚å·¥ä½œå¾ˆç´¯ï¼Œæ­¤å¤„çš„ç´¯ä¸æ˜¯è¯´å†™ä»£ç çš„ç´¯ï¼Œè€Œæ˜¯æ²Ÿé€šäº¤æµçš„ç´¯ã€‚ æ„Ÿè§‰æœ‰ç‚¹æ‰¿å—ä¸ä½äº†ã€‚ é¡¹ç›®åˆ†å·¥åŠå…¶ä¸æ˜Žç¡®ï¼Œé¡¹ç›® bug åˆ†é…åŠå…¶ä¸å‡†ç¡®ï¼Œæµ‹è¯•éƒ¨äººå‘˜åŠå…¶ä¸ä¸“ä¸šã€‚ç”¨äº†ä¸‰ä¸ªåŠå…¶å®žåœ¨å‡ºä¹Žæˆ‘çš„æ„æ–™ï¼Œå› ä¸ºå®žåœ¨æ²¡æƒ³åˆ°æµ‹è¯•æäº¤ bug è¿žæäº¤ç»™å‰ç«¯è¿˜æ˜¯åŽç«¯éƒ½ä¸æ¸…æ¥šã€‚æˆ‘æœ‰ç‚¹ç›®çžªå£å‘†ã€‚ é¡¹ç›®ä»Ž 6 æœˆåˆå¼€å§‹å¼€å‘ï¼ŒæœŸé—´éœ€æ±‚æ–‡æ¡£ç†è§£ä¸å¤Ÿé€å½»ï¼Œæ˜¯æˆ‘ä¸ªäººçš„åŽŸå› ï¼Œåœ¨å¯¹æŽ¥ OMS ç³»ç»Ÿçš„æ—¶å€™ç»™çš„å¯¹æŽ¥æ–‡æ¡£å±…ç„¶æ˜¯ 18 å¹´ 6 æœˆä»½çš„ï¼Œä¸€å¹´å‰çš„æ–‡æ¡£å¯¹æŽ¥å±žå®žæœ‰ç‚¹ç—›è‹¦ï¼Œæœ‰çš„å‚æ•°å’Œå­—æ®µå±…ç„¶éœ€è¦ä¸€ä¸ªä¸ªè°ƒè¯•æ¥æœ€åŽç¡®å®šã€‚è¿™äº›å…¶å®žéƒ½ä¸æ˜¯å¤§é—®é¢˜ï¼Œæœ€åŽå‚æ•°åŠ å¯†ï¼Œå‚æ•°å’Œå­—æ®µä¹Ÿç¡®å®šçš„å·®ä¸å¤šäº†ï¼Œç„¶åŽè¯´ä¸ç”¨æˆ‘æ¥å¯¹æŽ¥ OMSäº†ï¼Œè®©æˆ‘åŽ»å¯¹æŽ¥ DRP ç³»ç»Ÿï¼Œå¥½ã€‚é‚£å°±å¯¹æŽ¥å‘—ã€‚åœ¨å¯¹æŽ¥ DRP ç³»ç»Ÿçš„è¿‡ç¨‹ä¸­é‡åˆ°æœ€å¤§çš„å›°éš¾æ˜¯æŸ¥è¯¢æ•°æ®éœ€è¦ä¼  sql è¯­å¥å½¢å¼è¿‡åŽ»ã€‚æ— åŠ›åæ§½ï¼Œä¸çŸ¥é“æ˜¯æˆ‘å¤ªè½åŽäº†è¿˜æ˜¯ drp ç³»ç»Ÿå¤ªé«˜çº§æ•ˆçŽ‡å¤ªé«˜äº†ã€‚æœ€åŽå¯¹æŽ¥æ˜¯æˆåŠŸäº†ã€‚æŸ¥è¯¢æ•°æ®ä¹Ÿæ²¡é—®é¢˜ï¼Œè®¢å•æŽ¨é€å’Œå”®åŽå•æŽ¨é€ä¹Ÿå®Œæˆäº†ã€‚è¿™å‘¨äº” uat çš„æ—¶å€™è¯´éœ€è¦æ”¹éœ€æ±‚ã€‚ã€‚ã€‚ å¤§æ¦‚å¯ä»¥ä»Žæ–‡å­—ä¸­ä½“ä¼šåˆ°æˆ‘çš„æ— å¥ˆä¹‹æƒ…ï¼Œåœ¨å·¥ä½œå‰çœ‹åˆ°ç½‘ä¸Šçš„æ®µå­è¯´æ—¶é—´è¶Šä¹…çš„ä»£ç è¶Šåƒå±Žå±±ã€‚å½“æ—¶æˆ‘å¾®å¾®ä¸€ç¬‘ï¼ŒçŽ°åœ¨æŠ¥åº”æ¥äº†ã€‚æ¥çš„çŒä¸åŠé˜²ï¼ŒæŠŠæˆ‘ä¸€ä¸‹å­æžæ™•äº†ã€‚ ä¸Šå‘¨çŽ‹å®éœ€æ±‚ä¼šä»ªè¯´è¦æ”¹ç”¨å¾®æœåŠ¡äº†ï¼Œå½“æ—¶æˆ‘è¿˜æ¿€åŠ¨å¾—ä¸è¡Œï¼Œè¦é‡æž„ä»£ç äº†ã€‚è™½ç„¶çŸ¥é“è¿™ä¸æ˜¯ä¸€ä»¶ç®€å•çš„äº‹ï¼Œä½†æ˜¯è¿™ç§æŒ‘æˆ˜æˆ‘è§‰å¾—å¾ˆæœ‰åŠ¨åŠ›ï¼Œè€Œä¸æ˜¯å¯¹ä¸šåŠ¡è¿›è¡ŒæŸäº›è°ƒæ•´ã€‚ç»“æžœçŸ¥é“ï¼Œå¾®æœåŠ¡ä¸æ˜¯ç”±æˆ‘ä»¬æ¥å†™çš„ã€‚å“ŽðŸ˜”ã€‚ ä¸‹å‘¨äºŒåº”è¯¥æ˜¯æœ€åŽä¸€æ¬¡å‚ä¸Ž uat äº†ï¼Œä¹‹åŽå°±è¦å¼€å§‹ä¸‡å®é¡¹ç›®çš„å¼€å‘ï¼Œå¯¹æˆ‘æ¥è¯´æ˜¯æŒ‘æˆ˜æ˜¯æˆé•¿ï¼Œæˆ‘ä¼šå…¨åŠ›ä»¥èµ´çš„ã€‚ ç¬¬äºŒä¸ªè¯´è¯´ç”Ÿæ´»ï¼Œå·¥ä½œä¸€ä¸ªå¤šæœˆä»¥æ¥æˆ‘è§‰å¾—è¿˜æŒºæ»¡æ„çš„ï¼Œç”Ÿæ´»ç¨³æ­¥å‘å¥½ï¼Œæ¯å¤©éƒ½è¿˜è¿‡å¾—æŒºå……å®žã€‚æ—©ä¸Š 7 ç‚¹åŠå·¦å³èµ·åºŠï¼Œæ´—æ¾¡ç„¶åŽåƒæ—©é¥­ï¼Œå…«ç‚¹åŠå‡ºå‘åŽ»å…¬å¸ï¼Œå¤§æ¦‚ 40 åˆ†é’Ÿåˆ°ã€‚æ¯é€¢å‘¨ä¸€ã€ä¸‰ã€äº”çš„ä¸Šä¸‹ç­åœ°é“ä¼šæœ‰ python å’Œ mysql çš„ä¸“æ æ¥å­¦ä¹ ï¼Œå—¯ï¼ŒæŒºå¥½çš„ã€‚ä¹‹å‰éƒ½æ˜¯ç”¨çš„æ‘©æ‹œå•è½¦ï¼Œä½†æ˜¯æœ€è¿‘å‘çŽ°æ‘©æ‹œå•è½¦å°‘äº†å¥½å¤šï¼Œä¹‹å‰è¿™é‡Œé²œæœ‰ hello å•è½¦ï¼Œä½†çŽ°åœ¨ä¸€å¤§ç‰‡éƒ½æ˜¯ helloï¼Œé˜¿é‡Œè¿˜æ˜¯æœ‰é’±å•Šã€‚å‘æ‘©æ‹œå•è½¦è¯´å£°å¯¹ä¸èµ·æˆ‘æŠ›å¼ƒä½ äº†ï¼Œä½†æ˜¯æˆ‘æ²¡åŠžæ³•ã€‚ åœ¨ä¸Šç­é€”ä¸­æœ€å€¼å¾—å¤§è¯´ç‰¹è¯´çš„å°±æ˜¯è·¯ä¸Šçš„é£Žæ™¯äº†ï¼Œå¯è°“æ˜¯æœ‰å±±æœ‰æ°´æœ‰æ ‘æž—ï¼Œæœ‰èŠ±æœ‰é¸Ÿæœ‰çŒ«ç‹—ã€‚è·¯ä¸Šçœ‹ç€è¿™äº›é£Žæ™¯ç„¶åŽæ¥ä¸€é¦–åº”æ™¯çš„æ­Œæ›²ï¼Œä¼šè§‰å¾—äººç”Ÿä¸è¿‡å¦‚æ­¤äº†ã€‚æœ€ä»¤æˆ‘ç¾¡æ…•çš„å°±æ˜¯åœ¨æ²³è¾¹é’“é±¼çš„äººäº†ã€‚åœ¨ä¸Šç­ä¹‹å‰çš„æŸä¸ªæ—¶é—´å’Œä¸¤ä½é’“è€…é—²èŠï¼Œå‘çŽ°è¿™ç§ç”Ÿæ´»å¾ˆæƒ¬æ„ï¼Œä»–è¯´æ—©ä¸Š 6 ç‚¹æ¥ï¼Œè‡ªå·±å¸¦äº‹ç‰©ï¼Œç„¶åŽé’“çš„å¼€å¿ƒçš„è¯ä¼šé’“åˆ°æ™šä¸Šå…«ä¹ç‚¹ã€‚]]></content>
      <categories>
        <category>work</category>
      </categories>
      <tags>
        <tag>out</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Webèº«ä»½éªŒè¯ã€ä¼šè¯ç®¡ç†å’Œè®¿é—®æŽ§åˆ¶]]></title>
    <url>%2F2019%2F05%2F07%2FWeb%E8%BA%AB%E4%BB%BD%E9%AA%8C%E8%AF%81%E3%80%81%E4%BC%9A%E8%AF%9D%E7%AE%A1%E7%90%86%E5%92%8C%E8%AE%BF%E9%97%AE%E6%8E%A7%E5%88%B6%2F</url>
    <content type="text"><![CDATA[æœ¬æ–‡ç¿»è¯‘è‡ªï¼šWebèº«ä»½éªŒè¯ã€ä¼šè¯ç®¡ç†å’Œè®¿é—®æŽ§åˆ¶ ä»‹ç»Webèº«ä»½éªŒè¯ã€ä¼šè¯ç®¡ç†å’Œè®¿é—®æŽ§åˆ¶: ä¸€ä¸ªç½‘ç«™ä¼šè¯æ˜¯ç”¨æˆ·çš„ä¸€ç³»åˆ—çš„ç½‘ç»œ http è¯·æ±‚å’Œå“åº”äº‹åŠ¡å…³è”ã€‚çŽ°ä»£è€Œå¤æ‚çš„webåº”ç”¨ç¨‹åºè¦æ±‚æ¯ä¸ªç”¨æˆ·çš„ä¿¡æ¯å’ŒçŠ¶æ€å›ºå®šåœ¨å¤šè¯·æ±‚çš„æŒç»­æœŸé—´ã€‚å› æ­¤ï¼Œä¼šè¯æä¾›å»ºç«‹å˜é‡çš„èƒ½åŠ› - åƒè®¿é—®æƒé™å’Œæœ¬åœ°åŒ–è®¾ç½® - é€‚ç”¨äºŽç”¨æˆ·åœ¨ç½‘ç«™ä¼šè¯æŒç»­æœŸé—´åº”ç”¨ç”¨æˆ·çš„æ¯æ¬¡äº¤äº’ã€‚ ç½‘ç«™åº”ç”¨ç¨‹åºä¼šåˆ›å»ºä¼šè¯å¹¶ä¸”åœ¨æ¯ä¸ªç”¨æˆ·çš„ç¬¬ä¸€æ¬¡è¯·æ±‚ä¹‹åŽä¿æŒå¯¹åŒ¿åç”¨æˆ·çš„è¿½è¸ªã€‚ä¸€ä¸ªä¾‹å­å°±æ˜¯ä¼šä¿æŒç”¨æˆ·çš„è¯­è¨€è®¾ç½®ã€‚å¦å¤–ï¼Œç½‘ç«™åº”ç”¨ç¨‹åºåœ¨ç”¨æˆ·é€šè¿‡è®¤è¯åŽå»ºç«‹å’Œä¼šè¯çš„å…³è”å…³ç³»ã€‚è¿™ç¡®ä¿äº†åœ¨ç”¨æˆ·çš„ä»»ä½•å­è¯·æ±‚ä¸­ä¹Ÿä¼šåº”ç”¨å®‰å…¨è®¿é—®æŽ§åˆ¶æä¾›è®¤è¯çš„èƒ½åŠ›ï¼ŒæŽˆæƒè®¿é—®ç”¨æˆ·çš„ç§æœ‰æ•°æ®ï¼Œè€Œä¸”ä¼šæé«˜ç½‘ç«™ç¨‹åºçš„å¯ç”¨æ€§ã€‚å› æ­¤ï¼Œç›®å‰çš„ç½‘ç«™åº”ç”¨ç¨‹åºåœ¨ä¸Šä¸€ä¸ªè®¤è¯å’Œä¸‹ä¸€ä¸ªè®¤è¯å¯ä»¥æä¾›ä¼šè¯åŠŸèƒ½ã€‚ ä¸€æ—¦è®¤è¯ä¼šè¯å»ºç«‹æˆåŠŸï¼Œä¼šè¯ ID(æˆ–è€…å« token)ç­‰åŒäºŽåº”ç”¨ç¨‹åºæä¾›çš„æœ€å¼ºè®¤è¯æ–¹æ³•ï¼Œåƒç”¨æˆ·åå’Œå¯†ç ï¼Œå¯†ç çŸ­è¯­ï¼Œä¸€æ¬¡æ€§å¯†ç (OTP)ï¼ŒåŸºäºŽå®¢æˆ·ç«¯çš„æ•°å­—è¯ä¹¦ï¼Œæ™ºèƒ½å¡ï¼Œæˆ–è€…ç”Ÿç‰©è¯†åˆ«æŠ€æœ¯(å¦‚æŒ‡çº¹æˆ–çœ¼ç›è§†ç½‘è†œ)ã€‚å‚è€ƒOWASP Authentication Cheat Sheet ä¼šè¯ ID æˆ–è€… token é€šè¿‡ç½‘ç«™åº”ç”¨ç¨‹åºå¼ºåˆ¶ç»‘å®šç”¨æˆ·è®¤è¯è¯ä¹¦(ä»¥ç”¨æˆ·ä¼šè¯çš„å½¢å¼)é€šè¿‡ HTTP æµé‡å’Œæ‰§è¡Œé€‚å½“çš„è®¿é—®æŽ§åˆ¶ã€‚åœ¨çŽ°ä»£ç½‘ç«™åº”ç”¨ç¨‹åºè¿™ä¸‰ä¸ªç»„ä»¶(è®¤è¯ã€ä¼šè¯ç®¡ç†ã€è®¿é—®æŽ§åˆ¶)çš„å¤æ‚æ€§ï¼Œæ­¤å¤–ï¼Œå®žçŽ°å’Œç»‘å®šä¹Ÿå­˜åœ¨äºŽç½‘ç«™å¼€å‘äººå‘˜æ‰‹ä¸­(å‘å¼€å‘æ¡†æž¶å¹¶ä¸æä¾›è¿™äº›ç»„ä»¶ä¹‹é—´å¼ºåˆ¶çš„å…³ç³»)ï¼Œå®žçŽ°å®‰å…¨ä¼šè¯ç®¡ç†æ¨¡å—éžå¸¸å…·æœ‰æŒ‘æˆ˜æ€§ã€‚ ä¼šè¯ ID çš„æ³„éœ²ã€æ•èŽ·ã€é¢„æµ‹ã€æš´åŠ›æˆ–è€…ä¸å˜ä¼šå¯¼è‡´ä¼šè¯è¢«åŠ«æŒï¼Œæ”»å‡»è€…å¯ä»¥åœ¨ç½‘ç«™åº”ç”¨ç¨‹åºä¸­å®Œå…¨çš„æ¨¡ä»¿å—å®³è€…ã€‚æ”»å‡»è€…å¯ä»¥æ‰§è¡Œä¸¤ç§ç±»åž‹çš„ä¼šè¯åŠ«æŒæ”»å‡»ï¼Œé’ˆå¯¹æ€§å’Œä¸€èˆ¬æ€§ã€‚åœ¨é’ˆå¯¹æ€§çš„æ”»å‡»ä¸­ï¼Œæ”»å‡»è€…çš„ç›®æ ‡æ˜¯æ¨¡ä»¿ç‰¹å®š(æˆ–ç§å¯†)çš„ç½‘ç«™åº”ç”¨ç¨‹åºå—å®³è€…ã€‚ä¸€èˆ¬æ€§çš„æ”»å‡»ï¼Œæ”»å‡»è€…çš„ç›®æ ‡æ˜¯æ¨¡ä»¿(æˆ–èŽ·å–è®¿é—®)ç½‘ç«™åº”ç”¨ç¨‹åºä¸­ä»»æ„æœ‰æ•ˆæˆ–åˆæ³•çš„ç”¨æˆ·ã€‚ ä¼šè¯ ID å±žæ€§ä¸ºäº†ä¿æŒè®¤è¯çŠ¶æ€å’Œè¿½è¸ªç½‘ç«™åº”ç”¨ç¨‹åºä¸­ç”¨æˆ·çš„è®¿é—®è¿›åº¦ï¼Œåº”ç”¨ç¨‹åºä¸ºç”¨æˆ·æä¾›äº†ä¼šè¯è¯†åˆ«ç (ä¼šè¯ ID æˆ– token)åœ¨ä¼šè¯åˆ›å»ºæ—¶ï¼Œè€Œä¸”åœ¨ä¼šè¯æŒç»­æœŸé—´å¯ä»¥é€šè¿‡ç”¨æˆ·å’Œç½‘ç«™åº”ç”¨ç¨‹åºåˆ†äº«å’Œä¿®æ”¹(åœ¨æ¯æ¬¡ HTTP è¯·æ±‚ä¸­éƒ½ä¼šå‘é€)ã€‚ä¼šè¯ ID å°±æ˜¯é”®å€¼å¯¹ã€‚ ä¸ºäº†å®žçŽ°å®‰å…¨ä¼šè¯ ID çš„ç›®æ ‡ï¼Œç”Ÿæˆçš„è¯†åˆ«ç (ID æˆ– token)å¿…é¡»æ»¡è¶³ä¸‹é¢çš„å±žæ€§ã€‚ ä¼šè¯ ID åç§°æŒ‡çº¹è¯†åˆ«ä¼šè¯ ID ä½¿ç”¨çš„é”®åä¸åº”è¯¥å…·æœ‰æè¿°æ€§ï¼Œä¹Ÿä¸åº”è¯¥æä¾›ä¸å¿…è¦çš„ç»†èŠ‚å’Œ ID ç›¸å…³çš„ç›®çš„å’Œæ„å›¾ã€‚ æœ€å¸¸è§çš„ç½‘ç«™åº”ç”¨ç¨‹åºå¼€å‘æ¡†æž¶ä½¿ç”¨çš„ä¼šè¯ ID å¾ˆå®¹æ˜“è¢«è¯†åˆ«ï¼Œå‘PHPSESSID(PHP)ï¼ŒJSESSIONID(J2EE)ï¼ŒCFID&amp;CFTOKEN(ColdFusion)ï¼ŒASP.NET_SessionId(ASP.NET)ï¼Œç­‰ç­‰ã€‚å› æ­¤ï¼Œä¼šè¯ ID é”®åå¯ä»¥é€éœ²æŠ€æœ¯å’Œç½‘ç«™ä½¿ç”¨çš„è¯­è¨€ã€‚ æŽ¨èæ”¹å˜ç½‘ç«™å¼€å‘æ¡†æž¶ä½¿ç”¨çš„é»˜è®¤ä¼šè¯ ID åï¼Œåƒ idã€‚ ä¼šè¯ ID çš„é•¿åº¦ä¼šè¯ ID ä¸ºäº†é˜²æ­¢æš´åŠ›æ”»å‡»å¿…é¡»è¶³å¤Ÿé•¿ï¼Œæ”»å‡»è€…å¯ä»¥éåŽ†æ•´ä¸ª ID å€¼èŒƒå›´å¹¶éªŒè¯æ˜¯å¦å­˜åœ¨æœ‰æ•ˆä¼šè¯ã€‚ ä¼šè¯ ID é•¿è‡³å°‘ 128 ä½(16 å­—èŠ‚)ã€‚ æ³¨æ„ï¼š]]></content>
      <categories>
        <category>ç¿»è¯‘</category>
      </categories>
  </entry>
  <entry>
    <title><![CDATA[flask æºç é˜…è¯»]]></title>
    <url>%2F2019%2F05%2F07%2Fflask-%E6%BA%90%E7%A0%81%E9%98%85%E8%AF%BB%2F</url>
    <content type="text"><![CDATA[å¯åŠ¨ py æ–‡ä»¶ å¯¼å…¥ request æˆ– session 1from flask import request æ‰§è¡Œ flask æ–‡ä»¶ï¼Œç”Ÿæˆ requestå¯¹è±¡ï¼Œè¿™æ˜¯ä¸ªå…¨å±€çš„requestå¯¹è±¡ï¼Œè¯·æ±‚æ¥çš„æ•°æ®ï¼Œå…ƒæ•°æ®éƒ½åœ¨è¿™ä¸ªrequesté‡Œé¢ã€‚ ç”Ÿæˆ request å¯¹è±¡å…¶å®žæ˜¯LocalProxyç±»çš„å®žä¾‹ 12request = LocalProxy(partial(_lookup_req_object, 'request')) æ‰§è¡Œ initæ–¹æ³• 1234567891011121314def __init__(self, local, name=None): object.__setattr__(self, '_LocalProxy__local', local) object.__setattr__(self, '__name__', name) if callable(local) and not hasattr(local, '__release_local__'): # "local" is a callable that is not an instance of Local or # LocalManager: mark it as a wrapped function. object.__setattr__(self, '__wrapped__', local) å…¶ä¸­partial(_lookup_req_obj, &#39;request)å½“åšå‚æ•°ä¼ ç»™inité‡Œé¢çš„localå˜é‡ã€‚ partial å‡½æ•°ï¼šåå‡½æ•°ï¼Œå½“æˆ‘ä»¬è¦æ‰§è¡Œä¸€ä¸ªå‡½æ•°æ—¶ï¼Œä¼šé‡åˆ°å‚æ•°ä¸é½ï¼Œé€‰æ‹©åå‡½æ•°å…ˆå°†éƒ¨åˆ†å‚æ•°ä¼ è¿›åŽ»ï¼Œç»è¿‡åå‡½æ•°ä¼šç”Ÿæˆä¸€ä¸ªfunctools.partialå¯¹è±¡ï¼Œæ˜¯è¦æ‰§è¡Œå‡½æ•°çš„å†…å­˜åœ°å€ï¼Œä¸è¿‡å‚æ•°å·²ç»ä¼ è¿›åŽ»äº†ã€‚ æ‰§è¡Œ__setattr__è®¾å€¼ã€‚ 12object.__setattr__(self, '_LocalProxy__local', local) ä¸ºä»€ä¹ˆä¸ç›´æŽ¥ä½¿ç”¨self._Local__local = localè¿™ç§è®¾ç½®å±žæ€§çš„æ–¹æ³•å‘¢ï¼Ÿ ç¬¬ä¸€ç‚¹æ˜¯å› ä¸ºï¼Œå¦‚æžœä½¿ç”¨selfè®¾ç½®å€¼çš„è¯ä¼šè°ƒç”¨ç±»çš„setattræ–¹æ³•ï¼Œè€Œsetattræ–¹æ³•è¢«é‡å†™ï¼Œç”¨æ¥èŽ·å–å½“å‰__local()å¯¹è±¡ä¸­çš„å±žæ€§å€¼äº†ï¼Œè¿™æ ·ä¼šäº§ç”Ÿå†²çªï¼Œè€Œè¿™é‡Œåªéœ€è¦ç®€å•çš„ç»™selfè®¾ç½®ä¸€ä¸ªå€¼ï¼Œæ‰€ä»¥é‡‡ç”¨çˆ¶ç±»çš„setattræ¥è®¾ç½®å€¼ï¼Œé‚£ä¹ˆä¸ºä»€ä¹ˆä¸æ˜¯object.__setattr__(self, &#39;__local&#39;, local)è¿™ç§æ–¹å¼å‘¢ï¼Ÿå› ä¸º__localæ˜¯ç±»ç§æœ‰å±žæ€§ï¼Œæƒ³è¦ä½¿ç”¨çš„è¯éœ€è¦æŒ‰ç…§è¿™ä¸ªæ–¹å¼æ¥ã€‚ ç»è¿‡è¿™ä¸€æ­¥ï¼Œå°†localï¼Œä¹Ÿå°±æ˜¯ä¼ è¿›æ¥çš„åå‡½æ•°å†…å­˜åœ°å€èµ‹å€¼ç»™__localå±žæ€§äº†ã€‚ æ‰§è¡Œ app.run()åšçš„äº‹æºä»£ç å¦‚ä¸‹ï¼š 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172def run(self, host=None, port=None, debug=None, load_dotenv=True, **options): if os.environ.get('FLASK_RUN_FROM_CLI') == 'true': from .debughelpers import explain_ignored_app_run explain_ignored_app_run() return if get_load_dotenv(load_dotenv): cli.load_dotenv() # if set, let env vars override previous values if 'FLASK_ENV' in os.environ: self.env = get_env() self.debug = get_debug_flag() elif 'FLASK_DEBUG' in os.environ: self.debug = get_debug_flag() # debug passed to method overrides all other sources if debug is not None: self.debug = bool(debug) _host = '127.0.0.1' _port = 5000 server_name = self.config.get('SERVER_NAME') sn_host, sn_port = None, None if server_name: sn_host, _, sn_port = server_name.partition(':') host = host or sn_host or _host port = int(port or sn_port or _port) options.setdefault('use_reloader', self.debug) options.setdefault('use_debugger', self.debug) options.setdefault('threaded', True) cli.show_server_banner(self.env, self.debug, self.name, False) from werkzeug.serving import run_simple try: run_simple(host, port, self, **options) finally: # reset the first request information if the development server # reset normally. This makes it possible to restart the server # without reloader and that stuff from an interactive shell. self._got_first_request = False å¯åŠ¨ web æœåŠ¡ 12run_simple(host, port, self, **options å…¶ä¸­selfæ˜¯Flaskç±»çš„ä¸€ä¸ªå®žä¾‹ã€‚ æ‰§è¡Œå‡½æ•°å†…çš„innerå‡½æ•°ï¼Œæ‰§è¡Œmake_serverå‡½æ•° æ‰§è¡Œ make_server å‡½æ•° 123456789101112131415161718192021222324252627282930313233343536def make_server(host=None, port=None, app=None, threaded=False, processes=1, request_handler=None, passthrough_errors=False, ssl_context=None, fd=None): """Create a new server instance that is either threaded, or forks or just processes one request after another. """ if threaded and processes &gt; 1: raise ValueError("cannot have a multithreaded and " "multi process server.") elif threaded: return ThreadedWSGIServer(host, port, app, request_handler, passthrough_errors, ssl_context, fd=fd) elif processes &gt; 1: return ForkingWSGIServer(host, port, app, processes, request_handler, passthrough_errors, ssl_context, fd=fd) else: return BaseWSGIServer(host, port, app, request_handler, passthrough_errors, ssl_context, fd=fd) å¯åŠ¨å¥—æŽ¥å­— æ‰§è¡Œ BaseWSGIServer 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172def __init__(self, host, port, app, handler=None, passthrough_errors=False, ssl_context=None, fd=None): if handler is None: handler = WSGIRequestHandler self.address_family = select_ip_version(host, port) if fd is not None: real_sock = socket.fromfd(fd, self.address_family, socket.SOCK_STREAM) port = 0 HTTPServer.__init__(self, get_sockaddr(host, int(port), self.address_family), handler) self.app = app self.passthrough_errors = passthrough_errors self.shutdown_signal = False self.host = host self.port = self.socket.getsockname()[1] # Patch in the original socket. if fd is not None: self.socket.close() self.socket = real_sock self.server_address = self.socket.getsockname() if ssl_context is not None: if isinstance(ssl_context, tuple): ssl_context = load_ssl_context(*ssl_context) if ssl_context == 'adhoc': ssl_context = generate_adhoc_ssl_context() # If we are on Python 2 the return value from socket.fromfd # is an internal socket object but what we need for ssl wrap # is the wrapper around it :( sock = self.socket if PY2 and not isinstance(sock, socket.socket): sock = socket.socket(sock.family, sock.type, sock.proto, sock) self.socket = ssl_context.wrap_socket(sock, server_side=True) self.ssl_context = ssl_context else: self.ssl_context = None åœ¨æ‰§è¡Œ init æ–¹æ³•æ—¶ï¼Œä¼šæ‰§è¡ŒHTTPServer.__init__ï¼Œå› ä¸ºHTTPServer æ²¡æœ‰åˆå§‹åŒ–æ–¹æ³•ï¼Œæ‰€ä»¥æ‰§è¡Œçˆ¶ç±»TcpServerçš„initï¼Œæºç å¦‚ä¸‹ï¼š 123456789101112131415161718192021222324def __init__(self, server_address, RequestHandlerClass, bind_and_activate=True): """Constructor. May be extended, do not override.""" BaseServer.__init__(self, server_address, RequestHandlerClass) self.socket = socket.socket(self.address_family, self.socket_type) if bind_and_activate: try: self.server_bind() self.server_activate() except: self.server_close() raise åœ¨è¿™é‡Œå°±ä¼šç»‘å®š ip å’Œç«¯å£å¹¶è¿›è¡Œç›‘å¬è¯·æ±‚ã€‚ ç›‘å¬è¯·æ±‚ï¼Œæ‰§è¡ŒTcpServer.server_activate() 12345678910def server_activate(self): """Called by constructor to activate the server. May be overridden. """ self.socket.listen(self.request_queue_size) æ‰§è¡Œ self.socket.listen 123456789101112131415161718def listen(self, backlog=None): # real signature unknown; restored from __doc__ """ listen([backlog]) Enable a server to accept connections. If backlog is specified, it must be at least 0 (if it is lower, it is set to 0); it specifies the number of unaccepted connections that the system will allow before refusing new connections. If not specified, a default reasonable value is chosen. """ pass æŸ¥çœ‹ cpython çš„æºç å…³äºŽ socket çš„ï¼Œå‘çŽ°æ˜¯ç”¨ c å†™çš„ï¼Œç›®å‰çœ‹ä¸æ‡‚ï¼Œè®°å½•å¦‚ä¸‹ï¼š 12345678910111213141516171819202122232425262728293031323334353637383940static PyObject * sock_listen(PySocketSockObject *s, PyObject *args) &#123; /* We try to choose a default backlog high enough to avoid connection drops * for common workloads, yet not too high to limit resource usage. */ int backlog = Py_MIN(SOMAXCONN, 128); int res; if (!PyArg_ParseTuple(args, "|i:listen", &amp;backlog)) return NULL; Py_BEGIN_ALLOW_THREADS /* To avoid problems on systems that don't allow a negative backlog * (which doesn't make sense anyway) we force a minimum value of 0. */ if (backlog &lt; 0) backlog = 0; res = listen(s-&gt;sock_fd, backlog); Py_END_ALLOW_THREADS if (res &lt; 0) return s-&gt;errorhandler(); Py_RETURN_NONE; &#125; serve_foreverè¿”å›ž BaseServerç±»å¯¹è±¡ç»™srvï¼Œæ‰§è¡Œè¯¥å¯¹è±¡çš„serve_foreveræ–¹æ³• æ‰§è¡Œserve_forever æ–¹æ³• 12345678910111213141516def serve_forever(self): self.shutdown_signal = False try: HTTPServer.serve_forever(self) except KeyboardInterrupt: pass finally: self.server_close() è¿™é‡Œï¼Œå·²ç»æŠŠ flask å®žä¾‹ä¼ è¿›åŽ»äº†ï¼Œåœ¨ srv.appå°±æ˜¯ flask å®žä¾‹ï¼Œåœ¨serve_foereveré‡Œé¢æ˜¯ self.app æ‰§è¡Œ HTTPServer.serve_forever ç»è¿‡ mroæŸ¥è¯¢ï¼Œ 12345678graph TD A[HTTPServer] --&gt;|serve_forever| B(socketserver.TCPServer) B --&gt; C(BaseServer) C --&gt;D[BaseServer.serve_forever] æœ€ç»ˆæ‰§è¡Œçš„æ˜¯BaseServer.serve_foreveræ–¹æ³•ã€‚ æ‰§è¡Œ BaseServer.serve_forever 1234567891011121314151617181920212223242526272829303132333435363738394041424344def serve_forever(self, poll_interval=0.5): """Handle one request at a time until shutdown. Polls for shutdown every poll_interval seconds. Ignores self.timeout. If you need to do periodic tasks, do them in another thread. """ self.__is_shut_down.clear() try: # XXX: Consider using another file descriptor or connecting to the # socket to wake this up instead of polling. Polling reduces our # responsiveness to a shutdown request and wastes cpu at all other # times. with _ServerSelector() as selector: selector.register(self, selectors.EVENT_READ) while not self.__shutdown_request: ready = selector.select(poll_interval) if ready: self._handle_request_noblock() self.service_actions() finally: self.__shutdown_request = False self.__is_shut_down.set() åœ¨è°ƒç”¨è¯¥æ–¹æ³•æ—¶ï¼ŒHTTPSErver.serve_forever(self)ï¼Œè¿™é‡Œçš„selfæ˜¯BaseWSGIServerå¯¹è±¡ï¼Œè¿™ä¸ªå¯¹è±¡é‡Œé¢å°è£…äº†Flaskå®žä¾‹ï¼Œä¹Ÿå°±æ˜¯self.app æ‰§è¡Œ self._handle_request_noblock() 123456789101112131415161718192021222324252627282930313233343536373839404142def _handle_request_noblock(self): """Handle one request, without blocking. I assume that selector.select() has returned that the socket is readable before this function was called, so there should be no risk of blocking in get_request(). """ try: request, client_address = self.get_request() except OSError: return if self.verify_request(request, client_address): try: self.process_request(request, client_address) except Exception: self.handle_error(request, client_address) self.shutdown_request(request) except: self.shutdown_request(request) raise else: self.shutdown_request(request) æ‰§è¡Œ self.get_request() æ ¹æ® mro æŸ¥è¯¢ï¼Œå‘çŽ°æ‰§è¡Œçš„æ˜¯BaseWSGIServerçš„æ–¹æ³•get_reqeust 123456def get_request(self): con, info = self.socket.accept() return con, info æ‰§è¡Œ self.socket.accept 123456789101112131415161718192021222324252627282930313233343536def accept(self): """accept() -&gt; (socket object, address info) Wait for an incoming connection. Return a new socket representing the connection, and the address of the client. For IP sockets, the address info is a pair (hostaddr, port). """ fd, addr = self._accept() # If our type has the SOCK_NONBLOCK flag, we shouldn't pass it onto the # new socket. We do not currently allow passing SOCK_NONBLOCK to # accept4, so the returned socket is always blocking. type = self.type &amp; ~globals().get("SOCK_NONBLOCK", 0) sock = socket(self.family, type, self.proto, fileno=fd) # Issue #7995: if no default timeout is set and the listening # socket had a (non-zero) timeout, force the new socket in blocking # mode to override platform-specific socket flags inheritance. if getdefaulttimeout() is None and self.gettimeout(): sock.setblocking(True) return sock, addr æ‰§è¡Œ self._accept 123456def __getattribute__(self, *args, **kwargs): # real signature unknown """ Return getattr(self, name). """ pass è¯·æ±‚æ¥æ—¶å½“ä¸€ä¸ªè¯·æ±‚æ¥åˆ° BaseWSGIServeræœåŠ¡å™¨æ—¶ï¼Œç”±_acceptæŽ¥æ”¶è¯·æ±‚è°ƒç”¨self.appï¼Œå› ä¸ºFlaské‡Œé¢å®šä¹‰äº†__call__æ–¹æ³•ï¼Œæ‰€ä»¥ä¼šæ‰§è¡Œè¯¥æ–¹æ³• æ‰§è¡Œ__call__ 12345678910def __call__(self, environ, start_response): """The WSGI server calls the Flask application object as the WSGI application. This calls :meth:`wsgi_app` which can be wrapped to applying middleware.""" return self.wsgi_app(environ, start_response) æ‰§è¡Œ self.wsgi_app 123456789101112131415161718192021222324252627282930313233343536def wsgi_app(self, environ, start_response): ctx = self.request_context(environ) error = None try: try: ctx.push() response = self.full_dispatch_request() except Exception as e: error = e response = self.handle_exception(e) except: error = sys.exc_info()[1] raise return response(environ, start_response) finally: if self.should_ignore_error(error): error = None ctx.auto_pop(error) æ‰§è¡Œ self.request_contest 1234def request_context(self, environ): return RequestContext(self, environ) è¯¥å¤„çš„ selfæ˜¯Flaskå®žä¾‹ å®žä¾‹åŒ– RequestContext å¯¹è±¡ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748def __init__(self, app, environ, request=None): self.app = app if request is None: request = app.request_class(environ) self.request = request self.url_adapter = app.create_url_adapter(self.request) self.flashes = None self.session = None # Request contexts can be pushed multiple times and interleaved with # other request contexts. Now only if the last level is popped we # get rid of them. Additionally if an application context is missing # one is created implicitly so for each level we add this information self._implicit_app_ctx_stack = [] # indicator if the context was preserved. Next time another context # is pushed the preserved context is popped. self.preserved = False # remembers the exception for pop if there is one in case the context # preservation kicks in. self._preserved_exc = None # Functions that should be executed after the request on the response # object. These will be called before the regular "after_request" # functions. self._after_request_functions = [] self.match_request() å®žä¾‹åŒ– app.request_class(environ) 12345678910def __init__(self, environ, populate_request=True, shallow=False): self.environ = environ if populate_request and not shallow: self.environ['werkzeug.request'] = self self.shallow = shallow å®žä¾‹åŒ–çˆ¶ç±»BaseRequestçš„initæ–¹æ³• æ‰§è¡Œ ctx.push 12345678910111213141516171819202122232425262728293031323334353637383940414243444546def push(self): top = _request_ctx_stack.top if top is not None and top.preserved: top.pop(top._preserved_exc) # Before we push the request context we have to ensure that there # is an application context. app_ctx = _app_ctx_stack.top if app_ctx is None or app_ctx.app != self.app: app_ctx = self.app.app_context() app_ctx.push() self._implicit_app_ctx_stack.append(app_ctx) else: self._implicit_app_ctx_stack.append(None) if hasattr(sys, 'exc_clear'): sys.exc_clear() _request_ctx_stack.push(self) if self.session is None: session_interface = self.app.session_interface self.session = session_interface.open_session( self.app, self.request ) if self.session is None: self.session = session_interface.make_null_session(self.app) æ‰§è¡Œ_app_ctx_stack.top 123456789101112131415161718@property def top(self): """The topmost item on the stack. If the stack is empty, `None` is returned. """ try: return self._local.stack[-1] except (AttributeError, IndexError): return None æ‰§è¡Œ _request_ctx_stack.push(self) 1234567891011121314def push(self, obj): """Pushes a new item to the stack""" rv = getattr(self._local, 'stack', None) if rv is None: self._local.stack = rv = [] rv.append(obj) return rv è¿™ä¸€æ­¥å°† RequestContext å¯¹è±¡æ”¾åˆ°_local é‡Œé¢ï¼Œå¯¹å¯¹è±¡èµ‹å€¼è°ƒç”¨å¯¹è±¡çš„setattræ–¹æ³• æ‰§è¡Œ Local çš„ setattr 1234567891011121314def __setattr__(self, name, value): ident = self.__ident_func__() storage = self.__storage__ try: storage[ident][name] = value except KeyError: storage[ident] = &#123;name: value&#125; self.__storage__æ˜¯ä¸€ä¸ªå­—å…¸ï¼Œç±»ä¼¼äºŽä¸‹é¢ 123456storage = &#123; çº¿ç¨‹ id: &#123;'stack': []&#125;, &#125; æ‰§è¡Œ RequestContextçš„ auto_pop æ–¹æ³• 1234567891011121314def auto_pop(self, exc): if self.request.environ.get('flask._preserve_context') or (exc is not None and self.app.preserve_context_on_exception): self.preserved = True self._preserved_exc = exc else: self.pop(exc) æ‰§è¡Œæ˜¯RequestContext çš„ pop æ–¹æ³• 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768697071727374def pop(self, exc=_sentinel): """Pops the request context and unbinds it by doing that. This will also trigger the execution of functions registered by the :meth:`~flask.Flask.teardown_request` decorator. .. versionchanged:: 0.9 Added the `exc` argument. """ app_ctx = self._implicit_app_ctx_stack.pop() try: clear_request = False if not self._implicit_app_ctx_stack: self.preserved = False self._preserved_exc = None if exc is _sentinel: exc = sys.exc_info()[1] self.app.do_teardown_request(exc) # If this interpreter supports clearing the exception information # we do that now. This will only go into effect on Python 2.x, # on 3.x it disappears automatically at the end of the exception # stack. if hasattr(sys, 'exc_clear'): sys.exc_clear() request_close = getattr(self.request, 'close', None) if request_close is not None: request_close() clear_request = True finally: rv = _request_ctx_stack.pop() # get rid of circular dependencies at the end of the request # so that we don't require the GC to be active. if clear_request: rv.request.environ['werkzeug.request'] = None # Get rid of the app as well if necessary. if app_ctx is not None: app_ctx.pop(exc) assert rv is self, 'Popped wrong request context. ' '(%r instead of %r)' % (rv, self) æ‰§è¡Œ _request_ctx_stack.pop() 123456789101112131415161718192021222324def pop(self): """Removes the topmost item from the stack, will return the old value or `None` if the stack was already empty. """ stack = getattr(self._local, 'stack', None) if stack is None: return None elif len(stack) == 1: release_local(self._local) return stack[-1] else: return stack.pop()]]></content>
      <categories>
        <category>flask</category>
      </categories>
  </entry>
  <entry>
    <title><![CDATA[Linuxå‘½ä»¤æ¡ˆä¾‹]]></title>
    <url>%2F2019%2F05%2F03%2FLinux%E5%91%BD%E4%BB%A4%E6%A1%88%E4%BE%8B%2F</url>
    <content type="text"><![CDATA[æŸ¥çœ‹å¥—æŽ¥å­—ss -lntp åˆ—å‡ºå½“å‰å¼€å¯æœåŠ¡ æ£€æŸ¥ç½‘ç»œè¿žæŽ¥ping baidu.com æœç™¾åº¦å‘é€æ•°æ®åŒ… telnet 10.0.0.100 TELNETåè®®çš„ç”¨æˆ·ç•Œé¢ç”¨æ¥æ£€æŸ¥ç½‘ç»œ ç³»ç»ŸæŽ§åˆ¶ç›¸å…³systemctl stop NetworkManager åœç”¨ç½‘ç»œç®¡ç†å®ˆæŠ¤è¿›ç¨‹ systemctl disable NetworkManager ç¦ç”¨ç½‘ç»œç®¡ç†å®ˆæŠ¤è¿›ç¨‹ ç½‘å¡è®¾ç½®ç›¸å…³vim /etc/sysconfig/network-scripts/ifcfg-eth0 yumæºé…ç½®cd /etc/yum.repos.d/ rm -f ./* curl -o /etc/yum.repos.d/epel.repo http://mirrors.aliyun.com/repo/epel-7.repo curl -o /etc/yum.repos.d/CentOS-Base.repo http://mirrors.aliyun.com/repo/Centos-7.repo å®‰è£…å¸¸ç”¨å·¥å…·yun install -y net-tools bash-completion vim lszrz nc nmap ntpdate tree htop glances telnet unzip iftop iotop rsync æ›´æ–°æºyum repolist åˆ—å‡ºä»“åº“å¯ç”¨åŒ… é˜²ç«å¢™ç›¸å…³systemctl stop firewalld.service å…³é—­é˜²ç«å¢™æœåŠ¡ systemctl disable firewalld.service ç¦ç”¨é˜²ç«å¢™æœåŠ¡ vim /etc/selinux/config é…ç½® selinux SELINUX=disabled å…³æœºç›¸å…³shutdown -h now ç«‹å³å…³æœº shutdown -h 10 10åˆ†é’ŸåŽå…³æœº shutdown -c å–æ¶ˆå…³æœºæˆ–é‡å¯è®¡åˆ’ poweroff å…³æœº init 0 0è¿è¡Œçº§åˆ«ï¼Œå…³æœº é‡å¯ç›¸å…³shutdown -r 10 ååˆ†é’ŸåŽé‡å¯ reboot ç«‹åˆ»é‡å¯ halt ç«‹åˆ»åœæ­¢ç³»ç»Ÿï¼Œéœ€è¦äººå·¥å…³é—­ç”µæºï¼Œæ˜¯ reboot çš„é“¾æŽ¥æ–‡ä»¶ init 6 åˆ‡æ¢è¿è¡Œçº§åˆ«åˆ°6ï¼Œ6è¡¨ç¤ºé‡å¯ æ³¨é”€ç›¸å…³logout æ³¨é”€å¹¶é€€å‡ºå½“å‰ç”¨æˆ·çª—å£ exit æ³¨é”€å¹¶é€€å‡ºå½“å‰ç”¨æˆ·çª—å£ æ›´æ”¹ç½‘å¡é»˜è®¤å‘½åè§„åˆ™vim /etc/sysconfig/grub GRUB_CMDLINT_LINUX=â€™rhgb net.ifnames=0 biosdevname=0 quietâ€™ ç½‘ç»œæœåŠ¡ç›¸å…³systemctl restart network é‡å¯ç½‘ç»œ ip ç›¸å…³ip -a æŸ¥çœ‹æ‰€æœ‰ ip ifconfig æŸ¥çœ‹æ‰€æœ‰ ip ip a s eth0 æŸ¥çœ‹ç¬¬ä¸€å¼ ç½‘å¡ ip address show eth0 æŸ¥çœ‹ç¬¬ä¸€å¼ ç½‘å¡ ifconfig eth0 æŸ¥çœ‹ç¬¬ä¸€å¼ ç½‘å¡ ä¸»æœºåhostname æŸ¥çœ‹ä¸»æœºå hostnamectl set-hostname hostname ä¿®æ”¹ä¸»æœºå whoami æŸ¥çœ‹ä¸»æœºå uname -m æŸ¥çœ‹ä¸»æœºå å†…æ ¸ç›¸å…³cat /etc/redhat-release æŸ¥çœ‹å†…æ ¸ç‰ˆæœ¬ uname -a æŸ¥çœ‹å†…æ ¸ä¿¡æ¯ uname -r æŸ¥çœ‹ Linux å†…æ ¸ç‰ˆæœ¬ å‘½ä»¤è¡Œå¿«æ·é”®ctrl + c cancel å–æ¶ˆå½“å‰æ“ä½œ ctrl + l æ¸…ç©ºå½“å‰å±å¹• ctrl + d é€€å‡ºå½“å‰ç”¨æˆ· ctrl + r æŸ¥æ‰¾åŽ†å²å‘½ä»¤ history| grep ctrl + a å…‰æ ‡ç§»åˆ°è¡Œé¦– ctrl + e å…‰æ ‡ç§»åˆ°è¡Œå°¾ ctrl + u æŠŠå…‰æ ‡åˆ°è¡Œé¦–çš„å†…å®¹åˆ é™¤/å‰ªåˆ‡ ctrl + y ç²˜è´´ ctrl + k æŠŠå…‰æ ‡åˆ°è¡Œå°¾çš„å†…å®¹åˆ é™¤/å‰ªåˆ‡ ctrl + â†’ å‘å³ç§»åŠ¨ä¸€ä¸ªå•è¯ ctrl + â† å‘å·¦ç§»åŠ¨ä¸€ä¸ªå•è¯ ctrl + s é”å± ctrl + q è§£é” ctrl + w åˆ é™¤å½“å‰ä½ç½®è‡³ä¸Šä¸€ä¸ªç©ºæ ¼çš„å­—ç¬¦ cd ç›¸å…³cd ~ åˆ‡æ¢åˆ°å½“å‰ç›®å½•çš„å®¶ç›®å½• cd - åˆ‡æ¢åˆ°ä¸Šä¸€æ¬¡æ‰€åœ¨ä½ç½®çš„ç›®å½•ä¸‹ cd / åˆ‡æ¢åˆ°æ ¹ç›®å½• tree ç›¸å…³-d åªæ˜¾ç¤ºç›®å½• -L éåŽ†ç›®å½•çš„æœ€å¤§å±‚æ•°ï¼ŒåŽé¢åŠ å¤§äºŽ0çš„æ­£æ•´æ•° -F åœ¨æ¡å¹•åŽåŠ ä¸Šæ–‡ä»¶ç±»åž‹çš„æŒ‡ç¤ºç¬¦å·{*,/,=,@,|,å…¶ä¸­ä¸€ä¸ª} tree -L 1 -F /boot/ ä½¿ç”¨-F å‚æ•°ä¼šåœ¨ç›®å½•åŽæ·»åŠ â€™/â€˜æ–¹ä¾¿åŒºåˆ†ç›®å½• mkdir ç›¸å…³mkdir test -v ç©¿ä»¶ç›®å½•æ—¶æ‰“å°ç›¸å…³ä¿¡æ¯ mkdir linux/test -p çˆ¶ç›®å½•ä¸å­˜åœ¨æ—¶ä¸€èµ·åˆ›å»ºï¼Œé€’å½’åˆ›å»ºç›®å½• mkdir {oldboy,oldgirl,oldman} èŠ±æ‹¬å·é‡Œé¢çš„åŒæ—¶åˆ›å»º mkdir oldboy{a..z} åˆ›å»º oldboya-oldboyzçš„ç›®å½•ï¼Œåˆ›å»ºä¸è¿žç»­çš„ç›®å½•æ—¶ç”¨é€—å·éš”å¼€ touch ç›¸å…³{} ç”Ÿæˆåºåˆ— {1..10} {01..10} {a..z} ls ç›¸å…³-a æ˜¾ç¤ºæŒ‡å®šç›®å½•ä¸‹çš„æ‰€æœ‰å­ç›®å½•ä¸Žæ–‡ä»¶ï¼ŒåŒ…æ‹¬éšè—æ–‡ä»¶ -l ä»¥åˆ—è¡¨æ–¹å¼æ˜¾ç¤ºæ–‡ä»¶çš„è¯¦ç»†ä¿¡æ¯ ls -l=ll -h é…åˆ -l ä»¥äººæ€§åŒ–æ˜¾ç¤ºæ–‡ä»¶å¤§å° -t æ ¹æ®æœ€åŽä¿®æ”¹æ—¶é—´æŽ’åºï¼Œé»˜è®¤æ˜¯ä»¥æ–‡ä»¶åæŽ’åºï¼Œé€šå¸¸ä¸Ž-l è¿žç”¨ -F åœ¨æ¡ç›®åŽé¢åŠ ä¸Šæ–‡ä»¶ç±»åž‹çš„æŒ‡ç¤ºç¬¦å· -d æ˜¾ç¤ºç›®å½•æœ¬èº«çš„ä¿¡æ¯ï¼Œè€Œä¸æ˜¯æ˜¾ç¤ºç›®å½•çš„å†…å®¹ -r é€†åºï¼Œå€’åºæŽ’åº ls -lt æŒ‰ç…§æ—¶é—´è¿›è¡ŒæŽ’åº ls -lrt æ‰¾å‡ºæœ€æ–°çš„æ–‡ä»¶ -i æ˜¾ç¤ºç´¢å¼•èŠ‚ç‚¹ä¿¡æ¯ cp ç›¸å…³-r é€’å½’å¤åˆ¶ç›®å½• -p å¤åˆ¶çš„æ—¶å€™ä¿æŒå±žæ€§ä¸å˜ -d å¤åˆ¶çš„æ—¶å€™ä¿æŒè½¯é“¾æŽ¥ -a == -pdr -t å°†æ‰€æœ‰æºå‚æ•°å¤åˆ¶åˆ°ç›®å½•ä¸­ vim ç›¸å…³åº•è¡Œæ¨¡å¼:wq ä¿å­˜å¹¶é€€å‡º :x ä¿å­˜é€€å‡º :q é€€å‡º :q! å¼ºåˆ¶é€€å‡ºä¸ä¿å­˜ :set nu æ˜¾ç¤ºè¡Œå· :set nonu å–æ¶ˆæ˜¾ç¤ºè¡Œå· :set list ç»™æ¯è¡Œçš„æœ€åŽä¸€ä¸ªå­—ç¬¦åŠ ä¸Šæ ‡è®° :set nolist å–æ¶ˆæ ‡è®° :noh å–æ¶ˆé«˜äº®æ˜¾ç¤º :%s###g æ›¿æ¢å†…å®¹ ç¼–è¾‘æ¨¡å¼a åœ¨å…‰æ ‡ä¹‹åŽå¼€å§‹æ’å…¥æ•°æ® i åœ¨å…‰æ ‡ä¹‹å‰å¼€å§‹æ’å…¥æ•°æ® A åœ¨å…‰æ ‡æ‰€åœ¨è¡Œæœ«å°¾å¼€å§‹æ’å…¥æ•°æ® I åœ¨å…‰æ ‡æ‰€åœ¨è¡Œé¦–å¼€å§‹æ’å…¥æ•°æ® o åœ¨å½“æœŸè¡Œä¸‹é¢æ’å…¥ä¸€è¡Œå¹¶è¿›å…¥ç¼–è¾‘é­”æœ¯ O åœ¨å½“å‰è¡Œä¸Šé¢æ’å…¥ä¸€è¡Œå¹¶è¿›å…¥ç¼–è¾‘æ¨¡å¼ C åˆ é™¤å…‰æ ‡æ‰€åœ¨ä½ç½®åˆ°è¡Œå°¾çš„å†…å®¹å¹¶è¿›å…¥ç¼–è¾‘æ¨¡å¼ æ‰¹é‡æ“ä½œæ‰¹é‡åˆ é™¤ï¼šctrl+v é€‰æ‹© d åˆ é™¤ æ‰¹é‡å¢žåŠ ï¼šctrl+v é€‰æ‹© shift+iç¼–è¾‘ ESC åˆ é™¤å¤šè¡Œï¼šshift+v é€‰æ‹© d å¿«æ·é”®gg ç§»åˆ°æ–‡ä»¶ç¬¬ä¸€è¡Œ G ç§»åˆ°æ–‡ä»¶æœ€åŽä¸€è¡Œ 100gg ç§»åˆ°æ–‡ä»¶ç¬¬100è¡Œ ^ æŠŠå…‰æ ‡ç§»åˆ°è¡Œé¦– $ æŠŠå…‰æ ‡ç§»åˆ°è¡Œå°¾ D åˆ é™¤å…‰æ ‡æ‰€åœ¨ä½ç½®åˆ°è¡Œå°¾çš„å†…å®¹ ZZ å¿«é€Ÿä¿å­˜å¹¶é€€å‡º yy å¤åˆ¶å…‰æ ‡æ‰€åœ¨è¡Œ nyy å¤åˆ¶å¤šè¡Œ p ç²˜è´´ np å¤šæ¬¡ç²˜è´´ dd åˆ é™¤/å‰ªåˆ‡ä¸€è¡Œ ndd åˆ é™¤/å‰ªåˆ‡å¤šè¡Œ dG åˆ é™¤å½“å‰è¡Œåˆ°æ–‡ä»¶çš„æœ«å°¾ u æ’¤é”€(å‘½ä»¤è¡Œæ¨¡å¼ä¸‹) r æ›¿æ¢å…‰æ ‡æ‰€åœ¨å­—ç¬¦ x åˆ é™¤å…‰æ ‡æ‰€åœ¨å­—ç¬¦ cat ç›¸å…³-b æ˜¾ç¤ºè¡Œç¼–å·ï¼ˆå¿½ç•¥ç©ºè¡Œï¼‰ -n æ˜¾ç¤ºæ‰€æœ‰è¡Œç¼–å·ï¼ˆåŒ…æ‹¬ç©ºæ ¼ï¼‰ -A åœ¨æ¯è¡Œçš„æœ€åŽä¸€ä¸ªå­—ç¬¦åŠ ä¸Šå­—ç¬¦ æ–‡ä»¶å æ¸…ç©ºæ–‡ä»¶å†…å®¹ cat &gt;æ–‡ä»¶&lt;&lt;EOF ä»¥ EOF å¼€å¤´ä»¥ EOF ç»“å°¾ EOF å¯ä»¥æ˜¯ä»»ä½•å­—æ¯æˆ–æ•°å­— cat&gt;&gt;æ–‡ä»¶&lt;&lt;EOF è¡¨ç¤ºå†™å…¥æ–°å†…å®¹ï¼Œå³ä½¿ä¹‹å‰æœ‰å†…å®¹ä¹Ÿä¼šè¦†ç›– è¡¨ç¤ºåœ¨æ–‡ä»¶çš„æœ«å°¾è¿½åŠ æ–°å†…å®¹ï¼Œä¹‹å‰çš„å†…å®¹ä¸è¦†ç›– head ç›¸å…³headæ˜¾ç¤ºæ–‡ä»¶çš„å‰å‡ è¡Œï¼ˆé»˜è®¤æ˜¾ç¤º10è¡Œï¼‰ -n5 æ˜¾ç¤ºå‰5è¡Œ tail ç›¸å…³æ˜¾ç¤ºæ–‡ä»¶çš„æœ€åŽå‡ è¡Œ -n5 æ˜¾ç¤ºæ–‡ä»¶æœ€åŽ5è¡Œ -f â€“follow æ˜¾ç¤ºæ–‡ä»¶å®žæ—¶æ›´æ–°ï¼ˆæŸ¥çœ‹æ—¥å¿—ï¼‰ -F â€“follow â€“retry å¦‚æžœæ–‡ä»¶ä¸å­˜åœ¨ä¼šä¸æ–­è¿›è¡Œé‡è¯• ç½‘ç»œæµ‹è¯•ç›¸å…³ping æŽ¢æµ‹æŒ‡å®š ip æˆ–åŸŸåçš„ç½‘ç»œæƒ…å†µ telnet è¿œç¨‹ç®¡ç†ä¸Žç«¯å£æŽ¢æµ‹å‘½ä»¤ traceroute è·¯ç”±è·Ÿè¸ªå‘½ä»¤ wget ä¸‹è½½å‘½ä»¤ tcpdump -i eth0 -nnx port 21 -i æŒ‡å®šç½‘å¡æŽ¥å£ -nn å°†æ•°æ®åŒ…ä¸­çš„åŸŸåä¸ŽæœåŠ¡è½¬ä¸º ip å’Œç«¯å£ -X ä»¥åå…­è¿›åˆ¶å’Œ ASCII ç æ˜¾ç¤ºæ•°æ®åŒ…å†…å®¹ port æŒ‡å®šç›‘å¬çš„ç«¯å£ find ç›¸å…³find / -type f -name â€˜*yumâ€™ æŸ¥æ‰¾æ–‡ä»¶ç±»åž‹ä¸ºæ–‡ä»¶ä»¥ yum ç»“å°¾çš„æ–‡ä»¶ find / -maxdepth 2 -type f -iname â€˜*.txtâ€™ | xargs ls -l æŸ¥æ‰¾æœ€å¤§æ·±åº¦ä¸º2æ–‡ä»¶ç±»åž‹ä¸ºæ–‡ä»¶ä»¥ txt ç»“å°¾ä¸”å¿½ç•¥å¤§å°å†™çš„æ–‡ä»¶ find / -maxdepth 4 -type f -iname â€˜*.txtâ€™ | xargs ls -l æŸ¥æ‰¾æœ€å¤§æ·±åº¦ä¸º4æ™®é€šæ–‡ä»¶å¿½ç•¥å¤§å°å†™ä»¥txtç»“å°¾çš„æ–‡ä»¶ find ./ -type f -name â€˜*.txtâ€™ |xargs cp -t /tmp åœ¨å½“å‰æ–‡ä»¶å¤¹ä¸‹æŸ¥æ‰¾æ™®é€šæ–‡ä»¶ä»¥ txt ç»“å°¾çš„æ–‡ä»¶å¹¶æ‹·è´åˆ° tmp ç›®å½•ä¸‹ find ./ -type f -namd â€˜*.txtâ€™ |xargs -i cp {} /tmp/a åœ¨å½“å‰ç›®å½•ä¸‹æŸ¥æ‰¾ä»¥ txt ç»“å°¾çš„æ™®é€šæ–‡ä»¶å¹¶æ‹·è´åˆ°/tmp/aç›®å½•ä¸‹ cp $(find ./ -type f -name â€˜*.txtâ€™) /tmp/a å…ˆæ‰§è¡Œæ‹¬å·é‡Œé¢çš„ä¹‹åŽæ‹·è´ find ./ -type f -name â€˜*.txtâ€™ -exec cp {} /tmp/c ; find / -type f -size +100k -mtime -7 -name â€œ*.txtâ€ |xargs ls -lh åœ¨æ ¹ç›®å½•ä¸‹æŸ¥æ‰¾æ–‡ä»¶å¤§å°100k ä»¥ä¸Šä»¥ txt ç»“å°¾çš„ä¸”åœ¨7å¤©ä¹‹å†…ä¿®æ”¹çš„æ™®é€šæ–‡ä»¶ find / -type f -size +100k -mtime +7 -name â€œ*.txtâ€ |xargs ls -lh find ./ -type f -name â€œ*.shâ€ |xargs sed â€œs#oldgirl#python#gâ€ åœ¨å½“å‰ç›®å½•ä¸‹æ‰¾åˆ°ä»¥ sh ç»“å°¾çš„æ™®é€šæ–‡ä»¶å¹¶æŠŠæ–‡ä»¶é‡Œçš„ oldgirl æ›¿æ¢ä¸º python find ./ -type f -name â€˜*.shâ€™ | xargs sed -i â€˜s#oldgirl#python#gâ€™ æ ‡å‡†è¾“å…¥è¾“å‡ºé”™è¯¯æ ‡å‡†è¾“å…¥ï¼šä»£ç ä¸º0ï¼Œä½¿ç”¨&lt;æˆ–&lt;&lt; æ ‡å‡†è¾“å‡ºï¼šä»£ç ä¸º1ï¼Œä½¿ç”¨&gt;æˆ–&gt;&gt; æ ‡å‡†é”™è¯¯è¾“å‡ºï¼šä»£ç ä¸º2ï¼Œä½¿ç”¨2&gt;æˆ–2&gt;&gt; 2&gt;&amp;1 é”™è¯¯ä¿¡æ¯å’Œæ­£ç¡®ä¿¡æ¯æ”¾åœ¨ä¸€èµ· å°†æ ‡å‡†è¾“å…¥è½¬æ¢ä¸ºå‘½ä»¤è¡Œå‚æ•°seq 10 &gt; ett.txt xargs -n5 &lt; ett.txt -n åˆ†ç»„ï¼Œä¸»è¦é…åˆ find å‘½ä»¤ä½¿ç”¨ tar ç›¸å…³tar zcvf etc.tar.gz /etc å°†/etcæ‰“åŒ…ä¸ºetc.tar.gz tar tf etc.tar.gz ä¸è§£åŽ‹åˆ—å‡ºåŽ‹ç¼©åŒ…å†…å®¹ tar zcf etc1.tar.gz â€“exclude=/etc/sysconfig /etc é™¤äº† sysconfig æ–‡ä»¶å…¶ä»–æ‰“åŒ… tar xf etc.tar.gz è§£åŽ‹ tar xf etc.tar.gz -C /opt/ æŒ‡å®šè§£åŽ‹è·¯å¾„ä¸º/opt/ zip ç›¸å…³åŒæ­¥ç½‘ç»œæ—¶é—´ntpdate ntp1.aliyun.com æ—¶é—´ç›¸å…³date +%F 2019-04-10 date +%Y-%m-%d 2019-04-10 date +%y-%m-%d 19-04-10 date +%T 16:33:37 date +%H:%M:%S 16:34:05 date +%w 3(å‘¨ä¸‰) date -d â€œ-1 dayâ€ +%F 2019-04-11 date +%F-%T 2019-05-12-11:00:05 tr ç›¸å…³æ›¿æ¢æˆ–åˆ é™¤å­—ç¬¦ tr ä¸Ž &lt; è¿žç”¨ -d åˆ é™¤å­—ç¬¦ tr â€˜a-zâ€™ â€˜A-Zâ€™ &lt; æ–‡ä»¶å æŠŠæ–‡ä»¶é‡Œé¢çš„ a-zå­—æ¯æ›¿æ¢æˆå¤§å†™å­—æ¯ å­—ç¬¦é›†ç›¸å…³localectl set-locale LANG=zh_CN.UTF-8 è®¾ç½®å­—ç¬¦é›†ä¸ºä¸­æ–‡ source /etc/locale.conf echo $LANG æŸ¥çœ‹å­—ç¬¦é›† æŸ¥çœ‹ç”¨æˆ·ä¿¡æ¯echo $UID æŸ¥çœ‹å½“å‰ç™»å½•ç”¨æˆ· uid cat /etc/passwd æŸ¥çœ‹æ‰€æœ‰ç”¨æˆ·ä¿¡æ¯ cat /etc/group æŸ¥çœ‹ç»„ä¿¡æ¯ tail /etc/passwd æŸ¥çœ‹æœ€åŽåè¡Œç”¨æˆ·ä¿¡æ¯ cat /etc/shadow æŸ¥çœ‹ç”¨æˆ·å¯†ç ï¼ˆåŠ å¯†ï¼‰ æ·»åŠ ç”¨æˆ·useradd -u 666 web æŒ‡å®š uid åˆ›å»ºç”¨æˆ· groupadd -g 888 test æŒ‡å®š gid åˆ›å»ºç»„ useradd -u 777 -g 888 test æŒ‡å®š uid å’Œ gid åˆ›å»ºç”¨æˆ· useraddd -u 456 -g 888 -s /sbin/nologin -M xuni æŒ‡å®š uid å’Œ gid æŒ‡å®šç™»é™† shell ä»¥åŠä¸åˆ›å»ºå®¶ç›®å½•åˆ›å»ºç”¨æˆ· -s å’Œ-M éœ€æ­é…ä½¿ç”¨ ä¿®æ”¹å¯†ç passwd ä¿®æ”¹å½“å‰ç™»å½•ç”¨æˆ·å¯†ç  passwd username ä¿®æ”¹ç”¨æˆ·å¯†ç  echo â€˜1â€™ | passwd â€“stdin username å…äº¤äº’æ–¹å¼æ”¹å˜å¯†ç  whoami æ˜¾ç¤ºå½“å‰ç™»å½•ç”¨æˆ·å CTRL+d ç™»å‡ºå½“å‰ç”¨æˆ· id username æŸ¥çœ‹ç”¨æˆ· uidã€gidã€groups ä¿®æ”¹ç”¨æˆ·ç»„usermod -u 999 username ä¿®æ”¹å·²æœ‰ç”¨æˆ· uid usermod - g 999 username ä¿®æ”¹å·²æœ‰ç”¨æˆ· gid usermod -s /sbin/nologin username ä¿®æ”¹å·²æœ‰ç”¨æˆ·ä¸èƒ½ç™»é™† groupdel test åˆ é™¤ç”¨æˆ·ç»„ åˆ é™¤ç”¨æˆ·userdel -r username åˆ é™¤ç”¨æˆ·åŠç”¨æˆ·å®¶ç›®å½• groupdel groupname åˆ é™¤ç”¨æˆ·ç»„ æ—¶é—´ç›¸å…³stat filename æŸ¥çœ‹æ–‡ä»¶è¯¦ç»†å±žæ€§ ç´¢å¼•èŠ‚ç‚¹df -h æŸ¥çœ‹åˆ†åŒºä¿¡æ¯ df -i æŸ¥çœ‹åˆ†åŒº inode æ•°é‡ä½¿ç”¨æƒ…å†µ ll -i æ˜¾ç¤º inode å· é“¾æŽ¥ln (source file) (destination file) åˆ›å»ºç¡¬é“¾æŽ¥ ç±»æ¯”è¶…å¸‚å…¥å£ ln -s (source file) (destination file) åˆ›å»ºè½¯è¿žæŽ¥ï¼Œç›¸å½“äºŽä¸€ä¸ªå¿«æ·æ–¹å¼ åˆ›å»ºæµ‹è¯•æ–‡ä»¶dd if=/dev/zero of=/data/test/test.txt bs=10M count=1000 åˆ›å»ºä¸€ä¸ª10000M çš„æ–‡ä»¶ du -sh /*|grep G æŸ¥çœ‹æ ¹ç›®å½•ä¸‹çš„æ–‡ä»¶å¤§å° å¯»æ‰¾å ç”¨ inode å¤§çš„æ–‡ä»¶å¤¹find / -type d -size +1M æŸ¥æ‰¾æ ¹ç›®å½•ä¸‹é¢å¤§å°1M ä»¥ä¸Šçš„ç›®å½• find / -type d -size 1M |xargs ls -ldh å¯»æ‰¾å ç”¨å°æ–‡ä»¶è¿‡å¤šçš„ç›®å½• ll | wc -l ç»Ÿè®¡å½“å‰ç›®å½•ä¸‹é¢çš„æ–‡ä»¶æ•°é‡ æ‰¹é‡åˆ é™¤æ–‡ä»¶find ./ -type f -name â€œ*.txtâ€ | xargs rm -f æ‰¹é‡åˆ é™¤ä»¥ txt ç»“å°¾çš„æ–‡ä»¶ rm -rf ./odldboy0? åˆ é™¤å½“å‰ç›®å½•ä¸‹ç»“å°¾ä¸ºä»»æ„ä¸€ä¸ªå­—ç¬¦çš„æ–‡ä»¶ mkdir odldboy{00..10} æ‰¹é‡åˆ›å»ºç›®å½• rm -rf ./oldboy0[12]test []è¡¨ç¤ºæˆ–ï¼Œåˆ é™¤ rm -rf ./oldboy[!3]test !è¡¨ç¤ºéžï¼Œåˆ é™¤é™¤3ä¹‹å¤–çš„ç›®å½• ç”Ÿæˆéšæœºå­—ç¬¦tr -cd â€˜a-z0-9â€™ &lt; /dev/urandom | head -c 20 ç”Ÿæˆ20ä½éšæœºå­—ç¬¦ echo ç›¸å…³echo $PATH å…ˆæ‰§è¡Œåå¼•å·é‡Œé¢çš„ï¼Œä¹‹åŽæ‰“å°å‡ºæ¥ echo $PATH; date å‘½ä»¤åˆ†éš”ç¬¦ï¼Œæ‰§è¡Œä¸¤æ¡å‘½ä»¤æ¢è¡Œæ‰“å° echo -n $PATH; echo oldboy ä¸€è¡Œè¾“å‡º echo 1234567 | sed -r â€˜s#(3)(4)# #gâ€™ æ›¿æ¢ä¸º12 567 wc ç›¸å…³ll | wc -l è®¡ç®—å½“å‰ç›®å½•ä¸‹é¢çš„æ–‡ä»¶æ•°é‡ sed ç›¸å…³ifconfig eth0 | sed -nr â€˜2s#(.)t (.) n(.*)#2#gpâ€™ è¿‡æ»¤å‡º ip åœ°å€ ip a s eth0 |sed -nr â€˜3s#(.)t (.)/(.*)$#2#gpâ€™ è¿‡æ»¤å‡º ip åœ°å€ grep ç›¸å…³grep -o â€˜[a-Z]â€™ oldboy.log |sort |uniq -c |sort -nr æŸ¥æ‰¾æ–‡ä»¶ä¸­çš„å­—æ¯å¹¶è¿›è¡Œå€’å™æŽ’åº æ·»åŠ å…‹éš†æœºåŽç½‘å¡è®¾ç½®hostnamectl set-hostname ä¸»æœºå sed -i â€˜s#100#8#gâ€™ /etc/sysconfig/netword-scripts/ifcfg-eth[01] è®¾ç½®å†…ç½‘ ip å’Œå¤–ç½‘ ip systemctl restart netword é‡å¯ç½‘ç»œæœåŠ¡ bash é‡æ–°ç™»å½• bash å…³é—­é‚®ä»¶é€šçŸ¥echo â€œunset MAILCHECKâ€ &gt;&gt; /etc/profile source /etc/profile scp ç›¸å…³scp -r -P 520 ~/.vimrc root@192.168.11.171:/home/ æœ¬åœ°å±€åŸŸç½‘ä¼ è¾“æ–‡ä»¶åˆ°å…¶ä»–å±€åŸŸç½‘é‡Œçš„è™šæ‹Ÿæœº scp -P 522 docker_python3.6.tar.gz root@10.0.0.11:/home ä»Žæœ¬æœºä¼ åˆ°æœ¬æœºè™šæ‹Ÿæœºä¸Š æŒç»­æ›´æ–°]]></content>
      <categories>
        <category>Linux</category>
      </categories>
  </entry>
  <entry>
    <title><![CDATA[yum å‘½ä»¤è¯¦è§£]]></title>
    <url>%2F2019%2F05%2F03%2Fyum-%E5%91%BD%E4%BB%A4%E8%AF%A6%E8%A7%A3%2F</url>
    <content type="text"><![CDATA[CentOSä¸‹yumå‘½ä»¤è¯¦è§£ Yum: å³Yellowdog Update Modifier,æ˜¯ä¸€ç§åŸºäºŽrpmçš„åŒ…ç®¡ç†å·¥å…· yumå‘½ä»¤ä½¿ç”¨ç¤ºä¾‹ æ˜¾ç¤ºyumä»“åº“ æ˜¾ç¤ºæ‰€æœ‰ä»“åº“ 1[root@db01 ~]# yum repolist all æ˜¾ç¤ºå¯ç”¨çš„ä»“åº“ 1[root@db01 ~]# yum repolist enabled æ˜¾ç¤ºä¸å¯ç”¨çš„ä»“åº“ 1[root@db01 ~]# repolist disabled æ˜¾ç¤ºåº”ç”¨ç¨‹åºåŒ… æ˜¾ç¤ºæ‰€æœ‰çš„ç¨‹åºåŒ… [root@db01 ~]# yum list æˆ– [root@db01 ~]# yum list all æ”¯æŒæ­£åˆ™çš„æŸ¥è¯¢ [root@db01 ~]# yum list tre? æ˜¾ç¤ºå¯å®‰è£…çš„ç¨‹åºåŒ… æ˜¾ç¤ºæ‰€æœ‰å¯å®‰è£…çš„ç¨‹åºåŒ… [root@web ~]# yum list available [root@db01 ~]# yum list available php æ˜¾ç¤ºå¯æ›´æ–°æˆ–å·²å®‰è£…çš„ç¨‹åºåŒ… æ›´æ–° [root@web ~]# yum list updates å·²å®‰è£…çš„ç¨‹åºåŒ… [root@web ~]# yum list installed æ˜¾ç¤ºä»“åº“ä¸­æœ€è¿‘å¢žåŠ çš„ç¨‹åºåŒ… [root@web ~]# yum list recent å®‰è£…ç¨‹åºåŒ… #å®‰è£… tree ç¨‹åº [root@web ~]# yum install tree å‡çº§ç¨‹åºåŒ… [root@web ~]# yum update tree å¸è½½ç¨‹åºåŒ… [root@web ~]# yum remove tree æˆ– [root@web ~]# yum erase tree æŸ¥çœ‹ç¨‹åºåŒ…ä¿¡æ¯ [root@web ~]# yum info tree æŸ¥çœ‹æ–‡ä»¶çš„æ¥æº æŸ¥çœ‹æŸä¸€æ–‡ä»¶æ¥è‡ªäºŽé‚£ä¸ªç¨‹åºåŒ… [root@db01 ~]# yum provides ping æ¸…ç†æœ¬åœ°ç¼“å­˜ [root@db01 ~]# yum clean all #æ¸…æ¥šæ’ä»¶ç¼“å­˜ [root@db01 ~]# yum clean plugins æž„å»ºç¼“å­˜ [root@db01 ~]# yum makecache æœç´¢ [root@db01 ~]# yum search php æŸ¥çœ‹æŒ‡å®šåŒ…æ‰€ä¾èµ–çš„capabilities [root@db01 ~]# yum deplist php æŸ¥çœ‹yumäº‹åŠ¡åŽ†å² [root@db01 ~]# yum history åŒ…ç»„ç›¸å…³çš„å‘½ä»¤ [root@db01 ~]# yum groupinstall # å®‰è£…åŒ…ç»„ [root@db01 ~]# yum groupupdate #æ›´æ–°åŒ…ç»„ [root@db01 ~]# yum grouplist #æ˜¾ç¤ºåŒ…ç»„ [root@db01 ~]# yum groupremove #ç§»é™¤åŒ…ç»„ [root@db01 ~]# yum groupinfo #æŸ¥çœ‹åŒ…ç»„ä¿¡æ¯ è¿™äº›å‘½ä»¤å’Œä¸Šé¢çš„å‘½ä»¤ç”¨æ³•ç±»ä¼¼ï¼Œåªæ˜¯é’ˆå¯¹äºŽåŒ…ç»„è€Œè¨€]]></content>
      <categories>
        <category>yum</category>
      </categories>
  </entry>
  <entry>
    <title><![CDATA[Linux åŸºç¡€ä¼˜åŒ–åŠå®‰å…¨å½’çº³æ€»ç»“]]></title>
    <url>%2F2019%2F05%2F03%2FLinux-%E5%9F%BA%E7%A1%80%E4%BC%98%E5%8C%96%E5%8F%8A%E5%AE%89%E5%85%A8%E5%BD%92%E7%BA%B3%E6%80%BB%E7%BB%93%2F</url>
    <content type="text"><![CDATA[CentOS6 Linux çš„ç®¡ç†å°½é‡ä¸ç”¨ root ç”¨æˆ·ï¼Œåˆ©ç”¨ sudo å‘½ä»¤æ¥æŽ§åˆ¶æ™®é€šç”¨æˆ·å¯¹ç³»ç»Ÿçš„ç®¡ç†ã€‚æ–°å»ºä¸€ä¸ªç”¨æˆ·ï¼Œä½¿ç”¨ sudo å‘½ä»¤æ·»åŠ æƒé™ï¼Œè¯¦ç»†æ­¥éª¤å¦‚ä¸‹ï¼š 12345671. æ·»åŠ æ–°çš„ç”¨æˆ·ï¼šuseradd username2. æ£€æŸ¥æ˜¯å¦å·²ç»æ·»åŠ æˆåŠŸï¼šid username3. è®¾ç½®è¯¥ç”¨æˆ·çš„å¯†ç ï¼šecho 123321 | passwd --stdin username4. å¤‡ä»½ä¹‹å‰çš„æƒé™æ–‡ä»¶ï¼šcp /etc/sudoers(,.back&#125;5. å°†æ–°ç”¨æˆ·æ·»åŠ ç®¡ç†å‘˜æƒé™ï¼šecho 'username ALL=(ALL) NOPASSWD: ALL' &gt;&gt; /etc/sudoers6. æ£€æŸ¥æ˜¯å¦æˆåŠŸæ·»åŠ ï¼štail -1 /etc/sudoers7. é…ç½®ç”Ÿæ•ˆï¼švisudo -c æ›´æ”¹é»˜è®¤çš„è¿œç¨‹è¿žæŽ¥ SSH æœåŠ¡ç«¯å£ 1) ä¿®æ”¹é…ç½®æ–‡ä»¶ /etc/ssh/sshd_config 123Port 22ï¼Œæ”¹ä¸ºPort 52113ï¼ˆèŒƒå›´0â€”â€”65535ï¼‰ï¼›##é»˜è®¤ç«¯å£ä¸º22ListenAddress 0.0.0.0ï¼Œæ”¹ä¸ºListenAddress å†…ç½‘IPåœ°å€ï¼›##ç›‘å¬å†…ç½‘ipåœ°å€PermitRootLogion yesï¼Œæ”¹ä¸ºPermitRootLogion noï¼›##rootç”¨æˆ·è¿œç¨‹è¿žæŽ¥ï¼‰ 2) é‡å¯ ssh æœåŠ¡ç”Ÿæ•ˆ 1/etc/init.d/sshd reload 3) æŸ¥çœ‹ç«¯å£çŠ¶æ€ 1netstat -lntup | grep sshd å®šæ—¶è‡ªåŠ¨æ›´æ–°æœåŠ¡å™¨æ—¶é—´ 1) é…ç½® 123echo '#time sync by username ad 2019-04-01' &gt;&gt; /var/spool/cron/rootecho '/5 /usr/sbin/ntpdate ntp1.aliyun.com &gt; /dev/null 2&gt;&amp;1' &gt;&gt; /var/spool/cron/root 2) æŸ¥çœ‹æ˜¯å¦å·²æ›´æ–° 1crontab -l 3) å¤‡ä»½å®šæ—¶ä»»åŠ¡ 1cp /var/spool/cron/root&#123;,.back&#125; é…ç½® yum æº 1) åˆ›å»ºå¤‡ä»½æ–‡ä»¶å­˜æ”¾ç›®å½• 1mkdir -p /etc/yum.repos.d/&#123;default,back&#125; 2) å¤‡ä»½æ‰€æœ‰é»˜è®¤çš„é…ç½®æ–‡ä»¶ 1mv /etc/yum.repos.d/repo /etc/yum.repos.d/default 3) æ›´æ¢é˜¿é‡Œ yum æº 1wget -O /etc/yum.repos.d/CentOS-Base.repo http://mirrors.aliyun.com/repo/Centos-6.repo 4) å¤‡ä»½ yum æº 1cp /etc/yum.repos.d/CentOS-Base.repo /etc/yum.repos.d/default å…³é—­ selinux å’Œ iptables 1) å…³é—­ iptablesï¼š 1/etc/init.d/iptables stop 2) æ£€æŸ¥æ˜¯å¦å·²å…³é—­ 1/etc/init.d/iptables status 3) è®¾ç½®å¼€æœºä¸è‡ªå¯ 1chkconfig iptables off 4) ç¡®è®¤é…ç½® 1chkconfig --list iptables 5) å…³é—­ selinux 1sed -i 's#SELINUX=enforcing#SELINUX=disables#g' /etc/selinux/config 6) æŸ¥çœ‹å¹¶ç¡®è®¤é…ç½® 1cat /etc/selinux/config è°ƒæ•´æ–‡ä»¶æè¿°ç¬¦çš„æ•°é‡ 1) æŸ¥çœ‹é»˜è®¤æ–‡ä»¶æè¿°ç¬¦æ•°é‡1ulimit -n 2) ä¿®æ”¹ 1echo '* - nofile 65535' &gt;&gt; /etc/security/limits.conf 3) æŸ¥çœ‹ 1tail -1 /etc/security/limits.conf å®šæ—¶è‡ªåŠ¨æ¸…ç†é‚®ä»¶ç›®å½•åžƒåœ¾æ–‡ä»¶ ç²¾ç®€å¹¶ä¿ç•™å¿…è¦çš„å¼€æœºè‡ªå¯æœåŠ¡ 1) åªä¿ç•™é‡è¦çš„åŸºç¡€æœåŠ¡ï¼Œå…¶ä½™å…¨éƒ¨å…³é—­ 1chkconfig --list | egrep -v "sysstat|crond|sshd|network|rsyslog" | awk '&#123;print "chkconfig "$1, "off"&#125;' | bash 2) ç¡®è®¤é…ç½® 1chkconfig --list | grep 3:on ä¼˜åŒ–å†…æ ¸å‚æ•° 1) ä¿®æ”¹é…ç½®æ–‡ä»¶/etc/sysctl.confï¼Œæ·»åŠ å¦‚ä¸‹å‘½ä»¤ 123456789101112131415cat &gt;&gt;/etc/sysctl.conf&lt;&lt;EOFnet.ipv4.tcp_fin_timeout = 2net.ipv4.tcp_tw_reuse = 1net.ipv4.tcp_tw_recycle = 1net.ipv4.tcp_syncookies = 1net.ipv4.tcp_keepalive_time = 600net.ipv4.ip_local_port_range = 4000 65000net.ipv4.tcp_max_syn_backlog = 16384net.ipv4.tcp_max_tw_buckets = 36000net.ipv4.route.gc_timeout = 100net.ipv4.tcp_syn_retries = 1net.ipv4.tcp_synack_retries = 1net.core.somaxconn = 16384net.core.netdev_max_backlog = 16384net.ipv4.tcp_max_orphans = 16384 2) é…ç½®ç”Ÿæ•ˆ 1sysctl -P é…ç½®å­—ç¬¦é›† 1) æŸ¥çœ‹é…ç½®æ–‡ä»¶ 1cat /etc/sysconfig/i18n 2) å¤‡ä»½é…ç½®æ–‡ä»¶ 1cp /etc/sysconfig/i18n&#123;,.back&#125; 3) ä¿®æ”¹é…ç½®æ–‡ä»¶ä¸‹é¢æ˜¯ä¿®æ”¹å­—ç¬¦é›†ä¸ºä¸­æ–‡çš„ï¼Œè‹±æ–‡åŒç†12echo 'LANG="zn_CN.UTF-8"' &gt; /etc/sysconfig/i18necho 'SYSFONT="latarcyrheb-sun16"' &gt;&gt; /etc/sysconfig/i18n 4) é…ç½®ç”Ÿæ•ˆ 1source /etc/sysconfig/i18n 5) ç¡®è®¤é…ç½®æ˜¯å¦æˆåŠŸ 1echo $LANG é”å®šå…³é”®æ€§ç³»ç»Ÿæ–‡ä»¶ï¼Œé˜²æ­¢è¢«ç¯¡æ”¹ 12chattr +i /etc/&#123;passwd,shadow,group,gshadow&#125;lsattr -a /etc/&#123;passwd,shadow,group,gshadow&#125; ç¦æ­¢ç³»ç»Ÿè¢« ping 1) é…ç½®å‘½ä»¤ 1echo "net.ipv4.icmp_echo_ignore_all=1" &gt;&gt; /etc/sysctl.conf 2) é…ç½®ç”Ÿæ•ˆ 1sysctl -P å‡çº§æ¼æ´žè½¯ä»¶ 1) æŸ¥çœ‹ç›¸å…³è½¯ä»¶çš„ç‰ˆæœ¬ 1rpm -qa openssl openssh bash 2) æ‰§è¡Œå‡çº§ 1yum install openssl openssh bash ä¼˜åŒ– ssh è¿œç¨‹è¿žæŽ¥ 1) å¤‡ä»½é…ç½®æ–‡ä»¶ 1cp /etc/ssh/sshd_config&#123;,.back&#125; 2) ç¼–è¾‘ ssh æœåŠ¡é…ç½®æ–‡ä»¶/etc/ssh/sshd_configï¼Œåœ¨ 12 è¡Œä¸‹é¢æ·»åŠ å¦‚ä¸‹å†…å®¹ 12345Port 52113 #ä½¿ç”¨å¤§äºŽ10000çš„ç«¯å£å·PermitRootLogin no #ç¦æ­¢rootè¿œç¨‹ç™»å½•PermitEmptyPasswords no #ç¦æ­¢ç©ºå¯†ç ç™»å½•UseDNS no #ä¸ä½¿ç”¨dnsè§£æžGSSAPIAuthentication no #è¿žæŽ¥æ…¢çš„è§£å†³é…ç½® 3) ç¡®è®¤é…ç½® 1grep -A 5 -i 'Start by username' /etc/ssh/sshd_config 4) é‡å¯ ssh æœåŠ¡ 1/etc/init.d/sshd restart 5) æŸ¥çœ‹æ˜¯å¦é…ç½®æˆåŠŸ 1netstat -lntup | grep ssh]]></content>
      <categories>
        <category>Linux</category>
      </categories>
  </entry>
  <entry>
    <title><![CDATA[Linux å‘è¡Œç‰ˆæ›´æ¢æº]]></title>
    <url>%2F2019%2F05%2F03%2FLinux-%E5%8F%91%E8%A1%8C%E7%89%88%E6%9B%B4%E6%8D%A2%E6%BA%90%2F</url>
    <content type="text"><![CDATA[debianæ›´æ¢æ›´æ¢aptæº æ›´æ¢é…ç½®æ–‡ä»¶ 12345678910111213141516echo 'deb http://mirrors.163.com/debian/ stretch main non-free contrib deb http://mirrors.163.com/debian/ stretch-updates main non-free contrib deb http://mirrors.163.com/debian/ stretch-backports main non-free contrib deb-src http://mirrors.163.com/debian/ stretch main non-free contrib deb-src http://mirrors.163.com/debian/ stretch-updates main non-free contrib deb-src http://mirrors.163.com/debian/ stretch-backports main non-free contrib deb http://mirrors.163.com/debian-security/ stretch/updates main non-free contrib deb-src http://mirrors.163.com/debian-security/ stretch/updates main non-free contrib' &gt;/etc/apt/sources.list æ›´æ–°æº 12apt-get update redhat æ›´æ¢é…ç½® salt å®˜æ–¹é˜¿é‡Œäº‘ yum ä»“åº“ ä¸‹è½½ repo æ–‡ä»¶ 12yum install -y https://mirrors.aliyun.com/saltstack/yum/redhat/salt-repo-latest-2.el7.noarch.rpm æ›¿æ¢æºåœ°å€ 1234sed -i "s/repo.saltstack.com/mirrors.aliyun.com/saltstack/g" /etc/yum.repos.d/salt-latest.repo æ›´æ–°ç¼“å­˜ 12yum makecache æ›´æ¢ python æºæ›´æ¢ pip æº ä¸´æ—¶æ›´æ¢ 12pip install -i https://pypi.tuna.tsinghua.edu.cn/simple some-package æ°¸ä¹…æ›´æ¢ 1pip config set global.index-url https://pypi.tuna.tsinghua.edu.cn/simple æŒç»­æ›´æ–°]]></content>
      <categories>
        <category>linux</category>
      </categories>
  </entry>
  <entry>
    <title><![CDATA[Dockerçš„å®‰è£…ã€ç»„æˆåŠåŸºç¡€å‘½ä»¤]]></title>
    <url>%2F2019%2F05%2F03%2FDocker%E7%9A%84%E5%AE%89%E8%A3%85%E3%80%81%E7%BB%84%E6%88%90%E5%8F%8A%E5%9F%BA%E7%A1%80%E5%91%BD%E4%BB%A4%2F</url>
    <content type="text"><![CDATA[ä¸»æœºåå’Œ ip è®¾ç½®hostname.sh docker01 10.0.0.11 å®‰è£… docker1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556rm -fr /etc/yum.repos.d/local.repo curl -o /etc/yum.repos.d/CentOS-Base.repo http://mirrors.aliyun.com/repo/Centos-7.repo wget -O /etc/yum.repos.d/docker-ce.repo https://mirrors.ustc.edu.cn/docker-ce/linux/centos/docker-ce.repo sed -i 's#download.docker.com#mirrors.tuna.tsinghua.edu.cn/docker-ce#g' /etc/yum.repos.d/docker-ce.repo yum install docker-ce -y ``` # dockerçš„ä¸»è¦ç»„æˆéƒ¨åˆ† dockeræ˜¯ä¼ ç»Ÿçš„CSæž¶æž„åˆ†ä¸ºdocker clientå’Œdocker server,å’Œmysqlä¸€æ · 1. æŸ¥çœ‹ç‰ˆæœ¬ä¿¡æ¯ ```bash docker server ``` 2. ç›‘æŽ§ ```bash docker info ``` dockerä¸»è¦ç»„ä»¶æœ‰ï¼šé•œåƒã€å®¹å™¨ã€ä»“åº“ã€ç½‘ç»œå’Œå­˜å‚¨ å¯åŠ¨å®¹å™¨å¿…é¡»éœ€è¦ä¸€ä¸ªé•œåƒï¼Œä»“åº“ä¸­åªå­˜å‚¨é•œåƒ # å¯åŠ¨å®¹å™¨ 1. é…ç½® docker é•œåƒåŠ é€Ÿ ```bash vim /etc/docker/daemon.json ``` ```txt &#123; "registry-mirrors": ["https://registry.docker-cn.com"] &#125; ``` å¯åŠ¨å®¹å™¨ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148149150151152153154155156157158159160161162163164165166167168169170171172173174175176177178179180181182183184185186187188189190191192193194195196197198199200201202203204205206207208209210211212213214215216217218219220221222223224docker run -d -p 80:80 nginx # æŒ‡å®šç‰ˆæœ¬ docker run -d -p 80:80 nginx:1.14 ``` 1) run åˆ›å»ºå¹¶è¿è¡Œ 2) -d å®ˆæŠ¤è¿›ç¨‹å¯åŠ¨ 3) -p ç«¯å£æ˜ å°„ 4) nginx docker é•œåƒçš„åå­— # docker çš„é•œåƒç®¡ç† 1. æœç´¢é•œåƒ ```bash docker search é•œåƒå ``` 2. èŽ·å–é•œåƒ ```bash docker pull ``` ```bash docker pull centos:6.8ï¼ˆæ²¡æœ‰æŒ‡å®šç‰ˆæœ¬ï¼Œé»˜è®¤ä¼šä¸‹è½½æœ€æ–°ç‰ˆï¼‰ docker pull daocloud.io/huangzhichong/alpine-cn:latest ``` 3. æŸ¥çœ‹æœ¬åœ°é•œåƒ ```bash docker images docker image ls ``` 4. åˆ é™¤é•œåƒ ```bash docker rmi docker image rm centos:lates ``` 5. å¯¼å‡ºé•œåƒ ```bash docker save docker image save centos &gt; docker-centos7.4.tar.gz ``` 6. å¯¼å…¥é•œåƒ ```bash docker load docker image load -i docker-centos7.4.tar.gz ``` # docker çš„å®¹å™¨ç®¡ç† 1. å¯åŠ¨å®¹å™¨ ```bash docker run -d -p 80:80 nginx:latest -d æ”¾åœ¨åŽå° -p ç«¯å£æ˜ å°„ -v æºåœ°å€(å®¿ä¸»æœº):ç›®æ ‡åœ°å€(å®¹å™¨) ``` 2. ä»¥äº¤äº’å¼å¯åŠ¨å®¹å™¨ ```bash docker run -it --name centos6 centos:6.9 /bin/bash -it åˆ†é…äº¤äº’å¼çš„ç»ˆç«¯ --name æŒ‡å®šå®¹å™¨çš„åå­— /bin/shè¦†ç›–å®¹å™¨çš„åˆå§‹å‘½ä»¤ docker run ==== docker create + docker start ``` 3. åœæ­¢å®¹å™¨ ```bash docker stop CONTAINER_ID or name ``` 4. æ€æ­»å®¹å™¨ ```bash docker kill container_name ``` 5. æŸ¥çœ‹å®¹å™¨åˆ—è¡¨ ```bash docker ps docker ps â€“a ``` 6. è¿›å…¥å®¹å™¨ï¼ˆç›®çš„ã€è°ƒè¯•ã€æŽ’é”™ï¼‰ ```bash docker exec (åˆ†é…ä¸€ä¸ªæ–°çš„ç»ˆç«¯) docker exec [OPTIONS] CONTAINER COMMAND [ARG...] docker exec -it å®¹å™¨idæˆ–å®¹å™¨åå­— /bin/bashï¼ˆ/bin/shï¼‰ docker attachï¼ˆä½¿ç”¨åŒä¸€ä¸ªç»ˆç«¯ï¼‰ docker attach [OPTIONS] CONTAINER ``` 7. åˆ é™¤å®¹å™¨ ```bash docker rm ``` 8. æ‰¹é‡åˆ é™¤å®¹å™¨ ```bash docker rm -f `docker ps -a -q` ``` **æ€»ç»“ï¼š** dockerå®¹å™¨å†…çš„ç¬¬ä¸€ä¸ªè¿›ç¨‹ï¼ˆåˆå§‹å‘½ä»¤ï¼‰å¿…é¡»ä¸€ç›´å¤„äºŽå‰å°è¿è¡Œçš„çŠ¶æ€ï¼ˆå¿…é¡»å¤¯ä½ï¼‰ï¼Œå¦åˆ™è¿™ä¸ªå®¹å™¨ï¼Œå°±ä¼šå¤„äºŽé€€å‡ºçŠ¶æ€ï¼ 9. docker å®¹å™¨çš„ç½‘ç»œè®¿é—®ï¼ˆç«¯å£æ˜ å°„ï¼‰ ```bash æŒ‡å®šæ˜ å°„(docker ä¼šè‡ªåŠ¨æ·»åŠ ä¸€æ¡iptablesè§„åˆ™æ¥å®žçŽ°ç«¯å£æ˜ å°„) -p hostPort:containerPort -p ip:hostPort:containerPort å¤šä¸ªå®¹å™¨éƒ½æƒ³ä½¿ç”¨80ç«¯å£ -p ip::containerPort(éšæœºç«¯å£) -p hostPort:containerPort:udp -p 81:80 â€“p 443:443 å¯ä»¥æŒ‡å®šå¤šä¸ª-p ``` 10. éšæœºæ˜ å°„ ```bash docker run -P (éšæœºç«¯å£) ``` # dockerçš„æ•°æ®å·ç®¡ç† /usr/share/nginx/html ```bash æ•°æ®å·(æ–‡ä»¶æˆ–ç›®å½•) -v å·å:/data -v srcï¼ˆå®¿ä¸»æœºçš„ç›®å½•ï¼‰:dstï¼ˆå®¹å™¨çš„ç›®å½•ï¼‰ æ•°æ®å·å®¹å™¨ --volumes-fromï¼ˆè·ŸæŸä¸€ä¸ªå·²ç»å­˜åœ¨çš„å®¹å™¨æŒ‚è½½ç›¸åŒçš„å·ï¼‰ åŸºäºŽnginxå¯åŠ¨ä¸€ä¸ªå®¹å™¨ï¼Œç›‘å¬80å’Œ81ï¼Œè®¿é—®80ï¼Œå‡ºçŽ°nginxé»˜è®¤é¦–é¡µï¼Œè®¿é—®81ï¼Œå‡ºçŽ°å°é¸Ÿã€‚ åŸºäºŽå¤šç«¯å£çš„å¤šç«™ç‚¹ã€‚ ```]]></content>
      <categories>
        <category>docker</category>
      </categories>
  </entry>
  <entry>
    <title><![CDATA[Docker åˆ›å»ºæœ¬åœ°ç§æœ‰ä»“åº“]]></title>
    <url>%2F2019%2F05%2F03%2FDocker-%E5%88%9B%E5%BB%BA%E6%9C%AC%E5%9C%B0%E7%A7%81%E6%9C%89%E4%BB%93%E5%BA%93%2F</url>
    <content type="text"><![CDATA[åˆ›å»ºåŸºç¡€ä»“åº“ å¯¼å…¥ä»“åº“é•œåƒ /User/jingxing/download/registry.tar.gz 12docker load -i registry.tar.gz é‡å¯ docker æœåŠ¡ 12systemctl restart docker è¿è¡Œä»“åº“å®¹å™¨ 12docker run -d -p 5000:5000 --restart=always --name registry -v /opt/myregistry:/var/lib/registry registry é‡å¯ docker æœåŠ¡ 12systemctl restart docker ç»™è¦ä¸Šä¼ åˆ°ç§æœ‰ä»“åº“çš„é•œåƒæ‰“æ ‡ç­¾ 12docker tag centos_ssh:v2 10.0.0.11:5000/oldboy/centos_ssh:v2 ä¿®æ”¹ docker é…ç½®æ–‡ä»¶å°†ç§æœ‰ä»“åº“ ip åŠ è¿›åŽ» 12vim /etc/docker/daemon.json å†…å®¹å¦‚ä¸‹ï¼š 12&quot;insecure-registries&quot;: [&quot;10.0.0.11:5000&quot;] é‡å¯ docker æœåŠ¡ 12systemctl restart docker ä¸Šä¼ é•œåƒ 12docker push 10.0.0.11:5000/oldboy/centos_ssh:v2 è¿›å…¥ä»“åº“å®¹å™¨ 12docker exec -it å®¹å™¨ id /bin/sh åˆ›å»ºå¸¦æœ‰ basic auth çš„ç§æœ‰ä»“åº“ å®‰è£…ä¾èµ–åº“ 12yum install httpd-tools -y åˆ›å»ºè®¤è¯ç›®å½• 12mkdir /opt/registry-var/auth/ -p è®¾ç½®å¯†ç  12htpasswd -Bbn oldboy 123456 &gt;&gt; /opt/registry-var/auth/htpasswd å¯åŠ¨ä»“åº“é•œåƒ 12docker run -d -p 5000:5000 -v /opt/registry-var/auth:/auth/ -v /opt/myregistry:/var/lib/registry -e "REGISTRY_AUTH=htpasswd" -e "REGISTRY_AUTH_HTPASSWD_REALM=Registry Realm" -e REGISTRY_AUTH_HTPASSWD_PATH=/auth/htpasswd registry åˆ é™¤å®¹å™¨é‡Œçš„é•œåƒæ–‡ä»¶ è¿›å…¥ docker registry å®¹å™¨ä¸­ 12docker exec -it registyr /bin/sh åˆ é™¤ repo 12rm -rf /var/lib/registry/docker/registry/v2/repositories/oldboy æ¸…é™¤æŽ‰ blob 12registry garbage-collect /etc/docker/registry/config.yml]]></content>
      <categories>
        <category>docker</category>
      </categories>
  </entry>
  <entry>
    <title><![CDATA[sdfsf]]></title>
    <url>%2F2019%2F04%2F28%2Fsdfsf%2F</url>
    <content type="text"></content>
  </entry>
  <entry>
    <title><![CDATA[æ•°æ®ç»“æž„ä¸Žç®—æ³•]]></title>
    <url>%2F2019%2F04%2F04%2F%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95%2F</url>
    <content type="text"></content>
  </entry>
  <entry>
    <title><![CDATA[haystackå…¨æ–‡æ£€ç´¢çš„ä½¿ç”¨]]></title>
    <url>%2F2019%2F04%2F03%2Fhaystack%E5%85%A8%E6%96%87%E6%A3%80%E7%B4%A2%E7%9A%84%E4%BD%BF%E7%94%A8%2F</url>
    <content type="text"><![CDATA[Haystackå…¨æ–‡æ£€ç´¢çš„ä½¿ç”¨1.ä»€ä¹ˆæ˜¯HaystackHaystackæ˜¯djangoçš„å¼€æºå…¨æ–‡æœç´¢æ¡†æž¶(å…¨æ–‡æ£€ç´¢ä¸åŒäºŽç‰¹å®šå­—æ®µçš„æ¨¡ç³ŠæŸ¥è¯¢ï¼Œä½¿ç”¨å…¨æ–‡æ£€ç´¢çš„æ•ˆçŽ‡æ›´é«˜ )ï¼Œè¯¥æ¡†æž¶æ”¯æŒSolr,Elasticsearch,Whoosh, **Xapianæœç´¢å¼•æ“Žå®ƒæ˜¯ä¸€ä¸ªå¯æ’æ‹”çš„åŽç«¯ï¼ˆå¾ˆåƒDjangoçš„æ•°æ®åº“å±‚ï¼‰ï¼Œæ‰€ä»¥å‡ ä¹Žä½ æ‰€æœ‰å†™çš„ä»£ç éƒ½å¯ä»¥åœ¨ä¸åŒæœç´¢å¼•æ“Žä¹‹é—´ä¾¿æ·åˆ‡æ¢ 2.å®‰è£…1pip install django-haystack 3.é…ç½®æ·»åŠ Haystackåˆ°INSTALLED_APPSè·Ÿå¤§å¤šæ•°Djangoçš„åº”ç”¨ä¸€æ ·ï¼Œä½ åº”è¯¥åœ¨ä½ çš„è®¾ç½®æ–‡ä»¶(é€šå¸¸æ˜¯settings.py)æ·»åŠ Haystackåˆ°INSTALLED_APPS. ç¤ºä¾‹ï¼š 12345678910111213INSTALLED_APPS = [ 'django.contrib.admin', 'django.contrib.auth', 'django.contrib.contenttypes', 'django.contrib.sessions', 'django.contrib.sites', # æ·»åŠ  'haystack', # ä½ çš„app 'blog',] ä¿®æ”¹settings.pyåœ¨ä½ çš„settings.pyä¸­ï¼Œä½ éœ€è¦æ·»åŠ ä¸€ä¸ªè®¾ç½®æ¥æŒ‡ç¤ºç«™ç‚¹é…ç½®æ–‡ä»¶æ­£åœ¨ä½¿ç”¨çš„åŽç«¯ï¼Œä»¥åŠå…¶å®ƒçš„åŽç«¯è®¾ç½®ã€‚ HAYSTACKâ€”â€”CONNECTIONSæ˜¯å¿…éœ€çš„è®¾ç½®ï¼Œå¹¶ä¸”åº”è¯¥è‡³å°‘æ˜¯ä»¥ä¸‹çš„ä¸€ç§ï¼š Solrç¤ºä¾‹12345678HAYSTACK_CONNECTIONS = &#123; 'default': &#123; 'ENGINE': 'haystack.backends.solr_backend.SolrEngine', 'URL': 'http://127.0.0.1:8983/solr' # ...or for multicore... # 'URL': 'http://127.0.0.1:8983/solr/mysite', &#125;,&#125; Elasticsearchç¤ºä¾‹1234567HAYSTACK_CONNECTIONS = &#123; 'default': &#123; 'ENGINE': 'haystack.backends.elasticsearch_backend.ElasticsearchSearchEngine', 'URL': 'http://127.0.0.1:9200/', 'INDEX_NAME': 'haystack', &#125;,&#125; Whooshç¤ºä¾‹12345678#éœ€è¦è®¾ç½®PATHåˆ°ä½ çš„Whooshç´¢å¼•çš„æ–‡ä»¶ç³»ç»Ÿä½ç½®import osHAYSTACK_CONNECTIONS = &#123; 'default': &#123; 'ENGINE': 'haystack.backends.whoosh_backend.WhooshEngine', 'PATH': os.path.join(os.path.dirname(__file__), 'whoosh_index'), &#125;,&#125; Xapianç¤ºä¾‹123456789#é¦–å…ˆå®‰è£…XapianåŽç«¯ï¼ˆhttp://github.com/notanumber/xapian-haystack/tree/masterï¼‰#éœ€è¦è®¾ç½®PATHåˆ°ä½ çš„Xapianç´¢å¼•çš„æ–‡ä»¶ç³»ç»Ÿä½ç½®ã€‚import osHAYSTACK_CONNECTIONS = &#123; 'default': &#123; 'ENGINE': 'xapian_backend.XapianEngine', 'PATH': os.path.join(os.path.dirname(__file__), 'xapian_index'), &#125;,&#125; 4.å¤„ç†æ•°æ®åˆ›å»ºSearchIndexesSearchIndexeså¯¹è±¡æ˜¯Haystackå†³å®šé‚£äº›æ•°æ®åº”è¯¥æ”¾å…¥ç´¢å¼•å’Œå¤„ç†æµæ•°æ®çš„æ–¹å¼ã€‚ä½ å¯ä»¥æŠŠå®ƒä»¬çœ‹ä½œæ˜¯Djangoçš„Modelsæˆ–Formsï¼Œå®ƒä»¬æ˜¯åŸºäºŽå­—æ®µå’Œæ•°æ®æ“ä½œ/å­˜å‚¨çš„ã€‚ ä½ é€šå¸¸ä¸ºä½ æœŸæœ›ç´¢å¼•çš„æ¯ä¸€ä¸ªModeléƒ½åˆ›å»ºä¸€ä¸ªå”¯ä¸€çš„SearchIndexã€‚è™½ç„¶ä½ å¯ä»¥åœ¨ä¸åŒçš„modelä¸­é‡å¤ä½¿ç”¨ç›¸åŒçš„SearchIndexï¼Œåªè¦ä½ å°å¿ƒçš„åšå¹¶ä¸”å­—æ®µåå¾ˆè§„èŒƒã€‚ ä¸ºäº†å»ºç«‹SearchIndexï¼Œæ‰€æœ‰çš„éƒ½æ˜¯indexes.SearchIndexå’Œindexe.Indexableçš„å­ç±»ã€‚å®šä¹‰è¦å­˜å‚¨æ•°æ®çš„å­—æ®µï¼Œå®šä¹‰get_modelæ–¹æ³•ã€‚ æˆ‘ä»¬ä¼šåœ¨ä¸‹é¢åˆ›å»ºå’ŒNoteæ¨¡åž‹å¯¹åº”çš„NoteIndexã€‚è¿™ä¸ªä»£ç é€šå¸¸åœ¨search_indexes.pyä¸­ã€‚å°½ç®¡è¿™ä¸æ˜¯å¿…é¡»çš„ã€‚è¿™ä½¿å¾—Haystackèƒ½è‡ªåŠ¨çš„æ£€æµ‹åˆ°å®ƒã€‚NoteIndexåº”è¯¥çœ‹èµ·æ¥åƒï¼š 123456789101112131415import datetimefrom haystack import indexesfrom myapp.models import Noteclass NoteIndex(indexes.SearchIndex, indexes.Indexable): text = indexes.CharField(document=True, use_template=True) author = indexes.CharField(model_attr='user') pub_date = indexes.DateTimeField(model_attr='pub_date') def get_model(self): return Note def index_queryset(self, using=None): """Used when the entire index for model is updated.""" return self.get_model().objects.filter(pub_date__lte=datetime.datetime.now()) æ¯ä¸ªSerachIndexéœ€è¦æœ‰ä¸€ä¸ªï¼ˆä»…æœ‰ä¸€ä¸ªï¼‰ä¸€ä¸ªå­—æ®µdocument=True.è¿™ä¸ªæŒ‡ç¤ºç€Haystackå’Œæœç´¢å¼•æ“ŽæŠŠé‚£ä¸ªå­—æ®µä½œä¸ºä¸»è¦çš„æ£€ç´¢ã€‚ 12å½“ä½ é€‰æ‹©document=Trueå­—æ®µæ—¶ï¼Œå®ƒåº”è¯¥åœ¨ä½ çš„SearchIndexç±»é‡Œé¢å§‹ç»ˆå¦‚ä¸€ï¼Œä»¥é¿å…åŽç«¯çš„æ··æ·†ã€‚ä¸€ä¸ªä¾¿æ·çš„å‘½åæ˜¯textã€‚åœ¨æ‰€æœ‰çš„æ ·ä¾‹ä¸­è¿™ä¸ªtextå­—æ®µåå¹¶æ²¡æœ‰ä»€ä¹ˆç‰¹æ®Šã€‚å®ƒä¹Ÿå¯ä»¥æ˜¯å…¶ä»–ä»»ä½•å‘½åï¼Œä½ å¯ä»¥å«å®ƒpink_polka_dotä¹Ÿæ˜¯æ²¡æœ‰å…³ç³»çš„ã€‚åªæ˜¯ç®€å•ä¾¿åˆ©çš„äº¤åštextã€‚ å¦å¤–ï¼Œæˆ‘ä»¬åœ¨textå­—æ®µä¸Šæä¾›äº†use_template=Trueã€‚è¿™å…è®¸æˆ‘ä»¬ä½¿ç”¨ä¸€ä¸ªæ•°æ®æ¨¡æ¿ï¼ˆè€Œä¸æ˜¯å®¹æ˜“å‡ºé”™çš„çº§è”ï¼‰æ¥æž„å»ºæ–‡æ¡£æœç´¢å¼•æ“Žç´¢å¼•ã€‚ä½ åº”è¯¥åœ¨æ¨¡æ¿ç›®å½•ä¸‹å»ºç«‹æ–°çš„æ¨¡æ¿search/indexes/myapp/note_text.txtï¼Œå¹¶å°†ä¸‹é¢å†…å®¹æ”¾åœ¨é‡Œé¢ã€‚ 123&#123;&#123; object.title &#125;&#125;&#123;&#123; object.user.get_full_name &#125;&#125;&#123;&#123; object.body &#125;&#125; æ­¤å¤–ï¼Œæˆ‘ä»¬å¢žåŠ äº†å…¶ä»–å­—æ®µï¼ˆauthorå’Œpub_dateï¼‰ã€‚å½“æˆ‘ä»¬æä¾›é¢å¤–çš„è¿‡æ»¤é€‰é¡¹çš„æ—¶å€™è¿™æ˜¯å¾ˆæœ‰ç”¨çš„ã€‚æ¥è‡³Haystackçš„å¤šä¸ªSearchFieldç±»èƒ½å¤„ç†å¤§å¤šæ•°çš„æ•°æ®ã€‚ ä¸€ä¸ªå¸¸è§çš„ä¸»é¢˜æ˜¯å…è®¸ç®¡ç†å‘˜ç”¨æˆ·åœ¨æœªæ¥æ·»åŠ å†…å®¹ï¼Œè€Œä¸é©¬ä¸Šåœ¨ç½‘ç«™å±•ç¤ºï¼Œç›´åˆ°æœªæ¥æŸä¸ªæ—¶é—´ç‚¹ã€‚æˆ‘ä»¬ç‰¹åˆ«è‡ªå®šä¹‰äº†index_querysetæ–¹æ³•æ¥é˜²æ­¢æœªæ¥çš„è¿™äº›é¡¹æ·»åŠ åˆ°ç´¢å¼•ã€‚ 5.è®¾ç½®è§†å›¾æ·»åŠ SearchViewåˆ°ä½ çš„URLconfåœ¨ä½ çš„URLconfä¸­æ·»åŠ ä¸‹é¢ä¸€è¡Œï¼š 1(r'^search/', include('haystack.urls')), è¿™ä¼šæ‹‰å–Haystackçš„é»˜è®¤URLconfï¼Œå®ƒç”±å•ç‹¬æŒ‡å‘SearchViewå®žä¾‹çš„URLconfç»„æˆã€‚ä½ å¯ä»¥é€šè¿‡ä¼ é€’å‡ ä¸ªå…³é”®å‚æ•°æˆ–è€…å®Œå…¨é‡æ–°å®ƒæ¥æ”¹å˜è¿™ä¸ªç±»çš„è¡Œä¸ºã€‚ æœç´¢æ¨¡æ¿ä½ çš„æœç´¢æ¨¡æ¿(é»˜è®¤åœ¨search/search.html)å°†å¯èƒ½éžå¸¸ç®€å•ã€‚ä¸‹é¢çš„è¶³å¤Ÿè®©ä½ çš„æœç´¢è¿è¡Œ(ä½ çš„template/blockåº”è¯¥ä¼šä¸åŒ) 123456789101112131415161718192021222324252627282930313233343536373839&#123;% extends 'base.html' %&#125;&#123;% block content %&#125; &lt;h2&gt;Search&lt;/h2&gt; &lt;form method="get" action="."&gt; &lt;table&gt; &#123;&#123; form.as_table &#125;&#125; &lt;tr&gt; &lt;td&gt;&amp;nbsp;&lt;/td&gt; &lt;td&gt; &lt;input type="submit" value="Search"&gt; &lt;/td&gt; &lt;/tr&gt; &lt;/table&gt; &#123;% if query %&#125; &lt;h3&gt;Results&lt;/h3&gt; &#123;% for result in page.object_list %&#125; &lt;p&gt; &lt;a href="&#123;&#123; result.object.get_absolute_url &#125;&#125;"&gt;&#123;&#123; result.object.title &#125;&#125;&lt;/a&gt; &lt;/p&gt; &#123;% empty %&#125; &lt;p&gt;No results found.&lt;/p&gt; &#123;% endfor %&#125; &#123;% if page.has_previous or page.has_next %&#125; &lt;div&gt; &#123;% if page.has_previous %&#125;&lt;a href="?q=&#123;&#123; query &#125;&#125;&amp;amp;page=&#123;&#123; page.previous_page_number &#125;&#125;"&gt;&#123;% endif %&#125;&amp;laquo; Previous&#123;% if page.has_previous %&#125;&lt;/a&gt;&#123;% endif %&#125; | &#123;% if page.has_next %&#125;&lt;a href="?q=&#123;&#123; query &#125;&#125;&amp;amp;page=&#123;&#123; page.next_page_number &#125;&#125;"&gt;&#123;% endif %&#125;Next &amp;raquo;&#123;% if page.has_next %&#125;&lt;/a&gt;&#123;% endif %&#125; &lt;/div&gt; &#123;% endif %&#125; &#123;% else %&#125; &#123;# Show some example queries to run, maybe query syntax, something else? #&#125; &#123;% endif %&#125; &lt;/form&gt;&#123;% endblock %&#125; éœ€è¦æ³¨æ„çš„æ˜¯page.object_listå®žé™…ä¸Šæ˜¯SearchResultå¯¹è±¡çš„åˆ—è¡¨ã€‚è¿™äº›å¯¹è±¡è¿”å›žç´¢å¼•çš„æ‰€æœ‰æ•°æ®ã€‚å®ƒä»¬å¯ä»¥é€šè¿‡æ¥è®¿é—®ã€‚æ‰€ä»¥å®žé™…ä½¿ç”¨çš„æ˜¯æ•°æ®åº“ä¸­Noteå¯¹è±¡æ¥è®¿é—®titleå­—æ®µçš„ã€‚ é‡å»ºç´¢å¼•è¿™æ˜¯æœ€åŽä¸€æ­¥ï¼ŒçŽ°åœ¨ä½ å·²ç»é…ç½®å¥½äº†æ‰€æœ‰çš„äº‹æƒ…ï¼Œæ˜¯æ—¶å€™æŠŠæ•°æ®åº“ä¸­çš„æ•°æ®æ”¾å…¥ç´¢å¼•äº†ã€‚Haystacké™„å¸¦çš„ä¸€ä¸ªå‘½ä»¤è¡Œç®¡ç†å·¥å…·ä½¿å®ƒå˜å¾—å¾ˆå®¹æ˜“ã€‚ ç®€å•çš„è¿è¡Œ./manage.py rebuild_indexã€‚ä½ ä¼šå¾—åˆ°æœ‰å¤šå°‘æ¨¡åž‹è¿›è¡Œäº†å¤„ç†å¹¶æ”¾è¿›ç´¢å¼•çš„ç»Ÿè®¡ã€‚]]></content>
      <categories>
        <category>haystack</category>
      </categories>
  </entry>
  <entry>
    <title><![CDATA[rabbitmqé«˜çº§æ¶ˆæ¯é˜Ÿåˆ—]]></title>
    <url>%2F2019%2F04%2F03%2Frabbitmq%E9%AB%98%E7%BA%A7%E6%B6%88%E6%81%AF%E9%98%9F%E5%88%97%2F</url>
    <content type="text"><![CDATA[rabbitmqä½¿ç”¨ä»€ä¹ˆæ˜¯æ¶ˆæ¯é˜Ÿåˆ—æ¶ˆæ¯ï¼ˆMessageï¼‰æ˜¯æŒ‡åœ¨åº”ç”¨é—´ä¼ é€çš„æ•°æ®ã€‚æ¶ˆæ¯å¯ä»¥éžå¸¸ç®€å•ï¼Œæ¯”å¦‚åªåŒ…å«æ–‡æœ¬å­—ç¬¦ä¸²ï¼Œä¹Ÿå¯ä»¥å¾ˆå¤æ‚ï¼Œå¯ä»¥åŒ…å«åµŒå…¥å¯¹è±¡ã€‚ æ¶ˆæ¯é˜Ÿåˆ—æ˜¯ä¸€ç§åº”ç”¨é—´çš„é€šä¿¡æ–¹å¼ï¼Œæ¶ˆæ¯å‘é€åŽå¯ä»¥ç«‹å³è¿”å›žï¼Œç”±æ¶ˆæ¯ç³»ç»Ÿæ¥ç¡®ä¿æ¶ˆæ¯çš„å¯é ä¼ é€’ã€‚æ¶ˆæ¯å‘å¸ƒè€…åªç®¡æŠŠæ¶ˆæ¯å‘å¸ƒåˆ° MQ ä¸­ä¸ç”¨è€ƒè™‘å“ªä¸ªæ¶ˆè´¹è€…æ¥å–æ•°æ®ï¼Œæ¶ˆæ¯ä½¿ç”¨è€…åªç®¡ä»ŽMQ ä¸­å–æ¶ˆæ¯è€Œä¸ç”¨ç®¡æ˜¯è°å‘å¸ƒçš„ã€‚è¿™æ ·å‘å¸ƒè€…å’Œä½¿ç”¨è€…éƒ½ä¸ç”¨çŸ¥é“å¯¹æ–¹çš„å­˜åœ¨ã€‚ ä¸ºä½•ç”¨æ¶ˆæ¯é˜Ÿåˆ—æ¶ˆæ¯é˜Ÿåˆ—æ˜¯ä¸€ç§åº”ç”¨é—´çš„å¼‚æ­¥åä½œæœºåˆ¶ï¼Œé‚£ä¹ˆä»€ä¹ˆæ—¶å€™ä½¿ç”¨ MQå‘¢ ä¸€å¸¸è§çš„è®¢å•ç³»ç»Ÿä¸ºä¾‹ï¼Œç”¨æˆ·ç‚¹å‡»ä¸‹å•æŒ‰é’®ä¹‹åŽçš„ä¸šåŠ¡é€»è¾‘å¯èƒ½åŒ…æ‹¬ï¼šæ‰£å‡åº“å­˜ã€ç”Ÿæˆç›¸åº”å•æ®ã€å‘çº¢åŒ…ã€å‘çŸ­ä¿¡é€šçŸ¥ã€‚åœ¨ä¸šåŠ¡å‘å±•å‡ºåŠ›è¿™äº›é€»è¾‘å¯èƒ½æ”¾åœ¨ä¸€èµ·åŒæ­¥æ‰§è¡Œï¼Œéšç€ä¸šåŠ¡çš„å‘å±•è®¢å•é‡å¢žé•¿ï¼Œéœ€è¦æå‡ç³»ç»ŸæœåŠ¡çš„æ€§èƒ½ï¼Œè¿™æ—¶å¯ä»¥å°†ä¸€äº›ä¸éœ€è¦ç«‹å³ç”Ÿæ•ˆçš„æ“ä½œæ‹†åˆ†å‡ºæ¥å¼‚æ­¥æ‰§è¡Œï¼Œæ¯”å¦‚å‘çº¢åŒ…ã€å‘çŸ­ä¿¡ã€é‚®ä»¶é€šçŸ¥ç­‰ã€‚è¿™ç§åœºæ™¯ä¸‹å¯ä»¥ç”¨ MQï¼Œåœ¨ä¸‹å•çš„ä¸»æµç¨‹ï¼ˆæ¯”å¦‚æ‰£å‡åº“å­˜ã€ç”Ÿæˆç›¸åº”å•æ®ï¼‰å®Œæˆä¹‹åŽå‘é€ä¸€æ¡æ¶ˆæ¯åˆ° MQ è®©ä¸»æµç¨‹å¿«é€Ÿå®Œæˆï¼Œè€Œç”±å¦å¤–çš„å•ç‹¬çº¿ç¨‹æ‹‰å– MQ çš„æ¶ˆæ¯ï¼ˆæˆ–è€…ç”± MQ æŽ¨é€æ¶ˆæ¯ï¼‰ï¼Œå½“å‘çŽ° MQä¸­æœ‰å‘çº¢åŒ…æˆ–å…¶ä»–çš„æ¶ˆæ¯æ—¶ï¼Œæ‰§è¡Œç›¸åº”çš„ä¸šåŠ¡é€»è¾‘ã€‚ RabbitMQ çš„ç‰¹ç‚¹RabbitMQ æ˜¯ä¸€ä¸ªç”± Erlang è¯­è¨€å¼€å‘çš„ AMQP çš„å¼€æºå®žçŽ°ã€‚ AMQPï¼šAdvanced Message Queue Protocolï¼Œé«˜çº§æ¶ˆæ¯é˜Ÿåˆ—åè®®ã€‚å®ƒæ˜¯åº”ç”¨å±‚åè®®çš„ä¸€ä¸ªå¼€æ”¾æ ‡å‡†ï¼Œä¸ºé¢å‘æ¶ˆæ¯çš„ä¸­é—´ä»¶è®¾è®¡ï¼ŒåŸºäºŽæ­¤åè®®çš„å®¢æˆ·ç«¯ä¸Žæ¶ˆæ¯ä¸­é—´ä»¶å¯ä¼ é€’æ¶ˆæ¯ï¼Œå¹¶ä¸å—äº§å“ã€å¼€å‘è¯­è¨€ç­‰æ¡ä»¶çš„é™åˆ¶ã€‚ RabbitMQ æœ€åˆèµ·æºäºŽé‡‘èžç³»ç»Ÿï¼Œç”¨ä¸Žåœ¨åˆ†å¸ƒå¼ç³»ç»Ÿä¸­å­˜å‚¨è½¬å‘æ¶ˆæ¯ï¼Œåœ¨æ˜“ç”¨æ€§ã€æ‰©å±•æ€§ã€é«˜å¯ç”¨æ€§ç­‰æ–¹é¢è¡¨çŽ°å¾ˆå¥½ã€‚å…·ä½“ç‰¹ç‚¹å¦‚ä¸‹ï¼š å¯é æ€§ï¼ˆReliabilityï¼‰ RabbitMQ ä½¿ç”¨ä¸€äº›æœºåˆ¶æ¥ä¿è¯å¯é æ€§ï¼Œå¦‚æŒä¹…åŒ–ã€ä¼ è¾“ç¡®è®¤ã€å‘å¸ƒç¡®è®¤ã€‚ çµæ´»çš„è·¯ç”±ï¼ˆFlexible Routingï¼‰ åœ¨æ¶ˆæ¯è¿›å…¥é˜Ÿåˆ—ä¹‹å‰ï¼Œé€šè¿‡ Exchange æ¥è·¯ç”±æ¶ˆæ¯ã€‚å¯¹äºŽå…¸åž‹çš„è·¯ç”±åŠŸèƒ½ï¼ŒRabbitMQ å·²ç»æä¾›äº†ä¸€äº›å†…ç½®çš„ Exchange æ¥å®žçŽ°ã€‚é’ˆå¯¹æ›´å¤æ‚çš„è·¯ç”±åŠŸèƒ½ï¼Œå¯ä»¥å°†å¤šä¸ª Exchange ç»‘å®šåœ¨ä¸€èµ·ï¼Œä¹Ÿå¯ä»¥é€šè¿‡æ’ä»¶å®žçŽ°è‡ªå·±çš„ Exchangeã€‚ æ¶ˆæ¯é›†ç¾¤ï¼ˆClusteringï¼‰ å¤šä¸ª RabbitMQ æœåŠ¡å™¨å¯ä»¥ç»„æˆä¸€ä¸ªé›†ç¾¤ï¼Œå½¢æˆä¸€ä¸ªé€»è¾‘ Brokerã€‚ é«˜å¯ç”¨ï¼ˆHighly Available Queuesï¼‰ é˜Ÿåˆ—å¯ä»¥åœ¨é›†ç¾¤ä¸­çš„æœºå™¨ä¸Šè¿›è¡Œé•œåƒï¼Œä½¿å¾—åœ¨éƒ¨åˆ†èŠ‚ç‚¹å‡ºé—®é¢˜çš„æƒ…å†µä¸‹é˜Ÿåˆ—ä»å¯ä»¥ä½¿ç”¨ã€‚ å¤šç§åè®®ï¼ˆMulti-Protocolï¼‰ RabbitMQ æ”¯æŒå¤šç§æ¶ˆæ¯é˜Ÿåˆ—åè®®ï¼Œå¦‚ STOMPã€MQTT ç­‰ã€‚ å¤šè¯­è¨€å®¢æˆ·ç«¯ï¼ˆMany Clientsï¼‰ RabbitMQ å‡ ä¹Žæ”¯æŒæ‰€æœ‰å¸¸ç”¨è¯­è¨€ï¼Œæ¯”å¦‚ Pythonã€Javaã€.NETç­‰ã€‚ ç®¡ç†ç•Œé¢ï¼ˆManagement UIï¼‰ RabbitMQ æä¾›äº†ä¸€ä¸ªæ˜“ç”¨çš„ç”¨æˆ·ç•Œé¢ï¼Œä½¿å¾—ç”¨æˆ·å¯ä»¥ç›‘æŽ§å’Œç®¡ç†æ¶ˆæ¯ Broker çš„è®¸å¤šæ–¹é¢ã€‚ è·Ÿè¸ªæœºåˆ¶ï¼ˆTracingï¼‰ å¦‚æ¶ˆæ¯å¼‚å¸¸ï¼ŒRabbitMQ æä¾›äº†æ¶ˆæ¯è¿½è¸ªæœºåˆ¶ï¼Œä½¿ç”¨è€…å¯ä»¥æ‰¾å‡ºå‘ç”Ÿäº†ä»€ä¹ˆã€‚ æ’ä»¶æœºåˆ¶ï¼ˆPlugin Systemï¼‰ RabbitMQ æä¾›äº†è®¸å¤šæ’ä»¶ï¼Œå¯ä»¥æ‰©å±•æ’ä»¶ï¼Œä¹Ÿå¯ä»¥è‡ªå·±ç¼–å†™æ’ä»¶ã€‚ RabbitMQ ä¸­çš„æ¦‚å¿µæ¨¡åž‹æ¶ˆæ¯æ¨¡åž‹æ‰€æœ‰ MQ äº§å“ä»Žæ¨¡åž‹æŠ½è±¡ä¸Šæ¥è¯´éƒ½æ˜¯ä¸€æ ·çš„è¿‡ç¨‹ï¼š æ¶ˆè´¹è€…ï¼ˆconsumerï¼‰è®¢é˜…æŸä¸ªé˜Ÿåˆ—ã€‚ç”Ÿäº§è€…ï¼ˆproducerï¼‰åˆ›å»ºæ¶ˆæ¯ï¼Œç„¶åŽå‘å¸ƒåˆ°é˜Ÿåˆ—ï¼ˆqueueï¼‰ä¸­ï¼Œæœ€åŽå°†æ¶ˆæ¯å‘é€åˆ°ç›‘å¬çš„æ¶ˆè´¹ä¹‹ã€‚ æ¶ˆæ¯æµ RabbitMQ åŸºæœ¬æ¦‚å¿µä¸Šé¢åªæ˜¯æœ€ç®€å•æŠ½è±¡çš„æè¿°ï¼Œå…·ä½“åˆ° RabbitMQ åˆ™æœ‰æ›´è¯¦ç»†çš„æ¦‚å¿µéœ€è¦è§£é‡Šã€‚ä¸Šé¢ä»‹ç»è¿‡ RabbitMQ æ˜¯ AMQP åè®®çš„ä¸€ä¸ªå¼€æºå®žçŽ°ï¼Œæ‰€ä»¥å…¶å†…éƒ¨å®žé™…ä¸Šä¹Ÿæ˜¯ AMQP ä¸­çš„åŸºæœ¬æ¦‚å¿µï¼š RabbitMQ å†…éƒ¨ç»“æž„ Message æ¶ˆæ¯ï¼Œæ¶ˆæ¯æ˜¯ä¸å…·åçš„ï¼Œå®ƒç”±æ¶ˆæ¯å¤´å’Œæ¶ˆæ¯ä½“ç»„æˆã€‚æ¶ˆæ¯ä½“æ˜¯ä¸é€æ˜Žçš„ï¼Œè€Œæ¶ˆæ¯å¤´åˆ™ç”±ä¸€ç³»åˆ—çš„å¯é€‰å±žæ€§ç»„æˆï¼Œè¿™äº›å±žæ€§åŒ…æ‹¬ routing-keyï¼ˆè·¯ç”±é”®ï¼‰ã€priorityï¼ˆç›¸å¯¹äºŽå…¶ä»–æ¶ˆæ¯çš„ä¼˜å…ˆæƒï¼‰ã€delivery-modeï¼ˆæŒ‡å‡ºè¯¥æ¶ˆæ¯å¯èƒ½éœ€è¦æŒä¹…æ€§å­˜å‚¨ï¼‰ç­‰ã€‚ã€‚ Publisher æ¶ˆæ¯çš„ç”Ÿäº§è€…ï¼Œä¹Ÿæ˜¯ä¸€ä¸ªå‘äº¤æ¢å™¨å‘å¸ƒæ¶ˆæ¯çš„å®¢æˆ·ç«¯åº”ç”¨ç¨‹åºã€‚ Exchange äº¤æ¢å™¨ï¼Œç”¨æ¥æŽ¥æ”¶ç”Ÿäº§è€…å‘é€çš„æ¶ˆæ¯å¹¶å°†è¿™äº›æ¶ˆæ¯è·¯ç”±ç»™æœåŠ¡å™¨ä¸­çš„é˜Ÿåˆ—ã€‚ Binding ç»‘å®šï¼Œç”¨äºŽæ¶ˆæ¯é˜Ÿåˆ—å’Œäº¤æ¢å™¨ä¹‹é—´çš„å…³è”ã€‚ä¸€ä¸ªç»‘å®šå°±æ˜¯åŸºäºŽè·¯ç”±é”®å°†äº¤æ¢å™¨å’Œæ¶ˆæ¯é˜Ÿåˆ—è¿žæŽ¥èµ·æ¥çš„è·¯ç”±è§„åˆ™ï¼Œæ‰€ä»¥å¯ä»¥å°†äº¤æ¢å™¨ç†è§£æˆä¸€ä¸ªç”±ç»‘å®šæž„æˆçš„è·¯ç”±è¡¨ã€‚ Queue æ¶ˆæ¯é˜Ÿåˆ—ï¼Œç”¨æ¥ä¿å­˜æ¶ˆæ¯ç›´åˆ°å‘é€ç»™æ¶ˆè´¹è€…ã€‚å®ƒæ˜¯æ¶ˆæ¯çš„å®¹å™¨ï¼Œä¹Ÿæ˜¯æ¶ˆæ¯çš„ç»ˆç‚¹ã€‚ä¸€ä¸ªæ¶ˆæ¯å¯ä»¥æŠ•å…¥ä¸€ä¸ªæˆ–å¤šä¸ªé˜Ÿåˆ—ã€‚æ¶ˆæ¯ä¸€ç›´åœ¨é˜Ÿåˆ—é‡Œé¢ï¼Œç­‰å¾…æ¶ˆè´¹è€…è¿žæŽ¥åˆ°è¿™ä¸ªé˜Ÿåˆ—å°†å…¶å–èµ°ã€‚ Connection ç½‘ç»œè¿žæŽ¥ï¼Œæ¯”å¦‚ä¸€ä¸ª TCP è¿žæŽ¥ã€‚ Channel ä¿¡é“ï¼Œå¤šè·¯å¤ç”¨è¿žæŽ¥ä¸­çš„ä¸€æ¡ç‹¬ç«‹çš„åŒå‘æ•°æ®æµé€šé“ã€‚ä¿¡é“æ˜¯å»ºç«‹åœ¨çœŸå®žçš„ TCP è¿žæŽ¥å†…çš„è™šæ‹Ÿè¿žæŽ¥ï¼ŒAMQP å‘½ä»¤éƒ½æ˜¯é€šè¿‡ä¿¡é“å‘å‡ºåŽ»çš„ï¼Œä¸ç®¡æ˜¯å‘å¸ƒæ¶ˆæ¯ã€è®¢é˜…é˜Ÿåˆ—è¿˜æ˜¯æŽ¥æ”¶æ¶ˆæ¯ï¼Œè¿™äº›åŠ¨ä½œéƒ½æ˜¯é€šè¿‡ä¿¡é“å®Œæˆã€‚å› ä¸ºå¯¹äºŽæ“ä½œç³»ç»Ÿæ¥è¯´å»ºç«‹å’Œé”€æ¯ TCP éƒ½æ˜¯éžå¸¸æ˜‚è´µçš„å¼€é”€ï¼Œæ‰€ä»¥å¼•å…¥äº†ä¿¡é“çš„æ¦‚å¿µï¼Œä»¥å¤ç”¨ä¸€æ¡ TCP è¿žæŽ¥ã€‚ Consumer æ¶ˆæ¯çš„æ¶ˆè´¹è€…ï¼Œè¡¨ç¤ºä¸€ä¸ªä»Žæ¶ˆæ¯é˜Ÿåˆ—ä¸­å–å¾—æ¶ˆæ¯çš„å®¢æˆ·ç«¯åº”ç”¨ç¨‹åºã€‚ Virtual Host è™šæ‹Ÿä¸»æœºï¼Œè¡¨ç¤ºä¸€æ‰¹äº¤æ¢å™¨ã€æ¶ˆæ¯é˜Ÿåˆ—å’Œç›¸å…³å¯¹è±¡ã€‚è™šæ‹Ÿä¸»æœºæ˜¯å…±äº«ç›¸åŒçš„èº«ä»½è®¤è¯å’ŒåŠ å¯†çŽ¯å¢ƒçš„ç‹¬ç«‹æœåŠ¡å™¨åŸŸã€‚æ¯ä¸ª vhost æœ¬è´¨ä¸Šå°±æ˜¯ä¸€ä¸ª mini ç‰ˆçš„ RabbitMQ æœåŠ¡å™¨ï¼Œæ‹¥æœ‰è‡ªå·±çš„é˜Ÿåˆ—ã€äº¤æ¢å™¨ã€ç»‘å®šå’Œæƒé™æœºåˆ¶ã€‚vhost æ˜¯ AMQP æ¦‚å¿µçš„åŸºç¡€ï¼Œå¿…é¡»åœ¨è¿žæŽ¥æ—¶æŒ‡å®šï¼ŒRabbitMQ æ˜¯é»˜è®¤çš„ vhostã€‚ Broker è¡¨ç¤ºæ¶ˆæ¯é˜Ÿåˆ—æœåŠ¡å™¨å®žä½“ã€‚ AMQP ä¸­çš„æ¶ˆæ¯è·¯ç”±AMQP ä¸­æ¶ˆæ¯çš„è·¯ç”±è¿‡ç¨‹å¢žåŠ äº† Exchange å’Œ Binding çš„è§’è‰²ã€‚ç”Ÿäº§è€…æŠŠæ¶ˆæ¯å‘å¸ƒåˆ° Exchange ä¸Šï¼Œæ¶ˆæ¯æœ€ç»ˆåˆ°è¾¾é˜Ÿåˆ—å¹¶è¢«æ¶ˆè´¹è€…æŽ¥å—ï¼Œè€Œ Binding å†³å®šäº¤æ¢å™¨çš„æ¶ˆæ¯åº”è¯¥å‘é€åˆ°å“ªä¸ªé˜Ÿåˆ—ä¸­ã€‚ AMQP çš„æ¶ˆæ¯è·¯ç”±è¿‡ç¨‹ Exchange ç±»åž‹Exchange åˆ†å‘æ¶ˆæ¯æ—¶æ ¹æ®ç±»åž‹çš„ä¸åŒåˆ†å‘ç­–ç•¥æœ‰åŒºåˆ«ï¼Œç›®å‰å…±å››ç§ç±»åž‹ï¼šdirectã€fanoutã€topicã€headersã€‚headers åŒ¹é… AMQP æ¶ˆæ¯çš„ header è€Œä¸æ˜¯è·¯ç”±é”®ï¼Œæ­¤å¤– headers äº¤æ¢å™¨å’Œ direct äº¤æ¢å™¨å®Œå…¨ä¸€è‡´ï¼Œä½†æ€§èƒ½å·®å¾ˆå¤šï¼Œç›®å‰å‡ ä¹Žç”¨ä¸åˆ°äº†ã€‚ direct direct äº¤æ¢å™¨ æ¶ˆæ¯ä¸­çš„è·¯ç”±é”®ï¼ˆrouting keyï¼‰å¦‚æžœå’Œ Binding ä¸­çš„ bind key ä¸€è‡´ï¼Œäº¤æ¢å™¨å°±å°†æ¶ˆæ¯å‘é€åˆ°ç›¸åº”çš„é˜Ÿåˆ—ä¸­ã€‚è·¯ç”±é”®ä¸Žé˜Ÿåˆ—åå®Œå…¨åŒ¹é…ï¼Œå¦‚æžœä¸€ä¸ªé˜Ÿåˆ—ç»‘å®šåˆ°äº¤æ¢æœºè¦æ±‚è·¯ç”±é”®ä¸ºâ€˜â€™dogâ€˜â€™ï¼Œåˆ™åªè½¬å‘ routing key æ ‡è®°ä¸ºâ€˜â€™dogâ€˜â€™çš„æ¶ˆæ¯ï¼Œä¸ä¼šè½¬å‘â€˜â€™dog.puppyâ€˜â€™ç­‰ã€‚è¿™æ˜¯å®Œå…¨åŒ¹é…ã€å•è–„çš„æ¨¡å¼ã€‚ fanout fanout äº¤æ¢å™¨ æ¯ä¸ªå‘åˆ° fanout ç±»åž‹äº¤æ¢å™¨çš„æ¶ˆæ¯éƒ½ä¼šåˆ†åˆ°æ‰€æœ‰ç»‘å®šçš„é˜Ÿåˆ—ä¸ŠåŽ»ã€‚fanout äº¤æ¢å™¨ä¸å¤„ç†è·¯ç”±é”®ï¼Œåªæ˜¯ç®€å•åœ°å°†é˜Ÿåˆ—ç»‘å®šåˆ°äº¤æ¢å™¨ä¸Šï¼Œæ¯ä¸ªå‘é€åˆ°äº¤æ¢å™¨çš„æ¶ˆæ¯éƒ½ä¼šè¢«è½¬å‘åˆ°ä¸Žè¯¥äº¤æ¢å™¨ç»‘å®šçš„æ‰€æœ‰é˜Ÿåˆ—ä¸Šã€‚å¾ˆåƒå­ç½‘å¹¿æ’­ï¼Œæ¯å°å­ç½‘å†…çš„ä¸»æœºéƒ½èŽ·å¾—ä¸€ä»½å¤åˆ¶çš„æ¶ˆæ¯ã€‚fanout ç±»åž‹è½¬å‘æ¶ˆæ¯æ˜¯æœ€å¿«çš„ã€‚ topic topic äº¤æ¢å™¨ topic äº¤æ¢å™¨é€šè¿‡æ¨¡å¼åŒ¹é…åˆ†é…æ¶ˆæ¯çš„è·¯ç”±é”®å±žæ€§ï¼Œå°†è·¯ç”±é”®å’ŒæŸä¸ªæ¨¡å¼è¿›è¡ŒåŒ¹é…ï¼Œæ­¤æ—¶é˜Ÿåˆ—éœ€è¦ç»‘å®šåˆ°ä¸€ä¸ªæ¨¡å¼ä¸Šã€‚å®ƒå°†è·¯ç”±é”®å’Œç»‘å®šé”®çš„å­—ç¬¦ä¸²åˆ†æˆå•è¯ï¼Œè¿™äº›å•è¯ä¹‹é—´ç”¨ç‚¹éš”å¼€ã€‚å®ƒåŒæ ·ä¼šè¯†åˆ«ä¸¤ä¸ªé€šé…ç¬¦ï¼šç¬¦å·#å’Œç¬¦å·*ã€‚#åŒ¹é…0ä¸ªæˆ–å¤šä¸ªå•è¯ï¼Œ*åŒ¹é…ä¸€ä¸ªå•è¯ã€‚ RabbitMQ è¿è¡Œå’Œç®¡ç† å¯åŠ¨ æ‰¾åˆ°å®‰è£…åŽçš„ RabbitMQ æ‰€åœ¨ç›®å½•ä¸‹çš„ sbin ç›®å½•ï¼Œå¯ä»¥çœ‹åˆ°è¯¥ç›®å½•ä¸‹æœ‰7ä¸ªä»¥ rabbitmq å¼€å¤´çš„å¯æ‰§è¡Œæ–‡ä»¶ï¼Œç›´æŽ¥æ‰§è¡Œ rabbitmq-server å³å¯ï¼Œä¸‹é¢ å¯åŠ¨ä¼šçœ‹åˆ°ä¸€äº›å¯åŠ¨è¿‡ç¨‹å’Œæœ€åŽçš„ completed with 6 pluginsï¼Œè¿™è¯´æ˜Žå¯åŠ¨çš„æ—¶å€™é»˜è®¤åŠ è½½äº†6ä¸ªæ’ä»¶ã€‚ åŽå°å¯åŠ¨ å¦‚æžœæƒ³è®©RabbitMQ ä»¥å®ˆæŠ¤ç¨‹åºçš„æ–¹å¼åœ¨åŽå°è¿è¡Œï¼Œå¯ä»¥åœ¨å¯åŠ¨çš„æ—¶å€™åŠ ä¸Š-detached å‚æ•°ï¼š 1rabbitmq-server -detached æŸ¥è¯¢æœåŠ¡å™¨çŠ¶æ€ sbin ç›®å½•ä¸‹æœ‰ä¸ªå¾ˆé‡è¦çš„æ–‡ä»¶å« rabbitmqctlï¼Œå®ƒæä¾›äº† RabbitMQ ç®¡ç†éœ€è¦çš„å‡ ä¹Žä¸€ç«™å¼è§£å†³æ–¹æ¡ˆï¼Œç»å¤§éƒ¨åˆ†çš„è¿ç»´å‘½ä»¤å®ƒéƒ½å¯ä»¥æä¾›ã€‚ æŸ¥è¯¢ RabbitMQ æœåŠ¡å™¨çš„çŠ¶æ€ä¿¡æ¯å¯ä»¥ç”¨å‚æ•° status 1rabbitmqctl status è¯¥å‘½ä»¤å°†è¾“å‡ºæœåŠ¡å™¨å¾ˆå¤šä¿¡æ¯ï¼Œæ¯”å¦‚ RabbitMQ å’Œ Erlangçš„ç‰ˆæœ¬ã€os åç§°ã€å†…å­˜ç­‰ä¿¡æ¯ã€‚ å…³é—­ RabbitMQ èŠ‚ç‚¹ åœ¨ Erlang ä¸­æœ‰ä¸¤ä¸ªæ¦‚å¿µï¼šèŠ‚ç‚¹å’Œåº”ç”¨ç¨‹åºã€‚èŠ‚ç‚¹å°±æ˜¯ Erlang è™šæ‹Ÿæœºçš„æ¯ä¸ªå®žä¾‹ï¼Œè€Œå¤šä¸ª Erlang åº”ç”¨ç¨‹åºå¯ä»¥è¿è¡Œåœ¨åŒä¸€ä¸ªèŠ‚ç‚¹ä¹‹ä¸Šã€‚èŠ‚ç‚¹ä¹‹é—´å¯ä»¥è¿›è¡Œæœ¬åœ°é€šä¿¡ï¼ˆä¸ç®¡ä»–ä»¬æ˜¯ä¸æ˜¯è¿è¡Œåœ¨åŒä¸€å°æœåŠ¡å™¨ä¹‹ä¸Šï¼‰ã€‚æ¯”å¦‚ä¸€ä¸ªè¿è¡Œåœ¨èŠ‚ç‚¹ A ä¸Šçš„åº”ç”¨ç¨‹åºå¯ä»¥è°ƒç”¨èŠ‚ç‚¹ B ä¸Šåº”ç”¨ç¨‹åºçš„æ–¹æ³•ï¼Œå°±å¥½åƒè°ƒç”¨æœ¬åœ°å‡½æ•°ä¸€æ ·ã€‚å¦‚æžœåº”ç”¨ç¨‹åºç”±äºŽæŸäº›åŽŸå› å´©æºƒï¼ŒErlang èŠ‚ç‚¹ä¼šè‡ªåŠ¨å°è¯•é‡å¯åº”ç”¨ç¨‹åºã€‚ å¦‚æžœè¦å…³é—­æ•´ä¸ª RabbitMQ èŠ‚ç‚¹å¯ä»¥ä½¿ç”¨å‚æ•° stop 1rabbitmqctl stop å®ƒä¼šå’Œæœ¬åœ°èŠ‚ç‚¹é€šä¿¡å¹¶æŒ‡ç¤ºå…¶å¹²å‡€çš„å…³é—­ï¼Œä¹Ÿå¯ä»¥æŒ‡å®šå…³é—­ä¸åŒçš„èŠ‚ç‚¹ï¼ŒåŒ…æ‹¬è¿œç¨‹èŠ‚ç‚¹ï¼Œåªéœ€è¦ä¼ å…¥äº§ç”Ÿå‚æ•°-n 1rabbitmqctl -n rabbit@server.example.com stop -n nodeé»˜è®¤ node åç§°æ˜¯ rabbit@serverï¼Œå¦‚æžœä½ çš„ä¸»æœºåæ˜¯ server.example.comï¼Œé‚£ä¹ˆ node åç§°å°±æ˜¯ rabbit@server.example.comã€‚ å…³é—­ RabbitMQ åº”ç”¨ç¨‹åº å¦‚æžœåªæƒ³å…³é—­åº”ç”¨ç¨‹åºï¼ŒåŒæ—¶ä¿æŒ Erlang èŠ‚ç‚¹è¿è¡Œåˆ™å¯ä»¥ä½¿ç”¨stop_app 1rabbitmqctl stop_app å¯åŠ¨ RabbitMQ èŠ‚ç‚¹ 1rabbitmqctl start_app é‡ç½®RabbitMQ èŠ‚ç‚¹ 1rabbitmqctl reset æŸ¥çœ‹å·²å£°æ˜Žçš„é˜Ÿåˆ— 1rabbitmqctl list_queues æŸ¥çœ‹äº¤æ¢å™¨ 1rabbitmqctl list_exchanges è¯¥å‘½ä»¤è¿˜å¯ä»¥é™„åŠ å‚æ•°ï¼Œæ¯”å¦‚åˆ—å‡ºäº¤æ¢å™¨çš„åç§°ã€ç±»åž‹ã€æ˜¯å¦æŒä¹…åŒ–ã€æ˜¯å¦è‡ªåŠ¨åˆ é™¤ï¼š 1rabbitmqctl list_exchanges name type durable auto_delete æŸ¥çœ‹ç»‘å®š 1rabbitmqctl list_bindings é˜Ÿåˆ—çš„ä½œç”¨åº”ç”¨è§£è€¦å®žé™…æ¡ˆä¾‹ï¼šåœ¨ç”¨æˆ·è¿›è¡Œæ³¨å†Œçš„æ—¶å€™éœ€è¦è¿›è¡Œé‚®ä»¶å‘é€å’ŒéªŒè¯ç å‘é€ï¼Œåœ¨æ²¡æœ‰ä½¿ç”¨æ¶ˆæ¯é˜Ÿåˆ—ä¹‹å‰ï¼Œè¿™äº›æ“ä½œæ˜¯åŒæ­¥è¿›è¡Œçš„ï¼Œåœ¨ç”¨æˆ·é‡è¾ƒå°‘çš„æƒ…å†µä¸‹ï¼Œæ˜¯ä¸ä¼šå½±å“ç”¨æˆ·ä½“éªŒçš„ï¼Œä½†æ˜¯ä¸€æ—¦ç”¨æˆ·é‡å¤§äº†èµ·æ¥ï¼Œè¿˜æ˜¯ä½¿ç”¨åŒæ­¥çš„è¯ä¼šæžå¤§åœ°å½±å“ç”¨æˆ·ä½“éªŒï¼Œåœ¨è¿™ç§æƒ…å†µä¸‹å°±å¯ä»¥ä½¿ç”¨æ¶ˆæ¯é˜Ÿåˆ—ã€‚ å½“ç”¨æˆ·æ³¨å†Œçš„æ—¶å€™å…ˆç›´æŽ¥è¿”å›žæ³¨å†ŒæˆåŠŸé¡µé¢ï¼Œä¹‹åŽå°†éœ€è¦å‘é€é‚®ä»¶å’ŒéªŒè¯ç çš„ä»»åŠ¡å­˜åœ¨é˜Ÿåˆ—é‡Œé¢ï¼Œä¹‹åŽç”±æœåŠ¡å™¨æ¥æ¶ˆè´¹é˜Ÿåˆ—é‡Œé¢çš„ä»»åŠ¡å·²è¾¾åˆ°åº”ç”¨è§£è€¦çš„ç›®çš„ã€‚ æµé‡å‰Šå³°åœ¨æ·˜å®åŒåä¸€æˆ–è€…æ˜¥è¿æ—¶çš„12306çš„ç”¨æˆ·è®¿é—®é‡æ˜¯ç‰¹åˆ«å¤§çš„ï¼Œè¿™ç§æƒ…å†µä¸‹å¦‚æžœæ‰€æœ‰çš„è¯·æ±‚ç›´æŽ¥æ‰“åˆ°æœåŠ¡å™¨ä¸Šï¼ŒæœåŠ¡å™¨ä¼šç›´æŽ¥æŒ‚æŽ‰ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œå¯ä»¥ä½¿ç”¨åŠ¨æ€æ‰©å®¹æœåŠ¡å™¨çš„æ•°é‡æ¥å¤„ç†é«˜å¹¶å‘ï¼Œä½†æ˜¯å¹¶ä¸æ˜¯æ‰€æœ‰æ—¶é—´éƒ½éœ€è¦å¾ˆå¤šæœåŠ¡å™¨è¿›è¡Œå¤„ç†ï¼Œä¸ºäº†æˆæœ¬çš„è€ƒè™‘å¯ä»¥é‡‡ç”¨æ¶ˆæ¯é˜Ÿåˆ—è¿›è¡Œå¤„ç†å¹¶å‘ï¼Œå°±æ˜¯æ‰€æœ‰çš„è¯·æ±‚å¹¶ä¸æ˜¯ç›´æŽ¥è¯·æ±‚æœåŠ¡å™¨ï¼Œè€Œæ˜¯å…ˆæŠŠç”¨æˆ·çš„è¯·æ±‚å­˜å‚¨åœ¨æ¶ˆæ¯é˜Ÿåˆ—é‡Œé¢ï¼Œä¹‹åŽæœåŠ¡å™¨åœ¨æ…¢æ…¢åœ°è¿›è¡Œå¤„ç†è¯·æ±‚ã€‚ æ¶ˆæ¯é˜Ÿåˆ—æ•°æ®ä¸ä¸¢å¤± åœ¨äº§ç”Ÿé˜Ÿåˆ—æ—¶ï¼Œè®¾ç½®durable=Trueï¼Œä»£è¡¨é˜Ÿåˆ—æŒä¹…åŒ– åœ¨ç”Ÿäº§ç«¯ï¼Œè®¾ç½®properties=pika.BasicProperties(delivery_mode=2) åœ¨æ¶ˆè´¹ç«¯ï¼Œè®¾ç½®auto_ack=False, ch.basic_ack(delivery_tag=method.delivery_tag) æ¶ˆæ¯äº§ç”Ÿä¸Žæ¶ˆè´¹ç®€å•æ¶ˆæ¯å‘é€producer1234567891011121314151617181920212223242526# -*- coding: utf-8 -*-# __author__: MUSIBII# __email__ : shaozuanzuan@gmail.com# __file__ : producer.py# __time__ : 2019-04-03 16:56import pikaconnection = pika.BlockingConnection( pika.ConnectionParameters(host='localhost'))channel = connection.channel()# å£°æ˜Žé˜Ÿåˆ—channel.queue_declare(queue='test', durable=True)channel.basic_publish(exchange='', routing_key='test', body='Hello World!', properties=pika.BasicProperties( delivery_mode=1, # make message persistent ))print('[x] sent "hello world!"')connection.close() consumer123456789101112131415161718192021222324252627282930313233343536# -*- coding: utf-8 -*-# __author__: MUSIBII# __email__ : shaozuanzuan@gmail.com# __file__ : consumer.py# __time__ : 2019-04-03 16:56import pikaconnection = pika.BlockingConnection( pika.ConnectionParameters(host='localhost'))channel = connection.channel()channel.queue_declare(queue='test', durable=True)def callback(ch, method, properties, body): ''' :param ch: ä¿¡é“ :param method: :param properties: :param body: message :return: ''' print(ch, method, properties, body) ch.basic_ack(delivery_tag=method.delivery_tag)channel.basic_consume( queue='test', on_message_callback=callback, auto_ack=False)channel.start_consuming() fanout æ¨¡å¼producer12345678910111213141516171819202122232425# -*- coding: utf-8 -*-# __author__: MUSIBII# __email__ : shaozuanzuan@gmail.com# __file__ : producer.py# __time__ : 2019-04-03 18:36import sysimport pikaconnection = pika.BlockingConnection( pika.ConnectionParameters(host='localhost'))channel = connection.channel()channel.exchange_declare(exchange='logs', exchange_type='fanout')message = ''.join(sys.argv[1:]) or 'info: hello world!'channel.basic_publish(exchange='logs', routing_key='', body=message)print('[x] sent %r' % message)connection.close() consumer123456789101112131415161718192021222324252627282930313233343536# -*- coding: utf-8 -*-# __author__: MUSIBII# __email__ : shaozuanzuan@gmail.com# __file__ : consumer.py# __time__ : 2019-04-03 18:41import pikaconnection = pika.BlockingConnection( pika.ConnectionParameters(host='localhost'))channel = connection.channel()channel.exchange_declare(exchange='logs', exchange_type='fanout')result = channel.queue_declare('', exclusive=True) # exclusive æŽ’ä»–æ€§ï¼Œå”¯ä¸€æ€§queue_name = result.method.queueprint('queue_name:', queue_name)channel.queue_bind(exchange='logs', queue=queue_name)print('[*] waiting for logs. To exit press CTRL+c')def callback(ch, method, properties, body): print('[x] %r' % body)channel.basic_consume( queue=queue_name, on_message_callback=callback, auto_ack=True)channel.start_consuming() direct æ¨¡å¼producer123456789101112131415161718192021222324252627282930# -*- coding: utf-8 -*-# __author__: MUSIBII# __email__ : shaozuanzuan@gmail.com# __file__ : producer.py# __time__ : 2019-04-03 18:49import sysimport pikaconnection = pika.BlockingConnection( pika.ConnectionParameters(host='localhost'))channel = connection.channel()channel.exchange_declare(exchange='direct_logs', exchange_type='direct')log_levels = sys.argv[1] if len(sys.argv) &gt; 1 else 'info'message = ' '.join(sys.argv[2:]) or 'Hello World!'channel.basic_publish( exchange='direct_logs', routing_key=log_levels, body=message)print('[x] Sent %r:%r' % (log_levels, message))connection.close() consumer123456789101112131415161718192021222324252627282930313233343536373839404142434445464748# -*- coding: utf-8 -*-# __author__: MUSIBII# __email__ : shaozuanzuan@gmail.com# __file__ : consumer.py# __time__ : 2019-04-03 18:53import sysimport pikaconnection = pika.BlockingConnection( pika.ConnectionParameters(host='localhost'))channel = connection.channel()channel.exchange_declare(exchange='direct_logs', exchange_type='direct')result = channel.queue_declare('', exclusive=True)queue_name = result.method.queuelog_levels = sys.argv[1:]if not log_levels: sys.stderr.write('Usage: %s [info] [warning] [error]\n' % sys.argv[0])for severity in log_levels: channel.queue_bind( exchange='direct_logs', queue=queue_name, routing_key=severity )print('[*] Waiting for logs. To exit press CTRL+c')def callback(ch, method, properties, body): print('[x] %r:%r' % (method.routing_key, body))channel.basic_consume( queue=queue_name, on_message_callback=callback, auto_ack=True)channel.start_consuming() topic æ¨¡å¼producer123456789101112131415161718192021222324252627282930# -*- coding: utf-8 -*-# __author__: MUSIBII# __email__ : shaozuanzuan@gmail.com# __file__ : producer.py# __time__ : 2019-04-03 19:07import sysimport pikaconnection = pika.BlockingConnection( pika.ConnectionParameters(host='localhost'))channel = connection.channel()channel.exchange_declare(exchange='topic_logs', exchange_type='topic')routing_key = sys.argv[1] if len(sys.argv) &gt; 2 else 'anonymous.info'message = ' '.join(sys.argv[2:]) or 'Hello World!'channel.basic_publish( exchange='topic_logs', routing_key=routing_key, body=message)print('[x] Sent %r:%r' % (routing_key, message))connection.close() consumer123456789101112131415161718192021222324252627282930313233343536373839404142434445464748# -*- coding: utf-8 -*-# __author__: MUSIBII# __email__ : shaozuanzuan@gmail.com# __file__ : consumer.py# __time__ : 2019-04-03 19:11import sysimport pikaconnection = pika.BlockingConnection( pika.ConnectionParameters(host='localhost'))channel = connection.channel()channel.exchange_declare(exchange='topic_logs', exchange_type='topic')result = channel.queue_declare('', exclusive=True)queue_name = result.method.queuebinding_keys = sys.argv[1:]if not binding_keys: sys.stderr.write('Usage: %s [binding_key]...\n' % sys.argv[0]) sys.exit(1)for binding_key in binding_keys: channel.queue_bind( exchange='topic_logs', queue=queue_name, routing_key=binding_key )print('[*] Waiting for logs. To exit press CTRL+c')def callback(ch, method, properties, body): print('[x %r:%r' % (method.routing_key, body))channel.basic_consume( queue=queue_name, on_message_callback=callback, auto_ack=True)channel.start_consuming() è¿›è¡Œæ¶ˆæ¯ä¼ é€’çš„æ—¶å€™å…ˆå¯åŠ¨ consumerï¼Œè¿™æ ·å½“ç”Ÿäº§è€…å‘é€æ¶ˆæ¯çš„æ—¶å€™èƒ½å†æ¶ˆè´¹è€…åŽç«¯çœ‹åˆ°æ¶ˆæ¯è®°å½•ã€‚æŽ¥ç€è¿è¡Œ producerï¼Œå‘å¸ƒä¸€æ¡æ¶ˆæ¯ï¼Œåœ¨ consumer çš„æŽ§åˆ¶å°èƒ½çœ‹åˆ°æŽ¥æ”¶çš„æ¶ˆæ¯ã€‚ RabbitMQ é›†ç¾¤RabbitMQ æœ€ä¼˜ç§€çš„åŠŸèƒ½ä¹‹ä¸€å°±æ˜¯å†…å»ºé›†ç¾¤ï¼Œè¿™ä¸ªåŠŸèƒ½è®¾è®¡çš„ç›®çš„æ˜¯å…è®¸æ¶ˆè´¹è€…å’Œç”Ÿäº§è€…åœ¨èŠ‚ç‚¹å´©æºƒçš„æƒ…å†µä¸‹ç»§ç»­è¿è¡Œï¼Œä»¥åŠé€šè¿‡æ·»åŠ æ›´å¤šçš„èŠ‚ç‚¹æ¥çº¿æ€§æ‰©å±•æ¶ˆæ¯é€šä¿¡åžåé‡ã€‚RabbitMQ å†…éƒ¨åˆ©ç”¨ Erlang æä¾›çš„åˆ†å¸ƒå¼é€šä¿¡æ¡†æž¶ OTP æ¥æ»¡è¶³ä¸Šè¿°éœ€æ±‚ï¼Œä½¿å®¢æˆ·ç«¯åœ¨å¤±åŽ»ä¸€ä¸ª RabbitMQ èŠ‚ç‚¹è¿žæŽ¥çš„æƒ…å†µä¸‹ï¼Œä¾æ—§èƒ½å¤Ÿé‡æ–°è¿žæŽ¥åˆ°é›†ç¾¤ä¸­çš„ä»»ä½•å…¶ä»–èŠ‚ç‚¹ç»§ç»­ç”Ÿäº§ã€æ¶ˆè´¹ã€‚ RabbitMQ é›†ç¾¤ä¸­çš„ä¸€äº›æ¦‚å¿µRabbitMQ ä¼šå§‹ç»ˆè®°å½•ä»¥ä¸‹å››ç§ç±»åž‹çš„å†…éƒ¨å…ƒæ•°æ®ï¼š é˜Ÿåˆ—å…ƒæ•°æ® åŒ…æ‹¬é˜Ÿåˆ—åç§°å’Œå®ƒä»¬çš„å±žæ€§ï¼Œæ¯”å¦‚æ˜¯å¦å¯æŒä¹…åŒ–ã€æ˜¯å¦è‡ªåŠ¨åˆ é™¤ äº¤æ¢å™¨å…ƒæ•°æ® äº¤æ¢å™¨åç§°ã€ç±»åž‹ã€å±žæ€§ ç»‘å®šå…ƒæ•°æ® å†…éƒ¨æ˜¯ä¸€å¼ è¡¨æ ¼è®°å½•å¦‚ä½•å°†æ¶ˆæ¯è·¯ç”±åˆ°é˜Ÿåˆ— vhost å…ƒæ•°æ® ä¸º vhost å†…éƒ¨çš„é˜Ÿåˆ—ã€äº¤æ¢å™¨ã€ç»‘å®šæä¾›å‘½åç©ºé—´å’Œå®‰å…¨å±žæ€§ã€‚ åœ¨å•ä¸€èŠ‚ç‚¹ä¸­ï¼ŒRabbitMQ ä¼šå°†æ‰€æœ‰è¿™äº›ä¿¡æ¯å­˜å‚¨åœ¨å†…å­˜ä¸­ï¼ŒåŒæ—¶å°†æ ‡è®°ä¸ºå¯æŒä¹…åŒ–çš„é˜Ÿåˆ—ã€äº¤æ¢å™¨ã€ç»‘å®šå­˜å‚¨åœ¨ç¡¬ç›˜ä¸Šã€‚å­˜åˆ°ç¡¬ç›˜ä¸Šå¯ä»¥ç¡®ä¿é˜Ÿåˆ—å’Œäº¤æ¢å™¨åœ¨èŠ‚ç‚¹é‡å¯åŽèƒ½å¤Ÿé‡å»ºã€‚è€Œåœ¨é›†ç¾¤æ¨¡å¼ä¸‹åŒæ ·ä¹Ÿæä¾›ä¸¤ç§é€‰æ‹©ï¼šå­˜åˆ°ç¡¬ç›˜ä¸Šï¼ˆç‹¬ç«‹èŠ‚ç‚¹çš„é»˜è®¤è®¾ç½®ï¼‰ï¼Œå­˜åˆ°å†…å­˜ä¸­ã€‚ å¦‚æžœåœ¨é›†ç¾¤ä¸­åˆ›å»ºé˜Ÿåˆ—ï¼Œé›†ç¾¤åªä¼šåœ¨å•ä¸ªèŠ‚ç‚¹è€Œä¸æ˜¯æ‰€æœ‰èŠ‚ç‚¹ä¸Šåˆ›å»ºå®Œæ•´çš„é˜Ÿåˆ—ä¿¡æ¯ï¼ˆå…ƒæ•°æ®ã€çŠ¶æ€ã€å†…å®¹ï¼‰ã€‚ç»“æžœæ˜¯åªæœ‰é˜Ÿåˆ—çš„æ‰€æœ‰è€…èŠ‚ç‚¹çŸ¥é“æœ‰å…³é˜Ÿåˆ—çš„æ‰€æœ‰ä¿¡æ¯ï¼Œå› æ­¤å½“é›†ç¾¤èŠ‚ç‚¹å´©æºƒæ—¶ï¼Œè¯¥èŠ‚ç‚¹çš„çš„é˜Ÿåˆ—å’Œç»‘å®šå°±æ¶ˆå¤±äº†ï¼Œå¹¶ä¸”ä»»ä½•åŒ¹é…è¯¥é˜Ÿåˆ—çš„ç»‘å®šçš„æ–°æ¶ˆæ¯ä¹Ÿä¼šä¸¢å¤±ã€‚ RabbitMQ é›†ç¾¤ä¸­å¯ä»¥å…±äº« userã€vhostã€exchangeç­‰ï¼Œæ‰€æœ‰çš„æ•°æ®å’ŒçŠ¶æ€éƒ½æ˜¯å¿…é¡»åœ¨æ‰€æœ‰èŠ‚ç‚¹ä¸Šå¤åˆ¶çš„ï¼Œä¾‹å¤–å°±æ˜¯ä¸Šé¢æ‰€è¯´çš„æ¶ˆæ¯é˜Ÿåˆ—ã€‚RabbitMQ èŠ‚ç‚¹å¯ä»¥åŠ¨æ€çš„åŠ å…¥åˆ°é›†ç¾¤ä¸­ã€‚ å½“åœ¨é›†ç¾¤ä¸­å£°æ˜Žé˜Ÿåˆ—ã€äº¤æ¢å™¨ã€ç»‘å®šçš„æ—¶å€™ï¼Œè¿™äº›æ“ä½œä¼šç›´åˆ°æ‰€æœ‰é›†ç¾¤èŠ‚ç‚¹éƒ½æˆåŠŸæäº¤å…ƒæ•°æ®å˜æ›´åŽæ‰è¿”å›žã€‚é›†ç¾¤ä¸­æœ‰å†…å­˜èŠ‚ç‚¹å’Œç£ç›˜èŠ‚ç‚¹ä¸¤ç§ç±»åž‹ï¼Œå†…å­˜èŠ‚ç‚¹è™½ç„¶ä¸å†™å…¥ç£ç›˜ï¼Œä½†æ˜¯å®ƒçš„æ‰§è¡Œæ¯”ç£ç›˜èŠ‚ç‚¹è¦å¥½ã€‚å†…å­˜èŠ‚ç‚¹å¯ä»¥æä¾›å‡ºè‰²çš„æ€§èƒ½ï¼Œç£ç›˜èŠ‚ç‚¹èƒ½ä¿éšœé…ç½®ä¿¡æ¯åœ¨èŠ‚ç‚¹é‡å¯åŽä»ç„¶å¯ç”¨ï¼Œé‚£é›†ç¾¤ä¸­å¦‚ä½•å¹³è¡¡è¿™ä¸¤è€…å‘¢ï¼Ÿ RabbitMQ åªè¦æ±‚é›†ç¾¤ä¸­è‡³å°‘æœ‰ä¸€ä¸ªç£ç›˜èŠ‚ç‚¹ï¼Œæ‰€æœ‰å…¶ä»–èŠ‚ç‚¹å¯ä»¥æ˜¯å†…å­˜èŠ‚ç‚¹ï¼Œå½“èŠ‚ç‚¹åŠ å…¥ç«ç¦»å¼€é›†ç¾¤æ—¶ï¼Œå®ƒä»¬å¿…é¡»è¦å°†è¯¥å˜æ›´é€šçŸ¥åˆ°è‡³å°‘ä¸€ä¸ªç£ç›˜èŠ‚ç‚¹ã€‚å¦‚æžœåªæœ‰ä¸€ä¸ªç£ç›˜èŠ‚ç‚¹ï¼Œåˆšå¥½åˆæ˜¯è¯¥èŠ‚ç‚¹å´©æºƒäº†ï¼Œé‚£ä¹ˆé›†ç¾¤å¯ä»¥ç»§ç»­è·¯ç”±æ¶ˆæ¯ï¼Œä½†ä¸èƒ½åˆ›å»ºé˜Ÿåˆ—ã€åˆ›å»ºäº¤æ¢å™¨ã€åˆ›å»ºç»‘å®šã€æ·»åŠ ç”¨æˆ·ã€æ›´æ”¹æƒé™ã€æ·»åŠ æˆ–åˆ é™¤é›†ç¾¤èŠ‚ç‚¹ã€‚æ¢å¥è¯è¯´é›†ç¾¤ä¸­çš„å”¯ä¸€ç£ç›˜èŠ‚ç‚¹å´©æºƒçš„è¯ï¼Œé›†ç¾¤ä»ç„¶å¯ä»¥è¿è¡Œï¼Œä½†çŸ¥é“è¯¥èŠ‚ç‚¹æ¢å¤ï¼Œå¦åˆ™æ— æ³•æ›´æ”¹ä»»ä½•ä¸œè¥¿ã€‚ RabbitMQ é›†ç¾¤é…ç½®å’Œå¯åŠ¨å¦‚æžœæ˜¯åœ¨ä¸€å°æœºå™¨ä¸ŠåŒæ—¶å¯åŠ¨å¤šä¸ª RabbitMQ èŠ‚ç‚¹æ¥ç»„å»ºé›†ç¾¤çš„è¯ï¼Œåªç”¨ä¸Šé¢ä»‹ç»çš„æ–¹å¼å¯åŠ¨ç¬¬äºŒã€ç¬¬ä¸‰ä¸ªèŠ‚ç‚¹å°†ä¼šå› ä¸ºèŠ‚ç‚¹åç§°å’Œç«¯å£å†²çªå¯¼è‡´å¯åŠ¨å¤±è´¥ã€‚æ‰€ä»¥åœ¨æ¯æ¬¡è°ƒç”¨ rabbitmq-server å‘½ä»¤å‰ï¼Œè®¾ç½®çŽ¯å¢ƒå˜é‡ RABBITMQ_NODENAME å’Œ RABBITMQ_NODE_PORT æ¥æ˜Žç¡®æŒ‡å®šå”¯ä¸€çš„èŠ‚ç‚¹åç§°å’Œç«¯å£ã€‚ä¸‹é¢çš„ä¾‹å­ç«¯å£å·ä»Ž5672å¼€å§‹ï¼Œæ¯ä¸ªæ–°å¯åŠ¨çš„èŠ‚ç‚¹éƒ½åŠ 1ï¼ŒèŠ‚ç‚¹ä¹Ÿåˆ†åˆ«å‘½åä¸ºtest_rabbit_1ã€test_rabbit_2ã€test_rabbit_3ã€‚ å¯åŠ¨ç¬¬ä¸€ä¸ªèŠ‚ç‚¹ï¼š 1RABBITMQ_NODENAME=test_rabbit_1 RABBITMQ_NODE_PORT=5672 ./sbin/rabbitmq-server -detached å¯åŠ¨ç¬¬äºŒä¸ªèŠ‚ç‚¹ï¼š 1RABBITMQ_NODENAME=test_rabbit_2 RABBITMQ_NODE_PORT=5673 ./sbin/rabbitmq-server -detached å¯åŠ¨ç¬¬2ä¸ªèŠ‚ç‚¹å‰å»ºè®®å°† RabbitMQ é»˜è®¤æ¿€æ´»çš„æ’ä»¶å…³æŽ‰ï¼Œå¦åˆ™ä¼šå­˜åœ¨ä½¿ç”¨äº†æŸä¸ªæ’ä»¶çš„ç«¯å£å·å†²çªï¼Œå¯¼è‡´èŠ‚ç‚¹å¯åŠ¨ä¸æˆåŠŸã€‚ çŽ°åœ¨ç¬¬2ä¸ªèŠ‚ç‚¹å’Œç¬¬1ä¸ªèŠ‚ç‚¹éƒ½æ˜¯ç‹¬ç«‹èŠ‚ç‚¹ï¼Œå®ƒä»¬å¹¶ä¸çŸ¥é“å…¶ä»–èŠ‚ç‚¹çš„å­˜åœ¨ã€‚é›†ç¾¤ä¸­é™¤ç¬¬ä¸€ä¸ªèŠ‚ç‚¹å¤–åŽåŠ å…¥çš„èŠ‚ç‚¹éœ€è¦èŽ·å–é›†ç¾¤ä¸­çš„å…ƒæ•°æ®ï¼Œæ‰€ä»¥è¦å…ˆåœæ­¢ Erlang èŠ‚ç‚¹ä¸Šè¿è¡Œçš„ RabbitMQ åº”ç”¨ç¨‹åºï¼Œå¹¶é‡ç½®è¯¥èŠ‚ç‚¹å…ƒæ•°æ®ï¼Œå†åŠ å…¥å¹¶ä¸”èŽ·å–é›†ç¾¤çš„å…ƒæ•°æ®ï¼Œæœ€åŽé‡æ–°å¯åŠ¨ RabbitMQ åº”ç”¨ç¨‹åºã€‚ åœæ­¢ç¬¬äºŒä¸ªèŠ‚ç‚¹çš„åº”ç”¨ç¨‹åºï¼š 1rabbitmqctl -n test_rabbit_2 stop_app é‡ç½®ç¬¬äºŒä¸ªèŠ‚ç‚¹å…ƒæ•°æ®ï¼š 1rabbitmqctl -n test_rabbit_2 reset ç¬¬äºŒä¸ªèŠ‚ç‚¹åŠ å…¥åˆ°ç¬¬ä¸€ä¸ªèŠ‚ç‚¹ç»„æˆçš„é›†ç¾¤ï¼š 1rabbitmqctl -n test_rabbit_2 join_cluster test_rabbit_1@localhost å¯åŠ¨ç¬¬äºŒä¸ªèŠ‚ç‚¹çš„åº”ç”¨ç¨‹åº 1rabbitmqctl -n test_rabbit_2 start_app ç¬¬ä¸‰ä¸ªèŠ‚ç‚¹çš„é…ç½®ç±»ä¼¼ 12345RABBITMQ_NODENAME=test_rabbit_3 RABBITMQ_NODE_PORT=5674 rabbitmq-server -detachedrabbitmqctl -n test_rabbit_3 stop_apprabbitmqctl -n test_rabbit_3 resetrabbitmqctl -n test_rabbit_3 join_cluster test_rabbit_1@localhostrabbitmqctl -n test_rabbit_3 start_app RabbitMQ é›†ç¾¤è¿ç»´åœæ­¢æŸä¸ªæŒ‡å®šçš„èŠ‚ç‚¹ï¼Œæ¯”å¦‚åœæ­¢ç¬¬äºŒä¸ªèŠ‚ç‚¹ 1RABBITMQ_NODENAME=test_rabbit_2 rabbitmqctl stop æŸ¥çœ‹èŠ‚ç‚¹ä¸‰çš„é›†ç¾¤çŠ¶æ€ 1rabbitmqctl -n test_rabbit_3 cluster_status]]></content>
      <categories>
        <category>rabbitmq</category>
      </categories>
  </entry>
  <entry>
    <title><![CDATA[celery è¿›è¡Œå¼‚æ­¥ä»»åŠ¡åŠå®šæ—¶ä»»åŠ¡]]></title>
    <url>%2F2019%2F04%2F03%2Fcelery-%E8%BF%9B%E8%A1%8C%E5%BC%82%E6%AD%A5%E4%BB%BB%E5%8A%A1%E5%8F%8A%E5%AE%9A%E6%97%B6%E4%BB%BB%E5%8A%A1%2F</url>
    <content type="text"><![CDATA[Celery1.ä»€ä¹ˆæ˜¯CleleryCeleryæ˜¯ä¸€ä¸ªç®€å•ã€çµæ´»ä¸”å¯é çš„ï¼Œå¤„ç†å¤§é‡æ¶ˆæ¯çš„åˆ†å¸ƒå¼ç³»ç»Ÿ ä¸“æ³¨äºŽå®žæ—¶å¤„ç†çš„å¼‚æ­¥ä»»åŠ¡é˜Ÿåˆ— åŒæ—¶ä¹Ÿæ”¯æŒä»»åŠ¡è°ƒåº¦ Celeryæž¶æž„ Celeryçš„æž¶æž„ç”±ä¸‰éƒ¨åˆ†ç»„æˆï¼Œæ¶ˆæ¯ä¸­é—´ä»¶ï¼ˆmessage brokerï¼‰ï¼Œä»»åŠ¡æ‰§è¡Œå•å…ƒï¼ˆworkerï¼‰å’Œä»»åŠ¡æ‰§è¡Œç»“æžœå­˜å‚¨ï¼ˆtask result storeï¼‰ç»„æˆã€‚ æ¶ˆæ¯ä¸­é—´ä»¶Celeryæœ¬èº«ä¸æä¾›æ¶ˆæ¯æœåŠ¡ï¼Œä½†æ˜¯å¯ä»¥æ–¹ä¾¿çš„å’Œç¬¬ä¸‰æ–¹æä¾›çš„æ¶ˆæ¯ä¸­é—´ä»¶é›†æˆã€‚åŒ…æ‹¬ï¼ŒRabbitMQ, Redisç­‰ç­‰ ä»»åŠ¡æ‰§è¡Œå•å…ƒWorkeræ˜¯Celeryæä¾›çš„ä»»åŠ¡æ‰§è¡Œçš„å•å…ƒï¼Œworkerå¹¶å‘çš„è¿è¡Œåœ¨åˆ†å¸ƒå¼çš„ç³»ç»ŸèŠ‚ç‚¹ä¸­ã€‚ ä»»åŠ¡ç»“æžœå­˜å‚¨Task result storeç”¨æ¥å­˜å‚¨Workeræ‰§è¡Œçš„ä»»åŠ¡çš„ç»“æžœï¼ŒCeleryæ”¯æŒä»¥ä¸åŒæ–¹å¼å­˜å‚¨ä»»åŠ¡çš„ç»“æžœï¼ŒåŒ…æ‹¬AMQP, redisç­‰ ç‰ˆæœ¬æ”¯æŒæƒ…å†µ123456789101112Celery version 4.0 runs on Python â¨2.7, 3.4, 3.5â© PyPy â¨5.4, 5.5â© This is the last version to support Python 2.7, and from the next version (Celery 5.x) Python 3.5 or newer is required. If youâ€™re running an older version of Python, you need to be running an older version of Celery: Python 2.6: Celery series 3.1 or earlier. Python 2.5: Celery series 3.0 or earlier. Python 2.4 was Celery series 2.2 or earlier. Celery is a project with minimal funding, so we donâ€™t support Microsoft Windows. Please donâ€™t open any issues related to that platform. 2.ä½¿ç”¨åœºæ™¯å¼‚æ­¥ä»»åŠ¡ï¼šå°†è€—æ—¶æ“ä½œä»»åŠ¡æäº¤ç»™CeleryåŽ»å¼‚æ­¥æ‰§è¡Œï¼Œæ¯”å¦‚å‘é€çŸ­ä¿¡/é‚®ä»¶ã€æ¶ˆæ¯æŽ¨é€ã€éŸ³è§†é¢‘å¤„ç†ç­‰ç­‰ å®šæ—¶ä»»åŠ¡ï¼šå®šæ—¶æ‰§è¡ŒæŸä»¶äº‹æƒ…ï¼Œæ¯”å¦‚æ¯å¤©æ•°æ®ç»Ÿè®¡ 3.Celeryçš„å®‰è£…é…ç½®pip install celery æ¶ˆæ¯ä¸­é—´ä»¶ï¼šRabbitMQ/Redis app=Celery(â€˜ä»»åŠ¡åâ€™ï¼Œbackend=â€™xxxâ€™,broker=â€™xxxâ€™) 4.Celeryæ‰§è¡Œå¼‚æ­¥ä»»åŠ¡åŸºæœ¬ä½¿ç”¨åˆ›å»ºé¡¹ç›®celerytest åˆ›å»ºpyæ–‡ä»¶ï¼šcelery_app_task.py 123456789import celeryimport time# broker='redis://127.0.0.1:6379/2' ä¸åŠ å¯†ç backend='redis://:123456@127.0.0.1:6379/1'broker='redis://:123456@127.0.0.1:6379/2'cel=celery.Celery('test',backend=backend,broker=broker)@cel.taskdef add(x,y): return x+y åˆ›å»ºpyæ–‡ä»¶ï¼šadd_task.py,æ·»åŠ ä»»åŠ¡ 123from celery_app_task import addresult = add.delay(4,5)print(result.id) åˆ›å»ºpyæ–‡ä»¶ï¼šrun.pyï¼Œæ‰§è¡Œä»»åŠ¡ï¼Œæˆ–è€…ä½¿ç”¨å‘½ä»¤æ‰§è¡Œï¼šcelery worker -A celery_app_task -l info æ³¨ï¼šwindowsä¸‹ï¼šcelery worker -A celery_app_task -l info -P eventlet 1234from celery_app_task import celif __name__ == '__main__': cel.worker_main() # cel.worker_main(argv=['--loglevel=info') åˆ›å»ºpyæ–‡ä»¶ï¼šresult.pyï¼ŒæŸ¥çœ‹ä»»åŠ¡æ‰§è¡Œç»“æžœ 1234567891011121314151617from celery.result import AsyncResultfrom celery_app_task import celasync = AsyncResult(id="e919d97d-2938-4d0f-9265-fd8237dc2aa3", app=cel)if async.successful(): result = async.get() print(result) # result.forget() # å°†ç»“æžœåˆ é™¤elif async.failed(): print('æ‰§è¡Œå¤±è´¥')elif async.status == 'PENDING': print('ä»»åŠ¡ç­‰å¾…ä¸­è¢«æ‰§è¡Œ')elif async.status == 'RETRY': print('ä»»åŠ¡å¼‚å¸¸åŽæ­£åœ¨é‡è¯•')elif async.status == 'STARTED': print('ä»»åŠ¡å·²ç»å¼€å§‹è¢«æ‰§è¡Œ') æ‰§è¡Œ add_task.pyï¼Œæ·»åŠ ä»»åŠ¡ï¼Œå¹¶èŽ·å–ä»»åŠ¡ID æ‰§è¡Œ run.py ï¼Œæˆ–è€…æ‰§è¡Œå‘½ä»¤ï¼šcelery worker -A celery_app_task -l info æ‰§è¡Œ result.py,æ£€æŸ¥ä»»åŠ¡çŠ¶æ€å¹¶èŽ·å–ç»“æžœ å¤šä»»åŠ¡ç»“æž„1234567pro_cel â”œâ”€â”€ celery_task# celeryç›¸å…³æ–‡ä»¶å¤¹ â”‚ â”œâ”€â”€ celery.py # celeryè¿žæŽ¥å’Œé…ç½®ç›¸å…³æ–‡ä»¶,å¿…é¡»å«è¿™ä¸ªåå­— â”‚ â””â”€â”€ tasks1.py # æ‰€æœ‰ä»»åŠ¡å‡½æ•° â”‚ â””â”€â”€ tasks2.py # æ‰€æœ‰ä»»åŠ¡å‡½æ•° â”œâ”€â”€ check_result.py # æ£€æŸ¥ç»“æžœ â””â”€â”€ send_task.py # è§¦å‘ä»»åŠ¡ celery.py 1234567891011121314from celery import Celerycel = Celery('celery_demo', broker='redis://127.0.0.1:6379/1', backend='redis://127.0.0.1:6379/2', # åŒ…å«ä»¥ä¸‹ä¸¤ä¸ªä»»åŠ¡æ–‡ä»¶ï¼ŒåŽ»ç›¸åº”çš„pyæ–‡ä»¶ä¸­æ‰¾ä»»åŠ¡ï¼Œå¯¹å¤šä¸ªä»»åŠ¡åšåˆ†ç±» include=['celery_task.tasks1', 'celery_task.tasks2' ])# æ—¶åŒºcel.conf.timezone = 'Asia/Shanghai'# æ˜¯å¦ä½¿ç”¨UTCcel.conf.enable_utc = False tasks1.py 1234567import timefrom celery_task.celery import cel@cel.taskdef test_celery(res): time.sleep(5) return "test_celeryä»»åŠ¡ç»“æžœ:%s"%res tasks2.py 123456import timefrom celery_task.celery import cel@cel.taskdef test_celery2(res): time.sleep(5) return "test_celery2ä»»åŠ¡ç»“æžœ:%s"%res check_result.py 12345678910111213141516171819from celery.result import AsyncResultfrom celery_task.celery import celasync = AsyncResult(id="08eb2778-24e1-44e4-a54b-56990b3519ef", app=cel)if async.successful(): result = async.get() print(result) # result.forget() # å°†ç»“æžœåˆ é™¤,æ‰§è¡Œå®Œæˆï¼Œç»“æžœä¸ä¼šè‡ªåŠ¨åˆ é™¤ # async.revoke(terminate=True) # æ— è®ºçŽ°åœ¨æ˜¯ä»€ä¹ˆæ—¶å€™ï¼Œéƒ½è¦ç»ˆæ­¢ # async.revoke(terminate=False) # å¦‚æžœä»»åŠ¡è¿˜æ²¡æœ‰å¼€å§‹æ‰§è¡Œå‘¢ï¼Œé‚£ä¹ˆå°±å¯ä»¥ç»ˆæ­¢ã€‚elif async.failed(): print('æ‰§è¡Œå¤±è´¥')elif async.status == 'PENDING': print('ä»»åŠ¡ç­‰å¾…ä¸­è¢«æ‰§è¡Œ')elif async.status == 'RETRY': print('ä»»åŠ¡å¼‚å¸¸åŽæ­£åœ¨é‡è¯•')elif async.status == 'STARTED': print('ä»»åŠ¡å·²ç»å¼€å§‹è¢«æ‰§è¡Œ') send_task.py 12345678from celery_task.tasks1 import test_celeryfrom celery_task.tasks2 import test_celery2# ç«‹å³å‘ŠçŸ¥celeryåŽ»æ‰§è¡Œtest_celeryä»»åŠ¡ï¼Œå¹¶ä¼ å…¥ä¸€ä¸ªå‚æ•°result = test_celery.delay('ç¬¬ä¸€ä¸ªçš„æ‰§è¡Œ')print(result.id)result = test_celery2.delay('ç¬¬äºŒä¸ªçš„æ‰§è¡Œ')print(result.id) æ·»åŠ ä»»åŠ¡ï¼ˆæ‰§è¡Œsend_task.pyï¼‰ï¼Œå¼€å¯workï¼šcelery worker -A celery_task -l info -P eventletï¼Œæ£€æŸ¥ä»»åŠ¡æ‰§è¡Œç»“æžœï¼ˆæ‰§è¡Œcheck_result.pyï¼‰ 5.Celeryæ‰§è¡Œå®šæ—¶ä»»åŠ¡è®¾å®šæ—¶é—´è®©celeryæ‰§è¡Œä¸€ä¸ªä»»åŠ¡add_task.py 12345678910111213141516171819202122from celery_app_task import addfrom datetime import datetime# æ–¹å¼ä¸€# v1 = datetime(2019, 2, 13, 18, 19, 56)# print(v1)# v2 = datetime.utcfromtimestamp(v1.timestamp())# print(v2)# result = add.apply_async(args=[1, 3], eta=v2)# print(result.id)# æ–¹å¼äºŒctime = datetime.now()# é»˜è®¤ç”¨utcæ—¶é—´utc_ctime = datetime.utcfromtimestamp(ctime.timestamp())from datetime import timedeltatime_delay = timedelta(seconds=10)task_time = utc_ctime + time_delay# ä½¿ç”¨apply_asyncå¹¶è®¾å®šæ—¶é—´result = add.apply_async(args=[4, 3], eta=task_time)print(result.id) ç±»ä¼¼äºŽcontabçš„å®šæ—¶ä»»åŠ¡å¤šä»»åŠ¡ç»“æž„ä¸­celery.pyä¿®æ”¹å¦‚ä¸‹ 12345678910111213141516171819202122232425262728293031from datetime import timedeltafrom celery import Celeryfrom celery.schedules import crontabcel = Celery('tasks', broker='redis://127.0.0.1:6379/1', backend='redis://127.0.0.1:6379/2', include=[ 'celery_task.tasks1', 'celery_task.tasks2',])cel.conf.timezone = 'Asia/Shanghai'cel.conf.enable_utc = Falsecel.conf.beat_schedule = &#123; # åå­—éšæ„å‘½å 'add-every-10-seconds': &#123; # æ‰§è¡Œtasks1ä¸‹çš„test_celeryå‡½æ•° 'task': 'celery_task.tasks1.test_celery', # æ¯éš”2ç§’æ‰§è¡Œä¸€æ¬¡ # 'schedule': 1.0, # 'schedule': crontab(minute="*/1"), 'schedule': timedelta(seconds=2), # ä¼ é€’å‚æ•° 'args': ('test',) &#125;, # 'add-every-12-seconds': &#123; # 'task': 'celery_task.tasks1.test_celery', # æ¯å¹´4æœˆ11å·ï¼Œ8ç‚¹42åˆ†æ‰§è¡Œ # 'schedule': crontab(minute=42, hour=8, day_of_month=11, month_of_year=4), # 'schedule': crontab(minute=42, hour=8, day_of_month=11, month_of_year=4), # 'args': (16, 16) # &#125;,&#125; å¯åŠ¨ä¸€ä¸ªbeatï¼šcelery beat -A celery_task -l info å¯åŠ¨workæ‰§è¡Œï¼šcelery worker -A celery_task -l info -P eventlet 6.Djangoä¸­ä½¿ç”¨Celeryåœ¨é¡¹ç›®ç›®å½•ä¸‹åˆ›å»ºceleryconfig.py 123456789101112131415import djcelerydjcelery.setup_loader()CELERY_IMPORTS=( 'app01.tasks',)#æœ‰äº›æƒ…å†µå¯ä»¥é˜²æ­¢æ­»é”CELERYD_FORCE_EXECV=True# è®¾ç½®å¹¶å‘workeræ•°é‡CELERYD_CONCURRENCY=4#å…è®¸é‡è¯•CELERY_ACKS_LATE=True# æ¯ä¸ªworkeræœ€å¤šæ‰§è¡Œ100ä¸ªä»»åŠ¡è¢«é”€æ¯ï¼Œå¯ä»¥é˜²æ­¢å†…å­˜æ³„æ¼CELERYD_MAX_TASKS_PER_CHILD=100# è¶…æ—¶æ—¶é—´CELERYD_TASK_TIME_LIMIT=12*30 åœ¨app01ç›®å½•ä¸‹åˆ›å»ºtasks.py 123456from celery import task@taskdef add(a,b): with open('a.text', 'a', encoding='utf-8') as f: f.write('a') print(a+b) è§†å›¾å‡½æ•°views.py 1234567891011121314from django.shortcuts import render,HttpResponsefrom app01.tasks import addfrom datetime import datetimedef test(request): # result=add.delay(2,3) ctime = datetime.now() # é»˜è®¤ç”¨utcæ—¶é—´ utc_ctime = datetime.utcfromtimestamp(ctime.timestamp()) from datetime import timedelta time_delay = timedelta(seconds=5) task_time = utc_ctime + time_delay result = add.apply_async(args=[4, 3], eta=task_time) print(result.id) return HttpResponse('ok') settings.py 123456789101112INSTALLED_APPS = [ ... 'djcelery', 'app01']...from djagocele import celeryconfigBROKER_BACKEND='redis'BOOKER_URL='redis://127.0.0.1:6379/1'CELERY_RESULT_BACKEND='redis://127.0.0.1:6379/2']]></content>
      <categories>
        <category>celery</category>
      </categories>
  </entry>
  <entry>
    <title><![CDATA[åˆ†å¸ƒå¼å›¾ç‰‡å­˜å‚¨ç³»ç»ŸfastDFSåœ¨ubuntä¸Šçš„éƒ¨ç½²]]></title>
    <url>%2F2019%2F03%2F10%2F%E5%88%86%E5%B8%83%E5%BC%8F%E5%9B%BE%E7%89%87%E5%AD%98%E5%82%A8%E7%B3%BB%E7%BB%9FfastDFS%E5%9C%A8ubunt%E4%B8%8A%E7%9A%84%E9%83%A8%E7%BD%B2%2F</url>
    <content type="text"></content>
  </entry>
  <entry>
    <title><![CDATA[Docker çš„å®‰è£…]]></title>
    <url>%2F2019%2F03%2F03%2FDocker-%E7%9A%84%E5%AE%89%E8%A3%85%2F</url>
    <content type="text"><![CDATA[$source /etc/bash_completion.d/docker.io ä½¿ç”¨ docker ç»´æŠ¤çš„ç‰ˆæœ¬ï¼š æ£€æŸ¥ APT çš„ HTTPS æ”¯æŒæŸ¥çœ‹/usr/lib/apt/methods/httpsæ–‡ä»¶æ˜¯å¦å­˜åœ¨ $apt-get update $apt-get install -y apt-transport-https æ·»åŠ  docker çš„ APT ä»“åº“ $echo deb https://get.docker.com/ubuntu docker main &gt; /etc/apt/$sources.list.d/docker.list æ·»åŠ ä»“åº“çš„key $apt-key adv --keyserver hkp://keyserver.ubuntu.com:80 --recv-keys 36A1D7869245C8950F966E92D8576A8BA88D21E9 å®‰è£… $apt-get update $apt-get install -y lxc-docker ä»¥ä¸Š4æ­¥å¯ä»¥é€šè¿‡ä¸‹é¢çš„ shell è„šæœ¬æ¥å®‰è£… $sudo apt-get install -y curl $curl -sSL https://get.docker.com/ | sudo sh]]></content>
      <categories>
        <category>Docker</category>
      </categories>
  </entry>
  <entry>
    <title><![CDATA[pythonä½¿ç”¨redis]]></title>
    <url>%2F2019%2F02%2F28%2Fpython%E4%BD%BF%E7%94%A8redis%2F</url>
    <content type="text"><![CDATA[redisçš„ä½¿ç”¨ä¸€ reidsç®€ä»‹åŠä¼˜åŠ¿redis æ˜¯ä¸€ä¸ª key-value çš„å­˜å‚¨ç³»ç»Ÿã€‚å’Œ Memcached ç±»ä¼¼ï¼Œå®ƒæ”¯æŒå­˜å‚¨çš„ value ç±»åž‹ç›¸å¯¹æ›´å¤šï¼ŒåŒ…æ‹¬ stringï¼ˆå­—ç¬¦ä¸²ï¼‰ã€listï¼ˆé“¾è¡¨ï¼‰ã€setï¼ˆé›†åˆï¼‰ã€zsetï¼ˆæœ‰åºé›†åˆï¼‰å’Œ hashï¼ˆå“ˆå¸Œç±»åž‹ï¼‰ã€‚è¿™äº›æ•°æ®ç±»åž‹éƒ½æ”¯æŒ push/popã€add/removeåŠå–äº¤é›†å’Œå·®é›†åŠæ›´ä¸°å¯Œçš„æ“ä½œï¼Œè€Œä¸”è¿™äº›æ“ä½œéƒ½æ˜¯åŽŸå­æ€§çš„ã€‚åœ¨æ­¤åŸºç¡€ä¸Šï¼Œredis æ”¯æŒå„ç§ä¸åŒæ–¹å¼çš„æŽ’åºã€‚ä¸Ž Memcached ä¸€æ ·ï¼Œä¸ºäº†ä¿è¯æ•ˆçŽ‡ï¼Œæ•°æ®éƒ½æ˜¯ç¼“å­˜åœ¨å†…å­˜ä¸­ã€‚åŒºåˆ«çš„æ˜¯ redis ä¼šå‘¨æœŸæ€§çš„æŠŠæ›´æ–°éžæ•°æ®å†™å…¥ç£ç›˜æˆ–è€…æŠŠä¿®æ”¹æ“ä½œå†™å…¥åˆ°è¿½åŠ çš„è®°å½•æ–‡ä»¶ï¼Œå¹¶ä¸”åœ¨æ­¤åŸºç¡€ä¸Šå®žçŽ°äº† master-slaveï¼ˆä¸»ä»Žï¼‰åŒæ­¥ã€‚ 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768697071727374757677787980818283848586878889909192939495969798991001011021031041051061071081091101111121131141151161171181191201211221231241251261271281291301311321331341351361371381391401411. ä½¿ç”¨Redisæœ‰å“ªäº›å¥½å¤„ï¼Ÿ(1) é€Ÿåº¦å¿«ï¼Œå› ä¸ºæ•°æ®å­˜åœ¨å†…å­˜ä¸­ï¼Œç±»ä¼¼äºŽHashMapï¼ŒHashMapçš„ä¼˜åŠ¿å°±æ˜¯æŸ¥æ‰¾å’Œæ“ä½œçš„æ—¶é—´å¤æ‚åº¦éƒ½æ˜¯O(1)(2) æ”¯æŒä¸°å¯Œæ•°æ®ç±»åž‹ï¼Œæ”¯æŒstringï¼Œlistï¼Œsetï¼Œsorted setï¼Œhash(3) æ”¯æŒäº‹åŠ¡ï¼Œæ“ä½œéƒ½æ˜¯åŽŸå­æ€§ï¼Œæ‰€è°“çš„åŽŸå­æ€§å°±æ˜¯å¯¹æ•°æ®çš„æ›´æ”¹è¦ä¹ˆå…¨éƒ¨æ‰§è¡Œï¼Œè¦ä¹ˆå…¨éƒ¨ä¸æ‰§è¡Œ(4) ä¸°å¯Œçš„ç‰¹æ€§ï¼šå¯ç”¨äºŽç¼“å­˜ï¼Œæ¶ˆæ¯ï¼ŒæŒ‰keyè®¾ç½®è¿‡æœŸæ—¶é—´ï¼Œè¿‡æœŸåŽå°†ä¼šè‡ªåŠ¨åˆ é™¤2. redisç›¸æ¯”memcachedæœ‰å“ªäº›ä¼˜åŠ¿ï¼Ÿ(1) memcachedæ‰€æœ‰çš„å€¼å‡æ˜¯ç®€å•çš„å­—ç¬¦ä¸²ï¼Œredisä½œä¸ºå…¶æ›¿ä»£è€…ï¼Œæ”¯æŒæ›´ä¸ºä¸°å¯Œçš„æ•°æ®ç±»åž‹(2) redisçš„é€Ÿåº¦æ¯”memcachedå¿«å¾ˆå¤š(3) rediså¯ä»¥æŒä¹…åŒ–å…¶æ•°æ®3. rediså¸¸è§æ€§èƒ½é—®é¢˜å’Œè§£å†³æ–¹æ¡ˆï¼š(1) Masteræœ€å¥½ä¸è¦åšä»»ä½•æŒä¹…åŒ–å·¥ä½œï¼Œå¦‚RDBå†…å­˜å¿«ç…§å’ŒAOFæ—¥å¿—æ–‡ä»¶(2) å¦‚æžœæ•°æ®æ¯”è¾ƒé‡è¦ï¼ŒæŸä¸ªSlaveå¼€å¯AOFå¤‡ä»½æ•°æ®ï¼Œç­–ç•¥è®¾ç½®ä¸ºæ¯ç§’åŒæ­¥ä¸€æ¬¡(3) ä¸ºäº†ä¸»ä»Žå¤åˆ¶çš„é€Ÿåº¦å’Œè¿žæŽ¥çš„ç¨³å®šæ€§ï¼ŒMasterå’ŒSlaveæœ€å¥½åœ¨åŒä¸€ä¸ªå±€åŸŸç½‘å†…(4) å°½é‡é¿å…åœ¨åŽ‹åŠ›å¾ˆå¤§çš„ä¸»åº“ä¸Šå¢žåŠ ä»Žåº“(5) ä¸»ä»Žå¤åˆ¶ä¸è¦ç”¨å›¾çŠ¶ç»“æž„ï¼Œç”¨å•å‘é“¾è¡¨ç»“æž„æ›´ä¸ºç¨³å®šï¼Œå³ï¼šMaster &lt;- Slave1 &lt;- Slave2 &lt;- Slave3...è¿™æ ·çš„ç»“æž„æ–¹ä¾¿è§£å†³å•ç‚¹æ•…éšœé—®é¢˜ï¼Œå®žçŽ°Slaveå¯¹Masterçš„æ›¿æ¢ã€‚å¦‚æžœMasteræŒ‚äº†ï¼Œå¯ä»¥ç«‹åˆ»å¯ç”¨Slave1åšMasterï¼Œå…¶ä»–ä¸å˜ã€‚ 4. MySQLé‡Œæœ‰2000wæ•°æ®ï¼Œredisä¸­åªå­˜20wçš„æ•°æ®ï¼Œå¦‚ä½•ä¿è¯redisä¸­çš„æ•°æ®éƒ½æ˜¯çƒ­ç‚¹æ•°æ® ç›¸å…³çŸ¥è¯†ï¼šredis å†…å­˜æ•°æ®é›†å¤§å°ä¸Šå‡åˆ°ä¸€å®šå¤§å°çš„æ—¶å€™ï¼Œå°±ä¼šæ–½è¡Œæ•°æ®æ·˜æ±°ç­–ç•¥ã€‚redis æä¾› 6ç§æ•°æ®æ·˜æ±°ç­–ç•¥ï¼švoltile-lruï¼šä»Žå·²è®¾ç½®è¿‡æœŸæ—¶é—´çš„æ•°æ®é›†ï¼ˆserver.db[i].expiresï¼‰ä¸­æŒ‘é€‰æœ€è¿‘æœ€å°‘ä½¿ç”¨çš„æ•°æ®æ·˜æ±°volatile-ttlï¼šä»Žå·²è®¾ç½®è¿‡æœŸæ—¶é—´çš„æ•°æ®é›†ï¼ˆserver.db[i].expiresï¼‰ä¸­æŒ‘é€‰å°†è¦è¿‡æœŸçš„æ•°æ®æ·˜æ±°volatile-randomï¼šä»Žå·²è®¾ç½®è¿‡æœŸæ—¶é—´çš„æ•°æ®é›†ï¼ˆserver.db[i].expiresï¼‰ä¸­ä»»æ„é€‰æ‹©æ•°æ®æ·˜æ±°allkeys-lruï¼šä»Žæ•°æ®é›†ï¼ˆserver.db[i].dictï¼‰ä¸­æŒ‘é€‰æœ€è¿‘æœ€å°‘ä½¿ç”¨çš„æ•°æ®æ·˜æ±°allkeys-randomï¼šä»Žæ•°æ®é›†ï¼ˆserver.db[i].dictï¼‰ä¸­ä»»æ„é€‰æ‹©æ•°æ®æ·˜æ±°no-envictionï¼ˆé©±é€ï¼‰ï¼šç¦æ­¢é©±é€æ•°æ® 5. Memcacheä¸ŽRedisçš„åŒºåˆ«éƒ½æœ‰å“ªäº›ï¼Ÿ1)ã€å­˜å‚¨æ–¹å¼MemecacheæŠŠæ•°æ®å…¨éƒ¨å­˜åœ¨å†…å­˜ä¹‹ä¸­ï¼Œæ–­ç”µåŽä¼šæŒ‚æŽ‰ï¼Œæ•°æ®ä¸èƒ½è¶…è¿‡å†…å­˜å¤§å°ã€‚Redisæœ‰éƒ¨ä»½å­˜åœ¨ç¡¬ç›˜ä¸Šï¼Œè¿™æ ·èƒ½ä¿è¯æ•°æ®çš„æŒä¹…æ€§ã€‚2)ã€æ•°æ®æ”¯æŒç±»åž‹Memcacheå¯¹æ•°æ®ç±»åž‹æ”¯æŒç›¸å¯¹ç®€å•ã€‚Redisæœ‰å¤æ‚çš„æ•°æ®ç±»åž‹ã€‚3ï¼‰ï¼Œvalueå¤§å°redisæœ€å¤§å¯ä»¥è¾¾åˆ°1GBï¼Œè€Œmemcacheåªæœ‰1MB6. Redis å¸¸è§çš„æ€§èƒ½é—®é¢˜éƒ½æœ‰å“ªäº›ï¼Ÿå¦‚ä½•è§£å†³ï¼Ÿ 1).Masterå†™å†…å­˜å¿«ç…§ï¼Œsaveå‘½ä»¤è°ƒåº¦rdbSaveå‡½æ•°ï¼Œä¼šé˜»å¡žä¸»çº¿ç¨‹çš„å·¥ä½œï¼Œå½“å¿«ç…§æ¯”è¾ƒå¤§æ—¶å¯¹æ€§èƒ½å½±å“æ˜¯éžå¸¸å¤§çš„ï¼Œä¼šé—´æ–­æ€§æš‚åœæœåŠ¡ï¼Œæ‰€ä»¥Masteræœ€å¥½ä¸è¦å†™å†…å­˜å¿«ç…§ã€‚2).Master AOFæŒä¹…åŒ–ï¼Œå¦‚æžœä¸é‡å†™AOFæ–‡ä»¶ï¼Œè¿™ä¸ªæŒä¹…åŒ–æ–¹å¼å¯¹æ€§èƒ½çš„å½±å“æ˜¯æœ€å°çš„ï¼Œä½†æ˜¯AOFæ–‡ä»¶ä¼šä¸æ–­å¢žå¤§ï¼ŒAOFæ–‡ä»¶è¿‡å¤§ä¼šå½±å“Masteré‡å¯çš„æ¢å¤é€Ÿåº¦ã€‚Masteræœ€å¥½ä¸è¦åšä»»ä½•æŒä¹…åŒ–å·¥ä½œï¼ŒåŒ…æ‹¬å†…å­˜å¿«ç…§å’ŒAOFæ—¥å¿—æ–‡ä»¶ï¼Œç‰¹åˆ«æ˜¯ä¸è¦å¯ç”¨å†…å­˜å¿«ç…§åšæŒä¹…åŒ–,å¦‚æžœæ•°æ®æ¯”è¾ƒå…³é”®ï¼ŒæŸä¸ªSlaveå¼€å¯AOFå¤‡ä»½æ•°æ®ï¼Œç­–ç•¥ä¸ºæ¯ç§’åŒæ­¥ä¸€æ¬¡ã€‚ 3).Masterè°ƒç”¨BGREWRITEAOFé‡å†™AOFæ–‡ä»¶ï¼ŒAOFåœ¨é‡å†™çš„æ—¶å€™ä¼šå å¤§é‡çš„CPUå’Œå†…å­˜èµ„æºï¼Œå¯¼è‡´æœåŠ¡loadè¿‡é«˜ï¼Œå‡ºçŽ°çŸ­æš‚æœåŠ¡æš‚åœçŽ°è±¡ã€‚4). Redisä¸»ä»Žå¤åˆ¶çš„æ€§èƒ½é—®é¢˜ï¼Œä¸ºäº†ä¸»ä»Žå¤åˆ¶çš„é€Ÿåº¦å’Œè¿žæŽ¥çš„ç¨³å®šæ€§ï¼ŒSlaveå’ŒMasteræœ€å¥½åœ¨åŒä¸€ä¸ªå±€åŸŸç½‘å†…7, redis æœ€é€‚åˆçš„åœºæ™¯Redisæœ€é€‚åˆæ‰€æœ‰æ•°æ®in-momoryçš„åœºæ™¯ï¼Œè™½ç„¶Redisä¹Ÿæä¾›æŒä¹…åŒ–åŠŸèƒ½ï¼Œä½†å®žé™…æ›´å¤šçš„æ˜¯ä¸€ä¸ªdisk-backedçš„åŠŸèƒ½ï¼Œè·Ÿä¼ ç»Ÿæ„ä¹‰ä¸Šçš„æŒä¹…åŒ–æœ‰æ¯”è¾ƒå¤§çš„å·®åˆ«ï¼Œé‚£ä¹ˆå¯èƒ½å¤§å®¶å°±ä¼šæœ‰ç–‘é—®ï¼Œä¼¼ä¹ŽRedisæ›´åƒä¸€ä¸ªåŠ å¼ºç‰ˆçš„Memcachedï¼Œé‚£ä¹ˆä½•æ—¶ä½¿ç”¨Memcached,ä½•æ—¶ä½¿ç”¨Rediså‘¢? å¦‚æžœç®€å•åœ°æ¯”è¾ƒRedisä¸ŽMemcachedçš„åŒºåˆ«ï¼Œå¤§å¤šæ•°éƒ½ä¼šå¾—åˆ°ä»¥ä¸‹è§‚ç‚¹ï¼šã€Redisä¸ä»…ä»…æ”¯æŒç®€å•çš„k/vç±»åž‹çš„æ•°æ®ï¼ŒåŒæ—¶è¿˜æä¾›listï¼Œsetï¼Œzsetï¼Œhashç­‰æ•°æ®ç»“æž„çš„å­˜å‚¨ã€‚ã€Redisæ”¯æŒæ•°æ®çš„å¤‡ä»½ï¼Œå³master-slaveæ¨¡å¼çš„æ•°æ®å¤‡ä»½ã€‚ã€Redisæ”¯æŒæ•°æ®çš„æŒä¹…åŒ–ï¼Œå¯ä»¥å°†å†…å­˜ä¸­çš„æ•°æ®ä¿æŒåœ¨ç£ç›˜ä¸­ï¼Œé‡å¯çš„æ—¶å€™å¯ä»¥å†æ¬¡åŠ è½½è¿›è¡Œä½¿ç”¨ã€‚ï¼ˆ1ï¼‰ã€ä¼šè¯ç¼“å­˜ï¼ˆSession Cacheï¼‰æœ€å¸¸ç”¨çš„ä¸€ç§ä½¿ç”¨Redisçš„æƒ…æ™¯æ˜¯ä¼šè¯ç¼“å­˜ï¼ˆsession cacheï¼‰ã€‚ç”¨Redisç¼“å­˜ä¼šè¯æ¯”å…¶ä»–å­˜å‚¨ï¼ˆå¦‚Memcachedï¼‰çš„ä¼˜åŠ¿åœ¨äºŽï¼šRedisæä¾›æŒä¹…åŒ–ã€‚å½“ç»´æŠ¤ä¸€ä¸ªä¸æ˜¯ä¸¥æ ¼è¦æ±‚ä¸€è‡´æ€§çš„ç¼“å­˜æ—¶ï¼Œå¦‚æžœç”¨æˆ·çš„è´­ç‰©è½¦ä¿¡æ¯å…¨éƒ¨ä¸¢å¤±ï¼Œå¤§éƒ¨åˆ†äººéƒ½ä¼šä¸é«˜å…´çš„ï¼ŒçŽ°åœ¨ï¼Œä»–ä»¬è¿˜ä¼šè¿™æ ·å—ï¼Ÿå¹¸è¿çš„æ˜¯ï¼Œéšç€ Redis è¿™äº›å¹´çš„æ”¹è¿›ï¼Œå¾ˆå®¹æ˜“æ‰¾åˆ°æ€Žä¹ˆæ°å½“çš„ä½¿ç”¨Redisæ¥ç¼“å­˜ä¼šè¯çš„æ–‡æ¡£ã€‚ç”šè‡³å¹¿ä¸ºäººçŸ¥çš„å•†ä¸šå¹³å°Magentoä¹Ÿæä¾›Redisçš„æ’ä»¶ã€‚ï¼ˆ2ï¼‰ã€å…¨é¡µç¼“å­˜ï¼ˆFPCï¼‰é™¤åŸºæœ¬çš„ä¼šè¯tokenä¹‹å¤–ï¼ŒRedisè¿˜æä¾›å¾ˆç®€ä¾¿çš„FPCå¹³å°ã€‚å›žåˆ°ä¸€è‡´æ€§é—®é¢˜ï¼Œå³ä½¿é‡å¯äº†Rediså®žä¾‹ï¼Œå› ä¸ºæœ‰ç£ç›˜çš„æŒä¹…åŒ–ï¼Œç”¨æˆ·ä¹Ÿä¸ä¼šçœ‹åˆ°é¡µé¢åŠ è½½é€Ÿåº¦çš„ä¸‹é™ï¼Œè¿™æ˜¯ä¸€ä¸ªæžå¤§æ”¹è¿›ï¼Œç±»ä¼¼PHPæœ¬åœ°FPCã€‚å†æ¬¡ä»¥Magentoä¸ºä¾‹ï¼ŒMagentoæä¾›ä¸€ä¸ªæ’ä»¶æ¥ä½¿ç”¨Redisä½œä¸ºå…¨é¡µç¼“å­˜åŽç«¯ã€‚æ­¤å¤–ï¼Œå¯¹WordPressçš„ç”¨æˆ·æ¥è¯´ï¼ŒPantheonæœ‰ä¸€ä¸ªéžå¸¸å¥½çš„æ’ä»¶ wp-redisï¼Œè¿™ä¸ªæ’ä»¶èƒ½å¸®åŠ©ä½ ä»¥æœ€å¿«é€Ÿåº¦åŠ è½½ä½ æ›¾æµè§ˆè¿‡çš„é¡µé¢ã€‚ï¼ˆ3ï¼‰ã€é˜Ÿåˆ—Reidsåœ¨å†…å­˜å­˜å‚¨å¼•æ“Žé¢†åŸŸçš„ä¸€å¤§ä¼˜ç‚¹æ˜¯æä¾› list å’Œ set æ“ä½œï¼Œè¿™ä½¿å¾—Redisèƒ½ä½œä¸ºä¸€ä¸ªå¾ˆå¥½çš„æ¶ˆæ¯é˜Ÿåˆ—å¹³å°æ¥ä½¿ç”¨ã€‚Redisä½œä¸ºé˜Ÿåˆ—ä½¿ç”¨çš„æ“ä½œï¼Œå°±ç±»ä¼¼äºŽæœ¬åœ°ç¨‹åºè¯­è¨€ï¼ˆå¦‚Pythonï¼‰å¯¹ list çš„ push/pop æ“ä½œã€‚å¦‚æžœä½ å¿«é€Ÿçš„åœ¨Googleä¸­æœç´¢â€œRedis queuesâ€ï¼Œä½ é©¬ä¸Šå°±èƒ½æ‰¾åˆ°å¤§é‡çš„å¼€æºé¡¹ç›®ï¼Œè¿™äº›é¡¹ç›®çš„ç›®çš„å°±æ˜¯åˆ©ç”¨Redisåˆ›å»ºéžå¸¸å¥½çš„åŽç«¯å·¥å…·ï¼Œä»¥æ»¡è¶³å„ç§é˜Ÿåˆ—éœ€æ±‚ã€‚ä¾‹å¦‚ï¼ŒCeleryæœ‰ä¸€ä¸ªåŽå°å°±æ˜¯ä½¿ç”¨Redisä½œä¸ºbrokerï¼Œä½ å¯ä»¥ä»Žè¿™é‡ŒåŽ»æŸ¥çœ‹ã€‚ï¼ˆ4ï¼‰ï¼ŒæŽ’è¡Œæ¦œ/è®¡æ•°å™¨Redisåœ¨å†…å­˜ä¸­å¯¹æ•°å­—è¿›è¡Œé€’å¢žæˆ–é€’å‡çš„æ“ä½œå®žçŽ°çš„éžå¸¸å¥½ã€‚é›†åˆï¼ˆSetï¼‰å’Œæœ‰åºé›†åˆï¼ˆSorted Setï¼‰ä¹Ÿä½¿å¾—æˆ‘ä»¬åœ¨æ‰§è¡Œè¿™äº›æ“ä½œçš„æ—¶å€™å˜çš„éžå¸¸ç®€å•ï¼ŒRedisåªæ˜¯æ­£å¥½æä¾›äº†è¿™ä¸¤ç§æ•°æ®ç»“æž„ã€‚æ‰€ä»¥ï¼Œæˆ‘ä»¬è¦ä»ŽæŽ’åºé›†åˆä¸­èŽ·å–åˆ°æŽ’åæœ€é å‰çš„10ä¸ªç”¨æˆ·â€“æˆ‘ä»¬ç§°ä¹‹ä¸ºâ€œuser_scoresâ€ï¼Œæˆ‘ä»¬åªéœ€è¦åƒä¸‹é¢ä¸€æ ·æ‰§è¡Œå³å¯ï¼šå½“ç„¶ï¼Œè¿™æ˜¯å‡å®šä½ æ˜¯æ ¹æ®ä½ ç”¨æˆ·çš„åˆ†æ•°åšé€’å¢žçš„æŽ’åºã€‚å¦‚æžœä½ æƒ³è¿”å›žç”¨æˆ·åŠç”¨æˆ·çš„åˆ†æ•°ï¼Œä½ éœ€è¦è¿™æ ·æ‰§è¡Œï¼šZRANGE user_scores 0 10 WITHSCORESAgora Gameså°±æ˜¯ä¸€ä¸ªå¾ˆå¥½çš„ä¾‹å­ï¼Œç”¨Rubyå®žçŽ°çš„ï¼Œå®ƒçš„æŽ’è¡Œæ¦œå°±æ˜¯ä½¿ç”¨Redisæ¥å­˜å‚¨æ•°æ®çš„ï¼Œä½ å¯ä»¥åœ¨è¿™é‡Œçœ‹åˆ°ã€‚ï¼ˆ5ï¼‰ã€å‘å¸ƒ/è®¢é˜…æœ€åŽï¼ˆä½†è‚¯å®šä¸æ˜¯æœ€ä¸é‡è¦çš„ï¼‰æ˜¯Redisçš„å‘å¸ƒ/è®¢é˜…åŠŸèƒ½ã€‚å‘å¸ƒ/è®¢é˜…çš„ä½¿ç”¨åœºæ™¯ç¡®å®žéžå¸¸å¤šã€‚æˆ‘å·²çœ‹è§äººä»¬åœ¨ç¤¾äº¤ç½‘ç»œè¿žæŽ¥ä¸­ä½¿ç”¨ï¼Œè¿˜å¯ä½œä¸ºåŸºäºŽå‘å¸ƒ/è®¢é˜…çš„è„šæœ¬è§¦å‘å™¨ï¼Œç”šè‡³ç”¨Redisçš„å‘å¸ƒ/è®¢é˜…åŠŸèƒ½æ¥å»ºç«‹èŠå¤©ç³»ç»Ÿï¼ï¼ˆä¸ï¼Œè¿™æ˜¯çœŸçš„ï¼Œä½ å¯ä»¥åŽ»æ ¸å®žï¼‰ã€‚Redisæä¾›çš„æ‰€æœ‰ç‰¹æ€§ä¸­ï¼Œæˆ‘æ„Ÿè§‰è¿™ä¸ªæ˜¯å–œæ¬¢çš„äººæœ€å°‘çš„ä¸€ä¸ªï¼Œè™½ç„¶å®ƒä¸ºç”¨æˆ·æä¾›å¦‚æžœæ­¤å¤šåŠŸèƒ½ã€‚ä¼˜ç‚¹ï¼šå¯ä»¥æŒä¹…åŒ–ï¼Œå•çº¿ç¨‹ã€å•è¿›ç¨‹å¯¹èµ„æºæ¶ˆè€—å°ã€‚ äºŒ redis çš„å®‰è£…å’Œä½¿ç”¨ä¸€ linux ä¸‹å®‰è£…1234wget http://download.redis.io/releases/redis-3.0.6.tar.gztar xzf redis-3.0.6.tar.gzcd redis-3.0.6make äºŒ mac ä¸‹å®‰è£…1brew install redis ä¸‰ windows ä¸‹å®‰è£…å®˜ç½‘ä¸‹è½½å®‰è£…åŒ…ï¼Œè¦åŠ åˆ°çŽ¯å¢ƒå˜é‡ å›› å„æ“ä½œç³»ç»Ÿå¯åŠ¨redis mac 1234567# æœåŠ¡ç«¯å¯åŠ¨redis-serve# å®¢æˆ·ç«¯å¯åŠ¨redis-cli# æ³¨æ„ï¼Œè¦ç”¨ä¸¤ä¸ªç»ˆç«¯ windows 12345# æœåŠ¡ç«¯å¯åŠ¨redis-serve.exe# å®¢æˆ·ç«¯å¯åŠ¨redis-cli.exe linux 12345# æœåŠ¡ç«¯å¯åŠ¨src/redis-server# å®¢æˆ·ç«¯å¯åŠ¨src/redis-cli ä¸‰ python æ“ä½œ redisä¸€ æ™®é€šè¿žæŽ¥redis-py æä¾›ä¸¤ä¸ªç±» Redis å’Œ StrictRedis ç”¨äºŽå®žçŽ° Redis çš„å‘½ä»¤ï¼ŒStrictRedis ç”¨äºŽå®žçŽ°å¤§éƒ¨åˆ†å®˜æ–¹çš„å‘½ä»¤ï¼Œå¹¶ä½¿ç”¨å®˜æ–¹çš„è¯­æ³•å’Œå‘½ä»¤ 12345import redisr = redis.Redis(host='127.0.0.1', port=6379)r.set('foo', 'Bar')print(r.get('foo')) äºŒ è¿žæŽ¥æ± redis-pyä½¿ç”¨connection poolæ¥ç®¡ç†å¯¹ä¸€ä¸ªredis serverçš„æ‰€æœ‰è¿žæŽ¥ï¼Œé¿å…æ¯æ¬¡å»ºç«‹ã€é‡Šæ”¾è¿žæŽ¥çš„å¼€é”€ã€‚é»˜è®¤ï¼Œæ¯ä¸ªRediså®žä¾‹éƒ½ä¼šç»´æŠ¤ä¸€ä¸ªè‡ªå·±çš„è¿žæŽ¥æ± ã€‚å¯ä»¥ç›´æŽ¥å»ºç«‹ä¸€ä¸ªè¿žæŽ¥æ± ï¼Œç„¶åŽä½œä¸ºå‚æ•°Redisï¼Œè¿™æ ·å°±å¯ä»¥å®žçŽ°å¤šä¸ªRediså®žä¾‹å…±äº«ä¸€ä¸ªè¿žæŽ¥æ±  123456import redispool = redis.ConnectionPool(host='127.0.0.1', port=6379)r = redis.Redis(connection_pool=pool)r.set('foo', 'Bar')print(r.get('foo')) å›› redis ä¹‹ String æ“ä½œredis ä¸­çš„ String åœ¨å†…å­˜ä¸­æŒ‰ç…§ä¸€ä¸ªé‚£ä¹ˆä¸Žä¹‹å¯¹åº”çš„ value æ¥å­˜å‚¨ã€‚ 1set(name, value, ex=None, px=None, nx=False, xx=False) 123456åœ¨Redisä¸­è®¾ç½®å€¼ï¼Œé»˜è®¤ï¼Œä¸å­˜åœ¨åˆ™åˆ›å»ºï¼Œå­˜åœ¨åˆ™ä¿®æ”¹å‚æ•°ï¼š exï¼Œè¿‡æœŸæ—¶é—´ï¼ˆç§’ï¼‰ pxï¼Œè¿‡æœŸæ—¶é—´ï¼ˆæ¯«ç§’ï¼‰ nxï¼Œå¦‚æžœè®¾ç½®ä¸ºTrueï¼Œåˆ™åªæœ‰nameä¸å­˜åœ¨æ—¶ï¼Œå½“å‰setæ“ä½œæ‰æ‰§è¡Œ,å€¼å­˜åœ¨ï¼Œå°±ä¿®æ”¹ä¸äº†ï¼Œæ‰§è¡Œæ²¡æ•ˆæžœ xxï¼Œå¦‚æžœè®¾ç½®ä¸ºTrueï¼Œåˆ™åªæœ‰nameå­˜åœ¨æ—¶ï¼Œå½“å‰setæ“ä½œæ‰æ‰§è¡Œï¼Œå€¼å­˜åœ¨æ‰èƒ½ä¿®æ”¹ï¼Œå€¼ä¸å­˜åœ¨ï¼Œä¸ä¼šè®¾ç½®æ–°å€¼ setnx(name, value) 1è®¾ç½®å€¼ï¼Œåªæœ‰nameä¸å­˜åœ¨æ—¶ï¼Œæ‰§è¡Œè®¾ç½®æ“ä½œï¼ˆæ·»åŠ ï¼‰,å¦‚æžœå­˜åœ¨ï¼Œä¸ä¼šä¿®æ”¹ setex(name, time, value) 123# è®¾ç½®å€¼# å‚æ•°ï¼š # timeï¼Œè¿‡æœŸæ—¶é—´ï¼ˆæ•°å­—ç§’ æˆ– timedeltaå¯¹è±¡ï¼‰ psetex(name, time_ms, value) 123# è®¾ç½®å€¼# å‚æ•°ï¼š # time_msï¼Œè¿‡æœŸæ—¶é—´ï¼ˆæ•°å­—æ¯«ç§’ æˆ– timedeltaå¯¹è±¡ mset(*args, **kwargs) 12345æ‰¹é‡è®¾ç½®å€¼å¦‚ï¼š mset(k1='v1', k2='v2') æˆ– mget(&#123;'k1': 'v1', 'k2': 'v2'&#125;) get(name) 1èŽ·å–å€¼ mget(keys, *args) 12345æ‰¹é‡èŽ·å–å¦‚ï¼š mget('k1', 'k2') æˆ– r.mget(['k3', 'k4']) getset(name, value) 1è®¾ç½®æ–°å€¼å¹¶èŽ·å–åŽŸæ¥çš„å€¼ getrange(key, start, end) 12345# èŽ·å–å­åºåˆ—ï¼ˆæ ¹æ®å­—èŠ‚èŽ·å–ï¼Œéžå­—ç¬¦ï¼‰# å‚æ•°ï¼š # nameï¼ŒRedis çš„ name # startï¼Œèµ·å§‹ä½ç½®ï¼ˆå­—èŠ‚ï¼‰ # endï¼Œç»“æŸä½ç½®ï¼ˆå­—èŠ‚ï¼‰ setrange(name, offset, value) 1234# ä¿®æ”¹å­—ç¬¦ä¸²å†…å®¹ï¼Œä»ŽæŒ‡å®šå­—ç¬¦ä¸²ç´¢å¼•å¼€å§‹å‘åŽæ›¿æ¢ï¼ˆæ–°å€¼å¤ªé•¿æ—¶ï¼Œåˆ™å‘åŽæ·»åŠ ï¼‰# å‚æ•°ï¼š # offsetï¼Œå­—ç¬¦ä¸²çš„ç´¢å¼•ï¼Œå­—èŠ‚ï¼ˆä¸€ä¸ªæ±‰å­—ä¸‰ä¸ªå­—èŠ‚ï¼‰ # valueï¼Œè¦è®¾ç½®çš„å€¼ setbit(name, offset, value) 1234567891011# å¯¹nameå¯¹åº”å€¼çš„äºŒè¿›åˆ¶è¡¨ç¤ºçš„ä½è¿›è¡Œæ“ä½œ # å‚æ•°ï¼š # nameï¼Œredisçš„name # offsetï¼Œä½çš„ç´¢å¼•ï¼ˆå°†å€¼å˜æ¢æˆäºŒè¿›åˆ¶åŽå†è¿›è¡Œç´¢å¼•ï¼‰ # valueï¼Œå€¼åªèƒ½æ˜¯ 1 æˆ– 0 # æ³¨ï¼šå¦‚æžœåœ¨Redisä¸­æœ‰ä¸€ä¸ªå¯¹åº”ï¼š n1 = "foo"ï¼Œ é‚£ä¹ˆå­—ç¬¦ä¸²fooçš„äºŒè¿›åˆ¶è¡¨ç¤ºä¸ºï¼š01100110 01101111 01101111 æ‰€ä»¥ï¼Œå¦‚æžœæ‰§è¡Œ setbit('n1', 7, 1)ï¼Œåˆ™å°±ä¼šå°†ç¬¬7ä½è®¾ç½®ä¸º1ï¼Œ é‚£ä¹ˆæœ€ç»ˆäºŒè¿›åˆ¶åˆ™å˜æˆ 01100111 01101111 01101111ï¼Œå³ï¼š"goo" getbit(name, offset) 1èŽ·å– name å¯¹åº”çš„å€¼å¾—äºŒè¿›åˆ¶è¡¨ç¤ºä¸­çš„æŸä½çš„å€¼(0æˆ–1) bitcount(key, start=None, end=None) 12345# èŽ·å–nameå¯¹åº”çš„å€¼çš„äºŒè¿›åˆ¶è¡¨ç¤ºä¸­ 1 çš„ä¸ªæ•°# å‚æ•°ï¼š # keyï¼ŒRedisçš„name # startï¼Œä½èµ·å§‹ä½ç½® # endï¼Œä½ç»“æŸä½ç½® bittop(operation, dest, *args) 12345678910# èŽ·å–å¤šä¸ªå€¼ï¼Œå¹¶å°†å€¼åšä½è¿ç®—ï¼Œå°†æœ€åŽçš„ç»“æžœä¿å­˜è‡³æ–°çš„nameå¯¹åº”çš„å€¼ # å‚æ•°ï¼š # operation,ANDï¼ˆå¹¶ï¼‰ ã€ ORï¼ˆæˆ–ï¼‰ ã€ NOTï¼ˆéžï¼‰ ã€ XORï¼ˆå¼‚æˆ–ï¼‰ # dest, æ–°çš„Redisçš„name # *keys,è¦æŸ¥æ‰¾çš„Redisçš„name # å¦‚ï¼š bitop("AND", 'new_name', 'n1', 'n2', 'n3') # èŽ·å–Redisä¸­n1,n2,n3å¯¹åº”çš„å€¼ï¼Œç„¶åŽè®²æ‰€æœ‰çš„å€¼åšä½è¿ç®—ï¼ˆæ±‚å¹¶é›†ï¼‰ï¼Œç„¶åŽå°†ç»“æžœä¿å­˜ new_name å¯¹åº”çš„å€¼ä¸­ strlen(name) 1è¿”å›ž name å¯¹åº”å€¼å¾—å­—èŠ‚é•¿åº¦ incr(self, name, amount=1) 1234567# è‡ªå¢ž nameå¯¹åº”çš„å€¼ï¼Œå½“nameä¸å­˜åœ¨æ—¶ï¼Œåˆ™åˆ›å»ºnameï¼amountï¼Œå¦åˆ™ï¼Œåˆ™è‡ªå¢žã€‚ # å‚æ•°ï¼š # name,Redisçš„name # amount,è‡ªå¢žæ•°ï¼ˆå¿…é¡»æ˜¯æ•´æ•°ï¼‰ # æ³¨ï¼šåŒincrby incrbyfloat(self, name, amount=1.0) 12345# è‡ªå¢ž nameå¯¹åº”çš„å€¼ï¼Œå½“nameä¸å­˜åœ¨æ—¶ï¼Œåˆ™åˆ›å»ºnameï¼amountï¼Œå¦åˆ™ï¼Œåˆ™è‡ªå¢žã€‚ # å‚æ•°ï¼š # name,Redisçš„name # amount,è‡ªå¢žæ•°ï¼ˆæµ®ç‚¹åž‹ï¼‰ decr(self, name, amount=1) 12345# è‡ªå‡ nameå¯¹åº”çš„å€¼ï¼Œå½“nameä¸å­˜åœ¨æ—¶ï¼Œåˆ™åˆ›å»ºnameï¼amountï¼Œå¦åˆ™ï¼Œåˆ™è‡ªå‡ã€‚ # å‚æ•°ï¼š # name,Redisçš„name # amount,è‡ªå‡æ•°ï¼ˆæ•´æ•°ï¼‰ append(key, value) 12345# åœ¨redis nameå¯¹åº”çš„å€¼åŽé¢è¿½åŠ å†…å®¹ # å‚æ•°ï¼š key, redisçš„name value, è¦è¿½åŠ çš„å­—ç¬¦ä¸² äº” redis ä¹‹ Hash æ“ä½œHash æ“ä½œï¼Œredis ä¸­ hash åœ¨å†…å­˜ä¸­çš„å­˜å‚¨æ ¼å¼å¦‚ä¸‹å›¾ï¼š hset(name, key, value) 123456789 nameå¯¹åº”çš„hashä¸­è®¾ç½®ä¸€ä¸ªé”®å€¼å¯¹ï¼ˆä¸å­˜åœ¨ï¼Œåˆ™åˆ›å»ºï¼›å¦åˆ™ï¼Œä¿®æ”¹ï¼‰ # å‚æ•°ï¼š # nameï¼Œredisçš„name # keyï¼Œnameå¯¹åº”çš„hashä¸­çš„key # valueï¼Œnameå¯¹åº”çš„hashä¸­çš„value # æ³¨ï¼š # hsetnx(name, key, value),å½“nameå¯¹åº”çš„hashä¸­ä¸å­˜åœ¨å½“å‰keyæ—¶åˆ™åˆ›å»ºï¼ˆç›¸å½“äºŽæ·»åŠ ï¼‰ hmset(name, mapping) 12345678# åœ¨nameå¯¹åº”çš„hashä¸­æ‰¹é‡è®¾ç½®é”®å€¼å¯¹ # å‚æ•°ï¼š # nameï¼Œredisçš„name # mappingï¼Œå­—å…¸ï¼Œå¦‚ï¼š&#123;'k1':'v1', 'k2': 'v2'&#125; # å¦‚ï¼š # r.hmset('xx', &#123;'k1':'v1', 'k2': 'v2'&#125;) hget(name, key) 1åœ¨ name å¯¹åº”çš„ hash ä¸­æ ¹æ® key èŽ·å– value hmget(name, keys, *args) 1234567891011# åœ¨nameå¯¹åº”çš„hashä¸­èŽ·å–å¤šä¸ªkeyçš„å€¼ # å‚æ•°ï¼š # nameï¼Œreidså¯¹åº”çš„name # keysï¼Œè¦èŽ·å–keyé›†åˆï¼Œå¦‚ï¼š['k1', 'k2', 'k3'] # *argsï¼Œè¦èŽ·å–çš„keyï¼Œå¦‚ï¼šk1,k2,k3 # å¦‚ï¼š # r.mget('xx', ['k1', 'k2']) # æˆ– # print r.hmget('xx', 'k1', 'k2') hgetall(name) 1èŽ·å– name å¯¹åº”çš„ hash çš„æ‰€æœ‰é”®å€¼ï¼Œä¸å»ºè®®ä½¿ç”¨ hlen(name) 1èŽ·å– name å¯¹åº”çš„ hash ä¸­é”®å€¼å¯¹çš„ä¸ªæ•° hkeys(name) 1èŽ·å– name å¯¹åº”çš„ hash ä¸­æ‰€æœ‰çš„ key çš„å€¼ hvals(name) 1èŽ·å– name å¯¹åº”çš„ hash ä¸­æ‰€æœ‰çš„ value çš„å€¼ hexists(name, key) 1æ£€æŸ¥ name å¯¹åº”çš„ hash æ˜¯å¦å­˜åœ¨å½“å‰ä¼ å…¥çš„ key hdel(name, *keys) 12# å°†nameå¯¹åº”çš„hashä¸­æŒ‡å®škeyçš„é”®å€¼å¯¹åˆ é™¤print(re.hdel('xxx','sex','name')) hincrby(name, key, amount=1) 12345# è‡ªå¢žnameå¯¹åº”çš„hashä¸­çš„æŒ‡å®škeyçš„å€¼ï¼Œä¸å­˜åœ¨åˆ™åˆ›å»ºkey=amount# å‚æ•°ï¼š # nameï¼Œredisä¸­çš„name # keyï¼Œ hashå¯¹åº”çš„key # amountï¼Œè‡ªå¢žæ•°ï¼ˆæ•´æ•°ï¼‰ hincrbyfloat(name, key, amount=1.0) 12345678# è‡ªå¢žnameå¯¹åº”çš„hashä¸­çš„æŒ‡å®škeyçš„å€¼ï¼Œä¸å­˜åœ¨åˆ™åˆ›å»ºkey=amount # å‚æ•°ï¼š # nameï¼Œredisä¸­çš„name # keyï¼Œ hashå¯¹åº”çš„key # amountï¼Œè‡ªå¢žæ•°ï¼ˆæµ®ç‚¹æ•°ï¼‰ # è‡ªå¢žnameå¯¹åº”çš„hashä¸­çš„æŒ‡å®škeyçš„å€¼ï¼Œä¸å­˜åœ¨åˆ™åˆ›å»ºkey=amount hscan(name, cursor=0, match=None, count=None) 12345678910111213# å¢žé‡å¼è¿­ä»£èŽ·å–ï¼Œå¯¹äºŽæ•°æ®å¤§çš„æ•°æ®éžå¸¸æœ‰ç”¨ï¼Œhscanå¯ä»¥å®žçŽ°åˆ†ç‰‡çš„èŽ·å–æ•°æ®ï¼Œå¹¶éžä¸€æ¬¡æ€§å°†æ•°æ®å…¨éƒ¨èŽ·å–å®Œï¼Œä»Žè€Œæ”¾ç½®å†…å­˜è¢«æ’‘çˆ† # å‚æ•°ï¼š # nameï¼Œredisçš„name # cursorï¼Œæ¸¸æ ‡ï¼ˆåŸºäºŽæ¸¸æ ‡åˆ†æ‰¹å–èŽ·å–æ•°æ®ï¼‰ # matchï¼ŒåŒ¹é…æŒ‡å®škeyï¼Œé»˜è®¤None è¡¨ç¤ºæ‰€æœ‰çš„key # countï¼Œæ¯æ¬¡åˆ†ç‰‡æœ€å°‘èŽ·å–ä¸ªæ•°ï¼Œé»˜è®¤Noneè¡¨ç¤ºé‡‡ç”¨Redisçš„é»˜è®¤åˆ†ç‰‡ä¸ªæ•° # å¦‚ï¼š # ç¬¬ä¸€æ¬¡ï¼šcursor1, data1 = r.hscan('xx', cursor=0, match=None, count=None) # ç¬¬äºŒæ¬¡ï¼šcursor2, data1 = r.hscan('xx', cursor=cursor1, match=None, count=None) # ... # ç›´åˆ°è¿”å›žå€¼cursorçš„å€¼ä¸º0æ—¶ï¼Œè¡¨ç¤ºæ•°æ®å·²ç»é€šè¿‡åˆ†ç‰‡èŽ·å–å®Œæ¯• hscan_iter(name, match=None, count=None) 123456789# åˆ©ç”¨yieldå°è£…hscanåˆ›å»ºç”Ÿæˆå™¨ï¼Œå®žçŽ°åˆ†æ‰¹åŽ»redisä¸­èŽ·å–æ•°æ® # å‚æ•°ï¼š # matchï¼ŒåŒ¹é…æŒ‡å®škeyï¼Œé»˜è®¤None è¡¨ç¤ºæ‰€æœ‰çš„key # countï¼Œæ¯æ¬¡åˆ†ç‰‡æœ€å°‘èŽ·å–ä¸ªæ•°ï¼Œé»˜è®¤Noneè¡¨ç¤ºé‡‡ç”¨Redisçš„é»˜è®¤åˆ†ç‰‡ä¸ªæ•° # å¦‚ï¼š # for item in r.hscan_iter('xx'): # print item å…­ redis ä¹‹ List æ“ä½œList æ“ä½œï¼Œredis ä¸­çš„ List åœ¨å†…å­˜ä¸­æŒ‰ç…§ä¸€ä¸ª name å¯¹åº”ä¸€ä¸ª List æ¥å­˜å‚¨ï¼Œå¦‚å›¾ï¼š lpush(name, values) 12345678# åœ¨nameå¯¹åº”çš„listä¸­æ·»åŠ å…ƒç´ ï¼Œæ¯ä¸ªæ–°çš„å…ƒç´ éƒ½æ·»åŠ åˆ°åˆ—è¡¨çš„æœ€å·¦è¾¹ # å¦‚ï¼š # r.lpush('oo', 11,22,33) # ä¿å­˜é¡ºåºä¸º: 33,22,11 # æ‰©å±•ï¼š # rpush(name, values) è¡¨ç¤ºä»Žå³å‘å·¦æ“ä½œ lpushx(name, value) 1234# åœ¨nameå¯¹åº”çš„listä¸­æ·»åŠ å…ƒç´ ï¼Œåªæœ‰nameå·²ç»å­˜åœ¨æ—¶ï¼Œå€¼æ·»åŠ åˆ°åˆ—è¡¨çš„æœ€å·¦è¾¹ # æ›´å¤šï¼š # rpushx(name, value) è¡¨ç¤ºä»Žå³å‘å·¦æ“ä½œ llen(name) 1è®¡ç®— name å¯¹åº”çš„ list å…ƒç´ çš„ä¸ªæ•° linsert(name, where, refvalue, value) 1234567# åœ¨nameå¯¹åº”çš„åˆ—è¡¨çš„æŸä¸€ä¸ªå€¼å‰æˆ–åŽæ’å…¥ä¸€ä¸ªæ–°å€¼ # å‚æ•°ï¼š # nameï¼Œredisçš„name # whereï¼ŒBEFOREæˆ–AFTER(å°å†™ä¹Ÿå¯ä»¥) # refvalueï¼Œæ ‡æ†å€¼ï¼Œå³ï¼šåœ¨å®ƒå‰åŽæ’å…¥æ•°æ®ï¼ˆå¦‚æžœå­˜åœ¨å¤šä¸ªæ ‡æ†å€¼ï¼Œä»¥æ‰¾åˆ°çš„ç¬¬ä¸€ä¸ªä¸ºå‡†ï¼‰ # valueï¼Œè¦æ’å…¥çš„æ•°æ® r.lset(name, index, value) 123456# å¯¹nameå¯¹åº”çš„listä¸­çš„æŸä¸€ä¸ªç´¢å¼•ä½ç½®é‡æ–°èµ‹å€¼ # å‚æ•°ï¼š # nameï¼Œredisçš„name # indexï¼Œlistçš„ç´¢å¼•ä½ç½® # valueï¼Œè¦è®¾ç½®çš„å€¼ r.lrem(name, value, num) 12345678# åœ¨nameå¯¹åº”çš„listä¸­åˆ é™¤æŒ‡å®šçš„å€¼ # å‚æ•°ï¼š # nameï¼Œredisçš„name # valueï¼Œè¦åˆ é™¤çš„å€¼ # numï¼Œ num=0ï¼Œåˆ é™¤åˆ—è¡¨ä¸­æ‰€æœ‰çš„æŒ‡å®šå€¼ï¼› # num=2,ä»Žå‰åˆ°åŽï¼Œåˆ é™¤2ä¸ªï¼› # num=-2,ä»ŽåŽå‘å‰ï¼Œåˆ é™¤2ä¸ª lpop(name) 1234# åœ¨nameå¯¹åº”çš„åˆ—è¡¨çš„å·¦ä¾§èŽ·å–ç¬¬ä¸€ä¸ªå…ƒç´ å¹¶åœ¨åˆ—è¡¨ä¸­ç§»é™¤ï¼Œè¿”å›žå€¼åˆ™æ˜¯ç¬¬ä¸€ä¸ªå…ƒç´  # æ›´å¤šï¼š # rpop(name) è¡¨ç¤ºä»Žå³å‘å·¦æ“ä½œ lindex(name, index) 1åœ¨ name å¯¹åº”çš„åˆ—è¡¨ä¸­æ ¹æ®ç´¢å¼•èŽ·å–åˆ—è¡¨å…ƒç´  lrange(name, start, end) 12345# åœ¨nameå¯¹åº”çš„åˆ—è¡¨åˆ†ç‰‡èŽ·å–æ•°æ®# å‚æ•°ï¼š # nameï¼Œredisçš„name # startï¼Œç´¢å¼•çš„èµ·å§‹ä½ç½® # endï¼Œç´¢å¼•ç»“æŸä½ç½® print(re.lrange('aa',0,re.llen('aa'))) ltrim(name, start, end) 12345# åœ¨nameå¯¹åº”çš„åˆ—è¡¨ä¸­ç§»é™¤æ²¡æœ‰åœ¨start-endç´¢å¼•ä¹‹é—´çš„å€¼# å‚æ•°ï¼š # nameï¼Œredisçš„name # startï¼Œç´¢å¼•çš„èµ·å§‹ä½ç½® # endï¼Œç´¢å¼•ç»“æŸä½ç½®ï¼ˆå¤§äºŽåˆ—è¡¨é•¿åº¦ï¼Œåˆ™ä»£è¡¨ä¸ç§»é™¤ä»»ä½•ï¼‰ rpoplpush(src, dst) 1234# ä»Žä¸€ä¸ªåˆ—è¡¨å–å‡ºæœ€å³è¾¹çš„å…ƒç´ ï¼ŒåŒæ—¶å°†å…¶æ·»åŠ è‡³å¦ä¸€ä¸ªåˆ—è¡¨çš„æœ€å·¦è¾¹# å‚æ•°ï¼š # srcï¼Œè¦å–æ•°æ®çš„åˆ—è¡¨çš„name # dstï¼Œè¦æ·»åŠ æ•°æ®çš„åˆ—è¡¨çš„name blpop(keys, timeout) 123456789# å°†å¤šä¸ªåˆ—è¡¨æŽ’åˆ—ï¼ŒæŒ‰ç…§ä»Žå·¦åˆ°å³åŽ»popå¯¹åº”åˆ—è¡¨çš„å…ƒç´  # å‚æ•°ï¼š # keysï¼Œredisçš„nameçš„é›†åˆ # timeoutï¼Œè¶…æ—¶æ—¶é—´ï¼Œå½“å…ƒç´ æ‰€æœ‰åˆ—è¡¨çš„å…ƒç´ èŽ·å–å®Œä¹‹åŽï¼Œé˜»å¡žç­‰å¾…åˆ—è¡¨å†…æœ‰æ•°æ®çš„æ—¶é—´ï¼ˆç§’ï¼‰, 0 è¡¨ç¤ºæ°¸è¿œé˜»å¡ž # æ›´å¤šï¼š # r.brpop(keys, timeout)ï¼Œä»Žå³å‘å·¦èŽ·å–æ•°æ®çˆ¬è™«å®žçŽ°ç®€å•åˆ†å¸ƒå¼ï¼šå¤šä¸ªurlæ”¾åˆ°åˆ—è¡¨é‡Œï¼Œå¾€é‡Œä¸åœæ”¾URLï¼Œç¨‹åºå¾ªçŽ¯å–å€¼ï¼Œä½†æ˜¯åªèƒ½ä¸€å°æœºå™¨è¿è¡Œå–å€¼ï¼Œå¯ä»¥æŠŠurlæ”¾åˆ°redisä¸­ï¼Œå¤šå°æœºå™¨ä»Žredisä¸­å–å€¼ï¼Œçˆ¬å–æ•°æ®ï¼Œå®žçŽ°ç®€å•åˆ†å¸ƒå¼ brpoplpush(src, dst, timeout=0) 123456# ä»Žä¸€ä¸ªåˆ—è¡¨çš„å³ä¾§ç§»é™¤ä¸€ä¸ªå…ƒç´ å¹¶å°†å…¶æ·»åŠ åˆ°å¦ä¸€ä¸ªåˆ—è¡¨çš„å·¦ä¾§ # å‚æ•°ï¼š # srcï¼Œå–å‡ºå¹¶è¦ç§»é™¤å…ƒç´ çš„åˆ—è¡¨å¯¹åº”çš„name # dstï¼Œè¦æ’å…¥å…ƒç´ çš„åˆ—è¡¨å¯¹åº”çš„name # timeoutï¼Œå½“srcå¯¹åº”çš„åˆ—è¡¨ä¸­æ²¡æœ‰æ•°æ®æ—¶ï¼Œé˜»å¡žç­‰å¾…å…¶æœ‰æ•°æ®çš„è¶…æ—¶æ—¶é—´ï¼ˆç§’ï¼‰ï¼Œ0 è¡¨ç¤ºæ°¸è¿œé˜»å¡ž è‡ªå®šä¹‰å¢žé‡è¿­ä»£ 123456789101112131415161718192021# ç”±äºŽredisç±»åº“ä¸­æ²¡æœ‰æä¾›å¯¹åˆ—è¡¨å…ƒç´ çš„å¢žé‡è¿­ä»£ï¼Œå¦‚æžœæƒ³è¦å¾ªçŽ¯nameå¯¹åº”çš„åˆ—è¡¨çš„æ‰€æœ‰å…ƒç´ ï¼Œé‚£ä¹ˆå°±éœ€è¦ï¼š # 1ã€èŽ·å–nameå¯¹åº”çš„æ‰€æœ‰åˆ—è¡¨ # 2ã€å¾ªçŽ¯åˆ—è¡¨# ä½†æ˜¯ï¼Œå¦‚æžœåˆ—è¡¨éžå¸¸å¤§ï¼Œé‚£ä¹ˆå°±æœ‰å¯èƒ½åœ¨ç¬¬ä¸€æ­¥æ—¶å°±å°†ç¨‹åºçš„å†…å®¹æ’‘çˆ†ï¼Œæ‰€æœ‰æœ‰å¿…è¦è‡ªå®šä¹‰ä¸€ä¸ªå¢žé‡è¿­ä»£çš„åŠŸèƒ½ï¼šimport redisconn=redis.Redis(host='127.0.0.1',port=6379)# conn.lpush('test',*[1,2,3,4,45,5,6,7,7,8,43,5,6,768,89,9,65,4,23,54,6757,8,68])# conn.flushall()def scan_list(name,count=2): index=0 while True: data_list=conn.lrange(name,index,count+index-1) if not data_list: return index+=count for item in data_list: yield itemprint(conn.lrange('test',0,100))for item in scan_list('test',5): print('---') print(item) ä¸ƒ redis ä¹‹ Set æ“ä½œSet æ“ä½œï¼ŒSet é›†åˆæ˜¯ä¸å…è®¸é‡å¤çš„åˆ—è¡¨ã€‚ sadd(name,values) 1# nameå¯¹åº”çš„é›†åˆä¸­æ·»åŠ å…ƒç´  scard(name) 1èŽ·å–nameå¯¹åº”çš„é›†åˆä¸­å…ƒç´ ä¸ªæ•° sdiff(keys, *args) 1åœ¨ç¬¬ä¸€ä¸ªnameå¯¹åº”çš„é›†åˆä¸­ä¸”ä¸åœ¨å…¶ä»–nameå¯¹åº”çš„é›†åˆçš„å…ƒç´ é›†åˆ sdiffstore(dest, keys, *args) 1# èŽ·å–ç¬¬ä¸€ä¸ªnameå¯¹åº”çš„é›†åˆä¸­ä¸”ä¸åœ¨å…¶ä»–nameå¯¹åº”çš„é›†åˆï¼Œå†å°†å…¶æ–°åŠ å…¥åˆ°destå¯¹åº”çš„é›†åˆä¸­ sinter(keys, *args) 1# èŽ·å–å¤šä¸€ä¸ªnameå¯¹åº”é›†åˆçš„å¹¶é›† sinterstore(dest, keys, *args) 1# èŽ·å–å¤šä¸€ä¸ªnameå¯¹åº”é›†åˆçš„å¹¶é›†ï¼Œå†è®²å…¶åŠ å…¥åˆ°destå¯¹åº”çš„é›†åˆä¸­ sismember(name, value) 1# æ£€æŸ¥valueæ˜¯å¦æ˜¯nameå¯¹åº”çš„é›†åˆçš„æˆå‘˜ smembers(name) 1# èŽ·å–nameå¯¹åº”çš„é›†åˆçš„æ‰€æœ‰æˆå‘˜ smove(src, dst, value) 1# å°†æŸä¸ªæˆå‘˜ä»Žä¸€ä¸ªé›†åˆä¸­ç§»åŠ¨åˆ°å¦å¤–ä¸€ä¸ªé›†åˆ spop(name) 1# ä»Žé›†åˆçš„å³ä¾§ï¼ˆå°¾éƒ¨ï¼‰ç§»é™¤ä¸€ä¸ªæˆå‘˜ï¼Œå¹¶å°†å…¶è¿”å›ž srandmember(name, numbers) 1# ä»Žnameå¯¹åº”çš„é›†åˆä¸­éšæœºèŽ·å– numbers ä¸ªå…ƒç´  srem(name, values) 1# åœ¨nameå¯¹åº”çš„é›†åˆä¸­åˆ é™¤æŸäº›å€¼ sunion(keys, *args) 1# èŽ·å–å¤šä¸€ä¸ªnameå¯¹åº”çš„é›†åˆçš„å¹¶é›† sunionstore(dest,keys, *args) 1# èŽ·å–å¤šä¸€ä¸ªnameå¯¹åº”çš„é›†åˆçš„å¹¶é›†ï¼Œå¹¶å°†ç»“æžœä¿å­˜åˆ°destå¯¹åº”çš„é›†åˆä¸­ sscan(name, cursor=0, match=None, count=None)sscan_iter(name, match=None, count=None) 1# åŒå­—ç¬¦ä¸²çš„æ“ä½œï¼Œç”¨äºŽå¢žé‡è¿­ä»£åˆ†æ‰¹èŽ·å–å…ƒç´ ï¼Œé¿å…å†…å­˜æ¶ˆè€—å¤ªå¤§ æœ‰åºé›†åˆï¼Œåœ¨é›†åˆçš„åŸºç¡€ä¸Šï¼Œä¸ºæ¯å…ƒç´ æŽ’åºï¼›å…ƒç´ çš„æŽ’åºéœ€è¦æ ¹æ®å¦å¤–ä¸€ä¸ªå€¼æ¥è¿›è¡Œæ¯”è¾ƒï¼Œæ‰€ä»¥ï¼Œå¯¹äºŽæœ‰åºé›†åˆï¼Œæ¯ä¸€ä¸ªå…ƒç´ æœ‰ä¸¤ä¸ªå€¼ï¼Œå³ï¼šå€¼å’Œåˆ†æ•°ï¼Œåˆ†æ•°ä¸“é—¨ç”¨æ¥åšæŽ’åºã€‚ zadd(name, *args, \kwargs)** 12345# åœ¨nameå¯¹åº”çš„æœ‰åºé›†åˆä¸­æ·»åŠ å…ƒç´ # å¦‚ï¼š # zadd(&apos;zz&apos;, &apos;n1&apos;, 1, &apos;n2&apos;, 2) # æˆ– # zadd(&apos;zz&apos;, n1=11, n2=22) zcard(name) 1# èŽ·å–nameå¯¹åº”çš„æœ‰åºé›†åˆå…ƒç´ çš„æ•°é‡ zcount(name, min, max) 1# èŽ·å–nameå¯¹åº”çš„æœ‰åºé›†åˆä¸­åˆ†æ•° åœ¨ [min,max] ä¹‹é—´çš„ä¸ªæ•° zincrby(name, value, amount) 1# è‡ªå¢žnameå¯¹åº”çš„æœ‰åºé›†åˆçš„ name å¯¹åº”çš„åˆ†æ•° r.zrange( name, start, end, desc=False, withscores=False, score_cast_func=float) 123456789101112131415161718# æŒ‰ç…§ç´¢å¼•èŒƒå›´èŽ·å–nameå¯¹åº”çš„æœ‰åºé›†åˆçš„å…ƒç´  # å‚æ•°ï¼š # nameï¼Œredisçš„name # startï¼Œæœ‰åºé›†åˆç´¢å¼•èµ·å§‹ä½ç½®ï¼ˆéžåˆ†æ•°ï¼‰ # endï¼Œæœ‰åºé›†åˆç´¢å¼•ç»“æŸä½ç½®ï¼ˆéžåˆ†æ•°ï¼‰ # descï¼ŒæŽ’åºè§„åˆ™ï¼Œé»˜è®¤æŒ‰ç…§åˆ†æ•°ä»Žå°åˆ°å¤§æŽ’åº # withscoresï¼Œæ˜¯å¦èŽ·å–å…ƒç´ çš„åˆ†æ•°ï¼Œé»˜è®¤åªèŽ·å–å…ƒç´ çš„å€¼ # score_cast_funcï¼Œå¯¹åˆ†æ•°è¿›è¡Œæ•°æ®è½¬æ¢çš„å‡½æ•° # æ›´å¤šï¼š # ä»Žå¤§åˆ°å°æŽ’åº # zrevrange(name, start, end, withscores=False, score_cast_func=float) # æŒ‰ç…§åˆ†æ•°èŒƒå›´èŽ·å–nameå¯¹åº”çš„æœ‰åºé›†åˆçš„å…ƒç´  # zrangebyscore(name, min, max, start=None, num=None, withscores=False, score_cast_func=float) # ä»Žå¤§åˆ°å°æŽ’åº # zrevrangebyscore(name, max, min, start=None, num=None, withscores=False, score_cast_func=float) zrank(name, value) 1234# èŽ·å–æŸä¸ªå€¼åœ¨ nameå¯¹åº”çš„æœ‰åºé›†åˆä¸­çš„æŽ’è¡Œï¼ˆä»Ž 0 å¼€å§‹ï¼‰ # æ›´å¤šï¼š # zrevrank(name, value)ï¼Œä»Žå¤§åˆ°å°æŽ’åº zrangebylex(name, min, max, start=None, num=None) 1234567891011121314151617# å½“æœ‰åºé›†åˆçš„æ‰€æœ‰æˆå‘˜éƒ½å…·æœ‰ç›¸åŒçš„åˆ†å€¼æ—¶ï¼Œæœ‰åºé›†åˆçš„å…ƒç´ ä¼šæ ¹æ®æˆå‘˜çš„ å€¼ ï¼ˆlexicographical orderingï¼‰æ¥è¿›è¡ŒæŽ’åºï¼Œè€Œè¿™ä¸ªå‘½ä»¤åˆ™å¯ä»¥è¿”å›žç»™å®šçš„æœ‰åºé›†åˆé”® key ä¸­ï¼Œ å…ƒç´ çš„å€¼ä»‹äºŽ min å’Œ max ä¹‹é—´çš„æˆå‘˜# å¯¹é›†åˆä¸­çš„æ¯ä¸ªæˆå‘˜è¿›è¡Œé€ä¸ªå­—èŠ‚çš„å¯¹æ¯”ï¼ˆbyte-by-byte compareï¼‰ï¼Œ å¹¶æŒ‰ç…§ä»Žä½Žåˆ°é«˜çš„é¡ºåºï¼Œ è¿”å›žæŽ’åºåŽçš„é›†åˆæˆå‘˜ã€‚ å¦‚æžœä¸¤ä¸ªå­—ç¬¦ä¸²æœ‰ä¸€éƒ¨åˆ†å†…å®¹æ˜¯ç›¸åŒçš„è¯ï¼Œ é‚£ä¹ˆå‘½ä»¤ä¼šè®¤ä¸ºè¾ƒé•¿çš„å­—ç¬¦ä¸²æ¯”è¾ƒçŸ­çš„å­—ç¬¦ä¸²è¦å¤§ # å‚æ•°ï¼š # nameï¼Œredisçš„name # minï¼Œå·¦åŒºé—´ï¼ˆå€¼ï¼‰ã€‚ + è¡¨ç¤ºæ­£æ— é™ï¼› - è¡¨ç¤ºè´Ÿæ— é™ï¼› ( è¡¨ç¤ºå¼€åŒºé—´ï¼› [ åˆ™è¡¨ç¤ºé—­åŒºé—´ # minï¼Œå³åŒºé—´ï¼ˆå€¼ï¼‰ # startï¼Œå¯¹ç»“æžœè¿›è¡Œåˆ†ç‰‡å¤„ç†ï¼Œç´¢å¼•ä½ç½® # numï¼Œå¯¹ç»“æžœè¿›è¡Œåˆ†ç‰‡å¤„ç†ï¼Œç´¢å¼•åŽé¢çš„numä¸ªå…ƒç´  # å¦‚ï¼š # ZADD myzset 0 aa 0 ba 0 ca 0 da 0 ea 0 fa 0 ga # r.zrangebylex('myzset', "-", "[ca") ç»“æžœä¸ºï¼š['aa', 'ba', 'ca'] # æ›´å¤šï¼š # ä»Žå¤§åˆ°å°æŽ’åº # zrevrangebylex(name, max, min, start=None, num=None) zrem(name, values) 123# åˆ é™¤nameå¯¹åº”çš„æœ‰åºé›†åˆä¸­å€¼æ˜¯valuesçš„æˆå‘˜ # å¦‚ï¼šzrem(&apos;zz&apos;, [&apos;s1&apos;, &apos;s2&apos;]) zremrangebyrank(name, min, max) 1# æ ¹æ®æŽ’è¡ŒèŒƒå›´åˆ é™¤ zremrangebyscore(name, min, max) 1# æ ¹æ®åˆ†æ•°èŒƒå›´åˆ é™¤ zremrangebylex(name, min, max) 1# æ ¹æ®å€¼è¿”å›žåˆ é™¤ zscore(name, value) 1# èŽ·å–nameå¯¹åº”æœ‰åºé›†åˆä¸­ value å¯¹åº”çš„åˆ†æ•° zinterstore(dest, keys, aggregate=None) 12# èŽ·å–ä¸¤ä¸ªæœ‰åºé›†åˆçš„äº¤é›†ï¼Œå¦‚æžœé‡åˆ°ç›¸åŒå€¼ä¸åŒåˆ†æ•°ï¼Œåˆ™æŒ‰ç…§aggregateè¿›è¡Œæ“ä½œ# aggregateçš„å€¼ä¸º: SUM MIN MAX zunionstore(dest, keys, aggregate=None) 12# èŽ·å–ä¸¤ä¸ªæœ‰åºé›†åˆçš„å¹¶é›†ï¼Œå¦‚æžœé‡åˆ°ç›¸åŒå€¼ä¸åŒåˆ†æ•°ï¼Œåˆ™æŒ‰ç…§aggregateè¿›è¡Œæ“ä½œ# aggregateçš„å€¼ä¸º: SUM MIN MAX zscan(name, cursor=0, match=None, count=None, score_cast_func=float)zscan_iter(name, match=None, count=None,score_cast_func=float) 1# åŒå­—ç¬¦ä¸²ç›¸ä¼¼ï¼Œç›¸è¾ƒäºŽå­—ç¬¦ä¸²æ–°å¢žscore_cast_funcï¼Œç”¨æ¥å¯¹åˆ†æ•°è¿›è¡Œæ“ä½œ å…« å…¶ä»–æ“ä½œdelete(*names) 1# æ ¹æ®åˆ é™¤redisä¸­çš„ä»»æ„æ•°æ®ç±»åž‹ exists(name) 1# æ£€æµ‹redisçš„nameæ˜¯å¦å­˜åœ¨ keys(pattern=â€™*â€˜) 1234567# æ ¹æ®æ¨¡åž‹èŽ·å–redisçš„name # æ›´å¤šï¼š # KEYS * åŒ¹é…æ•°æ®åº“ä¸­æ‰€æœ‰ key ã€‚ # KEYS h?llo åŒ¹é… hello ï¼Œ hallo å’Œ hxllo ç­‰ã€‚ # KEYS h*llo åŒ¹é… hllo å’Œ heeeeello ç­‰ã€‚ # KEYS h[ae]llo åŒ¹é… hello å’Œ hallo ï¼Œä½†ä¸åŒ¹é… hillo expire(name ,time) 1# ä¸ºæŸä¸ªredisçš„æŸä¸ªnameè®¾ç½®è¶…æ—¶æ—¶é—´ rename(src, dst) 1# å¯¹redisçš„nameé‡å‘½åä¸º move(name, db)) 1# å°†redisçš„æŸä¸ªå€¼ç§»åŠ¨åˆ°æŒ‡å®šçš„dbä¸‹ randomkey() 1# éšæœºèŽ·å–ä¸€ä¸ªredisçš„nameï¼ˆä¸åˆ é™¤ï¼‰ type(name) 1# èŽ·å–nameå¯¹åº”å€¼çš„ç±»åž‹ scan(cursor=0, match=None, count=None)scan_iter(match=None, count=None) 1# åŒå­—ç¬¦ä¸²æ“ä½œï¼Œç”¨äºŽå¢žé‡è¿­ä»£èŽ·å–key ä¹ ç®¡é“redis-pyé»˜è®¤åœ¨æ‰§è¡Œæ¯æ¬¡è¯·æ±‚éƒ½ä¼šåˆ›å»ºï¼ˆè¿žæŽ¥æ± ç”³è¯·è¿žæŽ¥ï¼‰å’Œæ–­å¼€ï¼ˆå½’è¿˜è¿žæŽ¥æ± ï¼‰ä¸€æ¬¡è¿žæŽ¥æ“ä½œï¼Œå¦‚æžœæƒ³è¦åœ¨ä¸€æ¬¡è¯·æ±‚ä¸­æŒ‡å®šå¤šä¸ªå‘½ä»¤ï¼Œåˆ™å¯ä»¥ä½¿ç”¨piplineå®žçŽ°ä¸€æ¬¡è¯·æ±‚æŒ‡å®šå¤šä¸ªå‘½ä»¤ï¼Œå¹¶ä¸”é»˜è®¤æƒ…å†µä¸‹ä¸€æ¬¡pipline æ˜¯åŽŸå­æ€§æ“ä½œã€‚ 12345678910111213import redis pool = redis.ConnectionPool(host='10.211.55.4', port=6379) r = redis.Redis(connection_pool=pool) # pipe = r.pipeline(transaction=False)pipe = r.pipeline(transaction=True)pipe.multi()pipe.set('name', 'alex')pipe.set('role', 'sb') pipe.execute() å Django ä¸­ä½¿ç”¨ redisä¸€ å»ºç«‹ py æ–‡ä»¶redis_pool.py 1234import redis# å•ä¾‹POOL = redis.ConnectionPool(host='127.0.0.1', port=6379) views.py 1234567891011121314import redisfrom django.shortcuts import render,HttpResponsefrom utils.redis_pool import POOLdef index(request): conn = redis.Redis(connection_pool=POOL) conn.hset('kkk','age',18) return HttpResponse('è®¾ç½®æˆåŠŸ')def order(request): conn = redis.Redis(connection_pool=POOL) conn.hget('kkk','age') return HttpResponse('èŽ·å–æˆåŠŸ') äºŒ settings ä¸­é…ç½®å®‰è£… django-redis æ¨¡å— settings.py 123456789101112# redisé…ç½®CACHES = &#123; "default": &#123; "BACKEND": "django_redis.cache.RedisCache", "LOCATION": "redis://127.0.0.1:6379", "OPTIONS": &#123; "CLIENT_CLASS": "django_redis.client.DefaultClient", "CONNECTION_POOL_KWARGS": &#123;"max_connections": 100&#125; # "PASSWORD": "123", &#125; &#125;&#125; views.py 123from django_redis import get_redis_connectionconn = get_redis_connection('default')print(conn.hgetall('xxx')) ä¸‰ è‡ªå®šä¹‰ session å­˜å‚¨urls.py 1234urlpatterns = [ url(r'^book/(?P&lt;id&gt;\d+)', views.Book.as_view()), url(r'^login/', views.Login.as_view()),] token_redis.py 1234import redis# å•ä¾‹POOL = redis.ConnectionPool(host='127.0.0.1', port=6379) views.py 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768697071import redisfrom app01 import token_redis# èŽ·å– éšæœºtokenå€¼def get_token(id, salt='123'): md = hashlib.md5() md.update(bytes(str(id), encoding='utf-8')) md.update(bytes(salt, encoding='utf-8')) return md.hexdigest() + '|' + str(id)# ç™»é™†æ¨¡å—ï¼Œç™»é™†æˆåŠŸåœ¨ redis ä¸­å­˜å‚¨ tokenï¼Œå¹¶å°† token è¿”å›žclass Login(APIView): # def dispatch(self, request, *args, **kwargs): # return super(Login, self).dispatch(request, *args, **kwargs) conn = redis.Redis(connection_pool=token_redis.POOL) def post(self, request): response = &#123;'status': 100, 'msg': None&#125; name = request.data.get('name') password = request.data.get('password') print(name, password) user_obj = models.UserInfo.objects.filter(name=name, password=password).first() if user_obj: token = get_token(user_obj.pk) response['msg'] = 'ç™»é™†æˆåŠŸ' response['status'] = 100 response['token'] = token self.conn.hset(user_obj.pk, 'token', token) response['uid'] = user_obj.pk print('111', token) else: response['msg'] = 'ç”¨æˆ·åæˆ–å¯†ç é”™è¯¯' return Response(response)# ç™»é™†æˆåŠŸæ‰å¯ä»¥è®¿é—® book è·¯ç”±class Book(APIView): authentication_classes = [authticate_classes.BookAuth] # permission_classes = [permiss_classes.LoginPermission] # throttle_classes = [thrott_classes.BookThrottle] # throttle_classes = [] # authentication_classes = [] def dispatch(self, request, *args, **kwargs): return super().dispatch(request, *args, **kwargs) def get(self, request, id): print(request.user, '444') response = &#123;'status': 100, 'msg': None&#125; book_obj = models.Book.objects.filter(pk=id).first() if book_obj: book_ser = myser.BookSer(book_obj, many=False) response['book'] = book_ser.data else: response['msg'] = 'å›¾ä¹¦æ²¡æœ‰å¯¹è±¡' response['status'] = 101 return Response(response) def put(self, request, id): response = &#123;'status': 100, 'msg': None&#125; book_obj = models.Book.objects.filter(pk=id).first() book_ser = myser.BookSer(data=request.data, instance=book_obj) # æ–°æ–¹æ³•ï¼Œä½¿ç”¨åºåˆ—åŒ–ç»„ä»¶ä¿å­˜ï¼Œä½†æ˜¯å¿…é¡»æ˜¯ç»§æ‰¿è‡ª ModelSerializer çš„åºåˆ—åŒ–ç±»ï¼Œè¿™æ ·æ‰å¯ä»¥çŸ¥é“è¦ä¿å­˜çš„è¡¨æ¨¡åž‹ if book_ser.is_valid(): # saveæ—¢å¯ä»¥ä¿®æ”¹ä¹Ÿå¯ä»¥æ–°å¢ž book_ser.save() response['book'] = book_ser.data else: response['msg'] = book_ser.errors return Response(response) authticate_classes.py 123456789101112131415161718192021222324252627282930313233343536import redisfrom app01 import token_redisdef check_token(token, id): conn = redis.Redis(connection_pool=token_redis.POOL) r_token = conn.hget(id, 'token').decode('utf-8') print('r_token', r_token) if token == r_token: return True return False# æ”¹å†™çš„è®¤è¯ç±»class BookAuth(BaseAuthentication): # è®¤è¯éœ€è¦å‘é€çš„å­—æ®µé™¤äº† token è¿˜æœ‰ç”¨æˆ· id def authenticate(self, request): token = request.data.get('token') id = request.data.get('uid') print('222', token) if token: succ = check_token(token, id) # succ = models.UserToken.objects.filter() if succ: # id = request.data.get('uid') user = models.UserInfo.objects.filter(pk=id).first() if user: # request.user = user # print(request.user, 'dfsdf') return user, token else: raise NotAuthenticated('æ•°æ®åº“é”™è¯¯') else: raise NotAuthenticated('è®¤è¯å¤±è´¥') else: raise NotAuthenticated('è¯·å…ˆç™»å½•')]]></content>
      <categories>
        <category>redis</category>
      </categories>
  </entry>
  <entry>
    <title><![CDATA[django-restframeworkå¤„ç†è·¨åŸŸé—®é¢˜]]></title>
    <url>%2F2019%2F02%2F27%2FDjango-restframework%E5%A4%84%E7%90%86%E8%B7%A8%E5%9F%9F%E9%97%AE%E9%A2%98%2F</url>
    <content type="text"><![CDATA[django-restframework å¤„ç†è·¨åŸŸé—®é¢˜ä¸€ å‰è¨€æƒ³è¦å¤„ç†è·¨åŸŸé—®é¢˜ï¼Œé¦–å…ˆéœ€è¦äº†è§£åŒæºç­–ç•¥ã€‚ äºŒ åŒæºç­–ç•¥åŒæºç­–ç•¥ï¼ˆSame origin policyï¼‰æ˜¯ä¸€ç§çº¦å®šï¼Œå®ƒæ˜¯æµè§ˆå™¨æœ€æ ¸å¿ƒä¹Ÿæ˜¯æœ€åŸºæœ¬çš„å®‰å…¨åŠŸèƒ½ï¼Œå¦‚æžœç¼ºå°‘äº†åŒæºç­–ç•¥ï¼Œåˆ™æµè§ˆå™¨çš„æ­£å¸¸åŠŸèƒ½å¯èƒ½éƒ½ä¼šå—åˆ°å½±å“ã€‚å¯ä»¥è¯´ Web æ˜¯æž„å»ºåœ¨åŒæºç­–ç•¥åŸºç¡€ä¹‹ä¸Šçš„ï¼Œæµè§ˆå™¨åªæ˜¯é’ˆå¯¹åŒæºç­–ç•¥çš„ä¸€ç§å®žçŽ°ã€‚ è¯·æ±‚çš„ url åœ°å€ï¼Œå¿…é¡»ä¸Žæµè§ˆå™¨ä¸Šçš„ url åœ°å€å¤„åœ¨åŒåŸŸä¸Šï¼Œä¹Ÿå°±æ˜¯åŸŸåã€ç«¯å£ã€åè®®ç›¸åŒã€‚ ä¸‰ CORS ç®€ä»‹CORSéœ€è¦æµè§ˆå™¨å’ŒæœåŠ¡å™¨åŒæ—¶æ”¯æŒã€‚ç›®å‰ï¼Œæ‰€æœ‰æµè§ˆå™¨éƒ½æ”¯æŒè¯¥åŠŸèƒ½ï¼ŒIEæµè§ˆå™¨ä¸èƒ½ä½ŽäºŽIE10ã€‚ æ•´ä¸ªCORSé€šä¿¡è¿‡ç¨‹ï¼Œéƒ½æ˜¯æµè§ˆå™¨è‡ªåŠ¨å®Œæˆï¼Œä¸éœ€è¦ç”¨æˆ·å‚ä¸Žã€‚å¯¹äºŽå¼€å‘è€…æ¥è¯´ï¼ŒCORSé€šä¿¡ä¸ŽåŒæºçš„AJAXé€šä¿¡æ²¡æœ‰å·®åˆ«ï¼Œä»£ç å®Œå…¨ä¸€æ ·ã€‚æµè§ˆå™¨ä¸€æ—¦å‘çŽ°AJAXè¯·æ±‚è·¨æºï¼Œå°±ä¼šè‡ªåŠ¨æ·»åŠ ä¸€äº›é™„åŠ çš„å¤´ä¿¡æ¯ï¼Œæœ‰æ—¶è¿˜ä¼šå¤šå‡ºä¸€æ¬¡é™„åŠ çš„è¯·æ±‚ï¼Œä½†ç”¨æˆ·ä¸ä¼šæœ‰æ„Ÿè§‰ã€‚ å› æ­¤ï¼Œå®žçŽ°CORSé€šä¿¡çš„å…³é”®æ˜¯æœåŠ¡å™¨ã€‚åªè¦æœåŠ¡å™¨å®žçŽ°äº†CORSæŽ¥å£ï¼Œå°±å¯ä»¥è·¨æºé€šä¿¡ã€‚ å›› CORS åŸºæœ¬æµç¨‹æµè§ˆå™¨å°†CORSè¯·æ±‚åˆ†æˆä¸¤ç±»ï¼šç®€å•è¯·æ±‚ï¼ˆsimple requestï¼‰å’Œéžç®€å•è¯·æ±‚ï¼ˆnot-so-simple requestï¼‰ã€‚æµè§ˆå™¨å‘å‡ºCORSç®€å•è¯·æ±‚ï¼Œåªéœ€è¦åœ¨å¤´ä¿¡æ¯ä¹‹ä¸­å¢žåŠ ä¸€ä¸ªOriginå­—æ®µã€‚æµè§ˆå™¨å‘å‡ºCORSéžç®€å•è¯·æ±‚ï¼Œä¼šåœ¨æ­£å¼é€šä¿¡ä¹‹å‰ï¼Œå¢žåŠ ä¸€æ¬¡HTTPæŸ¥è¯¢è¯·æ±‚ï¼Œç§°ä¸ºâ€é¢„æ£€â€è¯·æ±‚ï¼ˆpreflightï¼‰ã€‚æµè§ˆå™¨å…ˆè¯¢é—®æœåŠ¡å™¨ï¼Œå½“å‰ç½‘é¡µæ‰€åœ¨çš„åŸŸåæ˜¯å¦åœ¨æœåŠ¡å™¨çš„è®¸å¯åå•ä¹‹ä¸­ï¼Œä»¥åŠå¯ä»¥ä½¿ç”¨å“ªäº›HTTPåŠ¨è¯å’Œå¤´ä¿¡æ¯å­—æ®µã€‚åªæœ‰å¾—åˆ°è‚¯å®šç­”å¤ï¼Œæµè§ˆå™¨æ‰ä¼šå‘å‡ºæ­£å¼çš„XMLHttpRequestè¯·æ±‚ï¼Œå¦åˆ™å°±æŠ¥é”™ã€‚ äº” CORS ä¸¤ç§è¯·æ±‚è¯¦è§£æµè§ˆå™¨å‘å‡ºçš„è¯·æ±‚å¯ä»¥åˆ†ä¸ºç®€å•è¯·æ±‚å’Œéžç®€å•è¯·æ±‚ã€‚ ä¸€ ç®€å•è¯·æ±‚12345678910ï¼ˆ1) è¯·æ±‚æ–¹æ³•æ˜¯ä»¥ä¸‹ä¸‰ç§æ–¹æ³•ä¹‹ä¸€ï¼šHEADGETPOSTï¼ˆ2ï¼‰HTTPçš„å¤´ä¿¡æ¯ä¸è¶…å‡ºä»¥ä¸‹å‡ ç§å­—æ®µï¼šAcceptAccept-LanguageContent-LanguageLast-Event-IDContent-Typeï¼šåªé™äºŽä¸‰ä¸ªå€¼application/x-www-form-urlencodedã€multipart/form-dataã€text/plain äºŒ éžç®€å•è¯·æ±‚å‡¡æ˜¯ä¸åŒæ—¶æ»¡è¶³ä¸Šé¢ä¸¤ä¸ªæ¡ä»¶ï¼Œå°±å±žäºŽéžç®€å•è¯·æ±‚ã€‚æµè§ˆå™¨å¯¹è¿™ä¸¤ç§è¯·æ±‚çš„å¤„ç†æ˜¯ä¸ä¸€æ ·çš„ã€‚ ä¸‰ ç®€å•è¯·æ±‚å’Œéžç®€å•è¯·æ±‚çš„åŒºåˆ«12345678910111213* ç®€å•è¯·æ±‚å’Œéžç®€å•è¯·æ±‚çš„åŒºåˆ«ï¼Ÿ ç®€å•è¯·æ±‚ï¼šä¸€æ¬¡è¯·æ±‚ éžç®€å•è¯·æ±‚ï¼šä¸¤æ¬¡è¯·æ±‚ï¼Œåœ¨å‘é€æ•°æ®ä¹‹å‰ä¼šå…ˆå‘ä¸€æ¬¡è¯·æ±‚ç”¨äºŽåšâ€œé¢„æ£€â€ï¼Œåªæœ‰â€œé¢„æ£€â€é€šè¿‡åŽæ‰å†å‘é€ä¸€æ¬¡è¯·æ±‚ç”¨äºŽæ•°æ®ä¼ è¾“ã€‚* å…³äºŽâ€œé¢„æ£€â€- è¯·æ±‚æ–¹å¼ï¼šOPTIONS- â€œé¢„æ£€â€å…¶å®žåšæ£€æŸ¥ï¼Œæ£€æŸ¥å¦‚æžœé€šè¿‡åˆ™å…è®¸ä¼ è¾“æ•°æ®ï¼Œæ£€æŸ¥ä¸é€šè¿‡åˆ™ä¸å†å‘é€çœŸæ­£æƒ³è¦å‘é€çš„æ¶ˆæ¯- å¦‚ä½•â€œé¢„æ£€â€ =&gt; å¦‚æžœå¤æ‚è¯·æ±‚æ˜¯PUTç­‰è¯·æ±‚ï¼Œåˆ™æœåŠ¡ç«¯éœ€è¦è®¾ç½®å…è®¸æŸè¯·æ±‚ï¼Œå¦åˆ™â€œé¢„æ£€â€ä¸é€šè¿‡ Access-Control-Request-Method =&gt; å¦‚æžœå¤æ‚è¯·æ±‚è®¾ç½®äº†è¯·æ±‚å¤´ï¼Œåˆ™æœåŠ¡ç«¯éœ€è¦è®¾ç½®å…è®¸æŸè¯·æ±‚å¤´ï¼Œå¦åˆ™â€œé¢„æ£€â€ä¸é€šè¿‡ Access-Control-Request-Headers å…­ ä¸¤ç§è¯·æ±‚æ”¯æŒè·¨åŸŸä¸€ ç®€å•è¯·æ±‚æ”¯æŒè·¨åŸŸæœåŠ¡å™¨åªéœ€è¦è®¾ç½®å“åº”å¤´ä¸ºï¼š 1Access-Control-Allow-Origin = &apos;åŸŸå&apos; æˆ– &apos;*&apos; äºŒ éžç®€å•è¯·æ±‚æ”¯æŒè·¨åŸŸç”±äºŽå¤æ‚è¯·æ±‚æ—¶ï¼Œé¦–å…ˆä¼šå‘é€â€˜â€™é¢„æ£€â€˜â€™è¯·æ±‚ï¼Œå¦‚æžœé¢„æ£€æˆåŠŸï¼Œåˆ™å‘é€çœŸå®žè¯·æ±‚ã€‚ â€˜â€™é¢„æ£€â€˜â€™è¯·æ±‚æ—¶ï¼Œå…è®¸è¯·æ±‚æ–¹å¼éœ€è¦æœåŠ¡å™¨è®¾ç½®å“åº”å¤´ï¼šAccess-Control-Request-Method â€˜â€™é¢„æ£€â€˜â€™è¯·æ±‚æ—¶ï¼Œå…è®¸è¯·æ±‚å¤´åˆ™éœ€è¦æœåŠ¡å™¨è®¾ç½®å“åº”å¤´ï¼šAccess-Control-Request-Headers ä¸ƒ django ä¸­å®žçŽ°è·¨åŸŸå› ä¸ºæ¯ä¸ªè¯·æ±‚éƒ½éœ€è¦è¿›è¡Œåˆ¤æ–­æ˜¯å¦å…è®¸ï¼Œæ‰€ä»¥åœ¨ä¸­é—´ä»¶ä¸­å¤„ç†è·¨åŸŸã€‚ settings.py 123456789101112131415161718# settings.py# è®¾ç½®äº†ä¸€ä¸ª ip è®¿é—®ç™½åå•WHITE_MENU = [ '127.0.0.1',]# é…ç½®ä¸­é—´ä»¶ï¼Œæœ€åŽä¸€ä¸ªMIDDLEWARE = [ 'django.middleware.security.SecurityMiddleware', 'django.contrib.sessions.middleware.SessionMiddleware', 'django.middleware.common.CommonMiddleware', 'django.middleware.csrf.CsrfViewMiddleware', 'django.contrib.auth.middleware.AuthenticationMiddleware', 'django.contrib.messages.middleware.MessageMiddleware', 'django.middleware.clickjacking.XFrameOptionsMiddleware', 'app01.mid.CORS',] mid.py 123456789101112131415161718192021from django.utils.deprecation import MiddlewareMixinfrom DRESF_03 import settingsclass CORS(MiddlewareMixin): def process_response(self, request, response): ip_list = settings.WHITE_MENU if request.META.get('REMOTE_ADDR') in ip_list: response['Access-Control-Allow-Origin'] = request.META.get('HTTP_ORIGIN') # response['Access-Control-Allow-Origin'] = 'http://127.0.0.1' print('2345') if request.method == 'OPTIONS': response['Access-Control-Allow-Methods'] = 'PUT,DELETE' response['Access-Control-Allow-Headers'] = 'Content-Type' print('34567') print('request', request.META) print('response', response) return response]]></content>
      <categories>
        <category>django-restframework</category>
      </categories>
  </entry>
  <entry>
    <title><![CDATA[django-restframeworkä¹‹ç¼“å­˜]]></title>
    <url>%2F2019%2F02%2F27%2FDjango-restframework%E4%B9%8B%E7%BC%93%E5%AD%98%2F</url>
    <content type="text"><![CDATA[django-restframeworkä¹‹ç¼“å­˜ç³»ç»Ÿä¸€ å‰è¨€ä¸€ ä¸ºä»€ä¹ˆéœ€è¦ç¼“å­˜åœ¨åŠ¨æ€ç½‘ç«™ä¸­ï¼Œç”¨æˆ·æ‰€æœ‰çš„è¯·æ±‚ï¼ŒæœåŠ¡å™¨éƒ½ä¼šåŽ»æ•°æ®åº“ä¸­è¿›è¡Œç›¸åº”çš„å¢žã€åˆ ã€æŸ¥ã€æ”¹ï¼Œæ¸²æŸ“æ¨¡å—ï¼Œæ‰§è¡Œä¸šåŠ¡é€»è¾‘ï¼Œæœ€åŽç”Ÿæˆç”¨æˆ·çœ‹åˆ°çš„é¡µé¢ã€‚ å½“ä¸€ä¸ªç½‘ç«™çš„ç”¨æˆ·è®¿é—®é‡å¾ˆå¤§çš„æ—¶å€™ï¼Œæ¯ä¸€æ¬¡çš„åŽå°æ“ä½œï¼Œéƒ½ä¼šæ¶ˆè€—å¾ˆå¤šçš„æœåŠ¡ç«¯èµ„æºï¼Œæ‰€ä»¥å¿…é¡»ä½¿ç”¨ç¼“å­˜æ¥å‡è½»åŽç«¯æœåŠ¡æœŸçš„åŽ‹åŠ›ã€‚ ç¼“å­˜æ˜¯å°†ä¸€äº›å¸¸ç”¨çš„æ•°æ®ä¿å­˜åœ¨å†…å­˜ä¸­ç«è½¦ memcache ä¸­ï¼Œåœ¨ä¸€å®šçš„æ—¶é—´å†…æœ‰äººæ¥è®¿é—®è¿™äº›æ•°æ®æ—¶ï¼Œåˆ™ä¸å†åŽ»æ‰§è¡Œæ•°æ®åº“åŠæ¸²æŸ“ç­‰æ“ä½œï¼Œè€Œæ˜¯ç›´æŽ¥ä»Žå†…å­˜æˆ– memcache çš„ç¼“å­˜ä¸­åŽ»å–å¾—æ•°æ®ï¼Œä¹‹åŽå†è¿”å›žç»™ç”¨æˆ·ã€‚ äºŒ Django ä¸­çš„å…­ç§ç¼“å­˜æ–¹å¼ å¼€å‘è°ƒè¯•ç¼“å­˜ å†…å­˜ç¼“å­˜ æ–‡ä»¶ç¼“å­˜ æ•°æ®åº“ç¼“å­˜ Memcache ç¼“å­˜ï¼ˆä½¿ç”¨ python-memcached æ¨¡å—ï¼‰ Memcache ç¼“å­˜ï¼ˆä½¿ç”¨ pylibmc æ¨¡å—ï¼‰ äºŒ Django ä¸­çš„ç¼“å­˜é…ç½®ä¸€ å¼€å‘è°ƒè¯•ç¼“å­˜æ­¤æ¨¡å¼ä¸ºå¼€å‘è°ƒè¯•ä½¿ç”¨ï¼Œå®žé™…ä¸Šä¸æ‰§è¡Œä»»ä½•æ“ä½œ 123456789101112# settings.pyCACHES = &#123; 'default': &#123; 'BACKEND': 'django.core.cache.backends.dummy.DummyCache', # ç¼“å­˜åŽå°ä½¿ç”¨çš„å¼•æ“Ž 'TIMEOUT': 300, # ç¼“å­˜è¶…æ—¶æ—¶é—´ï¼ˆé»˜è®¤300ç§’ï¼ŒNoneè¡¨ç¤ºæ°¸ä¸è¿‡æœŸï¼Œ0è¡¨ç¤ºç«‹å³è¿‡æœŸï¼‰ 'OPTIONS':&#123; 'MAX_ENTRIES': 300, # æœ€å¤§ç¼“å­˜è®°å½•çš„æ•°é‡ï¼ˆé»˜è®¤300ï¼‰ 'CULL_FREQUENCY': 3, # ç¼“å­˜åˆ°è¾¾æœ€å¤§ä¸ªæ•°ä¹‹åŽï¼Œå‰”é™¤ç¼“å­˜ä¸ªæ•°çš„æ¯”ä¾‹ï¼Œå³ï¼š1/CULL_FREQUENCYï¼ˆé»˜è®¤3ï¼‰ &#125;, &#125;&#125; äºŒ å†…å­˜ç¼“å­˜å°†ç¼“å­˜å†…å®¹ä¿å­˜åˆ°å†…å­˜ä¸­ 12345678910111213# settings.pyCACHES = &#123; 'default': &#123; 'BACKEND': 'django.core.cache.backends.locmem.LocMemCache', # æŒ‡å®šç¼“å­˜ä½¿ç”¨çš„å¼•æ“Ž 'LOCATION': 'unique-snowflake', # å†™åœ¨å†…å­˜ä¸­çš„å˜é‡çš„å”¯ä¸€å€¼ 'TIMEOUT':300, # ç¼“å­˜è¶…æ—¶æ—¶é—´(é»˜è®¤ä¸º300ç§’,Noneè¡¨ç¤ºæ°¸ä¸è¿‡æœŸ) 'OPTIONS':&#123; 'MAX_ENTRIES': 300, # æœ€å¤§ç¼“å­˜è®°å½•çš„æ•°é‡ï¼ˆé»˜è®¤300ï¼‰ 'CULL_FREQUENCY': 3, # ç¼“å­˜åˆ°è¾¾æœ€å¤§ä¸ªæ•°ä¹‹åŽï¼Œå‰”é™¤ç¼“å­˜ä¸ªæ•°çš„æ¯”ä¾‹ï¼Œå³ï¼š1/CULL_FREQUENCYï¼ˆé»˜è®¤3ï¼‰ &#125; &#125;&#125; ä¸‰ æ–‡ä»¶ç¼“å­˜å°†ç¼“å­˜æ•°æ®å­˜å‚¨åœ¨æ–‡ä»¶ä¸­ 12345678910111213# settings.pyCACHES = &#123; 'default': &#123; 'BACKEND': 'django.core.cache.backends.filebased.FileBasedCache', #æŒ‡å®šç¼“å­˜ä½¿ç”¨çš„å¼•æ“Ž 'LOCATION': '/var/tmp/django_cache', #æŒ‡å®šç¼“å­˜çš„è·¯å¾„ 'TIMEOUT':300, #ç¼“å­˜è¶…æ—¶æ—¶é—´(é»˜è®¤ä¸º300ç§’,Noneè¡¨ç¤ºæ°¸ä¸è¿‡æœŸ) 'OPTIONS':&#123; 'MAX_ENTRIES': 300, # æœ€å¤§ç¼“å­˜è®°å½•çš„æ•°é‡ï¼ˆé»˜è®¤300ï¼‰ 'CULL_FREQUENCY': 3, # ç¼“å­˜åˆ°è¾¾æœ€å¤§ä¸ªæ•°ä¹‹åŽï¼Œå‰”é™¤ç¼“å­˜ä¸ªæ•°çš„æ¯”ä¾‹ï¼Œå³ï¼š1/CULL_FREQUENCYï¼ˆé»˜è®¤3ï¼‰ &#125; &#125; &#125; å›› æ•°æ®åº“ç¼“å­˜å°†ç¼“å­˜æ•°æ®å­˜å‚¨åœ¨æ•°æ®åº“ä¸­ 123456789101112131415# settings.pyCACHES = &#123; 'default': &#123; 'BACKEND': 'django.core.cache.backends.db.DatabaseCache', # æŒ‡å®šç¼“å­˜ä½¿ç”¨çš„å¼•æ“Ž 'LOCATION': 'cache_table', # æ•°æ®åº“è¡¨ 'OPTIONS':&#123; 'MAX_ENTRIES': 300, # æœ€å¤§ç¼“å­˜è®°å½•çš„æ•°é‡ï¼ˆé»˜è®¤300ï¼‰ 'CULL_FREQUENCY': 3, # ç¼“å­˜åˆ°è¾¾æœ€å¤§ä¸ªæ•°ä¹‹åŽï¼Œå‰”é™¤ç¼“å­˜ä¸ªæ•°çš„æ¯”ä¾‹ï¼Œå³ï¼š1/CULL_FREQUENCYï¼ˆé»˜è®¤3ï¼‰ &#125; &#125; &#125;# æ³¨æ„ï¼šåˆ›å»ºç¼“å­˜çš„æ•°æ®è¡¨ä½¿ç”¨çš„è¯­å¥ï¼špython manage.py createcachetable äº” Memcacheç¼“å­˜ä½¿ç”¨ python-memcached æ¨¡å—è¿žæŽ¥ memcache Memcached æ˜¯ Django åŽŸç”Ÿæ”¯æŒçš„ç¼“å­˜ç³»ç»Ÿã€‚è¦ä½¿ç”¨ Memcachedï¼Œéœ€è¦ä¸‹è½½ Memcached çš„æ”¯æŒåº“ python-memcached æˆ– pylibmcã€‚ 123456789101112# settings.pyCACHES = &#123; 'default': &#123; 'BACKEND': 'django.core.cache.backends.memcached.MemcachedCache', # æŒ‡å®šç¼“å­˜ä½¿ç”¨çš„å¼•æ“Ž 'LOCATION': '192.168.10.100:11211', # æŒ‡å®šMemcacheç¼“å­˜æœåŠ¡å™¨çš„IPåœ°å€å’Œç«¯å£ 'OPTIONS':&#123; 'MAX_ENTRIES': 300, # æœ€å¤§ç¼“å­˜è®°å½•çš„æ•°é‡ï¼ˆé»˜è®¤300ï¼‰ 'CULL_FREQUENCY': 3, # ç¼“å­˜åˆ°è¾¾æœ€å¤§ä¸ªæ•°ä¹‹åŽï¼Œå‰”é™¤ç¼“å­˜ä¸ªæ•°çš„æ¯”ä¾‹ï¼Œå³ï¼š1/CULL_FREQUENCYï¼ˆé»˜è®¤3ï¼‰ &#125; &#125;&#125; LOCATIONä¹Ÿå¯ä»¥é…ç½®æˆå¦‚ä¸‹ï¼š 123456'LOCATION': 'unix:/tmp/memcached.sock', # æŒ‡å®šå±€åŸŸç½‘å†…çš„ä¸»æœºååŠ socketå¥—æŽ¥å­—ä¸ºMemcacheç¼“å­˜æœåŠ¡å™¨'LOCATION': [ # æŒ‡å®šä¸€å°æˆ–å¤šå°å…¶ä»–ä¸»æœºipåœ°å€åŠ ç«¯å£ä¸ºMemcacheç¼“å­˜æœåŠ¡å™¨ '192.168.10.100:11211', '192.168.10.101:11211', '192.168.10.102:11211',] å…­ Memcacheç¼“å­˜ä½¿ç”¨ pylibmc æ¨¡å—è¿žæŽ¥ Memcache 12345678910111213# settings.pysettings.pyæ–‡ä»¶é…ç½® CACHES = &#123; 'default': &#123; 'BACKEND': 'django.core.cache.backends.memcached.PyLibMCCache', # æŒ‡å®šç¼“å­˜ä½¿ç”¨çš„å¼•æ“Ž 'LOCATION':'192.168.10.100:11211', # æŒ‡å®šæœ¬æœºçš„11211ç«¯å£ä¸ºMemcacheç¼“å­˜æœåŠ¡å™¨ 'OPTIONS':&#123; 'MAX_ENTRIES': 300, # æœ€å¤§ç¼“å­˜è®°å½•çš„æ•°é‡ï¼ˆé»˜è®¤300ï¼‰ 'CULL_FREQUENCY': 3, # ç¼“å­˜åˆ°è¾¾æœ€å¤§ä¸ªæ•°ä¹‹åŽï¼Œå‰”é™¤ç¼“å­˜ä¸ªæ•°çš„æ¯”ä¾‹ï¼Œå³ï¼š1/CULL_FREQUENCYï¼ˆé»˜è®¤3ï¼‰ &#125;, &#125; &#125; LOCATIONä¹Ÿå¯ä»¥é…ç½®ä¸ºå¦‚ä¸‹ï¼š 123456'LOCATION': '/tmp/memcached.sock', # æŒ‡å®šæŸä¸ªè·¯å¾„ä¸ºç¼“å­˜ç›®å½•'LOCATION': [ # åˆ†å¸ƒå¼ç¼“å­˜,åœ¨å¤šå°æœåŠ¡å™¨ä¸Šè¿è¡ŒMemcachedè¿›ç¨‹,ç¨‹åºä¼šæŠŠå¤šå°æœåŠ¡å™¨å½“ä½œä¸€ä¸ªå•ç‹¬çš„ç¼“å­˜,è€Œä¸ä¼šåœ¨æ¯å°æœåŠ¡å™¨ä¸Šå¤åˆ¶ç¼“å­˜å€¼ '192.168.10.100:11211', '192.168.10.101:11211', '192.168.10.102:11211',] Memcached æ˜¯åŸºäºŽå†…å­˜çš„ç¼“å­˜ï¼Œæ•°æ®å­˜å‚¨åœ¨å†…å­˜ä¸­ã€‚æ‰€ä»¥å¦‚æžœæœåŠ¡å™¨æ­»æœºçš„è¯ï¼Œæ•°æ®ä¼šä¸¢å¤±ï¼Œæ‰€ä»¥ Memcached ä¸€èˆ¬ä¸Žå…¶ä»–ç¼“å­˜é…åˆä½¿ç”¨ã€‚ ä¸‰ Django ä¸­çš„ç¼“å­˜åº”ç”¨Django æä¾›äº†ä¸åŒç²’åº¦çš„ç¼“å­˜ï¼Œå¯ä»¥ç¼“å­˜æŸä¸ªé¡µé¢ï¼Œå¯ä»¥åªç¼“å­˜ä¸€ä¸ªé¡µé¢çš„æŸä¸ªéƒ¨åˆ†ï¼Œç”šè‡³å¯ä»¥ç¼“å­˜æ•´ä¸ªç½‘ç«™ã€‚ æ•°æ®åº“ 123class Book(models.Model): name = models.CharField(max_length=32) price = models.DecimalField(max_digits=6, decimal_places=1) ä¸€ è§†å›¾å‡½æ•°ä½¿ç”¨ç¼“å­˜views.py 123456789from django.views.decorators.cache import cache_pageimport timefrom .models import *@cache_page(15) #è¶…æ—¶æ—¶é—´ä¸º15ç§’def index(request): t=time.time() #èŽ·å–å½“å‰æ—¶é—´ bookList=Book.objects.all() return render(request,"index.html",locals()) index.html 1234567891011121314151617&lt;!DOCTYPE html&gt;&lt;html lang="en"&gt;&lt;head&gt; &lt;meta charset="UTF-8"&gt; &lt;title&gt;Title&lt;/title&gt;&lt;/head&gt;&lt;body&gt;&lt;h3&gt;å½“å‰æ—¶é—´:-----&#123;&#123; t &#125;&#125;&lt;/h3&gt;&lt;ul&gt; &#123;% for book in bookList %&#125; &lt;li&gt;&#123;&#123; book.name &#125;&#125;---------&gt;&#123;&#123; book.price &#125;&#125;$&lt;/li&gt; &#123;% endfor %&#125;&lt;/ul&gt;&lt;/body&gt;&lt;/html&gt; è¿™ä¸ªä¾‹å­æ˜¯åŸºäºŽå†…å­˜çš„ç¼“å­˜é…ç½®ï¼ŒåŸºäºŽæ–‡ä»¶çš„ç¼“å­˜è¯¥æ€Žä¹ˆé…ç½®å‘¢ï¼Ÿ æ›´æ”¹ settings.py çš„é…ç½®ã€‚ 1234567891011CACHES = &#123; 'default': &#123; 'BACKEND': 'django.core.cache.backends.filebased.FileBasedCache', # æŒ‡å®šç¼“å­˜ä½¿ç”¨çš„å¼•æ“Ž 'LOCATION': 'E:\django_cache', # æŒ‡å®šç¼“å­˜çš„è·¯å¾„ 'TIMEOUT': 300, # ç¼“å­˜è¶…æ—¶æ—¶é—´(é»˜è®¤ä¸º300ç§’,Noneè¡¨ç¤ºæ°¸ä¸è¿‡æœŸ) 'OPTIONS': &#123; 'MAX_ENTRIES': 300, # æœ€å¤§ç¼“å­˜è®°å½•çš„æ•°é‡ï¼ˆé»˜è®¤300ï¼‰ 'CULL_FREQUENCY': 3, # ç¼“å­˜åˆ°è¾¾æœ€å¤§ä¸ªæ•°ä¹‹åŽï¼Œå‰”é™¤ç¼“å­˜ä¸ªæ•°çš„æ¯”ä¾‹ï¼Œå³ï¼š1/CULL_FREQUENCYï¼ˆé»˜è®¤3ï¼‰ &#125; &#125;&#125; ä¹‹åŽå†æ¬¡åˆ·æ–°æµè§ˆå™¨ï¼Œå¯ä»¥çœ‹åˆ°åœ¨åˆšæ‰é…ç½®çš„ç›®å½•ä¸‹ç”Ÿæˆç¼“å­˜æ–‡ä»¶ï¼Œé€šè¿‡æµ‹è¯•å¯ä»¥çŸ¥é“ï¼ŒDjango ä¼šä»¥è‡ªå·±çš„å½¢å¼æŠŠç¼“å­˜æ–‡ä»¶ä¿å­˜åœ¨é…ç½®æ–‡ä»¶ä¸­æŒ‡å®šçš„ç›®å½•ä¸­ã€‚ äºŒ å…¨ç«™ä½¿ç”¨ç¼“å­˜å…¨ç«™ç¼“å­˜éœ€è¦ä½¿ç”¨ Django çš„ä¸­é—´ä»¶ã€‚ ç”¨æˆ·çš„è¯·æ±‚é€šè¿‡ä¸­é—´ä»¶ï¼Œç»è¿‡ä¸€ç³»åˆ—çš„è®¤è¯ç­‰æ“ä½œï¼Œå¦‚æžœè¯·æ±‚çš„å†…å®¹åœ¨ç¼“å­˜ä¸­å­˜åœ¨ï¼Œåˆ™ä½¿ç”¨FetchFromCacheMiddlewareèŽ·å–å†…å®¹å¹¶è¿”å›žç»™ç”¨æˆ·ã€‚ å½“è¿”å›žç»™ç”¨æˆ·ä¹‹å‰ï¼Œåˆ¤æ–­ç¼“å­˜ä¸­æ˜¯å¦å·²ç»å­˜åœ¨ï¼Œå¦‚æžœä¸å­˜åœ¨ï¼Œåˆ™UpdateCacheMiddlewareä¼šå°†ç¼“å­˜ä¿å­˜åœ¨ Django çš„ç¼“å­˜ä¸­ï¼Œä»¥å®žçŽ°å…¨ç«™ç¼“å­˜ã€‚ 12345678# ç¼“å­˜æ•´ä¸ªç«™ç‚¹ï¼Œæ˜¯æœ€ç®€å•çš„ç¼“å­˜æ–¹å¼# åœ¨ MIDDLEWARE_CLASSES ä¸­åŠ å…¥ â€œupdateâ€ å’Œ â€œfetchâ€ ä¸­é—´ä»¶MIDDLEWARE_CLASSES = ( 'django.middleware.cache.UpdateCacheMiddleware', #ç¬¬ä¸€ 'django.middleware.common.CommonMiddleware', 'django.middleware.cache.FetchFromCacheMiddleware', #æœ€åŽ) å…·ä½“ä¸­é—´ä»¶é…ç½®ï¼š 12345678910111213141516MIDDLEWARE_CLASSES = ( 'django.middleware.cache.UpdateCacheMiddleware', #å“åº”HttpResponseä¸­è®¾ç½®å‡ ä¸ªheaders 'django.contrib.sessions.middleware.SessionMiddleware', 'django.middleware.common.CommonMiddleware', 'django.middleware.csrf.CsrfViewMiddleware', 'django.contrib.auth.middleware.AuthenticationMiddleware', 'django.contrib.auth.middleware.SessionAuthenticationMiddleware', 'django.contrib.messages.middleware.MessageMiddleware', 'django.middleware.clickjacking.XFrameOptionsMiddleware', 'django.middleware.security.SecurityMiddleware', 'django.middleware.cache.FetchFromCacheMiddleware', #ç”¨æ¥ç¼“å­˜é€šè¿‡GETå’ŒHEADæ–¹æ³•èŽ·å–çš„çŠ¶æ€ç ä¸º200çš„å“åº”)CACHE_MIDDLEWARE_SECONDS=10 views.py 1234567891011121314from django.views.decorators.cache import cache_pageimport timefrom .models import *def index(request): t=time.time() #èŽ·å–å½“å‰æ—¶é—´ bookList=Book.objects.all() return render(request,"index.html",locals())def foo(request): t=time.time() #èŽ·å–å½“å‰æ—¶é—´ return HttpResponse("HELLO:"+str(t)) index.html 1234567891011121314151617&lt;!DOCTYPE html&gt;&lt;html lang="en"&gt;&lt;head&gt; &lt;meta charset="UTF-8"&gt; &lt;title&gt;Title&lt;/title&gt;&lt;/head&gt;&lt;body&gt;&lt;h3 style="color: green"&gt;å½“å‰æ—¶é—´:-----&#123;&#123; t &#125;&#125;&lt;/h3&gt;&lt;ul&gt; &#123;% for book in bookList %&#125; &lt;li&gt;&#123;&#123; book.name &#125;&#125;---------&gt;&#123;&#123; book.price &#125;&#125;$&lt;/li&gt; &#123;% endfor %&#125;&lt;/ul&gt;&lt;/body&gt;&lt;/html&gt; å…¶ä½™ä»£ç ä¸å˜ï¼Œåˆ·æ–°æµè§ˆå™¨æ˜¯10ç§’ï¼Œé¡µé¢ä¸Šçš„æ—¶é—´å˜åŒ–ä¸€æ¬¡ï¼Œè¿™æ ·å°±å®žçŽ°äº†å…¨ç«™ç¼“å­˜ã€‚ ä¸‰ å±€éƒ¨ç¼“å­˜åˆ·æ–°é¡µé¢æ—¶ï¼Œæ•´ä¸ªç½‘é¡µåªæœ‰æŸéƒ¨åˆ†å®žçŽ°ç¼“å­˜ã€‚ views.py 1234567from django.views.decorators.cache import cache_pageimport timefrom .models import *def index(request): t=time.time() #èŽ·å–å½“å‰æ—¶é—´ bookList=Book.objects.all() return render(request,"index.html",locals()) index.html 12345678910111213141516&#123;% load cache %&#125;&lt;!DOCTYPE html&gt;&lt;html lang="en"&gt;&lt;head&gt; &lt;meta charset="UTF-8"&gt; &lt;title&gt;Title&lt;/title&gt;&lt;/head&gt;&lt;body&gt; &lt;h3 style="color: green"&gt;ä¸ç¼“å­˜:-----&#123;&#123; t &#125;&#125;&lt;/h3&gt;&#123;% cache 2 'name' %&#125; &lt;h3&gt;ç¼“å­˜:-----:&#123;&#123; t &#125;&#125;&lt;/h3&gt;&#123;% endcache %&#125;&lt;/body&gt;&lt;/html&gt;]]></content>
      <categories>
        <category>django-restframework</category>
      </categories>
  </entry>
  <entry>
    <title><![CDATA[django-restframeworkä¹‹ç‰ˆæœ¬æŽ§åˆ¶]]></title>
    <url>%2F2019%2F02%2F27%2Fdjango-restframework%E4%B9%8B%E7%89%88%E6%9C%AC%E6%8E%A7%E5%88%B6%2F</url>
    <content type="text"><![CDATA[django-restframeworkä¹‹ç‰ˆæœ¬æŽ§åˆ¶ä¸€ å‰è¨€åœ¨è¿›è¡Œç‰ˆæœ¬è¿­ä»£çš„æ—¶å€™ï¼Œæ˜¯æ…¢æ…¢è¿›è¡Œè¿ç§»çš„ï¼Œæ‰€ä»¥å¯èƒ½ä¼šæœ‰å¤šç‰ˆæœ¬å…±å­˜ï¼Œè¿™å°±éœ€è¦ä½¿ç”¨ç‰ˆæœ¬æŽ§åˆ¶ã€‚ äºŒ å†…ç½®çš„ç‰ˆæœ¬æŽ§åˆ¶ç±»1234567from rest_framework.versioning import QueryParameterVersioning,AcceptHeaderVersioning,NamespaceVersioning,URLPathVersioning#åŸºäºŽurlçš„getä¼ å‚æ–¹å¼ï¼šQueryParameterVersioning------&gt;å¦‚ï¼š/users?version=v1#åŸºäºŽurlçš„æ­£åˆ™æ–¹å¼ï¼šURLPathVersioning------&gt;/v1/users/#åŸºäºŽ accept è¯·æ±‚å¤´æ–¹å¼ï¼šAcceptHeaderVersioning------&gt;Accept: application/json; version=1.0#åŸºäºŽä¸»æœºåæ–¹æ³•ï¼šHostNameVersioning------&gt;v1.example.com#åŸºäºŽdjangoè·¯ç”±ç³»ç»Ÿçš„namespaceï¼šNamespaceVersioning------&gt;example.com/v1/users/ ä¸‰ å±€éƒ¨ä½¿ç”¨12# åœ¨ views ä¸­åŠ å…¥versioning_class = URLPathVersioning å›› å…¨å±€ä½¿ç”¨123456REST_FRAMEWORK = &#123; 'DEFAULT_VERSIONING_CLASS':'rest_framework.versioning.QueryParameterVersioning', 'DEFAULT_VERSION': 'v1', # é»˜è®¤ç‰ˆæœ¬(ä»Žrequestå¯¹è±¡é‡Œå–ä¸åˆ°ï¼Œæ˜¾ç¤ºçš„é»˜è®¤å€¼) 'ALLOWED_VERSIONS': ['v1', 'v2'], # å…è®¸çš„ç‰ˆæœ¬ 'VERSION_PARAM': 'version' # URLä¸­èŽ·å–å€¼çš„key&#125; äº” ç¤ºä¾‹åŸºäºŽæ­£åˆ™çš„æ–¹å¼ï¼š urls.py 123456from django.conf.urls import url, includefrom web.views import TestViewurlpatterns = [ url(r'^(?P&lt;version&gt;[v1|v2]+)/test/', TestView.as_view(), name='test'),] views.py 12345678910111213141516171819from rest_framework.views import APIViewfrom rest_framework.response import Responsefrom rest_framework.versioning import URLPathVersioningclass TestView(APIView): versioning_class = URLPathVersioning def get(self, request, *args, **kwargs): # èŽ·å–ç‰ˆæœ¬ print(request.version) # èŽ·å–ç‰ˆæœ¬ç®¡ç†çš„ç±» print(request.versioning_scheme) # åå‘ç”ŸæˆURL reverse_url = request.versioning_scheme.reverse('test', request=request) print(reverse_url) return Response('GETè¯·æ±‚ï¼Œå“åº”å†…å®¹') å…­ æºç åˆ†æž12345678910#æ‰§è¡Œdetermine_versionï¼Œè¿”å›žä¸¤ä¸ªå€¼ï¼Œæ”¾åˆ°requestå¯¹è±¡é‡Œversion, scheme = self.determine_version(request, *args, **kwargs)request.version, request.versioning_scheme = version, schemedef determine_version(self, request, *args, **kwargs): #å½“é…ç½®ä¸Šç‰ˆæœ¬ç±»ä¹‹åŽï¼Œå°±ä¼šå®žä¾‹åŒ– if self.versioning_class is None: return (None, None) scheme = self.versioning_class() return (scheme.determine_version(request, *args, **kwargs), scheme)]]></content>
      <categories>
        <category>django-restframework</category>
      </categories>
  </entry>
  <entry>
    <title><![CDATA[django-restframeworkä¹‹è·¯ç”±æŽ§åˆ¶ã€è§£æžå™¨åŠå“åº”å™¨]]></title>
    <url>%2F2019%2F02%2F27%2FDjango-restframework%E4%B9%8B%E8%B7%AF%E7%94%B1%E6%8E%A7%E5%88%B6%E3%80%81%E8%A7%A3%E6%9E%90%E5%99%A8%E5%8F%8A%E5%93%8D%E5%BA%94%E5%99%A8%2F</url>
    <content type="text"><![CDATA[django-restframeworkä¹‹è·¯ç”±æŽ§åˆ¶ã€è§£æžå™¨åŠå“åº”å™¨ä¸€ å‰è¨€æœ¬ç¯‡åšå®¢ä»‹ç» restframework æ¡†æž¶çš„å‰©ä¸‹å‡ ä¸ªç»„ä»¶ï¼Œè·¯ç”±æŽ§åˆ¶æœ‰ä¸‰ç§ï¼šä¼ ç»Ÿè·¯ç”±ã€åŠè‡ªåŠ¨è·¯ç”±åŠå…¨è‡ªåŠ¨è·¯ç”±ï¼›è§£æžå™¨æ˜¯ç”¨æ¥è§£æžè¦å“åº”çš„æ•°æ®æ ¼å¼ï¼Œæ¯”å¦‚æ˜¯form-dataã€jsonã€æˆ–æ˜¯urlencodedç­‰æ•°æ®æ ¼å¼ï¼›å“åº”å™¨æ ¹æ®ç”¨æˆ·è¯·æ±‚ url æˆ–ç”¨æˆ·å¯ä»¥æŽ¥å—çš„æ•°æ®æ ¼å¼æ¥ç­›é€‰å‡ºåˆé€‚çš„æ¸²æŸ“ç»„ä»¶ã€‚ äºŒ è·¯ç”±æŽ§åˆ¶ä¸€ ä¼ ç»Ÿè·¯ç”±urls.py 123456from django.conf.urls import urlfrom app01 import viewsurlpatterns = [ url(r'^books/$', views.BookView.as_view()), url(r'^books/(?P&lt;pk&gt;\d+)$', views.BookDetailView.as_view()),] views.py 12345678910111213141516171819202122232425262728293031323334353637class BookView(APIView): def get(self, request): book_list = models.Book.objects.all() bs = BookSerializers(book_list, many=True) return Response(bs.data) def post(self, request): # æ·»åŠ ä¸€æ¡æ•°æ® print(request.data) bs=BookSerializers(data=request.data) if bs.is_valid(): bs.save() # ç”Ÿæˆè®°å½• return Response(bs.data) else: return Response(bs.errors)class BookDetailView(APIView): def get(self,request,pk): book_obj=models.Book.objects.filter(pk=pk).first() bs=BookSerializers(book_obj,many=False) return Response(bs.data) def put(self,request,pk): book_obj = models.Book.objects.filter(pk=pk).first() bs=BookSerializers(data=request.data,instance=book_obj) if bs.is_valid(): bs.save() # update return Response(bs.data) else: return Response(bs.errors) def delete(self,request,pk): models.Book.objects.filter(pk=pk).delete() return Response("") äºŒ åŠè‡ªåŠ¨è·¯ç”±ï¼ˆè§†å›¾ç±»ç»§æ‰¿ ModelViewSetï¼‰åŽŸç†å°±æ˜¯é‡å†™ as_viewæ–¹æ³•ï¼Œä»¥è‡´å¯ä»¥æ‰¾åˆ°è¯·æ±‚æ–¹æ³•å’Œå“åº”è§†å›¾æ–¹æ³•çš„å¯¹åº”å…³ç³»ã€‚ urls.py 1234567from django.conf.urls import urlfrom app01 import viewsurlpatterns = [ url(r'^publish/$', views.PublishView.as_view(&#123;'get':'list','post':'create'&#125;)), url(r'^publish/(?P&lt;pk&gt;\d+)/$', views.PublishView.as_view(&#123;'get':'retrieve','put':'update','delete':'destroy'&#125;)),] views.py 1234from rest_framework.viewsets import ModelViewSetclass PublishView(ModelViewSet): queryset=models.Publish.objects.all() serializer_class=PublishSerializers ä¸‰ å…¨è‡ªåŠ¨è·¯ç”±ï¼ˆè‡ªåŠ¨ç”Ÿæˆè·¯ç”±ï¼‰urls.py 12345678910111213141516171819from django.conf.urls import url,includefrom app01 import viewsfrom rest_framework import routersrouter=routers.DefaultRouter()# ä¸¤ä¸ªå‚æ•°ï¼Œä¸€ä¸ªæ˜¯åŒ¹é…çš„è·¯ç”±ï¼Œä¸€ä¸ªæ˜¯è§†å›¾ä¸­å†™çš„CBVçš„ç±»router.register('publish',views.PublishView)urlpatterns = [ # http://127.0.0.1:8000/publish/format=json(æ¸²æŸ“å™¨é€šè¿‡è¿™ä¸ªåˆ¤æ–­ï¼Œè¿”å›žæ¸²æŸ“çš„é¡µé¢) # url(r'^publish/', views.PublishView.as_view(&#123;'get':'list','post':'create'&#125;)), # http://127.0.0.1:8000/publish.json(æ¸²æŸ“å™¨é€šè¿‡è¿™ä¸ªåˆ¤æ–­ï¼Œè¿”å›žæ¸²æŸ“çš„é¡µé¢) # url(r'^publish\.(?P&lt;format&gt;\w+)$', views.PublishView.as_view(&#123;'get':'list','post':'create'&#125;)), # å¯ä»¥ç”¨ ä»¥ä¸‹æ–¹å¼è®¿é—® # 1 http://127.0.0.1:8000/publish/ # 2 http://127.0.0.1:8000/publish.json # 3 http://127.0.0.1:8000/publish/3 # 4 http://127.0.0.1:8000/publish/3.json url(r'',include(router.urls))] views.py 1234from rest_framework.viewsets import ModelViewSetclass PublishView(ModelViewSet): queryset=models.Publish.objects.all() serializer_class=PublishSerializers ä¸‰ è§£æžå™¨ä¸€ è§£æžå™¨çš„ä½œç”¨æ ¹æ®è¯·æ±‚å¤´çš„Content-Typeå‚æ•°æ¥é€‰æ‹©å¯¹åº”çš„è§£æžå™¨å¯¹è¯·æ±‚ä½“å†…å®¹è¿›è¡Œå¤„ç†ï¼Œæœ‰application/jsonã€x-www-form-urlencodedã€form-dataç­‰æ ¼å¼ã€‚ äºŒ å…¨å±€ä½¿ç”¨è§£æžå™¨settings.py 12345678REST_FRAMEWORK = &#123; 'DEFAULT_PARSER_CLASSES':[ 'rest_framework.parsers.JSONParser' 'rest_framework.parsers.FormParser' 'rest_framework.parsers.MultiPartParser' ]&#125; urls.py 123urlpatterns = [ url(r'test/', TestView.as_view()),] views.py 12345678910111213141516from rest_framework.views import APIViewfrom rest_framework.response import Responseclass TestView(APIView): def post(self, request, *args, **kwargs): print(request.content_type) # èŽ·å–è¯·æ±‚çš„å€¼ï¼Œå¹¶ä½¿ç”¨å¯¹åº”çš„JSONParserè¿›è¡Œå¤„ç† print(request.data) # application/x-www-form-urlencoded æˆ– multipart/form-dataæ—¶ï¼Œrequest.POSTä¸­æ‰æœ‰å€¼ print(request.POST) print(request.FILES) return Response('POSTè¯·æ±‚ï¼Œå“åº”å†…å®¹') def put(self, request, *args, **kwargs): return Response('PUTè¯·æ±‚ï¼Œå“åº”å†…å®¹') ä¸‰ å±€éƒ¨ä½¿ç”¨è§£æžå™¨ ä»…å¤„ç†è¯·æ±‚å¤´ content-type ä¸º application/json çš„è¯·æ±‚ä½“ urls.py 123456from django.conf.urls import url, includefrom web.views.s5_parser import TestViewurlpatterns = [ url(r'test/', TestView.as_view(), name='test'),] views.py 123456789101112131415161718192021222324from rest_framework.views import APIViewfrom rest_framework.response import Responsefrom rest_framework.request import Requestfrom rest_framework.parsers import JSONParserclass TestView(APIView): # å±€éƒ¨é…ç½®è¯¥å‚æ•° parser_classes = [JSONParser, ] def post(self, request, *args, **kwargs): print(request.content_type) # èŽ·å–è¯·æ±‚çš„å€¼ï¼Œå¹¶ä½¿ç”¨å¯¹åº”çš„JSONParserè¿›è¡Œå¤„ç† print(request.data) # application/x-www-form-urlencoded æˆ– multipart/form-dataæ—¶ï¼Œrequest.POSTä¸­æ‰æœ‰å€¼ print(request.POST) print(request.FILES) return Response('POSTè¯·æ±‚ï¼Œå“åº”å†…å®¹') def put(self, request, *args, **kwargs): return Response('PUTè¯·æ±‚ï¼Œå“åº”å†…å®¹') ä»…å¤„ç†è¯·æ±‚å¤´ content-type ä¸º application/x-www-form-urlencoded çš„è¯·æ±‚ä½“ urls.py 123456from django.conf.urls import url, includefrom web.views import TestViewurlpatterns = [ url(r'test/', TestView.as_view(), name='test'),] views.py 1234567891011121314151617181920212223from rest_framework.views import APIViewfrom rest_framework.response import Responsefrom rest_framework.request import Requestfrom rest_framework.parsers import FormParserclass TestView(APIView): parser_classes = [FormParser, ] def post(self, request, *args, **kwargs): print(request.content_type) # èŽ·å–è¯·æ±‚çš„å€¼ï¼Œå¹¶ä½¿ç”¨å¯¹åº”çš„JSONParserè¿›è¡Œå¤„ç† print(request.data) # application/x-www-form-urlencoded æˆ– multipart/form-dataæ—¶ï¼Œrequest.POSTä¸­æ‰æœ‰å€¼ print(request.POST) print(request.FILES) return Response('POSTè¯·æ±‚ï¼Œå“åº”å†…å®¹') def put(self, request, *args, **kwargs): return Response('PUTè¯·æ±‚ï¼Œå“åº”å†…å®¹') ä»…å¤„ç†è¯·æ±‚å¤´ content-type ä¸º multipart/form-data çš„è¯·æ±‚ä½“ urls.py 123456from django.conf.urls import url, includefrom web.views import TestViewurlpatterns = [ url(r'test/', TestView.as_view(), name='test'),] views.py 123456789101112131415161718192021from rest_framework.views import APIViewfrom rest_framework.response import Responsefrom rest_framework.request import Requestfrom rest_framework.parsers import MultiPartParserclass TestView(APIView): parser_classes = [MultiPartParser, ] def post(self, request, *args, **kwargs): print(request.content_type) # èŽ·å–è¯·æ±‚çš„å€¼ï¼Œå¹¶ä½¿ç”¨å¯¹åº”çš„JSONParserè¿›è¡Œå¤„ç† print(request.data) # application/x-www-form-urlencoded æˆ– multipart/form-dataæ—¶ï¼Œrequest.POSTä¸­æ‰æœ‰å€¼ print(request.POST) print(request.FILES) return Response('POSTè¯·æ±‚ï¼Œå“åº”å†…å®¹') def put(self, request, *args, **kwargs): return Response('PUTè¯·æ±‚ï¼Œå“åº”å†…å®¹') html 12345678910111213141516&lt;!DOCTYPE html&gt;&lt;html lang="en"&gt;&lt;head&gt; &lt;meta charset="UTF-8"&gt; &lt;title&gt;Title&lt;/title&gt;&lt;/head&gt;&lt;body&gt;&lt;form action="http://127.0.0.1:8000/test/" method="post" enctype="multipart/form-data"&gt; &lt;input type="text" name="user" /&gt; &lt;input type="file" name="img"&gt; &lt;input type="submit" value="æäº¤"&gt;&lt;/form&gt;&lt;/body&gt;&lt;/html&gt; ä»…ä¸Šä¼ æ–‡ä»¶ urls.py 123456from django.conf.urls import url, includefrom web.views import TestViewurlpatterns = [ url(r'test/(?P&lt;filename&gt;[^/]+)', TestView.as_view(), name='test'),] views.py 12345678910111213141516171819202122from rest_framework.views import APIViewfrom rest_framework.response import Responsefrom rest_framework.request import Requestfrom rest_framework.parsers import FileUploadParserclass TestView(APIView): parser_classes = [FileUploadParser, ] def post(self, request, filename, *args, **kwargs): print(filename) print(request.content_type) # èŽ·å–è¯·æ±‚çš„å€¼ï¼Œå¹¶ä½¿ç”¨å¯¹åº”çš„JSONParserè¿›è¡Œå¤„ç† print(request.data) # application/x-www-form-urlencoded æˆ– multipart/form-dataæ—¶ï¼Œrequest.POSTä¸­æ‰æœ‰å€¼ print(request.POST) print(request.FILES) return Response('POSTè¯·æ±‚ï¼Œå“åº”å†…å®¹') def put(self, request, *args, **kwargs): return Response('PUTè¯·æ±‚ï¼Œå“åº”å†…å®¹') html 12345678910111213141516&lt;!DOCTYPE html&gt;&lt;html lang="en"&gt;&lt;head&gt; &lt;meta charset="UTF-8"&gt; &lt;title&gt;Title&lt;/title&gt;&lt;/head&gt;&lt;body&gt;&lt;form action="http://127.0.0.1:8000/test/f1.numbers" method="post" enctype="multipart/form-data"&gt; &lt;input type="text" name="user" /&gt; &lt;input type="file" name="img"&gt; &lt;input type="submit" value="æäº¤"&gt;&lt;/form&gt;&lt;/body&gt;&lt;/html&gt; åŒæ—¶å¤šä¸ª parser å½“åŒæ—¶ä½¿ç”¨å¤šä¸ª parser æ—¶ï¼Œrestframework ä¼šæ ¹æ®è¯·æ±‚å¤´ content-ty è‡ªåŠ¨è¿›è¡Œå¯¹åº”ï¼Œå¹¶ä½¿ç”¨ç›¸åº”çš„ parset urls.py 123456from django.conf.urls import url, includefrom web.views import TestViewurlpatterns = [ url(r'test/', TestView.as_view(), name='test'),] views.py 123456789101112131415161718192021from rest_framework.views import APIViewfrom rest_framework.response import Responsefrom rest_framework.request import Requestfrom rest_framework.parsers import JSONParser, FormParser, MultiPartParserclass TestView(APIView): parser_classes = [JSONParser, FormParser, MultiPartParser, ] def post(self, request, *args, **kwargs): print(request.content_type) # èŽ·å–è¯·æ±‚çš„å€¼ï¼Œå¹¶ä½¿ç”¨å¯¹åº”çš„JSONParserè¿›è¡Œå¤„ç† print(request.data) # application/x-www-form-urlencoded æˆ– multipart/form-dataæ—¶ï¼Œrequest.POSTä¸­æ‰æœ‰å€¼ print(request.POST) print(request.FILES) return Response('POSTè¯·æ±‚ï¼Œå“åº”å†…å®¹') def put(self, request, *args, **kwargs): return Response('PUTè¯·æ±‚ï¼Œå“åº”å†…å®¹') å›› è§£æžå™¨æºç åˆ†æžå½“è°ƒç”¨request.dataæ—¶æ‰è¿›è¡Œè§£æžæ•°æ®ï¼Œè¿™é‡Œçš„ request æ˜¯Requestç±»å¯¹è±¡ã€‚ 1. request.data 2. request._load_data_and_files 3. request._parse 4. request._stream 5. self.parsers 6. self.parser_classes self.parser_classeså°±æ˜¯è®¾ç½®åœ¨è§†å›¾ç±»ä¸­çš„ä¸€ä¸ªåˆ—è¡¨ 7. self.negotiator.select_parser æ ¹æ®æ•°æ®æ ¼å¼é€‰æ‹©å¯¹åº”çš„æ•°æ®è§£æžå™¨ 8. self.get_parser_context 9. streamã€media_typeå’Œ self.parser_contextå‡†å¤‡å¥½ ###10. å‡è®¾è¯¥è§£æžå™¨ä¸º JSONParser å›› å“åº”å™¨ä¸€ ä½œç”¨æ ¹æ®ç”¨æˆ·è¯·æ±‚çš„ URL æˆ–ç”¨æˆ·å¯æŽ¥å—çš„æ•°æ®ç±»åž‹ï¼Œç­›é€‰å‡ºåˆé€‚çš„æ¸²æŸ“ç»„ä»¶ã€‚ ç”¨æˆ·è¯·æ±‚ URLï¼š http://127.0.0.1:8000/test/?format=json http://127.0.0.1:8000/test.json äºŒå†…ç½®æ¸²æŸ“å™¨æ˜¾ç¤º json æ ¼å¼ï¼šJSONRenderer è®¿é—® urlï¼š http://127.0.0.1:8000/test/?format=json http://127.0.0.1:8000/test.json http://127.0.0.1:8000/test/ é»˜è®¤æ˜¾ç¤ºæ ¼å¼ï¼šBrowsableAPIRendererï¼ˆå¯ä»¥ä¿®æ”¹ html æ–‡ä»¶ï¼‰ è®¿é—® urlï¼š http://127.0.0.1:8000/test/?format=api http://127.0.0.1:8000/test.api http://127.0.0.1:8000/test/ è¡¨æ ¼æ–¹å¼ï¼šAdminRenderer è®¿é—® urlï¼š http://127.0.0.1:8000/test/format=admin http://127.0.0.1:8000/test.admin http://127.0.0.1:8000/test/ form è¡¨å•æ–¹å¼ï¼šHTMLFormRenderer è®¿é—® urlï¼š http://127.0.0.1:8000/test/?format=form http://127.0.0.1:8000/test.form http://127.0.0.1:8000/test/ ä¸‰ å±€éƒ¨ä½¿ç”¨1234567891011121314151617181920from rest_framework.renderers import HTMLFormRenderer,BrowsableAPIRendererclass BookDetailView(APIView): renderer_classes = [HTMLFormRenderer,BrowsableAPIRenderer ] def get(self,request,pk): book_obj=models.Book.objects.filter(pk=pk).first() bs=BookSerializers(book_obj,many=False) return Response(bs.data) def put(self,request,pk): book_obj = models.Book.objects.filter(pk=pk).first() bs=BookSerializers(data=request.data,instance=book_obj) if bs.is_valid(): bs.save() # update return Response(bs.data) else: return Response(bs.errors) def delete(self,request,pk): models.Book.objects.filter(pk=pk).delete() return Response("") å›› å…¨å±€ä½¿ç”¨123REST_FRAMEWORK = &#123; 'DEFAULT_RENDERER_CLASSES':['rest_framework.renderers.JSONRenderer']&#125; äº” è‡ªå®šä¹‰æ˜¾ç¤ºæ¨¡æ¿views.py 1234567from rest_framework.renderers import TemplateHTMLRendererclass BookDetailView(APIView): renderer_classes = [TemplateHTMLRenderer] def get(self,request,pk): book_obj=models.Book.objects.filter(pk=pk).first() bs=BookSerializers(book_obj,many=False) return Response(bs.data,template_name='aa.html') html 1234567891011&lt;!DOCTYPE html&gt;&lt;html lang="en"&gt;&lt;head&gt; &lt;meta charset="UTF-8"&gt; &lt;title&gt;Title&lt;/title&gt;&lt;/head&gt;&lt;body&gt;&#123;&#123; title &#125;&#125;&#123;&#123; publishDate &#125;&#125;&lt;/body&gt;&lt;/html&gt;]]></content>
      <categories>
        <category>django-restframework</category>
      </categories>
  </entry>
  <entry>
    <title><![CDATA[django-restframeworkä¹‹è§†å›¾ç±»]]></title>
    <url>%2F2019%2F02%2F26%2FDjango-restframework%E4%B9%8B%E8%A7%86%E5%9B%BE%E7%B1%BB%2F</url>
    <content type="text"><![CDATA[django-restframeworkä¹‹è§†å›¾ç»„ä»¶åŠè§„èŒƒåŒ–æŽ¥å£ä¸€ å‰è¨€åœ¨å†™æŽ¥å£çš„æ—¶å€™ï¼Œæ¯”å¦‚å¢žåˆ æŸ¥æ”¹ï¼Œåœ¨èŽ·å–æ‰€æœ‰çš„æ•°æ®ä»¥åŠèŽ·å–å•ä¸ªæ•°æ®æ—¶ï¼Œå…·ä½“çš„ä»£ç é€»è¾‘å‡ ä¹Žå®Œå…¨ä¸€æ ·ï¼Œå°±æ˜¯å‚æ•°ä¸åŒï¼Œæ‰€ä»¥å¯ä»¥é€šè¿‡è§†å›¾ç±»æ¥å‡å°‘ä»£ç å†—ä½™ã€‚ äºŒ è§„èŒƒåŒ–æŽ¥å£åœ¨ä¹‹å‰çš„ä»£ç éƒ½æ˜¯åš if åˆ¤æ–­æ¥è¿›è¡Œä»£ç æ‰§è¡Œçš„é€»è¾‘ï¼Œè€Œå¼ºå£®çš„ä»£ç å¿…ç„¶ä¼šæœ‰ try-except ç”¨æ¥æ•æ‰ç¨‹åºçš„ä¸ç¡®å®šé”™è¯¯ï¼Œè¿™æ ·å¯ä»¥å‡å°‘ä»£ç çš„é”™è¯¯å‘ç”Ÿæ¦‚çŽ‡ã€‚ ä¸‰ åŽŸå§‹ç‰ˆæœ¬æŽ¥å£12345678910111213141516171819202122232425262728293031323334353637383940class Book(APIView): authentication_classes = [authticate_classes.BookAuth] permission_classes = [permiss_classes.LoginPermission] # throttle_classes = [thrott_classes.BookThrottle] throttle_classes = [] # authentication_classes = [] def dispatch(self, request, *args, **kwargs): return super().dispatch(request, *args, **kwargs) def get(self, request, id): print(request.user, '444') response = &#123;'status': 100, 'msg': None&#125; book_obj = models.Book.objects.filter(pk=id).first() if book_obj: book_ser = myser.BookSer(book_obj, many=False) response['book'] = book_ser.data else: response['msg'] = 'å›¾ä¹¦æ²¡æœ‰å¯¹è±¡' response['status'] = 101 return Response(response) def put(self, request, id): response = &#123;'status': 100, 'msg': None&#125; book_obj = models.Book.objects.filter(pk=id).first() book_ser = myser.BookSer(data=request.data, instance=book_obj) # æ–°æ–¹æ³•ï¼Œä½¿ç”¨åºåˆ—åŒ–ç»„ä»¶ä¿å­˜ï¼Œä½†æ˜¯å¿…é¡»æ˜¯ç»§æ‰¿è‡ª ModelSerializer çš„åºåˆ—åŒ–ç±»ï¼Œè¿™æ ·æ‰å¯ä»¥çŸ¥é“è¦ä¿å­˜çš„è¡¨æ¨¡åž‹ if book_ser.is_valid(): # saveæ—¢å¯ä»¥ä¿®æ”¹ä¹Ÿå¯ä»¥æ–°å¢ž book_ser.save() response['book'] = book_ser.data else: response['msg'] = book_ser.errors return Response(response) def delete(self, request, id): response = &#123;'status': 100, 'msg': None&#125; models.Book.objects.filter(pk=id).delete() response['msg'] = 'åˆ é™¤æˆåŠŸ' return Response(response) å›› è§„èŒƒåŒ–æŽ¥å£1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950class Book(APIView): def get(self, request, id): response = MyResponse() try: book = models.Book.objects.get(pk=id) book_ser = BookSerializer(instance=book, many=False) response.book = book_ser.data except ObjectDoesNotExist as e: response.status = 101 response.msg = 'idä¸å­˜åœ¨' except Exception as e: print(e) response.status = 201 # response.msg = 'æ‚¨çš„æ“ä½œæœ‰è¯¯' response.msg = str(e) return Response(response.get_dic) def put(self, request, id): response = MyResponse() try: book = models.Book.objects.get(pk=id) book_ser = BookSerializer(data=request.data, instance=book) if not book_ser.is_valid(): raise Exception('æ•°æ®æ ¡éªŒå¤±è´¥') book_ser.save() response.book = book_ser.data response.msg = 'ä¿®æ”¹æˆåŠŸ' except ObjectDoesNotExist as e: response.status = 101 response.msg = 'idä¸å­˜åœ¨' except Exception as e: print(e) response.status = 201 # response.msg = 'æ‚¨çš„æ“ä½œæœ‰è¯¯' response.msg = str(e) return Response(response.get_dic) def delete(self, request, id): response = MyResponse() try: models.Book.objects.filter(pk=id).delete() response.msg = 'åˆ é™¤æˆåŠŸ' except Exception as e: print(e) response.status = 201 # response.msg = 'æ‚¨çš„æ“ä½œæœ‰è¯¯' response.msg = str(e) return Response(response.get_dic) äº” è§†å›¾ç±»ç›¸å…³ä½¿ç”¨åŽŸç†å°±æ˜¯ restframework æ¡†æž¶å¸®æˆ‘ä»¬å°è£…äº†ä¸€äº›æ–¹æ³•ï¼Œæˆ‘ä»¬åªè¦ä¿®æ”¹æŸäº›é…ç½®å°±å¯ä»¥ä½¿ç”¨å®ƒæä¾›çš„æ–¹æ³•ï¼Œå¯ä»¥å¤§å¤§çš„å‡å°‘ä»£ç çš„å†—ä½™ã€‚ å°è£…ç±»é‡Œé¢éœ€è¦ä½¿ç”¨çš„æ–¹æ³•ï¼š DestroyModelMixin:åˆ é™¤ UpdateModelMixin,:æ›´æ–° RetrieveModelMixin :èŽ·å–ä¸€æ¡ CreateModelMixin:æ–°å¢žä¸€æ¡ ListModelMixin:èŽ·å–æ‰€æœ‰ è¿™å‡ ä¸ªæ–¹æ³•å’Œå¢žåˆ æŸ¥æ”¹çš„æŽ¥å£çš„ä½œç”¨æ˜¯ä¸€æ ·çš„ï¼Œæ‰€ä»¥åªéœ€è¦æŠŠç›¸å…³çš„ model å¯¹è±¡å’Œåºåˆ—åŒ–ç±»ä¼ è¿‡åŽ»å°±å¯ä»¥æ— ç¼è¡”æŽ¥ã€‚ 1. ä½¿ç”¨ mixin ç±»å’Œ generice ç±»ç¼–å†™è§†å›¾12345678910111213141516171819202122from rest_framework.mixins import CreateModelMixin,RetrieveModelMixin,ListModelMixin,UpdateModelMixin,DestroyModelMixinfrom rest_framework.generics import GenericAPIViewclass PublishView(ListModelMixin,CreateModelMixin,GenericAPIView): queryset=models.Publish.objects.all() serializer_class=PublishSerializers def get(self, request): return self.list(request) def post(self, request): return self.create(request)class PublishDetailView(RetrieveModelMixin,UpdateModelMixin, DestroyModelMixin,GenericAPIView): queryset=models.Publish.objects.all() serializer_class=PublishSerializers def get(self,request,*args,**kwargs): return self.retrieve(request,*args,**kwargs) def put(self,request,*args,**kwargs): return self.update(request,*args,**kwargs) def delete(self,request,*args,**kwargs): return self.destroy(request,*args,**kwargs) 2. ä½¿ç”¨ generics ä¸‹çš„ ListCreateAPIView,RetrieveUpdateDestroyAPIView12345678from rest_framework.generics import ListCreateAPIView,RetrieveUpdateDestroyAPIViewclass PublishView(ListCreateAPIView): queryset=models.Publish.objects.all() serializer_class=PublishSerializersclass PublishDetailView(RetrieveUpdateDestroyAPIView): queryset=models.Publish.objects.all() serializer_class=PublishSerializers 3. ä½¿ç”¨ ModelViewSetè·¯ç”±ï¼š 12url(r'^publish/$', views.PublishView.as_view(&#123;'get':'list','post':'create'&#125;)), url(r'^publish/(?P&lt;pk&gt;\d+)/$', views.PublishView.as_view(&#123;'get':'retrieve','put':'update','delete':'destroy'&#125;)), è§†å›¾ï¼š 1234from rest_framework.viewsets import ModelViewSetclass PublishView(ModelViewSet): queryset=models.Publish.objects.all() serializer_class=PublishSerializers æœ€åŽåªå°è£…æˆä¸€ä¸ªè§†å›¾ç±»å°±å¯ä»¥å®žçŽ°ä¸¤å¥—è·¯ç”±ï¼Œå…·ä½“é€»è¾‘å°±æ˜¯as_viewåŽé¢çš„å‚æ•°çš„æ˜ å°„å…³ç³»ï¼Œæœ€åŽå¯ä»¥æ ¹æ® mro åˆ—è¡¨æ¥æŸ¥æ‰¾å¯¹åº”çš„æ‰§è¡Œæ–¹æ³•ã€‚ å…­ ModelViewSet çš„æ‰§è¡Œæµç¨‹1. class ModelViewSet ###2. class GenericViewSet 3. ViewSetMixinä¸­çš„ as_view]]></content>
      <categories>
        <category>django-restframework</category>
      </categories>
  </entry>
  <entry>
    <title><![CDATA[Django-restframeworkä¹‹åˆ†é¡µå™¨ç»„ä»¶]]></title>
    <url>%2F2019%2F02%2F26%2FDjango-restframework%E4%B9%8B%E5%88%86%E9%A1%B5%E5%99%A8%E7%BB%84%E4%BB%B6%2F</url>
    <content type="text"><![CDATA[django-restframeworkä¹‹åˆ†é¡µå™¨ç»„ä»¶ä¸€ å‰è¨€æœ¬ç¯‡åšå®¢ä»‹ç» django-restframework çš„åˆ†é¡µå™¨ç»„ä»¶ï¼Œåœ¨ restframework æ¡†æž¶ä¸­çš„åˆ†é¡µå™¨æœ‰ä¸‰ç§ï¼Œåˆ†åˆ«æ˜¯ç®€å•åˆ†é¡µã€åç§»åˆ†é¡µã€åŠ å¯†åˆ†é¡µï¼ˆurl ç»è¿‡åŠ å¯†ï¼‰ã€‚æŽ¥ä¸‹æ¥åˆ†åˆ«ä»‹ç»ä¸‰ç§åˆ†é¡µå™¨çš„ä½¿ç”¨æ–¹æ³•ã€‚ äºŒ ç®€å•åˆ†é¡µæŸ¥çœ‹ç¬¬ n é¡µï¼Œæ¯é¡µæ˜¾ç¤º n æ¡ã€‚ page_size = api_settings.PAGE_SIZE :æ¯é¡µæ˜¾ç¤ºæ¡æ•°page_query_param = â€˜pageâ€™ :æŸ¥è¯¢çš„é¡µç æ•°page_size_query_param = None :æ¯é¡µæœ€å¤§æ˜¾ç¤ºæ¡æ•° å¦‚æžœæˆ‘è¦çš„æ•°æ®æ˜¯ç¬¬ä¸€é¡µæ˜¾ç¤º10æ¡:http://127.0.0.1:8000/books/?ccc=10&amp;page=1å¦‚æžœæˆ‘è¦çš„æ˜¯ç¬¬äºŒé¡µæ˜¾ç¤º5æ¡:http://127.0.0.1:8000/books/?ccc=5&amp;page=2max_page_size = 8 :æŽ§åˆ¶æœ€å¤§æ˜¾ç¤ºå¤šå°‘æ¡å¦‚æžœæˆ‘æƒ³ç¬¬ä¸€é¡µæ˜¾ç¤º10000æ¡,è¿™ç§ä¸åˆç†,é€šè¿‡è¿™ä¸ªå‚æ•°æŽ§åˆ¶,æœ€å¤§æ˜¾ç¤º8æ¡ä½¿ç”¨: page_sipmle=PageNumberPagination() page_sipmle.page_size=4 â€‹ page_sipmle.page_query_param=â€™aaaâ€™ â€‹ page_sipmle.page_size_query_param=â€™cccâ€™â€‹ page_sipmle.max_page_size=8â€‹ book_list = models.Book.objects.all()â€‹ page_list = page_sipmle.paginate_queryset(book_list,request,self)â€‹ book_ser = BookSerializer(instance=page_list, many=True) 123456789101112131415161718ç®€å•åˆ†é¡µfrom rest_framework.pagination import PageNumberPaginationclass Books(APIView): def get(self, request): response = &#123;'status': 100, 'msg': 'æˆåŠŸ'&#125; # ç”Ÿæˆä¸€ä¸ªPageNumberPaginationçš„å¯¹è±¡ page_sipmle=PageNumberPagination() page_sipmle.page_size=4 # page_sipmle.page_query_param='aaa' page_sipmle.page_size_query_param='ccc' page_sipmle.max_page_size=8 book_list = models.Book.objects.all() page_list = page_sipmle.paginate_queryset(book_list,request,self) book_ser = BookSerializer(instance=page_list, many=True) print(book_ser.data) response['books'] = book_ser.data return Response(response) ä¸‰åç§»åˆ†é¡µdefault_limit = api_settings.PAGE_SIZE :é»˜è®¤åç§»çš„æ¡æ•° 5 limit_query_param = â€˜limitâ€™ :åç§»çš„æ¡æ•° offset_query_param = â€˜offsetâ€™ :æ˜¯æ ‡æ† max_limit = None :æœ€å¤§åç§»çš„æ¡æ•° ä¸¾ä¾‹ -http://127.0.0.1:8000/books/ ç»“æžœæ˜¯:ä»Ž1åˆ°5 -http://127.0.0.1:8000/books/?limit=7 ç»“æžœæ˜¯:ä»Ž1åˆ°7 -http://127.0.0.1:8000/books/?limit=2&amp;offset=6 ç»“æžœæ˜¯:ä»Ž7åˆ°8,ä¸¤æ¡ -http://127.0.0.1:8000/books/?offset=6 ç»“æžœæ˜¯:ä»Ž7åˆ°11,5æ¡ 123456789101112131415# åç§»åˆ†é¡µfrom rest_framework.pagination import LimitOffsetPaginationclass Books(APIView): def get(self, request): response = &#123;'status': 100, 'msg': 'æˆåŠŸ'&#125; # ç”Ÿæˆä¸€ä¸ªPageNumberPaginationçš„å¯¹è±¡ page_limit=LimitOffsetPagination() page_limit.default_limit=6 page_limit.max_limit=5 book_list = models.Book.objects.all() page_list = page_limit.paginate_queryset(book_list,request,self) book_ser = BookSerializer(instance=page_list, many=True) print(book_ser.data) response['books'] = book_ser.data return Response(response) å›› åŠ å¯†åˆ†é¡µæ¸¸æ ‡åˆ†é¡µ:åŽŸç†:é€Ÿåº¦æœ€å¿«,ä½†æ˜¯åªèƒ½å¾€å‰èµ°å’Œå¾€åŽèµ° cursor_query_param = â€˜cursorâ€™ page_size = api_settings.PAGE_SIZE :é»˜è®¤æ¯é¡µæ˜¾ç¤ºçš„æ¡æ•° ordering = â€˜idâ€™ :æŒ‰è°æŽ’åº 12345678910111213141516# åŠ å¯†åˆ†é¡µfrom rest_framework.pagination import CursorPaginationclass Books(APIView): def get(self, request): response = &#123;'status': 100, 'msg': 'æˆåŠŸ'&#125; # ç”Ÿæˆä¸€ä¸ªPageNumberPaginationçš„å¯¹è±¡ page_cursor=CursorPagination() page_cursor.page_size=5 page_cursor.ordering="id" book_list = models.Book.objects.all() page_list = page_cursor.paginate_queryset(book_list,request,self) book_ser = BookSerializer(instance=page_list, many=True) print(book_ser.data) response['books'] = book_ser.data # return Response(response) return page_cursor.get_paginated_response(book_ser.data)]]></content>
      <categories>
        <category>django-restframework</category>
      </categories>
  </entry>
  <entry>
    <title><![CDATA[Python ä¸­çš„ç¼“å­˜]]></title>
    <url>%2F2019%2F02%2F26%2FPython-%E4%B8%AD%E7%9A%84%E7%BC%93%E5%AD%98%2F</url>
    <content type="text"></content>
  </entry>
  <entry>
    <title><![CDATA[requestä¸­çš„ META]]></title>
    <url>%2F2019%2F02%2F26%2Frequest%E4%B8%AD%E7%9A%84-META%2F</url>
    <content type="text"></content>
  </entry>
  <entry>
    <title><![CDATA[Vueï¼ˆä¸‰ï¼‰]]></title>
    <url>%2F2019%2F02%2F26%2FVue%EF%BC%88%E4%B8%89%EF%BC%89%2F</url>
    <content type="text"><![CDATA[Vueç³»åˆ—åšå®¢ï¼ˆä¸‰ï¼‰ä¸€ å‰è¨€æœ¬ç¯‡åšå®¢ä»‹ç» vueé¡¹ç›®çš„æ­å»º äºŒ Vue-CLIé¡¹ç›®æ­å»º1. çŽ¯å¢ƒæ­å»º å®‰è£… node 1å®˜ç½‘ä¸‹è½½å®‰è£…åŒ…ï¼Œå‚»ç“œå¼å®‰è£…ï¼šhttps://nodejs.org/zh-cn/ å®‰è£… cnpm 1npma install -g cnpm --registry=https://registry.npm.taobao.org å®‰è£…è„šæ‰‹æž¶ 1cnpm install -g @vue/cli æ¸…ç©ºç¼“å­˜å¤„ç† 1npm cache clean --force 2. é¡¹ç›®çš„åˆ›å»º åˆ›å»ºé¡¹ç›® 123vue creat é¡¹ç›®å// è¦æå‰è¿›å…¥ç›®æ ‡ç›®å½•(é¡¹ç›®åº”è¯¥åˆ›å»ºåœ¨å“ªä¸ªç›®å½•ä¸‹)// é€‰æ‹©è‡ªå®šä¹‰æ–¹å¼åˆ›å»ºé¡¹ç›®ï¼Œé€‰å–Router, Vuexæ’ä»¶ å¯åŠ¨/åœæ­¢é¡¹ç›® 12npm run serve / ctrl+c// è¦æå‰è¿›å…¥é¡¹ç›®æ ¹ç›®å½• æ‰“åŒ…é¡¹ç›® 12npm run build// è¦åœ¨é¡¹ç›®æ ¹ç›®å½•ä¸‹è¿›è¡Œæ‰“åŒ…æ“ä½œ 3. è®¤è¯†é¡¹ç›® é¡¹ç›®ç›®å½• 123456789101112dist: æ‰“åŒ…çš„é¡¹ç›®ç›®å½•(æ‰“åŒ…åŽä¼šç”Ÿæˆ)node_modules: é¡¹ç›®ä¾èµ–public: å…±ç”¨èµ„æºsrc: é¡¹ç›®ç›®æ ‡,ä¹¦å†™ä»£ç çš„åœ°æ–¹ -- assets:èµ„æº -- components:ç»„ä»¶ -- views:è§†å›¾ç»„ä»¶ -- App.vue:æ ¹ç»„ä»¶ -- main.js: å…¥å£js -- router.js: è·¯ç”±æ–‡ä»¶ -- store.js: çŠ¶æ€åº“æ–‡ä»¶vue.config.js: é¡¹ç›®é…ç½®æ–‡ä»¶(æ²¡æœ‰å¯ä»¥è‡ªå·±æ–°å»º) é…ç½®æ–‡ä»¶ï¼švue.config.js 123456module.exports=&#123; devServer: &#123; port: 8888 &#125;&#125;// ä¿®æ”¹ç«¯å£ main.js 12345678new Vue(&#123; el: "#app", router: router, store: store, render: function (h) &#123; return h(App) &#125;&#125;) .vueæ–‡ä»¶ 1234567891011121314&lt;template&gt; &lt;!-- æ¨¡æ¿åŒºåŸŸ --&gt;&lt;/template&gt;&lt;script&gt; // é€»è¾‘ä»£ç åŒºåŸŸ // è¯¥è¯­æ³•å’Œscriptç»‘å®šå‡ºçŽ° export default &#123; &#125;&lt;/script&gt;&lt;style scoped&gt; /* æ ·å¼åŒºåŸŸ */ /* scopedè¡¨ç¤ºè¿™é‡Œçš„æ ·å¼åªé€‚ç”¨äºŽç»„ä»¶å†…éƒ¨, scopedä¸Žstyleç»‘å®šå‡ºçŽ° */&lt;/style&gt; 4. é¡¹ç›®åŠŸèƒ½ vue-router 123456789101112131415161718192021222324&#123; path: '/', name: 'home', // è·¯ç”±çš„é‡å®šå‘ redirect: '/home'&#125;&#123; // ä¸€çº§è·¯ç”±, åœ¨æ ¹ç»„ä»¶ä¸­è¢«æ¸²æŸ“, æ›¿æ¢æ ¹ç»„ä»¶çš„&lt;router-view/&gt;æ ‡ç­¾ path: '/one-view', name: 'one', component: () =&gt; import('./views/OneView.vue')&#125;&#123; // å¤šçº§è·¯ç”±, åœ¨æ ¹ç»„ä»¶ä¸­è¢«æ¸²æŸ“, æ›¿æ¢æ ¹ç»„ä»¶çš„&lt;router-view/&gt;æ ‡ç­¾ path: '/one-view/one-detail', component: () =&gt; import('./views/OneDetail.vue'), // å­è·¯ç”±, åœ¨æ‰€å±žè·¯ç”±æŒ‡å‘çš„ç»„ä»¶ä¸­è¢«æ¸²æŸ“, æ›¿æ¢è¯¥ç»„ä»¶(OneDetail)çš„&lt;router-view/&gt;æ ‡ç­¾ children: [&#123; path: 'show', component: () =&gt; import('./components/OneShow.vue') &#125;]&#125; 1234567&lt;!-- router-linkæ¸²æŸ“ä¸ºaæ ‡ç­¾ --&gt;&lt;router-link to="/"&gt;Home&lt;/router-link&gt; |&lt;router-link to="/about"&gt;About&lt;/router-link&gt; |&lt;router-link :to="&#123;name: 'one'&#125;"&gt;One&lt;/router-link&gt; |&lt;!-- ä¸ºè·¯ç”±æ¸²æŸ“çš„ç»„ä»¶å ä½ --&gt;&lt;router-view /&gt; 123a.router-link-exact-active &#123; color: #42b983;&#125; 12345// routerçš„é€»è¾‘è½¬è·³this.$router.push('/one-view')// routeré‡‡ç”¨historyæ–¹å¼è®¿é—®ä¸Šä¸€çº§this.$router.go(-1) vuex 12345678910111213141516// åœ¨ä»»ä½•ä¸€ä¸ªç»„ä»¶ä¸­,å‡å¯ä»¥é€šè¿‡this.$store.state.msgè®¿é—®msgçš„æ•°æ®// stateæ°¸è¿œåªèƒ½æ‹¥æœ‰ä¸€ç§çŠ¶æ€å€¼state: &#123; msg: "çŠ¶æ€ç®¡ç†å™¨"&#125;,// è®©stateæ‹¥æœ‰å¤šä¸ªçŠ¶æ€å€¼mutations: &#123; // åœ¨ä¸€ä¸ªä¸€ä¸ªç»„ä»¶ä¸­,å‡å¯ä»¥é€šè¿‡this.$store.commit('setMsg', new_msg)æ¥ä¿®æ”¹stateä¸­çš„msg setMsg(state, new_msg) &#123; state.msg = new_msg &#125;&#125;,// è®©mutationsæ‹¥æœ‰å¤šä¸ªçŠ¶æ€å€¼actions: &#123;&#125; Vue-cookie 123456// å®‰è£…cookieçš„å‘½ä»¤// npm install vue-cookie --save// ä¸ºé¡¹ç›®é…ç½®å…¨å±€vue-cookieimport VueCookie from 'vue-cookie'// å°†æ’ä»¶è®¾ç½®ç»™VueåŽŸåž‹,ä½œä¸ºå…¨å±€çš„å±žæ€§,åœ¨ä»»ä½•åœ°æ–¹éƒ½å¯ä»¥é€šè¿‡this.$cookieè¿›è¡Œè®¿é—®Vue.prototype.$cookie = VueCookie 1234// æŒä¹…åŒ–å­˜å‚¨valçš„å€¼åˆ°cookieä¸­this.$cookie.set('val', this.val)// èŽ·å–cookieä¸­valå­—æ®µå€¼this.$cookie.get('val') axios 12345// å®‰è£… axios(ajax)çš„å‘½ä»¤// npm install axios--save// ä¸ºé¡¹ç›®é…ç½®å…¨å±€axiosimport Axios from 'axios'Vue.prototype.$ajax = Axios 12345678910111213141516let _this = thisthis.$ajax(&#123; method: 'post', url: 'http://127.0.0.1:5000/loginAction', params: &#123; usr: this.usr, ps: this.ps &#125;&#125;).then(function(res) &#123; // thisä»£è¡¨çš„æ˜¯å›žè°ƒthenè¿™ä¸ªæ–¹æ³•çš„è°ƒç”¨è€…(axiosæ’ä»¶),ä¹Ÿå°±æ˜¯å‘ç”Ÿäº†thisçš„é‡æŒ‡å‘ // è¦æ›´æ–°é¡µé¢çš„titleå˜é‡,titleå±žäºŽvueå®žä¾‹ // resä¸ºå›žè°ƒçš„å¯¹è±¡,è¯¥å¯¹è±¡çš„dataå±žæ€§å°±æ˜¯åŽå°è¿”å›žçš„æ•°æ® _this.title = res.data&#125;).catch(function(err) &#123; window.console.log(err)&#125;) 123456789101112131415161718192021222324# ç”¨pycharmå¯åŠ¨è¯¥æ–‡ä»¶æ¨¡æ‹ŸåŽå°from flask import Flask, request, render_templatefrom flask_cors import CORSapp = Flask(__name__)CORS(app, supports_credentials=True)@app.route('/')def index(): return "&lt;h1&gt;ä¸»é¡µ&lt;/h1&gt;"@app.route('/loginAction', methods=['GET', 'POST'])def test_action(): # print(request.args) # print(request.form) # print(request.values) usr = request.args['usr'] ps = request.args['ps'] if usr != 'abc' or ps != '123': return 'login failed' return 'login success'if __name__ == '__main__': app.run()]]></content>
      <categories>
        <category>Vue</category>
      </categories>
  </entry>
  <entry>
    <title><![CDATA[python ä¸­çš„åŒä¸‹åˆ’çº¿æ–¹æ³•ç³»åˆ—]]></title>
    <url>%2F2019%2F02%2F25%2Fpython-%E4%B8%AD%E7%9A%84%E5%8F%8C%E4%B8%8B%E5%88%92%E7%BA%BF%E6%96%B9%E6%B3%95%E7%B3%BB%E5%88%97%2F</url>
    <content type="text"><![CDATA[stræ”¹å˜å¯¹è±¡çš„å­—ç¬¦ä¸²æ˜¾ç¤ºã€‚å¯ä»¥ç†è§£ä¸ºä½¿ç”¨ print å‡½æ•°æ‰“å°ä¸€ä¸ªå¯¹è±¡æ—¶ï¼Œä¼šè‡ªåŠ¨è°ƒç”¨å¯¹è±¡çš„stræ–¹æ³• 123456789101112131415161718class Student: def __init__(self, name, age): self.name = name self.age = age # å®šä¹‰å¯¹è±¡çš„å­—ç¬¦ä¸²è¡¨ç¤º def __str__(self): return self.name s1 = Student('å¼ ä¸‰', 24) print(s1) # ä¼šè°ƒç”¨s1çš„__str__æ–¹æ³• repråœ¨ python è§£é‡Šå™¨çŽ¯å¢ƒä¸‹ï¼Œä¼šé»˜è®¤æ˜¾ç¤ºå¯¹è±¡çš„ repr è¡¨ç¤º 1234567891011121314151617181920&gt;&gt;&gt; class Student: ... def __init__(self, name, age): ... self.name = name ... self.age = age ... def __repr__(self): ... return self.name ... &gt;&gt;&gt; s1 = Student('å¼ ä¸‰', 24) &gt;&gt;&gt; s1 å¼ ä¸‰ æ€»ç»“ï¼š str å‡½æ•°æˆ–è€… print å‡½æ•°è°ƒç”¨çš„æ˜¯ obj.str() repr å‡½æ•°æˆ–è€…äº¤äº’å¼è§£é‡Šå™¨è°ƒç”¨çš„æ˜¯ obj.repr() æ³¨æ„ï¼š å¦‚æžœstræ²¡æœ‰è¢«å®šä¹‰ï¼Œé‚£ä¹ˆå°±ä¼šä½¿ç”¨repræ¥ä»£æ›¿è¾“å‡ºã€‚ strå’Œrepræ–¹æ³•çš„è¿”å›žå€¼å¿…é¡»æ˜¯å­—ç¬¦ä¸²ã€‚ format123456789101112131415161718192021222324252627282930313233343536class Student: def __init__(self, name, age): self.name = name self.age = age __format_dict = &#123; 'n-a': 'åå­—æ˜¯ï¼š&#123;obj.name&#125;-å¹´é¾„æ˜¯ï¼š&#123;obj.age&#125;', # åå­—æ˜¯ï¼šlqz-å¹´é¾„æ˜¯ï¼š18 'n:a': 'åå­—æ˜¯ï¼š&#123;obj.name&#125;ï¼šå¹´é¾„æ˜¯ï¼š&#123;obj.age&#125;', # åå­—æ˜¯ï¼šlqzï¼šå¹´é¾„æ˜¯ï¼š18 'n/a': 'åå­—æ˜¯ï¼š&#123;obj.name&#125;/å¹´é¾„æ˜¯ï¼š&#123;obj.age&#125;', # åå­—æ˜¯ï¼š/å¹´é¾„æ˜¯ï¼š18 &#125; def __format__(self, format_spec): if not format_spec or format_spec not in self.__format_dict: format_spec = 'n-a' fmt = self.__format_dict[format_spec] print(fmt) #&#123;obj.name&#125;:&#123;obj.age&#125; return fmt.format(obj=self) s1 = Student('lqz', 24) ret = format(s1, 'n/a') print(ret) # lqz/24 delæžæž„æ–¹æ³•ï¼Œå½“å¯¹è±¡åœ¨å†…å­˜ä¸­è¢«é‡Šæ”¾æ—¶ï¼Œè‡ªåŠ¨è§¦å‘æ‰§è¡Œã€‚æ­¤æ–¹æ³•ä¸€èˆ¬æ— é¡»å®šä¹‰ï¼Œå› ä¸º python æ˜¯ä¸€é—¨é«˜çº§è¯­è¨€ï¼Œç¨‹åºå‘˜åœ¨ä½¿ç”¨æ—¶æ— éœ€å…³å¿ƒå†…å­˜çš„åˆ†é…å’Œé‡Šæ”¾ï¼Œå› ä¸ºæ­¤å·¥ä½œéƒ½æ˜¯äº¤ç»™ python è§£é‡Šå™¨æ¥æ‰§è¡Œï¼Œæ‰€ä»¥æžæž„å‡½æ•°çš„è°ƒç”¨æ˜¯ç”±è§£é‡Šå™¨åœ¨è¿›è¡Œåžƒåœ¾å›žæ”¶æ—¶è‡ªåŠ¨è§¦å‘æ‰§è¡Œã€‚ 1234567891011121314class A: def __del__(self): print('åˆ é™¤äº†...') a = A() print(a) # &lt;__main__.A object at 0x10164fb00&gt; del a # åˆ é™¤äº†... print(a) # NameError: name 'a' is not defined dictå’Œslotspython ä¸­çš„ç±»ï¼Œéƒ½ä¼šä»Ž object é‡Œç»§æ‰¿ä¸€ä¸ªdictå±žæ€§ï¼Œè¿™ä¸ªå±žæ€§ä¸­å­˜æ”¾ç€ç±»çš„å±žæ€§å’Œæ–¹æ³•å¯¹åº”çš„é”®å€¼å¯¹ã€‚ä¸€ä¸ªç±»å®žä¾‹åŒ–ä¹‹åŽï¼Œè¿™ä¸ªç±»çš„å®žä¾‹ä¹Ÿå…·æœ‰è¿™ä¹ˆä¸€ä¸ªdictå±žæ€§ã€‚ä½†æ˜¯äºŒè€…ä¸ç›¸åŒã€‚ 12345678910111213141516class A: some = 1 def __init__(self, num): self.num = num a = A(10) print(a.__dict__) # &#123;'num': 10&#125; a.age = 10 print(a.__dict__) # &#123;'num': 10, 'age': 10&#125; ä»Žä¸Šé¢çš„ä¾‹å­å¯ä»¥çœ‹å‡ºæ¥ï¼Œå®žä¾‹åªä¿å­˜å®žä¾‹çš„å±žæ€§å’Œæ–¹æ³•ï¼Œç±»çš„å±žæ€§å’Œæ–¹æ³•å®ƒæ˜¯ä¸ä¿å­˜çš„ã€‚æ­£æ˜¯ç”±äºŽç±»å’Œå®žä¾‹æœ‰dictå±žæ€§ï¼Œæ‰€ä»¥ç±»å’Œå®žä¾‹å¯ä»¥åœ¨è¿è¡Œè¿‡ç¨‹åŠ¨æ€æ·»åŠ å±žæ€§å’Œæ–¹æ³•ã€‚ ä½†æ˜¯ç”±äºŽæ¯å®žä¾‹åŒ–ä¸€ä¸ªç±»éƒ½è¦åˆ†é…ä¸€ä¸ªdictå˜é‡ï¼Œå®¹æ˜“æµªè´¹å†…å­˜ã€‚å› æ­¤åœ¨Pythonä¸­æœ‰ä¸€ä¸ªå†…ç½®çš„slotså±žæ€§ã€‚å½“ä¸€ä¸ªç±»è®¾ç½®äº†slotså±žæ€§åŽï¼Œè¿™ä¸ªç±»çš„dictå±žæ€§å°±ä¸å­˜åœ¨äº†ï¼ˆåŒç†ï¼Œè¯¥ç±»çš„å®žä¾‹ä¹Ÿä¸å­˜åœ¨dictå±žæ€§ï¼‰ï¼Œå¦‚æ­¤ä¸€æ¥ï¼Œè®¾ç½®äº†slotså±žæ€§çš„ç±»çš„å±žæ€§ï¼Œåªèƒ½æ˜¯é¢„å…ˆè®¾å®šå¥½çš„ã€‚ å½“ä½ å®šä¹‰slotsåŽï¼Œslotså°±ä¼šä¸ºå®žä¾‹ä½¿ç”¨ä¸€ç§æ›´åŠ ç´§å‡‘çš„å†…éƒ¨è¡¨ç¤ºã€‚å®žä¾‹é€šè¿‡ä¸€ä¸ªå¾ˆå°çš„å›ºå®šå¤§å°çš„å°åž‹æ•°ç»„æ¥æž„å»ºçš„ï¼Œè€Œä¸æ˜¯ä¸ºæ¯ä¸ªå®žä¾‹éƒ½å®šä¹‰ä¸€ä¸ªdictå­—å…¸ï¼Œåœ¨slotsä¸­åˆ—å‡ºçš„å±žæ€§ååœ¨å†…éƒ¨è¢«æ˜ å°„åˆ°è¿™ä¸ªæ•°ç»„çš„ç‰¹å®šç´¢å¼•ä¸Šã€‚ä½¿ç”¨slotså¸¦æ¥çš„å‰¯ä½œç”¨æ˜¯æˆ‘ä»¬æ²¡æœ‰åŠžæ³•ç»™å®žä¾‹æ·»åŠ ä»»ä½•æ–°çš„å±žæ€§äº†ã€‚ æ³¨æ„ï¼šå°½ç®¡slotsçœ‹èµ·æ¥æ˜¯ä¸ªéžå¸¸æœ‰ç”¨çš„ç‰¹æ€§ï¼Œä½†æ˜¯é™¤éžä½ ååˆ†ç¡®åˆ‡çš„çŸ¥é“è¦ä½¿ç”¨å®ƒï¼Œå¦åˆ™å°½é‡ä¸è¦ä½¿ç”¨å®ƒã€‚æ¯”å¦‚å®šä¹‰äº†slotså±žæ€§çš„ç±»å°±ä¸æ”¯æŒå¤šç»§æ‰¿ã€‚slotsé€šå¸¸éƒ½æ˜¯ä½œä¸ºä¸€ç§ä¼˜åŒ–å·¥å…·æ¥ä½¿ç”¨ã€‚â€“æ‘˜è‡ªã€ŠPython Cookbookã€‹8.4 12345678910111213141516class A: __slots__ = ['name', 'age'] a1 = A() # print(a1.__dict__) # AttributeError: 'A' object has no attribute '__dict__' a1.name = 'å¼ ä¸‰' a1.age = 24 # a1.hobby = 'æ³¡å¦ž' # AttributeError: 'A' object has no attribute 'hobby' print(a1.__slots__) æ³¨æ„ï¼š slotsçš„å¾ˆå¤šç‰¹æ€§éƒ½ä¾èµ–äºŽæ™®é€šçš„åŸºäºŽå­—å…¸çš„å®žçŽ°ã€‚ å¦å¤–ï¼Œå®šä¹‰äº†slotsåŽçš„ç±»ä¸å† æ”¯æŒä¸€äº›æ™®é€šç±»ç‰¹æ€§äº†,æ¯”å¦‚å¤šç»§æ‰¿ã€‚å¤§å¤šæ•°æƒ…å†µä¸‹,ä½ åº”è¯¥åªåœ¨é‚£äº›ç»å¸¸è¢«ä½¿ç”¨åˆ°çš„ç”¨ä½œæ•°æ®ç»“æž„çš„ç±»ä¸Šå®šä¹‰slotsï¼Œæ¯”å¦‚åœ¨ç¨‹åºä¸­éœ€è¦åˆ›å»ºæŸä¸ªç±»çš„å‡ ç™¾ä¸‡ä¸ªå®žä¾‹å¯¹è±¡ ã€‚ å…³äºŽslotsçš„ä¸€ä¸ªå¸¸è§è¯¯åŒºæ˜¯å®ƒå¯ä»¥ä½œä¸ºä¸€ä¸ªå°è£…å·¥å…·æ¥é˜²æ­¢ç”¨æˆ·ç»™å®žä¾‹å¢žåŠ æ–°çš„å±žæ€§ã€‚å°½ç®¡ä½¿ç”¨slotså¯ä»¥è¾¾åˆ°è¿™æ ·çš„ç›®çš„,ä½†æ˜¯è¿™ä¸ªå¹¶ä¸æ˜¯å®ƒçš„åˆè¡·ã€‚å®ƒæ›´å¤šçš„æ˜¯ç”¨æ¥ä½œä¸ºä¸€ä¸ªå†…å­˜ä¼˜åŒ–å·¥å…·ã€‚ item1234567891011121314151617181920212223242526272829303132333435363738394041424344class Foo: def __init__(self, name): self.name = name def __getitem__(self, item): print(self.__dict__[item]) def __setitem__(self, key, value): print('obj[key]=lqzèµ‹å€¼æ—¶ï¼Œæ‰§è¡Œæˆ‘') self.__dict__[key] = value def __delitem__(self, key): print('del obj[key]æ—¶ï¼Œæ‰§è¡Œæˆ‘') self.__dict__.pop(key) def __delattr__(self, item): print('del obj.keyæ—¶ï¼Œæ‰§è¡Œæˆ‘') self.__dict__.pop(item) f1 = Foo('sb') print(f1.__dict__) f1['age'] = 18 f1.hobby = 'æ³¡å¦ž' del f1.hobby del f1['age'] f1['name'] = 'lqz' print(f1.__dict__) initä½¿ç”¨Pythonå†™é¢å‘å¯¹è±¡çš„ä»£ç çš„æ—¶å€™æˆ‘ä»¬éƒ½ä¼šä¹ æƒ¯æ€§å†™ä¸€ä¸ª init æ–¹æ³•ï¼Œinit æ–¹æ³•é€šå¸¸ç”¨åœ¨åˆå§‹åŒ–ä¸€ä¸ªç±»å®žä¾‹çš„æ—¶å€™ã€‚ä¾‹å¦‚ï¼š 12345678910111213141516class Person: def __init__(self, name, age): self.name = name self.age = age def __str__(self): return '&lt;Person: &#123;&#125;(&#123;&#125;)&gt;'.format(self.name, self.age) p1 = Person('å¼ ä¸‰', 24) print(p1) ä¸Šé¢æ˜¯initæœ€æ™®é€šçš„ç”¨æ³•äº†ã€‚ä½†æ˜¯initå…¶å®žä¸æ˜¯å®žä¾‹åŒ–ä¸€ä¸ªç±»çš„æ—¶å€™ç¬¬ä¸€ä¸ªè¢«è°ƒç”¨çš„æ–¹æ³•ã€‚å½“ä½¿ç”¨ Persion(name, age) æ¥å®žä¾‹åŒ–ä¸€ä¸ªç±»æ—¶ï¼Œæœ€å…ˆè¢«è°ƒç”¨çš„æ–¹æ³•å…¶å®žæ˜¯ new æ–¹æ³•ã€‚ newå…¶å®žinitæ˜¯åœ¨ç±»å®žä¾‹è¢«åˆ›å»ºä¹‹åŽè°ƒç”¨çš„ï¼Œå®ƒå®Œæˆçš„æ˜¯ç±»å®žä¾‹çš„åˆå§‹åŒ–æ“ä½œï¼Œè€Œ newæ–¹æ³•æ­£æ˜¯åˆ›å»ºè¿™ä¸ªç±»å®žä¾‹çš„æ–¹æ³• 123456789101112131415161718192021222324252627282930class Person: def __new__(cls, *args, **kwargs): print('è°ƒç”¨__new__ï¼Œåˆ›å»ºç±»å®žä¾‹') return super().__new__(Person) def __init__(self, name, age): print('è°ƒç”¨__init__ï¼Œåˆå§‹åŒ–å®žä¾‹') self.name = name self.age = age def __str__(self): return '&lt;Person: &#123;&#125;(&#123;&#125;)&gt;'.format(self.name, self.age) p1 = Person('å¼ ä¸‰', 24) print(p1) è°ƒç”¨__new__ï¼Œåˆ›å»ºç±»å®žä¾‹ è°ƒç”¨__init__ï¼Œåˆå§‹åŒ–å®žä¾‹ &lt;Person: å¼ ä¸‰(24)&gt; newæ–¹æ³•åœ¨ç±»å®šä¹‰ä¸­ä¸æ˜¯å¿…é¡»å†™çš„ï¼Œå¦‚æžœæ²¡å®šä¹‰çš„è¯é»˜è®¤ä¼šè°ƒç”¨object.newåŽ»åˆ›å»ºä¸€ä¸ªå¯¹è±¡ï¼ˆå› ä¸ºåˆ›å»ºç±»çš„æ—¶å€™é»˜è®¤ç»§æ‰¿çš„å°±æ˜¯objectï¼‰ã€‚ å¦‚æžœæˆ‘ä»¬åœ¨ç±»ä¸­å®šä¹‰äº†newæ–¹æ³•ï¼Œå°±æ˜¯é‡å†™äº†é»˜è®¤çš„newæ–¹æ³•ï¼Œæˆ‘ä»¬å¯ä»¥å€Ÿæ­¤è‡ªå®šä¹‰åˆ›å»ºå¯¹è±¡çš„è¡Œä¸ºã€‚ ä¸¾ä¸ªä¾‹å­ï¼š é‡å†™ç±»çš„newæ–¹æ³•æ¥å®žçŽ°å•ä¾‹æ¨¡å¼ã€‚ 1234567891011121314151617181920212223242526class Singleton: # é‡å†™__new__æ–¹æ³•ï¼Œå®žçŽ°æ¯ä¸€æ¬¡å®žä¾‹åŒ–çš„æ—¶å€™ï¼Œè¿”å›žåŒä¸€ä¸ªinstanceå¯¹è±¡ def __new__(cls, *args, **kw): if not hasattr(cls, '_instance'): cls._instance = super().__new__(Singleton) return cls._instance def __init__(self, name, age): self.name = name self.age = age s1 = Singleton('å¼ ä¸‰', 24) s2 = Singleton('æŽå››', 20) print(s1, s2) # è¿™ä¸¤å®žä¾‹éƒ½ä¸€æ · print(s1.name, s2.name) callcall æ–¹æ³•çš„æ‰§è¡Œæ˜¯ç”±å¯¹è±¡åŽåŠ æ‹¬å·è§¦å‘çš„ï¼Œå³ï¼šå¯¹è±¡()ã€‚æ‹¥æœ‰æ­¤æ–¹æ³•çš„å¯¹è±¡å¯ä»¥åƒå‡½æ•°ä¸€æ ·è¢«è°ƒç”¨ã€‚ 12345678910111213141516class Person: def __init__(self, name, age): self.name = name self.age = age def __call__(self, *args, **kwargs): print('è°ƒç”¨å¯¹è±¡çš„__call__æ–¹æ³•') a = Person('å¼ ä¸‰', 24) # ç±»Personå¯è°ƒç”¨ a() # å¯¹è±¡aå¯ä»¥è°ƒç”¨ docå®šä¹‰ç±»çš„æè¿°ä¿¡æ¯ã€‚æ³¨æ„è¯¥ä¿¡æ¯æ— æ³•è¢«ç»§æ‰¿ã€‚ 12345678class A: """æˆ‘æ˜¯Aç±»çš„æè¿°ä¿¡æ¯""" pass print(A.__doc__) iterå’Œnextå¦‚æžœä¸€ä¸ªå¯¹è±¡æ‹¥æœ‰äº†iterï¼Œé‚£è¿™ä¸ªå¯¹è±¡å°±æ˜¯å¯è¿­ä»£å¯¹è±¡ï¼›å¦‚æžœè¿˜æ‹¥æœ‰nexté‚£è¿™ä¸ªå¯¹è±¡å°±æ˜¯è¿­ä»£å™¨ã€‚ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748class A: def __init__(self, start, stop=None): if not stop: start, stop = 0, start self.start = start self.stop = stop def __iter__(self): return self def __next__(self): if self.start &gt;= self.stop: raise StopIteration n = self.start self.start += 1 return n a = A(1, 5) from collections import Iterator print(isinstance(a, Iterator)) for i in A(1, 5): print(i) for i in A(5): print(i) aaa=A(1) print(next(aaa)) print(next(aaa)) #æŠ›å¼‚å¸¸ enterå’Œexitä¸€ä¸ªå¯¹è±¡å¦‚æžœå®žçŽ°äº†enterå’Œ_exitæ–¹æ³•ï¼Œé‚£ä¹ˆè¿™ä¸ªå¯¹è±¡å°±æ”¯æŒä¸Šä¸‹æ–‡ç®¡ç†åè®®ï¼Œå³withè¯­å¥ 123456789101112131415161718192021222324252627282930class A: def __enter__(self): print('è¿›å…¥withè¯­å¥å—æ—¶æ‰§è¡Œæ­¤æ–¹æ³•ï¼Œæ­¤æ–¹æ³•å¦‚æžœæœ‰è¿”å›žå€¼ä¼šèµ‹å€¼ç»™aså£°æ˜Žçš„å˜é‡') return 'oo' def __exit__(self, exc_type, exc_val, exc_tb): print('é€€å‡ºwithä»£ç å—æ—¶æ‰§è¡Œæ­¤æ–¹æ³•') print('1', exc_type) print('2', exc_val) print('3', exc_tb) with A() as f: print('è¿›å…¥withè¯­å¥å—') # withè¯­å¥ä¸­ä»£ç å—å‡ºçŽ°å¼‚å¸¸ï¼Œåˆ™withåŽçš„ä»£ç éƒ½æ— æ³•æ‰§è¡Œã€‚ # raise AttributeError('sb') print(f) #fæ‰“å°å‡ºoo print('å˜¿å˜¿å˜¿') ä¸Šä¸‹æ–‡ç®¡ç†åè®®é€‚ç”¨äºŽé‚£äº›è¿›å…¥å’Œé€€å‡ºä¹‹åŽè‡ªåŠ¨æ‰§è¡Œä¸€äº›ä»£ç çš„åœºæ™¯ï¼Œæ¯”å¦‚æ–‡ä»¶ã€ç½‘ç»œè¿žæŽ¥ã€æ•°æ®åº“è¿žæŽ¥æˆ–ä½¿ç”¨é”çš„ç¼–ç åœºæ™¯ç­‰ã€‚ lenæ‹¥æœ‰lenæ–¹æ³•çš„å¯¹è±¡æ”¯æŒlen(obj)æ“ä½œã€‚ 12345678910111213141516class A: def __init__(self): self.x = 1 self.y = 2 def __len__(self): return len(self.__dict__) a = A() print(len(a)) hashæ‹¥æœ‰hashæ–¹æ³•çš„å¯¹è±¡æ”¯æŒhash(obj)æ“ä½œã€‚ 12345678910111213141516class A: def __init__(self): self.x = 1 self.x = 2 def __hash__(self): return hash(str(self.x) + str(self.x)) a = A() print(hash(a)) eqæ‹¥æœ‰eqæ–¹æ³•çš„å¯¹è±¡æ”¯æŒç›¸ç­‰çš„æ¯”è¾ƒæ“ä½œ 12345678910111213141516171819202122232425262728class A: def __init__(self,x,y): self.x = x self.y = y def __eq__(self,obj): # æ‰“å°å‡ºæ¯”è¾ƒçš„ç¬¬äºŒä¸ªå¯¹è±¡çš„xå€¼ print(obj.x) if self.x +self.y == obj.x+obj.y: return True else: return False a = A(1,2) b = A(2,1) print(a == b)]]></content>
      <categories>
        <category>python</category>
      </categories>
  </entry>
  <entry>
    <title><![CDATA[djangoçš„é…ç½®åŠ è½½æµç¨‹]]></title>
    <url>%2F2019%2F02%2F25%2FDjango%E7%9A%84%E9%85%8D%E7%BD%AE%E5%8A%A0%E8%BD%BD%E6%B5%81%E7%A8%8B%2F</url>
    <content type="text"></content>
  </entry>
  <entry>
    <title><![CDATA[importlibæ¨¡å—çš„ä½¿ç”¨]]></title>
    <url>%2F2019%2F02%2F25%2Fimportlib%E6%A8%A1%E5%9D%97%E7%9A%84%E4%BD%BF%E7%94%A8%2F</url>
    <content type="text"></content>
  </entry>
  <entry>
    <title><![CDATA[Django-restframeworkä¹‹é¢‘çŽ‡ç»„ä»¶æºç åˆ†æž]]></title>
    <url>%2F2019%2F02%2F25%2FDjango-restframework%E4%B9%8B%E9%A2%91%E7%8E%87%E7%BB%84%E4%BB%B6%E6%BA%90%E7%A0%81%E5%88%86%E6%9E%90%2F</url>
    <content type="text"><![CDATA[Django-restframework ä¹‹é¢‘çŽ‡æºç åˆ†æžä¸€ å‰è¨€ç»è¿‡æƒé™åˆ¤æ–­ä¹‹åŽå°±æ˜¯è¿›è¡Œé¢‘çŽ‡çš„åˆ¤æ–­äº†ï¼Œè€Œé¢‘çŽ‡çš„åˆ¤æ–­å’Œæƒé™åˆä¸ä¸€æ ·ï¼Œè®¤è¯ã€æƒé™å’Œé¢‘çŽ‡çš„æ‰§è¡Œæµç¨‹éƒ½å·®ä¸å¤šï¼Œä½¿ç”¨é…ç½®é‡Œé¢çš„ç›¸å…³ç±»æ¥è¿›è¡Œåˆ¤æ–­ã€‚è€Œä¸å’Œè®¤è¯å’Œæƒé™ä¸€æ ·ï¼Œé¢‘çŽ‡çš„é…ç½®æ²¡æœ‰ï¼ŒæŸ¥çœ‹APIViewçš„ç±»å±žæ€§å¦‚ä¸‹ï¼š äºŒ é¢‘çŽ‡ç»„ä»¶æ‰§è¡Œæµç¨‹è™½ç„¶restframeworkåŽŸç”Ÿç­æœ‰é…ç½®é¢‘çŽ‡ï¼Œä½†æ˜¯æä¾›äº†å‡ ä¸ªè¿›è¡Œé¢‘çŽ‡åˆ¤æ–­çš„ç±»ï¼Œå¦‚ä¸‹ï¼š å…¶ä¸­SimpleRateThrottleç±»æ˜¯æ ¹æ®è®¿é—®è€… ip æ¥è¿›è¡Œé¢‘çŽ‡é™åˆ¶çš„ä¸€ä¸ªç±»ï¼Œæ¥çœ‹çœ‹è¿™ä¸ªç±»çš„æ‰§è¡Œæµç¨‹ã€‚ 1. initæ–¹æ³• 2. get_rate 3. æ‰§è¡Œ allow_requestæ–¹æ³• 4. get_cache_key 5. æ—¶é—´å·®åˆ¤æ–­ 6. throttle_success è®¤è¯å¤±è´¥çš„è¯æ‰§è¡Œthrottle_failureï¼Œå…¶å®žå°±æ˜¯è¿”å›žFalseã€‚ 7. wait ä¸‰ è‡ªå®šä¹‰é¢‘çŽ‡ç»„ä»¶1. è‡ªå®šä¹‰é¢‘çŽ‡ç±»é¢‘çŽ‡ç±»éœ€è¦ç»§æ‰¿è‡ªå¸¦çš„é¢‘çŽ‡ç±» 12345678910111213141516171819202122232425262728293031323334# from rest_framework.throttling import BaseThrottleclass BookThrottle(BaseThrottle): VISIT_RECORD = &#123;&#125; def __init__(self): self.history = None def allow_request(self, request, view): print(request.META) REMOTE_ADDR = request.META.get('REMOTE_ADDR') import time ctime = time.time() if REMOTE_ADDR not in self.VISIT_RECORD: self.VISIT_RECORD[REMOTE_ADDR] = [ctime,] return True self.history = self.VISIT_RECORD.get(REMOTE_ADDR) while self.history and ctime - self.history[-1] &gt; 60: self.history.pop() if len(self.history) &lt; 3: self.history.insert(0, ctime) return True else: return False def wait(self): import time ctime = time.time() return 60 - (ctime - self.history[-1]) 1234567891011121314151617181920212223242526272829303132# é¢‘çŽ‡ç±»ä»£ç æ³¨é‡Š # è®¿é—®é¢‘çŽ‡çš„é€»è¾‘# # &#123;'ipåœ°å€':[16:13:39,16:13:19,],'ipåœ°å€2':[æ—¶é—´1,æ—¶é—´2],&#125;# # ï¼ˆ1ï¼‰å–å‡ºè®¿é—®è€…ip# # ï¼ˆ2ï¼‰åˆ¤æ–­å½“å‰ipä¸åœ¨è®¿é—®å­—å…¸é‡Œï¼Œæ·»åŠ è¿›åŽ»ï¼Œå¹¶ä¸”ç›´æŽ¥è¿”å›žTrue,è¡¨ç¤ºç¬¬ä¸€æ¬¡è®¿é—®ï¼Œåœ¨å­—å…¸é‡Œï¼Œç»§ç»­å¾€ä¸‹èµ°# # ï¼ˆ3ï¼‰å¾ªçŽ¯åˆ¤æ–­å½“å‰ipçš„åˆ—è¡¨ï¼Œæœ‰å€¼ï¼Œå¹¶ä¸”å½“å‰æ—¶é—´å‡åŽ»åˆ—è¡¨çš„æœ€åŽä¸€ä¸ªæ—¶é—´å¤§äºŽ60sï¼ŒæŠŠè¿™ç§æ•°æ®popæŽ‰ï¼Œè¿™æ ·åˆ—è¡¨ä¸­åªæœ‰60sä»¥å†…çš„è®¿é—®æ—¶é—´ï¼Œ# # ï¼ˆ4ï¼‰åˆ¤æ–­ï¼Œå½“åˆ—è¡¨å°äºŽ3ï¼Œè¯´æ˜Žä¸€åˆ†é’Ÿä»¥å†…è®¿é—®ä¸è¶³ä¸‰æ¬¡ï¼ŒæŠŠå½“å‰æ—¶é—´æ’å…¥åˆ°åˆ—è¡¨ç¬¬ä¸€ä¸ªä½ç½®ï¼Œè¿”å›žTrueï¼Œé¡ºåˆ©é€šè¿‡# # ï¼ˆ5ï¼‰å½“å¤§äºŽç­‰äºŽ3ï¼Œè¯´æ˜Žä¸€åˆ†é’Ÿå†…è®¿é—®è¶…è¿‡ä¸‰æ¬¡ï¼Œè¿”å›žFalseéªŒè¯å¤±è´¥# #ï¼ˆ1ï¼‰å–å‡ºè®¿é—®è€…ip# # print(request.META)# # REMOTE_ADDR å°±æ˜¯è®¿é—®è€…çš„ip:127.0.0.1# ip=request.META.get('REMOTE_ADDR')# import time# # èŽ·å–å½“å‰æ—¶é—´# ctime=time.time()# # ï¼ˆ2ï¼‰åˆ¤æ–­å½“å‰ipä¸åœ¨è®¿é—®å­—å…¸é‡Œï¼Œæ·»åŠ è¿›åŽ»ï¼Œå¹¶ä¸”ç›´æŽ¥è¿”å›žTrue,è¡¨ç¤ºç¬¬ä¸€æ¬¡è®¿é—®# if ip not in self.VISIT_RECORD:# self.VISIT_RECORD[ip]=[ctime,]# # &#123;'127.0.0.1':[æ—¶é—´1,æ—¶é—´1,]&#125;# return True# # self.history=[æ—¶é—´1,æ—¶é—´1,]# self.history=self.VISIT_RECORD.get(ip)# # ï¼ˆ3ï¼‰å¾ªçŽ¯åˆ¤æ–­å½“å‰ipçš„åˆ—è¡¨ï¼Œæœ‰å€¼ï¼Œå¹¶ä¸”å½“å‰æ—¶é—´å‡åŽ»åˆ—è¡¨çš„æœ€åŽä¸€ä¸ªæ—¶é—´å¤§äºŽ60sï¼ŒæŠŠè¿™ç§æ•°æ®popæŽ‰ï¼Œè¿™æ ·åˆ—è¡¨ä¸­åªæœ‰60sä»¥å†…çš„è®¿é—®æ—¶é—´ï¼Œ# while self.history and ctime-self.history[-1]&gt;60:# self.history.pop()# # ï¼ˆ4ï¼‰åˆ¤æ–­ï¼Œå½“åˆ—è¡¨å°äºŽ3ï¼Œè¯´æ˜Žä¸€åˆ†é’Ÿä»¥å†…è®¿é—®ä¸è¶³ä¸‰æ¬¡ï¼ŒæŠŠå½“å‰æ—¶é—´æ’å…¥åˆ°åˆ—è¡¨ç¬¬ä¸€ä¸ªä½ç½®ï¼Œè¿”å›žTrueï¼Œé¡ºåˆ©é€šè¿‡# # ï¼ˆ5ï¼‰å½“å¤§äºŽç­‰äºŽ3ï¼Œè¯´æ˜Žä¸€åˆ†é’Ÿå†…è®¿é—®è¶…è¿‡ä¸‰æ¬¡ï¼Œè¿”å›žFalseéªŒè¯å¤±è´¥# if len(self.history)&lt;3:# self.history.insert(0,ctime)# return True# else:# return False 2. ä½¿ç”¨ä½¿ç”¨å¾ˆç®€å•ï¼Œåœ¨éœ€è¦è¿›è¡Œé¢‘çŽ‡æŽ§åˆ¶çš„è§†å›¾ç±»ä¸­å®šä¹‰ä¸€ä¸ªå±žæ€§throttle_classesï¼Œå¦‚ä¸‹ï¼š 1234567891011121314151617181920class Book(APIView): authentication_classes = [authticate_classes.BookAuth] permission_classes = [permiss_classes.LoginPermission] throttle_classes = [thrott_classes.BookThrottle] # authentication_classes = [] def dispatch(self, request, *args, **kwargs): return super().dispatch(request, *args, **kwargs) def get(self, request, id): print(request.user, '444') response = &#123;'status': 100, 'msg': None&#125; book_obj = models.Book.objects.filter(pk=id).first() if book_obj: book_ser = myser.BookSer(book_obj, many=False) response['book'] = book_ser.data else: response['msg'] = 'å›¾ä¹¦æ²¡æœ‰å¯¹è±¡' response['status'] = 101 return Response(response) å›› é…ç½®è‡ªå®šä¹‰é¢‘çŽ‡ç±»1. å±€éƒ¨é…ç½®å…¶å®žä¸Šé¢çš„å°±æ˜¯å±€éƒ¨é…ç½®ï¼Œ 1234class Book(APIView): authentication_classes = [authticate_classes.BookAuth] permission_classes = [permiss_classes.LoginPermission] throttle_classes = [thrott_classes.BookThrottle] 2. å…¨å±€ä½¿ç”¨å…¨å±€é…ç½®å¦‚ä¸‹ï¼š 123REST_FRAMEWORK=&#123; 'DEFAULT_THROTTLE_CLASSES': ['app01.thrott_classes.BookThrottle']&#125; 3. å±€éƒ¨ç¦ç”¨å±€éƒ¨ç¦ç”¨éœ€è¦åœ¨è§†å›¾ç±»ä¸­å®šä¹‰ä¸€ä¸ªç©ºçš„throttle_classeså±žæ€§ 1throttle_classes = []]]></content>
      <categories>
        <category>django-restframework</category>
      </categories>
  </entry>
  <entry>
    <title><![CDATA[Django-restframeworkä¹‹æƒé™ç»„ä»¶æºç åˆ†æž]]></title>
    <url>%2F2019%2F02%2F25%2FDjango-restframework%E4%B9%8B%E6%9D%83%E9%99%90%E7%BB%84%E4%BB%B6%E6%BA%90%E7%A0%81%E5%88%86%E6%9E%90%2F</url>
    <content type="text"><![CDATA[Django-restframework ä¹‹æƒé™æºç åˆ†æžä¸€ å‰è¨€ä¸Šç¯‡åšå®¢åˆ†æžäº† restframework æ¡†æž¶çš„è®¤è¯ç»„ä»¶çš„æ‰§è¡Œäº†æµç¨‹å¹¶è‡ªå®šä¹‰äº†è®¤è¯ç±»ã€‚è¿™ç¯‡åšå®¢åˆ†æž restframework çš„æƒé™ç»„ä»¶æ‰§è¡Œæµç¨‹ã€‚å…¥å£å‡½æ•°ä¾ç„¶æ˜¯APIView.initialã€‚ æƒé™çš„åˆ¤æ–­æ˜¯åœ¨ç”¨æˆ·è®¤è¯ä¹‹åŽè¿›è¡Œçš„ï¼Œrestframework æ¡†æž¶é‡Œé¢çš„è‡ªå¸¦çš„è®¤è¯å®žçŽ°çš„åŠŸèƒ½å¾ˆç®€å•ï¼Œå¦‚ä¸‹ï¼š è¿™ä¸ªæ–¹æ³•é€šå¸¸æ¥è®²ä¼šæ ¹æ®éœ€æ±‚å®šåˆ¶ï¼Œè¯¥æ–¹æ³•æ‰§è¡Œç»“æŸåŽæ‚”è¿”å›žç”¨æˆ·ä¿¡æ¯å’Œå…¶ä»–æ•°æ®ï¼Œæ ¹æ®éœ€æ±‚ï¼Œåœ¨ä¸Šç¯‡åšå®¢æˆ‘è¿”å›žäº†ç”¨æˆ·å¯¹è±¡å’Œ token å€¼ã€‚ æœ¬æ¥è¿™äº›åº”è¯¥åœ¨ä¸Šç¯‡åšå®¢ç»“æŸçš„ï¼Œä¸»è¦æ˜¯å› ä¸ºä»Šå¤©å­¦ä¹ æƒé™ç»„ä»¶æ—¶åˆæƒ³åˆ°æœ‰äº›é—æ¼æ‰€ä»¥åœ¨è¿™é‡Œè¡¥å……ã€‚ äºŒ æƒé™ç»„ä»¶æ‰§è¡Œæµç¨‹APIView.perform_authentication()æ–¹æ³•ç»“æŸï¼Œå…¶å®žæ˜¯æ ¹æ®mroåˆ—è¡¨æ‰¾åˆ°çš„ã€‚æŽ¥ä¸‹æ¥æ‰§è¡ŒAPIView.check_permissions()æ–¹æ³•ï¼Œrestframework æ¡†æž¶è‡ªå¸¦çš„æƒé™ç±»ç›¸å½“äºŽæ²¡æœ‰ï¼Œå› ä¸ºæ‰€æœ‰éœ€è¦è¿›è¡Œæƒé™è®¤è¯çš„éƒ½æ˜¯è¿”å›ž Trueï¼Œæ‰€ä»¥è¿™ä¸ªä¹Ÿéœ€è¦æ ¹æ®å®žé™…éœ€æ±‚æ¥å®šåˆ¶ã€‚ 1. æ‰§è¡Œ APIView.check_permissionså…¶å®žå¥—è·¯å’Œè®¤è¯ç»„ä»¶å¾ˆç›¸ä¼¼ 2. æ‰§è¡ŒAPIView.get_permission å¯¹æ¯”æƒé™å’Œè®¤è¯çš„æŸ¥æ‰¾ç›¸å…³ç±»çš„æµç¨‹å¯ä»¥å‘çŽ°è®¤è¯ç±»æ˜¯åœ¨å®žä¾‹åŒ–Requestå¯¹è±¡æ—¶å°±æŠŠè®¤è¯ç±»èŽ·å–å½“ä½œå‚æ•°ä¼ è¿›åŽ»äº†ï¼Œè€Œæƒé™ç±»å¹¶æ²¡æœ‰ã€‚çŒœæµ‹ restframework æ¡†æž¶åªè¦éœ€è¦è¿›è¡Œç”¨æˆ·è®¤è¯ï¼Œæ‰€ä»¥è™½ç„¶è®¤è¯å†™çš„åŠŸèƒ½ä¹Ÿä¸å®Œå–„ï¼Œä½†æ˜¯è¿˜æ˜¯å¿…è¦çš„ï¼Œè€Œæƒé™ç›¸å…³çš„è®¤è¯å’Œå®žé™…éœ€æ±‚æœ‰å…³ï¼Œæ‰€ä»¥å°±æ²¡æœ‰è¿™ä¹ˆéº»çƒ¦ï¼ŒçŒœæµ‹é¢‘çŽ‡ä¹Ÿä¸€æ ·ï¼Œä¹Ÿéœ€è¦è‡ªå·±é‡å†™å’Œé…ç½®ã€‚ 3. æ‰§è¡ŒAPIView.permission_classes ç»è¿‡è¿™å‡ æ­¥å°±å¯ä»¥æ‰¾åˆ°æƒé™ç±» ä¸‰ è‡ªå®šä¹‰æƒé™ç»„ä»¶å…¶å®žåŸºæœ¬æ­¥éª¤å’Œè®¤è¯ç»„ä»¶ä¸€æ · 1. views.py1from app01 import permiss_classes 2. permiss_classes.py123456789101112from rest_framework.permissions import BasePermissionclass LoginPermission(BasePermission): def has_permission(self, request, view): print(request.user, 'guanjian') user = request.user if user.user_type == 1: return True return False 3. ä½¿ç”¨åªè¦ç”¨æˆ·æƒé™æ»¡è¶³æ‰èƒ½èŽ·å–ç›¸å…³ä¿¡æ¯ï¼Œæ‰€ä»¥åœ¨ç”¨æˆ·è¡¨ä¸­åŠ äº†ä¸ªå­—æ®µç”¨æ¥æ ‡è¯†ç”¨æˆ·æƒé™çš„ 123456789101112# models.pyclass UserInfo(models.Model): nid = models.AutoField(primary_key=True) name = models.CharField(max_length=32) password = models.CharField(max_length=32) age = models.IntegerField() gender = models.SmallIntegerField() book = models.ManyToManyField(to='Book', through='User2Book', through_fields=('user', 'book')) user_choice = ((0, 'å°ç¦ç”¨æˆ·'), (1, 'æ™®é€šç”¨æˆ·'), (2, 'è¶…çº§ç”¨æˆ·')) user_type = models.IntegerField(default=0, choices=user_choice) å®Œæ•´çš„ models.py 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768697071727374757677787980818283848586878889from django.db import models# Create your models here.# book_obj.author.set(*[])# class UserToken(models.Model):# nid = models.AutoField(primary_key=True)# user = models.OneToOneField(to='UserInfo', default=1)# token = models.CharField(max_length=64, default='123456')class UserInfo(models.Model): nid = models.AutoField(primary_key=True) name = models.CharField(max_length=32) password = models.CharField(max_length=32) age = models.IntegerField() gender = models.SmallIntegerField() book = models.ManyToManyField(to='Book', through='User2Book', through_fields=('user', 'book')) user_choice = ((0, 'å°ç¦ç”¨æˆ·'), (1, 'æ™®é€šç”¨æˆ·'), (2, 'è¶…çº§ç”¨æˆ·')) user_type = models.IntegerField(default=0, choices=user_choice) def __str__(self): return self.name class Meta: verbose_name = 'ç”¨æˆ·è¡¨' verbose_name_plural = verbose_name# ç”¨æˆ·æ‹¥æœ‰çš„å›¾ä¹¦è¡¨ï¼Œå› ä¸ºæ˜¯å¤šå¯¹å¤šå…³ç³»ï¼Œæ‰€ä»¥æ˜¯ä¸­é—´è¡¨class User2Book(models.Model): nid = models.AutoField(primary_key=True) user = models.ForeignKey(to='UserInfo') book = models.ForeignKey(to='Book')class Book(models.Model): nid = models.AutoField(primary_key=True) name = models.CharField(max_length=32) price = models.IntegerField() publish = models.ForeignKey(to='Publish', to_field='nid') pub_date = models.DateTimeField(auto_now_add=True) author = models.ManyToManyField(to='Author', through='Book2Author', through_fields=('book', 'author')) def __str__(self): return self.name class Meta: verbose_name = 'å›¾ä¹¦è¡¨' verbose_name_plural = verbose_nameclass Publish(models.Model): nid = models.AutoField(primary_key=True) name = models.CharField(max_length=32) email = models.EmailField() class Meta: verbose_name = 'å‡ºç‰ˆç¤¾è¡¨' verbose_name_plural = verbose_name def __str__(self): return self.nameclass Author(models.Model): nid = models.AutoField(primary_key=True) name = models.CharField(max_length=32) phone = models.CharField(max_length=32, default=15764503613) class Meta: verbose_name = 'ä½œè€…è¡¨' verbose_name_plural = verbose_name def __str__(self): return self.nameclass Book2Author(models.Model): nid = models.AutoField(primary_key=True) book = models.ForeignKey(to='Book', to_field='nid') author = models.ForeignKey(to='Author', to_field='nid') class Meta: verbose_name = 'å›¾ä¹¦ä½œè€…è¡¨' verbose_name_plural = verbose_name å›› é…ç½®è‡ªå®šä¹‰æƒé™ç±»1. å±€éƒ¨é…ç½®å‡è®¾åœ¨ç”¨æˆ·è®¤è¯é€šè¿‡åŽéœ€è¦åˆ¤æ–­ç”¨æˆ·çš„æƒé™ï¼Œé‚£ä¹ˆéœ€è¦åœ¨è¯¥è§†å›¾ç±»ä¸­å®šä¹‰ä¸€ä¸ªå‚æ•°permission_classes 123456789101112131415161718192021class Book(APIView): authentication_classes = [authticate_classes.BookAuth] permission_classes = [permiss_classes.LoginPermission] # authentication_classes = [] def dispatch(self, request, *args, **kwargs): return super().dispatch(request, *args, **kwargs) def get(self, request, id): print(request.user, '444') response = &#123;'status': 100, 'msg': None&#125; book_obj = models.Book.objects.filter(pk=id).first() if book_obj: book_ser = myser.BookSer(book_obj, many=False) response['book'] = book_ser.data else: response['msg'] = 'å›¾ä¹¦æ²¡æœ‰å¯¹è±¡' response['status'] = 101 return Response(response) 2. å…¨å±€ä½¿ç”¨å…¨å±€ä½¿ç”¨çš„è¯éœ€è¦åœ¨é¡¹ç›®çš„ settings ä¸­é…ç½®ï¼Œå¦‚ä¸‹ï¼š 123REST_FRAMEWORK=&#123; 'DEFAULT_PERMISSION_CLASSES': ['app01.permiss_classes.LoginPermission']&#125; 3. å±€éƒ¨ç¦ç”¨å±€éƒ¨ç¦ç”¨éœ€è¦åœ¨è§†å›¾ç±»ä¸­å®šä¹‰ä¸€ä¸ªç©ºçš„permission_classes 1permission_classes = []]]></content>
      <categories>
        <category>django-restframework</category>
      </categories>
  </entry>
  <entry>
    <title><![CDATA[Django-restframeworkä¹‹è®¤è¯ç»„ä»¶æºç åˆ†æž]]></title>
    <url>%2F2019%2F02%2F25%2FDjango-restframework%E4%B9%8B%E8%AE%A4%E8%AF%81%E7%BB%84%E4%BB%B6%E6%BA%90%E7%A0%81%E5%88%86%E6%9E%90%2F</url>
    <content type="text"><![CDATA[Django-restframework æºç ä¹‹è®¤è¯ç»„ä»¶æºç åˆ†æžä¸€ å‰è¨€ä¹‹å‰åœ¨ Django-restframework çš„æµç¨‹åˆ†æžåšå®¢ä¸­ï¼ŒæŠŠæœ€é‡è¦çš„å…³äºŽè®¤è¯ã€æƒé™å’Œé¢‘çŽ‡çš„æ–¹æ³•æ‰¾åˆ°äº†ã€‚è¯¥æ–¹æ³•æ˜¯ APIView çš„ä¸€ä¸ªåä¸ºinitialçš„ç±»æ–¹æ³•ï¼Œä¹Ÿå°±æ˜¯åœ¨ views ä¸­å®šä¹‰çš„è§†å›¾ç±»æ–¹æ³•ï¼Œç»§æ‰¿è‡ªAPIViewæ–¹æ³•ã€‚è¯¥æ–¹æ³•æºç å¦‚ä¸‹ï¼š é‚£ä¹ˆå½“ä»£ç æ‰§è¡Œåˆ°è¿™é‡Œæ—¶ï¼Œæœ€å¼€å§‹æ‰§è¡Œçš„æ˜¯ç”¨æˆ·çš„è®¤è¯ï¼Œä¹Ÿå°±æ˜¯perform_autnenticationæ–¹æ³•ã€‚ä¸‹é¢æ¥æ·±å…¥çš„åˆ†æžä¸€ä¸‹åœ¨ç”¨æˆ·è®¤è¯ä¸­å…·ä½“æ˜¯æ€Žä¹ˆæ‰§è¡Œçš„ã€‚ äºŒ ç”¨æˆ·è®¤è¯æ‰§è¡Œæµç¨‹è¿›å…¥æŸ¥çœ‹è¯¥æ–¹æ³•æºç å¦‚ä¸‹ï¼š 1. æ‰§è¡ŒAPIView.perform_authentication 2. æ‰§è¡Œ Request.user 3. æ‰§è¡ŒRequest._authenticate 4. Request.authenticators 5. APIView.initialize_request 6. APIView.get_authticators 7. api_settings.DEFAULT_AUTHENTICATION_CLASSESåˆ°è¿™é‡Œå°±æ˜¯æŸ¥æ‰¾APIView é…ç½®çš„é—®é¢˜äº†ï¼ŒåŽé¢çš„DEFAULT_AUTHENTICATION_CLASSESæ˜¯é»˜è®¤çš„è®¤è¯ç±»ï¼Œè¯¥ç±»å®šä¹‰åœ¨settings.pyæ–‡ä»¶ä¸­ã€‚ä¹‹åŽæˆ‘ä¼šå†™ä¸€ç¯‡ Django åŠ è½½é¡¹ç›®é…ç½®çš„åšå®¢ï¼Œåˆ°æ—¶å€™è¯¦ç»†åˆ†æžä¸€ä¸‹ï¼Œè¿™ä¼šæ¶‰åŠåˆ° python çš„ä¸¤ç§åŠ è½½æ–‡ä»¶çš„æ–¹å¼ï¼Œä¸€ç§æ˜¯ importï¼›ä¸€ç§æ˜¯ä½¿ç”¨importlibæ¨¡å—å¯¼å…¥ã€‚ ä¸‰ è‡ªå®šä¹‰è®¤è¯ç»„ä»¶äº†è§£äº† restframework çš„è®¤è¯æµç¨‹ï¼Œå¯¹äºŽéœ€è¦è‡ªå®šä¹‰è®¤è¯ç»„ä»¶å…¶å®žå¾ˆæ˜Žäº†ï¼Œå°±æ˜¯è‡ªå®šä¹‰è®¤è¯ç±»ï¼Œé‡å†™ authenticate æ–¹æ³•ã€‚ä¸è¿‡è¿™è¿˜ä¸è¡Œï¼Œæˆ‘ä»¬è¿˜éœ€è¦è¿›è¡Œä¸€ä¸‹é…ç½®ã€‚ éœ€æ±‚ï¼šåœ¨ä¹‹å‰çš„é¡¹ç›®ä¸­ï¼Œæˆ‘ä»¬éœ€è¦åœ¨æœåŠ¡å™¨ä¸­ä¿å­˜ç›¸å…³çš„ cookie æˆ– session æ¥è¿›è¡Œç”¨æˆ·èº«ä»½æ ¡éªŒï¼Œé‚£ä¹ˆå¦‚ä½•ä½¿ç”¨ restframework çš„è®¤è¯æ¥å®žçŽ°è¯¥éœ€æ±‚ï¼Œä½¿å¾—æ—¢èƒ½æ ¡éªŒèº«ä»½ï¼Œä¹Ÿå¯ä»¥ä¸ç”¨åœ¨æœåŠ¡ç«¯ä¿å­˜ç”¨æˆ·çš„ cookie æˆ– sessionã€‚ é¦–å…ˆä¸ç®¡ cookie æˆ– session éƒ½æ˜¯ä¸ºäº†æ ¡éªŒç”¨æˆ·çš„ï¼Œé‚£ä¹ˆåœ¨è¿™é‡Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ä¸€ä¸ªéšæœºå­—ç¬¦ä¸²ï¼ˆåŠ å¯†åŽçš„ï¼‰ï¼Œå½“å®¢æˆ·ç«¯æœæœåŠ¡ç«¯å‘é€è¯·æ±‚æ—¶ä¼šæºå¸¦è¯¥å€¼ï¼Œä¹‹åŽè¿›è¡Œåè§£ç”¨æ¥å¯¹æ¯”ã€‚ 1. urls.py1url(r'^login/', views.Login.as_view()), 2. views.py1234567891011121314151617181920212223242526272829# èŽ·å– éšæœºtokenå€¼def get_token(id, salt='123'): md = hashlib.md5() md.update(bytes(str(id), encoding='utf-8')) md.update(bytes(salt, encoding='utf-8')) return md.hexdigest() + '|' + str(id)# ç™»é™†è§†å›¾ç±»class Login(APIView): # def dispatch(self, request, *args, **kwargs): # return super(Login, self).dispatch(request, *args, **kwargs) def post(self, request): response = &#123;'status': 100, 'msg': None&#125; name = request.data.get('name') password = request.data.get('password') print(name, password) user_obj = models.UserInfo.objects.filter(name=name, password=password).first() if user_obj: token = get_token(user_obj.pk) response['msg'] = 'ç™»é™†æˆåŠŸ' response['status'] = 100 response['token'] = token print('111', token) else: response['msg'] = 'ç”¨æˆ·åæˆ–å¯†ç é”™è¯¯' return Response(response) 3. authenticate_classes.py123456789101112131415161718192021222324252627282930313233# æ ¡éªŒ tokendef check_token(token, salt='123'): ls = token.split('|') md = hashlib.md5() md.update(bytes(ls[-1], encoding='utf-8')) md.update(bytes(salt, encoding='utf-8')) if md.hexdigest() == ls[0]: return True else: return False# æ”¹å†™çš„è®¤è¯ç±»class BookAuth(BaseAuthentication): def authenticate(self, request): token = request.data.get('token') print('222', token) if token: succ = check_token(token) if succ: id = request.data.get('uid') user = modeles.UserInfo.objects.filter(pk=id).first() if user: print('333') # user = return user, token else: raise NotAuthenticated('æ•°æ®åº“é”™') else: raise NotAuthenticated('è®¤è¯å¤±è´¥') else: raise NotAuthenticated('è¯·å…ˆç™»å½•') 4. ä½¿ç”¨åªæœ‰ç»è¿‡è®¤è¯çš„æ‰èƒ½èŽ·å–ç›¸å…³ä¿¡æ¯ 123456789101112131415161718class Book(APIView): authentication_classes = [authticate_classes.BookAuth] # authentication_classes = [] def dispatch(self, request, *args, **kwargs): return super().dispatch(request, *args, **kwargs) def get(self, request, id): print(request.user, '444') response = &#123;'status': 100, 'msg': None&#125; book_obj = models.Book.objects.filter(pk=id).first() if book_obj: book_ser = myser.BookSer(book_obj, many=False) response['book'] = book_ser.data else: response['msg'] = 'å›¾ä¹¦æ²¡æœ‰å¯¹è±¡' response['status'] = 101 return Response(response) å›› é…ç½®è‡ªå®šä¹‰è®¤è¯ç±»1. å±€éƒ¨é…ç½®å‡è®¾ä¸€ä¸ªåŠŸèƒ½éœ€è¦ç™»é™†æˆåŠŸæ‰å¯ä»¥ä½¿ç”¨ï¼Œé‚£ä¹ˆåªéœ€è¦åœ¨è¯¥è§†å›¾ç±»ä¸­å®šä¹‰ä¸€ä¸ªå‚æ•°authentication_classes 123456789101112131415161718class Book(APIView): # é…ç½®è¯¥å‚æ•°å¯ä»¥å±€éƒ¨ä½¿ç”¨ authentication_classes = [authticate_classes.BookAuth, ] def dispatch(self, request, *args, **kwargs): return super().dispatch(request, *args, **kwargs) def get(self, request, id): print(request.user, '444') response = &#123;'status': 100, 'msg': None&#125; book_obj = models.Book.objects.filter(pk=id).first() if book_obj: book_ser = myser.BookSer(book_obj, many=False) response['book'] = book_ser.data else: response['msg'] = 'å›¾ä¹¦æ²¡æœ‰å¯¹è±¡' response['status'] = 101 return Response(response) 2. å…¨å±€ä½¿ç”¨å…¨å±€ä½¿ç”¨çš„è¯éœ€è¦åœ¨é¡¹ç›® settings ä¸­é…ç½®ï¼Œå¦‚ä¸‹ï¼š 123REST_FRAMEWORK=&#123; "DEFAULT_AUTHENTICATION_CLASSES":["app01.authenticate_classes.BookAuth",]&#125; è¿™æ ·å¯¹ views ä¸­æ‰€æœ‰çš„è¯·æ±‚æ–¹æ³•éƒ½æœ‰æ•ˆã€‚å› ä¸ºæ‰€æœ‰çš„è§†å›¾ç±»éƒ½ä¼šåŠ è½½ settings ä¸­çš„é…ç½®ã€‚è¿™äº›éƒ½æ˜¯åœ¨dispatchæ–¹æ³•ä¸­å®Œæˆçš„ã€‚ 3. å±€éƒ¨ç¦ç”¨å±€éƒ¨ç¦ç”¨çš„è¯åªéœ€è¦åœ¨è§†å›¾ç±»ä¸­å®šä¹‰ä¸€ä¸ªç©ºçš„authentication_classesã€‚ 1authentication_classes = []]]></content>
      <categories>
        <category>Django-restframework æºç </category>
      </categories>
  </entry>
  <entry>
    <title><![CDATA[with æ˜¯ä»€ä¹ˆ]]></title>
    <url>%2F2019%2F02%2F25%2Fwith-%E6%98%AF%E4%BB%80%E4%B9%88%2F</url>
    <content type="text"></content>
  </entry>
  <entry>
    <title><![CDATA[mroåˆ—è¡¨æ˜¯ä»€ä¹ˆä¸œè¥¿]]></title>
    <url>%2F2019%2F02%2F24%2Fmro%E5%88%97%E8%A1%A8%E6%98%AF%E4%BB%80%E4%B9%88%E4%B8%9C%E8%A5%BF%2F</url>
    <content type="text"></content>
  </entry>
  <entry>
    <title><![CDATA[Django restframeworkä¹‹åºåˆ—åŒ–ç»„ä»¶æºç æŽ¢æž]]></title>
    <url>%2F2019%2F02%2F22%2FDjango-restframework%E4%B9%8B%E5%BA%8F%E5%88%97%E5%8C%96%E7%BB%84%E4%BB%B6%E6%BA%90%E7%A0%81%E6%8E%A2%E6%9E%90%2F</url>
    <content type="text"></content>
  </entry>
  <entry>
    <title><![CDATA[Django restframeworkåºåˆ—åŒ–ç»„ä»¶ä¹‹å±€éƒ¨é’©å­ä¸Žå…¨å±€é’©å­]]></title>
    <url>%2F2019%2F02%2F22%2FDjango-restframework%E4%B9%8B%E5%B1%80%E9%83%A8%E9%92%A9%E5%AD%90%E4%B8%8E%E5%85%A8%E5%B1%80%E9%92%A9%E5%AD%90%2F</url>
    <content type="text"><![CDATA[django-restframework åºåˆ—åŒ–ç»„ä»¶ä¹‹å±€éƒ¨é’©å­ä¸Žå…¨å±€é’©å­ä¸€ å‰è¨€]]></content>
      <categories>
        <category>django-restframework</category>
      </categories>
  </entry>
  <entry>
    <title><![CDATA[Django restframeworkä¹‹ä½¿ç”¨åºåˆ—åŒ–ç»„ä»¶å¢žåŠ ä¸Žä¿®æ”¹]]></title>
    <url>%2F2019%2F02%2F22%2FDjango-restframework%E4%B9%8B%E4%BD%BF%E7%94%A8%E5%BA%8F%E5%88%97%E5%8C%96%E7%BB%84%E4%BB%B6%E5%A2%9E%E5%88%A0%E6%9F%A5%E6%94%B9%2F</url>
    <content type="text"><![CDATA[Django restframeworkä¹‹ä½¿ç”¨åºåˆ—åŒ–ç»„ä»¶å¢žåŠ ä¸Žä¿®æ”¹ä¸€ å‰è¨€åœ¨ views è§†å›¾ä¸­å†™ API æŽ¥å£æ—¶ï¼Œä½¿ç”¨åºåˆ—åŒ–ç»„ä»¶æ¥è¿›è¡Œå¢žåˆ æŸ¥æ”¹ç‰¹åˆ«æ–¹ä¾¿ï¼Œæœ¬ç¯‡åšå®¢è¯¦ç»†ä»‹ç»ä¸€ä¸‹åœ¨ views ä¸­å…·ä½“ä½¿ç”¨åºåˆ—åŒ–ç»„ä»¶ã€‚ äºŒ V1ç‰ˆä»£ç ä¸€ v1ç‰ˆ views ä»£ç 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667686970717273747576from rest_framework.response import Responsefrom rest_framework.views import APIViewfrom app01 import modelsfrom app01.myser import BookSerib# class Author(View):# passclass Books(APIView): def dispatch(self, request, *args, **kwargs): return super().dispatch(request, *args, **kwargs) # @staticmethod def get(self, request, *args, **kwargs): response = &#123;'status': 100, 'msg': None&#125; book_list = models.Book.objects.all() book_ser = BookSerib(book_list, many=True) print('book_ser.data', book_ser.data) response['books'] = book_ser.data print('response', response) return Response(response) def post(self, request, *args, **kwargs): response = &#123;'status': 100, 'msg': None&#125; bookname = request.data.get('name') price = request.data.get('price') publish = request.data.get('publish') authors = request.data.get('author') # print(authors) if bookname and price and publish and authors: pub_obj = models.Publish.objects.filter(name=publish).first() book = models.Book.objects.filter(name=bookname).first() if book: response['msg'] = 'å›¾ä¹¦å·²å­˜åœ¨' else: if pub_obj: authstr_list = [author.strip() for author in authors.split(',')] # print('authstr_list', authstr_list) auth_list = [] for author in authstr_list: auth_obj = models.Author.objects.filter(name=author).first() if auth_obj: auth_list.append(auth_obj) if auth_list: # print('request.data', request.data) ins_dic = dict(request.data) # print(type(ins_dic)) ins_dic.pop('author') # print('ins_dic', ins_dic) book_obj = models.Book.objects.create(name=bookname, price=price, publish=pub_obj) book_data = BookSerib(book_obj, many=False) # print('book_obj', book_obj) # ret = book_obj.author.add(*auth_list) for auth in auth_list: models.Book2Author.objects.create(book=book_obj, author=auth) # print('ret', ret) response['msg'] = 'æ–°å¢žå›¾ä¹¦æˆåŠŸ' response['book'] = book_data.data else: response['msg'] = 'ä½œè€…ä¸å­˜åœ¨' else: response['msg'] = 'å‡ºç‰ˆç¤¾ä¸å­˜åœ¨' else: response['msg'] = 'ä¿¡æ¯ä¸å®Œæ•´' return Response(response) äºŒ v1ç‰ˆ myser ä»£ç 123456789101112131415161718192021# myser.pyclass AuthorSerib(serializers.Serializer): name_author = serializers.CharField(source='name') phone_num = serializers.CharField(source='phone')class BookSerib(serializers.ModelSerializer): class Meta: fields = '__all__' # åºåˆ—åŒ– Book è¡¨ä¸­æ‰€æœ‰å­—æ®µ fields = ['name', 'price', 'publish'] # é€‰æ‹©æ€§çš„åºåˆ—åŒ–å­—æ®µ exclude = ['pub_date'] # åˆ—è¡¨é‡Œé¢çš„å­—æ®µä¸åºåˆ—åŒ– depth = 1 # è¿žè¡¨æŸ¥è¯¢çš„æ·±åº¦ï¼Œä¸å»ºè®®ä½¿ç”¨ï¼Œå› ä¸ºæ·±åº¦æŸ¥è¯¢çš„å‚æ•°ä¸èƒ½æŽ§åˆ¶ publish_name = serializers.CharField(source='publish.name') # å› ä¸ºåœ¨ Book è¡¨ä¸­å¤–é”®å…³è”äº† publish è¡¨ï¼Œæ‰€ä»¥å¯ä»¥é€šè¿‡ç‚¹è¯­æ³•å–å€¼ authors = serializers.SerializerMethodField() def get_authors(self, obj): # åœ¨é‚£ä¸ªç±»ä¸­è°ƒç”¨è¯¥åºåˆ—åŒ–ç±»ï¼Œæ¯”å¦‚éœ€è¦èŽ·å– Book ä¿¡æ¯ï¼Œä½¿ç”¨ BookSerib ç±»æ¥åºåˆ—åŒ–æ•°æ®ï¼Œé‚£ä¹ˆ obj å°±æ˜¯ Book ç±»ã€‚ author_list = obj.author.all() author_ser = AuthorSerib(author_list, many=True) return author_ser.data ä¸‰ V2ç‰ˆä»£ç ä¸€ v2ç‰ˆ views ä»£ç 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152class Book(APIView): def dispatch(self, request, *args, **kwargs): return super().dispatch(request, *args, **kwargs) def get(self, request, id): response = &#123;'status': 100, 'msg': None&#125; book = models.Book.objects.filter(pk=id).first() book_ser = BookSerib(book, many=False) print('book_ser.data', book_ser.data) response['books'] = book_ser.data response['msg'] = 'èŽ·å–å›¾ä¹¦æˆåŠŸ' print('response', response) return Response(response) # åˆ é™¤å›¾ä¹¦ def delete(self, request, id): response = &#123;'status': 100, 'msg': None&#125; book = models.Book.objects.filter(pk=id).delete() # book_ser = BookSerib(book, many=False) response['msg'] = 'åˆ é™¤æˆåŠŸ' return Response(response) def post(self, request, *args, **kwargs): response = &#123;'status': 100, 'msg': 'æˆåŠŸ'&#125; # book_info = request.data book_ser = BookSerib(data=request.data) # æ–°æ–¹æ³•ï¼Œä½¿ç”¨åºåˆ—åŒ–ç»„ä»¶ä¿å­˜ï¼Œä½†æ˜¯å¿…é¡»æ˜¯ç»§æ‰¿è‡ª ModelSerializer çš„åºåˆ—åŒ–ç±»ï¼Œè¿™æ ·æ‰å¯ä»¥çŸ¥é“è¦ä¿å­˜çš„è¡¨æ¨¡åž‹ if book_ser.is_valid(): book_ser.save() response['book'] = book_ser.data else: response['msg'] = book_ser.errors return Response(response) def put(self, request, id): response = &#123;'status': 100, 'msg': 'æˆåŠŸ'&#125; book_obj = models.Book.objects.filter(pk=id).first() # ä¿®æ”¹çš„è¯ï¼Œè¦æŠŠ book å¯¹è±¡å½“åš instanceä¼ è¿›åŽ» book_ser = BookSerib(data=request.data, instance=book_obj) # æ–°æ–¹æ³•ï¼Œä½¿ç”¨åºåˆ—åŒ–ç»„ä»¶ä¿å­˜ï¼Œä½†æ˜¯å¿…é¡»æ˜¯ç»§æ‰¿è‡ª ModelSerializer çš„åºåˆ—åŒ–ç±»ï¼Œè¿™æ ·æ‰å¯ä»¥çŸ¥é“è¦ä¿å­˜çš„è¡¨æ¨¡åž‹ if book_ser.is_valid(): # saveæ—¢å¯ä»¥ä¿®æ”¹ä¹Ÿå¯ä»¥æ–°å¢ž book_ser.save() response['book'] = book_ser.data else: response['msg'] = book_ser.errors return Response(response)]]></content>
      <categories>
        <category>djangoåºåˆ—åŒ–ç»„ä»¶</category>
      </categories>
  </entry>
  <entry>
    <title><![CDATA[RESTful è§„èŒƒ]]></title>
    <url>%2F2019%2F02%2F21%2FRESTful-%E8%A7%84%E8%8C%83%2F</url>
    <content type="text"><![CDATA[RESTful è§„èŒƒå‰è¨€rest æ˜¯ä¸€ç§è½¯ä»¶æž¶æž„é£Žæ ¼ï¼Œå¦‚æžœä½¿ç”¨çš„æ˜¯ rest æŽ¥å£ï¼Œé‚£ä¹ˆå°±å¯ä»¥è¯´ä½ çš„æŽ¥å£æ˜¯ restfulã€‚ restæŽ¥å£æ˜¯å›´ç»•â€˜â€™èµ„æºâ€˜â€™å±•å¼€çš„ï¼Œåˆ©ç”¨ HTTP çš„åè®®ï¼Œå…¶å®ž rest å¯ä»¥å’Œ HTTP äº”æ®µï¼Œä½†æ˜¯å¤§å®¶æ™®éä½¿ç”¨ rest çš„éƒ½ä¾æ‰˜äºŽHTTP åè®®ã€‚è€Œ HTTP çš„ url å…¨ç§°ä¸ºï¼ˆUniform Resource Locatorï¼‰ä¸­æ–‡ç¿»è¯‘ä¸ºç»Ÿä¸€èµ„æºå®šä½ç¬¦ï¼Œåœ¨äº’è”ä¸­ä¸­ HTTP çš„ url å³èµ„æºã€‚ é€šç”¨çš„ url è¯­æ³•1URL = scheme&apos;://&apos;authority &apos;/&apos; path [&apos;?&apos; query][&apos;#&apos; fragmentn] schmeï¼šæŒ‡åº•å±‚ç”¨çš„åè®®ï¼Œå¦‚ HTTPã€HTTPSã€ftp ç­‰ hostï¼š æœåŠ¡å™¨çš„ IP åœ°å€æˆ–è€…åŸŸå portï¼š ç«¯å£ï¼Œhttp ä¸­é»˜è®¤ä¸º80 pathï¼šè®¿é—®èµ„æºçš„è·¯å¾„ï¼Œå°±æ˜¯å’±ä»¬å„ç§ web æ¡†æž¶ä¸­å®šä¹‰çš„ route è·¯ç”± queryï¼šä¸ºå‘é€ç»™æœåŠ¡å™¨çš„å‚æ•° fragmentï¼šé”šç‚¹ï¼Œå®šä½åˆ°é¡µé¢çš„èµ„æºï¼Œé”šç‚¹ä¸ºèµ„æº id ä»€ä¹ˆæ˜¯ RESTful REST ä¸ŽæŠ€æœ¯æ— å…³ï¼Œä»£è¡¨çš„æ˜¯ä¸€ç§è½¯ä»¶æž¶æž„é£Žæ ¼ï¼ŒREST æ˜¯ Representational State Transfer çš„ç®€ç§°ï¼Œä¸­æ–‡ç¿»è¯‘ä¸ºâ€˜â€™è¡¨å¾çŠ¶æ€è½¬ç§»â€˜â€™ REST ä»Žèµ„æºçš„è§’åº¦æ¥å®¡è§†æ•´ä¸ªç½‘ç»œï¼Œå®ƒå°†åˆ†å¸ƒåœ¨ç½‘ç»œä¸­æŸä¸ªèŠ‚ç‚¹çš„èµ„æºé€šè¿‡ URL è¿›è¡Œæ ‡è¯†ï¼Œå®¢æˆ·ç«¯åº”ç”¨é€šè¿‡ URL æ¥èŽ·å–èµ„æºçš„è¡¨å¾ï¼ŒèŽ·å¾—è¿™äº›è¡¨å¾ä½¿è¿™äº›åº”ç”¨è½¬å˜çŠ¶æ€ REST ä¸ŽæŠ€æœ¯æ— å…³ï¼Œä»£è¡¨çš„æ˜¯ä¸€ç§è½¯ä»¶æž¶æž„é£Žæ ¼ï¼ŒREST æ˜¯ Representational State Transfer çš„ç®€ç§°ï¼Œä¸­æ–‡ç¿»è¯‘ä¸ºâ€˜â€™è¡¨å¾çŠ¶æ€è½¬ç§»â€˜â€™ æ‰€ä»¥çš„æ•°æ®ï¼Œä¸è¿‡æ˜¯é€šè¿‡ç½‘ç»œèŽ·å–çš„è¿˜æ˜¯æ“ä½œï¼ˆå¢žåˆ æŸ¥æ”¹ï¼‰çš„æ•°æ®ï¼Œéƒ½æ˜¯è‡ªæ„¿ï¼Œå°†ä¸€åˆ‡æ•°æ®è§†ä¸ºè‡ªæ„¿æ˜¯ REST åŒºåˆ«ä¸Žå…¶ä»–æž¶æž„é£Žæ ¼çš„æœ€æœ¬è´¨å±žæ€§ å¯¹äºŽ REST è¿™ç§é¢å‘èµ„æºçš„æž¶æž„é£Žæ ¼ï¼Œæœ‰äººæå‡ºä¸€ç§å…¨æ–°çš„ç»“æž„ç†å¿µï¼Œå³ï¼šé¢å‘èµ„æºæž¶æž„ï¼ˆROAï¼šResource Oriented Architectureï¼‰ RESTful API è®¾è®¡è§„èŒƒRESTful API è®¾è®¡è§„èŒƒæ€»å…±æœ‰åæ¡ï¼Œå¯¹äºŽè¿™åæ¡è§„èŒƒï¼Œæ›´å¤šçš„æ˜¯å»ºè®®ä½¿ç”¨ï¼Œè€Œä¸æ˜¯å¼ºåˆ¶ä½¿ç”¨ã€‚ API ä¸Žç”¨æˆ·çš„é€šä¿¡åè®®ï¼Œæ€»æ˜¯ä½¿ç”¨ HTTPS åè®® åŸŸå https://api.example.com å°½é‡å°† API éƒ¨ç½²åœ¨ä¸“ç”¨åŸŸåï¼ˆå­˜åœ¨è·¨åŸŸé—®é¢˜ï¼‰ https://example.org/api APIå¾ˆç®€å• ç‰ˆæœ¬ URLï¼Œå¦‚https://api.example.com/v1 è¯·æ±‚å¤´ è·¨åŸŸæ—¶ï¼Œå¼•å‘å‘é€å¤šæ¬¡è¯·æ±‚ è·¯å¾„ï¼Œè§†ç½‘ç»œä¸Šä»»ä½•ä¸œè¥¿éƒ½æ˜¯è‡ªæ„¿ï¼Œå‡ä½¿ç”¨åè¯è¡¨ç¤ºï¼ˆå¯å¤æ•°ï¼‰ https://api.example.com/v1/zoos https://api.example.com/v1/animals https://api.example.com/v1/employees method GETï¼šä»ŽæœåŠ¡å™¨èŽ·å–èµ„æºï¼ˆä¸€é¡¹æˆ–å¤šé¡¹ï¼‰ POSTï¼š åœ¨æœåŠ¡å™¨æ–°å»ºä¸€ä¸ªèµ„æº PUTï¼š åœ¨æœåŠ¡å™¨æ›´æ–°èµ„æºï¼ˆå®¢æˆ·ç«¯æä¾›æ”¹å˜åŽçš„å®Œæ•´èµ„æºï¼‰ PATCHï¼šåœ¨æœåŠ¡å™¨æ›´æ–°èµ„æºï¼ˆå®¢æˆ·ç«¯æä¾›æ”¹å˜çš„å±žæ€§ï¼‰ DELETEï¼š ä»ŽæœåŠ¡å™¨åˆ é™¤èµ„æº è¿‡æ»¤ï¼Œé€šè¿‡åœ¨ url ä¸Šä¼ å‚çš„å½¢å¼ä¼ é€’æœç´¢æ¡ä»¶ https://api.example.com/v1/zoos?limit=10ï¼šæŒ‡å®šè¿”å›žè®°å½•çš„æ•°é‡ https://api.example.com/v1/zoos?offset=10ï¼šæŒ‡å®šè¿”å›žè®°å½•çš„å¼€å§‹ä½ç½® https://api.example.com/v1/zoos?page=2&amp;per_page=100ï¼šæŒ‡å®šç¬¬å‡ é¡µï¼Œä»¥åŠæ¯é¡µçš„è®°å½•æ•° https://api.example.com/v1/zoos?sortby=name&amp;order=ascï¼šæŒ‡å®šè¿”å›žç»“æžœæŒ‰ç…§å“ªä¸ªå±žæ€§æŽ’åºï¼Œä»¥åŠæŽ’åºé¡ºåº https://api.example.com/v1/zoos?animal_type_id=1ï¼šæŒ‡å®šç­›é€‰æ¡ä»¶ çŠ¶æ€ç  1234567891011121314OK - [GET]ï¼šæœåŠ¡å™¨æˆåŠŸè¿”å›žç”¨æˆ·è¯·æ±‚çš„æ•°æ®ï¼Œè¯¥æ“ä½œæ˜¯å¹‚ç­‰çš„ï¼ˆIdempotentï¼‰ã€‚CREATED - [POST/PUT/PATCH]ï¼šç”¨æˆ·æ–°å»ºæˆ–ä¿®æ”¹æ•°æ®æˆåŠŸã€‚Accepted - [*]ï¼šè¡¨ç¤ºä¸€ä¸ªè¯·æ±‚å·²ç»è¿›å…¥åŽå°æŽ’é˜Ÿï¼ˆå¼‚æ­¥ä»»åŠ¡ï¼‰NO CONTENT - [DELETE]ï¼šç”¨æˆ·åˆ é™¤æ•°æ®æˆåŠŸã€‚INVALID REQUEST - [POST/PUT/PATCH]ï¼šç”¨æˆ·å‘å‡ºçš„è¯·æ±‚æœ‰é”™è¯¯ï¼ŒæœåŠ¡å™¨æ²¡æœ‰è¿›è¡Œæ–°å»ºæˆ–ä¿®æ”¹æ•°æ®çš„æ“ä½œï¼Œè¯¥æ“ä½œæ˜¯å¹‚ç­‰çš„ã€‚Unauthorized - [*]ï¼šè¡¨ç¤ºç”¨æˆ·æ²¡æœ‰æƒé™ï¼ˆä»¤ç‰Œã€ç”¨æˆ·åã€å¯†ç é”™è¯¯ï¼‰ã€‚Forbidden - [*] è¡¨ç¤ºç”¨æˆ·å¾—åˆ°æŽˆæƒï¼ˆä¸Ž401é”™è¯¯ç›¸å¯¹ï¼‰ï¼Œä½†æ˜¯è®¿é—®æ˜¯è¢«ç¦æ­¢çš„ã€‚NOT FOUND - [*]ï¼šç”¨æˆ·å‘å‡ºçš„è¯·æ±‚é’ˆå¯¹çš„æ˜¯ä¸å­˜åœ¨çš„è®°å½•ï¼ŒæœåŠ¡å™¨æ²¡æœ‰è¿›è¡Œæ“ä½œï¼Œè¯¥æ“ä½œæ˜¯å¹‚ç­‰çš„ã€‚Not Acceptable - [GET]ï¼šç”¨æˆ·è¯·æ±‚çš„æ ¼å¼ä¸å¯å¾—ï¼ˆæ¯”å¦‚ç”¨æˆ·è¯·æ±‚JSONæ ¼å¼ï¼Œä½†æ˜¯åªæœ‰XMLæ ¼å¼ï¼‰ã€‚Gone -[GET]ï¼šç”¨æˆ·è¯·æ±‚çš„èµ„æºè¢«æ°¸ä¹…åˆ é™¤ï¼Œä¸”ä¸ä¼šå†å¾—åˆ°çš„ã€‚Unprocesable entity - [POST/PUT/PATCH] å½“åˆ›å»ºä¸€ä¸ªå¯¹è±¡æ—¶ï¼Œå‘ç”Ÿä¸€ä¸ªéªŒè¯é”™è¯¯ã€‚INTERNAL SERVER ERROR - [*]ï¼šæœåŠ¡å™¨å‘ç”Ÿé”™è¯¯ï¼Œç”¨æˆ·å°†æ— æ³•åˆ¤æ–­å‘å‡ºçš„è¯·æ±‚æ˜¯å¦æˆåŠŸã€‚æ›´å¤šçœ‹è¿™é‡Œï¼šhttp://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html é”™è¯¯å¤„ç†ï¼Œåº”è¯¥è¿”å›žé”™è¯¯ä¿¡æ¯ï¼Œå°† error å½“åš key 1&#123;"error": "é”™è¯¯ä¿¡æ¯"&#125; è¿”å›žç»“æžœï¼Œé’ˆå¯¹ä¸åŒæ“ä½œï¼ŒæœåŠ¡å™¨å‘ç”¨æˆ·è¿”å›žçš„ç»“æžœåº”è¯¥ç¬¦åˆä»¥ä¸‹è§„èŒƒ 123456GET /collectionï¼šè¿”å›žèµ„æºå¯¹è±¡çš„åˆ—è¡¨ï¼ˆæ•°ç»„ï¼‰GET /collection/resourceï¼šè¿”å›žå•ä¸ªèµ„æºå¯¹è±¡POST /collectionï¼šè¿”å›žæ–°ç”Ÿæˆçš„èµ„æºå¯¹è±¡PUT /collection/resourceï¼šè¿”å›žå®Œæ•´çš„èµ„æºå¯¹è±¡PATCH /collection/resourceï¼šè¿”å›žå®Œæ•´çš„èµ„æºå¯¹è±¡DELETE /collection/resourceï¼šè¿”å›žä¸€ä¸ªç©ºæ–‡æ¡£ Hypermedia APIï¼ŒRESTful API æœ€å¥½åšåˆ° Hypermediaï¼Œæœºè¿”å›žç»“æžœä¸­æä¾›é“¾æŽ¥ï¼Œè”å‘å…¶ä»– API æ–¹æ³•ï¼Œä½¿å¾—ç”¨æˆ·ä¸æŸ¥æ–‡æ¡£ï¼Œä¹ŸçŸ¥é“ä¸‹ä¸€æ­¥åº”è¯¥åšä»€ä¹ˆ åŸºäºŽ Django å®žçŽ° RESTful è§„èŒƒ12345678# urls.pyurlpatterns = [ url(r'^admin/', admin.site.urls), # url(r'^books/', views.Books.as_view()), url(r'^book/(?P&lt;id&gt;\d+)/', views.Book.as_view()),] 123456789101112131415161718# views.pyclass Books(APIView): def dispatch(self, request, *args, **kwargs): return super().dispatch(request, *args, **kwargs) # @staticmethod def get(self, request, *args, **kwargs): response = &#123;'status': 100, 'msg': None&#125; book_list = models.Book.objects.all() book_ser = BookSerib(book_list, many=True) print('book_ser.data', book_ser.data) response['books'] = book_ser.data print('response', response) return Response(response)]]></content>
      <categories>
        <category>restfulè§„èŒƒ</category>
      </categories>
  </entry>
  <entry>
    <title><![CDATA[Django restframeworkä¹‹æµç¨‹åˆ†æž]]></title>
    <url>%2F2019%2F02%2F21%2FDjango-restframework%E4%B9%8B%E6%B5%81%E7%A8%8B%E5%88%86%E6%9E%90%2F</url>
    <content type="text"><![CDATA[Django-restframework æºç åˆ†æžä¹‹è®¤è¯å‰è¨€æœ€è¿‘å­¦ä¹ äº† django çš„ä¸€ä¸ª restframework æ¡†æž¶ï¼Œå¯¹äºŽé‡Œé¢çš„æ‰§è¡Œæµç¨‹äº§ç”Ÿäº†å…´è¶£ï¼Œç»è¿‡æ˜¨å¤©ä¸€æ™šä¸Šåˆæ­¥æžæ¸…æ¥šäº†æ‰§è¡Œæµç¨‹ï¼ˆéƒ¨åˆ†æ–¹æ³•è¿˜ä¸å¤ªæ¸…æ¥šï¼‰ï¼ŒäºŽæ˜¯æƒ³è¯¦ç»†çš„æ€»ç»“ä¸€ä¸‹å½“æ¥ä¸€ä¸ªè¯·æ±‚æ—¶ï¼Œåœ¨è¯¥æ¡†æž¶é‡Œé¢æ˜¯å¦‚ä½•æ‰§è¡Œçš„ï¼Ÿ å¯åŠ¨é¡¹ç›®æ—¶æ˜¨å¤©åœ¨è°ƒè¯•djangoæ—¶ï¼Œå‘çŽ°åœ¨ APIView ä¸­æ‰“çš„æ–­ç‚¹æ²¡æœ‰æ–­ä¸‹æ¥ï¼Œè€Œæ˜¯æ‰“åœ¨ View ä¸­çš„æ–­ç‚¹æ–­ä¸‹æ¥äº†ï¼Œè°ƒè¯•äº†å¾ˆå¤šæ¬¡ï¼Œæœ€åŽå‘çŽ°ï¼Œåœ¨ django é¡¹ç›®å¯åŠ¨æ—¶ï¼Œä¼šé¦–å…ˆåŠ è½½ urls ä¸­çš„æ–‡ä»¶ï¼Œæ‰§è¡Œ views ä¸­ç±»çš„ as_viewæ–¹æ³•ï¼Œå…¶å®žæ˜¯ç»§æ‰¿è‡ª APIView çš„ï¼ŒAPIView ç»§æ‰¿è‡ª django åŽŸç”Ÿ View çš„as_view æ–¹æ³•ã€‚ é‡Œé¢ä¸€ä¸ªå‚æ•°å« pattern_nameï¼Œå¯¹åº”çš„å€¼æ˜¯admin:auth_group_changeï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š ç›®å‰è¿˜ä¸æ¸…æ¥šè¿™é‡Œé¢çš„å…·ä½“æµç¨‹æ˜¯ä»€ä¹ˆï¼Œä½†æ˜¯å¹¶ä¸å¦¨ç¢é˜…è¯»ä¹‹åŽçš„æºç ï¼Œåœ¨è¿™åªè¦æ¸…æ¥šä¸€ç‚¹ï¼Œåœ¨ Django é¡¹ç›®å¯åŠ¨æ—¶ï¼Œè·¯ç”±æ‰€å¯¹åº”çš„CBVé‡Œé¢çš„ç›¸å…³æ–¹æ³•çš„å†…å­˜åœ°å€å·²ç»èŽ·å–åˆ°ã€‚è¿™æ ·åšçš„å¥½å¤„å°±æ˜¯æé«˜æ•ˆçŽ‡ï¼Œåå¤„å¯èƒ½æœ‰ä¸€ç‚¹ç‚¹ï¼Œä¼šæå‡æ€§èƒ½çš„æ¶ˆè€—ã€‚ å…·ä½“è·¯ç”±å’Œé€»è¾‘ä»£ç åœ¨è¿™é‡Œå‡è®¾æ¥ä¸€ä¸ª GET è¯·æ±‚ï¼Œurls å’Œ viewsé‡Œé¢çš„ä»£ç å¦‚ä¸‹ï¼š 123# urls.pyurl(r'^book/(?P&lt;id&gt;\d+)/', views.Book.as_view()), 1234567891011121314151617# views.pyclass Book(APIView): def dispatch(self, request, *args, **kwargs): return super().dispatch(request, *args, **kwargs) def get(self, request, id): response = &#123;'status': 100, 'msg': None&#125; book = models.Book.objects.filter(pk=id).first() book_ser = BookSerib(book, many=False) print('book_ser.data', book_ser.data) response['books'] = book_ser.data response['msg'] = 'èŽ·å–å›¾ä¹¦æˆåŠŸ' print('response', response) return Response(response) urls é‡Œé¢å°±æ˜¯ä¸€ä¸ªå…¸åž‹çš„ CBV çš„è·¯ç”±é…ç½®ï¼Œåœ¨ views ä¸­ä¸€ä¸ªæ˜¯è·¯ç”±åˆ†å‘æ–¹æ³•ï¼Œä¸€ä¸ªæ˜¯èŽ·å–å•æœ¬å›¾ä¹¦ä¿¡æ¯ï¼ˆé€šè¿‡ idï¼‰ã€‚ as_view å…·ä½“æ‰§è¡Œæµç¨‹åœ¨é¡¹ç›®å¯åŠ¨æ—¶ï¼Œç›¸åº”çš„å‡½æ•°å†…å­˜åœ°å€å·²ç»èŽ·å–åˆ°ï¼Œé‚£ä¹ˆå…·ä½“æ˜¯æ€Žä¹ˆèŽ·å–åˆ°çš„å‘¢ï¼Ÿ åœ¨ä¸Šé¢çš„ä»£ç ä¸­å¯ä»¥çœ‹åˆ° Bookç±»æ˜¯ç»§æ‰¿è‡ªAPIViewç±»çš„ï¼Œæ‰€ä»¥åœ¨è·¯ç”±é…ç½®é‡Œé¢æ‰§è¡Œçš„as_viewæ–¹æ³•å¦‚æžœBookç±»æ²¡æœ‰é‡å†™ï¼Œé‚£ä¹ˆæ‰§è¡Œçš„å°±æ˜¯æŒ‰ç…§mroåˆ—è¡¨é¡ºåºæŸ¥æ‰¾åˆ°çš„ç¬¬ä¸€ä¸ªæ–¹æ³•ï¼Œåœ¨è¿™é‡Œæ‰§è¡Œçš„æ˜¯APIViewç±»ä¸­çš„as_viewæ–¹æ³•ã€‚ æŸ¥çœ‹è¯¥æºç å¦‚ä¸‹ï¼š APIViewç±»çš„çˆ¶ç±»æ˜¯Viewç±»ï¼ŒæŸ¥çœ‹è¯¥ç±»çš„as_viewæ–¹æ³•ï¼Œæºç å¦‚ä¸‹ï¼š å…·ä½“as_viewå°±æ˜¯å°†viewå‡½æ•°çš„å†…å­˜åœ°å€è¿”å›žï¼Œä»¥ä¾¿è¯·æ±‚æ¥æ—¶ç›´æŽ¥è°ƒç”¨ã€‚ è€Œinitkwargsè¿™ä¸ªå‚æ•°åº”è¯¥æ˜¯ç”± django å†…éƒ¨ä¼ çš„ä¸€äº›å‚æ•°ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š è¯·æ±‚åˆ°æ¥æ—¶å› ä¸ºç»è¿‡ django å…ˆæ‰§è¡Œäº†as_viewè¿”å›žviewçš„å†…å­˜åœ°å€ï¼Œæ‰€ä»¥ä¼šç›´æŽ¥æ‰§è¡Œviewå‡½æ•°ï¼Œå¦‚ä¸‹ï¼š åœ¨è¿™é‡Œè¯¥ self ç”±äºŽæ˜¯ ç»§æ‰¿è‡ªAPIViewç±»çš„Bookç±»çš„å¯¹è±¡ï¼Œæ‰€ä»¥dispatchæ–¹æ³•é¦–å…ˆåŽ»è‡ªèº«æ‰¾ï¼Œä¹‹åŽåŽ»çˆ¶ç±»æ‰¾ï¼Œåœ¨APIViewç±»ä¸­æ‰¾åˆ°dispatchæ–¹æ³•ï¼Œæºç å¦‚ä¸‹ï¼š initialize_requestæ–¹æ³•ï¼šæºç å¦‚ä¸‹ï¼š åœ¨å®žä¾‹åŒ–Requestå¯¹è±¡æ—¶ï¼Œauthenticatorså‚æ•°éœ€è¦åœ¨è®¤è¯æ—¶ä½¿ç”¨ï¼Œæ‰€ä»¥å…ˆæŠŠè¿™ä¸ªå‚æ•°çš„å€¼æ‰¾å‡ºæ¥ã€‚æ­¥éª¤å¦‚ä¸‹ï¼š è°ƒç”¨ self.get_authenticators æ‰¾åˆ° self.authentication_classes æ‰¾åˆ° api_settings,æ‰èƒ½æ‰¾åˆ°DEFAULT_AUTHENTICATION_CLASSES DEFAULTå’ŒIMPORT_STRINGSå‚æ•° DEFAULTå‚æ•° IMPORT_STRINGSå‚æ•° å®žä¾‹åŒ– APISettings å¯¹è±¡ é€šè¿‡__getattr__æ–¹æ³•èŽ·å–å€¼ æ‰§è¡Œperform_importæ–¹æ³• æ‰§è¡Œimport_from_string æ‰§è¡Œimport_module æ‰§è¡Œ_bootstrap._gcd_import æ‰§è¡Œ_sanity_check _sanity_checkè¿”å›žï¼Œæ‰§è¡Œ_find_and_loadæ–¹æ³• æ‰€ä»¥é€šè¿‡__getattr__çš„åˆ°çš„æ˜¯ä¸€ä¸ªåˆ—è¡¨ï¼Œé‡Œé¢æ˜¯ä¸¤ä¸ªç±»ï¼Œåˆ†åˆ«æ˜¯[rest_framework_authentication_SessionAuthentication, rest_framework_authentication_BasicAuthentication] åˆ°è¿™é‡Œï¼Œinitialize_requestæ–¹æ³•æ‰§è¡Œç»“æŸï¼Œå¾—åˆ°ä¸€ä¸ªç»è¿‡ Request ç±»å®žä¾‹åŒ–çš„ request å¯¹è±¡ï¼Œè¯¥å¯¹è±¡é‡Œé¢å«æœ‰åŽŸç”Ÿ request å¯¹è±¡ï¼Œå¯ä»¥é€šè¿‡request._requestå–åˆ°ã€‚ initial æ–¹æ³•ï¼šæºç å¦‚ä¸‹ï¼š è¿™é‡Œä¼ å…¥çš„requestå‚æ•°æ˜¯ç»è¿‡Requestå°è£…åŽçš„å‚æ•° æ‰§è¡Œget_format_suffix æ‰§è¡Œå®Œè¿™ä¸ªæ–¹æ³•ï¼Œself_format_kwarg = Noneï¼Œ æ‰§è¡Œperform_content_negotiation æ‰§è¡Œself.get_renders æ‰§è¡Œself.get_content_negotiator æ‰§è¡Œ conneg.select_rendereræ–¹æ³• æœªå®Œå¾…ç»­â€¦â€¦]]></content>
      <categories>
        <category>Django-restframeworkæºç åˆ†æž</category>
      </categories>
  </entry>
  <entry>
    <title><![CDATA[Django restframeworkä¹‹åºåˆ—åŒ–ç»„ä»¶]]></title>
    <url>%2F2019%2F02%2F20%2FDjango-restframework%E4%B9%8B%E5%BA%8F%E5%88%97%E5%8C%96%E7%BB%84%E4%BB%B6%2F</url>
    <content type="text"><![CDATA[Django-restframeworkä¹‹åºåˆ—åŒ–ç»„ä»¶å‰è¨€è¿™ç¯‡åšå®¢ä»‹ç» restframeworkçš„åºåˆ—åŒ–ç»„ä»¶ï¼Œè¿™ä¸ªç»„ä»¶å¯ä»¥è¯´æ˜¯ rest framework çš„æ ¸å¿ƒç»„ä»¶ï¼Œä¸ä»…æä¾›äº†åŠŸèƒ½å¼ºå¤§çš„åºåˆ—åŒ–åŠŸèƒ½ï¼Œè¿˜æä¾›äº†æ•°æ®éªŒè¯çš„åŠŸèƒ½ï¼ˆä¸Ž django çš„ forms ç»„ä»¶ç±»ä¼¼ï¼‰ã€‚ æ™®é€šç‰ˆæœ¬ä½¿ç”¨urls é…ç½®123456urlpatterns = [ url(r'^admin/', admin.site.urls), # url(r'^books/', views.Books.as_view()), url(r'^book/(?P&lt;id&gt;\d+)/', views.Book.as_view()),] models é…ç½®1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556from django.db import models# Create your models here.# book_obj.author.set(*[])class Book(models.Model): nid = models.AutoField(primary_key=True) name = models.CharField(max_length=32) price = models.IntegerField() publish = models.ForeignKey(to='Publish', to_field='nid') pub_date = models.DateTimeField(auto_now_add=True) author = models.ManyToManyField(to='Author', through='Book2Author', through_fields=('book', 'author')) def __str__(self): return self.name class Meta: verbose_name = 'å›¾ä¹¦è¡¨' verbose_name_plural = verbose_nameclass Publish(models.Model): nid = models.AutoField(primary_key=True) name = models.CharField(max_length=32) email = models.EmailField() class Meta: verbose_name = 'å‡ºç‰ˆç¤¾è¡¨' verbose_name_plural = verbose_name def __str__(self): return self.nameclass Author(models.Model): nid = models.AutoField(primary_key=True) name = models.CharField(max_length=32) phone = models.CharField(max_length=32, null=True) class Meta: verbose_name = 'ä½œè€…è¡¨' verbose_name_plural = verbose_name def __str__(self): return self.nameclass Book2Author(models.Model): nid = models.AutoField(primary_key=True) book = models.ForeignKey(to='Book', to_field='nid') author = models.ForeignKey(to='Author', to_field='nid') class Meta: verbose_name = 'å›¾ä¹¦ä½œè€…è¡¨' verbose_name_plural = verbose_name myser é…ç½®ï¼ˆåºåˆ—åŒ–ç»„ä»¶ï¼‰123456789101112131415from rest_framework import serializersclass BookSerib(serializers.Serializer): nid = serializers.CharField() title = serializers.CharField(source='name') pri = serializers.CharField(source='price') pub_date = serializers.CharField() author_dic = serializers.SerializerMethodField() def get_author_dic(self, obj): authors = obj.author.all() print('authors', authors) for author in authors: return &#123;'name': author.name, 'phone': author.phone&#125; views é…ç½®12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667686970717273747576from rest_framework.response import Responsefrom rest_framework.views import APIViewfrom app01 import modelsfrom app01.myser import BookSerib# class Author(View):# passclass Books(APIView): def dispatch(self, request, *args, **kwargs): return super().dispatch(request, *args, **kwargs) # @staticmethod def get(self, request, *args, **kwargs): response = &#123;'status': 100, 'msg': None&#125; book_list = models.Book.objects.all() book_ser = BookSerib(book_list, many=True) print('book_ser.data', book_ser.data) response['books'] = book_ser.data print('response', response) return Response(response) def post(self, request, *args, **kwargs): response = &#123;'status': 100, 'msg': None&#125; bookname = request.data.get('name') price = request.data.get('price') publish = request.data.get('publish') authors = request.data.get('author') # print(authors) if bookname and price and publish and authors: pub_obj = models.Publish.objects.filter(name=publish).first() book = models.Book.objects.filter(name=bookname).first() if book: response['msg'] = 'å›¾ä¹¦å·²å­˜åœ¨' else: if pub_obj: authstr_list = [author.strip() for author in authors.split(',')] # print('authstr_list', authstr_list) auth_list = [] for author in authstr_list: auth_obj = models.Author.objects.filter(name=author).first() if auth_obj: auth_list.append(auth_obj) if auth_list: # print('request.data', request.data) ins_dic = dict(request.data) # print(type(ins_dic)) ins_dic.pop('author') # print('ins_dic', ins_dic) book_obj = models.Book.objects.create(name=bookname, price=price, publish=pub_obj) book_data = BookSerib(book_obj, many=False) # print('book_obj', book_obj) # ret = book_obj.author.add(*auth_list) for auth in auth_list: models.Book2Author.objects.create(book=book_obj, author=auth) # print('ret', ret) response['msg'] = 'æ–°å¢žå›¾ä¹¦æˆåŠŸ' response['book'] = book_data.data else: response['msg'] = 'ä½œè€…ä¸å­˜åœ¨' else: response['msg'] = 'å‡ºç‰ˆç¤¾ä¸å­˜åœ¨' else: response['msg'] = 'ä¿¡æ¯ä¸å®Œæ•´' return Response(response) è¿›é˜¶ç‰ˆæœ¬ä½¿ç”¨ä¸»è¦æ˜¯åºåˆ—åŒ–æ¨¡å—é‡Œé¢çš„æ”¹åŠ¨ 123456789101112131415161718192021# myser.pyclass AuthorSerib(serializers.Serializer): name_author = serializers.CharField(source='name') phone_num = serializers.CharField(source='phone')class BookSerib(serializers.Serializer): nid = serializers.CharField() title = serializers.CharField(source='name') pri = serializers.CharField(source='price') pub_date = serializers.CharField() author_dic = serializers.SerializerMethodField() # author_dic = AuthorSerib()# def get_author_dic(self, obj): authors = obj.author.all() authors_ser = AuthorSerib(authors, many=True) return authors_ser.data # å¯¹äºŽå¤–é”®å…³è”çš„å­—æ®µï¼Œå› ä¸ºåœ¨ Book è¡¨ä¸­å­˜å‚¨çš„æ˜¯å¯¹è±¡ï¼Œæ‰€ä»¥å¯ä»¥å¯¹è¯¥å¯¹è±¡å†ä½¿ç”¨åºåˆ—åŒ–ï¼Œæ–°å»ºäº†åºåˆ—åŒ– Author çš„åºåˆ—åŒ–ç±»ç”¨æ¥å¯¹ author è¿›è¡Œåºåˆ—åŒ– ç»ˆæžç‰ˆæœ¬ä½¿ç”¨123456789101112131415161718192021# myser.pyclass AuthorSerib(serializers.Serializer): name_author = serializers.CharField(source='name') phone_num = serializers.CharField(source='phone')class BookSerib(serializers.ModelSerializer): class Meta: fields = '__all__' # åºåˆ—åŒ– Book è¡¨ä¸­æ‰€æœ‰å­—æ®µ fields = ['name', 'price', 'publish'] # é€‰æ‹©æ€§çš„åºåˆ—åŒ–å­—æ®µ exclude = ['pub_date'] # åˆ—è¡¨é‡Œé¢çš„å­—æ®µä¸åºåˆ—åŒ– depth = 1 # è¿žè¡¨æŸ¥è¯¢çš„æ·±åº¦ï¼Œä¸å»ºè®®ä½¿ç”¨ï¼Œå› ä¸ºæ·±åº¦æŸ¥è¯¢çš„å‚æ•°ä¸èƒ½æŽ§åˆ¶ publish_name = serializers.CharField(source='publish.name') # å› ä¸ºåœ¨ Book è¡¨ä¸­å¤–é”®å…³è”äº† publish è¡¨ï¼Œæ‰€ä»¥å¯ä»¥é€šè¿‡ç‚¹è¯­æ³•å–å€¼ authors = serializers.SerializerMethodField() def get_authors(self, obj): # åœ¨é‚£ä¸ªç±»ä¸­è°ƒç”¨è¯¥åºåˆ—åŒ–ç±»ï¼Œæ¯”å¦‚éœ€è¦èŽ·å– Book ä¿¡æ¯ï¼Œä½¿ç”¨ BookSerib ç±»æ¥åºåˆ—åŒ–æ•°æ®ï¼Œé‚£ä¹ˆ obj å°±æ˜¯ Book ç±»ã€‚ author_list = obj.author.all() author_ser = AuthorSerib(author_list, many=True) return author_ser.data æ³¨æ„ï¼šfields å’Œ exclude ä¸èƒ½è¿žç”¨]]></content>
      <categories>
        <category>Django-restframework</category>
      </categories>
  </entry>
  <entry>
    <title><![CDATA[Vueï¼ˆäºŒï¼‰]]></title>
    <url>%2F2019%2F02%2F18%2FVue%EF%BC%88%E4%BA%8C%EF%BC%89%2F</url>
    <content type="text"><![CDATA[Vue ç³»åˆ—åšå®¢ï¼ˆäºŒï¼‰å‰è¨€æœ¬ç¯‡åšå®¢ä»‹ç» Vue ä¸­çš„ç»„ä»¶ç›¸å…³çŸ¥è¯†ã€‚ ä»€ä¹ˆæ˜¯ç»„ä»¶ï¼Ÿ æ¯ä¸€ä¸ªç»„ä»¶éƒ½æ˜¯ Vue å®žä¾‹ï¼› æ¯ä¸ªç»„ä»¶å‡å…·æœ‰è‡ªèº«çš„æ¨¡æ¿ templateï¼Œæ ¹ç»„ä»¶çš„æ¨¡æ¿å°±æ˜¯æŒ‚è½½ç‚¹ï¼› æ¯ä¸ªç»„ä»¶æ¨¡æ¿åªèƒ½æ‹¥æœ‰ä¸€ä¸ªæ ¹æ ‡ç­¾ï¼› å­ç»„ä»¶çš„æ•°æ®å…·æœ‰ä½œç”¨åŸŸï¼Œä»¥è¾¾åˆ°ç»„ä»¶çš„å¤ç”¨ã€‚ æ ¹ç»„ä»¶12345678910111213141516171819&lt;div id="app"&gt; &lt;h1&gt; &#123;&#123; msg &#125;&#125; &lt;/h1&gt;&lt;/div&gt;&lt;script type="text/javascript"&gt; // é€šè¿‡ new Vue åˆ›å»ºçš„å®žä¾‹å°±æ˜¯æ ¹ç»„ä»¶(å®žä¾‹ä¸Žç»„ä»¶ä¸€ä¸€å¯¹åº”ï¼Œä¸€ä¸ªå®žä¾‹å°±æ˜¯ä¸€ä¸ªç»„ä»¶) // æ¯ä¸ªç»„ä»¶å‡æ‹¥æœ‰æ¨¡æ¿ template var app = new Vue(&#123; el: '#app', data: &#123; msg: 'æ ¹ç»„ä»¶' &#125;, // æ¨¡æ¿: ç”±""åŒ…è£¹çš„ html ä»£ç å—ï¼Œå‡ºçŽ°åœ¨ç»„ä»¶çš„å†…éƒ¨ï¼Œèµ‹å€¼ç»™ç»„å»ºçš„$templateå˜é‡ // æ˜¾å¼ä¹¦å†™æ¨¡å—ï¼Œå°±ä¼šæ›¿æ¢æŒ‚è½½ç‚¹ï¼Œä½†æ ¹ç»„ä»¶å¿…é¡»æ‹¥æœ‰æŒ‚è½½ç‚¹ template: "&lt;div&gt;æ˜¾å¼æ¨¡å—&lt;/div&gt;" &#125;) &lt;/script&gt; å±€éƒ¨ç»„ä»¶12345678910111213141516171819202122232425&lt;div id="app"&gt; &lt;local-tag&gt;&lt;/local-tag&gt; &lt;local-tag&gt;&lt;/local-tag&gt;&lt;/div&gt;&lt;script&gt; var localTag = &#123; data () &#123; return &#123; count: 0 &#125; &#125;, template: '&lt;button @click="btnAction"&gt;å±€éƒ¨&#123;&#123; count &#125;&#125;&lt;/button&gt;', methods: &#123; btnAction () &#123; this.count ++ &#125; &#125; &#125; new Vue(&#123; el: "#app", components: &#123; 'local-tag': localTag &#125; &#125;)&lt;/script&gt; å…¨å±€ç»„ä»¶12345678910111213141516171819202122&lt;div id="app"&gt; &lt;global-tag&gt;&lt;/global-tag&gt; &lt;global-tag&gt;&lt;/global-tag&gt;&lt;/div&gt;&lt;script&gt; Vue.component('global-tag', &#123; data () &#123; return &#123; count: 0 &#125; &#125;, template: '&lt;button @click="btnAction"&gt;å…¨å±€&#123;&#123; count &#125;&#125;&lt;/button&gt;', methods: &#123; btnAction () &#123; this.count ++ &#125; &#125; &#125;) new Vue(&#123; el: "#app" &#125;)&lt;/script&gt; çˆ¶å­ç»„ä»¶é€šä¿¡ï¼ˆé€šè¿‡ç»‘å®šå±žæ€§çš„æ–¹å¼è¿›è¡Œæ•°æ®ä¼ é€’ï¼‰12345678910111213141516&lt;div id="app"&gt; &lt;global-tag :sup_data1='sup_data1' :supData2='sup_data2'&gt;&lt;/global-tag&gt;&lt;/div&gt;&lt;script type="text/javascript"&gt; Vue.component('global-tag', &#123; props:['sup_data1', 'supdata2'], template: '&lt;div&gt;&#123;&#123; sup_data1 &#125;&#125; &#123;&#123; supdata2 &#125;&#125;&lt;/div&gt;' &#125;) new Vue(&#123; el: '#app', data: &#123; sup_data1: 'æ•°æ®1', sup_data2: 'æ•°æ®2' &#125; &#125;)&lt;/script&gt; å­çˆ¶ç»„ä»¶é€šä¿¡ï¼ˆé€šè¿‡å‘é€äº‹ä»¶è¯·æ±‚çš„æ–¹å¼è¿›è¡Œæ•°æ®ä¼ é€’ï¼‰12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455&lt;!DOCTYPE html&gt;&lt;html&gt;&lt;head&gt; &lt;meta charset="UTF-8"&gt; &lt;title&gt;å­çˆ¶é€šä¿¡&lt;/title&gt;&lt;/head&gt;&lt;body&gt;&lt;div id="app"&gt; &lt;balance&gt;&lt;/balance&gt; &lt;!--&lt;show&gt;&lt;/show&gt;--&gt;&lt;/div&gt;&lt;/body&gt;&lt;script src="../lib/Vue.js"&gt;&lt;/script&gt;&lt;script&gt; Vue.component('balance', &#123; template: ` &lt;div&gt; &lt;show @show-balance="show_balance"&gt;&lt;/show&gt; &lt;div v-if="show"&gt; æ‚¨çš„ä½™é¢ï¼šï¿¥å¥½å¤šé’± &lt;/div&gt; &lt;/div&gt; `, methods: &#123; show_balance: function (data) &#123; console.log('data', data); this.show = true; &#125; &#125;, data: function () &#123; return &#123; show: false &#125; &#125; &#125;); Vue.component('show', &#123; template: '&lt;button @click="on_click()"&gt;æ˜¾ç¤ºä½™é¢&lt;/button&gt;', methods: &#123; on_click() &#123; this.$emit('show-balance', &#123;'a': 1, 'b': 2&#125;) &#125; &#125; &#125;); var app = new Vue(&#123; el: '#app', data: &#123;&#125; &#125;)&lt;/script&gt;&lt;/html&gt;]]></content>
      <categories>
        <category>Vue</category>
      </categories>
  </entry>
  <entry>
    <title><![CDATA[Vueï¼ˆä¸€ï¼‰]]></title>
    <url>%2F2019%2F02%2F15%2FVue%EF%BC%88%E4%B8%80%EF%BC%89%2F</url>
    <content type="text"><![CDATA[Vueç³»åˆ—åšå®¢ï¼ˆä¸€ï¼‰å‰è¨€æœ¬ç¯‡åšå®¢å¼€ä»‹ç» Vueæ¡†æž¶ï¼ŒVue.jsæ˜¯ä¸€ä¸ªç”¨äºŽåˆ›å»ºç”¨æˆ·ç•Œé¢çš„å¼€æº JavaScript æ¡†æž¶ï¼Œä¹Ÿæ˜¯ä¸€ä¸ªåˆ›å»ºå•é¡µé¢åº”ç”¨çš„ Web åº”ç”¨æ¡†æž¶ã€‚Vue.jsæ˜¯ä¸€æ¬¾æµè¡Œçš„ JavaScript å‰ç«¯æ¡†æž¶ï¼Œæ—¨åœ¨æ›´å¥½åœ°ç»„ç»‡ä¸Žç®€åŒ–Web å¼€å‘ã€‚Vue æ‰€å…³æ³¨çš„æ ¸å¿ƒæ˜¯ MVC æ¨¡å¼ä¸­çš„è§†å›¾å±‚ï¼ŒåŒæ—¶ï¼Œå®ƒä¹Ÿèƒ½æ–¹ä¾¿çš„å›žåŽ»æ•°æ®æ›´æ–°ï¼Œå¹¶é€šè¿‡ç»„ä»¶å†…éƒ¨ç‰¹å®šçš„æ–¹æ³•å®žçŽ°è§†å›¾ä¸Žæ¨¡åž‹çš„äº¤äº’ã€‚ ä»€ä¹ˆæ˜¯ Vueï¼ŸVue.jsæ˜¯ä¸€ä¸ªæ¸è¿›å¼çš„ JavaScript æ¡†æž¶ã€‚ æ¸è¿›å¼ï¼šVue å°åˆ°æŽ§åˆ¶é¡µé¢ä¸­çš„ä¸€ä¸ªå˜é‡åˆ°é¡µé¢ä¸€å—å†…å®¹åˆ°æ•´ä¸ªé¡µé¢ï¼Œæœ€ç»ˆå¤§åˆ°æŽ§åˆ¶æ•´ä¸ªé¡¹ç›®ï¼Œéƒ½å¯ä»¥ç”¨ Vue æ¡†æž¶æ¥å®žçŽ°ã€‚ Vue å¯ä»¥åšä»€ä¹ˆï¼Ÿå¯ä»¥å°†æ•°æ®æ¸²æŸ“åˆ°æŒ‡å®šåŒºåŸŸï¼ˆæ•°æ®å¯ä»¥ç”±åŽå°èŽ·å–ï¼Œä¹Ÿå¯ä»¥ç”±å‰å°è‡ªå·±äº§ç”Ÿï¼‰ï¼Œå¯ä»¥ä¸Žé¡µé¢å®ŒæˆåŸºäºŽæ•°æ®çš„äº¤äº’ã€‚ åœ¨é¡µé¢ä¸­ä½¿ç”¨ Vue123456789101112131415161718192021222324252627&lt;body&gt; &lt;div id="box1"&gt; &lt;!--&#123;&#123; &#125;&#125; ä¼šè¢«vueè§£æžä¸ºæ•°æ®çš„æ¸²æŸ“çš„æŒ‡å®šè¯­æ³•--&gt; &#123;&#123; &#125;&#125; &lt;/div&gt; &lt;hr&gt; &lt;div class="box2"&gt; &#123;&#123; &#125;&#125; &lt;/div&gt;&lt;/body&gt;&lt;script src="js/vue.js"&gt;&lt;/script&gt;&lt;script&gt; // å¦‚ä½•ä½¿ç”¨jqæ¡†æž¶ &lt;= æ‹¿åˆ°jqæ¡†æž¶çš„å¯¹è±¡ $ | jQuery // ç±»æ¯”ï¼šå¦‚ä½•ä½¿ç”¨vueæ¡†æž¶ &lt;= æ‹¿åˆ°vueæ¡†æž¶çš„å¯¹è±¡ new Vue() // vueå¯¹è±¡éœ€è¦æ‰‹åŠ¨åˆ›å»ºï¼Œ åŽŸå› ï¼Œä¸€ä¸ªvueå¯¹è±¡å¯ä»¥åªæŽ§åˆ¶é¡µé¢ä¸­çš„æŸä¸€éƒ¨åˆ†ï¼Œ å¦‚æžœä¸€ä¸ªé¡µé¢æœ‰å¤šä¸ªéƒ¨åˆ†éƒ½éœ€è¦è¢«æŽ§åˆ¶ï¼Œé‚£ä¹ˆå°±éœ€è¦åˆ›å»ºå¤šä¸ªvueå¯¹è±¡ // vueå¯¹è±¡å¦‚ä½•ä¸ŽæŽ§åˆ¶çš„é¡µé¢è¿›è¡Œå…³è”ï¼ˆç»‘å®šï¼‰ï¼Œé‡‡ç”¨çš„æ˜¯vueå¯¹è±¡ä¸­çš„æŒ‚è½½ç‚¹(æŒ‚è½½ç‚¹å¯ä»¥å”¯ä¸€æ ‡è¯†é¡µé¢ä¸­çš„æŸä¸€ä¸ªåŒºåŸŸ) new Vue(&#123; el: "#box1" // æŒ‚åœ¨åœ¨idä¸ºbox1çš„divä¸Šï¼Œé‚£ä¹ˆè¯¥divä¸‹çš„æ‰€æœ‰å†…å®¹éƒ½ç”±è¯¥vueå¯¹è±¡æ¥æŽ§åˆ¶ &#125;) new Vue(&#123; el: '.box2' // æŒ‚åœ¨åœ¨classä¸ºbox2çš„divä¸Šï¼Œé‚£ä¹ˆè¯¥divä¸‹çš„æ‰€æœ‰å†…å®¹éƒ½ç”±è¯¥vueå¯¹è±¡æ¥æŽ§åˆ¶ï¼ˆå°½é‡ä½¿ç”¨idï¼Œå”¯ä¸€æ ‡è¯†ï¼‰ &#125;)&lt;/script&gt; Vue çš„æŒ‚è½½ç‚¹ï¼ˆVue å®žä¾‹ï¼‰123456789101112131415161718192021222324&lt;body&gt; &lt;div id="app"&gt; &#123;&#123; msg &#125;&#125; &lt;/div&gt;&lt;/body&gt;&lt;script src="js/vue.js"&gt;&lt;/script&gt;&lt;script&gt; // Vueå®žä¾‹ä¼šæ ¹æ®æ•°æ®äº§ç”Ÿè™šæ‹ŸDOM,æœ€ç»ˆæ›¿æ¢æŽ‰æŒ‚è½½ç‚¹çš„çœŸå®žDOM(ä¸è¦æŒ‚åœ¨åˆ°bodyä¸Š) var app = new Vue(&#123; el: '#app', data: &#123; msg: "ä»Šæ™šå˜¿å˜¿" &#125; &#125;); // å¦‚æžœéœ€è¦ä½¿ç”¨vueå¯¹è±¡(å®žä¾‹), é‚£ä¹ˆä¹…å¯ä»¥æŽ¥å—Vueåˆ›å»ºçš„ç»“æžœ, åä¹‹å°±ä¸éœ€è¦æŽ¥æ”¶ console.log(app); console.log(app.$attrs); // vueå®žä¾‹çš„å˜é‡éƒ½æ˜¯ä»¥$å¼€å¤´ console.log(app.$el); console.log(app.$data.msg); console.log(app.msg); // appå¯¹è±¡ = new Vue()å®žä¾‹ = æ ‡ç­¾div#appç»„ä»¶&lt;/script&gt; Vue çš„åŸºç¡€æŒ‡ä»¤æ–‡æœ¬æŒ‡ä»¤1234567891011121314151617181920&lt;body&gt; &lt;div id="app"&gt; &lt;p&gt;&#123;&#123; info &#125;&#125;&lt;/p&gt; &lt;!-- v-text ä¸ºvueçš„æ–‡æœ¬æŒ‡ä»¤ ="info" , infoä¸ºvueå®žä¾‹dataä¸­çš„ä¸€ä¸ªå˜é‡ --&gt; &lt;p v-text="info"&gt;&lt;/p&gt; &lt;p v-text="msg"&gt;&lt;/p&gt; &lt;p v-html="res"&gt;&lt;/p&gt; &lt;/div&gt;&lt;/body&gt;&lt;script src="js/vue.js"&gt;&lt;/script&gt;&lt;script&gt; new Vue(&#123; el: "#app", data: &#123; info: "æ’å€¼è¡¨è¾¾å¼", msg: "æ–‡æœ¬æŒ‡ä»¤", res: "&lt;b&gt;åŠ ç²—çš„æ–‡æœ¬&lt;/b&gt;" &#125; &#125;)&lt;/script&gt; æ–—ç¯·æŒ‡ä»¤12345678910111213141516&lt;style type="text/css"&gt; [v-cloak] &#123; display: none; &#125;&lt;/style&gt;&lt;div id="app" v-cloak&gt; &#123;&#123; msg &#125;&#125;&lt;/div&gt;&lt;script src="js/vue.min.js"&gt;&lt;/script&gt;&lt;script type="text/javascript"&gt; new Vue(&#123; el: "#app", data: &#123; msg: "message" &#125; &#125;)&lt;/script&gt;&lt;!-- é¿å…é¡µé¢é—ªçƒ--&gt; å±žæ€§æŒ‡ä»¤1234567891011121314151617181920212223242526272829303132333435363738394041&lt;body&gt; &lt;div id="app"&gt; &lt;!-- v-bind:å±žæ€§ = "å˜é‡" --&gt; &lt;!-- å¦‚æžœabcè‡ªå®šä¹‰å±žæ€§è¢«v-bind:æŒ‡ä»¤ç»‘å®šäº†,åŽé¢çš„å€¼ä¹Ÿä¼šæˆä¸ºvueå˜é‡, å¦‚æžœå°±æƒ³æ˜¯æ™®é€šå­—ç¬¦ä¸², å†ç”¨''åŒ…è£¹ --&gt; &lt;!-- : å°±æ˜¯ v-bind: çš„ç®€å†™æ–¹å¼ (1.å¸¸ç”¨ 2.ä¸€å®šä¸”åªæ“ä½œå±žæ€§)--&gt; &lt;p v-bind:abc="'abc'" v-bind:title="h_info" :def="hehe"&gt;abc&lt;/p&gt; &lt;!--æœ€å¸¸ç”¨çš„ä¸¤ä¸ªå±žæ€§ class | style--&gt; &lt;!--class--&gt; &lt;p :class="a"&gt;&lt;/p&gt; &lt;!-- å•ç±»å --&gt; &lt;p :class="[a, b]"&gt;&lt;/p&gt; &lt;!-- å¤šç±»å --&gt; &lt;p :class="&#123;c: d&#125;"&gt;&lt;/p&gt; &lt;!-- äº†è§£: cä¸ºç±»å,æ˜¯å¦èµ·ä½œç”¨å–å†³äºŽdå€¼ä¸ºtrue|false å¼€å…³ç±»å --&gt; &lt;!--style--&gt; &lt;p :style="s1"&gt;&lt;/p&gt; &lt;!-- s1ä¸ºä¸€å¥—æ ·å¼ --&gt; &lt;p :style="[s1, s2, &#123;textAlign: ta&#125;]"&gt;12345&lt;/p&gt;&lt;!-- äº†è§£: s1,s2å‡ä¸ºä¸€å¥—æ ·å¼, taæ˜¯ä¸€ä¸ªå˜é‡,ä¸“é—¨èµ‹å€¼ç»™textAlign("text-align") --&gt; &lt;/div&gt;&lt;/body&gt;&lt;script src="js/vue.js"&gt;&lt;/script&gt;&lt;script&gt; new Vue(&#123; el: "#app", data: &#123; h_info: "æ‚¬æµ®æç¤º", hehe: "å‘µå‘µ", a: 'active', b: 'rule', d: false, s1: &#123; // æ ·å¼1: å€¼1, ..., æ ·å¼n: å€¼n width: '200px', height: '200px', background: 'red' &#125;, s2: &#123; borderRadius: '50%' &#125;, ta: 'center' &#125; &#125;)&lt;/script&gt; äº‹ä»¶æŒ‡ä»¤12345678910111213141516171819202122232425262728293031323334353637383940414243&lt;body&gt; &lt;div id="app"&gt; &lt;!-- v-on:äº‹ä»¶ = "å˜é‡ ç®€å†™ @ --&gt; &lt;!-- äº‹ä»¶ç»‘å®šçš„å˜é‡å¯ä»¥åœ¨dataä¸­èµ‹å€¼,ä½†å»ºè®®åœ¨methodsä¸­èµ‹å€¼ --&gt; &lt;p v-on:click="fn1"&gt;11111111111111&lt;/p&gt; &lt;p @click="fn2"&gt;22222222222222&lt;/p&gt; &lt;!--vueäº‹ä»¶çš„ç»‘å®šå¯ä»¥ä¼ è‡ªå®šä¹‰å‚æ•°--&gt; &lt;p @click="fn3(333)"&gt;3333333333333333&lt;/p&gt; &lt;!--vueäº‹ä»¶çš„ç»‘å®šä¸ä¼ è‡ªå®šä¹‰å‚æ•°, é»˜è®¤å°†äº‹ä»¶å¯¹è±¡ä¼ è¿‡åŽ»äº†--&gt; &lt;p @click="fn4"&gt;4444444444444444&lt;/p&gt; &lt;!--vueäº‹ä»¶çš„ç»‘å®šä¼ è‡ªå®šä¹‰å‚æ•°, è¿˜è¦å°†äº‹ä»¶å¯¹è±¡ä¼ è¿‡åŽ»äº†, è¦æ˜Žç¡®ä¼ $event--&gt; &lt;p @click="fn5(555, $event)"&gt;5555555555555555&lt;/p&gt; &lt;/div&gt;&lt;/body&gt;&lt;script src="js/vue.js"&gt;&lt;/script&gt;&lt;script&gt; new Vue(&#123; el: "#app", data: &#123; // äº‹ä»¶åœ¨dataä¸­æä¾›ä¸€ä¸ªå‡½æ•°åœ°å€,å¯ä»¥å®žçŽ°äº‹ä»¶ fn1: function () &#123; console.log("11111111111111") &#125; &#125;, // äº‹ä»¶å°½é‡(è¦æ±‚)éƒ½æ”¾åœ¨vueå®žä¾‹çš„methodsä¸­ methods: &#123; fn2: function () &#123; console.log("22222222222222") &#125;, fn3 (arg) &#123; // ES6è¯­æ³• console.log(arg) &#125;, fn4: function (ev) &#123; console.log(ev) &#125;, fn5: function (arg, ev) &#123; console.log(arg) console.log(ev) &#125;, &#125; &#125;)&lt;/script&gt; è¡¨å•æŒ‡ä»¤123456789101112131415161718192021222324&lt;body&gt; &lt;div id="app"&gt; &lt;!-- v-model = "å˜é‡" æœ¬è´¨æ“ä½œçš„å°±æ˜¯è¡¨å•å…ƒç´ çš„value --&gt; &lt;!--v-modelå°±æ˜¯å®Œæˆæ•°æ®çš„åŒå‘ç»‘å®š--&gt; &lt;form action=""&gt; &lt;input type="text" v-model="info"&gt; &lt;!-- infoå˜é‡å°±æ˜¯ä»£è¡¨è¾“å…¥æ¡†çš„value --&gt; &lt;input type="text" v-model="info"&gt; &lt;/form&gt; &lt;p&gt; &#123;&#123; info &#125;&#125; &lt;/p&gt; &lt;!--v-onceåªä¼šè¢«èµ‹å€¼ä¸€æ¬¡,å°±ä¸å†æ”¹å˜,å¹¶ä¸”è¦ç»“åˆæ’å€¼è¡¨è¾¾å¼ä½¿ç”¨--&gt; &lt;p v-once="info"&gt;&#123;&#123; info &#125;&#125;&lt;/p&gt; &lt;/div&gt;&lt;/body&gt;&lt;script src="js/vue.js"&gt;&lt;/script&gt;&lt;script&gt; new Vue(&#123; el: "#app", data: &#123;// info: "åˆå§‹value", info: "" &#125;, &#125;)&lt;/script&gt; æ¡ä»¶æŒ‡ä»¤12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364&lt;div id="app"&gt; &lt;button @click="toggle"&gt;æ˜¾éšåˆ‡æ¢&lt;/button&gt; &lt;!-- v-if --&gt; &lt;div class="box r" v-if="isShow"&gt;&lt;/div&gt; &lt;!-- v-show --&gt; &lt;div class="box o" v-show="isShow"&gt;&lt;/div&gt; &lt;!-- 1.æ¡ä»¶æ¸²æŸ“çš„å€¼ä¸ºtrue|false --&gt; &lt;!-- 2.trueä»£è¡¨æ ‡ç­¾æ˜¾ç¤ºæ–¹å¼æ¸²æŸ“ --&gt; &lt;!-- 3.false v-ifä¸æ¸²æŸ“åˆ°é¡µé¢,v-showä»¥display:noneæ¸²æŸ“åˆ°é¡µé¢,ä½†ä¹Ÿä¸ä¼šæ˜¾ç¤º --&gt; &lt;!-- v-if v-else-if v-else æ¡ˆä¾‹ --&gt; &lt;ul&gt; &lt;li @mouseover="changeWrap(0)"&gt;red&lt;/li&gt; &lt;li @mouseover="changeWrap(1)"&gt;green&lt;/li&gt; &lt;li @mouseover="changeWrap(2)"&gt;blue&lt;/li&gt; &lt;/ul&gt; &lt;!-- redé¡µé¢é€»è¾‘ç»“æž„ --&gt; &lt;div class="wrap red" v-if="tag == 0" key="0"&gt;...&lt;/div&gt; &lt;!-- greené¡µé¢é€»è¾‘ç»“æž„ --&gt; &lt;div class="wrap green" v-else-if="tag == 1" key="1"&gt;...&lt;/div&gt; &lt;!-- blueé¡µé¢é€»è¾‘ç»“æž„ --&gt; &lt;div class="wrap blue" v-else key="2"&gt;...&lt;/div&gt; &lt;!-- v-ifç›¸å…³åˆ†æ”¯æ“ä½œ,åœ¨æœªæ˜¾ç¤ºæƒ…å†µä¸‹,æ˜¯ä¸ä¼šè¢«æ¸²æŸ“åˆ°é¡µé¢ä¸­ --&gt; &lt;!-- é€šè¿‡keyå…¨å±€å±žæ€§æ“ä½œåŽ,æ¸²æŸ“è¿‡çš„åˆ†æ”¯ä¼šå»ºç«‹keyå¯¹åº”çš„ç¼“å­˜,æé«˜ä¸‹ä¸€æ¬¡æ¸²æŸ“é€Ÿåº¦ --&gt; &lt;!-- v-show æ¡ˆä¾‹ --&gt; &lt;ul&gt; &lt;li @mouseover="changeMain(0)"&gt;red&lt;/li&gt; &lt;li @mouseover="changeMain(1)"&gt;green&lt;/li&gt; &lt;li @mouseover="changeMain(2)"&gt;blue&lt;/li&gt; &lt;/ul&gt; &lt;!-- redé¡µé¢é€»è¾‘ç»“æž„ --&gt; &lt;div class="main red" v-show="whoShow(0)"&gt;...&lt;/div&gt; &lt;!-- greené¡µé¢é€»è¾‘ç»“æž„ --&gt; &lt;div class="main green" v-show="whoShow(1)"&gt;...&lt;/div&gt; &lt;!-- blueé¡µé¢é€»è¾‘ç»“æž„ --&gt; &lt;div class="main blue" v-show="whoShow(2)"&gt;...&lt;/div&gt;&lt;/div&gt;&lt;script type="text/javascript"&gt; new Vue(&#123; el: "#app", data: &#123; isShow: false, tag: 0, flag: 0 &#125;, methods: &#123; toggle () &#123; this.isShow = !this.isShow; &#125;, changeWrap (num) &#123; this.tag = num; &#125;, changeMain (num) &#123; // this.flag num this.flag = num; &#125;, whoShow (num) &#123; // this.flag num return this.flag == num; &#125; &#125; &#125;)&lt;/script&gt; å¾ªçŽ¯æŒ‡ä»¤12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061&lt;div id="app"&gt; &lt;h1&gt;&#123;&#123; msg &#125;&#125;&lt;/h1&gt; &lt;!-- v-for="item in items" --&gt; &lt;!-- éåŽ†çš„å¯¹è±¡: æ•°ç»„[] å¯¹è±¡(å­—å…¸)&#123;&#125; --&gt; &lt;ul&gt; &lt;li&gt;&#123;&#123; list[0] &#125;&#125;&lt;/li&gt; &lt;li&gt;&#123;&#123; list[1] &#125;&#125;&lt;/li&gt; &lt;li&gt;&#123;&#123; list[2] &#125;&#125;&lt;/li&gt; &lt;li&gt;&#123;&#123; list[3] &#125;&#125;&lt;/li&gt; &lt;li&gt;&#123;&#123; list[4] &#125;&#125;&lt;/li&gt; &lt;/ul&gt; &lt;!-- nä¸ºéåŽ†çš„å…ƒç´ å€¼ --&gt; &lt;ul&gt; &lt;li v-for="n in list"&gt;&#123;&#123; n &#125;&#125;&lt;/li&gt; &lt;/ul&gt; &lt;!-- ä¸€èˆ¬åˆ—è¡¨æ¸²æŸ“éœ€è¦å»ºç«‹ç¼“å­˜ --&gt; &lt;!-- åˆ—è¡¨æ¸²æŸ“æ˜¯å¾ªçŽ¯,éœ€è¦èµ‹å€¼å˜é‡ç»™key,ä½¿ç”¨keyéœ€è¦v-bind:å¤„ç† --&gt; &lt;!-- v-forå˜é‡æ•°ç»„[]æ—¶,æŽ¥æ”¶ä¸¤ä¸ªå€¼æ—¶,ç¬¬ä¸€ä¸ªä¸ºå…ƒç´ å€¼,ç¬¬äºŒä¸ªä¸ºå…ƒç´ ç´¢å¼• --&gt; &lt;ul&gt; &lt;li v-for="(n, i) in list" :key="i"&gt;value:&#123;&#123; n &#125;&#125; | index: &#123;&#123; i &#125;&#125;&lt;/li&gt; &lt;/ul&gt; &lt;ul&gt; &lt;li&gt;&#123;&#123; dic['name'] &#125;&#125;&lt;/li&gt; &lt;li&gt;&#123;&#123; dic.age &#125;&#125;&lt;/li&gt; &lt;li&gt;&#123;&#123; dic.gender &#125;&#125;&lt;/li&gt; &lt;/ul&gt; &lt;!-- v-forå˜é‡å¯¹è±¡&#123;&#125;æ—¶,æŽ¥æ”¶ä¸‰ä¸ªå€¼æ—¶,ç¬¬ä¸€ä¸ªä¸ºå…ƒç´ å€¼,ç¬¬äºŒä¸ªä¸ºå…ƒç´ é”®,ç¬¬ä¸‰ä¸ªä¸ºå…ƒç´ ç´¢å¼• --&gt; &lt;ul&gt; &lt;li v-for="(v, k, i) in dic" :key="k"&gt;value:&#123;&#123; v &#125;&#125; | key:&#123;&#123; k &#125;&#125; | index: &#123;&#123; i &#125;&#125;&lt;/li&gt; &lt;/ul&gt; &lt;!-- éåŽ†çš„åµŒå¥— --&gt; &lt;div v-for="(person, index) in persons" :key="index" style="height: 21px;"&gt; &lt;div v-for="(v, k) in person" :key="k" style="float: left;"&gt;&#123;&#123; k &#125;&#125; : &#123;&#123; v &#125;&#125;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;/div&gt; &lt;/div&gt;&lt;/div&gt;&lt;script type="text/javascript"&gt; new Vue(&#123; el: "#app", data: &#123; msg: "åˆ—è¡¨æ¸²æŸ“", list: [1, 2, 3, 4, 5], dic: &#123; name: 'zero', age: 88888, gender: 'god' &#125;, persons: [ &#123;name: "zero", age: 8&#125;, &#123;name: "egon", age: 78&#125;, &#123;name: "liuXX", age: 77&#125;, &#123;name: "yXX", age: 38&#125; ] &#125; &#125;)&lt;/script&gt; todolist æ¡ˆä¾‹123456789101112131415161718192021222324252627282930&lt;div id="app"&gt; &lt;div&gt; &lt;input type="text" v-model="val"&gt; &lt;button type="button" @click="submitMsg"&gt;æäº¤&lt;/button&gt; &lt;/div&gt; &lt;ul&gt; &lt;li v-for="(v, i) in list" :key="i" @click="removeMsg(i)"&gt;&#123;&#123; v &#125;&#125;&lt;/li&gt; &lt;/ul&gt; &#123;&#123; list &#125;&#125;&lt;/div&gt;&lt;script type="text/javascript"&gt; new Vue(&#123; el: "#app", data: &#123; val: "", list: [] &#125;, methods: &#123; submitMsg () &#123; if (this.val) &#123; this.list.push(this.val); this.val = "" &#125; &#125;, removeMsg(index) &#123; this.list.splice(index, 1) &#125; &#125; &#125;)&lt;/script&gt; Vue çš„å®žä¾‹æˆå‘˜elï¼šå®žä¾‹1234567new Vue(&#123; el: '#app',&#125;)// å®žä¾‹ä¸Žé¡µé¢æŒ‚è½½ç‚¹ä¸€ä¸€å¯¹åº”// ä¸€ä¸ªé¡µé¢ä¸­å¯ä»¥å‡ºçŽ°å¤šä¸ªå®žä¾‹å¯¹åº”å¤šä¸ªæŒ‚è½½ç‚¹// å®žä¾‹åªæ“ä½œæŒ‚è½½ç‚¹å†…éƒ¨å†…å®¹ dataï¼šæ•°æ®123456789101112131415&lt;div id="app"&gt; &#123;&#123; msg &#125;&#125;&lt;/div&gt;&lt;script&gt; var app = new Vue(&#123; el: '#app', data: &#123; msg: 'æ•°æ®' &#125; &#125;) console.log(app.$data.msg); // ä½œä¸ºå±žæ€§å–å€¼ console.log(app.msg); // ä½œä¸ºç»„ä»¶èŽ·å–å€¼&lt;/script&gt;&lt;!-- data ä¸ºæ’å€¼è¡¨è¾¾å¼ä¸­çš„å˜é‡æä¾›æ•°æ® --&gt;&lt;!-- data ä¸­çš„æ•°æ®å¯ä»¥é€šè¿‡ Vue å®žä¾‹ç›´æŽ¥æˆ–é—´æŽ¥è®¿é—® --&gt; methodsï¼šæ–¹æ³•12345678910111213141516171819202122232425262728&lt;style&gt; .box &#123; background-color: orange &#125;&lt;/style&gt;&lt;div id="app"&gt; &lt;p classs="box" v-on:click="pClick"&gt; æµ‹è¯• &lt;/p&gt; &lt;p class="box" v-on:mouseover="pOver"&gt; æµ‹è¯• &lt;/p&gt;&lt;/div&gt;&lt;script&gt; var app = new Vue(&#123; el: '#app', methods: &#123; pClick: function() &#123; // ç‚¹å‡»æµ‹è¯• &#125;, pOver: function() &#123; // æ‚¬æµ®æµ‹è¯• &#125; &#125; &#125;)&lt;/script&gt;&lt;!-- äº†è§£ v-on: ä¸ºäº‹ä»¶ç»‘å®šçš„æŒ‡ä»¤ --&gt;&lt;!-- methods ä¸ºäº‹ä»¶æä¾›å®žçŽ°ä½“ --&gt; computed: è®¡ç®—123456789101112131415161718192021222324&lt;div id="app"&gt; &lt;input type="text" v-model="a"&gt; &lt;input type="text" v-model="b"&gt; &lt;div&gt; &#123;&#123; c &#125;&#125; &lt;/div&gt;&lt;/div&gt;&lt;script&gt; // ä¸€ä¸ªå˜é‡ä¾èµ–äºŽå¤šä¸ªå˜é‡ new Vue(&#123; el: "#app", data: &#123; a: "", b: "", &#125;, computed: &#123; c: function() &#123; // thisä»£è¡¨è¯¥vueå®žä¾‹ return this.a + this.b; &#125; &#125; &#125;)&lt;/script&gt; watch: ç›‘å¬1234567891011121314151617181920212223242526&lt;div id="app"&gt; &lt;input type="text" v-model="ab"&gt; &lt;div&gt; &#123;&#123; a &#125;&#125; &#123;&#123; b &#125;&#125; &lt;/div&gt;&lt;/div&gt;&lt;script&gt; // å¤šä¸ªå˜é‡ä¾èµ–äºŽä¸€ä¸ªå˜é‡ new Vue(&#123; el: "#app", data: &#123; ab: "", a: "", b: "", &#125;, watch: &#123; ab: function() &#123; // é€»è¾‘æ ¹æ®éœ€æ±‚è€Œå®š this.a = this.ab[0]; this.b = this.ab[1]; &#125; &#125; &#125;)&lt;/script&gt; delimiters: åˆ†éš”ç¬¦123456789101112&lt;div id='app'&gt; $&#123; msg &#125;&lt;/div&gt;&lt;script&gt; new Vue(&#123; el: '#app', data: &#123; msg: 'message' &#125;, delimiters: ['$&#123;', '&#125;'] &#125;)&lt;/script&gt;]]></content>
      <categories>
        <category>Vue</category>
      </categories>
  </entry>
  <entry>
    <title><![CDATA[Djangoï¼ˆåä¸ƒï¼‰]]></title>
    <url>%2F2019%2F01%2F20%2FDjango%EF%BC%88%E5%8D%81%E4%B8%83%EF%BC%89%2F</url>
    <content type="text"><![CDATA[Django ç³»åˆ—åšå®¢ï¼ˆåä¸ƒï¼‰å‰è¨€æœ¬ç¯‡åšå®¢ä»‹ç» Django çš„ cookie å’Œ session ç»„ä»¶ã€‚ COOKIEä¸ŽSESSIONæ¦‚å¿µcookieï¼šæ˜¯æµè§ˆå™¨ä¸ºWebæœåŠ¡å™¨å­˜å‚¨çš„ä¸€å°æ®µæ¶ˆæ¯ã€‚æ¯æ¬¡æµè§ˆå™¨ä»ŽæŸä¸ªæœåŠ¡å™¨è¯·æ±‚é¡µé¢æ—¶ï¼Œå®ƒæ”¶åˆ°æœåŠ¡å™¨è¿”å›žçš„ cookiesã€‚å®ƒä¿å­˜åœ¨æµè§ˆå™¨ä¸‹çš„æŸä¸ªæ–‡ä»¶å¤¹ä¸‹ã€‚ sessionï¼šDjango çš„ session æœºåˆ¶ä¼šå‘è¯·æ±‚çš„æµè§ˆå™¨å‘é€ cookie å­—ç¬¦ä¸²ã€‚åŒæ—¶ä¼šä¿å­˜ä¸€ä»½åˆ°æœ¬åœ°ï¼Œç”¨æ¥éªŒè¯æµè§ˆå™¨ç™»é™†æ˜¯å¦ä¸ºåŒä¸€ç”¨æˆ·ã€‚å®ƒå­˜åœ¨äºŽæœåŠ¡å™¨ï¼ŒDjango é»˜è®¤ä¼šæŠŠ session å­˜å…¥åˆ°æ•°æ®åº“ä¸­ã€‚ session ä¾èµ–äºŽ cookieï¼Œå¦‚æžœæµè§ˆå™¨ä¸èƒ½ä¿å­˜ cookies é‚£ä¹ˆ session å°±å¤±æ•ˆäº†ã€‚å› ä¸ºå®ƒéœ€è¦æµè§ˆå™¨çš„ cookie å€¼ï¼ˆsessionidï¼‰åŽ» session é‡Œåšå¯¹æ¯”ã€‚session å°±æ˜¯ç”¨æ¥åœ¨æœåŠ¡å™¨ç«¯ä¿å­˜ç”¨æˆ·çš„ä¼šè¯çŠ¶æ€ã€‚]]></content>
      <categories>
        <category>Django</category>
      </categories>
  </entry>
  <entry>
    <title><![CDATA[Djangoï¼ˆåå…­ï¼‰]]></title>
    <url>%2F2019%2F01%2F20%2FDjango%EF%BC%88%E5%8D%81%E5%85%AD%EF%BC%89%2F</url>
    <content type="text"><![CDATA[Django ç³»åˆ—åšå®¢ï¼ˆåå…­ï¼‰å‰è¨€æœ¬ç¯‡åšå®¢ä»‹ç» Django çš„ forms ç»„ä»¶ã€‚ åŸºæœ¬å±žæ€§ä»‹ç»åˆ›å»º forms ç±»æ—¶ï¼Œä¸»è¦æ¶‰åŠåˆ°å­—æ®µå’Œæ’ä»¶ï¼Œå­—æ®µç”¨äºŽå¯¹ç”¨æˆ·è¯·æ±‚æ•°æ®çš„éªŒè¯ï¼Œæ’ä»¶ç”¨äºŽè‡ªåŠ¨ç”Ÿæˆ htmlã€‚ Form ç±»å†…ç½®å­—æ®µä»‹ç»123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134Field required=True, æ˜¯å¦å…è®¸ä¸ºç©º widget=None, HTMLæ’ä»¶ label=None, ç”¨äºŽç”ŸæˆLabelæ ‡ç­¾æˆ–æ˜¾ç¤ºå†…å®¹ initial=None, åˆå§‹å€¼ help_text='', å¸®åŠ©ä¿¡æ¯(åœ¨æ ‡ç­¾æ—è¾¹æ˜¾ç¤º) error_messages=None, é”™è¯¯ä¿¡æ¯ &#123;'required': 'ä¸èƒ½ä¸ºç©º', 'invalid': 'æ ¼å¼é”™è¯¯'&#125; show_hidden_initial=False, æ˜¯å¦åœ¨å½“å‰æ’ä»¶åŽé¢å†åŠ ä¸€ä¸ªéšè—çš„ä¸”å…·æœ‰é»˜è®¤å€¼çš„æ’ä»¶ï¼ˆå¯ç”¨äºŽæ£€éªŒä¸¤æ¬¡è¾“å…¥æ˜¯å¦ä¸€ç›´ï¼‰ validators=[], è‡ªå®šä¹‰éªŒè¯è§„åˆ™ localize=False, æ˜¯å¦æ”¯æŒæœ¬åœ°åŒ– disabled=False, æ˜¯å¦å¯ä»¥ç¼–è¾‘ label_suffix=None Labelå†…å®¹åŽç¼€ CharField(Field) max_length=None, æœ€å¤§é•¿åº¦ min_length=None, æœ€å°é•¿åº¦ strip=True æ˜¯å¦ç§»é™¤ç”¨æˆ·è¾“å…¥ç©ºç™½ IntegerField(Field) max_value=None, æœ€å¤§å€¼ min_value=None, æœ€å°å€¼ FloatField(IntegerField) ... DecimalField(IntegerField) max_value=None, æœ€å¤§å€¼ min_value=None, æœ€å°å€¼ max_digits=None, æ€»é•¿åº¦ decimal_places=None, å°æ•°ä½é•¿åº¦ BaseTemporalField(Field) input_formats=None æ—¶é—´æ ¼å¼åŒ– DateField(BaseTemporalField) æ ¼å¼ï¼š2015-09-01TimeField(BaseTemporalField) æ ¼å¼ï¼š11:12DateTimeField(BaseTemporalField)æ ¼å¼ï¼š2015-09-01 11:12 DurationField(Field) æ—¶é—´é—´éš”ï¼š%d %H:%M:%S.%f ... RegexField(CharField) regex, è‡ªå®šåˆ¶æ­£åˆ™è¡¨è¾¾å¼ max_length=None, æœ€å¤§é•¿åº¦ min_length=None, æœ€å°é•¿åº¦ error_message=None, å¿½ç•¥ï¼Œé”™è¯¯ä¿¡æ¯ä½¿ç”¨ error_messages=&#123;'invalid': '...'&#125; EmailField(CharField) ... FileField(Field) allow_empty_file=False æ˜¯å¦å…è®¸ç©ºæ–‡ä»¶ ImageField(FileField) ... æ³¨ï¼šéœ€è¦PILæ¨¡å—ï¼Œpip3 install Pillow ä»¥ä¸Šä¸¤ä¸ªå­—å…¸ä½¿ç”¨æ—¶ï¼Œéœ€è¦æ³¨æ„ä¸¤ç‚¹ï¼š - formè¡¨å•ä¸­ enctype="multipart/form-data" - viewå‡½æ•°ä¸­ obj = MyForm(request.POST, request.FILES) URLField(Field) ... BooleanField(Field) ... NullBooleanField(BooleanField) ... ChoiceField(Field) ... choices=(), é€‰é¡¹ï¼Œå¦‚ï¼šchoices = ((0,'ä¸Šæµ·'),(1,'åŒ—äº¬'),) required=True, æ˜¯å¦å¿…å¡« widget=None, æ’ä»¶ï¼Œé»˜è®¤selectæ’ä»¶ label=None, Labelå†…å®¹ initial=None, åˆå§‹å€¼ help_text='', å¸®åŠ©æç¤º ModelChoiceField(ChoiceField) ... django.forms.models.ModelChoiceField queryset, # æŸ¥è¯¢æ•°æ®åº“ä¸­çš„æ•°æ® empty_label="---------", # é»˜è®¤ç©ºæ˜¾ç¤ºå†…å®¹ to_field_name=None, # HTMLä¸­valueçš„å€¼å¯¹åº”çš„å­—æ®µ limit_choices_to=None # ModelFormä¸­å¯¹querysetäºŒæ¬¡ç­›é€‰ ModelMultipleChoiceField(ModelChoiceField) ... django.forms.models.ModelMultipleChoiceField TypedChoiceField(ChoiceField) coerce = lambda val: val å¯¹é€‰ä¸­çš„å€¼è¿›è¡Œä¸€æ¬¡è½¬æ¢ empty_value= '' ç©ºå€¼çš„é»˜è®¤å€¼ MultipleChoiceField(ChoiceField) ... TypedMultipleChoiceField(MultipleChoiceField) coerce = lambda val: val å¯¹é€‰ä¸­çš„æ¯ä¸€ä¸ªå€¼è¿›è¡Œä¸€æ¬¡è½¬æ¢ empty_value= '' ç©ºå€¼çš„é»˜è®¤å€¼ ComboField(Field) fields=() ä½¿ç”¨å¤šä¸ªéªŒè¯ï¼Œå¦‚ä¸‹ï¼šå³éªŒè¯æœ€å¤§é•¿åº¦20ï¼ŒåˆéªŒè¯é‚®ç®±æ ¼å¼ fields.ComboField(fields=[fields.CharField(max_length=20), fields.EmailField(),]) MultiValueField(Field) PS: æŠ½è±¡ç±»ï¼Œå­ç±»ä¸­å¯ä»¥å®žçŽ°èšåˆå¤šä¸ªå­—å…¸åŽ»åŒ¹é…ä¸€ä¸ªå€¼ï¼Œè¦é…åˆMultiWidgetä½¿ç”¨ SplitDateTimeField(MultiValueField) input_date_formats=None, æ ¼å¼åˆ—è¡¨ï¼š['%Y--%m--%d', '%m%d/%Y', '%m/%d/%y'] input_time_formats=None æ ¼å¼åˆ—è¡¨ï¼š['%H:%M:%S', '%H:%M:%S.%f', '%H:%M'] FilePathField(ChoiceField) æ–‡ä»¶é€‰é¡¹ï¼Œç›®å½•ä¸‹æ–‡ä»¶æ˜¾ç¤ºåœ¨é¡µé¢ä¸­ path, æ–‡ä»¶å¤¹è·¯å¾„ match=None, æ­£åˆ™åŒ¹é… recursive=False, é€’å½’ä¸‹é¢çš„æ–‡ä»¶å¤¹ allow_files=True, å…è®¸æ–‡ä»¶ allow_folders=False, å…è®¸æ–‡ä»¶å¤¹ required=True, widget=None, label=None, initial=None, help_text='' GenericIPAddressField protocol='both', both,ipv4,ipv6æ”¯æŒçš„IPæ ¼å¼ unpack_ipv4=False è§£æžipv4åœ°å€ï¼Œå¦‚æžœæ˜¯::ffff:192.0.2.1æ—¶å€™ï¼Œå¯è§£æžä¸º192.0.2.1ï¼Œ PSï¼šprotocolå¿…é¡»ä¸ºbothæ‰èƒ½å¯ç”¨ SlugField(CharField) æ•°å­—ï¼Œå­—æ¯ï¼Œä¸‹åˆ’çº¿ï¼Œå‡å·ï¼ˆè¿žå­—ç¬¦ï¼‰ ... UUIDField(CharField) uuidç±»åž‹ å†…ç›´æ’ä»¶12345678910111213141516171819202122TextInput(Input)NumberInput(TextInput)EmailInput(TextInput)URLInput(TextInput)PasswordInput(TextInput)HiddenInput(TextInput)Textarea(Widget)DateInput(DateTimeBaseInput)DateTimeInput(DateTimeBaseInput)TimeInput(DateTimeBaseInput)CheckboxInputSelectNullBooleanSelectSelectMultipleRadioSelectCheckboxSelectMultipleFileInputClearableFileInputMultipleHiddenInputSplitDateTimeWidgetSplitHiddenDateTimeWidgetSelectDateWidget æ ¡éªŒå­—æ®µåŠŸèƒ½åœ¨æ²¡æœ‰ä½¿ç”¨ forms ç»„ä»¶æ—¶ï¼Œå¦‚æžœéœ€è¦å¯¹æ•°æ®è¿›è¡Œæ ¡éªŒï¼Œæ¯”å¦‚æ³¨å†Œæ—¶ï¼Œå¯¹ç”¨æˆ·åæˆ–è€…å¯†ç æœ‰ä½æ•°é™åˆ¶ç­‰ï¼Œæˆ‘ä»¬éœ€è¦é¦–å…ˆèŽ·å–æ•°æ®ç„¶åŽæ‰‹åŠ¨è¿›è¡Œåˆ¤æ–­ï¼Œé‚£ä¹ˆæœ‰äº† forms ç»„ä»¶ï¼Œè¿™äº›äº‹ç»Ÿç»Ÿå¯ä»¥ä¸ç”¨æ‰‹åŠ¨è¿›è¡Œåˆ¤æ–­äº†ï¼Œåªéœ€è¦æŠŠé™åˆ¶æ¡ä»¶ä½œä¸ºå‚æ•°ä¼ è¿›åŽ»é‚£ä¹ˆå°±ä¼šè‡ªåŠ¨è¿›è¡Œåˆ¤æ–­ã€‚ å‰ç«¯ä»£ç 12345678910111213141516&lt;!DOCTYPE html&gt;&lt;html lang="en"&gt;&lt;head&gt; &lt;meta charset="UTF-8"&gt; &lt;title&gt;Title&lt;/title&gt;&lt;/head&gt;&lt;body&gt;&lt;form action="" method="post" novalidate&gt; &lt;p&gt;ç”¨æˆ·å: &lt;input type="text" name="name"&gt;&lt;/p&gt; &lt;p&gt;å¯†ç : &lt;input type="password" name="pwd"&gt;&lt;/p&gt; &lt;p&gt;é‚®ç®±: &lt;input type="email" name="email"&gt;&lt;/p&gt; &lt;input type="submit" value="æäº¤"&gt;&lt;/form&gt;&lt;/body&gt;&lt;/html&gt; åŽç«¯ä»£ç 1234567891011121314151617181920212223242526272829303132333435363738from django import forms# ç»§æ‰¿Formè¿™ä¸ªç±»class MyForm(forms.Form): # é™åˆ¶nameè¿™ä¸ªå­—æ®µæœ€é•¿ä¸º8,æœ€çŸ­ä¸º3 name=forms.CharField(min_length=3,max_length=8,label='ç”¨æˆ·å',required=True,error_messages=&#123;'min_length':'è‡³å°‘ä¸º3','max_length':'æœ€é•¿ä¸º8,æ‚¨å¤ªé•¿äº†'&#125;) pwd=forms.CharField(min_length=3,max_length=8,label='å¯†ç ',error_messages=&#123;'min_length':'è‡³å°‘ä¸º3','max_length':'æœ€é•¿ä¸º8,æ‚¨å¤ªé•¿äº†'&#125;) email=forms.EmailField(label='é‚®ç®±',error_messages=&#123;'invalid':'é‚®ç®±æ ¼å¼ä¸åˆæ³•','required':'è¿™ä¸ªå­—æ®µå¿…å¡«'&#125;)def register(request): if request.method=='GET': # ç”Ÿæˆä¸€ä¸ªç©ºçš„formå¯¹è±¡ myform=MyForm() return render(request,'register.html',locals()) else: # ç”Ÿæˆå¯¹è±¡,ä¼ å‚,ä¼ å­—å…¸,è¦æ ¡éªŒæ•°æ®çš„å­—å…¸ # myform=MyForm(request.POST) # è‡ªå·±å†™è¦æ ¡éªŒçš„å­—å…¸,æ•°æ®å¤šäº†,å¤šçš„æ˜¯ä¸æ ¡éªŒçš„,ä½†æ˜¯cleaned_dataä¸­ä¹Ÿæ²¡æœ‰å¤šå‡ºæ¥çš„æ•°æ® # dic=&#123;'name':'lqz','pwd':'123','email':'22@qq.com','xx':'xxx'&#125; # dic=&#123;'name':'lqz','pwd':'123','email':'22'&#125; dic=&#123;'name':'lqzfgsdfgsdf','pwd':'1','email':'5555'&#125; myform = MyForm(dic) # æ‰€æœ‰å­—å…¸éƒ½æ ¡éªŒé€šè¿‡,å®ƒå°±æ˜¯Trueçš„ if myform.is_valid(): # å–å‡ºæ ¡éªŒé€šè¿‡çš„æ•°æ® clean_data=myform.cleaned_data print(clean_data) # models.UserInfo.objects.create(**clean_data) else: # æ‰€æœ‰çš„é”™è¯¯ä¿¡æ¯ # åªè¦æ˜¯æ ¡éªŒé€šè¿‡çš„å€¼,éƒ½åœ¨cleaned_dataä¸­æ”¾ç€ print(myform.cleaned_data) print(myform.errors.as_data()) # å­—å…¸ç±»åž‹ print(type(myform.errors)) print(myform.errors.get('name')) from django.forms.utils import ErrorDict return HttpResponse('ok') æ¸²æŸ“æ ‡ç­¾åŠŸèƒ½ æ¸²æŸ“æ–¹å¼ä¸€ 1234567&lt;h1&gt;formsçš„æ¨¡æ¿æ¸²æŸ“ä¹‹ä¸€(æŽ¨è)&lt;/h1&gt;&lt;form action="" method="post" novalidate&gt; &lt;p&gt;ç”¨æˆ·å: &#123;&#123; myform.name &#125;&#125;&lt;/p&gt; &lt;p&gt;å¯†ç : &#123;&#123; myform.pwd &#125;&#125;&lt;/p&gt; &lt;p&gt;é‚®ç®±: &#123;&#123; myform.email &#125;&#125;&lt;/p&gt; &lt;input type="submit" value="æäº¤"&gt;&lt;/form&gt; æ¸²æŸ“æ–¹å¼äºŒ 12345678&lt;h1&gt;formsçš„æ¨¡æ¿æ¸²æŸ“ä¹‹äºŒ(æŽ¨è)&lt;/h1&gt;&lt;form action="" method="post" novalidate&gt; &#123;% for item in myform %&#125; &lt;p&gt;&#123;&#123; item.label &#125;&#125;:&#123;&#123; item &#125;&#125;&lt;/p&gt; &#123;% endfor %&#125; &lt;input type="submit" value="æäº¤"&gt;&lt;/form&gt; æ¸²æŸ“æ–¹å¼ä¸‰ 123456789&lt;h1&gt;formsçš„æ¨¡æ¿æ¸²æŸ“ä¹‹ä¸‰&lt;/h1&gt;&lt;form action="" method="post" novalidate&gt;&#123;# &lt;table&gt;#&#125;&#123;# &#123;&#123; myform.as_table &#125;&#125;#&#125;&#123;# &lt;/table&gt;#&#125; &#123;&#123; myform.as_p &#125;&#125; &lt;input type="submit" value="æäº¤"&gt;&lt;/form&gt; æ¸²æŸ“é”™è¯¯ä¿¡æ¯åŠŸèƒ½å‰ç«¯ä»£ç 12345678910111213141516171819202122232425262728293031323334&lt;!DOCTYPE html&gt;&lt;html lang="en"&gt;&lt;head&gt; &lt;meta charset="UTF-8"&gt; &lt;link rel="stylesheet" href="/static/bootstrap-3.3.7-dist/css/bootstrap.css"&gt; &lt;script src="/static/jquery-3.3.1.js"&gt;&lt;/script&gt; &lt;title&gt;æ³¨å†Œ&lt;/title&gt;&lt;/head&gt;&lt;body&gt;&lt;div class="row"&gt; &lt;div class="col-md-6 col-md-offset-3"&gt; &lt;form action="" method="post" novalidate&gt; &#123;% for foo in myform %&#125; &lt;p&gt;&#123;&#123; foo.label &#125;&#125;:&#123;&#123; foo &#125;&#125; &lt;span class="pull-right"&gt;&#123;&#123; foo.errors.0 &#125;&#125;&lt;/span&gt;&lt;/p&gt; &#123;% endfor %&#125; &lt;input type="submit" value="æäº¤"&gt;&lt;span&gt;&#123;&#123;error_all.0 &#125;&#125;&lt;/span&gt; &lt;/form&gt; &lt;hr&gt; &lt;form action="" method="post" novalidate&gt; &lt;p&gt;ç”¨æˆ·å:&#123;&#123; myform.name &#125;&#125; &lt;span&gt;&#123;&#123; myform.errors.name &#125;&#125;&lt;/span&gt;&lt;/p&gt; &lt;p&gt;ç”¨æˆ·å:&#123;&#123; myform.pwd &#125;&#125; &lt;span&gt;&#123;&#123; myform.errors.pwd &#125;&#125;&lt;/span&gt;&lt;/p&gt; &lt;p&gt;ç”¨æˆ·å:&#123;&#123; myform.email &#125;&#125; &lt;span&gt;&#123;&#123; myform.errors.email &#125;&#125;&lt;/span&gt;&lt;/p&gt; &lt;input type="submit" value="æäº¤"&gt; &lt;/form&gt; &lt;/div&gt;&lt;/div&gt;&lt;/body&gt;&lt;/html&gt; åŽç«¯ä»£ç 1234567891011121314151617181920212223242526272829from app01.MyForm import RegFormdef register(request): if request.method == 'GET': myform = RegForm() else: myform = RegForm(request.POST) if myform.is_valid(): # å­˜æ•°æ®åº“,ä¿å­˜è¿™ä¸ªäºº print(myform.cleaned_data) else: # æ ¡éªŒä¸é€šè¿‡,è¿™é‡Œé¢ä¹Ÿå¯èƒ½æœ‰å€¼ # æ€»é”™è¯¯ä¿¡æ¯&#123;'name':['å¤ªé•¿äº†',],'pwd':['å¤ªçŸ­äº†']&#125; # print(myform.cleaned_data) # æ€»é”™è¯¯ # myform.glo_err=myform.errors.get('__all__') error_all = myform.errors.get('__all__') # print() # æ¯ä¸€ä¸ªçš„é”™è¯¯ä¿¡æ¯ # for item in myform: # # ['å¤ªé•¿äº†',] # # print(item.errors[0]) # # print(type(item.errors)) # from django.forms.utils import ErrorList # # print(item.errors.as_data()) # print(item.errors) # # print(type(item.errors)) return render(request, 'register.html', locals()) ç»„ä»¶çš„å‚æ•°è®¾ç½®123456789101112131415161718192021222324252627class RegForm(forms.Form): name = forms.CharField(max_length=8, min_length=3, label='ç”¨æˆ·å', error_messages=&#123;'max_length': 'å¤ªé•¿äº†', 'min_length': 'å¤ªçŸ­äº†', 'required': 'è¯¥é¡¹ä¸èƒ½ä¸ºç©º' &#125;, widget=widgets.TextInput(attrs=&#123;'class': 'form-control'&#125;) ) pwd = forms.CharField(max_length=8, min_length=3, label='å¯†ç ', error_messages=&#123;'max_length': 'å¤ªé•¿äº†', 'min_length': 'å¤ªçŸ­äº†', 'required': 'è¯¥é¡¹ä¸èƒ½ä¸ºç©º' &#125;, widget=widgets.PasswordInput(attrs=&#123;'class': 'form-control'&#125;) ) re_pwd = forms.CharField(max_length=8, min_length=3, label='ç¡®è®¤å¯†ç ', error_messages=&#123;'max_length': 'å¤ªé•¿äº†', 'min_length': 'å¤ªçŸ­äº†', 'required': 'è¯¥é¡¹ä¸èƒ½ä¸ºç©º' &#125;, widget=widgets.PasswordInput(attrs=&#123;'class': 'form-control'&#125;) ) email = forms.EmailField(label='é‚®ç®±', error_messages=&#123;'invalid': 'æ ¼å¼ä¸æ­£ç¡®', 'required': 'è¯¥é¡¹ä¸èƒ½ä¸ºç©º' &#125;, widget=widgets.EmailInput(attrs=&#123;'class': 'form-control'&#125;) ) å±€éƒ¨é’©å­ç»§æ‰¿è‡ª Formç±»çš„æ ¡éªŒç±»ï¼Œå¯ä»¥å¯¹ç±»ä¸­çš„æ¯ä¸ªå­—æ®µè¿›è¡Œæ ¡éªŒï¼Œæ ¡éªŒé€šè¿‡åŽçš„æ•°æ®ä¼šæ”¾åœ¨ clean_dataä¸­ï¼Œæ²¡é€šè¿‡çš„æ”¾åœ¨errorsä¸­ï¼Œå¯ä»¥é€šè¿‡å­—æ®µåå–å€¼ï¼Œé‚£ä¹ˆæ ¡éªŒé€šè¿‡çš„å­—æ®µå¦‚æžœè¿˜éœ€è¦è¿›è¡Œå…¶ä»–çš„åˆ¤æ–­ï¼Œæ¯”å¦‚æ˜¯å¦æœ‰æ•æ„Ÿè¯ï¼Œè¿™äº›å•å•ä¾é å­—æ®µçš„æ ¡éªŒæ˜¯å®Œæˆä¸äº†çš„ã€‚æ‰€ä»¥ Django æä¾›äº†å±€éƒ¨é’©å­å‡½æ•°ï¼Œå½“æ¯ä¸ªå­—æ®µè¿›è¡Œæ ¡éªŒå®ŒæˆåŽä¼šè‡ªåŠ¨è°ƒç”¨è¯¥é’©å­å‡½æ•°ã€‚çœ‹æºç å°±å¾ˆæ¸…æ¥šäº†ã€‚ é¦–å…ˆï¼Œæ‰€æœ‰çš„æ•°æ®æ ¡éªŒéƒ½æ˜¯è°ƒç”¨äº† Form å¯¹è±¡çš„ is_valid()æ–¹æ³•è¿›è¡Œçš„ã€‚æ‰€ä»¥è¿›å…¥is_valid()æ–¹æ³•ã€‚ self.is_boundä¸º Trueï¼Œæ‰€ä»¥è¿›å…¥self.errorsæ–¹æ³•ï¼Œä¸ºä»€ä¹ˆæ²¡åŠ æ‹¬å·å‘¢ï¼Œå› ä¸ºè¢«propertyè£…é¥°äº†ï¼Œå˜æˆäº†å±žæ€§ã€‚ self._errorsä¸ºNoneï¼Œè¿›å…¥full_clean()æ–¹æ³•ã€‚ åœ¨è¿™ä¸ªæ–¹æ³•é‡Œï¼Œé¦–å…ˆå®šä¹‰äº†cleaned_dataä¸ºä¸€ä¸ªç©ºå­—å…¸ï¼Œç„¶åŽå°±æ˜¯ä¸‹é¢çš„ä¸‰ä¸ªæ–¹æ³•ï¼š _clean_fields()ï¼šè§åæ€ä¹‰ï¼Œè¿™ä¸ªæ–¹æ³•æ˜¯ç”¨æ¥æ ¡éªŒå­—æ®µçš„ï¼Œå°±æ˜¯ç»§æ‰¿è‡ª Form ä¸­ç±»é‡Œé¢å®šä¹‰çš„å­—æ®µã€‚ å…‰çœ‹æºç ä¸çœ‹ä¾‹å­å¾ˆéš¾ç†è§£ï¼Œ 1234class MyForm(forms.Form): name = forms.CharField(min_length=3, max_length=8, label='ç”¨æˆ·å', required=True, error_messages=&#123;'min_length': 'ç”¨æˆ·åé•¿åº¦è‡³å°‘ä¸ºä¸‰ä½', 'max_length': 'ç”¨æˆ·åé•¿åº¦æœ€é•¿ä¸ºå…«ä½', &#125;) pwd = forms.CharField(min_length=3, max_length=8, label='å¯†ç ', required=True, error_messages=&#123;'min_length': 'ç”¨æˆ·åé•¿åº¦è‡³å°‘ä¸ºä¸‰ä½', 'max_length': 'ç”¨æˆ·åé•¿åº¦æœ€é•¿ä¸ºå…«ä½', &#125;) email = forms.EmailField(label='é‚®ç®±', error_messages=&#123;'invalid': 'é‚®ç®±æ ¼å¼ä¸åˆæ³•', 'required': 'è¯¥å­—æ®µå¿…å¡«'&#125;) åœ¨self.fieldsä¸­æ”¾çš„æ˜¯ä¸€ä¸ªä¸ªé”®å€¼å¯¹ï¼Œæ¯”å¦‚åœ¨ä¸Šé¢çš„MyFormé‡Œé¢çš„å­—æ®µnameå’ŒåŽé¢çš„CharFieldç±»çš„ä¸€ä¸ªå¯¹è±¡çš„å¯¹åº”å…³ç³»ï¼Œé‚£ä¹ˆåœ¨self.fieldsé‡Œé¢å°±æœ‰ä¸‰ä¸ªå¯¹åº”å…³ç³»ï¼Œä¹Ÿå°±æ˜¯æœ‰ä¸‰ä¸ªé”®å€¼å¯¹ã€‚ å¾€ä¸‹èµ°ï¼Œå­—å…¸çš„items()æ–¹æ³•ï¼ŒæŠŠMyFormé‡Œé¢çš„å­—æ®µå€¼èµ‹ç»™äº†nameï¼ŒæŠŠå­—æ®µæŒ‡å‘çš„ç±»å¯¹è±¡èµ‹ç»™äº†fieldï¼Œä¹‹åŽè¿›è¡Œåˆ¤æ–­ï¼Œif field.disable:ï¼Œè¿™ä¸ªåˆ¤æ–­æ˜¯åˆ¤æ–­ç±»å¯¹è±¡çš„æŸä¸ªå±žæ€§å€¼ï¼Œå¯ä»¥çŸ¥é“åœ¨å®šä¹‰å­—æ®µæ—¶ï¼Œå¹¶æ²¡æœ‰å®šä¹‰è¿™ä¸ªå€¼ï¼Œé‚£ä¹ˆè¿™ä¸ªå€¼æ˜¯å¦æœ‰é»˜è®¤å€¼ï¼Œè¿›å…¥forms.CharFieldä¸­æŸ¥çœ‹ï¼Œ å¯ä»¥çœ‹å‡ºè¯¥ç±»ä¸­æ²¡æœ‰ï¼Œé‚£ä¹ˆåŽ»çˆ¶ç±»ä¸­æŸ¥çœ‹ä¹Ÿå°±æ˜¯Fieldï¼š æ‰¾åˆ°äº†ï¼Œé»˜è®¤ä¸º Falseï¼Œ æ‰€ä»¥è¯´if field.disables:ä¸º Falseï¼Œ å°±èµ°åˆ°äº†ä¸‹ä¸€æ­¥ï¼š value = field.widget.value_from_datadict(self.data, self.files, self.add_prefix(name))è¿™å¥çœ‹ä¸æ‡‚ï¼ŒæŽ¥ç€å¾€ä¸‹èµ°ï¼š é¦–å…ˆï¼Œå’±ä»¬å®šä¹‰çš„éƒ½ä¸æ˜¯FileFieldå­—æ®µï¼Œæ‰€ä»¥èµ°value=field.clean(value)ï¼š å› ä¸ºæ˜¯å­—æ®µçš„æ–¹æ³•ï¼Œæ‰€ä»¥æ‰¾forms.CharFieldï¼Œåœ¨Fieldç±»ä¸­æ‰¾åˆ°ï¼š è¿™é‡Œé¢æœ‰ç‚¹ç»•ï¼Œæˆ‘å…ˆæŠŠé¡ºåºå†™å‡ºæ¥ï¼š é¦–å…ˆè¦çŸ¥é“valueåˆ°åº•æ˜¯ä»€ä¹ˆï¼š åœ¨ä¸Šé¢è¯´è¿‡è°ƒç”¨äº†field.widget.value_from_datadict(self.data, self.files, self.add_prefix(name))æ–¹æ³•ï¼Œæ˜¯å­—æ®µçš„æ–¹æ³•ï¼Œ åœ¨CharFieldä¸­æ²¡æ‰¾åˆ°widgetï¼ŒåŽ»Fieldä¸­å¯»æ‰¾ï¼Œ å¯ä»¥çœ‹åˆ°widget=TextInputï¼Œæ‰€ä»¥è‚¯å®šæ˜¯è°ƒç”¨äº†Textinputçš„value_from_datadictæ–¹æ³•ï¼Œ æ²¡æœ‰ï¼ŒåŽ»Inputï¼Œ è¿˜æ˜¯æ²¡æœ‰ï¼ŒåŽ»Widgetï¼Œ æ‰¾åˆ°ï¼Œè¿”å›žäº†data.get(name)ï¼Œå¾ˆæ˜¾ç„¶è¿™æ˜¯å­—å…¸çš„å–å€¼æ–¹æ³•ï¼Œä½†æ˜¯dataæ˜¯ä»€ä¹ˆå‘¢ï¼Ÿ dataæ˜¯ä¸ªQueryDictå¯¹è±¡ï¼Œæ‰¾åˆ°nameæ˜¯ä»€ä¹ˆï¼Œå°±å¯ä»¥çŸ¥é“valueæ˜¯ä»€ä¹ˆäº†ã€‚ å¯ä»¥çŸ¥é“nameæ˜¯é€šè¿‡self.add_prefix(name)èŽ·å–çš„ï¼Œè¿›å…¥ï¼š æ˜¯ä¸ªä¸‰å…ƒè¡¨è¾¾å¼ï¼Œå…³é”®åœ¨äºŽself.prefixçš„å€¼æ˜¯å¤šå°‘ã€‚è¿™æ˜¯ä¸ªå¯¹è±¡å±žæ€§ï¼Œå¾ˆæ˜¾ç„¶åŽ»ç±»ä¸­æ‰¾ï¼š æ‰€ä»¥è¿™ä¸ªä¸‰å…ƒè¡¨è¾¾å¼çš„å€¼å°±æ˜¯MyFormä¸­å®šä¹‰çš„å­—æ®µåï¼Œæ‰€ä»¥é€šè¿‡data.get(name)å–å¾—å€¼å°±æ˜¯ä¸Šä¼ çš„å€¼ï¼Œæ¯”å¦‚musibiiã€‚ é‚£ä¹ˆæ‰§è¡Œfield.clean(value)ç›¸å½“äºŽæŠŠmusibiiä¼ è¿›åŽ»æ‰§è¡Œï¼Œ åœ¨field.cleanæ–¹æ³•ä¸­ï¼š to_python(â€˜musibiiâ€™)ï¼šå› ä¸ºCharFieldä¸­å®šä¹‰äº†to_pythonæ–¹æ³•ï¼Œæ‰€ä»¥è¿›å…¥è‡ªå·±çš„æ–¹æ³•; musibiiä¸æ˜¯Noneï¼Œç©ºå­—ç¬¦ä¸²ã€ç©ºå­—å…¸ã€ç©ºå…ƒç¥–ï¼Œæ‰€ä»¥è¿›å…¥forece_text(&#39;musibii&#39;)æ–¹æ³•ï¼š åˆ«çœ‹è¿™ä¹ˆå¤šï¼Œå…¶å®žå°±è¿›è¡Œäº†ä¸€æ­¥åˆ¤æ–­ï¼šif issubclass(type(&#39;musibii&#39;), six.text_type):å› ä¸ºè¿™ä¸ªåˆ¤æ–­ä¸ºTrueï¼Œ æ‰€ä»¥ç›´æŽ¥æŠŠmusibiiè¿”å›žã€‚ç„¶åŽåˆ¤æ–­if self.strip:å› ä¸ºè¯¥å‚æ•°é»˜è®¤ä¸ºTrueï¼Œæ‰€ä»¥value=value.strip()ï¼Œé»˜è®¤æ˜¯é€šè¿‡ç©ºæ ¼è¿›è¡Œåˆ†å‰²çš„ï¼Œèµ°å®ŒåŽåŽè¿›å…¥self.valitate(&#39;musibii&#39;)ï¼Œ ç›´æŽ¥é€€å‡ºè¿›å…¥run_validators(&#39;musibii&#39;)ï¼Œ åœ¨è¿™ä¸ªæ–¹æ³•é‡Œé¢ï¼Œä¸»è¦æ˜¯è¿›è¡Œäº†å­—æ®µçš„ä¸€äº›é™åˆ¶æ ¡éªŒï¼Œæ¯”å¦‚é•¿åº¦ç­‰ï¼Œmusibiiæ²¡æœ‰é”™è¯¯ï¼Œè¿”å›žmusibiiï¼Œç„¶åŽæŠŠè¯¥æ•°æ®åŠ åˆ°self.cleaned_dataä¸­ï¼Œè¡¨ç¤ºè¿™ä¸ªæ•°æ®æ˜¯æˆåŠŸé€šè¿‡æ ¡éªŒçš„ã€‚ è¿™å¥ä»£ç æ˜¯åå°„ç”¨æ³•ï¼Œåˆ¤æ–­selfæ˜¯å¦å…·æœ‰clean_nameå±žæ€§ï¼Œï¼ˆname å˜é‡çš„å€¼ä¸º nameï¼‰ï¼Œå› ä¸ºæ²¡æœ‰ï¼Œæ‰€ä»¥ç¬¬ä¸€ä¸ªå­—æ®µçš„æ ¡éªŒç»“æŸï¼Œè¿›è¡Œç¬¬äºŒä¸ªå­—æ®µçš„æ ¡éªŒã€‚ å¦‚æžœæˆ‘ä»¬åœ¨MyFormç±»ä¸­å®šä¹‰äº†clean_nameæˆ–è€…clean_pwdæˆ–è€…clean_emailæ–¹æ³•ï¼Œå¦‚æžœåœ¨_clean_fieldsæ–¹æ³•ä¸­é€šè¿‡æ ¡éªŒå°±ä¼šæ‰§è¡Œè‡ªå®šä¹‰çš„æ ¡éªŒæ–¹æ³•ï¼Œè¿™å°±æ˜¯å±€éƒ¨é’©å­ã€‚ 12345678910111213141516171819202122232425262728293031323334353637383940414243444546class RegForm(forms.Form): name = forms.CharField(max_length=8, min_length=3, label='ç”¨æˆ·å', error_messages=&#123;'max_length': 'å¤ªé•¿äº†', 'min_length': 'å¤ªçŸ­äº†', 'required': 'è¯¥é¡¹ä¸èƒ½ä¸ºç©º' &#125;, widget=widgets.TextInput(attrs=&#123;'class': 'form-control'&#125;) ) pwd = forms.CharField(max_length=8, min_length=3, label='å¯†ç ', error_messages=&#123;'max_length': 'å¤ªé•¿äº†', 'min_length': 'å¤ªçŸ­äº†', 'required': 'è¯¥é¡¹ä¸èƒ½ä¸ºç©º' &#125;, widget=widgets.PasswordInput(attrs=&#123;'class': 'form-control'&#125;) ) re_pwd = forms.CharField(max_length=8, min_length=3, label='ç¡®è®¤å¯†ç ', error_messages=&#123;'max_length': 'å¤ªé•¿äº†', 'min_length': 'å¤ªçŸ­äº†', 'required': 'è¯¥é¡¹ä¸èƒ½ä¸ºç©º' &#125;, widget=widgets.PasswordInput(attrs=&#123;'class': 'form-control'&#125;) ) email = forms.EmailField(label='é‚®ç®±', error_messages=&#123;'invalid': 'æ ¼å¼ä¸æ­£ç¡®', 'required': 'è¯¥é¡¹ä¸èƒ½ä¸ºç©º' &#125;, widget=widgets.EmailInput(attrs=&#123;'class': 'form-control'&#125;) ) # clean_å­—æ®µåå­— def clean_name(self): # ä»Žcleaned_dataä¸­å–å‡ºå­—æ®µçš„å€¼ name = self.cleaned_data.get('name') # # æ ¡éªŒæ˜¯å¦ä»¥sbå¼€å¤´ if name.startswith('sb'): raise ValidationError('ä¸èƒ½ä»¥sbå¼€å¤´') else: return name # user = models.UserInfo.objects.filter(name=name).first() # if user: # # ç”¨æˆ·å·²ç»å­˜åœ¨,æ ¡éªŒä¸é€šè¿‡,æŠ›ä¸€ä¸ªå¼‚å¸¸ # raise ValidationError('è¯¥ç”¨æˆ·å·²ç»å­˜åœ¨') # # else: # # æ ¡éªŒé€šè¿‡,è¿”å›žè¦æ ¡éªŒçš„æ•°æ® # return name # def clean_pwd(self): # pass åœ¨è¿™é‡Œï¼Œå¦‚æžœnameå­—æ®µæ ¡éªŒé€šè¿‡å°±ä¼šæ‰§è¡Œclean_nameè¿™ä¸ªæ–¹æ³•è¿›è¡Œè¿›ä¸€æ­¥çš„æ ¡éªŒã€‚ å…¨å±€é’©å­ å½“_clean_fieldsè¿è¡Œç»“æŸåŽä¼šæ‰§è¡Œ_clean_formæ–¹æ³•ï¼Œ å¦‚æžœMyFormä¸­å®šä¹‰äº†cleanæ–¹æ³•çš„è¯å°±ä¼šæ‰§è¡Œè¯¥æ–¹æ³•ï¼š 123456789def clean(self): pwd=self.cleaned_data.get('pwd') re_pwd=self.cleaned_data.get('re_pwd') if pwd==re_pwd: # æ­£ç¡®,è¿”å›žself.cleaned_data return None else: # æ ¡éªŒå¤±è´¥,æŠ›å¼‚å¸¸ raise ValidationError('ä¸¤æ¬¡å¯†ç ä¸ä¸€è‡´') æ¯”å¦‚è¦åˆ¤æ–­ä¸¤æ¬¡å¯†ç æ˜¯å¦ä¸€è‡´å°±å¯ä»¥å®šä¹‰ä¸€ä¸ªå…¨å±€é’©å­å‡½æ•°ã€‚ åº”ç”¨æ¨¡æ¿å±‚12345678910111213141516171819202122&lt;!DOCTYPE html&gt;&lt;html lang="en"&gt;&lt;head&gt; &lt;meta charset="UTF-8"&gt; &lt;link rel="stylesheet" href="/static/bootstrap-3.3.7-dist/css/bootstrap.css"&gt; &lt;script src="/static/jquery-3.3.1.js"&gt;&lt;/script&gt; &lt;title&gt;æ³¨å†Œ&lt;/title&gt;&lt;/head&gt;&lt;body&gt;&lt;div class="row"&gt; &lt;div class="col-md-6 col-md-offset-3"&gt; &lt;form action="" method="post" novalidate&gt; &#123;% for foo in myform %&#125; &lt;p&gt;&#123;&#123; foo.label &#125;&#125;:&#123;&#123; foo &#125;&#125; &lt;span class="pull-right"&gt;&#123;&#123; foo.errors.0 &#125;&#125;&lt;/span&gt;&lt;/p&gt; &#123;% endfor %&#125; &lt;input type="submit" value="æäº¤"&gt;&lt;span&gt;&#123;&#123;error_all.0 &#125;&#125;&lt;/span&gt; &lt;/form&gt; &lt;/div&gt;&lt;/div&gt;&lt;/body&gt;&lt;/html&gt; è§†å›¾å±‚1234567891011121314151617181920212223242526def register(request): if request.method == 'GET': myform = RegForm() else: myform = RegForm(request.POST) if myform.is_valid(): # å­˜æ•°æ®åº“,ä¿å­˜è¿™ä¸ªäºº print(myform.cleaned_data) else: # æ ¡éªŒä¸é€šè¿‡,è¿™é‡Œé¢ä¹Ÿå¯èƒ½æœ‰å€¼ # æ€»é”™è¯¯ä¿¡æ¯&#123;'name':['å¤ªé•¿äº†',],'pwd':['å¤ªçŸ­äº†']&#125; # print(myform.cleaned_data) # æ€»é”™è¯¯ # myform.glo_err=myform.errors.get('__all__') error_all = myform.errors.get('__all__') # print() # æ¯ä¸€ä¸ªçš„é”™è¯¯ä¿¡æ¯ # for item in myform: # # ['å¤ªé•¿äº†',] # # print(item.errors[0]) # # print(type(item.errors)) # from django.forms.utils import ErrorList # # print(item.errors.as_data()) # print(item.errors) # # print(type(item.errors)) return render(request, 'register.html', locals()) å…¨å±€é’©å­äº§ç”Ÿçš„é”™è¯¯ä¼šæ”¾åˆ°myform.errors[__all__]ä¸­]]></content>
      <categories>
        <category>Django</category>
      </categories>
  </entry>
  <entry>
    <title><![CDATA[Djangoï¼ˆåäº”ï¼‰]]></title>
    <url>%2F2019%2F01%2F20%2FDjango%EF%BC%88%E5%8D%81%E4%BA%94%EF%BC%89%2F</url>
    <content type="text"><![CDATA[Django ç³»åˆ—åšå®¢ï¼ˆåäº”ï¼‰å‰è¨€æœ¬ç¯‡åšå®¢ä»‹ç»ä½¿ç”¨ Django çš„åˆ†é¡µå™¨ç»„ä»¶å®Œæˆåˆ†é¡µåŠŸèƒ½ã€‚ åˆ†é¡µå™¨ç®€ä»‹åœ¨é¡µé¢æ•°æ®é‡è¿‡å¤šæ—¶ï¼Œä¸€æ¬¡æ€§æ˜¾ç¤ºæ‰€æœ‰é¡µé¢ä¼šé€ æˆé¡µé¢ä¸ç¾Žè§‚ï¼Œè¿™æ—¶å€™éœ€è¦åˆ†é¡µï¼Œä¸ä¸€æ¬¡æ€§æ˜¾ç¤ºæ‰€æœ‰é¡µé¢ï¼Œéšå½“å‰é¡µçš„å˜åŒ–è€ŒåŠ¨æ€æ”¹å˜åˆ†é¡µåŒºé—´ã€‚ åˆ†é¡µå™¨ç»„ä»¶å¸¸ç”¨æ–¹æ³•1234567891011121314from django.core.paginator import PaginatorPaginatorå¯¹è±¡ï¼špaginator = Paginator(object_list, 10) # 10ä¸ºæ¯é¡µä¸ºåæ¡æ•°æ®paginator.per_page: æ¯é¡µæ˜¾ç¤ºæ¡æ•° # ä¸º10paginator.count: æ•°æ®æ€»æ•°paginator.num_pages: æ€»é¡µæ•°paginator.page_range: æ€»é¡µæ•°çš„ç´¢å¼•èŒƒå›´ï¼Œå¦‚ï¼š(1, 10), (1, 100)pageå¯¹è±¡ï¼špage = paginator.page(current_page)page.has_next: æ˜¯å¦æœ‰ä¸‹ä¸€é¡µpage.next_page_number: ä¸‹ä¸€é¡µé¡µç page.has_previous: æ˜¯å¦æœ‰ä¸Šä¸€é¡µpage.object_list: åˆ†é¡µä¹‹åŽçš„æ•°æ®åˆ—è¡¨page.paginator: paginator å¯¹è±¡ view å±‚æ‰¹é‡æ’å…¥æ•°æ®1234567def pagetest(request): # æ‰¹é‡æ’å…¥æ•°æ® li = [] for i in range(100): li.append(UserInfo.objects.create(name='musibii%s' %i, pwd='woloveyou%s' %i)) ret = UserInfo.objects.bulk_create(li, 20) return HttpResponse('ok') é€»è¾‘ä»£ç 1234567891011121314151617181920def pagelist(request): user = UserInfo.objects.all().order_by('pk') paginator = Paginator(user, 3) try: currentpage = int(request.GET.get('page', 1)) # page = paginator.page(currentpage) print(currentpage) except: currentpage = 1 page = paginator.page(currentpage) if paginator.num_pages &gt; 11: if currentpage - 5 &lt;= 1 : page_range = range(1, 12) elif currentpage + 5 &gt;= paginator.num_pages: page_range = range(paginator.num_pages-10, paginator.num_pages+1) else: page_range = range(currentpage - 5, currentpage + 6) else: page_range = paginator.page_range return render(request, 'pagelist.html', locals()) æ¨¡æ¿å±‚123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475&lt;!DOCTYPE html&gt;&lt;html&gt;&lt;head&gt; &lt;meta charset="UTF-8"&gt; &lt;title&gt;pagelist&lt;/title&gt; &lt;link rel="stylesheet" href="/static/bootstrap-3.3.7-dist/css/bootstrap.css"&gt;&lt;/head&gt;&lt;body&gt;&lt;div class="container-fluid"&gt; &lt;div class="row"&gt; &lt;div class="col-md-offset-3 col-md-6"&gt; &lt;table class="table"&gt; &lt;thead&gt; &lt;tr&gt; &lt;th&gt;ç¼–å·&lt;/th&gt; &lt;th&gt;å§“å&lt;/th&gt; &lt;th&gt;å¯†ç &lt;/th&gt; &lt;/tr&gt; &lt;/thead&gt; &lt;tbody&gt; &#123;% for user in page %&#125; &lt;tr&gt; &lt;td&gt;&#123;&#123; forloop.counter &#125;&#125;&lt;/td&gt; &lt;td&gt;&#123;&#123; user.name &#125;&#125;&lt;/td&gt; &lt;td&gt;&#123;&#123; user.pwd &#125;&#125;&lt;/td&gt; &lt;/tr&gt; &#123;% endfor %&#125; &lt;/tbody&gt; &lt;/table&gt; &lt;nav aria-label="Page navigation"&gt; &lt;ul class="pagination"&gt; &#123;% if page.has_previous %&#125; &lt;li&gt; &lt;a href="/pagelist/?page=&#123;&#123; page.previous_page_number &#125;&#125;" aria-label="Previous"&gt; &lt;span aria-hidden="true"&gt;ä¸Šä¸€é¡µ&lt;/span&gt; &lt;/a&gt; &lt;/li&gt; &#123;% else %&#125; &lt;li class="disabled"&gt; &lt;a href="#" aria-label="Previous"&gt; &lt;span aria-hidden="true"&gt;ä¸Šä¸€é¡µ&lt;/span&gt; &lt;/a&gt; &lt;/li&gt; &#123;% endif %&#125; &#123;% for foo in page_range %&#125; &#123;% if currentpage == foo %&#125; &lt;li class="active"&gt;&lt;a href="/pagelist/?page=&#123;&#123; foo &#125;&#125;"&gt;&#123;&#123; foo &#125;&#125;&lt;/a&gt;&lt;/li&gt; &#123;% else %&#125; &lt;li&gt;&lt;a href="/pagelist/?page=&#123;&#123; foo &#125;&#125;"&gt;&#123;&#123; foo &#125;&#125;&lt;/a&gt;&lt;/li&gt; &#123;% endif %&#125; &#123;% endfor %&#125; &#123;% if page.has_next %&#125; &lt;li&gt; &lt;a href="/pagelist/?page=&#123;&#123; page.next_page_number &#125;&#125;" aria-label="Previous"&gt; &lt;span aria-hidden="true"&gt;ä¸‹ä¸€é¡µ&lt;/span&gt; &lt;/a&gt; &lt;/li&gt; &#123;% else %&#125; &lt;li class="disabled"&gt; &lt;a href="#" aria-label="Previous"&gt; &lt;span aria-hidden="true"&gt;ä¸‹ä¸€é¡µ&lt;/span&gt; &lt;/a&gt; &lt;/li&gt; &#123;% endif %&#125; &lt;/ul&gt; &lt;/nav&gt; &lt;/div&gt; &lt;/div&gt;&lt;/div&gt;&lt;/body&gt;&lt;/html&gt;]]></content>
      <categories>
        <category>Django</category>
      </categories>
  </entry>
  <entry>
    <title><![CDATA[Djangoï¼ˆåå››ï¼‰]]></title>
    <url>%2F2019%2F01%2F17%2FDjango%EF%BC%88%E5%8D%81%E5%9B%9B%EF%BC%89%2F</url>
    <content type="text"><![CDATA[Django ç³»åˆ—åšå®¢ï¼ˆåå››ï¼‰å‰è¨€æœ¬ç¯‡åšå®¢ä»‹ç»åœ¨ html ä¸­ä½¿ç”¨ ajax ä¸ŽåŽå°è¿›è¡Œæ•°æ®äº¤äº’ã€‚ ä»€ä¹ˆæ˜¯ ajaxajaxï¼ˆAsynchronous Javascript And XMLï¼‰ç¿»è¯‘æˆä¸­æ–‡å°±æ˜¯â€˜â€™å¼‚æ­¥ JavaScript å’Œ XMLâ€˜â€™ã€‚å³ä½¿ç”¨ JavaScript è¯­è¨€ä¸ŽæœåŠ¡å™¨è¿›è¡Œå¼‚æ­¥äº¤äº’ï¼Œä¼ è¾“çš„æ•°æ®ä¸º XMLï¼ˆçŽ°åœ¨æ›´å¤šåœ°ä½¿ç”¨ jsonï¼‰ã€‚ åŒæ­¥äº¤äº’ï¼šå®¢æˆ·ç«¯å‘å‡ºä¸€ä¸ªè¯·æ±‚åŽï¼Œéœ€è¦ç­‰å¾…æœåŠ¡å™¨å“åº”ç»“æŸï¼Œæ‰èƒ½å‘å‡ºç¬¬äºŒä¸ªè¯·æ±‚ï¼› å¼‚æ­¥äº¤äº’ï¼šå®¢æˆ·ç«¯å‘å‡ºä¸€ä¸ªè¯·æ±‚åŽï¼Œæ— éœ€ç­‰å¾…æœåŠ¡å™¨å“åº”ç»“æŸï¼Œä¹Ÿèƒ½å‘å‡ºç¬¬äºŒä¸ªè¯·æ±‚ã€‚ ajax é™¤äº†å¼‚æ­¥çš„ç‰¹ç‚¹å¤–ï¼Œè¿˜æœ‰ä¸€ä¸ªå°±æ˜¯ï¼šæµè§ˆå™¨é¡µé¢å±€éƒ¨åˆ·æ–°ã€‚åœ¨é¡µé¢æ²¡æœ‰è¿›è¡Œåˆ·æ–°çš„æƒ…å†µä¸‹è¿›è¡Œæ•°æ®äº¤äº’ã€‚ ä¼˜ç‚¹ï¼š ajax ä½¿ç”¨JavaScript æŠ€æœ¯å‘æœåŠ¡å™¨å‘é€å¼‚æ­¥è¯·æ±‚ï¼› ajax æ— éœ€åˆ·æ–°æ•´ä¸ªé¡µé¢ã€‚ åŸºäºŽ jQuery çš„ ajax å®žçŽ°å‰ç«¯ä»£ç 123456789101112131415161718192021222324252627282930313233343536373839&lt;!DOCTYPE html&gt;&lt;html&gt;&lt;head&gt; &lt;meta charset="UTF-8"&gt; &lt;script src="/static/jquery-3.3.1.js"&gt;&lt;/script&gt; &lt;title&gt;regist&lt;/title&gt;&#123;# &lt;link rel="stylesheet" href="/static/jquery-3.3.1.js"&gt;#&#125;&lt;/head&gt;&lt;body&gt;&lt;p&gt;ç”¨æˆ·ï¼š&lt;input type="text" id="name"&gt;&lt;/p&gt;&lt;p&gt;å¯†ç ï¼š&lt;input type="password" id="pwd"&gt;&lt;/p&gt;&lt;p&gt;ç¡®è®¤å¯†ç ï¼š&lt;input type="password" id="tpwd"&gt;&lt;/p&gt;&lt;input type="button" id="submit" value="æäº¤"&gt;&lt;span id="error"&gt;&lt;/span&gt;&lt;/body&gt;&lt;script&gt; $('#submit').click(function () &#123; console.log($('#submit')); &#123;#$.ajax(&#123;#&#125; &#123;# url:'/regist/',#&#125; &#123;# type:'post',#&#125; &#123;# data:&#123;name:$("#name").val(), pwd:$("#pwd").val(), tpwd:$("#tpwd")&#125;,#&#125; &#123;# success:function (data) &#123;#&#125; &#123;# console.log(data)#&#125; &#123;# &#125;#&#125; $.ajax(&#123; url:'/regist/', type:'post', data:&#123;name:$("#name").val(), pwd:$("#pwd").val(), tpwd:$("#tpwd").val()&#125;, success:function (data) &#123; console.log(data) &#125; &#125;) &#125;)&lt;/script&gt;&lt;/html&gt; åŽç«¯ä»£ç 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778from django.http import JsonResponsefrom django.shortcuts import render, redirectfrom app01.models import *# Create your views here.def wrapper(func): def inner(*args, **kwargs): if args[0].method == 'GET': return func(*args, **kwargs) elif kwargs['contentType'] == 'application/json': import json args[0].POST = json.loads(args[0].body) return func(*args, **kwargs) else: return func(*args, **kwargs) return innerimport json# json.loads()def regist(request): dic = &#123;'status': 200, 'msg': None&#125; print(request.body) if request.method == 'GET': return render(request, 'regist.html') else: print('/////') print(request.POST, 'dddd') name = request.POST.get('name') pwd = request.POST.get('pwd') tpwd = request.POST.get('tpwd') user = UserInfo.objects.filter(name=name).first() if user: dic['status'] = 100 dic['msg'] = 'ç”¨æˆ·å·²å­˜åœ¨' return JsonResponse(dic) else: if name and pwd and tpwd: if pwd == tpwd: UserInfo.objects.create(name=name, pwd=pwd) dic['msg'] = 'æ³¨å†ŒæˆåŠŸ' return JsonResponse(dic) else: dic['status'] = 101 dic['msg'] = 'ä¸¤æ¬¡å¯†ç ä¸ä¸€æ ·' return JsonResponse(dic) else: dic['status'] = 101 dic['msg'] = 'å¯†ç ä¸æ­£ç¡®' return JsonResponse(dic)@wrapperdef login(request): dic = &#123;'status': 200, 'msg': None&#125; if request.method == 'GET': return render(request, 'login.html') else: name = request.POST.get('name') pwd = request.POST.get('pwd') user = UserInfo.objects.filter(name=name).first() if not user: dic['status'] = 100 dic['msg'] = 'ç”¨æˆ·ä¸å­˜åœ¨ï¼Œè¯·æ³¨å†Œ' return JsonResponse(dic) else: if pwd == user.pwd: dic['msg'] = 'ç™»é™†æˆåŠŸ' return JsonResponse(dic) else: dic['status'] = 101 dic['msg'] = 'å¯†ç é”™è¯¯' return JsonResponse(dic) jsä»£ç 1234567891011121314151617181920212223$("#submit3").click(function () &#123; $.ajax(&#123; url: '/auth/', type: 'post', data: &#123; 'user': $("#id_name").val(), 'password': $('#id_password').val() &#125;, success: function (data) &#123; &#123;#console.log(data)#&#125; var data=JSON.parse(data) if (data.user)&#123; location.href='https://www.baidu.com' &#125;else &#123; $(".error").html(data.message).css(&#123;'color':'red','margin-left':'20px'&#125;) &#125; &#125; &#125;) &#125; ) æ–‡ä»¶ä¸Šä¼ è¯·æ±‚å¤´ application/x-www-form-urlencoded è¿™æ˜¯æœ€å¸¸è§çš„ POST æäº¤æ•°æ®çš„æ–¹å¼äº†ã€‚æµè§ˆå™¨çš„åŽŸç”Ÿè¡¨å•ï¼Œå¦‚æžœä¸è®¾ç½® enctype å±žæ€§ï¼Œé‚£ä¹ˆæœ€ç»ˆä¼šä»¥ application/x-www-form-urlencodedæ–¹å¼æäº¤æ•°æ®ã€‚ç±»ä¼¼äºŽä¸‹é¢ï¼š 1234POST http://www.example.com HTTP/1.1Content-Type: application/x-www-form-urlencoded;charset=utf-8è¯·æ±‚ä½“ multipart/form-data å½“æˆ‘ä»¬ä½¿ç”¨è¡¨å•ä¸Šä¼ æ–‡ä»¶æ—¶ï¼Œå¿…é¡»è®©è¡¨å•çš„ enctype ç­‰äºŽmultipart/form-dataã€‚ 12345678910111213POST http://www.example.com HTTP/1.1Content-Type:multipart/form-data; boundary=----WebKitFormBoundaryrGKCBY7qhFd3TrwA------WebKitFormBoundaryrGKCBY7qhFd3TrwAContent-Disposition: form-data; name=&quot;user&quot;yuan------WebKitFormBoundaryrGKCBY7qhFd3TrwAContent-Disposition: form-data; name=&quot;file&quot;; filename=&quot;chrome.png&quot;Content-Type: image/pngPNG ... content of chrome.png ...------WebKitFormBoundaryrGKCBY7qhFd3TrwA-- è¿™ä¸ªä¾‹å­ç¨å¾®å¤æ‚ç‚¹ã€‚é¦–å…ˆç”Ÿæˆäº†ä¸€ä¸ª boundary ç”¨äºŽåˆ†å‰²ä¸åŒçš„å­—æ®µï¼Œä¸ºäº†é¿å…ä¸Žæ­£æ–‡å†…å®¹é‡å¤ï¼Œboundary å¾ˆé•¿å¾ˆå¤æ‚ã€‚ç„¶åŽ Content-Type é‡ŒæŒ‡æ˜Žäº†æ•°æ®æ˜¯ä»¥ multipart/form-data æ¥ç¼–ç ï¼Œæœ¬æ¬¡è¯·æ±‚çš„ boundary æ˜¯ä»€ä¹ˆå†…å®¹ã€‚æ¶ˆæ¯ä¸»ä½“é‡ŒæŒ‰ç…§å­—æ®µä¸ªæ•°åˆåˆ†ä¸ºå¤šä¸ªç»“æž„ç±»ä¼¼çš„éƒ¨åˆ†ï¼Œæ¯éƒ¨åˆ†éƒ½æ˜¯ä»¥â€“boundary å¼€å§‹ï¼Œç´§æŽ¥ç€æ˜¯å†…å®¹æè¿°ä¿¡æ¯ï¼Œç„¶åŽå›žè½¦ï¼Œæœ€åŽæ˜¯å­—æ®µå…·ä½“å†…å®¹ï¼ˆæ–‡æœ¬æˆ–äºŒè¿›åˆ¶ï¼‰ã€‚å¦‚æžœä¼ è¾“çš„æ˜¯æ–‡ä»¶ï¼Œè¿˜è¦åŒ…å«æ–‡ä»¶åå’Œæ–‡ä»¶ç±»åž‹ä¿¡æ¯ã€‚æ¶ˆæ¯ä¸»ä½“æœ€åŽä»¥â€“boundaryâ€“è¡¨ç¤ºç»“æŸã€‚ è¿™ç§æ–¹å¼ä¸€èˆ¬ç”¨äºŽä¸Šä¼ æ–‡ä»¶ï¼Œå„å¤§æœåŠ¡ç«¯è¯­è¨€ä¹Ÿæœ‰å¾ˆå¥½çš„æ”¯æŒã€‚ è¿™ä¸¤ç§POST æäº¤çš„æ–¹å¼ï¼Œéƒ½æ˜¯æµè§ˆå™¨åŽŸç”Ÿæ”¯æŒçš„ï¼Œè€Œä¸”å…ˆé˜¶æ®µæ ‡å‡†ä¸­åŽŸç”Ÿè¡¨å•ä¹Ÿåªæ”¯æŒè¿™ä¸¤ç§æ–¹å¼ï¼ˆé€šè¿‡å…ƒç´ çš„ enctype å±žæ€§æŒ‡å®šï¼Œé»˜è®¤ä¸º application/x-www-form-urlencodedï¼‰ã€‚éšç€è¶Šæ¥è¶Šå¤šçš„webç«™ç‚¹å°¤å…¶æ˜¯ WebAppï¼Œå…¨éƒ¨ä½¿ç”¨ Ajax è¿›è¡Œæ•°æ®äº¤äº’ä¹‹åŽï¼Œæˆ‘ä»¬å®Œå…¨å¯ä»¥å®šä¹‰æ–°çš„æ•°æ®æäº¤æ–¹å¼ï¼Œç»™å¼€å‘å¸¦æ¥æ›´å¤šä¾¿åˆ©ã€‚ application/json application/jsonæ˜¯å¦å¤–ä¸€ç§è¯·æ±‚å¤´ï¼Œä¸è¿‡æ›´å¤šçš„æ˜¯ä½œä¸ºå“åº”å¤´ï¼Œå› ä¸º json æ ¼å¼çš„æ•°æ®æ—¶é€šç”¨æ•°æ®æ ¼å¼ã€‚ä¸è¿‡ç›®å‰ä¹Ÿç”¨æ¥ä½œä¸ºè¯·æ±‚å¤´ï¼Œç”¨æ¥å‘Šè¯‰æœåŠ¡å™¨ç«¯ä¸»ä½“æ˜¯åºåˆ—åŒ–åŽçš„ json å­—ç¬¦ä¸²ã€‚ç”±äºŽ json è§„èŒƒçš„æµè¡Œï¼Œé™¤äº†ä½Žç‰ˆæœ¬çš„ IE ä¹‹å¤–çš„å„å¤§æµè§ˆå™¨éƒ½åŽŸç”Ÿæ”¯æŒ json.stringfyï¼ŒæœåŠ¡å™¨ç«¯è¯­è¨€ä¹Ÿéƒ½æœ‰å¤„ç† jsonæ•°æ®çš„å‡½æ•°ï¼Œä½¿ç”¨ json ä¸ä¼šé‡åˆ°ä»€ä¹ˆéº»çƒ¦ã€‚ json æ ¼å¼æ”¯æŒæ¯”é”®å€¼å¯¹å¤æ‚çš„å¤šçš„ç»“æž„åŒ–æ•°æ®ï¼Œè¿™ç‚¹å¯¹æ•°æ®ä¼ è¾“å¾ˆæœ‰ç”¨ã€‚ åŸºäºŽformè¡¨å•ä¸Šä¼ æ–‡ä»¶å‰ç«¯ä»£ç 123456789101112131415161718&lt;!DOCTYPE html&gt;&lt;html lang="en"&gt;&lt;head&gt; &lt;meta charset="UTF-8"&gt; &lt;title&gt;Title&lt;/title&gt;&lt;/head&gt;&lt;body&gt;&lt;form action="" method="post" enctype="multipart/form-data"&gt; &lt;p&gt;ç”¨æˆ·å:&lt;input type="text" name="name"&gt;&lt;/p&gt; &lt;input type="file" name="myfile"&gt;&#123;# &lt;input type="file" name="myfile2"&gt;#&#125; &lt;input type="submit" value="æäº¤"&gt;&lt;/form&gt;&lt;/body&gt;&lt;/html&gt; åŽç«¯ä»£ç 123456789101112131415class UploadFile(View): def get(self, request): return render(request, 'upload_file.html') def post(self, request): file = request.FILES.get('myfile') # print(file['file']) from django.core.files.uploadedfile import InMemoryUploadedFile print(time.time()) filename = str(time.time()).split('.')[0] + file.name with open(filename, 'wb') as f: for line in file: f.write(line) return HttpResponse('ä¸Šä¼ æˆåŠŸ') åŸºäºŽajax çš„æ–‡ä»¶ä¸Šä¼ å‰ç«¯ä»£ç 12345678910111213141516171819202122232425262728293031323334&lt;!DOCTYPE html&gt;&lt;html&gt;&lt;head&gt; &lt;meta charset="UTF-8"&gt; &lt;title&gt;uploadfile&lt;/title&gt; &lt;script src="/static/jquery-3.3.1.js"&gt;&lt;/script&gt;&lt;/head&gt;&lt;body&gt;&lt;p&gt;ç”¨æˆ·åï¼š&lt;input type="text" id="name"&gt;&lt;/p&gt;&lt;p&gt;é€‰æ‹©æ–‡ä»¶ï¼š&lt;input type="file" id="my_file"&gt;&lt;/p&gt;&lt;button id="btn"&gt;ä¸Šä¼ &lt;/button&gt;&lt;span id="msg"&gt;&lt;/span&gt;&lt;/body&gt;&lt;script&gt; $('#btn').click(function () &#123; var myfile = $('#my_file')[0].files[0]; var formdata = new FormData(); formdata.append('name', $('#name').val()); formdata.append('myfile', myfile); $.ajax(&#123; url:'/uploadfile/', type:'post', processData:false, // å‘Šè¯‰ jQuery ä¸è¦å¤„ç†å‘é€çš„æ•°æ® contentType:false, // å‘Šè¯‰ jQuery ä¸è¦è®¾ç½® Content-Type è¯·æ±‚å¤´ data:formdata, success:function (data) &#123; console.log(data); $('#msg').text(data) &#125; &#125;) &#125;)&lt;/script&gt;&lt;/html&gt; åŽç«¯ä»£ç 123456789101112131415MEDIA_PATH = '/Users/jingxing/Django/homework/paging/media'def uploadfile(request): if request.method == 'GET': return render(request, 'uploadfile.html') else: myfile = request.FILES.get('myfile') print(myfile) filepath = os.path.join(MEDIA_PATH, myfile.name[32:-3]+'jpg') with open(filepath, 'wb') as f: for line in myfile: f.write(line) FileInfo.objects.create(name=request.POST.get('name'), filepath=filepath) return HttpResponse('ä¸Šä¼ æˆåŠŸ') ajax æäº¤ json æ ¼å¼æ•°æ®å‰ç«¯ä»£ç 12345678910111213141516$('#submit1').click(function () &#123; postdata=&#123;name1:$("#name").val(),pwd2:$("#pwd").val()&#125; $.ajax(&#123; url:'/loginjson/', type:'post', // æŒ‡å®šæäº¤çš„ç¼–ç æ ¼å¼æ˜¯jsonæ ¼å¼, contentType:'application/json', data:JSON.stringify(postdata), // data:postdata, // data:'123', success:function (data) &#123; console.log(data) &#125; &#125;) &#125;) åŽç«¯ä»£ç 1234567891011121314151617181920def loginjson(request): dic=&#123;'status':100,'msg':None&#125; if request.method=='POST': print(request.POST) print(request.GET) print(request.body) xx=request.body.decode('utf-8') # reæ˜¯ä¸ªå­—å…¸&#123;"name1":"lqz","pwd2":"123"&#125; re=json.loads(xx) request.POST=11 print(request.POST) # # # name=re.get('name1') # pwd=re.get('pwd2') # print(name) # print(pwd) return HttpResponse('ok') åŽç«¯è¿”å›ž json æ•°æ®å‰ç«¯ä»£ç 12345678910111213141516171819202122232425262728$('#submit').click(function () &#123; $.ajax(&#123; url:'/login/', type:'post', data:&#123;name1:$("#name").val(),pwd2:$("#pwd").val()&#125;, success:function (data) &#123; //åŽå°ç”¨JsonResponseè¿”å›žæ•°æ® //data å°±ä¼šè¢«è½¬æˆå­—å…¸ console.log(data) console.log(typeof data) //JSON.parse(data) æŠŠå­—ç¬¦ä¸²ç±»åž‹è½¬æˆå­—å…¸ data=JSON.parse(data) &#123;#JSON.stringify()#&#125; console.log(typeof dat1) if(data.status == 100)&#123; //æˆåŠŸ,è·³è½¬åˆ°æŒ‡å®šé¡µé¢ //location.href=åœ°å€,å‰ç«¯å°±ä¼šè·³è½¬åˆ°æŒ‡å®šçš„url alert(data.msg) //$("#error").text(data.msg+'æ­£åœ¨è·³è½¬') //location.href=data.url &#125;else&#123; $("#error").text(data.msg) &#125; &#125; &#125;) &#125;) åŽç«¯ä»£ç 12345678910111213141516171819def login(request): dic=&#123;'status':100,'msg':None&#125; if request.method == 'GET': return render(request, 'login.html') # if request.is_ajax(): if request.method=='POST': name=request.POST.get('name1') pwd=request.POST.get('pwd2') if name=='lqz' and pwd=='123': dic['msg'] = 'ç™»é™†æˆåŠŸ' # æƒ³è®©å‰ç«¯è·³è½¬ # dic['url']='http://www.baidu.com' dic['url']='/test/' else: # è¿”å›žjsonæ ¼å¼å­—ç¬¦ä¸² dic['status']=101 dic['msg']='ç”¨æˆ·åæˆ–å¯†ç é”™è¯¯' # return JsonResponse(dic) return HttpResponse(json.dumps(dic)) Djangoå†…ç½®çš„åºåˆ—åŒ–æ•°æ®æ–¹æ³•123456from django.core import serializersdef test(request): book_list = Book.objects.all() ret = serializers.serialize('json', book_list) return HttpResponse(ret)]]></content>
      <categories>
        <category>Django</category>
      </categories>
  </entry>
  <entry>
    <title><![CDATA[Djangoï¼ˆåä¸‰ï¼‰]]></title>
    <url>%2F2019%2F01%2F17%2FDjango%EF%BC%88%E5%8D%81%E4%B8%89%EF%BC%89%2F</url>
    <content type="text"><![CDATA[Django ç³»åˆ—åšå®¢ï¼ˆåä¸‰ï¼‰å‰è¨€æœ¬ç¯‡åšå®¢ä»‹ç» Django ä¸­çš„å¸¸ç”¨å­—æ®µå’Œå‚æ•°ã€‚ ORM å­—æ®µAutoFieldint è‡ªå¢žåˆ—ï¼Œå¿…é¡»å¡«å…¥å‚æ•° primary_key=Trueã€‚å½“ model ä¸­å¦‚æžœæ²¡æœ‰è‡ªå¢žåˆ—ï¼Œåˆ™ä¼šè‡ªåŠ¨åˆ›å»ºä¸€ä¸ªåˆ—åä¸º id çš„åˆ—ã€‚ IntegerFieldä¸€ä¸ªæ•´æ•°ç±»åž‹ï¼ŒèŒƒå›´åœ¨-2147483648 to 2147483647ã€‚ CharFieldå­—ç¬¦ç±»åž‹ï¼Œå¿…é¡»æä¾›max_lengthå‚æ•°ï¼Œ max_lengthè¡¨ç¤ºå­—ç¬¦é•¿åº¦ã€‚ DateFieldæ—¥æœŸå­—æ®µï¼Œæ—¥æœŸæ ¼å¼ YYYY-MM-DDï¼Œç›¸å½“äºŽPythonä¸­çš„datetime.date()å®žä¾‹ã€‚ DateTimeFieldæ—¥æœŸæ—¶é—´å­—æ®µï¼Œæ ¼å¼ YYYY-MM-DD HH:MM[:ss[.uuuuuu]][TZ]ï¼Œç›¸å½“äºŽPythonä¸­çš„datetime.datetime()å®žä¾‹ã€‚ å¸¸ç”¨å’Œéžå¸¸ç”¨å­—æ®µ123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148149150AutoField(Field)- intè‡ªå¢žåˆ—ï¼Œå¿…é¡»å¡«å…¥å‚æ•°primary_key = TrueBigAutoField(AutoField)- bigintè‡ªå¢žåˆ—ï¼Œå¿…é¡»å¡«å…¥å‚æ•°primary_key = Trueæ³¨ï¼šå½“modelä¸­å¦‚æžœæ²¡æœ‰è‡ªå¢žåˆ—ï¼Œåˆ™è‡ªåŠ¨ä¼šåˆ›å»ºä¸€ä¸ªåˆ—åä¸ºidçš„åˆ—from django.db import modelsclass UserInfo(models.Model): # è‡ªåŠ¨åˆ›å»ºä¸€ä¸ªåˆ—åä¸ºidçš„ä¸”ä¸ºè‡ªå¢žçš„æ•´æ•°åˆ— username = models.CharField(max_length=32)class Group(models.Model): # è‡ªå®šä¹‰è‡ªå¢žåˆ— nid = models.AutoField(primary_key=True) name = models.CharField(max_length=32)SmallIntegerField(IntegerField):- å°æ•´æ•° - 32768 ï½ž 32767PositiveSmallIntegerField(PositiveIntegerRelDbTypeMixin, IntegerField)- æ­£å°æ•´æ•°0 ï½ž 32767IntegerField(Field)- æ•´æ•°åˆ—(æœ‰ç¬¦å·çš„) - 2147483648 ï½ž 2147483647PositiveIntegerField(PositiveIntegerRelDbTypeMixin, IntegerField)- æ­£æ•´æ•°0 ï½ž 2147483647BigIntegerField(IntegerField):- é•¿æ•´åž‹(æœ‰ç¬¦å·çš„) - 9223372036854775808 ï½ž 9223372036854775807BooleanField(Field)- å¸ƒå°”å€¼ç±»åž‹NullBooleanField(Field):- å¯ä»¥ä¸ºç©ºçš„å¸ƒå°”å€¼CharField(Field)- å­—ç¬¦ç±»åž‹- å¿…é¡»æä¾›max_lengthå‚æ•°ï¼Œ max_lengthè¡¨ç¤ºå­—ç¬¦é•¿åº¦TextField(Field)- æ–‡æœ¬ç±»åž‹EmailField(CharField)ï¼š- å­—ç¬¦ä¸²ç±»åž‹ï¼ŒDjangoAdminä»¥åŠModelFormä¸­æä¾›éªŒè¯æœºåˆ¶IPAddressField(Field)- å­—ç¬¦ä¸²ç±»åž‹ï¼ŒDjangoAdminä»¥åŠModelFormä¸­æä¾›éªŒè¯IPV4æœºåˆ¶GenericIPAddressField(Field)- å­—ç¬¦ä¸²ç±»åž‹ï¼ŒDjangoAdminä»¥åŠModelFormä¸­æä¾›éªŒè¯Ipv4å’ŒIpv6- å‚æ•°ï¼šprotocolï¼Œç”¨äºŽæŒ‡å®šIpv4æˆ–Ipv6ï¼Œ 'both', "ipv4", "ipv6"unpack_ipv4ï¼Œ å¦‚æžœæŒ‡å®šä¸ºTrueï¼Œåˆ™è¾“å…¥::ffff: 192.0.2.1æ—¶å€™ï¼Œå¯è§£æžä¸º192.0.2.1ï¼Œå¼€å¯æ­¤åŠŸèƒ½ï¼Œéœ€è¦protocol = "both"URLField(CharField)- å­—ç¬¦ä¸²ç±»åž‹ï¼ŒDjangoAdminä»¥åŠModelFormä¸­æä¾›éªŒè¯URLSlugField(CharField)- å­—ç¬¦ä¸²ç±»åž‹ï¼ŒDjangoAdminä»¥åŠModelFormä¸­æä¾›éªŒè¯æ”¯æŒå­—æ¯ã€æ•°å­—ã€ä¸‹åˆ’çº¿ã€è¿žæŽ¥ç¬¦ï¼ˆå‡å·ï¼‰CommaSeparatedIntegerField(CharField)- å­—ç¬¦ä¸²ç±»åž‹ï¼Œæ ¼å¼å¿…é¡»ä¸ºé€—å·åˆ†å‰²çš„æ•°å­—UUIDField(Field)- å­—ç¬¦ä¸²ç±»åž‹ï¼ŒDjangoAdminä»¥åŠModelFormä¸­æä¾›å¯¹UUIDæ ¼å¼çš„éªŒè¯FilePathField(Field)- å­—ç¬¦ä¸²ï¼ŒDjangoAdminä»¥åŠModelFormä¸­æä¾›è¯»å–æ–‡ä»¶å¤¹ä¸‹æ–‡ä»¶çš„åŠŸèƒ½- å‚æ•°ï¼špath, æ–‡ä»¶å¤¹è·¯å¾„match = None, æ­£åˆ™åŒ¹é…recursive = False, é€’å½’ä¸‹é¢çš„æ–‡ä»¶å¤¹allow_files = True, å…è®¸æ–‡ä»¶allow_folders = False, å…è®¸æ–‡ä»¶å¤¹FileField(Field)- å­—ç¬¦ä¸²ï¼Œè·¯å¾„ä¿å­˜åœ¨æ•°æ®åº“ï¼Œæ–‡ä»¶ä¸Šä¼ åˆ°æŒ‡å®šç›®å½•- å‚æ•°ï¼šupload_to = ""ä¸Šä¼ æ–‡ä»¶çš„ä¿å­˜è·¯å¾„storage = Noneå­˜å‚¨ç»„ä»¶ï¼Œé»˜è®¤django.core.files.storage.FileSystemStorageImageField(FileField)- å­—ç¬¦ä¸²ï¼Œè·¯å¾„ä¿å­˜åœ¨æ•°æ®åº“ï¼Œæ–‡ä»¶ä¸Šä¼ åˆ°æŒ‡å®šç›®å½•- å‚æ•°ï¼šupload_to = ""ä¸Šä¼ æ–‡ä»¶çš„ä¿å­˜è·¯å¾„storage = Noneå­˜å‚¨ç»„ä»¶ï¼Œé»˜è®¤django.core.files.storage.FileSystemStoragewidth_field = None, ä¸Šä¼ å›¾ç‰‡çš„é«˜åº¦ä¿å­˜çš„æ•°æ®åº“å­—æ®µåï¼ˆå­—ç¬¦ä¸²ï¼‰height_field = Noneä¸Šä¼ å›¾ç‰‡çš„å®½åº¦ä¿å­˜çš„æ•°æ®åº“å­—æ®µåï¼ˆå­—ç¬¦ä¸²ï¼‰DateTimeField(DateField)- æ—¥æœŸ + æ—¶é—´æ ¼å¼YYYY - MM - DDHH: MM[:ss[.uuuuuu]][TZ]DateField(DateTimeCheckMixin, Field)- æ—¥æœŸæ ¼å¼YYYY - MM - DDTimeField(DateTimeCheckMixin, Field)- æ—¶é—´æ ¼å¼HH: MM[:ss[.uuuuuu]]DurationField(Field)- é•¿æ•´æ•°ï¼Œæ—¶é—´é—´éš”ï¼Œæ•°æ®åº“ä¸­æŒ‰ç…§bigintå­˜å‚¨ï¼ŒORMä¸­èŽ·å–çš„å€¼ä¸ºdatetime.timedeltaç±»åž‹FloatField(Field)- æµ®ç‚¹åž‹DecimalField(Field)- 10è¿›åˆ¶å°æ•°- å‚æ•°ï¼šmax_digitsï¼Œå°æ•°æ€»é•¿åº¦decimal_placesï¼Œå°æ•°ä½é•¿åº¦BinaryField(Field)- äºŒè¿›åˆ¶ç±»åž‹ ORMå­—æ®µä¸Žæ•°æ®åº“å®žé™…å­—æ®µçš„å¯¹åº”å…³ç³»123456789101112131415161718192021222324252627å¯¹åº”å…³ç³»ï¼š 'AutoField': 'integer AUTO_INCREMENT', 'BigAutoField': 'bigint AUTO_INCREMENT', 'BinaryField': 'longblob', 'BooleanField': 'bool', 'CharField': 'varchar(%(max_length)s)', 'CommaSeparatedIntegerField': 'varchar(%(max_length)s)', 'DateField': 'date', 'DateTimeField': 'datetime', 'DecimalField': 'numeric(%(max_digits)s, %(decimal_places)s)', 'DurationField': 'bigint', 'FileField': 'varchar(%(max_length)s)', 'FilePathField': 'varchar(%(max_length)s)', 'FloatField': 'double precision', 'IntegerField': 'integer', 'BigIntegerField': 'bigint', 'IPAddressField': 'char(15)', 'GenericIPAddressField': 'char(39)', 'NullBooleanField': 'bool', 'OneToOneField': 'integer', 'PositiveIntegerField': 'integer UNSIGNED', 'PositiveSmallIntegerField': 'smallint UNSIGNED', 'SlugField': 'varchar(%(max_length)s)', 'SmallIntegerField': 'smallint', 'TextField': 'longtext', 'TimeField': 'time', 'UUIDField': 'char(32)', ORMå­—æ®µå‚æ•°nullç”¨äºŽè¡¨ç¤ºæŸä¸ªå­—æ®µå¯ä»¥ä¸ºç©ºã€‚ uniqueå¦‚æžœè®¾ç½® unique=Trueï¼Œåˆ™è¯¥å­—æ®µåœ¨æ­¤è¡¨ä¸­å¿…é¡»æ˜¯æƒŸä¸€çš„ã€‚ db_indexå¦‚æžœ db_index=Trueï¼Œ åˆ™ä»£è¡¨ç€ä¸ºæ­¤å­—æ®µè®¾ç½®ç´¢å¼•ã€‚ defaultä¸ºè¯¥å­—æ®µè®¾ç½®é»˜è®¤å€¼ã€‚ auto_now_addé…ç½® auto_now_add=Trueï¼Œåˆ›å»ºæ•°æ®è®°å½•çš„æ—¶å€™ä¼šæŠŠå½“å‰æ—¶é—´æ·»åŠ åˆ°æ•°æ®åº“ã€‚ auto_nowé…ç½® auto_now=Trueï¼Œæ¯æ¬¡æ›´æ–°æ•°æ®è®°å½•çš„æ—¶å€™ä¼šæ›´æ–°è¯¥å­—æ®µã€‚ å…·ä½“æ„æ€1234567891011121314151617181920212223242526272829303132333435363738null æ•°æ®åº“ä¸­å­—æ®µæ˜¯å¦å¯ä»¥ä¸ºç©ºdb_column æ•°æ®åº“ä¸­å­—æ®µçš„åˆ—ådb_tablespacedefault æ•°æ®åº“ä¸­å­—æ®µçš„é»˜è®¤å€¼primary_key æ•°æ®åº“ä¸­å­—æ®µæ˜¯å¦ä¸ºä¸»é”®db_index æ•°æ®åº“ä¸­å­—æ®µæ˜¯å¦å¯ä»¥å»ºç«‹ç´¢å¼•unique æ•°æ®åº“ä¸­å­—æ®µæ˜¯å¦å¯ä»¥å»ºç«‹å”¯ä¸€ç´¢å¼•unique_for_date æ•°æ®åº“ä¸­å­—æ®µã€æ—¥æœŸã€‘éƒ¨åˆ†æ˜¯å¦å¯ä»¥å»ºç«‹å”¯ä¸€ç´¢å¼•unique_for_month æ•°æ®åº“ä¸­å­—æ®µã€æœˆã€‘éƒ¨åˆ†æ˜¯å¦å¯ä»¥å»ºç«‹å”¯ä¸€ç´¢å¼•unique_for_year æ•°æ®åº“ä¸­å­—æ®µã€å¹´ã€‘éƒ¨åˆ†æ˜¯å¦å¯ä»¥å»ºç«‹å”¯ä¸€ç´¢å¼•verbose_name Adminä¸­æ˜¾ç¤ºçš„å­—æ®µåç§°blank Adminä¸­æ˜¯å¦å…è®¸ç”¨æˆ·è¾“å…¥ä¸ºç©ºeditable Adminä¸­æ˜¯å¦å¯ä»¥ç¼–è¾‘help_text Adminä¸­è¯¥å­—æ®µçš„æç¤ºä¿¡æ¯choices Adminä¸­æ˜¾ç¤ºé€‰æ‹©æ¡†çš„å†…å®¹ï¼Œç”¨ä¸å˜åŠ¨çš„æ•°æ®æ”¾åœ¨å†…å­˜ä¸­ä»Žè€Œé¿å…è·¨è¡¨æ“ä½œ å¦‚ï¼šgf = models.IntegerField(choices=[(0, 'ä½•ç©—'),(1, 'å¤§è¡¨å§'),],default=1)error_messages è‡ªå®šä¹‰é”™è¯¯ä¿¡æ¯ï¼ˆå­—å…¸ç±»åž‹ï¼‰ï¼Œä»Žè€Œå®šåˆ¶æƒ³è¦æ˜¾ç¤ºçš„é”™è¯¯ä¿¡æ¯ï¼› å­—å…¸å¥ï¼šnull, blank, invalid, invalid_choice, unique, and unique_for_date å¦‚ï¼š&#123;'null': "ä¸èƒ½ä¸ºç©º.", 'invalid': 'æ ¼å¼é”™è¯¯'&#125;validators è‡ªå®šä¹‰é”™è¯¯éªŒè¯ï¼ˆåˆ—è¡¨ç±»åž‹ï¼‰ï¼Œä»Žè€Œå®šåˆ¶æƒ³è¦çš„éªŒè¯è§„åˆ™ from django.core.validators import RegexValidator from django.core.validators import EmailValidator,URLValidator,DecimalValidator,\ MaxLengthValidator,MinLengthValidator,MaxValueValidator,MinValueValidator å¦‚ï¼š test = models.CharField( max_length=32, error_messages=&#123; 'c1': 'ä¼˜å…ˆé”™ä¿¡æ¯1', 'c2': 'ä¼˜å…ˆé”™ä¿¡æ¯2', 'c3': 'ä¼˜å…ˆé”™ä¿¡æ¯3', &#125;, validators=[ RegexValidator(regex='root_\d+', message='é”™è¯¯äº†', code='c1'), RegexValidator(regex='root_112233\d+', message='åˆé”™è¯¯äº†', code='c2'), EmailValidator(message='åˆé”™è¯¯äº†', code='c3'), ] ) å…³ç³»å­—æ®µForeignKeyå¤–é”®ç±»åž‹åœ¨ORMä¸­ç”¨æ¥è¡¨ç¤ºå¤–é”®å…³è”å…³ç³»ï¼Œä¸€èˆ¬æŠŠForeignKeyå­—æ®µè®¾ç½®åœ¨ â€˜ä¸€å¯¹å¤šâ€™ä¸­â€™å¤šâ€™çš„ä¸€æ–¹ã€‚ForeignKeyå¯ä»¥å’Œå…¶ä»–è¡¨åšå…³è”å…³ç³»åŒæ—¶ä¹Ÿå¯ä»¥å’Œè‡ªèº«åšå…³è”å…³ç³»ã€‚ ####to è®¾ç½®è¦å…³è”çš„è¡¨ ####to_field è®¾ç½®è¦å…³è”çš„è¡¨çš„å­—æ®µ ####related_name åå‘æŸ¥è¯¢æ—¶ï¼Œä½¿ç”¨çš„å­—æ®µåï¼Œç”¨äºŽä»£æ›¿åŽŸåå‘æŸ¥è¯¢æ—¶çš„â€™è¡¨å_setâ€™ã€‚ 1publish = ForeignKey(Blog, related_name='booklist') db_constraintæ˜¯å¦åœ¨æ•°æ®åº“ä¸­åˆ›å»ºå¤–é”®çº¦æŸï¼Œé»˜è®¤ä¸º Trueã€‚ OneToOneFieldä¸€å¯¹ä¸€å­—æ®µï¼Œé€šå¸¸ä½¿ç”¨ä¸€å¯¹ä¸€å­—æ®µç”¨æ¥æ‰©å±•å·²æœ‰å­—æ®µã€‚ ä¸€å¯¹ä¸€çš„å…³è”å…³ç³»å¤šç”¨åœ¨å½“ä¸€å¼ è¡¨çš„ä¸åŒå­—æ®µæŸ¥è¯¢é¢‘æ¬¡å·®è·è¿‡å¤§çš„æƒ…å†µä¸‹ï¼Œå°†æœ¬å¯ä»¥å­˜å‚¨åœ¨ä¸€å¼ è¡¨çš„å­—æ®µæ‹†å¼€æ”¾ç½®åœ¨ä¸¤å¼ è¡¨ä¸­ï¼Œç„¶åŽå°†ä¸¤å¼ è¡¨å»ºç«‹ä¸€å¯¹ä¸€çš„å…³è”å…³ç³»ã€‚ 123456789class Author(models.Model): id = models.AutoField(primary_key=True) name = models.CharField(max_length=32) age = models.IntegerField(default=18) class AuthorDetail(models.Model): id = models.AutoField(primary_key=True) addr = models.CharField(max_length=32) author = models.OneToOneField(to=Author, to_field='id') ####to è®¾ç½®è¦å…³è”çš„è¡¨ ####to_field è®¾ç½®è¦å…³è”çš„å­—æ®µã€‚ ####on_delete çº§è”åˆ é™¤é€‰é¡¹ ManyToManyFieldç”¨äºŽè¡¨ç¤ºå¤šå¯¹å¤šçš„å…³è”å…³ç³»ã€‚åœ¨æ•°æ®åº“ä¸­é€šè¿‡ç¬¬ä¸‰å¼ è¡¨æ¥å»ºç«‹å…³è”å…³ç³»ã€‚ toè®¾ç½®è¦å…³è”çš„è¡¨ related_nameåå‘æŸ¥è¯¢æ—¶ï¼Œä½¿ç”¨çš„å­—æ®µåï¼Œç”¨äºŽä»£æ›¿åŽŸåå‘æŸ¥è¯¢æ—¶çš„â€™è¡¨å_setâ€™ã€‚ symmetricalä»…ç”¨äºŽå¤šå¯¹å¤šè‡ªå…³è”æ—¶ï¼ŒæŒ‡å®šå†…éƒ¨æ˜¯å¦åˆ›å»ºåå‘æ“ä½œçš„å­—æ®µã€‚é»˜è®¤ä¸º Trueã€‚ 123class Person(models.Model): name = models.CharField(max_length=16) friends = models.ManyToManyField("self") æ­¤æ—¶ï¼Œperson å¯¹è±¡æ²¡æœ‰ person_setå±žæ€§ã€‚ 123class Person(models.Model): name = models.CharField(max_length=16) friends = models.ManyToManyField("self", symmetrical=False) æ­¤æ—¶ï¼Œperson å¯¹è±¡å¯ä»¥ä½¿ç”¨ person_set å±žæ€§è¿›è¡Œåå‘æŸ¥è¯¢ã€‚ throughåœ¨ä½¿ç”¨ ManyToManyField å­—æ®µæ—¶ï¼ŒDjango å°†è‡ªåŠ¨ç”Ÿæˆä¸€å¼ è¡¨æ¥ç®¡ç†å¤šå¯¹å¤šçš„å…³è”å…³ç³»ã€‚ä½†æ˜¯å½“æˆ‘ä»¬æ‰‹åŠ¨åˆ›å»ºç¬¬ä¸‰å¼ è¡¨æ¥ç®¡ç†å¤šå¯¹å¤šå…³ç³»æ—¶ï¼Œå°±éœ€è¦é€šè¿‡ through æ¥æŒ‡å®šç¬¬ä¸‰å¼ è¡¨çš„è¡¨åã€‚ 123456789101112131415161718class Book(models.Model): id = models.AutoField(primary_key=True) name = models.CharField(max_length=32) price = models.DecimalField(max_digits=5, decimal_places=2) publish_date = models.DateField() publish = models.ForeignKey(to='Publish', to_field='id') authors = models.ManyToManyField(to='Author', through='Book2Author', through_fields=('book', 'author')) class Author(models.Model): id = models.AutoField(primary_key=True) name = models.CharField(max_length=32) gender = models.SmallIntegerField() author_detail = models.OneToOneField(to='AuthorDetail', to_field='id', on_delete=models.CASCADE) class Book2Author(models.Model): id = models.AutoField(primary_key=True) book = models.ForeignKey(to=Book) author = models.ForeignKey(to=Author) through_fieldè®¾ç½®è¦å…³è”çš„å­—æ®µï¼šå…³è”å­—æ®µåœ¨Book2Authorä¸­ï¼Œä»Žè¿™ä¸ªè¡¨åˆ°Book è¡¨ï¼Œæ‰€ä»¥æŠŠ book å†™åœ¨å‰é¢ã€‚ db_tableé»˜è®¤åˆ›å»ºç¬¬ä¸‰å¼ è¡¨æ—¶ï¼Œè®¾ç½®è¡¨çš„åå­—ã€‚ å¤šå¯¹å¤šå…³è”å…³ç³»çš„ä¸‰ç§æ–¹å¼æ–¹å¼ä¸€ï¼šæ‰‹åŠ¨åˆ›å»ºç¬¬ä¸‰å¼ è¡¨1234567891011121314151617class Book(models.Model): id = models.AutoField(primary_key=True) name = models.CharField(max_length=32) price = models.DecimalField(max_digits=5, decimal_places=2) publish_date = models.DateField() publish = models.ForeignKey(to='Publish', to_field='id') class Author(models.Model): id = models.AutoField(primary_key=True) name = models.CharField(max_length=32) gender = models.SmallIntegerField() author_detail = models.OneToOneField(to='AuthorDetail', to_field='id', on_delete=models.CASCADE) class Book2Author(models.Model): id = models.AutoField(primary_key=True) book = models.ForeignKey(to=Book) author = models.ForeignKey(to=Author) æ–¹å¼äºŒï¼šé€šè¿‡ ManyToManyField è‡ªåŠ¨åˆ›å»ºç¬¬ä¸‰å¼ è¡¨12345678910111213class Book(models.Model): id = models.AutoField(primary_key=True) name = models.CharField(max_length=32) price = models.DecimalField(max_digits=5, decimal_places=2) publish_date = models.DateField() publish = models.ForeignKey(to='Publish', to_field='id') authors = models.ManyToManyField(to='Author') class Author(models.Model): id = models.AutoField(primary_key=True) name = models.CharField(max_length=32) gender = models.SmallIntegerField() author_detail = models.OneToOneField(to='AuthorDetail', to_field='id', on_delete=models.CASCADE) æ–¹å¼ä¸‰ï¼šè®¾ç½® ManyToManyField å¹¶æŒ‡å®šæ‰‹åŠ¨åˆ›å»ºç¬¬ä¸‰å¼ è¡¨1234567891011121314151617class Book(models.Model): id = models.AutoField(primary_key=True) name = models.CharField(max_length=32) price = models.DecimalField(max_digits=5, decimal_places=2) publish_date = models.DateField() publish = models.ForeignKey(to='Publish', to_field='id') class Author(models.Model): id = models.AutoField(primary_key=True) name = models.CharField(max_length=32) gender = models.SmallIntegerField() author_detail = models.OneToOneField(to='AuthorDetail', to_field='id', on_delete=models.CASCADE) class Book2Author(models.Model): id = models.AutoField(primary_key=True) book = models.ForeignKey(to=Book) author = models.ForeignKey(to=Author) å½“ä¸šåŠ¡éœ€è¦åœ¨ç¬¬ä¸‰å¼ å…³ç³»è¡¨ä¸­å­˜å‚¨é¢å¤–çš„å­—æ®µæ—¶ï¼Œå°±è¦ä½¿ç”¨ç¬¬ä¸‰ç§æ–¹å¼ã€‚ è¿™æ ·åˆ›å»ºçš„ç¬¬ä¸‰å¼ è¡¨æ— æ³•ä½¿ç”¨ setã€addã€removeã€clearæ–¹æ³•æ¥ç®¡ç†å¯¹å¤šå¤šå…³ç³»ï¼Œéœ€è¦é€šè¿‡ç¬¬ä¸‰å¼ è¡¨æ¥è¿›è¡Œå¢žã€åˆ ã€æ”¹ï¼ŒæŸ¥è¯¢ä¸€æ ·ã€‚ è‡ªå®šä¹‰å­—æ®µ1234567891011121314151617181920class FixedCharField(models.Field): """ è‡ªå®šä¹‰çš„charç±»åž‹çš„å­—æ®µç±» """ def __init__(self, max_length, *args, **kwargs): self.max_length = max_length super(FixedCharField, self).__init__(max_length=max_length, *args, **kwargs) def db_type(self, connection): """ é™å®šç”Ÿæˆæ•°æ®åº“è¡¨çš„å­—æ®µç±»åž‹ä¸ºcharï¼Œé•¿åº¦ä¸ºmax_lengthæŒ‡å®šçš„å€¼ """ return 'char(%s)' % self.max_lengthclass Class(models.Model): id = models.AutoField(primary_key=True) title = models.CharField(max_length=25) # ä½¿ç”¨è‡ªå®šä¹‰çš„charç±»åž‹çš„å­—æ®µ cname = FixedCharField(max_length=25)]]></content>
      <categories>
        <category>Django</category>
      </categories>
  </entry>
  <entry>
    <title><![CDATA[Djangoï¼ˆåäºŒï¼‰]]></title>
    <url>%2F2019%2F01%2F16%2FDjango%EF%BC%88%E5%8D%81%E4%BA%8C%EF%BC%89%2F</url>
    <content type="text"><![CDATA[Django ç³»åˆ—åšå®¢ï¼ˆåäºŒï¼‰å‰è¨€æœ¬ç¯‡åšå®¢ç»§ç»­ä»‹ç» Django ä¸­çš„æŸ¥è¯¢ï¼Œåˆ†åˆ«ä¸ºèšåˆæŸ¥è¯¢å’Œåˆ†ç»„æŸ¥è¯¢ï¼Œä»¥åŠ F å’Œ Q æŸ¥è¯¢ã€‚ èšåˆæŸ¥è¯¢è¯­æ³•ï¼šaggregate(*args, **kwargs) 123# è®¡ç®—æ‰€æœ‰å›¾ä¹¦çš„å¹³å‡ä»·æ ¼from django.db.models import AvgBook.objects.all().aggregate(Avg('price')) aggregate()æ˜¯ QuerySet çš„ä¸€ä¸ªç»ˆæ­¢å­å¥ï¼Œæ„æ€æ˜¯è¯´ï¼Œå®ƒè¿”å›žä¸€ä¸ªåŒ…å«ä¸€äº›é”®å€¼å¯¹çš„å­—å…¸ã€‚é”®çš„åç§°æ˜¯èšåˆå€¼å¾—æ ‡è¯†ç¬¦ï¼Œå€¼æ˜¯è®¡ç®—å‡ºæ¥çš„èšåˆå€¼ã€‚å»ºçš„åç§°æ˜¯æŒ‰ç…§å­—æ®µå’Œèšåˆå‡½æ•°çš„åç§°è‡ªåŠ¨ç”Ÿæˆå‡ºæ¥çš„ã€‚å¦‚æžœä½ æƒ³è¦ä¸ºèšåˆå€¼æŒ‡å®šä¸ªåç§°ï¼Œå¯ä»¥å‘èšåˆå­å¥æä¾›å®ƒã€‚ 1Book.objects.aggregate(average_price=Avg('price')) å¦‚æžœä½ å¸Œæœ›ç”Ÿæˆä¸æ­¢ä¸€ä¸ªèšåˆå€¼ï¼Œä½ å¯ä»¥å‘ aggregate()å­å¥ä¸­æ·»åŠ å¦ä¸€ä¸ªå‚æ•°ã€‚æ‰€ä»¥å¦‚æžœæƒ³çŸ¥é“æ‰€æœ‰å›¾ä¹¦ä»·æ ¼çš„æœ€å¤§å€¼å’Œæœ€å°å€¼ï¼Œå¯ä»¥è¿™æ ·æŸ¥è¯¢ï¼š 12from django.db.models import Avg, Max, MinBook.objects.aggregate(Avg('price'), Max('price'), Min('price')) å…·ä½“ä¾‹å­ï¼š 1234567891011121314# æŸ¥è¯¢æ‰€æœ‰ä¹¦ç±çš„å¹³å‡ä»·æ ¼from django.db.models import Avg,Count,Max,Minret=Book.objects.all().aggregate(Avg('price'))# &#123;'price__avg': 202.896&#125;# å¯ä»¥æ”¹åå­—ret=Book.objects.all().aggregate(avg_price=Avg('price'))# ç»Ÿè®¡å¹³å‡ä»·æ ¼å’Œæœ€å¤§ä»·æ ¼ret=Book.objects.all().aggregate(avg_price=Avg('price'),max_price=Max('price'))# ç»Ÿè®¡æœ€å°ä»·æ ¼ret = Book.objects.all().aggregate(avg_price=Avg('price'), min_price=Min('price'))# ç»Ÿè®¡ä¸ªæ•°å’Œå¹³å‡ä»·æ ¼ret = Book.objects.all().aggregate(avg_price=Avg('price'), max_price=Max('price'),count=Count('price'))ret = Book.objects.all().aggregate(avg_price=Avg('price'), max_price=Max('price'),count=Count('nid'))print(ret) åˆ†ç»„æŸ¥è¯¢æ€»ç»“ï¼š 12345group by é‚£ä¸ªè¡¨å°±ä»¥é‚£ä¸ªè¡¨ä½œä¸ºåŸºè¡¨values åœ¨å‰ï¼šè¡¨ç¤º group byvalues åœ¨åŽï¼šè¡¨ç¤ºå–å€¼filter åœ¨å‰ï¼šè¡¨ç¤º where æ¡ä»¶filter åœ¨åŽï¼šè¡¨ç¤º having åˆ†ç»„æŸ¥è¯¢æ¡ˆä¾‹123456789# æŸ¥è¯¢æ‰€æœ‰ä½œè€…å†™çš„ä¹¦çš„æ€»ä»·æ ¼å¤§äºŽ26çš„# filter()åœ¨annotateåŽé¢ï¼Œè¡¨ç¤ºå¯¹åˆ†ç»„åŽçš„ç»“æžœè¿›è¡Œç­›é€‰ï¼Œç›¸å½“äºŽhaving# annotateå‰çš„values()è¡¨ç¤ºæŒ‰è¯¥å­—æ®µåˆ†ç»„ï¼Œç›¸å½“äºŽgroup byï¼Œå¯ä»¥çœç•¥ï¼Œé»˜è®¤ä¼šæŒ‰Authorçš„idåˆ†ç»„# åŽé¢çš„values()è¡¨ç¤ºå–å€¼ret=Author.objects.all().values('pk').annotate(s=Sum('book__price')).filter(s__gt=26).values('name','s')ç­‰ä»·äºŽret=Author.objects.all().annotate(s=Sum('book__price')).filter(s__gt=26).values('name','s') 1234# æŸ¥è¯¢å„ä¸ªä½œè€…å‡ºçš„ä¹¦çš„æ€»ä»·æ ¼# sç›¸å½“äºŽç»™æ±‚å’Œç»“æžœå–åå­—ï¼Œåœ¨vlaueså–å€¼ä¸­ï¼Œå¯ä»¥å¼•ç”¨ret = Author.objects.all().annotate(s=Sum('price')).values('name','s')print(ret) 12345678# ç»Ÿè®¡ä¸æ­¢ä¸€ä¸ªä½œè€…çš„å›¾ä¹¦ret=Book.objects.all().values('pk').annotate(c=Count('authors')).filter(c__gt=1).values('name','c')print(ret)ç­‰ä»·äºŽret = Book.objects.annotate(author_num=Count("authors")).filter(author_num__gt=1).values('name','author_num')print(ret) F æŸ¥è¯¢ä»€ä¹ˆæ˜¯ F æŸ¥è¯¢å¦‚æžœè¦å¯¹ä¸¤ä¸ªå­—æ®µçš„å€¼ä½œæ¯”è¾ƒï¼Œå°±ä¸èƒ½ç›´æŽ¥æ¯”è¾ƒï¼Œå¿…é¡»å€ŸåŠ© F()çš„å®žä¾‹ï¼Œå¯ä»¥åœ¨æŸ¥è¯¢ä¸­å¼•ç”¨å­—æ®µï¼Œæ¥æ¯”è¾ƒåŒä¸€ä¸ª model å®žä¾‹ä¸­ä¸¤ä¸ªä¸åŒå­—æ®µçš„å€¼ã€‚ è¯­æ³•12from django.db.models import Ffliter(commit_num_gt=F('read_num')) F æŸ¥è¯¢çš„ä½¿ç”¨12345# æŸ¥è¯¢è¯„è®ºæ•°å¤§äºŽé˜…è¯»æ•°çš„ä¹¦book = models.Book.objects.filter(commit_num__gt=F('read_num')).values('name')# æŠŠæ‰€æœ‰ä¹¦çš„è¯„è®ºæ•°åŠ 1models.Book.objects.all().update(commit_num=F('commit_num')+1) Q æŸ¥è¯¢ä»€ä¹ˆæ˜¯ Q æŸ¥è¯¢å¯¹ä¸¤ä¸ªå­—æ®µçš„å€¼è¿›è¡Œæˆ–ã€ä¸Žã€éžè¿ç®—ï¼Œä¸èƒ½ç›´æŽ¥è¿ç®—ï¼Œéœ€è¦ç”¨ Q()çš„å®žä¾‹ã€‚ è¯­æ³•12345# ä¸” -----&gt; &amp;# æˆ– -----&gt; |# éž -----&gt; ~from django.db.models import Qfliter(Q(name='tom')|Q(name='tony')) Q æŸ¥è¯¢çš„ä½¿ç”¨12345# æŸ¥è¯¢ä¸æ˜¯tomå†™çš„ä¹¦çš„åå­—ret = models.Book.objects.filter(~Q(authors__name='tom')).values('name')# æŸ¥è¯¢ä½œè€…åå­—æ˜¯tomæˆ–è€…åå­—æ˜¯tonyçš„ä¹¦ret = models.Book.objects.filter(Q(authors__name='tom')|Q(authors__name='tony')).values('name') è¡¥å……ï¼šåœ¨å®žé™…å¼€å‘ä¸­ï¼Œå¤–é”®é€šå¸¸ä¸ç”¨ï¼š çº¦æŸæ€§å¤ªå¼º æŸ¥è¯¢æ•ˆçŽ‡ä½Ž å¯ä»¥é€šè¿‡db_constraint=Falseæ¥å–æ¶ˆå¤–é”®çº¦æŸï¼Œåœ¨ orm åˆ›å»ºè¡¨çš„æ—¶å€™ï¼Œå¤–é”®çš„çº¦æŸä¸ä¼šå­˜åœ¨ï¼Œä½†æ˜¯è¿™æ ·ä¼šäº§ç”Ÿè„æ•°æ®ã€‚ å»ºå¤–é”®çº¦æŸï¼ŒåŒ…æ‹¬ unique éƒ½æ˜¯ä¸ºäº†ä¸äº§ç”Ÿè„æ•°æ®ã€‚]]></content>
      <categories>
        <category>Django</category>
      </categories>
  </entry>
  <entry>
    <title><![CDATA[Djangoï¼ˆåä¸€ï¼‰]]></title>
    <url>%2F2019%2F01%2F14%2FDjango%EF%BC%88%E5%8D%81%E4%B8%80%EF%BC%89%2F</url>
    <content type="text"><![CDATA[Django ç³»åˆ—åšå®¢ï¼ˆåä¸€ï¼‰å‰è¨€æœ¬ç¯‡åšå®¢ä»‹ç»ä½¿ç”¨ ORM æ¥è¿›è¡Œå¤šè¡¨çš„æ“ä½œï¼Œå½“ç„¶é‡ç‚¹åœ¨æŸ¥è¯¢æ–¹é¢ã€‚ åˆ›å»ºè¡¨å®žä¾‹ï¼š ä½œè€…æ¨¡åž‹ï¼šä¸€ä¸ªä½œè€…æœ‰å§“åå’Œå¹´é¾„ã€‚ ä½œè€…è¯¦ç»†æ¨¡åž‹ï¼šæŠŠä½œè€…çš„è¯¦æƒ…æ”¾åˆ°è¯¦æƒ…è¡¨ï¼ŒåŒ…å«ç”Ÿæ—¥ï¼Œæ‰‹æœºå·ï¼Œå®¶åº­ä½å€ç­‰ä¿¡æ¯ã€‚ä½œè€…è¯¦æƒ…æ¨¡åž‹å’Œä½œè€…æ¨¡åž‹ä¹‹é—´æ˜¯ä¸€å¯¹ä¸€çš„å…³ç³»ï¼ˆone-to-oneï¼‰ã€‚ å‡ºç‰ˆå•†æ¨¡åž‹ï¼šå‡ºç‰ˆå•†æœ‰åç§°ï¼Œæ‰€åœ¨åŸŽå¸‚ã€‚ ä¹¦ç±æ¨¡åž‹ï¼š ä¹¦ç±æœ‰ä¹¦åå’Œå‡ºç‰ˆæ—¥æœŸï¼Œä¸€æœ¬ä¹¦å¯èƒ½ä¼šæœ‰å¤šä¸ªä½œè€…ï¼Œä¸€ä¸ªä½œè€…ä¹Ÿå¯ä»¥å†™å¤šæœ¬ä¹¦ï¼Œæ‰€ä»¥ä½œè€…å’Œä¹¦ç±çš„å…³ç³»å°±æ˜¯å¤šå¯¹å¤šçš„å…³è”å…³ç³»(many-to-many);ä¸€æœ¬ä¹¦åªåº”è¯¥ç”±ä¸€ä¸ªå‡ºç‰ˆå•†å‡ºç‰ˆï¼Œæ‰€ä»¥å‡ºç‰ˆå•†å’Œä¹¦ç±æ˜¯ä¸€å¯¹å¤šå…³è”å…³ç³»(one-to-many)ã€‚ å»ºè¡¨è¯­å¥1234567891011121314151617181920212223242526from django.db import models# Create your models here.class Book(models.Model): id = models.AutoField(primary_key=True) name = models.CharField(max_length=32) price = models.DecimalField(max_digits=5, decimal_places=2) publish = models.ForeignKey(to='Publish', to_field='id', on_delete=models.CASCADE) pub_date = models.DateField() authors = models.ManyToManyField(to='Author')class Author(models.Model): id = models.AutoField(primary_key=True) name = models.CharField(max_length=32) age = models.IntegerField(default=18)class Publish(models.Model): id = models.AutoField(primary_key=True) name = models.CharField(max_length=32) addr = models.CharField(max_length=32)class AuthorDetail(models.Model): id = models.AutoField(primary_key=True) addr = models.CharField(max_length=32) author = models.OneToOneField(to=Author, to_field='id') è¡¨å…³è”å…³ç³»å¦‚ä¸‹ æ³¨æ„ï¼š è¡¨çš„åç§°ä¸º appåå­—_modelNameï¼Œæ˜¯æ ¹æ®æ¨¡åž‹ä¸­çš„å…ƒæ•°æ®è‡ªåŠ¨ç”Ÿæˆçš„ï¼Œä¹Ÿå¯ä»¥é‡å†™ä¸ºåˆ«çš„åç§°ï¼› id å­—æ®µå¦‚æžœæ²¡æœ‰å®šä¹‰ï¼Œä¼šè‡ªåŠ¨æ·»åŠ ï¼› å¯¹äºŽå¤–é”®å­—æ®µï¼ŒDjango ä¼šè‡ªåŠ¨åœ¨å­—æ®µåå‰é¢åŠ ä¸Šâ€˜â€™_idâ€˜â€™æ¥åˆ›å»ºæ•°æ®åº“ä¸­çš„åˆ—åï¼› è¿™ä¸ªä¾‹å­ä¸­çš„ CREATE TABLE SQLè¯­å¥ä½¿ç”¨ PostgreSQL è¯­æ³•æ ¼å¼ï¼Œè¦æ³¨æ„çš„æ˜¯ Django ä¼šæ ¹æ® settings ä¸­æŒ‡å®šçš„æ•°æ®åº“ç±»åž‹æ¥ä½¿ç”¨ç›¸åº”çš„ sql è¯­å¥ï¼› å®šä¹‰å¥½æ¨¡åž‹åŽï¼Œéœ€è¦å‘Šè¯‰ Django ä½¿ç”¨è¿™äº›æ¨¡åž‹ï¼Œä½ è¦åšçš„æ˜¯ä¿®æ”¹é…ç½®æ–‡ä»¶ä¸­çš„ INSTALL_APPSZ ä¸­è®¾ç½®ï¼Œåœ¨å…¶ä¸­æ·»åŠ  models.pyæ‰€åœ¨åº”ç”¨çš„åç§°ï¼› å¤–é”®å­—æ®µ ForeignKey æœ‰ä¸€ä¸ª null=Trueçš„è®¾ç½®ï¼ˆå…è®¸å¤–é”®æŽ¥å—ç©ºå€¼ NULLï¼‰ï¼Œä½ å¯ä»¥èµ‹ç»™å®ƒç©ºå€¼ Noneã€‚ æ·»åŠ è¡¨è®°å½•ä¸€å¯¹å¤šæ–¹å¼ä¸€ï¼š 12publish_obj=Publish.objects.get(nid=1) book_obj=Book.objects.create(title="",publishDate="2012-12-12",price=100,publish=publish_obj) æ–¹å¼äºŒï¼š 1book_obj=Book.objects.create(title="",publishDate="2012-12-12",price=100,publish_id=1) æ³¨æ„ï¼š 12345678910111213141516171819å…³é”®ç‚¹: ä¸€ book_obj.publish=Publish.objects.filter(id=book_obj.publish_id).first() äºŒ book_obj.authors.all() å…³é”®ç‚¹:book.authors.all() # ä¸Žè¿™æœ¬ä¹¦å…³è”çš„ä½œè€…é›†åˆ 1 book.id=3 2 book_authors id book_id author_ID 3 3 1 4 3 2 3 author id name 1 musibii 2 thales book_obj.authors.all() -------&gt; [musibii,thales] 12345678910111213141516171819# -----ä¸€å¯¹å¤šæ·»åŠ  pub=Publish.objects.create(name='åŒ—äº¬å‡ºç‰ˆç¤¾',email='445676@qq.com',city='åŒ—äº¬') print(pub) # ä¸ºbookè¡¨ç»‘å®šå’Œpublishçš„å…³ç³» import datetime,time now=datetime.datetime.now().__str__() now = datetime.datetime.now().strftime('%Y-%m-%d') print(type(now)) print(now) # æ—¥æœŸç±»åž‹å¿…é¡»æ˜¯æ—¥æœŸå¯¹è±¡æˆ–è€…å­—ç¬¦ä¸²å½¢å¼çš„2018-09-12ï¼ˆ2018-9-12ï¼‰ï¼Œå…¶å®ƒå½¢å¼ä¸è¡Œ Book.objects.create(name='æµ·ç‡•3',price=333.123,publish_date=now,publish_id=2) Book.objects.create(name='æµ·3ç‡•3',price=35.123,publish_date='2018/02/28',publish=pub) pub=Publish.objects.filter(nid=1).first() book=Book.objects.create(name='æµ‹è¯•ä¹¦ç±',price=33,publish_date='2018-7-28',publish=pub) print(book.publish.name) # æŸ¥è¯¢å‡ºç‰ˆäº†çº¢æ¥¼æ¢¦è¿™æœ¬ä¹¦å‡ºç‰ˆç¤¾çš„é‚®ç®± book=Book.objects.filter(name='çº¢æ¥¼æ¢¦').first() print(book.publish.email) å¤šå¯¹å¤š12345678# å½“å‰ç”Ÿæˆçš„ä¹¦ç±å¯¹è±¡ book_obj=Book.objects.create(title="è¿½é£Žç­çš„äºº",price=200,publishDate="2012-11-12",publish_id=1) # ä¸ºä¹¦ç±ç»‘å®šçš„åšä½œè€…å¯¹è±¡ yuan=Author.objects.filter(name="shao").first() # åœ¨Authorè¡¨ä¸­ä¸»é”®ä¸º2çš„çºªå½• egon=Author.objects.filter(name="zuan").first() # åœ¨Authorè¡¨ä¸­ä¸»é”®ä¸º1çš„çºªå½• # ç»‘å®šå¤šå¯¹å¤šå…³ç³»,å³å‘å…³ç³»è¡¨book_authorsä¸­æ·»åŠ çºªå½• book_obj.authors.add(shao,zuan) # å°†æŸäº›ç‰¹å®šçš„ model å¯¹è±¡æ·»åŠ åˆ°è¢«å…³è”å¯¹è±¡é›†åˆä¸­ã€‚ ======= book_obj.authors.add(*[]) 123456789101112131415161718192021222324252627282930313233book = Book.objects.filter(name='çº¢æ¥¼æ¢¦').first() musibii=Author.objects.filter(name='musibii').first() eureka=Author.objects.filter(name='eureka').first() # 1 æ²¡æœ‰è¿”å›žå€¼ï¼Œç›´æŽ¥ä¼ å¯¹è±¡ book.authors.add(musibii,eureka) # 2 ç›´æŽ¥ä¼ ä½œè€…id book.authors.add(1,3) # 3 ç›´æŽ¥ä¼ åˆ—è¡¨,ä¼šæ‰“æ•£ book.authors.add(*[1,2]) # è§£é™¤å¤šå¯¹å¤šå…³ç³» book = Book.objects.filter(name='çº¢æ¥¼æ¢¦').first() # 1 ä¼ ä½œè€…id book.authors.remove(1) # 2 ä¼ ä½œè€…å¯¹è±¡ egon = Author.objects.filter(name='musibii').first() book.authors.remove(musibii) #3 ä¼ *åˆ—è¡¨ book.authors.remove(*[1,2]) #4 åˆ é™¤æ‰€æœ‰ book.authors.clear() # 5 æ‹¿åˆ°ä¸Ž è¿™æœ¬ä¹¦å…³è”çš„æ‰€æœ‰ä½œè€…ï¼Œç»“æžœæ˜¯querysetå¯¹è±¡ï¼Œä½œè€…åˆ—è¡¨ ret=book.authors.all() # print(ret) # 6 querysetå¯¹è±¡ï¼Œåˆå¯ä»¥ç»§ç»­ç‚¹ï¼ˆæŸ¥è¯¢çº¢æ¥¼æ¢¦è¿™æœ¬ä¹¦æ‰€æœ‰ä½œè€…çš„åå­—ï¼‰ ret=book.authors.all().values('name') print(ret) # ä»¥ä¸Šæ€»ç»“ï¼š # ï¼ˆ1ï¼‰ # book=Book.objects.filter(name='çº¢æ¥¼æ¢¦').first() # print(book) # åœ¨ç‚¹publishçš„æ—¶å€™ï¼Œå…¶å®žå°±æ˜¯æ‹¿ç€publish_idåˆåŽ»app01_publishè¿™ä¸ªè¡¨é‡ŒæŸ¥æ•°æ®äº† # print(book.publish) # ï¼ˆ2ï¼‰book.authors.all() å¤šå¯¹å¤šå…³ç³»å¸¸ç”¨ API123book_obj.authors.remove() # å°†æŸä¸ªç‰¹å®šçš„å¯¹è±¡ä»Žè¢«å…³è”å¯¹è±¡é›†åˆä¸­åŽ»é™¤ã€‚ ====== book_obj.authors.remove(*[])book_obj.authors.clear() #æ¸…ç©ºè¢«å…³è”å¯¹è±¡é›†åˆbook_obj.authors.set() #å…ˆæ¸…ç©ºå†è®¾ç½® åŸºäºŽå¯¹è±¡çš„è·¨è¡¨æŸ¥è¯¢ä¸€å¯¹å¤šæŸ¥è¯¢æ­£å‘æŸ¥è¯¢æŒ‰å­—æ®µ 1234# æŸ¥è¯¢ä¸»é”®ä¸º1çš„ä¹¦ç±çš„å‡ºç‰ˆç¤¾æ‰€åœ¨çš„åŸŽå¸‚book_obj=Book.objects.filter(pk=1).first()# book_obj.publish æ˜¯ä¸»é”®ä¸º1çš„ä¹¦ç±å¯¹è±¡å…³è”çš„å‡ºç‰ˆç¤¾å¯¹è±¡print(book_obj.publish.city) åå‘æŸ¥è¯¢æŒ‰è¡¨åå°å†™_set 12345publish=Publish.objects.get(name="è‹¹æžœå‡ºç‰ˆç¤¾")#publish.book_set.all() : ä¸Žè‹¹æžœå‡ºç‰ˆç¤¾å…³è”çš„æ‰€æœ‰ä¹¦ç±å¯¹è±¡é›†åˆbook_list=publish.book_set.all() for book_obj in book_list: print(book_obj.title) ä¾‹å­ï¼š 123456789# ä¸€å¯¹å¤šæ­£å‘æŸ¥è¯¢ book=Book.objects.filter(name='çº¢æ¥¼æ¢¦').first() print(book.publish)#ä¸Žè¿™æœ¬ä¹¦å…³è”çš„å‡ºç‰ˆç¤¾å¯¹è±¡ print(book.publish.name) # ä¸€å¯¹å¤šåå‘æŸ¥è¯¢ # äººæ°‘å‡ºç‰ˆç¤¾å‡ºç‰ˆè¿‡çš„ä¹¦ç±åç§° pub=Publish.objects.filter(name='äººæ°‘å‡ºç‰ˆç¤¾').first() ret=pub.book_set.all() print(ret) ä¸€å¯¹ä¸€æŸ¥è¯¢æ­£å‘æŸ¥è¯¢æŒ‰å­—æ®µ 12egon=Author.objects.filter(name="egon").first()print(egon.authorDetail.telephone) åå‘æŸ¥è¯¢æŒ‰è¡¨å 12345# æŸ¥è¯¢æ‰€æœ‰ä½å€åœ¨åŒ—äº¬çš„ä½œè€…çš„å§“å authorDetail_list=AuthorDetail.objects.filter(addr="beijing")for obj in authorDetail_list: print(obj.author.name) ä¾‹å­ï¼š 12345678910# ä¸€å¯¹ä¸€æ­£å‘æŸ¥è¯¢ # lqzçš„æ‰‹æœºå· musibii=Author.objects.filter(name='musibii').first() tel=musibii.author_detail.telephone print(tel) # ä¸€å¯¹ä¸€åå‘æŸ¥è¯¢ # åœ°å€åœ¨åŒ—äº¬çš„ä½œè€…å§“å author_detail=AuthorDatail.objects.filter(addr='åŒ—äº¬').first() name=author_detail.author.name print(name) å¤šå¯¹å¤šæŸ¥è¯¢æ­£å‘æŸ¥è¯¢æŒ‰å­—æ®µ 123456# æ‰€æœ‰ä½œè€…çš„åå­—ä»¥åŠæ‰‹æœºå· book_obj=Book.objects.filter(title="çœ‰").first()authors=book_obj.authors.all()for author_obj in authors: print(author_obj.name,author_obj.authorDetail.telephone) åå‘æŸ¥è¯¢æŒ‰è¡¨å_set 123456# æŸ¥è¯¢musibiiå‡ºè¿‡çš„æ‰€æœ‰ä¹¦ç±çš„åå­— author_obj=Author.objects.get(name="musibii")book_list=author_obj.book_set.all() #ä¸Žmusibiiä½œè€…ç›¸å…³çš„æ‰€æœ‰ä¹¦ç±for book_obj in book_list: print(book_obj.title) ä¾‹å­ï¼š 12345678910# æ­£å‘æŸ¥è¯¢----æŸ¥è¯¢çº¢æ¥¼æ¢¦æ‰€æœ‰ä½œè€…åç§°book=Book.objects.filter(name='çº¢æ¥¼æ¢¦').first()ret=book.authors.all()print(ret)for auth in ret: print(auth.name)# åå‘æŸ¥è¯¢ æŸ¥è¯¢lqzè¿™ä¸ªä½œè€…å†™çš„æ‰€æœ‰ä¹¦author=Author.objects.filter(name='lqz').first()ret=author.book_set.all()print(ret) æ³¨æ„ï¼šå¯ä»¥é€šè¿‡åœ¨ ForeignKey() å’ŒManyToManyFieldçš„å®šä¹‰ä¸­è®¾ç½® related_name çš„å€¼æ¥è¦†å†™ FOO_set çš„åç§°ã€‚ä¾‹å¦‚ï¼Œå¦‚æžœ Article model ä¸­åšä¸€ä¸‹æ›´æ”¹ï¼š 1publish = ForeignKey(Book, related_name='bookList') ä¹‹åŽä½¿ç”¨ï¼š 1234# æŸ¥è¯¢ äººæ°‘å‡ºç‰ˆç¤¾å‡ºç‰ˆè¿‡çš„æ‰€æœ‰ä¹¦ç± publish=Publish.objects.get(name="äººæ°‘å‡ºç‰ˆç¤¾")book_list=publish.bookList.all() # ä¸Žäººæ°‘å‡ºç‰ˆç¤¾å…³è”çš„æ‰€æœ‰ä¹¦ç±å¯¹è±¡é›†åˆ åŸºäºŽåŒä¸‹åˆ’çº¿çš„è·¨è¡¨æŸ¥è¯¢Django è¿˜æä¾›äº†ä¸€ç§ç›´è§‚è€Œé«˜æ•ˆçš„æ–¹å¼åœ¨æŸ¥è¯¢(lookups)ä¸­è¡¨ç¤ºå…³è”å…³ç³»ï¼Œå®ƒèƒ½è‡ªåŠ¨ç¡®è®¤ SQL JOIN è”ç³»ã€‚è¦åšè·¨å…³ç³»æŸ¥è¯¢ï¼Œå°±ä½¿ç”¨ä¸¤ä¸ªä¸‹åˆ’çº¿æ¥é“¾æŽ¥æ¨¡åž‹(model)é—´å…³è”å­—æ®µçš„åç§°ï¼Œç›´åˆ°æœ€ç»ˆé“¾æŽ¥åˆ°ä½ æƒ³è¦çš„model ä¸ºæ­¢ã€‚ æ­£å‘æŸ¥è¯¢æŒ‰å­—æ®µï¼Œåå‘æŸ¥è¯¢æŒ‰è¡¨åå°å§ç”¨æ¥å‘Šè¯‰ ORM å¼•æ“Ž join å“ªå¼ è¡¨ ä¸€å¯¹å¤šæŸ¥è¯¢1234567891011121314# æŸ¥è¯¢è‹¹æžœå‡ºç‰ˆç¤¾å‡ºç‰ˆè¿‡çš„æ‰€æœ‰ä¹¦ç±çš„åå­—ä¸Žä»·æ ¼(ä¸€å¯¹å¤š)# æ­£å‘æŸ¥è¯¢ æŒ‰å­—æ®µ:publishqueryResult=Book.objects .filter(publish__name="è‹¹æžœå‡ºç‰ˆç¤¾") .values_list("title","price")# åå‘æŸ¥è¯¢ æŒ‰è¡¨å:bookqueryResult=Publish.objects .filter(name="è‹¹æžœå‡ºç‰ˆç¤¾") .values_list("book__title","book__price")æŸ¥è¯¢çš„æœ¬è´¨ä¸€æ ·ï¼Œå°±æ˜¯select fromçš„è¡¨ä¸ä¸€æ · 12345678# æ­£å‘æŸ¥è¯¢æŒ‰å­—æ®µï¼Œåå‘æŸ¥è¯¢æŒ‰è¡¨åå°å†™# æŸ¥è¯¢çº¢æ¥¼æ¢¦è¿™æœ¬ä¹¦å‡ºç‰ˆç¤¾çš„åå­—# select * from app01_book inner join app01_publish# on app01_book.publish_id=app01_publish.nidret=Book.objects.filter(name='çº¢æ¥¼æ¢¦').values('publish__name')print(ret)ret=Publish.objects.filter(book__name='çº¢æ¥¼æ¢¦').values('name')print(ret) å¤šå¯¹å¤šæŸ¥è¯¢1234567891011# æŸ¥è¯¢musibiiå‡ºè¿‡çš„æ‰€æœ‰ä¹¦ç±çš„åå­—(å¤šå¯¹å¤š)# æ­£å‘æŸ¥è¯¢ æŒ‰å­—æ®µ:authors:queryResult=Book.objects .filter(authors__name="yuan") .values_list("title")# åå‘æŸ¥è¯¢ æŒ‰è¡¨å:bookqueryResult=Author.objects .filter(name="yuan") .values_list("book__title","book__price") ä¾‹å­ï¼š 1234567891011121314151617# æ­£å‘æŸ¥è¯¢æŒ‰å­—æ®µï¼Œåå‘æŸ¥è¯¢æŒ‰è¡¨åå°å†™# æŸ¥è¯¢çº¢æ¥¼æ¢¦è¿™æœ¬ä¹¦å‡ºç‰ˆç¤¾çš„åå­—# select * from app01_book inner join app01_publish# on app01_book.publish_id=app01_publish.nidret=Book.objects.filter(name='çº¢æ¥¼æ¢¦').values('publish__name')print(ret)ret=Publish.objects.filter(book__name='çº¢æ¥¼æ¢¦').values('name')print(ret)# sql è¯­å¥å°±æ˜¯fromçš„è¡¨ä¸ä¸€æ ·# -------å¤šå¯¹å¤šæ­£å‘æŸ¥è¯¢# æŸ¥è¯¢çº¢æ¥¼æ¢¦æ‰€æœ‰çš„ä½œè€…ret=Book.objects.filter(name='çº¢æ¥¼æ¢¦').values('authors__name')print(ret)# ---å¤šå¯¹å¤šåå‘æŸ¥è¯¢ret=Author.objects.filter(book__name='çº¢æ¥¼æ¢¦').values('name')ret=Author.objects.filter(book__name='çº¢æ¥¼æ¢¦').values('name','author_detail__addr')print(ret) ä¸€å¯¹ä¸€æŸ¥è¯¢12345# æ­£å‘æŸ¥è¯¢ret = Author.objects.filter(name="musibii").values("authordetail__telephone")# åå‘æŸ¥è¯¢ret = AuthorDetail.objects.filter(author__name="musibii").values("telephone") ä¾‹å­ï¼š 1234567# æŸ¥è¯¢musibiiçš„æ‰‹æœºå· # æ­£å‘æŸ¥ret=Author.objects.filter(name='musibii').values('author_detail__telephone')print(ret)# åå‘æŸ¥ret= AuthorDatail.objects.filter(author__name='musibii').values('telephone')print(ret) è¿žç»­è·¨è¡¨ä¾‹å­ï¼š 12345678910111213141516171819202122232425# æŸ¥è¯¢eurekaçš„æ‰‹æœºå·# æŸ¥è¯¢äººæ°‘å‡ºç‰ˆç¤¾å‡ºç‰ˆè¿‡çš„æ‰€æœ‰ä¹¦ç±çš„åå­—ä»¥åŠä½œè€…çš„å§“å# æ­£å‘æŸ¥è¯¢queryResult=Book.objects .filter(publish__name="äººæ°‘å‡ºç‰ˆç¤¾") .values_list("title","authors__name")# åå‘æŸ¥è¯¢queryResult=Publish.objects .filter(name="äººæ°‘å‡ºç‰ˆç¤¾") .values_list("book__title","book__authors__age","book__authors__name")# ç»ƒä¹ : æ‰‹æœºå·ä»¥151å¼€å¤´çš„ä½œè€…å‡ºç‰ˆè¿‡çš„æ‰€æœ‰ä¹¦ç±åç§°ä»¥åŠå‡ºç‰ˆç¤¾åç§°# æ–¹å¼1:queryResult=Book.objects .filter(authors__authorDetail__telephone__regex="151") .values_list("title","publish__name")# æ–¹å¼2: ret=Author.objects .filter(authordetail__telephone__startswith="151") .values("book__title","book__publish__name") 123456789101112131415# ----è¿›é˜¶ç»ƒä¹ ï¼Œè¿žç»­è·¨è¡¨# æŸ¥è¯¢æ‰‹æœºå·ä»¥33å¼€å¤´çš„ä½œè€…å‡ºç‰ˆè¿‡çš„ä¹¦ç±åç§°ä»¥åŠä¹¦ç±å‡ºç‰ˆç¤¾åç§°# author_datail author book publish# åŸºäºŽauthorDatailè¡¨ret=AuthorDatail.objects.filter(telephone__startswith='33').values('author__book__name','author__book__publish__name')print(ret)# åŸºäºŽAuthorè¡¨ret=Author.objects.filter(author_detail__telephone__startswith=33).values('book__name','book__publish__name')print(ret)# åŸºäºŽBookè¡¨ret=Book.objects.filter(authors__author_detail__telephone__startswith='33').values('name','publish__name')print(ret)# åŸºäºŽPublishè¡¨ret=Publish.objects.filter(book__authors__author_detail__telephone__startswith='33').values('book__name','name')print(ret) related_name1publish = ForeignKey(Blog, related_name='bookList') ä¾‹å­ï¼š 12345678æŸ¥è¯¢äººæ°‘å‡ºç‰ˆç¤¾å‡ºç‰ˆè¿‡çš„æ‰€æœ‰ä¹¦ç±çš„åå­—ä¸Žä»·æ ¼(ä¸€å¯¹å¤š)# åå‘æŸ¥è¯¢ ä¸å†æŒ‰è¡¨å:book,è€Œæ˜¯related_name:bookListqueryResult = Publish.objects .filter(name="äººæ°‘å‡ºç‰ˆç¤¾") .values_list("bookList__title", "bookList__price")]]></content>
      <categories>
        <category>Django</category>
      </categories>
  </entry>
  <entry>
    <title><![CDATA[Djangoï¼ˆåï¼‰]]></title>
    <url>%2F2019%2F01%2F14%2FDjango%EF%BC%88%E5%8D%81%EF%BC%89%2F</url>
    <content type="text"><![CDATA[Django ç³»åˆ—åšå®¢ï¼ˆåï¼‰å‰è¨€æœ¬ç¯‡åšå®¢ä»‹ç»åœ¨ Django ä¸­å¦‚ä½•å¯¹æ•°æ®åº“è¿›è¡Œå¢žåˆ æŸ¥æ”¹ï¼Œä¸»è¦ä¸ºå¯¹å•è¡¨è¿›è¡Œæ“ä½œã€‚ ORMç®€ä»‹æŸ¥è¯¢æ•°æ®å±‚æ¬¡å›¾è§£ï¼šå¦‚æžœæ“ä½œ mysqlï¼ŒORM æ˜¯åœ¨ pymysql ä¹‹ä¸Šåˆè¿›è¡Œäº†ä¸€å±‚å°è£…ã€‚ MVC æˆ–è€… MTV æ¡†æž¶ä¸­åŒ…æ‹¬ä¸€ä¸ªé‡è¦çš„éƒ¨åˆ†ï¼Œå°±æ˜¯ ORMï¼Œå®ƒå®žçŽ°äº†æ•°æ®æ¨¡åž‹ä¸Žæ•°æ®åº“çš„è§£è€¦åˆï¼Œå³æ•°æ®æ¨¡åž‹çš„è®¾è®¡ä¸éœ€è¦ä¾èµ–äºŽç‰¹å®šçš„æ•°æ®åº“ï¼Œé€šè¿‡ç®€å•çš„é…ç½®å°±å¯ä»¥è½»æ¾æ›´æ¢æ•°æ®åº“ï¼Œæžå¤§åœ°å‡è½»äº†å·¥ä½œé‡ï¼Œä¸éœ€è¦é¢å¯¹å› æ•°æ®å˜æ›´è€Œå¯¼è‡´çš„æ— æ•ˆåŠ³åŠ¨ã€‚ ORM æ˜¯â€˜â€™å¯¹è±¡-å…³ç³»-æ˜ å°„â€˜â€™çš„ç®€ç§° é€šè¿‡ ORM å¯ä»¥ç®€åŒ–ç”šè‡³ä¸éœ€è¦åœ¨å†™ sql è¯­å¥ï¼Œé€šè¿‡æ“ä½œä¸Žæ•°æ®åº“ä¸­å¯¹åº”çš„è¡¨çš„ç±»æ¥è¿›è¡Œå¢žåˆ æŸ¥æ”¹ã€‚ 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647#sqlä¸­çš„è¡¨ #åˆ›å»ºè¡¨: CREATE TABLE employee( id INT PRIMARY KEY auto_increment , name VARCHAR (20), gender BIT default 1, birthday DATA , department VARCHAR (20), salary DECIMAL (8,2) unsigned, ); #sqlä¸­çš„è¡¨çºªå½• #æ·»åŠ ä¸€æ¡è¡¨çºªå½•: INSERT employee (name,gender,birthday,salary,department) VALUES ("alex",1,"1985-12-12",8000,"ä¿æ´éƒ¨"); #æŸ¥è¯¢ä¸€æ¡è¡¨çºªå½•: SELECT * FROM employee WHERE age=24; #æ›´æ–°ä¸€æ¡è¡¨çºªå½•: UPDATE employee SET birthday="1989-10-24" WHERE id=1; #åˆ é™¤ä¸€æ¡è¡¨çºªå½•: DELETE FROM employee WHERE name="alex" #pythonçš„ç±»class Employee(models.Model): id=models.AutoField(primary_key=True) name=models.CharField(max_length=32) gender=models.BooleanField() birthday=models.DateField() department=models.CharField(max_length=32) salary=models.DecimalField(max_digits=8,decimal_places=2)#pythonçš„ç±»å¯¹è±¡ #æ·»åŠ ä¸€æ¡è¡¨çºªå½•: emp=Employee(name="alex",gender=True,birthday="1985-12-12",epartment="ä¿æ´éƒ¨") emp.save() #æŸ¥è¯¢ä¸€æ¡è¡¨çºªå½•: Employee.objects.filter(age=24) #æ›´æ–°ä¸€æ¡è¡¨çºªå½•: Employee.objects.filter(id=1).update(birthday="1989-10-24") #åˆ é™¤ä¸€æ¡è¡¨çºªå½•: Employee.objects.filter(name="alex").delete() å•è¡¨æ“ä½œåˆ›å»ºè¡¨ é¦–å…ˆåœ¨ settings.pyä¸­é…ç½®å¥½ mysqlå‚æ•°ã€‚ 1234567891011121314DATABASES = &#123; 'default': &#123; 'ENGINE': 'django.db.backends.mysql', 'NAME': 'friday_work', 'HOST': '127.0.0.1', 'PORT': 3306, 'USER': 'root', 'PASSWORD': 'password', 'ATOMIC_REQUEST': True, 'OPTIONS': &#123; "init_command": "SET storage_engine=MyISAM", &#125; &#125;&#125; 123456789101112'NAME':è¦è¿žæŽ¥çš„æ•°æ®åº“ï¼Œè¿žæŽ¥å‰éœ€è¦åˆ›å»ºå¥½'USER':è¿žæŽ¥æ•°æ®åº“çš„ç”¨æˆ·å'PASSWORD':è¿žæŽ¥æ•°æ®åº“çš„å¯†ç 'HOST':è¿žæŽ¥ä¸»æœºï¼Œé»˜è®¤æœ¬æœº'PORT':ç«¯å£ é»˜è®¤3306'ATOMIC_REQUEST': True,è®¾ç½®ä¸ºTrueç»Ÿä¸€ä¸ªhttpè¯·æ±‚å¯¹åº”çš„æ‰€æœ‰sqléƒ½æ”¾åœ¨ä¸€ä¸ªäº‹åŠ¡ä¸­æ‰§è¡Œï¼ˆè¦ä¹ˆæ‰€æœ‰éƒ½æˆåŠŸï¼Œè¦ä¹ˆæ‰€æœ‰éƒ½å¤±è´¥ï¼‰ã€‚æ˜¯å…¨å±€æ€§çš„é…ç½®ï¼Œ å¦‚æžœè¦å¯¹æŸä¸ªhttpè¯·æ±‚æ”¾æ°´ï¼ˆç„¶åŽè‡ªå®šä¹‰äº‹åŠ¡ï¼‰ï¼Œå¯ä»¥ç”¨non_atomic_requestsä¿®é¥°å™¨ 'OPTIONS': &#123; "init_command": "SET storage_engine=MyISAM", &#125;è®¾ç½®åˆ›å»ºè¡¨çš„å­˜å‚¨å¼•æ“Žä¸ºMyISAMï¼ŒINNODB æ³¨æ„ï¼šNAME å³æ•°æ®åº“çš„åå­—ï¼Œåœ¨ mysql è¿žæŽ¥å‰è¯¥æ•°æ®åº“å¿…é¡»å·²ç»åˆ›å»ºï¼Œè€Œä¸Šé¢çš„ sqlite æ•°æ®åº“ä¸‹çš„db.sqlite3åˆ™æ˜¯é¡¹ç›®è‡ªåŠ¨ åˆ›å»º USER å’Œ PASSWORD åˆ†åˆ«æ˜¯æ•°æ®åº“çš„ç”¨æˆ·åå’Œå¯†ç ã€‚è®¾ç½®å®ŒåŽï¼Œå†å¯åŠ¨æˆ‘ä»¬çš„ django é¡¹ç›®å‰ï¼Œæˆ‘ä»¬éœ€è¦æ¿€æ´» mysqlã€‚ç„¶åŽï¼Œå¯åŠ¨é¡¹ç›®ä¼šæŠ¥é”™ï¼šno module named MySQLdb ã€‚è¿™æ˜¯å› ä¸ºdjangoé»˜è®¤ä½ å¯¼å…¥çš„é©±åŠ¨æ˜¯MySQLdbï¼Œå¯æ˜¯MySQLdb å¯¹äºŽpy3æœ‰å¾ˆå¤§é—®é¢˜ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦çš„é©±åŠ¨æ˜¯PyMySQL æ‰€ä»¥ï¼Œæˆ‘ä»¬åªéœ€è¦æ‰¾åˆ°é¡¹ç›®åæ–‡ä»¶ä¸‹çš„init,åœ¨é‡Œé¢å†™å…¥ä¸‹é¢çš„ä»£ç ï¼š åœ¨ä¸€ä¸ªæ¨¡å—ä¸­è®¾ç½® mysql å¼•æ“Ž 123import pymysqlpymysql.install_as_MySQLdb() åœ¨ models.pyä¸­åˆ›å»ºæ•°æ®æ¨¡åž‹ 1234567891011from django.db import models# Create your models here.class Book(models.Model): id = models.AutoField(primary_key=True) name = models.CharField(max_length=64) pub_data = models.DateField() price = models.DecimalField(max_digits=5, decimal_places=2) publish = models.CharField(max_length=12) def __str__(self): return self.name æ•°æ®è¿ç§» 12python manage.py makemigrationspython manage.py migrate æƒ³æ‰“å° ORM è½¬æ¢è¿‡ç¨‹ä¸­çš„ sqlï¼Œåœ¨ settings.pyä¸­è¿›è¡Œå¦‚ä¸‹è®¾ç½®ï¼š 1234567891011121314151617LOGGING = &#123; 'version': 1, 'disable_existing_loggers': False, 'handlers': &#123; 'console':&#123; 'level':'DEBUG', 'class':'logging.StreamHandler', &#125;, &#125;, 'loggers': &#123; 'django.db.backends': &#123; 'handlers': ['console'], 'propagate': True, 'level':'DEBUG', &#125;, &#125;&#125; å¢žåŠ åˆ é™¤å­—æ®µ åˆ é™¤ï¼Œç›´æŽ¥æ³¨é‡ŠæŽ‰å­—æ®µï¼Œé‡æ–°æ‰§è¡Œæ•°æ®åº“è¿ç§»å‘½ä»¤å³å¯ï¼› æ–°å¢žå­—æ®µï¼Œåœ¨ç±»é‡Œç›´æŽ¥æ–°å¢žå­—æ®µï¼Œç›´æŽ¥æ‰§è¡Œæ•°æ®åº“è¿ç§»å‘½ä»¤ä¼šæç¤ºè¾“å…¥é»˜è®¤å€¼ï¼Œæ­¤æ—¶éœ€è¦åœ¨å­—æ®µé‡Œé¢è®¾ç½®ï¼š 1null=True æ³¨æ„ï¼š â€‹ 1. æ•°æ®åº“è¿ç§»è®°å½•éƒ½åœ¨ application ä¸‹é¢çš„ migrations é‡Œé¢çš„ py æ–‡ä»¶ä¸­ï¼› â€‹ 2. ä½¿ç”¨ showmigrations å‘½ä»¤å¯ä»¥æŸ¥çœ‹æ²¡æœ‰æ‰§è¡Œ migrate çš„æ–‡ä»¶ï¼› â€‹ 3. makemigrations æ˜¯ç”Ÿæˆä¸€ä¸ªåˆ›å»ºè¡¨çš„è®°å½•ï¼Œmigrate æ˜¯å°†æ›´æ”¹æäº¤åˆ°æ•°æ®åº“ã€‚ åœ¨ python ä¸­è°ƒç”¨ Django çŽ¯å¢ƒ 12345678910import osif __name__ == '__main__': os.environ.setdefault("DJANGO_SETTINGS_MODULE", "untitled15.settings") import django django.setup() from app01 import models books = models.Book.objects.all() print(books) æ›´å¤šå­—æ®µå’Œå‚æ•°æ¯ä¸ªå­—æ®µæœ‰ä¸€äº›ç‰¹æœ‰çš„å‚æ•°ï¼Œä¾‹å¦‚ï¼ŒCharField éœ€è¦ max_lengthå‚æ•°æ¥æŒ‡å®š VARCHAR æ•°æ®åº“å­—æ®µçš„å¤§å°ã€‚è¿˜æœ‰ä¸€äº›é€‚ç”¨äºŽæ‰€æœ‰å­—æ®µçš„é€šç”¨å‚æ•°ã€‚è¿™äº›å‚æ•°åœ¨æ–‡æ¡£ä¸­æœ‰è¯¦ç»†å®šä¹‰ï¼Œè¿™é‡Œç®€å•ä»‹ç»ä¸€äº›å¸¸ç”¨å­—æ®µå«ä¹‰ï¼š AutoField(Field)ï¼šintè‡ªå¢žåˆ—ï¼Œå¿…é¡»å¡«å…¥å‚æ•°primary_key=True BigAutoField(AutoField)ï¼šbigint è‡ªå¢žåˆ—ï¼Œå¿…é¡»å¡«å…¥å‚æ•°primary_key=True æ³¨ï¼šå½“ model ä¸­æ²¡æœ‰è‡ªå¢žåˆ—ï¼Œåˆ™è‡ªåŠ¨ä¼šåˆ›å»ºä¸€ä¸ªåˆ—åä¸º id çš„å­—æ®µ SmallIntegerField(IntegerField)ï¼šå°æ•´æ•°ï¼Œ-32768 ~ 32767 PositiveSmallIntegerField(PositiveIntegerRelDbTypeMixin, IntegerField)ï¼šæ­£å°æ•´æ•° 0 ~ 32767 IntegerField(Field)ï¼šæ•´æ•°åˆ—ï¼ˆæœ‰ç¬¦å·ï¼‰-2147483648 ~ 2147483647 PositiveIntegerField(PositiveIntegerRelDbTypeMixin, IntegerField)ï¼šæ­£æ•´æ•° 0 ~ 2147483647 BigIntegerField(IntegerField)ï¼šé•¿æ•´åž‹ï¼ˆæœ‰ç¬¦å·ï¼‰-9223372036854775808 ~ 9223372036854775807 è‡ªå®šä¹‰æ— ç¬¦å·æ•´æ•°å­—æ®µ 123class UnsignedIntegerField(models.IntegerField): def db_type(self, connection): return 'integer UNSIGNED' BooleanField(Field)ï¼šå¸ƒå°”å€¼ç±»åž‹ NullBooleanField(Field)ï¼šå¯ä»¥ä¸ºç©ºçš„å¸ƒå°”å€¼ CharField(Field)ï¼šå­—ç¬¦ç±»åž‹ã€‚å¿…é¡»è®¾ç½® max_lengthå‚æ•°ï¼Œè¡¨ç¤ºå­—ç¬¦é•¿åº¦ TextField(Field)ï¼šæ–‡æœ¬ç±»åž‹ EmailField(CharField)ï¼šå­—ç¬¦ä¸²ç±»åž‹ï¼ŒDjango admin ä»¥åŠ ModelForm ä¸­æä¾›éªŒè¯æœºåˆ¶ IPAddressField(Field)ï¼šå­—ç¬¦ä¸²ç±»åž‹ï¼ŒDjango Admin ä»¥åŠ ModelForm ä¸­æä¾›éªŒè¯ IPV4æœºåˆ¶ GenericIPAddressField(Field)ï¼šå­—ç¬¦ä¸²ç±»åž‹ï¼ŒDjango Admin ä»¥åŠ ModelFOrm ä¸­æä¾›éªŒè¯ IPV4å’Œ IPV6ï¼Œå‚æ•°ï¼šprotocolï¼Œç”¨äºŽæŒ‡å®š IPV4æˆ– IPV6ï¼Œ URLField(CharField)ï¼šå­—ç¬¦ä¸²ç±»åž‹ï¼ŒDjango Admin ä»¥åŠModelForm ä¸­æä¾›éªŒè¯ URL SlugField(CharField)ï¼šå­—ç¬¦ä¸²ç±»åž‹ï¼ŒDjango Admin ä»¥åŠ ModelForm ä¸­æä¾›éªŒè¯æ”¯æŒå­—æ¯ã€æ•°å­—ã€ä¸‹åˆ’çº¿ã€è¿žæŽ¥ç¬¦ï¼ˆå‡å·ï¼‰ CommaSeparatedIntegerField(CharField)ï¼šå­—ç¬¦ä¸²ç±»åž‹ï¼Œæ ¼å¼å¿…é¡»ä¸ºé€—å·åˆ†éš”çš„æ•°å­— UUIDField(Field)ï¼šå­—ç¬¦ä¸²ç±»åž‹ï¼ŒDjango Admin ä»¥åŠ ModelForm ä¸­æä¾›å¯¹ UUID æ ¼å¼çš„éªŒè¯ FilePathField(Field)ï¼šå­—ç¬¦ä¸²ï¼ŒDjango Admin ä»¥åŠ ModelFOrm ä¸­æä¾›è¯»å–æ–‡ä»¶å¤¹ä¸‹æ–‡ä»¶çš„åŠŸèƒ½ï¼Œå‚æ•°ï¼špathï¼šæ–‡ä»¶å¤¹è·¯å¾„ï¼Œmatch=Noneï¼šæ­£åˆ™åŒ¹é…ï¼Œrecursive=Falseï¼šé€’å½’ä¸‹é¢çš„æ–‡ä»¶å¤¹ï¼Œallow_files=Trueï¼šå…è®¸æ–‡ä»¶ï¼Œallow_folders=Falseï¼šå…è®¸æ–‡ä»¶å¤¹ FileField(Field)ï¼šå­—ç¬¦ä¸²ï¼Œè·¯å¾„ä¿å­˜åœ¨æ•°æ®åº“ï¼Œæ–‡ä»¶ä¸Šä¼ åˆ°æŒ‡å®šç›®å½•ï¼Œå‚æ•°ï¼šupload_to=â€™â€™â€™â€™ï¼šä¸Šä¼ æ–‡ä»¶çš„ä¿å­˜è·¯å¾„ï¼Œstorage=Noneï¼šå­˜å‚¨ç»„ä»¶ï¼Œé»˜è®¤ django.core.files.storage.FileSystemStorage ImageField(FileFiled)ï¼šå­—ç¬¦ä¸²ï¼Œè·¯å¾„ä¿å­˜åœ¨æ•°æ®åº“ï¼Œæ–‡ä»¶ä¸Šä¼ åˆ°æŒ‡å®šç›®å½•ï¼Œå‚æ•°ï¼šupload_to=â€™â€™â€™â€™ï¼šä¸Šä¼ æ–‡ä»¶çš„ä¿å­˜è·¯å¾„ï¼Œstorage=Noneï¼šå­˜å‚¨ç»„ä»¶ï¼Œé»˜è®¤django.core.files.storage.FileSystemStorageï¼Œwidth_field=Noneï¼šä¸Šä¼ å›¾ç‰‡çš„é«˜åº¦ä¿å­˜çš„æ•°æ®åº“å­—æ®µåï¼ˆå­—ç¬¦ä¸²ï¼‰ï¼Œheight_field=Noneï¼šä¸Šä¼ å›¾ç‰‡çš„å®½åº¦ä¿å­˜çš„æ•°æ®åº“å­—æ®µåï¼ˆå­—ç¬¦ä¸²ï¼‰ DateTimeField(DateField)ï¼šæ—¥æœŸ+æ—¶é—´æ ¼å¼ï¼šYYYY-MM-DD HH:MM[:ss[.uuuuuu]][TZ] DateField(DateTimeCheckMixin, Field)ï¼šæ—¥æœŸæ ¼å¼ï¼šYYYY-MM-DD TimeField(DateTimeCheckMixin, Field)ï¼šæ—¶é—´æ ¼å¼ï¼šHH:MM[:ss[.uuuuuu]] DurationField(Field)ï¼šé•¿æ•´æ•°ï¼Œæ—¶é—´é—´éš”ï¼Œæ•°æ®åº“ä¸­æŒ‰ç…§ bigint å­˜å‚¨ï¼ŒORM ä¸­èŽ·å–çš„å€¼ä¸º datetime.timedeltaç±»åž‹ FloatField(Field)ï¼šæµ®ç‚¹åž‹ DecimalField(Field)ï¼š10è¿›åˆ¶å°æ•°ï¼Œå‚æ•°ï¼šmax_digitsï¼šå°æ•°ç‚¹æ€»é•¿åº¦ï¼Œdecimal_placesï¼šå°æ•°ä½é•¿åº¦ BinaryField(Field)ï¼šäºŒè¿›åˆ¶ç±»åž‹ å­—æ®µä¸­çš„å‚æ•°æ„æ€1234567891011121314151617181920212223242526(1)null å¦‚æžœä¸ºTrueï¼ŒDjango å°†ç”¨NULL æ¥åœ¨æ•°æ®åº“ä¸­å­˜å‚¨ç©ºå€¼ã€‚ é»˜è®¤å€¼æ˜¯ False. (1)blank å¦‚æžœä¸ºTrueï¼Œè¯¥å­—æ®µå…è®¸ä¸å¡«ã€‚é»˜è®¤ä¸ºFalseã€‚è¦æ³¨æ„ï¼Œè¿™ä¸Ž null ä¸åŒã€‚nullçº¯ç²¹æ˜¯æ•°æ®åº“èŒƒç•´çš„ï¼Œè€Œ blank æ˜¯æ•°æ®éªŒè¯èŒƒç•´çš„ã€‚å¦‚æžœä¸€ä¸ªå­—æ®µçš„blank=Trueï¼Œè¡¨å•çš„éªŒè¯å°†å…è®¸è¯¥å­—æ®µæ˜¯ç©ºå€¼ã€‚å¦‚æžœå­—æ®µçš„blank=Falseï¼Œè¯¥å­—æ®µå°±æ˜¯å¿…å¡«çš„ã€‚ (2)default å­—æ®µçš„é»˜è®¤å€¼ã€‚å¯ä»¥æ˜¯ä¸€ä¸ªå€¼æˆ–è€…å¯è°ƒç”¨å¯¹è±¡ã€‚å¦‚æžœå¯è°ƒç”¨ ï¼Œæ¯æœ‰æ–°å¯¹è±¡è¢«åˆ›å»ºå®ƒéƒ½ä¼šè¢«è°ƒç”¨ã€‚ (3)primary_key å¦‚æžœä¸ºTrueï¼Œé‚£ä¹ˆè¿™ä¸ªå­—æ®µå°±æ˜¯æ¨¡åž‹çš„ä¸»é”®ã€‚å¦‚æžœä½ æ²¡æœ‰æŒ‡å®šä»»ä½•ä¸€ä¸ªå­—æ®µçš„primary_key=Trueï¼ŒDjango å°±ä¼šè‡ªåŠ¨æ·»åŠ ä¸€ä¸ªIntegerFieldå­—æ®µåšä¸ºä¸»é”®ï¼Œæ‰€ä»¥é™¤éžä½ æƒ³è¦†ç›–é»˜è®¤çš„ä¸»é”®è¡Œä¸ºï¼Œå¦åˆ™æ²¡å¿…è¦è®¾ç½®ä»»ä½•ä¸€ä¸ªå­—æ®µçš„primary_key=Trueã€‚ (4)unique å¦‚æžœè¯¥å€¼è®¾ç½®ä¸º True, è¿™ä¸ªæ•°æ®å­—æ®µçš„å€¼åœ¨æ•´å¼ è¡¨ä¸­å¿…é¡»æ˜¯å”¯ä¸€çš„ (5)choicesç”±äºŒå…ƒç»„ç»„æˆçš„ä¸€ä¸ªå¯è¿­ä»£å¯¹è±¡ï¼ˆä¾‹å¦‚ï¼Œåˆ—è¡¨æˆ–å…ƒç»„ï¼‰ï¼Œç”¨æ¥ç»™å­—æ®µæä¾›é€‰æ‹©é¡¹ã€‚ å¦‚æžœè®¾ç½®äº†choices ï¼Œé»˜è®¤çš„è¡¨å•å°†æ˜¯ä¸€ä¸ªé€‰æ‹©æ¡†è€Œä¸æ˜¯æ ‡å‡†çš„æ–‡æœ¬æ¡†ï¼Œ&lt;br&gt;è€Œä¸”è¿™ä¸ªé€‰æ‹©æ¡†çš„é€‰é¡¹å°±æ˜¯choices ä¸­çš„é€‰é¡¹ã€‚ è¿”å›žå€¼ä¸ºå­—æ®µåœ¨æ•°æ®åº“ä¸­çš„å±žæ€§ï¼Œ Django å­—æ®µé»˜è®¤çš„å€¼ï¼š1234567891011121314151617181920212223242526'AutoField': 'integer AUTO_INCREMENT','BigAutoField': 'bigint AUTO_INCREMENT','BinaryField': 'longblob','BooleanField': 'bool','CharField': 'varchar(%(max_length)s)','CommaSeparatedIntegerField': 'varchar(%(max_length)s)','DateField': 'date','DateTimeField': 'datetime','DecimalField': 'numeric(%(max_digits)s, %(decimal_places)s)','DurationField': 'bigint','FileField': 'varchar(%(max_length)s)','FilePathField': 'varchar(%(max_length)s)','FloatField': 'double precision','IntegerField': 'integer','BigIntegerField': 'bigint','IPAddressField': 'char(15)','GenericIPAddressField': 'char(39)','NullBooleanField': 'bool','OneToOneField': 'integer','PositiveIntegerField': 'integer UNSIGNED','PositiveSmallIntegerField': 'smallint UNSIGNED','SlugField': 'varchar(%(max_length)s)','SmallIntegerField': 'smallint','TextField': 'longtext','TimeField': 'time','UUIDField': 'char(32)', å•è¡¨å¢žåˆ æŸ¥æ”¹æ·»åŠ è¡¨è®°å½• ç¬¬ä¸€ç§æ–¹æ³• 12# createæ–¹æ³•çš„è¿”å›žå€¼book_objå°±æ˜¯æ’å…¥bookè¡¨ä¸­çš„pythonè‘µèŠ±å®å…¸è¿™æœ¬ä¹¦ç±çºªå½•å¯¹è±¡book_obj=Book.objects.create(title="pythonè‘µèŠ±å®å…¸",state=True,price=100,publish="è‹¹æžœå‡ºç‰ˆç¤¾",pub_date="2012-12-12") ç¬¬äºŒç§æ–¹æ³• 12book_obj=Book(title="pythonè‘µèŠ±å®å…¸",state=True,price=100,publish="è‹¹æžœå‡ºç‰ˆç¤¾",pub_date="2012-12-12")book_obj.save() æŸ¥è¯¢è¡¨è®°å½•12345678910111213141516171819202122232425&lt;1&gt; all(): æŸ¥è¯¢æ‰€æœ‰ç»“æžœ &lt;2&gt; filter(**kwargs): å®ƒåŒ…å«äº†ä¸Žæ‰€ç»™ç­›é€‰æ¡ä»¶ç›¸åŒ¹é…çš„å¯¹è±¡ &lt;3&gt; get(**kwargs): è¿”å›žä¸Žæ‰€ç»™ç­›é€‰æ¡ä»¶ç›¸åŒ¹é…çš„å¯¹è±¡ï¼Œè¿”å›žç»“æžœæœ‰ä¸”åªæœ‰ä¸€ä¸ªï¼Œå¦‚æžœç¬¦åˆç­›é€‰æ¡ä»¶çš„å¯¹è±¡è¶…è¿‡ä¸€ä¸ªæˆ–è€…æ²¡æœ‰éƒ½ä¼šæŠ›å‡ºé”™è¯¯ã€‚ &lt;4&gt; exclude(**kwargs): å®ƒåŒ…å«äº†ä¸Žæ‰€ç»™ç­›é€‰æ¡ä»¶ä¸åŒ¹é…çš„å¯¹è±¡ &lt;5&gt; order_by(*field): å¯¹æŸ¥è¯¢ç»“æžœæŽ’åº('-id') &lt;6&gt; reverse(): å¯¹æŸ¥è¯¢ç»“æžœåå‘æŽ’åº &lt;8&gt; count(): è¿”å›žæ•°æ®åº“ä¸­åŒ¹é…æŸ¥è¯¢(QuerySet)çš„å¯¹è±¡æ•°é‡ã€‚ &lt;9&gt; first(): è¿”å›žç¬¬ä¸€æ¡è®°å½• &lt;10&gt; last(): è¿”å›žæœ€åŽä¸€æ¡è®°å½• &lt;11&gt; exists(): å¦‚æžœQuerySetåŒ…å«æ•°æ®ï¼Œå°±è¿”å›žTrueï¼Œå¦åˆ™è¿”å›žFalse &lt;12&gt; values(*field): è¿”å›žä¸€ä¸ªValueQuerySetâ€”â€”ä¸€ä¸ªç‰¹æ®Šçš„QuerySetï¼Œè¿è¡ŒåŽå¾—åˆ°çš„å¹¶ä¸æ˜¯ä¸€ç³»åˆ— modelçš„å®žä¾‹åŒ–å¯¹è±¡ï¼Œè€Œæ˜¯ä¸€ä¸ªå¯è¿­ä»£çš„å­—å…¸åºåˆ—&lt;13&gt; values_list(*field): å®ƒä¸Žvalues()éžå¸¸ç›¸ä¼¼ï¼Œå®ƒè¿”å›žçš„æ˜¯ä¸€ä¸ªå…ƒç»„åºåˆ—ï¼Œvaluesè¿”å›žçš„æ˜¯ä¸€ä¸ªå­—å…¸åºåˆ— &lt;14&gt; distinct(): ä»Žè¿”å›žç»“æžœä¸­å‰”é™¤é‡å¤çºªå½• åŸºäºŽåŒä¸‹åˆ’çº¿çš„æ¨¡ç³ŠæŸ¥è¯¢12345678910Book.objects.filter(price__in=[100,200,300])Book.objects.filter(price__gt=100)Book.objects.filter(price__lt=100)Book.objects.filter(price__gte=100)Book.objects.filter(price__lte=100)Book.objects.filter(price__range=[100,200])Book.objects.filter(title__contains="python")Book.objects.filter(title__icontains="python")Book.objects.filter(title__startswith="py")Book.objects.filter(pub_date__year=2012) åˆ é™¤è¡¨è®°å½•åˆ é™¤æ–¹æ³•å°±æ˜¯ delete()ï¼Œå®ƒè¿è¡Œæ—¶ç«‹å³åˆ é™¤å¯¹è±¡è€Œä¸è¿”å›žä»»ä½•å€¼ã€‚ä¾‹å¦‚ï¼š 1model_obj.delete() ä½ ä¹Ÿå¯ä»¥ä¸€æ¬¡æ€§åˆ é™¤å¤šä¸ªå¯¹è±¡ã€‚æ¯ä¸ª QuerySet éƒ½æœ‰ä¸€ä¸ª delete() æ–¹æ³•ï¼Œå®ƒä¸€æ¬¡æ€§åˆ é™¤ QuerySet ä¸­æ‰€æœ‰çš„å¯¹è±¡ã€‚ ä¾‹å¦‚ï¼Œä¸‹é¢çš„ä»£ç å°†åˆ é™¤ pub_date æ˜¯2005å¹´çš„ Entry å¯¹è±¡ï¼š 1Entry.objects.filter(pub_date__year=2005).delete() åœ¨ Django åˆ é™¤å¯¹è±¡æ—¶ï¼Œä¼šæ¨¡ä»¿ SQL çº¦æŸ ON DELETE CASCADE çš„è¡Œä¸ºï¼Œæ¢å¥è¯è¯´ï¼Œåˆ é™¤ä¸€ä¸ªå¯¹è±¡æ—¶ä¹Ÿä¼šåˆ é™¤ä¸Žå®ƒç›¸å…³è”çš„å¤–é”®å¯¹è±¡ã€‚ä¾‹å¦‚ï¼š 123b = Blog.objects.get(pk=1)# This will delete the Blog and all of its Entry objects.b.delete() è¦æ³¨æ„çš„æ˜¯ï¼š delete() æ–¹æ³•æ˜¯ QuerySet ä¸Šçš„æ–¹æ³•ï¼Œä½†å¹¶ä¸é€‚ç”¨äºŽ Manager æœ¬èº«ã€‚è¿™æ˜¯ä¸€ç§ä¿æŠ¤æœºåˆ¶ï¼Œæ˜¯ä¸ºäº†é¿å…æ„å¤–åœ°è°ƒç”¨ Entry.objects.delete() æ–¹æ³•å¯¼è‡´ æ‰€æœ‰çš„ è®°å½•è¢«è¯¯åˆ é™¤ã€‚å¦‚æžœä½ ç¡®è®¤è¦åˆ é™¤æ‰€æœ‰çš„å¯¹è±¡ï¼Œé‚£ä¹ˆä½ å¿…é¡»æ˜¾å¼åœ°è°ƒç”¨ï¼š 1Entry.objects.all().delete() å¦‚æžœä¸è¦çº§è”åˆ é™¤ï¼Œå¯ä»¥è®¾ç½®ä¸ºï¼š 1pubHouse = models.ForeignKey(to='Publish', on_delete=models.SET_NULL, blank=True, null=True) ä¿®æ”¹è¡¨è®°å½•1Book.objects.filter(title__startswith="py").update(price=120 æ­¤å¤–ï¼Œupdate()æ–¹æ³•å¯¹äºŽä»»ä½•ç»“æžœé›†ï¼ˆQuerySetï¼‰å‡æœ‰æ•ˆï¼Œè¿™æ„å‘³ç€ä½ å¯ä»¥åŒæ—¶æ›´æ–°å¤šæ¡è®°å½• update()æ–¹æ³•ä¼šè¿”å›žä¸€ä¸ªæ•´åž‹æ•°å€¼ï¼Œè¡¨ç¤ºå—å½±å“çš„è®°å½•æ¡æ•°ã€‚]]></content>
      <categories>
        <category>Django</category>
      </categories>
  </entry>
  <entry>
    <title><![CDATA[Djangoï¼ˆä¹ï¼‰]]></title>
    <url>%2F2019%2F01%2F14%2FDjango%EF%BC%88%E4%B9%9D%EF%BC%89%2F</url>
    <content type="text"><![CDATA[Django ç³»åˆ—åšå®¢ï¼ˆä¹ï¼‰å‰è¨€æœ¬ç¯‡åšå®¢ä»‹ç» Django æ¨¡æ¿çš„å¯¼å…¥ä¸Žç»§æ‰¿ä»¥åŠå¯¼å…¥å¯¼å…¥é™æ€æ–‡ä»¶çš„å‡ ç§æ–¹å¼ã€‚ æ¨¡æ¿å¯¼å…¥æ¨¡æ¿å¯¼å…¥è¯­æ³•ï¼š&123;% include â€˜æ¨¡æ¿åç§°â€™ %&125; å¦‚ä¸‹ï¼š 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647&lt;!-- base.html --&gt;&lt;!DOCTYPE html&gt;&lt;html&gt;&lt;head&gt; &lt;meta charset="UTF-8"&gt; &lt;title&gt;index&lt;/title&gt; &lt;link rel="stylesheet" href="/static/bootstrap-3.3.7-dist/css/bootstrap.css"&gt; &lt;style&gt; .head &amp;123; height: 100px; background-color: #2aabd2; text-align: center; line-height: 100px; font-size: 25px; &amp;125; .container-fluid &amp;123; text-align: center; &amp;125; a &amp;123; list-style: none; text-decoration: none !important; &amp;125; &lt;/style&gt;&lt;/head&gt;&lt;body&gt;&lt;div class="head"&gt;å›¾ä¹¦ç®¡ç†ç³»ç»Ÿ&lt;/div&gt;&lt;div class="container-fluid"&gt; &lt;div class="row"&gt; &lt;div class="col-md-3"&gt; &amp;123;% include 'left.html' %&amp;125; &lt;/div&gt; &lt;div class="col-md-9"&gt; &lt;div class="pull-right"&gt; &amp;123;% block right %&amp;125; &amp;123;% endblock %&amp;125; &lt;/div&gt; &amp;123;% block content %&amp;125; &amp;123;% endblock %&amp;125; &lt;/div&gt; &lt;/div&gt;&lt;/div&gt;&lt;/body&gt;&lt;/html&gt; 12345678910111213141516171819202122&lt;!-- left.html --&gt;&lt;div&gt; &lt;div class="panel panel-danger"&gt; &lt;div class="panel-heading"&gt; &lt;h3 class="panel-title"&gt;&lt;a href="/book/"&gt;å›¾ä¹¦åˆ—è¡¨&lt;/a&gt;&lt;/h3&gt; &lt;/div&gt; &lt;/div&gt; &lt;div class="panel panel-danger"&gt; &lt;div class="panel-heading"&gt; &lt;h3 class="panel-title"&gt;&lt;a href="/author/"&gt;ä½œè€…åˆ—è¡¨&lt;/a&gt;&lt;/h3&gt; &lt;/div&gt; &lt;/div&gt; &lt;div class="panel panel-danger"&gt; &lt;div class="panel-heading"&gt; &lt;h3 class="panel-title"&gt;&lt;a href="/publish/"&gt;å‡ºç‰ˆç¤¾åˆ—è¡¨&lt;/a&gt;&lt;/h3&gt; &lt;/div&gt; &lt;/div&gt;&lt;/div&gt; 123456&lt;!-- other.html --&gt;&amp;123;% extends 'base.html' %&amp;125;&amp;123;% block content %&amp;125; &amp;123;&amp;123; blcok.super &amp;125;&amp;125;&amp;123;% endblock content %&amp;125; æ¨¡æ¿ç»§æ‰¿Django æ¨¡æ¿å¼•æ“Žä¸­æœ€å¼ºå¤§çš„ä¹Ÿæ˜¯æœ€å¤æ‚çš„é™¤äº† orm å°±æ˜¯æ¨¡æ¿ç»§æ‰¿äº†ã€‚æ¨¡æ¿ç»§æ‰¿å¯ä»¥è®©æ‚¨åˆ›å»ºä¸€ä¸ªåŸºæœ¬çš„â€˜â€™éª¨æž¶â€˜â€™æ¨¡æ¿ï¼Œå®ƒåŒ…å«æ‚¨ç«™ç‚¹çš„å…¨éƒ¨å…ƒç´ ï¼Œå¹¶ä¸”å¯ä»¥å®šä¹‰å¯ä»¥è¢«å­æ¨¡æ¿è¦†ç›–çš„ blocksã€‚ é€šè¿‡ä¸‹é¢çš„ä¾‹å­ï¼Œå¯ä»¥å®¹æ˜“çš„ç†è§£æ¨¡æ¿ç»§æ‰¿ï¼š 12345678910111213141516171819202122&lt;!DOCTYPE html&gt;&lt;html lang="en"&gt;&lt;head&gt; &lt;link rel="stylesheet" href="style.css"/&gt; &lt;title&gt;&amp;123;% block title %&amp;125;My amazing site&amp;123;% endblock %&amp;125;&lt;/title&gt;&lt;/head&gt;&lt;body&gt;&lt;div id="sidebar"&gt; &amp;123;% block sidebar %&amp;125; &lt;ul&gt; &lt;li&gt;&lt;a href="/"&gt;Home&lt;/a&gt;&lt;/li&gt; &lt;li&gt;&lt;a href="/blog/"&gt;Blog&lt;/a&gt;&lt;/li&gt; &lt;/ul&gt; &amp;123;% endblock %&amp;125;&lt;/div&gt;&lt;div id="content"&gt; &amp;123;% block content %&amp;125;&amp;123;% endblock %&amp;125;&lt;/div&gt;&lt;/body&gt;&lt;/html&gt; è¿™ä¸ªæ¨¡ç‰ˆï¼Œæˆ‘ä»¬æŠŠå®ƒå«ä½œ base.htmlï¼Œ å®ƒå®šä¹‰äº†ä¸€ä¸ªå¯ä»¥ç”¨äºŽä¸¤åˆ—æŽ’ç‰ˆé¡µé¢çš„ç®€å•HTMLéª¨æž¶ã€‚â€œå­æ¨¡ç‰ˆâ€çš„å·¥ä½œæ˜¯ç”¨å®ƒä»¬çš„å†…å®¹å¡«å……ç©ºçš„blocksã€‚ åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œ block æ ‡ç­¾å®šä¹‰äº†ä¸‰ä¸ªå¯ä»¥è¢«å­æ¨¡ç‰ˆå†…å®¹å¡«å……çš„blockã€‚ block å‘Šè¯‰æ¨¡ç‰ˆå¼•æ“Žï¼š å­æ¨¡ç‰ˆå¯èƒ½ä¼šè¦†ç›–æŽ‰æ¨¡ç‰ˆä¸­çš„è¿™äº›ä½ç½®ã€‚ å­æ¨¡ç‰ˆå¯èƒ½çœ‹èµ·æ¥æ˜¯è¿™æ ·çš„ï¼š 12345678910&amp;123;% extends "base.html" %&amp;125; &amp;123;% block title %&amp;125;My amazing blog&amp;123;% endblock %&amp;125; &amp;123;% block content %&amp;125;&amp;123;% for entry in blog_entries %&amp;125; &lt;h2&gt;&amp;123;&amp;123; entry.title &amp;125;&amp;125;&lt;/h2&gt; &lt;p&gt;&amp;123;&amp;123; entry.body &amp;125;&amp;125;&lt;/p&gt;&amp;123;% endfor %&amp;125;&amp;123;% endblock %&amp;125; extends æ ‡ç­¾æ˜¯è¿™é‡Œçš„å…³é”®ã€‚å®ƒå‘Šè¯‰æ¨¡ç‰ˆå¼•æ“Žï¼Œè¿™ä¸ªæ¨¡ç‰ˆâ€œç»§æ‰¿â€äº†å¦ä¸€ä¸ªæ¨¡ç‰ˆã€‚å½“æ¨¡ç‰ˆç³»ç»Ÿå¤„ç†è¿™ä¸ªæ¨¡ç‰ˆæ—¶ï¼Œé¦–å…ˆï¼Œå®ƒå°†å®šä½çˆ¶æ¨¡ç‰ˆâ€”â€”åœ¨æ­¤ä¾‹ä¸­ï¼Œå°±æ˜¯â€œbase.htmlâ€ã€‚ é‚£æ—¶ï¼Œæ¨¡ç‰ˆå¼•æ“Žå°†æ³¨æ„åˆ° base.html ä¸­çš„ä¸‰ä¸ª block æ ‡ç­¾ï¼Œå¹¶ç”¨å­æ¨¡ç‰ˆä¸­çš„å†…å®¹æ¥æ›¿æ¢è¿™äº›blockã€‚æ ¹æ® blog_entries çš„å€¼ï¼Œè¾“å‡ºå¯èƒ½çœ‹èµ·æ¥æ˜¯è¿™æ ·çš„ï¼š 123456789101112131415161718192021222324&lt;!DOCTYPE html&gt;&lt;html lang="en"&gt;&lt;head&gt; &lt;link rel="stylesheet" href="style.css" /&gt; &lt;title&gt;My amazing blog&lt;/title&gt;&lt;/head&gt; &lt;body&gt; &lt;div id="sidebar"&gt; &lt;ul&gt; &lt;li&gt;&lt;a href="/"&gt;Home&lt;/a&gt;&lt;/li&gt; &lt;li&gt;&lt;a href="/blog/"&gt;Blog&lt;/a&gt;&lt;/li&gt; &lt;/ul&gt; &lt;/div&gt; &lt;div id="content"&gt; &lt;h2&gt;Entry one&lt;/h2&gt; &lt;p&gt;This is my first entry.&lt;/p&gt; &lt;h2&gt;Entry two&lt;/h2&gt; &lt;p&gt;This is my second entry.&lt;/p&gt; &lt;/div&gt;&lt;/body&gt;&lt;/html&gt; è¯·æ³¨æ„ï¼Œå­æ¨¡ç‰ˆå¹¶æ²¡æœ‰å®šä¹‰ sidebar blockï¼Œæ‰€ä»¥ç³»ç»Ÿä½¿ç”¨äº†çˆ¶æ¨¡ç‰ˆä¸­çš„å€¼ã€‚çˆ¶æ¨¡ç‰ˆçš„ &amp;123;% block %&amp;125; æ ‡ç­¾ä¸­çš„å†…å®¹æ€»æ˜¯è¢«ç”¨ä½œå¤‡é€‰å†…å®¹ï¼ˆfallbackï¼‰ã€‚ è¿™ç§æ–¹å¼ä½¿ä»£ç å¾—åˆ°æœ€å¤§ç¨‹åº¦çš„å¤ç”¨ï¼Œå¹¶ä¸”ä½¿å¾—æ·»åŠ å†…å®¹åˆ°å…±äº«çš„å†…å®¹åŒºåŸŸæ›´åŠ ç®€å•ï¼Œä¾‹å¦‚ï¼Œéƒ¨åˆ†èŒƒå›´å†…çš„å¯¼èˆªã€‚ æ³¨æ„ï¼š å¦‚æžœåœ¨æ¨¡æ¿ä¸­ä½¿ç”¨&amp;123;% extends %&amp;125;æ ‡ç­¾ï¼Œå®ƒå¿…é¡»æ˜¯æ¨¡æ¿ä¸­çš„ç¬¬ä¸€ä¸ªæ ‡ç­¾ã€‚å…¶ä»–çš„ä»»ä½•æƒ…å†µä¸‹ï¼Œæ¨¡æ¿ç»§æ‰¿éƒ½å°†æ— æ³•å·¥ä½œã€‚ åœ¨baseæ¨¡æ¿ä¸­è®¾ç½®è¶Šå¤šçš„&amp;123;% block %&amp;125;æ ‡ç­¾è¶Šå¥½ã€‚è¯·è®°ä½ï¼Œå­æ¨¡æ¿ä¸å¿…å®šä¹‰å…¨éƒ¨çˆ¶æ¨¡æ¿ä¸­çš„blocksï¼Œæ‰€ä»¥ï¼Œä½ å¯ä»¥åœ¨å¤§å¤šæ•°blocksä¸­å¡«å……åˆç†çš„é»˜è®¤å†…å®¹ï¼Œç„¶åŽï¼Œåªå®šä¹‰ä½ éœ€è¦çš„é‚£ä¸€ä¸ªã€‚å¤šä¸€ç‚¹é’©å­æ€»æ¯”å°‘ä¸€ç‚¹å¥½ã€‚ å¦‚æžœä½ å‘çŽ°åœ¨å¤§é‡çš„æ¨¡æ¿ä¸­å¤åˆ¶å†…å®¹ï¼Œé‚£å¯èƒ½æ„å‘³ç€ä½ åº”è¯¥æŠŠå†…å®¹ç§»åˆ°çˆ¶æ¨¡æ¿ä¸­çš„ä¸€ä¸ª&amp;123;% block %&amp;125;ã€‚ å¦‚æžœéœ€è¦ä»Žçˆ¶æ¨¡æ¿ä¸­èŽ·å–å—çš„å†…å®¹ï¼Œ&amp;123;&amp;123; block.super &amp;125;&amp;125;å˜é‡å¯ä»¥å®Œæˆè¿™ä¸ªä»»åŠ¡ã€‚å¦‚æžœè¦æ·»åŠ çˆ¶å—çš„å†…å®¹è€Œä¸æ˜¯å®Œå…¨è¦†ç›–å®ƒï¼Œè¿™å°†éžå¸¸æœ‰ç”¨ã€‚ä½¿ç”¨&amp;123;&amp;123; block.super &amp;125;&amp;125;æ’å…¥æ•°æ®å°†ä¸ä¼šè‡ªåŠ¨è½¬ä¹‰ï¼Œå› ä¸ºå®ƒå·²ç»åœ¨çˆ¶æ¨¡æ¿ä¸­è¿›è¡Œäº†å¿…è¦çš„è½¬ä¹‰ã€‚ ä¸ºäº†æ›´å¥½åœ°å¯è¯»æ€§ï¼Œä½ ä¹Ÿå¯ä»¥ç»™ä½ çš„&amp;123;&amp; endblock %&amp;125;æ ‡ç­¾ä¸€ä¸ªåå­—ã€‚ä¾‹å¦‚ï¼š 12&amp;123;% block content %&amp;125;&amp;123;% endblock content %&amp;125; â€‹ åœ¨å¤§åž‹æ¨¡æ¿ä¸­ï¼Œè¿™ä¸ªæ–¹æ³•å¯ä»¥è®©ä½ æ¸…æ¥šåœ°çœ‹åˆ°å“ªä¸ªæ ‡ç­¾è¢«å…³é—­äº†ã€‚ ä¸èƒ½åœ¨ä¸€ä¸ªæ¨¡æ¿ä¸­å®šä¹‰å¤šä¸ªç›¸åŒåå­—çš„blockæ ‡ç­¾ã€‚ é™æ€æ–‡ä»¶settings.pyä¸­çš„é™æ€æ–‡ä»¶è®¾ç½®12345STATIC_URL = '/static/'STATICFILES_DIRS = [ os.path.join(BASE_DIR, 'static')] åœ¨æ¨¡æ¿ä¸­åŠ è½½é™æ€æ–‡ä»¶12&amp;123;% load static %&amp;125;&lt;img src="&amp;123;% static "images/hi.jpg" %&amp;125;" alt="Hi!" /&gt; å¼•ç”¨ js æ–‡ä»¶12&amp;123;% load static %&amp;125;&lt;script src="&amp;123;% static "mytest.js" %&amp;125;"&gt;&lt;/script&gt; å¤šä¸ªæ–‡ä»¶ä½¿ç”¨å¤šæ¬¡å–åˆ«å123&amp;123;% load static %&amp;125;&amp;123;% static "images/hi.jpg" as myphoto %&amp;125;&lt;img src="&amp;123;&amp;123; myphoto &amp;125;&amp;125;"&gt;&lt;/img&gt; ä½¿ç”¨ get_static_prefix12&amp;123;% load static %&amp;125;&lt;img src="&amp;123;% get_static_prefix %&amp;125;images/hi.jpg" alt="Hi!" /&gt; æˆ– 12345&amp;123;% load static %&amp;125;&amp;123;% get_static_prefix as STATIC_PREFIX %&amp;125;&lt;img src="&amp;123;&amp;123; STATIC_PREFIX &amp;125;&amp;125;images/hi.jpg" alt="Hi!" /&gt;&lt;img src="&amp;123;&amp;123; STATIC_PREFIX &amp;125;&amp;125;images/hi2.jpg" alt="Hello!" /&gt; ä½¿ç”¨ inclusion_tagè¿”å›ž html ä»£ç ç‰‡æ®µmy_inclusion.py1234567891011121314151617181920212223from django.template import Libraryregister = Library()# @register.inclusion_tag('inclusion.html')# def myinclusion():# pass@register.inclusion_tag('book_inclusion.html')def book_inclusion(bookinfo): print('...', bookinfo) # print(bookinfo[0]) # for info in bookinfo: # # a = infos.values() # print(a.length) li = [] for foo in bookinfo: li.append(foo) return &amp;123;'bookinfo': li&amp;125; book_inclusion.html1234567891011121314151617181920212223242526272829&lt;table border="1" class="table"&gt; &lt;thead&gt; &lt;tr&gt; &lt;th&gt;id&lt;/th&gt; &lt;th&gt;name&lt;/th&gt; &lt;th&gt;price&lt;/th&gt; &lt;th&gt;pub_date&lt;/th&gt; &lt;th&gt;author&lt;/th&gt; &lt;th&gt;pub&lt;/th&gt; &lt;th&gt;edit&lt;/th&gt; &lt;th&gt;delete&lt;/th&gt; &lt;/tr&gt; &lt;/thead&gt; &lt;tbody&gt; &amp;123;% for foo in bookinfo %&amp;125; &lt;tr&gt; &lt;td&gt;&amp;123;&amp;123; foo.id &amp;125;&amp;125;&lt;/td&gt; &lt;td&gt;&amp;123;&amp;123; foo.name &amp;125;&amp;125;&lt;/td&gt; &lt;td&gt;&amp;123;&amp;123; foo.price &amp;125;&amp;125;&lt;/td&gt; &lt;td&gt;&amp;123;&amp;123; foo.pub_date &amp;125;&amp;125;&lt;/td&gt; &lt;td&gt;&amp;123;&amp;123; foo.author &amp;125;&amp;125;&lt;/td&gt; &lt;td&gt;&amp;123;&amp;123; foo.pub &amp;125;&amp;125;&lt;/td&gt; &lt;td&gt;&lt;a href="/book/edit/?id=&amp;123;&amp;123; foo.id &amp;125;&amp;125;"&gt;edit&lt;/a&gt;&lt;/td&gt; &lt;td&gt;&lt;a href="/book/delete/?id=&amp;123;&amp;123; foo.id &amp;125;&amp;125;"&gt;delete&lt;/a&gt;&lt;/td&gt; &lt;/tr&gt; &amp;123;% endfor %&amp;125; &lt;/tbody&gt;&lt;/table&gt; book.html12345678910&amp;123;% extends 'base.html' %&amp;125;&amp;123;% block content %&amp;125; &amp;123;% load inclusions %&amp;125; &amp;123;% book_inclusion bookinfo %&amp;125;&amp;123;% endblock %&amp;125;&amp;123;% block right %&amp;125; &lt;a href="/book/addto/"&gt;&lt;button type="button" class="btn btn-info"&gt;æ–°å¢ž&lt;/button&gt;&lt;/a&gt;&amp;123;% endblock %&amp;125;]]></content>
      <categories>
        <category>Django</category>
      </categories>
  </entry>
  <entry>
    <title><![CDATA[git ä¸Ž github çš„ä½¿ç”¨]]></title>
    <url>%2F2019%2F01%2F12%2Fgit-%E4%B8%8E-github-%E7%9A%84%E4%BD%BF%E7%94%A8%2F</url>
    <content type="text"><![CDATA[1234567891011git init # åˆå§‹åŒ–ä¸€ä¸ªæœ¬åœ° github ä»“åº“git add # å°†æœ¬åœ°æ–‡é”®æ·»åŠ åˆ°æš‚å­˜åŒºgit diff # æŸ¥çœ‹ä¸¤ä¸ªæ–‡ä»¶çš„å…·ä½“ä¿®æ”¹å†…å®¹git status # æŸ¥çœ‹æš‚å­˜åŒºçŠ¶æ€ã€æ–‡ä»¶çŠ¶æ€git commit # å°†æ–‡ä»¶æäº¤åˆ°æœ¬åœ°ä»“åº“git push # å°†æ–‡ä»¶æŽ¨é€åˆ°è¿œç¨‹ä»“åº“git pull request # æ‹‰å–ä¸€ä¸ªåˆ†æ”¯åˆ°æœ¬åœ°ä»“åº“git clone # å…‹éš†ä¸€ä¸ªè¿œç¨‹ä»“åº“åˆ°æœ¬åœ°git merge # åˆå¹¶åˆ†æ”¯git log # æŸ¥çœ‹åŽ†å²è®°å½•(æ—¥å¿—ç³»ç»Ÿ) git initï¼šå°†æ–‡ä»¶å¤¹å˜æˆ git å¯ä»¥ç®¡ç†çš„ä»“åº“ vim README.mdï¼šç¼–è¾‘ä¸€ä¸ªæ–‡ä»¶ git add README.mdï¼šå°†æ–‡ä»¶æ·»åŠ åˆ°æš‚å­˜åŒº git commit -m &#39;ç¬¬ä¸€æ¬¡æäº¤&#39;ï¼šå°†æ–‡ä»¶æäº¤åˆ°æœ¬åœ°ä»“åº“ git statusï¼šæŸ¥çœ‹æš‚å­˜åŒºçŠ¶æ€ï¼› ssh-keygen -t rsa -C &#39;youremail@example.com&#39;ï¼šåˆ›å»º ssh ç§˜é’¥ å°†å…¬é’¥æ·»åŠ åˆ° github ä¸Š åœ¨ github ä¸Šåˆ›å»ºä¸€ä¸ªä»“åº“ git remote add origin https://github.com.exampleï¼šæ·»åŠ è¿œç¨‹ä»“åº“ git push -u origin masterï¼šæŽ¨é€åˆ°è¿œç¨‹ä»“åº“ git config --global user.name &#39;yourusername&#39;ï¼šé…ç½®ç”¨æˆ·å git config --global user.email &#39;youremail&#39;ï¼šé…ç½®é‚®ç®± ssh-keygen -t rsa -C &#39;youremail&#39;ï¼šåˆ›å»º ssh ç§˜é’¥ åœ¨ github ä¸Šåˆ›å»ºä¸€ä¸ªä»“åº“ git remote add origin è¿œç¨‹ä»“åº“åœ°å€ï¼šå…³è”è¿œç¨‹ä»“åº“ git push -u origin masterï¼šæŽ¨é€åˆ°è¿œç¨‹ä»“åº“]]></content>
  </entry>
  <entry>
    <title><![CDATA[Djangoï¼ˆå…«ï¼‰]]></title>
    <url>%2F2019%2F01%2F10%2FDjango%EF%BC%88%E5%85%AB%EF%BC%89%2F</url>
    <content type="text"><![CDATA[Django ç³»åˆ—åšå®¢ï¼ˆå…«ï¼‰å‰è¨€æœ¬ç¯‡åšå®¢ä»‹ç» Django ä¸­çš„æ¨¡æ¿å±‚ï¼Œæ¨¡æ¿éƒ½æ˜¯Django ä½¿ç”¨ç›¸å…³å‡½æ•°æ¸²æŸ“åŽä¼ è¾“ç»™å‰ç«¯åœ¨æ˜¾å¼çš„ï¼Œä¸ºäº†æƒ³è¦æ¸²æŸ“å‡ºæˆ‘ä»¬æƒ³è¦çš„æ•°æ®ï¼Œéœ€è¦å­¦ä¹ æ¨¡æ¿è¯­æ³•ï¼Œç›¸å…³è¿‡æ»¤å™¨ã€æ ‡ç­¾ã€‚ æ¨¡æ¿ç®€ä»‹ä½ å¯èƒ½æ³¨æ„åˆ°ä¸‹é¢çš„ä¾‹å­è¿”å›žæ–‡æœ¬çš„æ–¹å¼æœ‰ç‚¹ç‰¹åˆ«ã€‚å½“æˆ‘ä»¬ä½¿ç”¨ç›¸å…³å‡½æ•°æ¥æ¸²æŸ“æ¨¡æ¿çš„æ—¶å€™ï¼Œé¦–å…ˆæ˜¯æ‰“å¼€äº†æ¨¡æ¿æ–‡ä»¶ï¼Œç„¶åŽå°†éœ€è¦ä¼ å…¥çš„å‚æ•°å¡«åˆ°æ–‡ä»¶ä¸­åœ¨è¿”å›žç»™å‰ç«¯ã€‚ 1234def current_datetime(request): now = datetime.datetime.now() html = '&lt;html&gt;&lt;body&gt;It is now %s.&lt;/body&gt;&lt;/html&gt;' % now return HttpResponse(html) å°½ç®¡è¿™å¾ˆèƒ½ç›´è§‚çš„è§£é‡Šè§†å›¾å±‚çš„å·¥ä½œæ–¹å¼ï¼Œä½†ç›´æŽ¥å°† HTML ç¡¬ç¼–ç åˆ°ä½ çš„è§†å›¾é‡Œå´ä¸æ˜¯ä¸ªå¥½ä¸»æ„ã€‚ å¯¹é¡µé¢è®¾è®¡è¿›è¡Œçš„ä»»ä½•æ”¹å˜éƒ½å¿…é¡»å¯¹pythonä»£ç è¿›è¡Œç›¸åº”çš„æ›´æ”¹ã€‚ç«™ç‚¹è®¾è®¡çš„ä¿®æ”¹å¾€å¾€æ¯”åº•å±‚pythonä»£ç çš„ä¿®æ”¹è¦é¢‘ç¹çš„å¤šï¼Œå› æ­¤å¦‚ä½•å¯ä»¥åœ¨ä¸è¿›è¡Œpythonä»£ç ä¿®æ”¹çš„æƒ…å†µä¸‹å˜æ›´è®¾è®¡ï¼Œé‚£å°†ä¼šæ–¹ä¾¿çš„å¤šã€‚ pythonä»£ç ç¼–å†™å’Œhtmlè®¾è®¡æ˜¯ä¸¤é¡¹ä¸åŒçš„å·¥ä½œï¼Œå¤§å¤šæ•°ä¸“ä¸šçš„ç½‘ç«™å¼€å‘çŽ¯å¢ƒéƒ½ä¼šåˆ†é…ä¸åŒçš„éƒ¨åˆ†æˆ–è€…å¼€å‘äººå‘˜æ¥å®Œæˆã€‚è®¾è®¡è€…å’Œhtml/cssçš„ç¼–ç äººå‘˜ä¸åº”è¯¥è¢«è¦æ±‚åŽ»ç¼–è¾‘pythonçš„ä»£ç æ¥å®Œæˆä»–ä»¬çš„å·¥ä½œã€‚ ç¨‹åºå‘˜ç¼–å†™pythonä»£ç å’Œè®¾è®¡äººå‘˜åˆ¶ä½œæ¨¡æ¿ä¸¤é¡¹å·¥ä½œåŒæ—¶è¿›è¡Œçš„æ•ˆçŽ‡æ˜¯æœ€é«˜çš„ï¼Œè¿œèƒœäºŽè®©ä¸€ä¸ªäººç­‰å¾…å¦ä¸€ä¸ªäººå®Œæˆå¯¹æŸä¸ªæ—¢åŒ…å«pythonåˆåŒ…å«htmlçš„æ–‡ä»¶çš„ç¼–è¾‘å·¥ä½œã€‚ åŸºäºŽä¸Šè¿°è¿™äº›åŽŸå› ï¼Œå°†é¡µé¢çš„è®¾è®¡å’Œ Python çš„ä»£ç åˆ†ç¦»å¼€æ¥ä¼šæ›´å¹²å‡€ç®€æ´æ›´æ˜“ç»´æŠ¤ã€‚å¯ä»¥ä½¿ç”¨ Django çš„æ¨¡æ¿ç³»ç»Ÿï¼ˆTemplates Systemï¼‰æ¥å®žçŽ°è¿™ç§æ¨¡å¼ã€‚ 1234567891011121314151617def current_time(req): import datetime now = datetime.datetime.now() html = '&lt;html&gt;&lt;body&gt;It is now %s.&lt;/body&gt;&lt;/html&gt;' % now # djangoæ¨¡æ¿ä¿®æ”¹çš„è§†å›¾å‡½æ•° from django.template import Template, Context now = datetime.datetime.now() t = '&lt;html&gt;&lt;body&gt;It is now %s.&lt;/body&gt;&lt;/html&gt;' % now c = Context(&amp;#123;'current_date': str(now)&amp;#125;) html = t.render(c) return HttpResponse(html) # å¦ä¸€ç§å†™æ³• import datetime now = datetime.datetime.now() return render(req, 'current_datetime.html', &amp;#123;'current_date': str(now)[:19]&amp;#125;) æ¨¡æ¿è¯­æ³•ç»ˆç‚¹ï¼š å˜é‡ï¼š&#123;&#123; å˜é‡å &#125;&#125; æ·±åº¦æŸ¥è¯¢ï¼Œç”¨ç‚¹è¯­æ³• è¿‡æ»¤å™¨ æ ‡ç­¾ï¼š&#123;&#123; % % &#125;&#125; æ¨¡æ¿è¯­æ³•å˜é‡åœ¨ Django æ¨¡æ¿ä¸­éåŽ†å¤æ‚æ•°æ®ç»“æž„çš„å…³é”®æ˜¯ç‚¹è¯­æ³• views.py1234567891011121314151617181920212223242526272829303132333435363738394041424344454647def template_test(request): name = 'lqz' li = ['lqz', 1, '18'] dic = &amp;#123;'name': 'lqz', 'age': 18&amp;#125; ll2 = [ &amp;#123;'name': 'lqz', 'age': 18&amp;#125;, &amp;#123;'name': 'lqz2', 'age': 19&amp;#125;, &amp;#123;'name': 'egon', 'age': 20&amp;#125;, &amp;#123;'name': 'kevin', 'age': 23&amp;#125; ] ll3=[] class Person: def __init__(self, name): self.name = name def test(self): print('testå‡½æ•°') return 11 @classmethod def test_classmethod(cls): print('ç±»æ–¹æ³•') return 'ç±»æ–¹æ³•' @staticmethod def static_method(): print('é™æ€æ–¹æ³•') return 'é™æ€æ–¹æ³•' lqz = Person('lqz') egon = Person('egon') person_list = [lqz, egon] bo = True te = test() import datetime now=datetime.datetime.now() link1='&lt;a href="https://www.baidu.com"&gt;ç‚¹æˆ‘&lt;a&gt;' from django.utils import safestring link=safestring.mark_safe(link1) # htmlç‰¹æ®Šç¬¦å·å¯¹ç…§è¡¨ï¼ˆhttp://tool.chinaz.com/Tools/htmlchar.aspxï¼‰ # è¿™æ ·ä¼ åˆ°å‰å°ä¸ä¼šå˜æˆç‰¹æ®Šå­—ç¬¦ï¼Œå› ä¸ºdjangoç»™å¤„ç†äº† dot='&amp;spades;' # return render(request, 'template_index.html', &amp;#123;'name':name,'person_list':person_list&amp;#125;) return render(request, 'template_index.html', locals()) htmlæ–‡ä»¶123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130&lt;p&gt;&amp;#123;&amp;#123; name &amp;#125;&amp;#125;&lt;/p&gt; &lt;p&gt;&amp;#123;&amp;#123; li &amp;#125;&amp;#125;&lt;/p&gt; &lt;p&gt;&amp;#123;&amp;#123; dic &amp;#125;&amp;#125;&lt;/p&gt; &lt;p&gt;&amp;#123;&amp;#123; lqz &amp;#125;&amp;#125;&lt;/p&gt; &lt;p&gt;&amp;#123;&amp;#123; person_list &amp;#125;&amp;#125;&lt;/p&gt; &lt;p&gt;&amp;#123;&amp;#123; bo &amp;#125;&amp;#125;&lt;/p&gt; &lt;p&gt;&amp;#123;&amp;#123; te &amp;#125;&amp;#125;&lt;/p&gt; &lt;hr&gt; &lt;h3&gt;æ·±åº¦æŸ¥è¯¢å¥ç‚¹ç¬¦&lt;/h3&gt; &lt;p&gt;&amp;#123;&amp;#123; li.1 &amp;#125;&amp;#125;&lt;/p&gt; &lt;p&gt;&amp;#123;&amp;#123; dic.name &amp;#125;&amp;#125;&lt;/p&gt; &lt;p&gt;&amp;#123;&amp;#123; lqz.test &amp;#125;&amp;#125;&lt;/p&gt; &lt;p&gt;&amp;#123;&amp;#123; lqz.name &amp;#125;&amp;#125;&lt;/p&gt; &lt;p&gt;&amp;#123;&amp;#123; person_list.0 &amp;#125;&amp;#125;&lt;/p&gt; &lt;p&gt;&amp;#123;&amp;#123; person_list.1.name &amp;#125;&amp;#125;&lt;/p&gt; &lt;hr&gt; &lt;h3&gt;è¿‡æ»¤å™¨&lt;/h3&gt; &amp;#123;#æ³¨æ„ï¼šå†’å·åŽé¢ä¸èƒ½åŠ ç©ºæ ¼#&amp;#125; &lt;p&gt;&amp;#123;&amp;#123; now | date:"Y-m-d H:i:s" &amp;#125;&amp;#125;&lt;/p&gt; &amp;#123;#å¦‚æžœå˜é‡ä¸ºç©ºï¼Œè®¾ç½®é»˜è®¤å€¼,ç©ºæ•°æ®ï¼ŒNoneï¼Œå˜é‡ä¸å­˜åœ¨ï¼Œéƒ½é€‚ç”¨#&amp;#125; &lt;p&gt;&amp;#123;&amp;#123; name |default:'æ•°æ®ä¸ºç©º' &amp;#125;&amp;#125;&lt;/p&gt; &amp;#123;#è®¡ç®—é•¿åº¦ï¼Œåªæœ‰ä¸€ä¸ªå‚æ•°#&amp;#125; &lt;p&gt;&amp;#123;&amp;#123; person_list |length &amp;#125;&amp;#125;&lt;/p&gt; &amp;#123;#è®¡ç®—æ–‡ä»¶å¤§å°#&amp;#125; &lt;p&gt;&amp;#123;&amp;#123; 1024 |filesizeformat &amp;#125;&amp;#125;&lt;/p&gt; &amp;#123;#å­—ç¬¦ä¸²åˆ‡ç‰‡ï¼Œå‰é—­åŽå¼€ï¼Œå‰é¢å–åˆ°ï¼ŒåŽé¢å–ä¸åˆ°#&amp;#125; &lt;p&gt;&amp;#123;&amp;#123; 'hello world lqz' |slice:"2:-1" &amp;#125;&amp;#125;&lt;/p&gt; &lt;p&gt;&amp;#123;&amp;#123; 'hello world lqz' |slice:"2:5" &amp;#125;&amp;#125;&lt;/p&gt; &amp;#123;#æˆªæ–­å­—ç¬¦ï¼Œè‡³å°‘ä¸‰ä¸ªèµ·æ­¥ï¼Œå› ä¸ºä¼šæœ‰ä¸‰ä¸ªçœç•¥å·ï¼ˆä¼ è´Ÿæ•°ï¼Œ1ï¼Œ2ï¼Œ3éƒ½æ˜¯ä¸‰ä¸ªçœç•¥å·ï¼‰#&amp;#125; &lt;p&gt;&amp;#123;&amp;#123; 'åˆ˜æ¸…æ”¿ world lqz' |truncatechars:"4" &amp;#125;&amp;#125;&lt;/p&gt; &amp;#123;#æˆªæ–­æ–‡å­—ï¼Œä»¥ç©ºæ ¼åšåŒºåˆ†ï¼Œè¿™ä¸ªä¸ç®—çœç•¥å·#&amp;#125; &lt;p&gt;&amp;#123;&amp;#123; 'åˆ˜æ¸…æ”¿ æ˜¯ å¤§å¸…æ¯” è°¢è°¢' |truncatewords:"1" &amp;#125;&amp;#125;&lt;/p&gt; &lt;p&gt;&amp;#123;&amp;#123; link1 &amp;#125;&amp;#125;&lt;/p&gt; &lt;p&gt;&amp;#123;&amp;#123; link1|safe &amp;#125;&amp;#125;&lt;/p&gt; &lt;p&gt;&amp;#123;&amp;#123; link &amp;#125;&amp;#125;&lt;/p&gt; &lt;p&gt;&amp;spades;&lt;/p&gt; &lt;p&gt;&amp;#123;&amp;#123; dot &amp;#125;&amp;#125;&lt;/p&gt; &amp;#123;#add å¯ä»¥åŠ è´Ÿæ•°ï¼Œä¼ æ•°å­—å­—ç¬¦ä¸²éƒ½å¯ä»¥#&amp;#125; &lt;p&gt;&amp;#123;&amp;#123; "10"|add:"-2" &amp;#125;&amp;#125;&lt;/p&gt; &lt;p&gt;&amp;#123;&amp;#123; li.1|add:"-2" &amp;#125;&amp;#125;&lt;/p&gt; &lt;p&gt;&amp;#123;&amp;#123; li.1|add:2 &amp;#125;&amp;#125;&lt;/p&gt; &lt;p&gt;&amp;#123;&amp;#123; li.1|add:"2" &amp;#125;&amp;#125;&lt;/p&gt; &lt;p&gt;&amp;#123;&amp;#123; li.1|add:"-2e" &amp;#125;&amp;#125;&lt;/p&gt; &amp;#123;#upper#&amp;#125; &lt;p&gt;&amp;#123;&amp;#123; name|upper &amp;#125;&amp;#125;&lt;/p&gt; &lt;p&gt;&amp;#123;&amp;#123; 'LQZ'|lower &amp;#125;&amp;#125;&lt;/p&gt; &lt;hr&gt; &lt;h3&gt;æ¨¡ç‰ˆè¯­æ³•ä¹‹æ ‡ç­¾&lt;/h3&gt; &amp;#123;#for å¾ªçŽ¯ å¾ªçŽ¯åˆ—è¡¨ï¼Œå¾ªçŽ¯å­—å…¸ï¼Œå¾ªçŽ¯åˆ—è¡¨å¯¹è±¡#&amp;#125; &lt;ui&gt; &amp;#123;% for foo in dic %&amp;#125; &amp;#123;&amp;#123; foo &amp;#125;&amp;#125; &amp;#123;% endfor %&amp;#125; &amp;#123;#ä¹Ÿå¯ä»¥æ··ç”¨htmlæ ‡ç­¾#&amp;#125; &amp;#123;% for foo in li %&amp;#125; &lt;ul&gt;foo&lt;/ul&gt; &amp;#123;% endfor %&amp;#125; &lt;/ui&gt; &amp;#123;#è¡¨æ ¼#&amp;#125; &lt;table border="1"&gt; &amp;#123;% for foo in ll2 %&amp;#125; &lt;tr&gt; &lt;td&gt;&amp;#123;&amp;#123; foo.name &amp;#125;&amp;#125;&lt;/td&gt; &lt;td&gt;&amp;#123;&amp;#123; foo.age &amp;#125;&amp;#125;&lt;/td&gt; &lt;/tr&gt; &amp;#123;% endfor %&amp;#125; &lt;/table&gt; &lt;table border="1"&gt; &amp;#123;#'parentloop': &amp;#123;&amp;#125;, 'counter0': 0, 'counter': 1, 'revcounter': 4, 'revcounter0': 3, 'first': True, 'last': False&amp;#125;#&amp;#125; &amp;#123;% for foo in ll2 %&amp;#125; &lt;tr&gt; &lt;td&gt;&amp;#123;&amp;#123; forloop.counter &amp;#125;&amp;#125;&lt;/td&gt; &lt;td&gt;&amp;#123;&amp;#123; foo.name &amp;#125;&amp;#125;&lt;/td&gt; &lt;td&gt;&amp;#123;&amp;#123; foo.age &amp;#125;&amp;#125;&lt;/td&gt; &lt;/tr&gt; &amp;#123;% endfor %&amp;#125; &lt;/table&gt; &amp;#123;% for foo in ll5 %&amp;#125; &lt;p&gt;foo.name&lt;/p&gt; &amp;#123;% empty %&amp;#125; &lt;p&gt;ç©ºçš„&lt;/p&gt; &amp;#123;% endfor %&amp;#125; &lt;hr&gt; &lt;h3&gt;ifåˆ¤æ–­&lt;/h3&gt; &amp;#123;% if name %&amp;#125; &lt;a href=""&gt;hi &amp;#123;&amp;#123; name &amp;#125;&amp;#125;&lt;/a&gt; &lt;a href=""&gt;æ³¨é”€&lt;/a&gt; &amp;#123;% else %&amp;#125; &lt;a href=""&gt;è¯·ç™»å½•&lt;/a&gt; &lt;a href=""&gt;æ³¨å†Œ&lt;/a&gt; &amp;#123;% endif %&amp;#125; &amp;#123;#è¿˜æœ‰elif#&amp;#125; &lt;hr&gt; &lt;h3&gt;with&lt;/h3&gt; &amp;#123;% with ll2.0.name as n %&amp;#125; &amp;#123;&amp;#123; n &amp;#125;&amp;#125; &amp;#123;% endwith %&amp;#125; &amp;#123;&amp;#123; n &amp;#125;&amp;#125; &amp;#123;% load my_tag_filter %&amp;#125; &amp;#123;&amp;#123; 3|multi_filter:3 &amp;#125;&amp;#125; &amp;#123;#ä¼ å‚å¿…é¡»ç”¨ç©ºæ ¼åŒºåˆ†#&amp;#125; &amp;#123;% multi_tag 3 9 10 %&amp;#125; &amp;#123;#å¯ä»¥è·Ÿifè¿žç”¨#&amp;#125; &amp;#123;% if 3|multi_filter:3 &gt; 9 %&amp;#125; &lt;p&gt;å¤§äºŽ&lt;/p&gt; &amp;#123;% else %&amp;#125; &lt;p&gt;å°äºŽ&lt;/p&gt; &amp;#123;% endif %&amp;#125; æ³¨æ„ï¼šç‚¹è¯­æ³•ä¹Ÿå¯ä»¥ç”¨æ¥å¼•ç”¨å¯¹è±¡çš„æ–¹æ³•ï¼ˆæ— å‚æ•°æ–¹æ³•ï¼‰ 1&lt;h4&gt;å­—å…¸:&amp;#123;&amp;#123; dic.name.upper &amp;#125;&amp;#125;&lt;/h4&gt; æ¨¡æ¿ä¹‹è¿‡æ»¤å™¨è¯­æ³•ï¼š 1&amp;#123;&amp;#123;obj|filter__name:param&amp;#125;&amp;#125; å˜é‡åå­—|è¿‡æ»¤å™¨åç§°ï¼šå˜é‡ defaultå¦‚æžœä¸€ä¸ªå˜é‡æ˜¯ false æˆ–è€…ä¸ºç©ºï¼Œä½¿ç”¨ç»™å®šçš„é»˜è®¤å€¼ã€‚å¦åˆ™ä½¿ç”¨å˜é‡çš„å€¼ã€‚ 1&amp;#123;&amp;#123; value|default:&quot;nothing&quot; &amp;#125;&amp;#125; lengthè¿”å›žå€¼å¾—é•¿åº¦ã€‚å®ƒå¯¹å­—ç¬¦ä¸²å’Œåˆ—è¡¨éƒ½æœ‰æ•ˆã€‚ 1&amp;#123;&amp;#123; value|length &amp;#125;&amp;#125; å¦‚æžœvalueæ˜¯[&#39;a&#39;, &#39;b&#39;, &#39;c&#39;, &#39;d&#39;]ï¼Œé‚£ä¹ˆè¾“å‡ºæ˜¯4ã€‚ filesizeformatå°†å€¼æ ¼å¼åŒ–ä¸ºä¸€ä¸ªâ€˜â€™äººç±»å¯è¯»çš„æ–‡ä»¶å°ºå¯¸â€˜â€™ï¼ˆâ€™13KBâ€™, â€˜4.1MBâ€™ç­‰ï¼‰ã€‚ 1&amp;#123;&amp;#123; value|filesizeformat &amp;#125;&amp;#125; å¦‚æžœ value æ˜¯ 123456789ï¼Œè¾“å‡ºå°†ä¼šæ˜¯ 117.7 MBã€‚ dateè¾“å‡ºæ ¼å¼åŒ–æ—¶é—´ 1&amp;#123;&amp;#123; value|date:&quot;Y-m-d&quot; &amp;#125;&amp;#125; å¦‚æžœvalue=datetime.datetime.now()ï¼Œé‚£ä¹ˆç»“æžœä¼šæ˜¯2019-01-10ã€‚ sliceè¯¥æ–¹æ³•åªèƒ½ä¼ å…¥ä¸€ä¸ªå‚æ•°ï¼Œé€šå¸¸ä½¿ç”¨å¼•å·åŒ…è£¹ã€‚ 1&amp;#123;&amp;#123; file_size|filesizeformat &amp;#125;&amp;#125; å¦‚æžœåŽå°çš„ file_sizeä¸º1024ï¼Œé‚£ä¹ˆç»“æžœä¼šæ˜¯1KBã€‚ truncatecharså¦‚æžœå­—ç¬¦ä¸²å­—ç¬¦å¤šäºŽæŒ‡å®šçš„å­—ç¬¦æ•°é‡ï¼Œé‚£ä¹ˆä¼šè¢«é˜¶æ®µã€‚æˆªæ–­çš„å­—ç¬¦ä¸²å°†ä»¥å¯ç¿»è¯‘çš„çœç•¥å·åºåˆ—(&#39;...&#39;)ç»“æŸã€‚ å‚æ•°ï¼šè¦æˆªæ–­çš„å­—ç¬¦æ•° 1&amp;#123;&amp;#123; value|truncatechars:9 &amp;#125;&amp;#125; safeDjangoçš„æ¨¡æ¿ä¸­ä¼šå¯¹HTMLæ ‡ç­¾å’ŒJSç­‰è¯­æ³•æ ‡ç­¾è¿›è¡Œè‡ªåŠ¨è½¬ä¹‰ï¼ŒåŽŸå› æ˜¾è€Œæ˜“è§ï¼Œè¿™æ ·æ˜¯ä¸ºäº†å®‰å…¨ã€‚ä½†æ˜¯æœ‰çš„æ—¶å€™æˆ‘ä»¬å¯èƒ½ä¸å¸Œæœ›è¿™äº›HTMLå…ƒç´ è¢«è½¬ä¹‰ï¼Œæ¯”å¦‚æˆ‘ä»¬åšä¸€ä¸ªå†…å®¹ç®¡ç†ç³»ç»Ÿï¼ŒåŽå°æ·»åŠ çš„æ–‡ç« ä¸­æ˜¯ç»è¿‡ä¿®é¥°çš„ï¼Œè¿™äº›ä¿®é¥°å¯èƒ½æ˜¯é€šè¿‡ä¸€ä¸ªç±»ä¼¼äºŽFCKeditorç¼–è¾‘åŠ æ³¨äº†HTMLä¿®é¥°ç¬¦çš„æ–‡æœ¬ï¼Œå¦‚æžœè‡ªåŠ¨è½¬ä¹‰çš„è¯æ˜¾ç¤ºçš„å°±æ˜¯ä¿æŠ¤HTMLæ ‡ç­¾çš„æºæ–‡ä»¶ã€‚ä¸ºäº†åœ¨Djangoä¸­å…³é—­HTMLçš„è‡ªåŠ¨è½¬ä¹‰æœ‰ä¸¤ç§æ–¹å¼ï¼Œå¦‚æžœæ˜¯ä¸€ä¸ªå•ç‹¬çš„å˜é‡æˆ‘ä»¬å¯ä»¥é€šè¿‡è¿‡æ»¤å™¨â€œ|safeâ€çš„æ–¹å¼å‘Šè¯‰Djangoè¿™æ®µä»£ç æ˜¯å®‰å…¨çš„ä¸å¿…è½¬ä¹‰ã€‚æ¯”å¦‚ï¼š 1value=&quot;&lt;a href=&quot;&quot;&gt;ç‚¹å‡»&lt;/a&gt;&quot; # ä¸å¸Œæœ›è½¬ä¹‰çš„é“¾æŽ¥ 1&amp;#123;&amp;#123; value|safe&amp;#125;&amp;#125; # æ·»åŠ  safe è¿‡æ»¤å™¨å°±å¯ä»¥ä¸è½¬ä¹‰äº† å…¶ä»–è¿‡æ»¤å™¨ è¿‡æ»¤å™¨ æè¿° ç¤ºä¾‹ upper ä»¥å¤§å†™æ–¹å¼è¾“å‡º user.name add ç»™valueåŠ ä¸Šä¸€ä¸ªæ•°å€¼ user.age addslashes å•å¼•å·åŠ ä¸Šè½¬ä¹‰å· capfirst ç¬¬ä¸€ä¸ªå­—æ¯å¤§å†™ â€˜goodâ€™\ capfirst,è¿”å›ž good center è¾“å‡ºæŒ‡å®šé•¿åº¦çš„å­—ç¬¦ä¸²ï¼ŒæŠŠå˜é‡å±…ä¸­ â€˜abcdâ€™\ center:â€™50â€™ cut åˆ é™¤æŒ‡å®šå­—ç¬¦ä¸² â€˜You are not a Englishâ€™\ cut:â€™notâ€™ date æ ¼å¼åŒ–æ—¥æœŸ default å¦‚æžœå€¼ä¸å­˜åœ¨ï¼Œåˆ™ä½¿ç”¨é»˜è®¤å€¼ä»£æ›¿ valut\ default:â€™(N/A)â€™ default_if_none å¦‚æžœå€¼ä¸ºNone, åˆ™ä½¿ç”¨é»˜è®¤å€¼ä»£æ›¿ dicsort æŒ‰æŸå­—æ®µæŽ’åºï¼Œå˜é‡å¿…é¡»æ˜¯ä¸€ä¸ªdictionary for moment in moments \ dictsort:â€™idâ€™(ç™¾åˆ†å·åŠ å¤§æ‹¬å·) dictsortreversed æŒ‰æŸå­—æ®µå€’åºæŽ’åºï¼Œå˜é‡å¿…é¡»æ˜¯dictionary divisibleby åˆ¤æ–­æ˜¯å¦å¯ä»¥è¢«æ•°å­—æ•´é™¤ 224 \ divisibleby:2 è¿”å›žTrue escape æŒ‰HTMLè½¬ä¹‰ï¼Œæ¯”å¦‚å°†â€&lt;â€è½¬æ¢ä¸ºâ€&amp;ltâ€ filesizeformat å¢žåŠ æ•°å­—çš„å¯è¯»æ€§ï¼Œè½¬æ¢ç»“æžœä¸º13KB,89MB,3Bytesç­‰ 1024 \ filesizeformat è¿”å›ž1.0KB first è¿”å›žåˆ—è¡¨çš„ç¬¬1ä¸ªå…ƒç´ ï¼Œå˜é‡å¿…é¡»æ˜¯ä¸€ä¸ªåˆ—è¡¨ floatformat è½¬æ¢ä¸ºæŒ‡å®šç²¾åº¦çš„å°æ•°ï¼Œé»˜è®¤ä¿ç•™1ä½å°æ•° 3.1415926\ floatformat:3 è¿”å›ž3.142å››èˆäº”å…¥ get_digit ä»Žä¸ªä½æ•°å¼€å§‹æˆªå–æŒ‡å®šä½ç½®çš„æ•°å­— 12345\ get_digit:â€™1â€™ join ç”¨æŒ‡å®šåˆ†éš”ç¬¦è¿žæŽ¥åˆ—è¡¨ [â€˜abcâ€™,â€™45â€™]\ join:â€™ è¿”å›ž abc45â€™ length è¿”å›žåˆ—è¡¨ä¸­å…ƒç´ çš„ä¸ªæ•°æˆ–å­—ç¬¦ä¸²é•¿åº¦ length_is æ£€æŸ¥åˆ—è¡¨ï¼Œå­—ç¬¦ä¸²é•¿åº¦æ˜¯å¦ç¬¦åˆæŒ‡å®šçš„å€¼ hello\ length_is:â€™3â€™ linebreaks ç”¨æˆ–æ ‡ç­¾åŒ…è£¹å˜é‡ â€˜Hi\n\nDavidâ€™\ linebreaksï¼Œè¿”å›žHiDavid linebreaksbr ç”¨æ ‡ç­¾ä»£æ›¿æ¢è¡Œç¬¦ linenumbers ä¸ºå˜é‡ä¸­çš„æ¯ä¸€è¡ŒåŠ ä¸Šè¡Œå· ljust è¾“å‡ºæŒ‡å®šé•¿åº¦çš„å­—ç¬¦ä¸²ï¼Œå˜é‡å·¦å¯¹é½ â€˜abâ€™\ ljust:5 è¿”å›žâ€™ab â€˜ lower å­—ç¬¦ä¸²å˜å°å†™ make_list å°†å­—ç¬¦ä¸²è½¬æ¢ä¸ºåˆ—è¡¨ pluralize æ ¹æ®æ•°å­—ç¡®å®šæ˜¯å¦è¾“å‡ºè‹±æ–‡å¤æ•°ç¬¦å· random è¿”å›žåˆ—è¡¨çš„éšæœºä¸€é¡¹ removetags åˆ é™¤å­—ç¬¦ä¸²ä¸­æŒ‡å®šçš„HTMLæ ‡è®° value\ removetags:â€™h1 h2â€™ rjust è¾“å‡ºæŒ‡å®šé•¿åº¦çš„å­—ç¬¦ä¸²ï¼Œå˜é‡å³å¯¹é½ slice åˆ‡ç‰‡æ“ä½œï¼Œ è¿”å›žåˆ—è¡¨ [3,9,1]\ slice:â€™:2â€™ï¼Œè¿”å›ž[3,9], â€˜asdikfjhihgieâ€™\ slice:â€™5â€™,è¿”å›žâ€™asdikâ€™ slugify åœ¨å­—ç¬¦ä¸²ä¸­ç•™ä¸‹å‡å·å’Œä¸‹åˆ’çº¿ï¼Œå…¶å®ƒç¬¦å·åˆ é™¤ï¼Œç©ºæ ¼ç”¨å‡å·æ›¿æ¢ â€˜5-2=3and5 2=3â€™\ slugify,è¿”å›ž5-2 3and5-23 stringformat å­—ç¬¦ä¸²æ ¼å¼åŒ–ï¼Œè¯­æ³•åŒpython time è¿”å›žæ—¥æœŸçš„æ—¶é—´éƒ¨åˆ† timesince ä»¥â€œåˆ°çŽ°åœ¨ä¸ºæ­¢è¿‡äº†å¤šé•¿æ—¶é—´â€æ˜¾ç¤ºæ—¶é—´å˜é‡ ç»“æžœå¯èƒ½ä¸º45daysï¼Œ3hours timeuntil ä»¥â€œä»ŽçŽ°åœ¨å¼€å§‹åˆ°æ—¶é—´å˜é‡â€è¿˜æœ‰å¤šé•¿æ—¶é—´æ˜¾ç¤ºæ—¶é—´å˜é‡ title æ¯ä¸ªå•è¯é¦–å­—æ¯å¤§å†™ truncatewords å°†å­—ç¬¦ä¸²è½¬æ¢ä¸ºçœç•¥è¡¨è¾¾æ–¹å¼ â€˜This is a penâ€™\ truncatewords:2 è¿”å›žâ€™This is â€¦â€™ truncatewords_html åŒä¸Šï¼Œä½†ä¿ç•™å…¶ä¸­çš„HTMLæ ‡ç­¾ â€˜This is a penâ€˜\ truncatewords:2,è¿”å›ž This is â€¦ urlencode å°†å­—ç¬¦ä¸²ä¸­çš„ç‰¹æ®Šå­—ç¬¦è½¬æ¢ä¸ºurlå…¼å®¹è¡¨è¾¾æ–¹å¼ â€˜http://www.aaa.com/foo?a=b&amp;b=c&#39;\ urlencode urlize å°†å˜é‡å­—ç¬¦ä¸²ä¸­çš„urlç”±çº¯æ–‡æœ¬å˜ä¸ºé“¾æŽ¥ wordcount è¿”å›žå˜é‡å­—ç¬¦ä¸²ä¸­çš„å•è¯æ•° yesno å°†å¸ƒå°”å˜é‡è½¬æ¢ä¸ºå­—ç¬¦ä¸²yes, no æˆ–maybe True\ yesno,False\ yesno,None\ yesno,è¿”å›ž yes,no,maybe æ¨¡æ¿ä¹‹æ ‡ç­¾æ ‡ç­¾çœ‹èµ·æ¥åƒæ˜¯è¿™æ ·çš„ï¼š&#123;% tag %&#125;ã€‚æ ‡ç­¾æ¯”å˜é‡æ›´åŠ å¤æ‚ï¼šä¸€äº›åœ¨è¾“å‡ºä¸­åˆ›å»ºæ–‡æœ¬ï¼Œä¸€äº›é€šè¿‡å¾ªçŽ¯æˆ–é€»è¾‘æ¥æŽ§åˆ¶æµç¨‹ï¼Œä¸€äº›åŠ è½½å…¶åŽçš„å˜é‡å°†ä½¿ç”¨åˆ°çš„é¢å¤–ä¿¡æ¯åˆ°æ¨¡æ¿ä¸­ã€‚ä¸€äº›æ ‡ç­¾éœ€è¦å¼€å§‹å’Œç»“æŸæ ‡ç­¾ï¼ˆä¾‹å¦‚&#123;% tag %&#125;â€¦æ ‡ç­¾ å†…å®¹â€¦ &#123;% endtag %&#125;ï¼‰ã€‚ for æ ‡ç­¾éåŽ†æ¯ä¸€ä¸ªå…ƒç´ ï¼š 123&amp;#123;% for person in person_list %&amp;#125; &lt;p&gt;&amp;#123;&amp;#123; person.name &amp;#125;&amp;#125;&lt;/p&gt;&amp;#123;% endfor %&amp;#125; å¯ä»¥åˆ©ç”¨&amp;#123;% for obj in list reversed %&amp;#125;åå‘å®Œæˆå¾ªçŽ¯ã€‚ éåŽ†ä¸€ä¸ªå­—å…¸ï¼š 123&amp;#123;% for key,val in dic.items %&amp;#125; &lt;p&gt;&amp;#123;&amp;#123; key &amp;#125;&amp;#125;:&amp;#123;&amp;#123; val &amp;#125;&amp;#125;&lt;/p&gt;&amp;#123;% endfor %&amp;#125; æ³¨ï¼šå¾ªçŽ¯åºå·å¯ä»¥é€šè¿‡&#123;&#123; forloop &#125;&#125;æ˜¾ç¤º 1234567forloop.counter The current iteration of the loop (1-indexed) å½“å‰å¾ªçŽ¯çš„ç´¢å¼•å€¼ï¼ˆä»Ž1å¼€å§‹ï¼‰forloop.counter0 The current iteration of the loop (0-indexed) å½“å‰å¾ªçŽ¯çš„ç´¢å¼•å€¼ï¼ˆä»Ž0å¼€å§‹ï¼‰forloop.revcounter The number of iterations from the end of the loop (1-indexed) å½“å‰å¾ªçŽ¯çš„å€’åºç´¢å¼•å€¼ï¼ˆä»Ž1å¼€å§‹ï¼‰forloop.revcounter0 The number of iterations from the end of the loop (0-indexed) å½“å‰å¾ªçŽ¯çš„å€’åºç´¢å¼•å€¼ï¼ˆä»Ž0å¼€å§‹ï¼‰forloop.first True if this is the first time through the loop å½“å‰å¾ªçŽ¯æ˜¯ä¸æ˜¯ç¬¬ä¸€æ¬¡å¾ªçŽ¯ï¼ˆå¸ƒå°”å€¼ï¼‰forloop.last True if this is the last time through the loop å½“å‰å¾ªçŽ¯æ˜¯ä¸æ˜¯æœ€åŽä¸€æ¬¡å¾ªçŽ¯ï¼ˆå¸ƒå°”å€¼ï¼‰forloop.parentloop æœ¬å±‚å¾ªçŽ¯çš„å¤–å±‚å¾ªçŽ¯ forâ€¦emptyfor æ ‡ç­¾å¸¦æœ‰ä¸€ä¸ªå¯é€‰çš„&amp;#123;% empty %&amp;#125; ä»Žå¥ï¼Œä»¥ä¾¿åœ¨ç»™å‡ºçš„ç»„æ˜¯ç©ºçš„æˆ–è€…æ²¡æœ‰è¢«æ‰¾åˆ°æ—¶ï¼Œå¯ä»¥æœ‰æ‰€æ“ä½œã€‚ 123456&amp;#123;% for person in person_list %&amp;#125; &lt;p&gt;&amp;#123;&amp;#123; person.name &amp;#125;&amp;#125;&lt;/p&gt;&amp;#123;% empty %&amp;#125; &lt;p&gt;sorry,no person here&lt;/p&gt;&amp;#123;% endfor %&amp;#125; ifæ ‡ç­¾&amp;#123;% if %&amp;#125;ä¼šå¯¹ä¸€ä¸ªå˜é‡æ±‚å€¼ï¼Œå¦‚æžœå®ƒçš„å€¼æ˜¯â€œTrueâ€ï¼ˆå­˜åœ¨ã€ä¸ä¸ºç©ºã€ä¸”ä¸æ˜¯booleanç±»åž‹çš„falseå€¼ï¼‰ï¼Œå¯¹åº”çš„å†…å®¹å—ä¼šè¾“å‡ºã€‚ 1234567&amp;#123;% if num &gt; 100 or num &lt; 0 %&amp;#125; &lt;p&gt;æ— æ•ˆ&lt;/p&gt;&amp;#123;% elif num &gt; 80 and num &lt; 100 %&amp;#125; &lt;p&gt;ä¼˜ç§€&lt;/p&gt;&amp;#123;% else %&amp;#125; &lt;p&gt;å‡‘æ´»å§&lt;/p&gt;&amp;#123;% endif %&amp;#125; ifè¯­å¥æ”¯æŒï¼šandã€orã€==ã€&gt;ã€&lt;ã€!=ã€&lt;=ã€&gt;=ã€inã€not inã€isã€is notåˆ¤æ–­ã€‚ withä½¿ç”¨ä¸€ä¸ªç®€å•åœ°åå­—ç¼“å­˜ä¸€ä¸ªå¤æ‚çš„å˜é‡ï¼Œå½“ä½ éœ€è¦ä½¿ç”¨ä¸€ä¸ªâ€œæ˜‚è´µçš„â€æ–¹æ³•ï¼ˆæ¯”å¦‚è®¿é—®æ•°æ®åº“ï¼‰å¾ˆå¤šæ¬¡çš„æ—¶å€™æ˜¯éžå¸¸æœ‰ç”¨çš„ ä¾‹å¦‚ï¼š 1234&amp;#123;% with total=business.employees.count %&amp;#125; &amp;#123;&amp;#123; total &amp;#125;&amp;#125; employee&amp;#123;&amp;#123; total|pluralize &amp;#125;&amp;#125;&amp;#123;% endwith %&amp;#125;ä¸è¦å†™æˆas cerf_token1&amp;#123;% csrf_token%&amp;#125; è¿™ä¸ªæ ‡ç­¾ç”¨äºŽè·¨ç«™è¯·æ±‚ä¼ªé€ ä¿æŠ¤ è‡ªå®šä¹‰æ ‡ç­¾å’Œè¿‡æ»¤å™¨ åœ¨settingsä¸­çš„INSTALLED_APPSé…ç½®å½“å‰appï¼Œä¸ç„¶djangoæ— æ³•æ‰¾åˆ°è‡ªå®šä¹‰çš„simple_tag. åœ¨appä¸­åˆ›å»ºtemplatetagsæ¨¡å—(æ¨¡å—ååªèƒ½æ˜¯templatetags) åˆ›å»ºä»»æ„ .py æ–‡ä»¶ï¼Œå¦‚ï¼šmy_tags.py 123456789101112131415161718from django import templatefrom django.utils.safestring import mark_safe register = template.Library() #registerçš„åå­—æ˜¯å›ºå®šçš„,ä¸å¯æ”¹å˜ @register.filterdef filter_multi(v1,v2): return v1 * v2&lt;br&gt;@register.simple_tagdef simple_tag_multi(v1,v2): return v1 * v2&lt;br&gt;@register.simple_tagdef my_input(id,arg): result = "&lt;input type='text' id='%s' class='%s' /&gt;" %(id,arg,) return mark_safe(result) ä½¿ç”¨è‡ªå®šä¹‰ simple_tagå’Œ fileter çš„ html æ–‡ä»¶ä¸­å¯¼å…¥ä¹‹å‰åˆ›å»ºçš„ my_tags.py 1&amp;#123;% load my_tags %&amp;#125; ä½¿ç”¨simple_tagå’Œfilterï¼ˆå¦‚ä½•è°ƒç”¨ï¼‰ 123456789&amp;#123;% load xxx %&amp;#125; # num=12&amp;#123;&amp;#123; num|filter_multi:2 &amp;#125;&amp;#125; #24 &amp;#123;&amp;#123; num|filter_multi:&quot;[22,333,4444]&quot; &amp;#125;&amp;#125; &amp;#123;% simple_tag_multi 2 5 %&amp;#125; å‚æ•°ä¸é™,ä½†ä¸èƒ½æ”¾åœ¨if forè¯­å¥ä¸­&amp;#123;% simple_tag_multi num 5 %&amp;#125; æ³¨æ„ï¼šfilter å¯ä»¥ç”¨åœ¨ if ç­‰è¯­å¥åŽï¼Œsimple_tagä¸å¯ä»¥ 123&amp;#123;% if num|filter_multi:30 &gt; 100 %&amp;#125; &amp;#123;&amp;#123; num|filter_multi:30 &amp;#125;&amp;#125;&amp;#123;% endif %&amp;#125;]]></content>
      <categories>
        <category>Django</category>
      </categories>
  </entry>
  <entry>
    <title><![CDATA[Djangoï¼ˆä¸ƒï¼‰]]></title>
    <url>%2F2019%2F01%2F09%2FDjango%EF%BC%88%E4%B8%83%EF%BC%89%2F</url>
    <content type="text"><![CDATA[Django ç³»åˆ—åšå®¢ï¼ˆä¸ƒï¼‰å‰è¨€æœ¬ç¯‡åšå®¢ä»‹ç» Django ä¸­çš„è§†å›¾å±‚ä¸­çš„ç›¸å…³å‚æ•°ï¼ŒHttpRequest å¯¹è±¡ã€HttpResponse å¯¹è±¡ã€JsonResponseï¼Œä»¥åŠè§†å›¾å±‚çš„ä¸¤ç§å“åº”æ–¹å¼ CBV å’Œ FBVï¼Œè¿˜æœ‰ç®€å•çš„æ–‡ä»¶ä¸Šä¼ ã€‚ è§†å›¾å‡½æ•°ä¸€ä¸ªè§†å›¾å‡½æ•°ï¼Œç®€ç§°è§†å›¾ï¼Œæ˜¯ä¸€ä¸ªç®€å•çš„Python å‡½æ•°ï¼Œå®ƒæŽ¥å—Webè¯·æ±‚å¹¶ä¸”è¿”å›žWebå“åº”ã€‚å“åº”å¯ä»¥æ˜¯ä¸€å¼ ç½‘é¡µçš„HTMLå†…å®¹ï¼Œä¸€ä¸ªé‡å®šå‘ï¼Œä¸€ä¸ª404é”™è¯¯ï¼Œä¸€ä¸ªXMLæ–‡æ¡£ï¼Œæˆ–è€…ä¸€å¼ å›¾ç‰‡. . . æ˜¯ä»»ä½•ä¸œè¥¿éƒ½å¯ä»¥ã€‚æ— è®ºè§†å›¾æœ¬èº«åŒ…å«ä»€ä¹ˆé€»è¾‘ï¼Œéƒ½è¦è¿”å›žå“åº”ã€‚ä»£ç å†™åœ¨å“ªé‡Œä¹Ÿæ— æ‰€è°“ï¼Œåªè¦å®ƒåœ¨ä½ çš„Pythonç›®å½•ä¸‹é¢ã€‚é™¤æ­¤ä¹‹å¤–æ²¡æœ‰æ›´å¤šçš„è¦æ±‚äº†â€”â€”å¯ä»¥è¯´â€œæ²¡æœ‰ä»€ä¹ˆç¥žå¥‡çš„åœ°æ–¹â€ã€‚ä¸ºäº†å°†ä»£ç æ”¾åœ¨æŸå¤„ï¼Œçº¦å®šæ˜¯å°†è§†å›¾æ”¾ç½®åœ¨é¡¹ç›®æˆ–åº”ç”¨ç¨‹åºç›®å½•ä¸­çš„åä¸ºviews.pyçš„æ–‡ä»¶ä¸­ã€‚ ä¸‹é¢æ˜¯ä¸€ä¸ªè¿”å›žå½“å‰æ—¥æœŸå’Œæ—¶é—´ä½œä¸º HTML æ–‡æ¡£çš„è§†å›¾ï¼š 1234567from django.shortcuts import render, HttpResponse, HttpResponseRedirect, redirectimport datetimedef current_datetime(request): now = datetime.datetime.now() html = "&lt;html&gt;&lt;body&gt;It is now %s.&lt;/body&gt;&lt;/html&gt;" % now return HttpResponse(html) è¿™æ®µä»£ç è§£æžï¼š ä»Ž django.shortcutsæ¨¡å—å¯¼å…¥äº†HttpResponseç±»ï¼Œä»¥åŠPythonçš„datetimeåº“ï¼› å®šä¹‰äº†current_datetimeå‡½æ•°ã€‚å®ƒå°±æ˜¯è§†å›¾å‡½æ•°ã€‚æ¯ä¸ªè§†å›¾å‡½æ•°éƒ½ä½¿ç”¨HttpRequestå¯¹è±¡ä½œä¸ºç¬¬ä¸€ä¸ªå‚æ•°ï¼Œå¹¶ä¸”é€šå¸¸ç§°ä¹‹ä¸ºrequestï¼› æ³¨æ„,è§†å›¾å‡½æ•°çš„åç§°å¹¶ä¸é‡è¦ï¼›ä¸éœ€è¦ç”¨ä¸€ä¸ªç»Ÿä¸€çš„å‘½åæ–¹å¼æ¥å‘½åï¼Œä»¥ä¾¿è®©Djangoè¯†åˆ«å®ƒã€‚æˆ‘ä»¬å°†å…¶å‘½åä¸ºcurrent_datetimeï¼Œæ˜¯å› ä¸ºè¿™ä¸ªåç§°èƒ½å¤Ÿç²¾ç¡®åœ°åæ˜ å‡ºå®ƒçš„åŠŸèƒ½ã€‚ ä¼šè¿”å›žä¸€ä¸ªHttpResponseå¯¹è±¡ï¼Œå…¶ä¸­åŒ…å«ç”Ÿæˆçš„å“åº”ã€‚æ¯ä¸ªè§†å›¾å‡½æ•°éƒ½è´Ÿè´£è¿”å›žä¸€ä¸ªHttpResponseå¯¹è±¡ã€‚ åœ¨è§†å›¾å±‚æœ€é‡è¦çš„å°±æ˜¯è¦ç†Ÿæ‚‰ä¸¤ä¸ªå¯¹è±¡ï¼šè¯·æ±‚å¯¹è±¡ï¼ˆrequestï¼‰å’Œå“åº”å¯¹è±¡ï¼ˆHttpResponseï¼‰ã€‚ HttpRequest å¯¹è±¡request å±žæ€§Django å°†è¯·æ±‚æŠ¥æ–‡ä¸­çš„è¯·æ±‚è¡Œã€è¯·æ±‚å¤´ã€è¯·æ±‚ä½“å°è£…æˆ HttpRequest ç±»ä¸­çš„å±žæ€§ã€‚é™¤äº†ç‰¹æ®Šè¯´æ˜Žä¹‹å¤–ï¼Œå…¶ä»–çš„å‡ä¸ºåªè¯»å±žæ€§ã€‚ 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768697071727374757677787980818283848586878889909192939495969798991001011021031041051061071081091101111121131141151161171181.HttpRequest.GET ä¸€ä¸ªç±»ä¼¼äºŽå­—å…¸çš„å¯¹è±¡ï¼ŒåŒ…å« HTTP GET çš„æ‰€æœ‰å‚æ•°ã€‚è¯¦æƒ…è¯·å‚è€ƒ QueryDict å¯¹è±¡ã€‚2.HttpRequest.POST ä¸€ä¸ªç±»ä¼¼äºŽå­—å…¸çš„å¯¹è±¡ï¼Œå¦‚æžœè¯·æ±‚ä¸­åŒ…å«è¡¨å•æ•°æ®ï¼Œåˆ™å°†è¿™äº›æ•°æ®å°è£…æˆ QueryDict å¯¹è±¡ã€‚ POST è¯·æ±‚å¯ä»¥å¸¦æœ‰ç©ºçš„ POST å­—å…¸ â€”â€” å¦‚æžœé€šè¿‡ HTTP POST æ–¹æ³•å‘é€ä¸€ä¸ªè¡¨å•ï¼Œä½†æ˜¯è¡¨å•ä¸­æ²¡æœ‰ä»»ä½•çš„æ•°æ®ï¼ŒQueryDict å¯¹è±¡ä¾ç„¶ä¼šè¢«åˆ›å»ºã€‚ å› æ­¤ï¼Œä¸åº”è¯¥ä½¿ç”¨ if request.POST æ¥æ£€æŸ¥ä½¿ç”¨çš„æ˜¯å¦æ˜¯POST æ–¹æ³•ï¼›åº”è¯¥ä½¿ç”¨ if request.method == "POST" å¦å¤–ï¼šå¦‚æžœä½¿ç”¨ POST ä¸Šä¼ æ–‡ä»¶çš„è¯ï¼Œæ–‡ä»¶ä¿¡æ¯å°†åŒ…å«åœ¨ FILES å±žæ€§ä¸­ã€‚ æ³¨æ„ï¼šé”®å€¼å¯¹çš„å€¼æ˜¯å¤šä¸ªçš„æ—¶å€™,æ¯”å¦‚checkboxç±»åž‹çš„inputæ ‡ç­¾ï¼Œselectæ ‡ç­¾ï¼Œéœ€è¦ç”¨ï¼š request.POST.getlist("hobby")3.HttpRequest.body ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œä»£è¡¨è¯·æ±‚æŠ¥æ–‡çš„ä¸»ä½“ã€‚åœ¨å¤„ç†éž HTTP å½¢å¼çš„æŠ¥æ–‡æ—¶éžå¸¸æœ‰ç”¨ï¼Œä¾‹å¦‚ï¼šäºŒè¿›åˆ¶å›¾ç‰‡ã€XML,Jsonç­‰ã€‚ ä½†æ˜¯ï¼Œå¦‚æžœè¦å¤„ç†è¡¨å•æ•°æ®çš„æ—¶å€™ï¼ŒæŽ¨èè¿˜æ˜¯ä½¿ç”¨ HttpRequest.POST ã€‚4.HttpRequest.path ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œè¡¨ç¤ºè¯·æ±‚çš„è·¯å¾„ç»„ä»¶ï¼ˆä¸å«åŸŸåï¼‰ã€‚ ä¾‹å¦‚ï¼š"/music/bands/the_beatles/"5.HttpRequest.method ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œè¡¨ç¤ºè¯·æ±‚ä½¿ç”¨çš„HTTP æ–¹æ³•ã€‚å¿…é¡»ä½¿ç”¨å¤§å†™ã€‚ ä¾‹å¦‚ï¼š"GET"ã€"POST"6.HttpRequest.encoding ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œè¡¨ç¤ºæäº¤çš„æ•°æ®çš„ç¼–ç æ–¹å¼ï¼ˆå¦‚æžœä¸º None åˆ™è¡¨ç¤ºä½¿ç”¨ DEFAULT_CHARSET çš„è®¾ç½®ï¼Œé»˜è®¤ä¸º 'utf-8'ï¼‰ã€‚ è¿™ä¸ªå±žæ€§æ˜¯å¯å†™çš„ï¼Œä½ å¯ä»¥ä¿®æ”¹å®ƒæ¥ä¿®æ”¹è®¿é—®è¡¨å•æ•°æ®ä½¿ç”¨çš„ç¼–ç ã€‚ æŽ¥ä¸‹æ¥å¯¹å±žæ€§çš„ä»»ä½•è®¿é—®ï¼ˆä¾‹å¦‚ä»Ž GET æˆ– POST ä¸­è¯»å–æ•°æ®ï¼‰å°†ä½¿ç”¨æ–°çš„ encoding å€¼ã€‚ å¦‚æžœä½ çŸ¥é“è¡¨å•æ•°æ®çš„ç¼–ç ä¸æ˜¯ DEFAULT_CHARSET ï¼Œåˆ™ä½¿ç”¨å®ƒã€‚7.HttpRequest.META ä¸€ä¸ªæ ‡å‡†çš„Python å­—å…¸ï¼ŒåŒ…å«æ‰€æœ‰çš„HTTP é¦–éƒ¨ã€‚å…·ä½“çš„å¤´éƒ¨ä¿¡æ¯å–å†³äºŽå®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ï¼Œä¸‹é¢æ˜¯ä¸€äº›ç¤ºä¾‹ï¼š å–å€¼ï¼š CONTENT_LENGTH â€”â€” è¯·æ±‚çš„æ­£æ–‡çš„é•¿åº¦ï¼ˆæ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²ï¼‰ã€‚ CONTENT_TYPE â€”â€” è¯·æ±‚çš„æ­£æ–‡çš„MIME ç±»åž‹ã€‚ HTTP_ACCEPT â€”â€” å“åº”å¯æŽ¥æ”¶çš„Content-Typeã€‚ HTTP_ACCEPT_ENCODING â€”â€” å“åº”å¯æŽ¥æ”¶çš„ç¼–ç ã€‚ HTTP_ACCEPT_LANGUAGE â€”â€” å“åº”å¯æŽ¥æ”¶çš„è¯­è¨€ã€‚ HTTP_HOST â€”â€” å®¢æœç«¯å‘é€çš„HTTP Host å¤´éƒ¨ã€‚ HTTP_REFERER â€”â€” Referring é¡µé¢ã€‚ HTTP_USER_AGENT â€”â€” å®¢æˆ·ç«¯çš„user-agent å­—ç¬¦ä¸²ã€‚ QUERY_STRING â€”â€” å•ä¸ªå­—ç¬¦ä¸²å½¢å¼çš„æŸ¥è¯¢å­—ç¬¦ä¸²ï¼ˆæœªè§£æžè¿‡çš„å½¢å¼ï¼‰ã€‚ REMOTE_ADDR â€”â€” å®¢æˆ·ç«¯çš„IP åœ°å€ã€‚ REMOTE_HOST â€”â€” å®¢æˆ·ç«¯çš„ä¸»æœºåã€‚ REMOTE_USER â€”â€” æœåŠ¡å™¨è®¤è¯åŽçš„ç”¨æˆ·ã€‚ REQUEST_METHOD â€”â€” ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œä¾‹å¦‚"GET" æˆ–"POST"ã€‚ SERVER_NAME â€”â€” æœåŠ¡å™¨çš„ä¸»æœºåã€‚ SERVER_PORT â€”â€” æœåŠ¡å™¨çš„ç«¯å£ï¼ˆæ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²ï¼‰ã€‚ ä»Žä¸Šé¢å¯ä»¥çœ‹åˆ°ï¼Œé™¤ CONTENT_LENGTH å’Œ CONTENT_TYPE ä¹‹å¤–ï¼Œè¯·æ±‚ä¸­çš„ä»»ä½• HTTP é¦–éƒ¨è½¬æ¢ä¸º META çš„é”®æ—¶ï¼Œ éƒ½ä¼šå°†æ‰€æœ‰å­—æ¯å¤§å†™å¹¶å°†è¿žæŽ¥ç¬¦æ›¿æ¢ä¸ºä¸‹åˆ’çº¿æœ€åŽåŠ ä¸Š HTTP_ å‰ç¼€ã€‚ æ‰€ä»¥ï¼Œä¸€ä¸ªå«åš X-Bender çš„å¤´éƒ¨å°†è½¬æ¢æˆ META ä¸­çš„ HTTP_X_BENDER é”®ã€‚8.HttpRequest.FILES ä¸€ä¸ªç±»ä¼¼äºŽå­—å…¸çš„å¯¹è±¡ï¼ŒåŒ…å«æ‰€æœ‰çš„ä¸Šä¼ æ–‡ä»¶ä¿¡æ¯ã€‚ FILES ä¸­çš„æ¯ä¸ªé”®ä¸º&lt;input type="file" name="" /&gt; ä¸­çš„nameï¼Œå€¼åˆ™ä¸ºå¯¹åº”çš„æ•°æ®ã€‚ æ³¨æ„ï¼ŒFILES åªæœ‰åœ¨è¯·æ±‚çš„æ–¹æ³•ä¸ºPOST ä¸”æäº¤çš„&lt;form&gt; å¸¦æœ‰enctype="multipart/form-data" çš„æƒ…å†µä¸‹æ‰ä¼š åŒ…å«æ•°æ®ã€‚å¦åˆ™ï¼ŒFILES å°†ä¸ºä¸€ä¸ªç©ºçš„ç±»ä¼¼äºŽå­—å…¸çš„å¯¹è±¡ã€‚9.HttpRequest.COOKIES ä¸€ä¸ªæ ‡å‡†çš„Python å­—å…¸ï¼ŒåŒ…å«æ‰€æœ‰çš„cookieã€‚é”®å’Œå€¼éƒ½ä¸ºå­—ç¬¦ä¸²ã€‚10.HttpRequest.session ä¸€ä¸ªæ—¢å¯è¯»åˆå¯å†™çš„ç±»ä¼¼äºŽå­—å…¸çš„å¯¹è±¡ï¼Œè¡¨ç¤ºå½“å‰çš„ä¼šè¯ã€‚åªæœ‰å½“Django å¯ç”¨ä¼šè¯çš„æ”¯æŒæ—¶æ‰å¯ç”¨ã€‚ å®Œæ•´çš„ç»†èŠ‚å‚è§ä¼šè¯çš„æ–‡æ¡£ã€‚11.HttpRequest.user(ç”¨æˆ·è®¤è¯ç»„ä»¶ä¸‹ä½¿ç”¨) ä¸€ä¸ª AUTH_USER_MODEL ç±»åž‹çš„å¯¹è±¡ï¼Œè¡¨ç¤ºå½“å‰ç™»å½•çš„ç”¨æˆ·ã€‚ å¦‚æžœç”¨æˆ·å½“å‰æ²¡æœ‰ç™»å½•ï¼Œuser å°†è®¾ç½®ä¸º django.contrib.auth.models.AnonymousUser çš„ä¸€ä¸ªå®žä¾‹ã€‚ä½ å¯ä»¥é€šè¿‡ is_authenticated() åŒºåˆ†å®ƒä»¬ã€‚ ä¾‹å¦‚ï¼š if request.user.is_authenticated(): # Do something for logged-in users. else: # Do something for anonymous users. user åªæœ‰å½“Django å¯ç”¨ AuthenticationMiddleware ä¸­é—´ä»¶æ—¶æ‰å¯ç”¨ã€‚ ------------------------------------------------------------------------------------- åŒ¿åç”¨æˆ· class models.AnonymousUser django.contrib.auth.models.AnonymousUser ç±»å®žçŽ°äº†django.contrib.auth.models.User æŽ¥å£ï¼Œä½†å…·æœ‰ä¸‹é¢å‡ ä¸ªä¸åŒç‚¹ï¼š id æ°¸è¿œä¸ºNoneã€‚ username æ°¸è¿œä¸ºç©ºå­—ç¬¦ä¸²ã€‚ get_username() æ°¸è¿œè¿”å›žç©ºå­—ç¬¦ä¸²ã€‚ is_staff å’Œ is_superuser æ°¸è¿œä¸ºFalseã€‚ is_active æ°¸è¿œä¸º Falseã€‚ groups å’Œ user_permissions æ°¸è¿œä¸ºç©ºã€‚ is_anonymous() è¿”å›žTrue è€Œä¸æ˜¯Falseã€‚ is_authenticated() è¿”å›žFalse è€Œä¸æ˜¯Trueã€‚ set_password()ã€check_password()ã€save() å’Œdelete() å¼•å‘ NotImplementedErrorã€‚ New in Django 1.8: æ–°å¢ž AnonymousUser.get_username() ä»¥æ›´å¥½åœ°æ¨¡æ‹Ÿ django.contrib.auth.models.Userã€‚ requestå¸¸ç”¨æ–¹æ³•1234567891011121314151.HttpRequest.get_full_path() è¿”å›ž pathï¼Œå¦‚æžœå¯ä»¥å°†åŠ ä¸ŠæŸ¥è¯¢å­—ç¬¦ä¸²ã€‚ ä¾‹å¦‚ï¼š"/music/bands/the_beatles/?print=true" æ³¨æ„å’Œpathçš„åŒºåˆ«ï¼šhttp://127.0.0.1:8001/order/?name=lqz&amp;age=102.HttpRequest.is_ajax() å¦‚æžœè¯·æ±‚æ˜¯é€šè¿‡XMLHttpRequest å‘èµ·çš„ï¼Œåˆ™è¿”å›žTrueï¼Œæ–¹æ³•æ˜¯æ£€æŸ¥ HTTP_X_REQUESTED_WITH ç›¸åº”çš„é¦–éƒ¨æ˜¯å¦æ˜¯å­—ç¬¦ä¸²'XMLHttpRequest'ã€‚ å¤§éƒ¨åˆ†çŽ°ä»£çš„ JavaScript åº“éƒ½ä¼šå‘é€è¿™ä¸ªå¤´éƒ¨ã€‚å¦‚æžœä½ ç¼–å†™è‡ªå·±çš„ XMLHttpRequest è°ƒç”¨ï¼ˆåœ¨æµè§ˆå™¨ç«¯ï¼‰ï¼Œä½ å¿…é¡»æ‰‹å·¥è®¾ç½®è¿™ä¸ªå€¼æ¥è®© is_ajax() å¯ä»¥å·¥ä½œã€‚ å¦‚æžœä¸€ä¸ªå“åº”éœ€è¦æ ¹æ®è¯·æ±‚æ˜¯å¦æ˜¯é€šè¿‡AJAX å‘èµ·çš„ï¼Œå¹¶ä¸”ä½ æ­£åœ¨ä½¿ç”¨æŸç§å½¢å¼çš„ç¼“å­˜ä¾‹å¦‚Django çš„ cache middlewareï¼Œ ä½ åº”è¯¥ä½¿ç”¨ vary_on_headers('HTTP_X_REQUESTED_WITH') è£…é¥°ä½ çš„è§†å›¾ä»¥è®©å“åº”èƒ½å¤Ÿæ­£ç¡®åœ°ç¼“å­˜ã€‚ HttpResponse å¯¹è±¡å“åº”å¯¹è±¡ä¸»è¦æœ‰ä¸‰ç§å½¢å¼ï¼šå‰é¢çš„åšå®¢æœ‰ç›¸å…³ä»‹ç» HttpResponse()ï¼› render()ï¼› redirect(). HttpResponse()æ‹¬å·å†…ç›´æŽ¥è·Ÿä¸€ä¸ªå…·ä½“çš„å­—ç¬¦ä¸²ä½œä¸ºå“åº”ä½“ï¼Œæ¯”è¾ƒç›´æŽ¥å’Œç®€å•ï¼Œæ‰€ä»¥è¿™é‡Œä»‹ç»åŽä¸¤ç§ render()1render(request, template_name[, context]) ç»“åˆç»™å®šçš„æ¨¡æ¿å’Œä¸€ä¸ªä¸Šä¸‹æ–‡å­—å…¸ï¼Œè¿”å›žä¸€ä¸ªç»è¿‡ Djangoæ¸²æŸ“åŽçš„HttpResponse å¯¹è±¡åˆ°å‰ç«¯ã€‚ å‚æ•°ï¼š requestï¼šç”¨äºŽç”Ÿæˆå“åº”çš„è¯·æ±‚å¯¹è±¡ï¼› template_nameï¼šè¦ä½¿ç”¨çš„æ¨¡æ¿çš„å®Œæ•´åç§°ï¼Œå¯é€‰çš„å‚æ•°ï¼› contextï¼šæ·»åŠ åˆ°æ¨¡æ¿ä¸Šä¸‹æ–‡çš„ä¸€ä¸ªå­—å…¸ã€‚é»˜è®¤æ˜¯ä¸€ä¸ªç©ºå­—å…¸ï¼Œå¦‚æžœå­—å…¸ä¸­çš„æŸä¸ªå€¼æ˜¯å¯è°ƒç”¨çš„ï¼Œè§†å›¾å°†åœ¨æ¸²æŸ“æ¨¡æ¿ä¹‹å‰è°ƒç”¨å®ƒï¼› render æ–¹æ³•å°±æ˜¯å°†ä¸€ä¸ªæ¨¡æ¿é¡µé¢ä¸­çš„æ¨¡æ¿è¯­æ³•è¿›è¡Œæ¸²æŸ“ï¼Œæœ€ç»ˆæ¸²æŸ“æˆä¸€ä¸ª HTML é¡µé¢ä½œä¸ºå“åº”è¿”å›žç»™å‰ç«¯ã€‚ redirect()ä¼ é€’è¦é‡å®šå‘çš„ä¸€ä¸ªç¡¬ç¼–ç çš„URL 123def my_view(request): ... return redirect('/some/url/') ä¹Ÿå¯ä»¥æ˜¯ä¸€ä¸ªå®Œæˆçš„ url 123def my_view(request): ... return redirect('http://www.baidu.com/') JsonResponseå¯¹è±¡å‘å‰ç«¯è¿”å›žä¸€ä¸ª json æ ¼å¼çš„å­—ç¬¦ä¸²ï¼Œæœ‰ä¸¤ç§æ–¹å¼ï¼š ç¬¬ä¸€ç§æ–¹å¼1234import jsondata = &#123;'name': 'musibii', 'age': 18&#125;return HttpResponse(json.dumps(data))# ä»Žè¿™é‡Œå¯ä»¥çœ‹å‡ºå…¶å®ž Jsonresponseå†…éƒ¨ä¹Ÿæ˜¯è°ƒç”¨äº† json çš„ dumps æ–¹æ³•è¿›è¡Œè½¬æ¢ ç¬¬äºŒç§æ–¹å¼12345from django.http import JsonResponsedata = &#123;'name': 'musibii', 'age': 18&#125;return JsonResponse(data1,safe=False)# safeå‚æ•°æ˜¯ä¸€ç§å®‰å…¨æœºåˆ¶ï¼Œå› ä¸ºå¦‚æžœè¦ä¼ è¾“åˆ—è¡¨ç±»åž‹çš„æ•°æ®æ—¶ï¼Œä¼šå› ä¸ºå†…éƒ¨çš„ç›¸å…³æœºåˆ¶ä¼šäº§ç”Ÿé”™è¯¯ã€‚ CBV å’Œ FBVCBV åŸºäºŽç±»çš„è§†å›¾ï¼ˆClass Base Viewï¼‰å’Œ FBV åŸºäºŽå‡½æ•°çš„è§†å›¾ï¼ˆFunction Base Viewï¼‰ CBV12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849from django.views import Viewclass Login(View): def dispatch(self, request, *args, **kwargs): print(request) print(args) print(kwargs) # å¯ä»¥å†™ç±»ä¼¼è£…é¥°å™¨çš„ä¸œè¥¿ï¼Œåœ¨å‰åŽåŠ ä»£ç  obj=super().dispatch(request, *args, **kwargs) return obj def get(self, request): return render(request, 'login.html') def post(self, request): name = request.POST.get('name') ret = BookInfo.objects.filter(name=name).first() print(type(ret)) dic = &#123;&#125; print(ret.name) print(type(ret.__dict__)) for key, value in (ret.__dict__).items(): if key[0].startswith('_'): continue print(key) dic[key] = value # print(dic) # ç¬¬äºŒç§ # ret = BookInfo.objects.all() # lis = [] # for info in ret: # dic = &#123;&#125; # for k, v in (info.__dict__).items(): # if key[0].startswitch(''): # continue # dic[key] = v # lis.append(dic) # ç¬¬ä¸‰ç§ # li = [] # ret = BookInfo.objects.all() # for book in ret: # dic = &#123;&#125; # for field in book._meta.fields: # dic[field.name] = getattr(book, field.name) # li.append(dic) return JsonResponse(dic, json_dumps_params=&#123;'ensure_ascii': False&#125;) FBV12345678910111213141516171819def file_upload(request): if request.method=="GET": return render(request,'file_upload.html') else: print(request.POST) print(request.FILES) # print(request.body) # FILESæ˜¯ä¸€ä¸ªå­—å…¸, # &lt;MultiValueDict: &#123;'myfile': [&lt;InMemoryUploadedFile: 1.jpg (image/jpeg)&gt;]&#125;&gt; # æ‹¿åˆ°ä¸Šä¼ çš„æ–‡ä»¶å¯¹è±¡ file=request.FILES.get('myfile') print(type(file)) from django.core.files.uploadedfile import InMemoryUploadedFile with open(file.name,'wb') as f: # for line in file.chunks(): for line in file: f.write(line) return HttpResponse('ä¸Šä¼ æˆåŠŸ') ç®€å•æ–‡ä»¶ä¸Šä¼ æ¨¡æ¿æ–‡ä»¶12345678910111213141516171819# upload_file.html&lt;!DOCTYPE html&gt;&lt;html lang="en"&gt;&lt;head&gt; &lt;meta charset="UTF-8"&gt; &lt;title&gt;Title&lt;/title&gt;&lt;/head&gt;&lt;body&gt;&lt;form action="" method="post" enctype="multipart/form-data"&gt; &lt;p&gt;ç”¨æˆ·å:&lt;input type="text" name="name"&gt;&lt;/p&gt; &lt;input type="file" name="myfile"&gt;&#123;# &lt;input type="file" name="myfile2"&gt;#&#125; &lt;input type="submit" value="æäº¤"&gt;&lt;/form&gt;&lt;/body&gt;&lt;/html&gt; è·¯ç”±æ–‡ä»¶12345from django.conf.urls import urlfrom app01 import viewsurlpatterns = [ url(r'^upload_file/$', views.UploadFile.as_view()),] è§†å›¾æ–‡ä»¶123456789101112131415class UploadFile(View): def get(self, request): return render(request, 'upload_file.html') def post(self, request): file = request.FILES.get('myfile') # print(file['file']) from django.core.files.uploadedfile import InMemoryUploadedFile print(time.time()) filename = str(time.time()).split('.')[0] + file.name with open(filename, 'wb') as f: for line in file: f.write(line) return HttpResponse('ä¸Šä¼ æˆåŠŸ')]]></content>
      <categories>
        <category>Django</category>
      </categories>
  </entry>
  <entry>
    <title><![CDATA[Djangoï¼ˆå…­ï¼‰]]></title>
    <url>%2F2019%2F01%2F09%2FDjango%EF%BC%88%E5%85%AD%EF%BC%89%2F</url>
    <content type="text"><![CDATA[Django ç³»åˆ—åšå®¢ï¼ˆå…­ï¼‰å‰è¨€æœ¬ç¯‡åšå®¢ä»‹ç» Django ä¸­çš„è·¯ç”±æŽ§åˆ¶éƒ¨åˆ†ï¼Œä¸€ä¸ªç½‘ç»œè¯·æ±‚é¦–å…ˆåˆ°è¾¾çš„å°±æ˜¯è·¯ç”±è¿™éƒ¨åˆ†ï¼Œç»è¿‡è·¯ç”±ä¸Žè§†å›¾å±‚çš„æ˜ å°„å…³ç³»å†æ‰§è¡Œç›¸åº”çš„ä»£ç é€»è¾‘å¹¶å°†ç»“æžœè¿”å›žç»™å®¢æˆ·ç«¯ã€‚ Django ä¸­è·¯ç”±çš„ä½œç”¨URL é…ç½®ï¼ˆURLconfï¼‰å¯ä»¥æ¯”ä½œæ˜¯ Django æ”¯æ’‘ç½‘ç«™çš„ç›®å½•ã€‚å®ƒçš„æœ¬è´¨æ˜¯ URL è¦ä¸ºè¯¥ URL æ»´å•Šç”¨çš„è§†å›¾å‡½æ•°ä¹‹é—´çš„æ˜ å°„è¡¨ã€‚ä»¥è¿™ç§æ–¹å¼å‘Šè¯‰ Djangoï¼Œå¯¹äºŽå®¢æˆ·ç«¯å‘æ¥çš„ URL è¦å…·ä½“è°ƒç”¨è§†å›¾å±‚çš„å“ªæ®µä»£ç ã€‚ 1234567from django.urls import urlfrom app import viewsurlpatterns = [ url(r'^$', views.home),]# ^$ è¿™ä¸ªè·¯ç”±å¯¹åº”è§†å›¾å‡½æ•°ä¸­çš„ home æ–¹æ³•ï¼Œåªè¦æµè§ˆå™¨å¾€è¯¥ç½‘å€å‘é€è¯·æ±‚ï¼Œå°±ä¼šå“åº”åˆ°è¿™ä¸ªå‡½æ•°æ‰§è¡Œã€‚ ç®€å•çš„è·¯ç”±é…ç½®12345from django.conf.urls import urlurlpatterns = [ url(æ­£åˆ™è¡¨è¾¾å¼, viewsè§†å›¾å‡½æ•°, é»˜è®¤å‚æ•°, è·¯ç”±åˆ«å),] æ­£åˆ™è¡¨è¾¾å¼ï¼šä¸€ä¸ªæ­£åˆ™è¡¨è¾¾å¼å­—ç¬¦ä¸²ï¼› views è§†å›¾å‡½æ•°ï¼šä¸€ä¸ªå¯è°ƒç”¨å¯¹è±¡ï¼Œé€šå¸¸ä¸ºä¸€ä¸ªè§†å›¾å‡½æ•°æˆ–ä¸€ä¸ªæŒ‡å®šè§†å›¾è·¯å¾„çš„å­—ç¬¦ä¸²ï¼› é»˜è®¤å‚æ•°ï¼šå¯é€‰çš„è¦ä¼ é€’ç»™è§†å›¾å‡½æ•°çš„é»˜è®¤å‚æ•°ï¼ˆå­—å…¸å½¢å¼ï¼‰ï¼› è·¯ç”±åˆ«åï¼šä¸€ä¸ªå¯é€‰çš„name å‚æ•°ã€‚ 12345678from django.conf.urls import urlfrom app import viewsurlpatterns = [ url(r'^admin/', admin.site.urls), url(r'^article/(\d&#123;4&#125;)/(\d&#123;2&#125;)', views.article), url(r'^user/(?P&lt;name&gt;[a-z]&#123;3&#125;)', views.user_havename), url(r'^user/$', views.user)] æ³¨æ„ï¼š è‹¥è¦ä»Ž URL ä¸­æ•èŽ·ä¸€ä¸ªå€¼ï¼Œåªéœ€è¦åœ¨å®ƒå‘¨å›´æ”¾ç½®ä¸€å¯¹åœ†æ‹¬å·ï¼› ä¸éœ€è¦æ·»åŠ ä¸€ä¸ªå‰å¯¼çš„åæ–œæ ï¼Œå› ä¸ºæ¯ä¸ª url éƒ½æœ‰ã€‚ä¾‹å¦‚ï¼Œåº”è¯¥æ˜¯^articlesè€Œä¸æ˜¯^/articlesã€‚ æ¯ä¸ªæ­£åˆ™è¡¨è¾¾å¼å‰é¢çš„ræ˜¯å¯é€‰çš„ï¼Œä½†æ˜¯å»ºè®®åŠ ä¸Šï¼Œè¡¨ç¤ºè¿™æ˜¯ä¸ªåŽŸç”Ÿå­—ç¬¦ä¸²ï¼Œå­—ç¬¦ä¸²ä¸­çš„ä»»ä½•å­—ç¬¦éƒ½ä¸åº”è¯¥è½¬ä¹‰ã€‚ urlpatterns ä¸­çš„å…ƒç´ æŒ‰ç…§ä¹¦å†™é¡ºåºä»Žä¸Šå¾€ä¸‹é€ä¸€åŒ¹é…æ­£åˆ™è¡¨è¾¾å¼ï¼Œä¸€æ—¦åŒ¹é…æˆåŠŸåˆ™ä¸å†ç»§ç»­ã€‚ 1234567ä¸€äº›è¯·æ±‚çš„ä¾‹å­ï¼š/articles/2005/03/ è¯·æ±‚å°†åŒ¹é…åˆ—è¡¨ä¸­çš„ç¬¬ä¸‰ä¸ªæ¨¡å¼ã€‚Django å°†è°ƒç”¨å‡½æ•°views.month_archive(request, '2005', '03')ã€‚/articles/2005/3/ ä¸åŒ¹é…ä»»ä½•URL æ¨¡å¼ï¼Œå› ä¸ºåˆ—è¡¨ä¸­çš„ç¬¬ä¸‰ä¸ªæ¨¡å¼è¦æ±‚æœˆä»½åº”è¯¥æ˜¯ä¸¤ä¸ªæ•°å­—ã€‚/articles/2003/ å°†åŒ¹é…åˆ—è¡¨ä¸­çš„ç¬¬ä¸€ä¸ªæ¨¡å¼ä¸æ˜¯ç¬¬äºŒä¸ªï¼Œå› ä¸ºæ¨¡å¼æŒ‰é¡ºåºåŒ¹é…ï¼Œç¬¬ä¸€ä¸ªä¼šé¦–å…ˆæµ‹è¯•æ˜¯å¦åŒ¹é…ã€‚è¯·åƒè¿™æ ·è‡ªç”±æ’å…¥ä¸€äº›ç‰¹æ®Šçš„æƒ…å†µæ¥æŽ¢æµ‹åŒ¹é…çš„æ¬¡åºã€‚/articles/2003 ä¸åŒ¹é…ä»»ä½•ä¸€ä¸ªæ¨¡å¼ï¼Œå› ä¸ºæ¯ä¸ªæ¨¡å¼è¦æ±‚URL ä»¥ä¸€ä¸ªåæ–œçº¿ç»“å°¾ã€‚/articles/2003/03/03/ å°†åŒ¹é…æœ€åŽä¸€ä¸ªæ¨¡å¼ã€‚Django å°†è°ƒç”¨å‡½æ•°views.article_detail(request, '2003', '03', '03')ã€‚ APPEND_SLASHè¯¥å‚æ•°çš„ä½œç”¨æ˜¯ä¼šåœ¨è®¿é—®è¿žæŽ¥çš„æ—¶å€™ï¼Œå¦‚æžœè¿žæŽ¥æ²¡æœ‰åŠ æ–œæ ï¼Œä¼šè‡ªåŠ¨åŠ ä¸Šã€‚å¯ä»¥åœ¨global_settings.pyä¸­ä¿®æ”¹ã€‚ é¡¹ç›®çš„ settings ä¸­æ²¡æœ‰æ”¹é…ç½®çš„é€‰é¡¹ï¼Œä¸€ä¸ªé¡¹ç›®ä¼šæœ‰ä¸¤ä¸ª settingsã€‚ æ•ˆæžœï¼š 123456from django.conf.urls import urlfrom app_01 import viewsurlpatterns = [ url(r'^blog/$', views.blog),] å½“æˆ‘ä»¬è®¿é—®http://www.example.com/blogæ—¶ï¼Œé»˜è®¤å°†ç½‘å€è‡ªåŠ¨æ›¿æ¢æˆhttp://www.example.com/blog/ã€‚å¦‚æžœå°†è¯¥é…ç½®å€¼è®¾ä¸ºfalseï¼Œæ­¤æ—¶åœ¨å‘è¯¥ç½‘å€å‘é€è¯·æ±‚æ—¶å°±ä¼šæç¤ºæ‰¾ä¸åˆ°é¡µé¢ã€‚ åˆ†ç»„å½“æˆ‘ä»¬éœ€è¦æ•èŽ· url ä¸­çš„å‚æ•°å¹¶è¦ä¼ é€’ç»™è§†å›¾å‡½æ•°æ—¶ï¼Œæœ‰ä¸¤ç§æ•èŽ·æ–¹å¼ï¼šæ— ååˆ†ç»„å’Œæœ‰ååˆ†ç»„ã€‚æ— ååˆ†ç»„å°±æ˜¯è¯¥å€¼æ²¡æœ‰å˜é‡æ ‡è¯†ï¼Œä¼ å€¼çš„æ—¶å€™é‡‡ç”¨ä½ç½®å‚æ•°ä¼ é€’ï¼›æœ‰ååˆ†ç»„å°±æ˜¯ç»™æ•èŽ·çš„å€¼èµ‹å€¼ä¸€ä¸ªå˜é‡ï¼Œè¿™æ ·å°±å¯ä»¥é€šè¿‡å…³é”®å­—å‚æ•°ä¼ å€¼äº†ã€‚ æ— ååˆ†ç»„1234567# urls.pyæ–‡ä»¶from django.conf.urls import urlfrom app_01 import viewsurlpatterns = [ url(r'^article/(\d&#123;4&#125;)/(\d&#123;2&#125;)', views.article),] 12345# views.pyæ–‡ä»¶from django.shortcuts import HttpResponsedef article(reques, year, month): return HttpResponse('æ‚¨è¦æŸ¥çœ‹%s å¹´%s æœˆçš„æ–‡ç« ' %(year, month)) é€šè¿‡åœ†æ‹¬å·æ•èŽ·å¹´ä»½å’Œæœˆä»½ï¼Œç„¶åŽé€šè¿‡ä½ç½®å‚æ•°ä¼ é€’ç»™ year å’Œ month å˜é‡ï¼ŒæŽ¥ç€åœ¨ views å‡½æ•°ä¸­ä½¿ç”¨ã€‚ æœ‰ååˆ†ç»„123456import reret=re.search('(?P&lt;year&gt;[0-9]&#123;4&#125;)/([0-9]&#123;2&#125;)','2012/12')print(ret.group())print(ret.group(1))print(ret.group(2))print(ret.group('year')) è¿™äº›ç¤ºä¾‹ä½¿ç”¨ç®€å•çš„ã€æ²¡æœ‰å‘½åçš„æ­£åˆ™è¡¨è¾¾å¼ç»„ï¼ˆé€šè¿‡åœ†æ‹¬å·ï¼‰æ¥æ•èŽ· URL ä¸­çš„å€¼å¹¶ä»¥ä½ç½®å‚æ•°ä¼ é€’ç»™è§†å›¾ã€‚åœ¨æ›´é«˜çº§çš„ç”¨æ³•ä¸­ï¼Œå¯ä»¥ä½¿ç”¨å‘½åçš„æ­£åˆ™è¡¨è¾¾å¼ç»„æ¥æ•èŽ· URL ä¸­çš„å€¼å¹¶ä»¥å…³é”®å­å‚æ•°ä¼ é€’ç»™è§†å›¾å‡½æ•°ã€‚ åœ¨python æ­£åˆ™è¡¨è¾¾å¼ä¸­ï¼Œå‘½åæœ‰ååˆ†ç»„çš„è¯­æ³•æ—¶(P&lt;å˜é‡å&gt;pattern)ï¼Œå…¶ä¸­å˜é‡åæ˜¯åˆ†ç»„çš„æ ‡è¯†ç¬¦ï¼Œpattern æ˜¯è¦åŒ¹é…çš„æ­£åˆ™è¡¨è¾¾å¼ã€‚ä¸‹é¢æ˜¯ä¸Šé¢ URLconf ä½¿ç”¨æœ‰ååˆ†ç»„çš„é‡å†™ï¼š 12345678910111213141516from django.urls import path, re_pathfrom app_01 import viewsurlpatterns = [ re_path(r'^articles/2003/$', views.special_case_2003), re_path(r'^articles/(?P&lt;year&gt;[0-9]&#123;4&#125;)/$', views.year_archive), re_path(r'^articles/(?P&lt;year[0-9]&#123;4&#125;)/(?P&lt;month&gt;[0-9]&#123;2&#125;)/$', views.month_archive), re_path(r'^articles/(?P&lt;year[0-9]&#123;4&#125;)/(?P&lt;month&gt;[0-9]&#123;2&#125;)/(?P&lt;day&gt;[0-9]&#123;2&#125;)/$', views.archive_detail),]# æ•èŽ·åˆ°çš„æ•°æ®éƒ½æ˜¯ str ç±»åž‹# è§†å›¾å‡½æ•°é‡Œå¯ä»¥æŒ‡å®šé»˜è®¤å€¼url('blog/$', views.blog),# url('blog/?(?P&lt;num&gt;[0-9]&#123;1&#125;)', views.blog),def blog(request, num=1): print(num) return HttpResponse('ok') è¿™ä¸ªå®žçŽ°ä¸Žå‰é¢çš„ç¤ºä¾‹å®Œå…¨ç›¸åŒï¼Œåªæœ‰ä¸€ä¸ªç»†å¾®çš„å·®åˆ«ï¼šæ•èŽ·çš„å€¼ä½œä¸ºå…³é”®å­—å‚æ•°è€Œä¸æ˜¯ä½ç½®å‚æ•°ä¼ é€’ç»™è§†å›¾å‡½æ•°ã€‚ä¾‹å¦‚ï¼š 12/articles/2005/03/ è¯·æ±‚å°†è°ƒç”¨views.month_archive(request, year='2005', month='03')å‡½æ•°ï¼Œè€Œä¸æ˜¯views.month_archive(request, '2005', '03')ã€‚ /articles/2003/03/03/ è¯·æ±‚å°†è°ƒç”¨å‡½æ•°views.article_detail(request, year='2003', month='03', day='03')ã€‚ åœ¨å®žé™…åº”ç”¨ä¸­ï¼Œè¿™æ„å‘³ä½ çš„ URLconf ä¼šæ›´åŠ æ¸…æ™°ä¸”ä¸å®¹æ˜“äº§ç”Ÿå‚æ•°é¡ºåºé—®é¢˜çš„é”™è¯¯ï¼Œå¯ä»¥åœ¨è§†å›¾å‡½æ•°å®šä¹‰ä¸­é‡æ–°å®‰æŽ’å‚æ•°çš„é¡ºåºã€‚ è·¯ç”±åˆ†å‘å…¶å®žå’Œé¡¹ç›®åç›¸åŒçš„æ–‡ä»¶å¤¹ä¸‹é¢çš„urls.pyæ–‡ä»¶æ˜¯æ•´ä¸ªé¡¹ç›®çš„æ ¹è·¯ç”±ï¼š è¿™æ˜¯æ•´ä¸ªé¡¹ç›®çš„æ ¹è·¯ç”±ï¼Œæ‰€æœ‰å‘è¯¥é¡¹ç›®å‘é€çš„è¿žæŽ¥è¯·æ±‚ï¼Œé¦–å…ˆéœ€è¦ä»Žè¯¥è·¯ç”±é…ç½®é‡Œé¢è¿‡æ»¤ï¼Œå¦‚æžœåªæœ‰ä¸€ä¸ªåº”ç”¨ï¼Œæˆ–è€…è·¯ç”±é…ç½®ä¸å¤šä¸€ä¸ªæ ¹è·¯ç”±å°±è¶³å¤Ÿäº†ï¼Œä½†å½“ app å¤šèµ·æ¥ä¹‹åŽè¿˜æ˜¯ä½¿ç”¨ä¸€ä¸ªæ ¹è·¯ç”±é…ç½®ä¼šé€ æˆè·¯ç”±æ··ä¹±ï¼Œæ‰€ä»¥æœ‰äº†è·¯ç”±åˆ†å‘ï¼Œæ¯”å¦‚è¿™æ˜¯å‘å¾€app_01åº”ç”¨çš„è¿žæŽ¥ï¼Œé‚£ä¹ˆåœ¨æ ¹è·¯ç”±ä¸­è¿›è¡Œè·¯ç”±åˆ†å‘ï¼ŒæŠŠè¿žæŽ¥è½¬å‘app_01ä¸­çš„è·¯ç”±ä¸­è¿›è¡Œå¤„ç†ï¼Œè¿™å°±æ˜¯è·¯ç”±åˆ†å‘ã€‚ 123456789# æ ¹è·¯ç”±é…ç½®from django.conf.urls import url, includefrom app_01 import viewsfrom app_01 import urlsurlpatterns = [ # url(r'^app_01/', include('app_01.urls')), # æ³¨æ„å‰é¢çš„æ­£åˆ™è¡¨è¾¾å¼åŽé¢ä¸èƒ½åŠ $ url(r'^app_01/', include(urls)),] 1234567# åº”ç”¨è·¯ç”±é…ç½®from django.conf.urls import urlfrom app_01 import viewsurlpatterns = [ # url(r'^test/(?P&lt;year&gt;[0-9]&#123;2&#125;)/$', views.url_test),] åå‘è§£æžåœ¨ä½¿ç”¨ Django é¡¹ç›®æ—¶ï¼Œä¸€ä¸ªå¸¸è§çš„éœ€æ±‚æ˜¯èŽ·å¾— URL çš„æœ€ç»ˆå½¢å¼ï¼Œä»¥ç”¨äºŽåµŒå…¥åˆ°ç”Ÿæˆçš„å†…å®¹ä¸­ï¼ˆè§†å›¾ä¸­å’Œæ˜¾ç¤ºç»™ç”¨æˆ·çš„ URL ç­‰ï¼‰æˆ–è€…ç”¨äºŽå¤„ç†æœåŠ¡å™¨ç«¯çš„å¯¼èˆªï¼ˆé‡å®šå‘ç­‰ï¼‰ã€‚äººä»¬å¼ºçƒˆå¸Œæœ›ä¸è¦ç¡¬ç¼–ç è¿™äº› URLï¼ˆè´¹æ—¶è´¹åŠ›ã€ä¸å¯æ‰©å±•ä¸”æ˜“äº§ç”Ÿé”™è¯¯ï¼‰æˆ–è€…è®¾è®¡ä¸€ç§ä¸Ž URLconf æ¯«ä¸ç›¸å…³çš„ä¸“é—¨çš„ URL ç”Ÿæˆæœºåˆ¶ï¼Œå› ä¸ºè¿™æ ·å®¹æ˜“å¯¼è‡´ä¸€å®šç¨‹åº¦ä¸Šäº§ç”Ÿè¿‡æœŸçš„ URLã€‚ åœ¨éœ€è¦ URL çš„åœ°æ–¹ï¼Œå¯¹äºŽä¸åŒå±‚çº§ï¼ŒDjango æä¾›ä¸åŒçš„å·¥å…·ç”¨äºŽ URL åæŸ¥ï¼š åœ¨æ¨¡æ¿ä¸­ï¼šä½¿ç”¨ url æ¨¡æ¿æ ‡ç­¾ï¼› åœ¨ python ä»£ç ä¸­ï¼šä½¿ç”¨from django.urls import reverseã€‚ 1234567# urls.pyæ–‡ä»¶from django.urls import path, re_pathfrom app_01 import viewsurlpatterns = [ re_path(r'^test/(?P&lt;year&gt;[0-9]&#123;2&#125;)/(P?&lt;month&gt;[0-9]&#123;2&#125;)/$', views.url_test, name='test'),] &lt;a href=&quot;&amp;#123;% url &#39;test&#39; 10 23 %&amp;#125;&quot;&gt;å“ˆå“ˆ&lt;/a&gt; 123456# views.pyæ–‡ä»¶from django.shortcuts import render, HttpResponse, redirect, reversedef url_test(request, year, month): url = reverse('test', args=(10, 20)) return HttpResponse('ok') æ€»ç»“ï¼š åœ¨ html ä»£ç é‡Œé¢ä½¿ç”¨&amp;#123;% url &#39;åˆ«å&#39; å‚æ•° å‚æ•°... %&amp;#125;ï¼› åœ¨è§†å›¾å‡½æ•°ä¸­ï¼š url = reverse(&#39;test&#39;) url = reverse(&#39;test&#39;, args=(10, 20)) å½“å‘½å URL æ¨¡å¼æ—¶ï¼Œè¦ç¡®ä¿ä½¿ç”¨çš„åç§°ä¸ä¼šä¸Žå…¶ä»–åº”ç”¨ä¸­çš„åç§°äº§ç”Ÿå†²çªã€‚å¦‚æžœä½ çš„ URL æ¨¡å¼å«åš commentï¼Œè€Œå¦å¤–ä¸€ä¸ªåº”ç”¨ä¸­ä¹Ÿæœ‰ä¸€ä¸ªåŒæ ·çš„åå­—ï¼Œå½“ä½ åœ¨æ¨¡æ¿ä¸­ä½¿ç”¨è¿™ä¸ªåç§°çš„æ—¶å€™ä¸èƒ½ä¿è¯å°†æ’å…¥å“ªä¸ª URLã€‚åœ¨ URL åç§°åŠ ä¸Šä¸€ä¸ªå‰ç¼€ï¼Œæ¯”å¦‚åº”ç”¨çš„åç§°ï¼Œå°†ä¼šå‡å°‘å†²çªçš„å¯èƒ½ã€‚å»ºè®®ä½¿ç”¨myapp-commentã€‚ åç§°ç©ºé—´å‘½åç©ºé—´ï¼ˆnamespaceï¼‰æ˜¯è¡¨ç¤ºæ ‡è¯†ç¬¦çš„å¯è§èŒƒå›´ã€‚ä¸€ä¸ªæ ‡è¯†ç¬¦å¯åœ¨å¤šä¸ªå‘½åç©ºé—´ä¸­å®šä¹‰ï¼Œå®ƒåœ¨ä¸åŒå‘½åç©ºé—´ä¸­çš„å«ä¹‰æ˜¯äº’ä¸ç›¸å¹²çš„ã€‚è¿™æ ·åœ¨ä¸€ä¸ªæ–°çš„å‘½åç©ºé—´ä¸­å¯ä»¥å®šä¹‰ä»»ä½•æ ‡è¯†ç¬¦ï¼Œå®ƒä»¬ä¸ä¼šä¸Žä»»ä½•å·²æœ‰çš„æ ‡è¯†ç¬¦äº§ç”Ÿå†²çªï¼Œå› ä¸ºå·²æœ‰çš„å®šä¹‰å¤„äºŽå…¶ä»–çš„å‘½åç©ºé—´ä¸­ã€‚ ç”±äºŽnameæ²¡æœ‰ä½œç”¨åŸŸï¼ŒDjango åœ¨è¿”è§£ URL æ—¶ï¼Œä¼šåœ¨é¡¹ç›®çš„å…¨å±€è·¯å¾„ä¸­æŒ‰é¡ºåºæœç´¢ï¼Œå½“æŸ¥æ‰¾åˆ°ç¬¬ä¸€ä¸ªnameæŒ‡å®šçš„ URL æ—¶ï¼Œç«‹å³è¿”å›žã€‚ åœ¨å¼€å‘é¡¹ç›®æ—¶ï¼Œä¼šç»å¸¸ä½¿ç”¨nameå±žæ€§åè§£å‡º URLï¼Œå½“ä¸å°å¿ƒåœ¨ä¸åŒçš„ app çš„ urls ä¸­å®šä¹‰ç›¸åŒçš„nameæ—¶ï¼Œå¯èƒ½ä¼šå¯¼è‡´ URL åè§£é”™è¯¯ï¼Œä¸ºäº†é¿å…å‘ç”Ÿå¼•å…¥äº†å‘½åç©ºé—´ã€‚ åˆ›å»º app01å’Œ app02python manage.py startapp app01 python manage.py startapp app02 æ ¹è·¯ç”±123456from django.urls import path,re_path,includeurlpatterns = [ path('app01/', include('app01.urls')), path('app02/', include('app02.urls'))] app01çš„ urls.py123456from django.urls import path,re_pathfrom app01 import viewsurlpatterns = [ re_path(r'index/',views.index,name='index'),] app02çš„ urls.py123456from django.urls import path, re_path, includefrom app02 import viewsurlpatterns = [ re_path(r'index/', views.index,name='index'),] app01çš„è§†å›¾1234def index(request): url=reverse('index') print(url) return HttpResponse('index app01') app02çš„è§†å›¾1234def index(request): url=reverse('index') print(url) return HttpResponse('index app02') è¿™æ ·éƒ½æ‰¾index.htmlï¼Œapp01å’Œ app02æ‰¾åˆ°çš„éƒ½æ˜¯app02çš„ indexã€‚å¦‚ä½•å¤„ç†ï¼Ÿåœ¨è·¯ç”±åˆ†å‘çš„æ—¶å€™æŒ‡å®šåç§°ç©ºé—´ã€‚æ ¹è·¯ç”±åœ¨è·¯ç”±åˆ†å‘æ˜¯ï¼ŒæŒ‡å®šåç§°ç©ºé—´ã€‚ 1234567891011# ä¸€path('app01/', include(('app01.urls','app01'))),path('app02/', include(('app02.urls','app02')))# äºŒurl(r'app01/',include('app01.urls',namespace='app01')),url(r'app02/',include('app02.urls',namespace='app02'))# ä¸‰url(r'app01/',include(('app01.urls','app01'))),url(r'app02/',include(('app02.urls','app02'))) åœ¨è§†å›¾å‡½æ•°åå‘è§£æžçš„æ—¶å€™ï¼ŒæŒ‡å®šåç§°ç©ºé—´ï¼š 1234url=reverse('app02:index')print(url)url2=reverse('app01:index')print(url2) åœ¨æ¨¡æ¿é‡Œé¢ä¹Ÿæ˜¯ç”¨ç›¸åº”çš„åç§°ç©ºé—´åï¼š &lt;a href=&quot;&amp;#123;% url &#39;app02:index&#39;%&amp;#125;&quot;&gt;å“ˆå“ˆ&lt;/a&gt; Django2.0ç‰ˆçš„ pathDjango2.0çš„re_pathå’Œ1.0çš„urlä¸€æ ·ã€‚2.0å¤šäº†ä¸ªpath æ€è€ƒæƒ…å†µå¦‚ä¸‹ï¼š 123456urlpatterns = [ re_path('articles/(?P&lt;year&gt;[0-9]&amp;#123;4&amp;#125;)/', year_archive), re_path('article/(?P&lt;article_id&gt;[a-zA-Z0-9]+)/detail/', detail_view), re_path('articles/(?P&lt;article_id&gt;[a-zA-Z0-9]+)/edit/', edit_view), re_path('articles/(?P&lt;article_id&gt;[a-zA-Z0-9]+)/delete/', delete_view), ] è€ƒè™‘ä¸‹è¿™æ ·çš„ä¸¤ä¸ªé—®é¢˜ï¼š ç¬¬ä¸€ä¸ªé—®é¢˜ï¼Œå‡½æ•° year_archive ä¸­yearå‚æ•°æ˜¯å­—ç¬¦ä¸²ç±»åž‹çš„ï¼Œå› æ­¤éœ€è¦å…ˆè½¬åŒ–ä¸ºæ•´æ•°ç±»åž‹çš„å˜é‡å€¼ï¼Œå½“ç„¶year=int(year) ä¸ä¼šæœ‰è¯¸å¦‚å¦‚TypeErroræˆ–è€…ValueErrorçš„å¼‚å¸¸ã€‚é‚£ä¹ˆæœ‰æ²¡æœ‰ä¸€ç§æ–¹æ³•ï¼Œåœ¨urlä¸­ï¼Œä½¿å¾—è¿™ä¸€è½¬åŒ–æ­¥éª¤å¯ä»¥ç”±Djangoè‡ªåŠ¨å®Œæˆï¼Ÿ ç¬¬äºŒä¸ªé—®é¢˜ï¼Œä¸‰ä¸ªè·¯ç”±ä¸­article_idéƒ½æ˜¯åŒæ ·çš„æ­£åˆ™è¡¨è¾¾å¼ï¼Œä½†æ˜¯ä½ éœ€è¦å†™ä¸‰éï¼Œå½“ä¹‹åŽarticle_idè§„åˆ™æ”¹å˜åŽï¼Œéœ€è¦åŒæ—¶ä¿®æ”¹ä¸‰å¤„ä»£ç ï¼Œé‚£ä¹ˆæœ‰æ²¡æœ‰ä¸€ç§æ–¹æ³•ï¼Œåªéœ€ä¿®æ”¹ä¸€å¤„å³å¯ï¼Ÿ åœ¨Django2.0ä¸­ï¼Œå¯ä»¥ä½¿ç”¨ path è§£å†³ä»¥ä¸Šçš„ä¸¤ä¸ªé—®é¢˜ã€‚ åŸºæœ¬ç¤ºä¾‹12345678910from django.urls import path from . import views urlpatterns = [ path('articles/2003/', views.special_case_2003), path('articles/&lt;int:year&gt;/', views.year_archive), path('articles/&lt;int:year&gt;/&lt;int:month&gt;/', views.month_archive), path('articles/&lt;int:year&gt;/&lt;int:month&gt;/&lt;slug&gt;/', views.article_detail), # pathæ‰æ”¯æŒï¼Œre_pathä¸æ”¯æŒ path('order/&lt;int:year&gt;',views.order),] åŸºæœ¬è§„åˆ™ï¼š ä½¿ç”¨å°–æ‹¬å·(&lt;&gt;)ä»Ž urlä¸­æ•èŽ·å€¼ï¼› æ•èŽ·å€¼ä¸­å¯ä»¥åŒ…å«ä¸€ä¸ªè½¬åŒ–å™¨ç±»åž‹ï¼ˆconverter typeï¼‰ï¼Œæ¯”å¦‚ä½¿ç”¨&lt;int:name&gt;æ•èŽ·ä¸€ä¸ªæ•´æ•°å˜é‡ã€‚å¦‚æžœæ²¡æœ‰è½¬åŒ–å™¨ï¼Œå°†åŒ¹é…ä»»ä½•å­—ç¬¦ä¸²ï¼Œä¹ŸåŒ…å«/å­—ç¬¦ã€‚ æ— éœ€æ·»åŠ å‰å¯¼æ–œæ  ä»¥ä¸Šæ˜¯ç¤ºä¾‹ï¼Œåˆ†åˆ«å’Œä¸Šé¢çš„åŸºæœ¬ç¤ºä¾‹å¯¹åº”ï¼š path è½¬æ¢å™¨ strï¼šåŒ¹é…é™¤äº†è·¯å¾„åˆ†éš”ç¬¦ï¼ˆ/ï¼‰ä¹‹å¤–çš„éžç©ºå­—ç¬¦ä¸²ï¼Œè¿™æ˜¯é»˜è®¤çš„å½¢å¼ï¼› intï¼šåŒ¹é…æ­£æ•´æ•°ï¼ŒåŒ…å«0ï¼› slugï¼šåŒ¹é…å­—æ¯ã€æ•°å­—ã€æ¨ªæ ä»¥åŠä¸‹åˆ’çº¿ç»„æˆçš„å­—ç¬¦ä¸²ï¼› uuidï¼šåŒ¹é…æ ¼å¼åŒ–çš„uuidï¼Œå¦‚075194d3-6885-417e-a8a8-6c931e272f00ã€‚ pathï¼š åŒ¹é…ä»»ä½•éžç©ºå­—ç¬¦ï¼ŒåŒ…å«äº†è·¯å¾„åˆ†éš”ç¬¦ï¼ˆ/ï¼‰ æ³¨å†Œè‡ªå®šä¹‰è½¬åŒ–å™¨å¯¹äºŽä¸€äº›å¤æ‚æˆ–è€…å¤ç”¨çš„éœ€è¦ï¼Œå¯ä»¥å®šä¹‰è‡ªå·±çš„è½¬åŒ–å™¨ã€‚è½¬åŒ–å™¨æ˜¯ä¸€ä¸ªç±»æˆ–æŽ¥å£ï¼Œå®ƒçš„è¦æ±‚æœ‰ä¸‰ç‚¹ï¼š regexç±»å±žæ€§ï¼Œå­—ç¬¦ä¸²ç±»åž‹ï¼› to_python(self, value)æ–¹æ³•ï¼Œvalue æ˜¯ç”±ç±»å±žæ€§ regex æ‰€åŒ¹é…åˆ°çš„å­—ç¬¦ä¸²ï¼Œè¿”å›žå…·ä½“çš„ python å˜é‡å€¼ï¼Œä»¥ä¾› Django ä¼ é€’åˆ°å¯¹åº”çš„è§†å›¾å‡½æ•°ä¸­ï¼› to_url(self, value)æ–¹æ³•ï¼Œå’Œto_pythonç›¸åï¼Œvalue æ˜¯ä¸€ä¸ªå…·ä½“çš„ python å˜é‡å€¼ï¼Œè¿”å›žå…¶å­—ç¬¦ä¸²ï¼Œé€šå¸¸ç”¨äºŽ url åå‘å¼•ç”¨ã€‚ ç¤ºä¾‹12345678class FourDigitYearConverter: regex = '[0-9]&#123;4&#125;' def to_python(self, value): return int(value) def to_url(self, value): return '%04d' % value ä½¿ç”¨register_converterå°†å…¶æ³¨å†Œåˆ° URL é…ç½®ä¸­ï¼š 123456789from django.urls import register_converter, pathfrom . import converters, viewsregister_converter(converters.FourDigitYearConverter, 'yyyy')urlpatterns = [ path('articles/2003/', views.spwcial_case_2003), path('articles/&lt;yyyy:year&gt;/', views.year_archive),]]]></content>
      <categories>
        <category>Django</category>
      </categories>
  </entry>
  <entry>
    <title><![CDATA[Djangoï¼ˆäº”ï¼‰]]></title>
    <url>%2F2019%2F01%2F08%2FDjango%EF%BC%88%E4%BA%94%EF%BC%89%2F</url>
    <content type="text"><![CDATA[Django ç³»åˆ—åšå®¢ï¼ˆäº”ï¼‰å‰è¨€é€šè¿‡ä¸Šä¸€ç¯‡åšå®¢å­¦ä¹ äº† django å¤„ç†æ•°æ®çš„åè®® wsgiï¼ŒçŽ°åœ¨åº”è¯¥å¯ä»¥å­¦ä¹  python æ˜¯å¦‚ä½•å¤„ç†æ•°æ®çš„äº†ã€‚æ‰€ä»¥æœ¬ç¯‡åšå®¢ä»‹ç» Django çš„è¿è¡Œæ–¹å¼ä¸Žå¤„ç†æµç¨‹æ€»ç»“ã€‚å½“ç„¶è¿˜æ˜¯å€Ÿé‰´å­¦ä¹ å¤§ä½¬çš„åšå®¢ï¼Œæœ¬ç¯‡åšå®¢å‚è€ƒç‚¹å‡»ï¼Œè¿™ç¯‡åšå®¢æˆ‘çœ‹äº†ä¸‰éï¼Œæ„Ÿè§‰è¿˜æ˜¯æ²¡æœ‰å®Œå…¨æžæ‡‚ã€‚]]></content>
      <categories>
        <category>Django</category>
      </categories>
  </entry>
  <entry>
    <title><![CDATA[wsgi åè®®]]></title>
    <url>%2F2019%2F01%2F07%2Fwsgi%E5%8D%8F%E8%AE%AE%2F</url>
    <content type="text"><![CDATA[wsgi åè®®å‰è¨€æœ¬æ¥æ²¡æ‰“ç®—è¿™ä¹ˆæ—©å°±å­¦ä¹  wsgi çš„ï¼Œå› ä¸ºæƒ³è¦å­¦ä¹ python æ˜¯å¦‚ä½•å¤„ç†ç½‘ç»œè¯·æ±‚çš„ç»•ä¸å¼€ wsgiï¼Œæ‰€ä»¥åªå¥½å…ˆå­¦ä¹ ä¸€ä¸‹ wsgiã€‚å…ˆå¯¹ wsgi æœ‰ä¸ªå°è±¡ï¼Œåˆ°äº†å­¦ä¹  Django è¿è¡Œæ–¹å¼ä»¥åŠå¦‚ä½•å¤„ç†ç½‘ç»œè¯·æ±‚æ•°æ®çš„æ—¶å€™å°±ä¼šæ„Ÿè§‰å¾ˆé¡ºç•…äº†ã€‚æœ¬æ–‡å‚è€ƒ ä»€ä¹ˆæ˜¯ WSGIwsgi çš„å…¨ç§°æ˜¯Web Server Gateway Interfaceï¼Œè¿™æ˜¯ä¸€ä¸ªè§„èŒƒï¼Œæè¿°äº† web server å¦‚ä½•ä¸Ž web application äº¤äº’ã€web application å¦‚ä½•å¤„ç†è¯·æ±‚ã€‚è¯¥è§„èŒƒçš„å…·ä½“æè¿°åœ¨ PEP3333ã€‚WSGI æ—¢è¦å®žçŽ° web serverï¼Œä¹Ÿè¦å®žçŽ° web applicationã€‚åœ¨ Django ä¸­çš„ app å…¶å®žå°±æ˜¯ web applicationï¼Œè€Œ web serverå…¶å®žåœ¨ä½¿ç”¨å‘½ä»¤è¡Œè¾“å…¥python manage.py runserveræˆ–è€…ä½¿ç”¨ pycharm å¼€å¯ Django é¡¹ç›®çš„æ—¶å€™å°±æŠŠrunserverå½“åšå‚æ•°ä¼ ç»™äº† manage.pyé‡Œé¢ ç»è¿‡åˆ¤æ–­ç„¶åŽæ‰§è¡Œexecute_from_command_line(sys.argv)ï¼Œsys.argvå°±æ˜¯ runserverå‘½ä»¤ï¼Œè¿›å…¥è¯¥å‡½æ•°ï¼Œå‘çŽ°æ‰§è¡Œäº†utility.execute()å‡½æ•°ï¼Œè¿›å…¥å‡½æ•°æŸ¥çœ‹æºç ï¼š 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667686970717273def execute(self): """ Given the command-line arguments, this figures out which subcommand is being run, creates a parser appropriate to that command, and runs it. """ try: subcommand = self.argv[1] except IndexError: subcommand = 'help' # Display help if no arguments were given. # Preprocess options to extract --settings and --pythonpath. # These options could affect the commands that are available, so they # must be processed early. parser = CommandParser(None, usage="%(prog)s subcommand [options] [args]", add_help=False) parser.add_argument('--settings') parser.add_argument('--pythonpath') parser.add_argument('args', nargs='*') # catch-all try: options, args = parser.parse_known_args(self.argv[2:]) handle_default_options(options) except CommandError: pass # Ignore any option errors at this point. try: settings.INSTALLED_APPS except ImproperlyConfigured as exc: self.settings_exception = exc if settings.configured: # Start the auto-reloading dev server even if the code is broken. # The hardcoded condition is a code smell but we can't rely on a # flag on the command class because we haven't located it yet. if subcommand == 'runserver' and '--noreload' not in self.argv: try: autoreload.check_errors(django.setup)() except Exception: # The exception will be raised later in the child process # started by the autoreloader. Pretend it didn't happen by # loading an empty list of applications. apps.all_models = defaultdict(OrderedDict) apps.app_configs = OrderedDict() apps.apps_ready = apps.models_ready = apps.ready = True # Remove options not compatible with the built-in runserver # (e.g. options for the contrib.staticfiles' runserver). # Changes here require manually testing as described in # #27522. _parser = self.fetch_command('runserver').create_parser('django', 'runserver') _options, _args = _parser.parse_known_args(self.argv[2:]) for _arg in _args: self.argv.remove(_arg) # In all other cases, django.setup() is required to succeed. else: django.setup() self.autocomplete() if subcommand == 'help': if '--commands' in args: sys.stdout.write(self.main_help_text(commands_only=True) + '\n') elif len(options.args) &lt; 1: sys.stdout.write(self.main_help_text() + '\n') else: self.fetch_command(options.args[0]).print_help(self.prog_name, options.args[0]) # Special-cases: We want 'django-admin --version' and # 'django-admin --help' to work, for backwards compatibility. elif subcommand == 'version' or self.argv[1:] == ['--version']: sys.stdout.write(django.get_version() + '\n') elif self.argv[1:] in (['--help'], ['-h']): sys.stdout.write(self.main_help_text() + '\n') else: self.fetch_command(subcommand).run_from_argv(self.argv) æºç å¤ªé•¿äº†ã€‚ã€‚ã€‚æˆ‘æŠŠå…³é”®åœ°æ–¹æŠ å‡ºæ¥ï¼š 123456789101112131415161718192021222324252627if settings.configured: # Start the auto-reloading dev server even if the code is broken. # The hardcoded condition is a code smell but we can't rely on a # flag on the command class because we haven't located it yet. if subcommand == 'runserver' and '--noreload' not in self.argv: try: autoreload.check_errors(django.setup)() except Exception: # The exception will be raised later in the child process # started by the autoreloader. Pretend it didn't happen by # loading an empty list of applications. apps.all_models = defaultdict(OrderedDict) apps.app_configs = OrderedDict() apps.apps_ready = apps.models_ready = apps.ready = True # Remove options not compatible with the built-in runserver # (e.g. options for the contrib.staticfiles' runserver). # Changes here require manually testing as described in # #27522. _parser = self.fetch_command('runserver').create_parser('django', 'runserver') _options, _args = _parser.parse_known_args(self.argv[2:]) for _arg in _args: self.argv.remove(_arg) # In all other cases, django.setup() is required to succeed. else: django.setup() è¿™é‡Œä¹Ÿæ˜¯æ³¨é‡Šæœ€å¤šçš„åœ°æ–¹ï¼Œå¯ä»¥çœ‹åˆ°æœ‰runserverè¿™æ¡å‘½ä»¤ï¼Œç„¶åŽè¿™é‡Œé¢åœ¨ç»è¿‡ä¸€ç³»åˆ—çš„åˆ¤æ–­æœ€åŽè¦æ‰§è¡Œæœ€åŽä¸€è¡Œä»£ç ï¼š 1self.fetch_command(subcommand).run_from_argv(self.argv) è¿™è¡Œä»£ç ç­‰å­¦ä¹  Django å¤„ç†æµç¨‹çš„æ—¶å€™åœ¨è¯¦ç»†è§£é‡Šï¼Œåæ­£åªè¦çŸ¥é“ç›®å‰ç»è¿‡è¿™ä¸ªå‡½æ•°çš„æ‰§è¡Œï¼ŒDjango çš„ web server æˆåŠŸè¿è¡Œäº†ã€‚ å®žçŽ°äº† WSGI çš„æ¨¡å—/åº“æœ‰ wsgirefï¼ˆpython å†…ç½®ï¼Œä¸‹é¢ä¹Ÿæ˜¯ç”¨è¿™ä¸ªæ¥ä¸¾ä¾‹ï¼‰ã€werkzeug.servingã€twisted.webç­‰ã€‚ å½“å‰è¿è¡Œåœ¨ wsgi ä¹‹ä¸Šçš„ web æ¡†æž¶æœ‰ Bottleã€Flaskã€Django ç­‰ã€‚WSGI server æ‰€åšçš„å·¥ä½œä»…ä»…æ˜¯å°†å®¢æˆ·ç«¯æ”¶åˆ°çš„è¯·æ±‚ä¼ é€’ç»™ WSGI applicationï¼Œç„¶åŽå°† WSGI application çš„è¿”å›žå€¼ä½œä¸ºç›¸åº”ä¼ ç»™å®¢æˆ·ç«¯ã€‚WSGI application å¯ä»¥æ˜¯æ ˆå¼çš„ï¼Œè¿™ä¸ªæ ˆçš„ä¸­é—´éƒ¨åˆ†å«åšä¸­é—´ä»¶ï¼Œä¸¤ç«¯æ˜¯å¿…é¡»è¦å®žçŽ°çš„ application å’Œ serverã€‚æ‰€ä»¥å¯¹å®¢æˆ·ç«¯æ¥è¯´ï¼Œä¸­é—´ä»¶æ‰®æ¼”æœåŠ¡å™¨ï¼›å¯¹æœåŠ¡å™¨æ¥è¯´ï¼Œä¸­é—´ä»¶æ‰®æ¼”å®¢æˆ·ç«¯ã€‚åœ¨ Django ä¸­wsgi æ”¶åˆ°çš„æ•°æ®ç”¨ requestå¯¹è±¡è¡¨ç¤ºï¼Œè¦ä¼ ç»™å®¢æˆ·ç«¯çš„æ•°æ®ç”¨ Httpresponseå¯¹è±¡è¡¨ç¤ºã€‚ æ­å»ºä¸€ä¸ª wsgi æœåŠ¡åœ¨ä¸Šç« èŠ‚è¯´äº† python æœ‰ä¸ªå†…ç½®çš„ WSGI åº“å« wsgirefã€‚ é¦–å…ˆçœ‹ä¸‹é¡¹ç›®ç»“æž„ï¼š 1234# templatesä¸ºæ¨¡æ¿ï¼ˆHTMLï¼‰æ–‡ä»¶å¤¹# start.py ä¸ºé¡¹ç›®å…¥å£ï¼Œ# urls.py ä¸ºè·¯ç”±é…ç½®# views.py ä¸ºå…·ä½“å¤„ç†è·¯ç”±é€»è¾‘ä»£ç  start æ–‡ä»¶123456789101112131415161718192021222324252627282930313233343536# start.pyæ–‡ä»¶from wsgiref.simple_server import make_serverfrom urls import urlsdef app(env, response): # åœ¨è¿™é‡Œï¼Œ print(env) route = env['PATH_INFO'] print(response) # è®¾ç½®çŠ¶æ€ç ä¸Žå“åº”å¤´ response('200 OK', [('Content-type', 'text/html')]) # è®¾ç½®é”™è¯¯å¤„ç† data = urls['/error']() # è®¾ç½®è·¯ç”±å¤„ç† if route in urls: data = urls[route]() # è¿”å›žäºŒè¿›åˆ¶å“åº”ä½“ return [data]if __name__ == '__main__': # åˆ›å»ºæœåŠ¡å™¨å¯¹è±¡ server = make_server('', 8808, app) print('æœåŠ¡ï¼šhttp://localhost:8808') # æœåŠ¡ä¿æŒè¿è¡ŒçŠ¶æ€ server.serve_forever() # WSGI server æ˜¯ä¸€ä¸ª web serverï¼Œå…¶å¤„ç†ä¸€ä¸ª HTTP è¯·æ±‚çš„é€»è¾‘å¦‚ä¸‹ï¼š # iterable = app(env, response) # for date in iterable: # send data to client å…¶å®žè¿™ä¸ªæ¨¡å—åº•å±‚ä½¿ç”¨äº† sockserver æ¨¡å—ï¼Œæˆ‘å‰é¢çš„åšå®¢ä¹Ÿæœ‰ä»‹ç»ã€‚ç»è¿‡ make_serverå°±æˆåŠŸå¼€å¯äº†wsgi serverï¼Œç„¶åŽserver_forever()æ˜¯ä¸ºäº†å°†æœåŠ¡å™¨æŒç»­æŽ¥æ”¶å®¢æˆ·ç«¯è¯·æ±‚ï¼Œé‡‡ç”¨çš„æ˜¯è½®è¯¢æ–¹æ³•ï¼Œè¯¥æ–¹æ³•é‡Œé¢çš„å‚æ•° poll_interval=0.5ï¼Œé‡‡ç”¨çš„æ˜¯0.5ç§’è½®è¯¢ä¸€æ¬¡ï¼Œè½®è¯¢é‡‡ç”¨çš„æ˜¯ selectorå­¦åå«å¤šè·¯å¤ç”¨æŠ€æœ¯ã€‚ urls æ–‡ä»¶123456# urls.pyæ–‡ä»¶from views import *urls = &#123; '/index': index, # å‡½æ•°åœ°å€ '/error': error&#125; è¯¥æ–‡ä»¶å°±æ˜¯å¤„ç†è·¯ç”±çš„ï¼Œç„¶åŽå°†å¯¹åº”çš„è·¯ç”±æ˜ å°„åˆ°ç›¸åº”çš„é€»è¾‘å¤„ç†å‡½æ•°ã€‚ views æ–‡ä»¶123456789101112131415161718192021222324# å¤„ç†è¯·æ±‚çš„åŠŸèƒ½å‡½æ•°(å¤„ç†ç»“æžœè¿”å›žçš„éƒ½æ˜¯é¡µé¢ =&gt; åŠŸèƒ½å‡½æ•°)# åˆ©ç”¨ jinja2æ¥æ¸²æŸ“æ¨¡æ¿ï¼Œå°†åŽå°æ•°æ®ä¼ ç»™å‰å°from jinjia2 import Template# å¤„ç†ä¸»é¡µè¯·æ±‚def index(): with open('templates/index.html', 'r') as f: dt = f.read() tem = Template(dt) # å°†åŽå°æ•°æ®é€šè¿‡æ¨¡æ¿æ¸²æŸ“åŠŸèƒ½æ¸²æŸ“ä¼ ç»™å‰å°é¡µé¢ resp = tem.render(name='ä¸»é¡µ') return resp.encode('utf-8')# å¤„ç†å›¾æ ‡è¯·æ±‚def ico(): with open('favicon.ico', 'rb') as f: dt = f.read() return dt# å¤„ç†é”™è¯¯è¯·æ±‚def error(): return b'404' templatesè¯¥æ–‡ä»¶å¤¹é‡Œé¢æ”¾çš„ä¼ªè¦è¿”å›žç»™å‰ç«¯ç›¸å…³èµ„æºï¼Œæ¯”å¦‚index.html æµ‹è¯• index æµ‹è¯• error æµ‹è¯• WSGI applicationæŽ¥å£åœ¨ä¸Šé¢wsgi æœåŠ¡ä¸­çš„ app å°±æ˜¯ wsgi ä¸­çš„ applicationï¼Œè¯¥æŽ¥å£åº”è¯¥å®žçŽ°ä¸ºä¸€ä¸ªå¯è°ƒç”¨å¯¹è±¡ï¼Œä¾‹å¦‚å‡½æ•°ã€æ–¹æ³•ã€ç±»ã€å«__call__æ–¹æ³•çš„å®žä¾‹ã€‚è¿™ä¸ªå¯è°ƒç”¨å¯¹è±¡å¯ä»¥æŽ¥æ”¶ä¸¤ä¸ªå‚æ•°ï¼š ä¸€ä¸ªå­—å…¸ï¼Œè¯¥å­—å…¸å¯ä»¥åŒ…å«äº†å®¢æˆ·ç«¯è¯·æ±‚çš„ä¿¡æ¯ä»¥åŠå…¶ä»–ä¿¡æ¯ï¼Œå¯ä»¥è®¤ä¸ºæ˜¯è¯·æ±‚ä¸Šä¸‹æ–‡ï¼Œä¸€èˆ¬å«åš environmentï¼ˆåœ¨è¿™é‡Œæˆ‘å–åä¸º envï¼‰ï¼› ä¸€ä¸ªç”¨äºŽå‘é€ HTTP çŠ¶æ€ç ä¸Žå“åº”å¤´çš„å›žè°ƒå‡½æ•°ã€‚ï¼ˆå…·ä½“æ€Žä¹ˆå›žè°ƒçš„è¿˜ä¸æ¸…æ¥šï¼‰ åŒæ—¶ï¼Œå¯è°ƒç”¨å¯¹è±¡çš„è¿”å›žå€¼æ˜¯å“åº”ä½“ï¼ˆresponse bodyï¼‰ï¼Œå“åº”æ­£æ–‡æ˜¯å¯è¿­ä»£çš„ã€å¹¶åŒ…å«äº†å¤šä¸ªå­—ç¬¦ä¸²ã€‚ï¼ˆåŠ äº†ä¸­æ‹¬å·å¯ä»¥å‡å°‘è¿­ä»£æ¬¡æ•°ï¼Œæé«˜æ•ˆçŽ‡ï¼‰ æŠŠä¸Šé¢çš„ app ä»£ç æ‹·ä¸‹æ¥ï¼š 123456789101112131415161718def app(env, response): # åœ¨è¿™é‡Œï¼Œ print(env) route = env['PATH_INFO'] print(response) # è®¾ç½®çŠ¶æ€ç ä¸Žå“åº”å¤´ response('200 OK', [('Content-type', 'text/html')]) # è®¾ç½®é”™è¯¯å¤„ç† data = urls['/error']() # è®¾ç½®è·¯ç”±å¤„ç† if route in urls: data = urls[route]() # è¿”å›žäºŒè¿›åˆ¶å“åº”ä½“ return [data] å½“æˆ‘å¯¹æœåŠ¡ç«¯å‘èµ·è¯·æ±‚æ—¶ï¼Œä¼šæ‰“å°å‡º envï¼Œå¦‚ä¸‹ï¼š 1&#123;'PATH': '/Users/jingxing/Virtualenv/py3-env1/bin:/Users/jingxing/.nvm/versions/node/v4.9.1/bin:/Library/Frameworks/Python.framework/Versions/3.6/bin:/python_study/mongodb/bin://Volumes/python_study/mongodb/bin:/Library/Frameworks/Python.framework/Versions/3.6/bin:/usr/local/bin:/usr/bin:/bin:/usr/sbin:/sbin:/Applications/VMware Fusion.app/Contents/Public:/python_study/Applications/mongodb-osx-x86_64-3.6.3/bin::/usr/local/mysql/bin', 'PS1': '(py3-env1) ', 'VERSIONER_PYTHON_VERSION': '2.7', 'LS_OPTIONS': '--color=auto', 'LOGNAME': 'jingxing', 'XPC_SERVICE_NAME': 'com.jetbrains.pycharm.23248', 'PWD': '/Users/jingxing/django_project/day01', 'PYCHARM_HOSTED': '1', 'NODE_PATH': '/Users/jingxing/.nvm/versions/node/v4.9.1/lib/node_modules', 'PYCHARM_MATPLOTLIB_PORT': '62845', 'PYTHONPATH': '/Users/jingxing/django_project/day01:/Users/jingxing/django_project/day04:/Users/jingxing/django_project/day02:/Users/jingxing/PycharmProjects/youku/youkusecond:/Users/jingxing/django_project/day03:/Applications/PyCharm.app/Contents/helpers/pycharm_matplotlib_backend', 'NVM_CD_FLAGS': '', 'NVM_DIR': '/Users/jingxing/.nvm', 'SHELL': '/bin/bash', 'LSCOLORS': 'CxfxcxdxbxegedabagGxGx', 'PYTHONIOENCODING': 'UTF-8', 'VERSIONER_PYTHON_PREFER_32_BIT': 'no', 'USER': 'jingxing', 'CLICOLOR': 'Yes', 'TMPDIR': '/var/folders/yl/3drd7wf93f90sfkgpc2zg9cr0000gn/T/', 'SSH_AUTH_SOCK': '/private/tmp/com.apple.launchd.ujA3r16JUC/Listeners', 'VIRTUAL_ENV': '/Users/jingxing/Virtualenv/py3-env1', 'XPC_FLAGS': '0x0', 'PYTHONUNBUFFERED': '1', '__CF_USER_TEXT_ENCODING': '0x1F5:0x0:0x0', 'Apple_PubSub_Socket_Render': '/private/tmp/com.apple.launchd.gOrXw3Il2u/Render', 'LC_CTYPE': 'en_US.UTF-8', 'NVM_BIN': '/Users/jingxing/.nvm/versions/node/v4.9.1/bin', 'HOME': '/Users/jingxing', 'SERVER_NAME': 'jingxingdeMacBook-Pro.local', 'GATEWAY_INTERFACE': 'CGI/1.1', 'SERVER_PORT': '8808', 'REMOTE_HOST': '', 'CONTENT_LENGTH': '', 'SCRIPT_NAME': '', 'SERVER_PROTOCOL': 'HTTP/1.1', 'SERVER_SOFTWARE': 'WSGIServer/0.2', 'REQUEST_METHOD': 'GET', 'PATH_INFO': '/', 'QUERY_STRING': '', 'REMOTE_ADDR': '127.0.0.1', 'CONTENT_TYPE': 'text/plain', 'HTTP_HOST': '127.0.0.1:8808', 'HTTP_CONNECTION': 'keep-alive', 'HTTP_UPGRADE_INSECURE_REQUESTS': '1', 'HTTP_USER_AGENT': 'Mozilla/5.0 (Macintosh; Intel Mac OS X 10_14_2) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/71.0.3578.98 Safari/537.36', 'HTTP_ACCEPT': 'text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,image/apng,*/*;q=0.8', 'HTTP_ACCEPT_ENCODING': 'gzip, deflate, br', 'HTTP_ACCEPT_LANGUAGE': 'en-US,en;q=0.9,zh-CN;q=0.8,zh;q=0.7', 'HTTP_COOKIE': 'csrftoken=YjPgsyb6TW4fen2fxjy6DHzZYFlBU4SsAuE9AVqWRjLIhymeAlukqjVBpL7KTPPH', 'wsgi.input': &lt;_io.BufferedReader name=7&gt;, 'wsgi.errors': &lt;_io.TextIOWrapper name='&lt;stderr&gt;' mode='w' encoding='UTF-8'&gt;, 'wsgi.version': (1, 0), 'wsgi.run_once': False, 'wsgi.url_scheme': 'http', 'wsgi.multithread': True, 'wsgi.multiprocess': False, 'wsgi.file_wrapper': &lt;class 'wsgiref.util.FileWrapper'&gt;&#125; è¿™äº›å‚æ•°å€¼å¾—å…³æ³¨çš„ä¸ºï¼š PATH_INFOï¼šè·¯ç”±ä¿¡æ¯ï¼› SERVER_PORTï¼šç«¯å£ï¼› HTTP_HOSTï¼šipï¼› SERVER_PROTOCOLï¼šæœåŠ¡å™¨ç«¯é€šä¿¡åè®® å¯è¿­ä»£å“åº”åœ¨ app ä¸­å‘å®¢æˆ·ç«¯è¿”å›žæ•°æ®æ—¶ï¼Œå†™çš„ä¸º return [data]ï¼Œå¦‚æžœæ”¹ä¸ºreturn dateï¼Œè¿™å°†ä¼šå¯¼è‡´ WSGI ç¨‹åºçš„å“åº”å˜æ…¢ã€‚åŽŸå› æ˜¯å­—ç¬¦ä¸²dateä¹Ÿæ˜¯å¯è¿­ä»£çš„ï¼Œå®ƒçš„æ¯ä¸€æ¬¡è¿­ä»£åªèƒ½å¾—åˆ° 1bytes çš„æ•°æ®é‡ï¼Œè¿™ä¹Ÿæ„å‘³ç€æ¯ä¸€æ¬¡åªå‘å®¢æˆ·ç«¯å‘é€1bytes çš„æ•°æ®ï¼Œç›´åˆ°å‘é€å®Œæ¯•ä¸ºæ­¢ã€‚æ‰€ä»¥æŽ¨èä½¿ç”¨return [data]ã€‚è¿™é‡Œçš„æ•°æ®æ˜¯æ€Žä¹ˆè¿”å›žçš„ç›®å‰è¿˜ä¸æ¸…æ¥šï¼Œä¿ç•™ç–‘é—®ã€‚ã€‚ã€‚ å¦‚æžœå¯è¿­ä»£å“åº”å«æœ‰å¤šä¸ªå­—ç¬¦ä¸²ï¼Œé‚£ä¹ˆContent-Lengthåº”è¯¥æ˜¯è¿™äº›å­—ç¬¦ä¸²é•¿åº¦ä¹‹å’Œã€‚ è§£æž GET è¯·æ±‚è¿è¡Œ start.pyæ–‡ä»¶ï¼Œåœ¨æµè§ˆå™¨ä¸­è®¿é—®http://localhost:8808/?id=1&amp;name=musibiiï¼Œå¯ä»¥åœ¨å“åº”å†…å®¹ä¸­æ‰¾åˆ°åˆ°ï¼š 12'QUERY_STRING': 'id=1&amp;name=musibii''REQUEST_METHOD': 'GET' cgi.parse_qs()å‡½æ•°å¯ä»¥å¾ˆæ–¹ä¾¿çš„å¤„ç† QUERY_STRINGï¼ŒåŒæ—¶éœ€è¦cgi.escape()å¤„ç†ç‰¹æ®Šå­—ç¬¦ä»¥é˜²æ­¢è„šæœ¬æ³¨å…¥ï¼Œå¦‚ä¸‹ï¼š 12345678from cgi import parse_qs, escapeQUERY_STRING = 'id=1&amp;name=musibii'd = parse_qs(QUERY_STRING)print(d.get('id', [''])[0]) # ['']æ˜¯é»˜è®¤å€¼ï¼Œå¦‚æžœåœ¨QUERY_STRINGä¸­æ²¡æ‰¾åˆ°åˆ™è¿”å›žé»˜è®¤å€¼print(d.get('name',[]))print(escape('&lt;script&gt;alert(123);&lt;/script&gt;')) è¿è¡Œç»“æžœï¼š 1231['musibii']&amp;lt;script&amp;gt;alert(123);&amp;lt;/script&amp;gt; å¤„ç† GET è¯·æ±‚çš„åŠ¨æ€ç½‘é¡µ123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566from wsgiref.simple_server import make_serverfrom cgi import parse_qs, escape# htmlä¸­ form çš„ method é»˜è®¤ä¸º getï¼Œaction æ˜¯å½“å‰é¡µé¢html = '''&lt;html&gt;&lt;body&gt; &lt;form method="get" action=""&gt; &lt;p&gt; Age: &lt;input type="text" name="age" value="%(age)s"&gt; &lt;/p&gt; &lt;p&gt; Hobbies: &lt;input name="hobbies" type="checkbox" value="software" %(checked-software)s &gt; Software &lt;input name="hobbies" type="checkbox" value="tunning" %(checked-tunning)s &gt; Auto Tunning &lt;/p&gt; &lt;p&gt; &lt;input type="submit" value="Submit"&gt; &lt;/p&gt; &lt;/form&gt; &lt;p&gt; Age: %(age)s&lt;br&gt; Hobbies: %(hobbies)s &lt;/p&gt;&lt;/body&gt;&lt;/html&gt;'''def app(env, response): # è§£æžQUERY_STRING d = parse_qs(env['QUERY_STRING']) age = d.get('age', [''])[0] # è¿”å›ž age å¯¹åº”çš„å€¼ hobbies = d.get('hobbies', []) # ä»¥ list å½¢å¼è¿”å›žæ‰€æœ‰çš„ hobbies # é˜²æ­¢è„šæœ¬æ³¨å…¥ age = escape(age) hobbies = [escape(hobby) for hobby in hobbies] response_body = html% &#123; 'checked-software': ('', 'checket')['software' in hobbies], 'checked-tunning': ('', 'checked')['tunning' in hobbies], 'age': age or 'Empty', 'hobbies': ','.join(hobbies or ['No Hobbies?']) &#125; status = '200 OK' response_body = [ ('Content-Type', 'text/html'), ('Content-Length', str(len(response_body))) ] start_response(status, response_headers) return [response_body]httpd = make_server('', 8088, app)httpd.serve_forever() å¤„ç† POST è¯·æ±‚çš„åŠ¨æ€ç½‘é¡µå¯¹äºŽPOST è¯·æ±‚ï¼ŒæŸ¥è¯¢å­—ç¬¦ä¸²æ˜¯æ”¾åœ¨ HTTP è¯·æ±‚æ­£æ–‡ï¼ˆrequest bodyï¼‰æœ«å°¾çš„ï¼Œä¸æ˜¯æ˜¾å¼åœ¨ url ä¸­ã€‚è¯·æ±‚æ­£æ–‡åœ¨ env å­—å…¸å˜é‡ä¸­é”®ä¸ºwsgi.inputå¯¹åº”çš„å€¼ä¸­ï¼Œè¿™æ˜¯ä¸€ä¸ªç±»ä¼¼ file çš„å˜é‡ï¼š 1'wsgi.input': &lt;_io.BufferedReader name=7&gt; æˆ‘çœ‹æºç çœ‹æ™•äº†è¿˜æ˜¯æ²¡æ‰¾åˆ°è¿™ä¸ª name å…·ä½“æ˜¯ä»€ä¹ˆæ„æ€ï¼Œç»è¿‡ google çŒœæµ‹è¿™ä¸ªåº”è¯¥æ˜¯ä¸ªæ ‡è¯†ç¬¦ã€‚ 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667686970717273from wsgiref.simple_server import make_serverfrom cgi import parse_qs, escape# htmlä¸­formçš„methodæ˜¯posthtml = """&lt;html&gt;&lt;body&gt; &lt;form method="post" action=""&gt; &lt;p&gt; Age: &lt;input type="text" name="age" value="%(age)s"&gt; &lt;/p&gt; &lt;p&gt; Hobbies: &lt;input name="hobbies" type="checkbox" value="software" %(checked-software)s &gt; Software &lt;input name="hobbies" type="checkbox" value="tunning" %(checked-tunning)s &gt; Auto Tunning &lt;/p&gt; &lt;p&gt; &lt;input type="submit" value="Submit"&gt; &lt;/p&gt; &lt;/form&gt; &lt;p&gt; Age: %(age)s&lt;br&gt; Hobbies: %(hobbies)s &lt;/p&gt;&lt;/body&gt;&lt;/html&gt;"""def application(environ, start_response): # CONTENT_LENGTH å¯èƒ½ä¸ºç©ºï¼Œæˆ–è€…æ²¡æœ‰ try: request_body_size = int(environ.get('CONTENT_LENGTH', 0)) except (ValueError): request_body_size = 0 request_body = environ['wsgi.input'].read(request_body_size) d = parse_qs(request_body) # èŽ·å–æ•°æ® age = d.get('age', [''])[0] hobbies = d.get('hobbies', []) # è½¬ä¹‰ï¼Œé˜²æ­¢è„šæœ¬æ³¨å…¥ age = escape(age) hobbies = [escape(hobby) for hobby in hobbies] response_body = html % &#123; 'checked-software': ('', 'checked')['software' in hobbies], 'checked-tunning': ('', 'checked')['tunning' in hobbies], 'age': age or 'Empty', 'hobbies': ', '.join(hobbies or ['No Hobbies?']) &#125; status = '200 OK' response_headers = [ ('Content-Type', 'text/html'), ('Content-Length', str(len(response_body))) ] start_response(status, response_headers) return [response_body]httpd = make_server('localhost', 8051, application)httpd.serve_forever() ä¸­é—´ä»¶ä¸­é—´ä»¶ä½äºŽ WSGI server å’Œ WSGI application ä¹‹é—´ã€‚æ‰€ä»¥å¯¹å®¢æˆ·ç«¯æ¥è¯´ï¼Œä¸­é—´ä»¶æ‰®æ¼”æœåŠ¡å™¨ï¼›å¯¹æœåŠ¡å™¨æ¥è¯´ï¼Œä¸­é—´ä»¶æ‰®æ¼”å®¢æˆ·ç«¯ã€‚åœ¨ Django ä¸­wsgi æ”¶åˆ°çš„æ•°æ®ç”¨ requestå¯¹è±¡è¡¨ç¤ºï¼Œè¦ä¼ ç»™å®¢æˆ·ç«¯çš„æ•°æ®ç”¨ Httpresponseå¯¹è±¡è¡¨ç¤ºã€‚ ç¤ºä¾‹ï¼š 123456789101112131415161718192021222324252627282930from wsgiref.simple_server import make_serverdef application(environ, start_response): response_body = 'hello world!' status = '200 OK' response_headers = [ ('Content-Type', 'text/plain'), ('Content-Length', str(len(response_body))) ] start_response(status, response_headers) return [response_body]# ä¸­é—´ä»¶class Upperware: def __init__(self, app): self.wrapped_app = app def __call__(self, environ, start_response): for data in self.wrapped_app(environ, start_response): yield data.upper()wrapped_app = Upperware(application)httpd = make_server('localhost', 8051, wrapped_app)httpd.serve_forever()]]></content>
  </entry>
  <entry>
    <title><![CDATA[Djangoï¼ˆå››ï¼‰]]></title>
    <url>%2F2019%2F01%2F07%2FDjango%EF%BC%88%E5%9B%9B%EF%BC%89%2F</url>
    <content type="text"><![CDATA[Django ç³»åˆ—åšå®¢ï¼ˆå››ï¼‰å‰è¨€æœ¬ç¯‡åšå®¢ä»‹ç» django å¦‚ä½•å’Œæ•°æ®åº“è¿›è¡Œäº¤äº’å¹¶ä¸”é€šè¿‡ model è¿›è¡Œæ•°æ®çš„å¢žåˆ æŸ¥æ”¹ ORMç®€ä»‹ORMå…¨ç§°æ˜¯ï¼šObject Relational Mapping(å¯¹è±¡å…³ç³»æ˜ å°„)ï¼Œå…¶ä¸»è¦ä½œç”¨æ˜¯åœ¨ç¼–ç¨‹ä¸­ï¼ŒæŠŠé¢å‘å¯¹è±¡çš„æ¦‚å¿µè·Ÿæ•°æ®åº“ä¸­è¡¨çš„æ¦‚å¿µå¯¹åº”èµ·æ¥ã€‚ä¸¾ä¾‹æ¥è¯´å°±æ˜¯ï¼Œæˆ‘å®šä¹‰ä¸€ä¸ªå¯¹è±¡ï¼Œé‚£å°±å¯¹åº”ç€ä¸€å¼ è¡¨ï¼Œè¿™ä¸ªå¯¹è±¡çš„å®žä¾‹ï¼Œå°±å¯¹åº”ç€è¡¨ä¸­çš„ä¸€æ¡è®°å½•ã€‚ æ¯”å¦‚åœ¨å¤§åé¼Žé¼Žçš„ pythonWEB æ¡†æž¶ Django å°±æ˜¯ä½¿ç”¨äº†å¯¹è±¡å…³ç³»æ˜ å°„ï¼Œè¿™ä¸ªå¯¹åº” Django ä¸­çš„ modelæ–‡ä»¶ã€‚ 12345678from django.db import models# Create your models here.class UserInfo(models.Model): id = models.AutoField(primary_key=True) name = models.CharField(max_length=32) pwd = models.CharField(max_length=32) é€šè¿‡å¯¹è±¡å…³ç³»æ˜ å°„ï¼Œè¿™ä¸ªç±»å°±ä¼šå¯¹åº”æ•°æ®åº“ä¸­çš„ UserInfo è¡¨ï¼Œé‡Œé¢æœ‰ä¸‰ä¸ªå­—æ®µï¼Œid ä¸ºè‡ªå¢žå¹¶ä¸”ä¸ºä¸»é”®ï¼Œå¦å¤–ä¸¤ä¸ªä¸º name å’Œ pwd å­—æ®µï¼Œéƒ½æ˜¯å¯å˜é•¿ç±»åž‹ã€‚ é€šè¿‡ orm å’Œæ•°æ®åº“è¿›è¡Œäº¤äº’è¿›è¡Œå¢žåˆ æŸ¥æ”¹ï¼ŒèŽ·å–çš„æ•°æ®ä¼šåœ¨ views æ–‡ä»¶ä¸­æ¥è¿›è¡Œé€»è¾‘åˆ¤æ–­ã€‚ æ•°æ®è¿”å›žå½“å‰åŽç«¯è¿›è¡Œäº¤äº’åŽéœ€è¦å¾€å‰ç«¯ä¼ é€æ•°æ®ï¼Œåœ¨ Django ä¸­æœ‰ä¸‰ç§æ–¹å¼ï¼š renderï¼šè¿”å›žä¸€ä¸ªæ¨¡æ¿ï¼ˆé¡µé¢ï¼‰ è¯¥å‡½æ•°æœ‰äº”ä¸ªå‚æ•°ï¼š requestï¼šè¿™æ˜¯å‰ç«¯å‘è¿‡æ¥çš„æ•°æ®é›†åˆï¼Œé‡Œé¢å¯ä»¥èŽ·å–è¡¨å•ä¸­çš„æ•°æ®ï¼Œæˆ–è€…èŽ·å–è¯·æ±‚æ–¹å¼ã€çŠ¶æ€ç ç­‰ï¼› template_nameï¼šè¿™ä¸ªæ˜¯æ¨¡æ¿åç§°ï¼Œæ¨¡æ¿ä¸º templates ä¸­çš„ index æ–‡ä»¶ï¼› contextï¼šå†…å®¹ï¼Œéœ€è¦è¿”å›žçš„æ•°æ®ï¼Œé»˜è®¤ä¸º Noneï¼› content_typeï¼šæ•°æ®å†…å®¹ç±»åž‹ï¼Œé»˜è®¤ä¸º Noneï¼› usingï¼šæœªçŸ¥ã€‚ å½“è°ƒç”¨è¿™ä¸ªå‡½æ•°æ—¶ï¼Œä¼šæ‰¾åˆ°æ¨¡æ¿æ–‡ä»¶ï¼Œæ‰“å¼€ï¼Œå¦‚æžœ context ä¸ä¸ºç©ºçš„è¯ï¼Œå°±ä¼šç”¨ django çš„æ¨¡æ¿æ¸²æŸ“æ–¹å¼å°†æ•°æ®åŠ åˆ°æ¨¡æ¿ä¸­ï¼Œç„¶åŽè¿”å›žç»™å‰ç«¯ã€‚ contentä¸ºç»è¿‡loader.render_to_stringåŠ å·¥åŽçš„æ•°æ®ï¼Œç„¶åŽç»è¿‡ HttpResponse ç±»çš„å®žä¾‹åŒ–ç”Ÿæˆä¸€ä¸ªå¯¹è±¡è¿”å›žç»™å‰ç«¯ï¼Œé‚£ä¹ˆåœ¨å‰ç«¯å¯ä»¥é€šè¿‡å¯¹è±¡çš„ç‚¹è¯­æ³•è¿›è¡Œå–å€¼ã€‚ redirectï¼šé‡å®šå‘åˆ°æŸä¸ªåœ°å€ æŸ¥çœ‹æºç å¯çŸ¥ï¼Œé¦–å…ˆåœ¨ redirect å‡½æ•°ä¸­è¿›è¡Œäº†åˆ¤æ–­ï¼Œå‡è®¾è¯¥å‡½æ•°æ²¡æœ‰å‚æ•°ï¼Œåªæœ‰ä¸€ä¸ªé‡å®šå‘è·¯å¾„ï¼Œä¹Ÿå°±æ˜¯ to è¿™ä¸ªå‚æ•°ï¼Œé‚£ä¹ˆ redirect_classä¸º HttpResponseRedirect ç±»ï¼Œç„¶åŽè¿›è¡Œå®žä¾‹åŒ–è¿”å›žã€‚ æŸ¥çœ‹ resolve_rulæºç ï¼Œåœ¨é‡Œé¢å¯¹ to å˜é‡è¿›è¡Œäº†ä¸€äº›åˆ¤æ–­ç­‰å·¥ä½œç„¶åŽå†è¿”å›žï¼Œè¿”å›žä¹‹åŽç»è¿‡ redirect_classç±»ï¼ˆåœ¨è¿™é‡Œä¹Ÿå°±æ˜¯ HTTPResponseRedirectï¼‰è¿›è¡Œå®žä¾‹åŒ–ï¼Œ æŸ¥çœ‹æºç ï¼š å‘çŽ°çŠ¶æ€ç ä¸º302ï¼Œç„¶åŽè¿›å…¥ HTTPResponseRedirectBaseï¼ŒæŸ¥çœ‹æºç ï¼š ç»è¿‡ HTTPResponseRedirect å®žä¾‹åŒ–å¾—å¯¹è±¡è¿”å›žåˆ°å‰ç«¯ã€‚ HttpResponseï¼šè¿”å›žå­—ç¬¦ä¸²ã€‚ è¿™ä¸ªç±»ä¹Ÿæ˜¯ render å’Œ redirect éœ€è¦è°ƒç”¨çš„ç±»æ¥å®žä¾‹åŒ–å¯¹è±¡ã€‚ä¸è¿‡ç›´æŽ¥ç”± HttpResponse ç±»ç”Ÿæˆçš„å¯¹è±¡æ˜¯å­—ç¬¦ä¸²ï¼Œæ²¡æœ‰é¡µé¢æ˜¾ç¤ºã€‚ ORM è¿žæŽ¥æ•°æ®åº“ORM è¿žæŽ¥ sqlite3 é…ç½® settings æ–‡ä»¶ å…¶å®žä¸ç”¨é…ç½®ï¼Œé»˜è®¤å°±æ˜¯è¿žæŽ¥ sqlite3 åœ¨ settings é‡Œé¢æœ‰ä¸ªæ•°æ®åº“é…ç½®é€‰é¡¹ï¼š 12345DATABASES = &#123; 'default': &#123; 'ENGINE': 'django.db.backends.sqlite3', 'NAME': os.path.join(BASE_DIR, 'db.sqlite3'), &#125;&#125; å¯ä»¥çŸ¥é“ django é»˜è®¤çš„æ•°æ®åº“å¼•æ“Žä¸º sqlite3ï¼Œæ•°æ®åº“åå­—ä¸ºæ•°æ®åº“çš„è·¯å¾„ã€‚è¿žæŽ¥æ•°æ®åˆ†ä¸ºä¸¤æ­¥ï¼š åœ¨ models ä¸­åˆ›å»ºç±»å’Œå­—æ®µ 12345678from django.db import models# Create your models here.class UserInfo(models.Model): id = models.AutoField(primary_key=True) name = models.CharField(max_length=32) pwd = models.CharField(max_length=32) æŠŠè¡¨åŒæ­¥åˆ°æ•°æ®åº“ï¼ˆå› ä¸º orm ä¸èƒ½åˆ›å»ºè¡¨ï¼Œæ‰€ä»¥éœ€è¦æ‰‹åŠ¨åˆ›å»ºä¸€ä¸ªå¯¹åº”çš„æ•°æ®åº“ï¼‰ã€‚åˆ›å»ºå®ŒæˆåŽåœ¨é¡¹ç›®æ ¹ç›®å½•ä¸‹è¿è¡Œä¸¤æ¡å‘½ä»¤ã€‚ python3 manage.py makemigrations è¿™æ¡å‘½ä»¤å¹¶æ²¡æœ‰å°† models ä¸­çš„è¡¨åŒæ­¥åˆ°æ•°æ®åº“ï¼Œåªæ˜¯åœ¨ migrations ä¸­åšäº†ä¸€ä¸ªè®°å½•ï¼Œå¹¶ä¸”ä¼šåœ¨ migrations æ–‡ä»¶å¤¹ä¸­ç”Ÿæˆä¸€ä¸ª0001_initial.pyæ–‡ä»¶ 123456789101112131415161718192021222324# -*- coding: utf-8 -*-# Generated by Django 1.11.9 on 2019-01-07 06:59from __future__ import unicode_literalsfrom django.db import migrations, modelsclass Migration(migrations.Migration): initial = True dependencies = [ ] operations = [ migrations.CreateModel( name='UserInfo', fields=[ ('id', models.AutoField(primary_key=True, serialize=False)), ('name', models.CharField(max_length=32)), ('pwd', models.CharField(max_length=32)), ], ), ] python3 manage.py migrate å°†æ•°æ®è¡¨åŒæ­¥åˆ°æ•°æ®åº“ä¸­ ç»è¿‡è¿™ä¸¤æ­¥ä¼šåœ¨æ•°æ®åº“ä¸­åˆ›å»ºå‡ºæ¥ä¸€äº›è¡¨ï¼š è¿™äº›è¡¨éƒ½æ˜¯ä»€ä¹ˆæ„æ€å‘¢ï¼Ÿ ç¬¬ä¸€å¼ è¡¨app_userinfoä¸º models ä¸­åˆ›å»ºçš„ç±»æ‰€å¯¹åº”çš„è¡¨ï¼ˆmysql ä¸åŒºåˆ†å¤§å°å†™ï¼‰ï¼Œå¹¶ä¸”ä¼šè‡ªåŠ¨å°† app çš„åå­—æ‹¼æŽ¥åˆ°è¡¨åä¹‹å‰ï¼Œä¹‹åŽ auth å¼€å¤´çš„è¡¨ç¤ºå…³äºŽè®¤è¯çš„è¡¨ï¼Œdjango å¼€å¤´çš„è¡¨ç¤º django è®¤è¯çš„è¡¨ï¼Œç›®å‰æ¥è¯´ä¸ç”¨å…³å¿ƒã€‚ ORM è¿žæŽ¥Mysqlè¿žæŽ¥ mysql ä¹Ÿå¾ˆç®€å•ï¼Œæ¯”è¿žæŽ¥ sqlite3å¤šäº†ä¸¤æ­¥ï¼Œå¹¶ä¸”è¿™ä¸¤æ­¥æ˜¯åœ¨ä¹‹å‰å°±è¦è¿›è¡Œçš„ã€‚ é…ç½® settings æ–‡ä»¶ å› ä¸ºæ˜¯è¿žæŽ¥ mysqlï¼Œæ‰€ä»¥ settings ä¸­çš„æ•°æ®åº“éœ€è¦æ›´æ”¹é…ç½®ã€‚ 12345678910DATABASES = &#123; 'default': &#123; 'ENGINE': 'django.db.backends.mysql', 'NAME': 'django_03', 'HOST': '127.0.0.1', 'PORT': 3306, 'USER': 'root', 'PASSWORD': 'password' &#125;&#125; æ³¨æ„ï¼šdefault å¯¹åº”çš„value ä¸­çš„ key å¿…é¡»ä½¿ç”¨å¤§å†™ï¼Œå…¶ä»–é™¤äº† ENGINE ä¸€æ ·å¤–ï¼Œå…¶ä»–çš„å‚æ•°éƒ½éœ€è¦æ ¹æ®è‡ªèº«çš„æ•°æ®åº“æ¥é…ç½®ã€‚é…ç½®æˆåŠŸåŽå¯ä»¥é€šè¿‡ pycharm è‡ªå¸¦çš„æ•°æ®åº“æ¨¡å—æ¥è¿›è¡Œæµ‹è¯•æ˜¯å¦è¿žæŽ¥æˆåŠŸï¼š è¿žæŽ¥æˆåŠŸä¼šæ˜¾ç¤º successfulã€‚ é…ç½® app ä¸‹çš„ init æ–‡ä»¶ï¼Œä¸è¦å†™é”™åœ°æ–¹äº† 123import pymysqlpymysql.install_as_MySQLdb() åœ¨ models ä¸­åˆ›å»ºç±»å’Œå­—æ®µ å’Œ sqlite3çš„ä¸€æ ·ï¼Œ 12345678from django.db import models# Create your models here.class UserInfo(models.Model): id = models.AutoField(primary_key=True) name = models.CharField(max_length=32) pwd = models.CharField(max_length=32) æŠŠè¡¨åŒæ­¥åˆ°æ•°æ®åº“ 1234#æ•°æ®åº“è¡¨å¹¶æ²¡æœ‰åŒæ­¥åˆ°æ•°æ®åº“ï¼Œåªæ˜¯åœ¨migrationså†…åšäº†ä¸€ä¸ªè®°å½•-python3 manage.py makemigrations#æ‰å°†æ•°æ®è¡¨åŒæ­¥åˆ°æ•°æ®åº“-python3 mangae.py migrate ä½¿ç”¨ orm è¿›è¡Œå¢žåˆ æŸ¥æ”¹å’Œæ•°æ®åº“è¿žæŽ¥æˆåŠŸåŽï¼Œå¯ä»¥é€šè¿‡è¡¨æ‰€å¯¹åº”çš„å¯¹è±¡æ¥è¿›è¡Œæ“ä½œï¼Œåœ¨æœ¬æ–‡çš„æ•°æ®åº“å¯¹è±¡å°±æ˜¯UserInfo.objectï¼Œæ‰“å°å‡ºæ¥å¯çŸ¥è¯¥å¯¹è±¡æ˜¯app.UserInfo.objectsç±» é€šè¿‡è¿™ä¸ªè¿™ä¸ªç±»ï¼ˆå¯¹åº”æ•°æ®åº“ä¸­çš„è¡¨ï¼‰å¯ä»¥æ“ä½œæ•°æ®åº“ å¢ž1234# è¯¥è¡¨æœ‰ä¸¤ä¸ªä¸‰ä¸ªå­—æ®µï¼Œå…¶ä¸­ id æ˜¯è‡ªå¢žå¯ä»¥ä¸ç”¨ä¼ å€¼name = 'musibii'pwd = '123'UserInfo.objects.create(name=name, pwd=pwd) åˆ 12# æ¯”å¦‚ id ä¸º1ï¼Œæƒ³è¦åˆ é™¤ä¸€ä¸ªæ•°æ®é¦–å…ˆéœ€è¦æ ¹æ® id èŽ·å–æ•°æ®UserInfo.objects.filter(id=1).delete() æŸ¥æŸ¥ä¸€ä¸ª12ret = UserInfo.object.filter(id=1).first()print(ret) æŸ¥å¤šä¸ª1ret = UserInfo.objects.all() æ”¹123name = 'maffia'pwd = 'abc'ret = UserInfo.objects.filter(id=1).update(name=name, pwd=pwd)]]></content>
      <categories>
        <category>Django</category>
      </categories>
  </entry>
  <entry>
    <title><![CDATA[Djangoï¼ˆä¸‰ï¼‰]]></title>
    <url>%2F2019%2F01%2F05%2FDjango%EF%BC%88%E4%B8%89%EF%BC%89%2F</url>
    <content type="text"><![CDATA[Django ç³»åˆ—åšå®¢ï¼ˆä¸‰ï¼‰å‰è¨€æœ¬ç¯‡åšå®¢ä»‹ç» django çš„å‰åŽç«¯äº¤äº’åŠå¦‚ä½•å¤„ç† get è¯·æ±‚å’Œ post è¯·æ±‚ã€‚ get è¯·æ±‚getè¯·æ±‚æ˜¯å•çº¯çš„è¯·æ±‚ä¸€ä¸ªé¡µé¢èµ„æºï¼Œä¸€èˆ¬ä¸å»ºè®®è¿›è¡Œè´¦å·ä¿¡æ¯çš„ä¼ è¾“ã€‚ é…ç½®è·¯ç”±1234567891011121314from django.conf.urls import urlfrom django.contrib import adminimport app.views as app_viewsimport newApp.views as new_viewsurlpatterns = [ url(r'^admin/', admin.site.urls), url(r'^$', app_views.home), # è·¯ç”±é‡‡ç”¨æ­£åˆ™åŒ¹é…, ^ä»¥ä»€ä¹ˆå¼€å¤´ $ä»¥ä»€ä¹ˆç»“æžœ # æ³¨: å½“è·¯ç”±æ²¡æœ‰å­è·¯ç”±æ˜¯,æ‰åœ¨æœ«å°¾æ·»åŠ $ url(r'^index/$', app_views.index), url(r'login', app_views.login_action), url(r'^new/index/$', new_views.index)] é…ç½®è§†å›¾12345678910111213141516171819202122from django.shortcuts import render, redirectfrom django.http import HttpResponse# Create your views here.# æ¯ä¸€ä¸ªè¯·æ±‚,éƒ½å¯¹åº”ä¸€ä¸ªè§†å›¾å“åº”å‡½æ•°,æ¥å‡ºçŽ°è¯·æ±‚,å®Œæˆå“åº”# def index(abc):# return HttpResponse('hello django') # ç¬¬ä¸€ä¸ªå“åº”import django.core.handlers.wsgidef login_action(request): return render(request, 'login.html') # ç¬¬ä¸€ä¸ªå“åº”é¡µé¢# def home(request):# return redirect('/index/') # ç¬¬ä¸€ä¸ªé‡å®šå‘def home(request): return render(request, 'index.html')def index(request): return redirect('/') é…ç½®é¡µé¢èµ„æº12345678910&lt;!DOCTYPE html&gt;&lt;html&gt;&lt;head&gt; &lt;meta charset="UTF-8"&gt; &lt;title&gt;ä¸»é¡µ&lt;/title&gt;&lt;/head&gt;&lt;body&gt; &lt;h1 style="text-align: center"&gt;appçš„ä¸»é¡µ&lt;/h1&gt;&lt;/body&gt;&lt;/html&gt; 12345678910&lt;!DOCTYPE html&gt;&lt;html&gt;&lt;head&gt; &lt;meta charset="UTF-8"&gt; &lt;title&gt;ç™»å½•&lt;/title&gt;&lt;/head&gt;&lt;body&gt; &lt;h1 style="color: red"&gt;ç™»å½•&lt;/h1&gt;&lt;/body&gt;&lt;/html&gt; post è¯·æ±‚é…ç½®è·¯ç”±1234567891011from django.conf.urls import urlfrom django.contrib import adminfrom app import viewsurlpatterns = [ url(r'^admin/', admin.site.urls), url(r'^$', views.home), url(r'^index/$', views.index), url(r'^login/$', views.login, name='lg'),] é…ç½®è§†å›¾12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152from django.shortcuts import render, redirectimport pymysql# Create your views here.def home(request): return render(request, 'index.html')def index(request): return redirect('/')'''def login(request): print(request.method) # å¦‚æžœèŽ·å–GETè¯·æ±‚çš„æäº¤æ•°æ® # import django.core.handlers.wsgi # print(type(request)) # import django.http.request.QueryDict # print(type(request.GET)) print(request.GET) # usr = request.GET['usr'] # ä¸å®‰å…¨ usr = request.GET.get('usr', 'USR') # å®‰å…¨, ç¬¬ä¸€ä¸ªå‚æ•°ä¸ºæ•°æ®çš„key, ç¬¬äºŒä¸ªå‚æ•°ä¸ºé»˜è®¤å€¼ print(usr) pwd = request.GET.get('pwd') # ä¸è®¾é»˜è®¤å€¼,æ²¡æœ‰å–åˆ°å€¼æ—¶,è¿”å›žå€¼ä¸ºNone print(pwd) return render(request, 'login.html')'''from django.http import HttpResponsedef login(request): if request.method == 'GET': stus = request.GET.getlist('stu') print(stus) return render(request, 'login.html') # æ²¡æœ‰GETåˆ†æ”¯, å‘æ¥çš„è¯·æ±‚ä¸ºPOST usr = request.POST.get('usr') pwd = request.POST.get('pwd') print(usr, pwd) # è¿žæŽ¥æ•°æ®åº“ =&gt; ORM conn = pymysql.connect(host='localhost', port=3306, user='root', password='root', db='django') cur = conn.cursor(pymysql.cursors.DictCursor) # cur.execute('select * from user') # users = cur.fetchall() cur.execute('select * from user where usr=%s and pwd=%s', [usr, pwd]) res = cur.fetchone() print(res) if res != None: return HttpResponse('ç™»å½•æˆåŠŸ') return HttpResponse('ç™»å½•å¤±è´¥') é…ç½®é¡µé¢èµ„æº123456789101112131415161718192021&lt;!DOCTYPE html&gt;&lt;html&gt;&lt;head&gt; &lt;meta charset="UTF-8"&gt; &lt;title&gt;ä¸»é¡µ&lt;/title&gt;&#123;# &lt;link rel="stylesheet" href="./index.css"&gt;#&#125;&#123;# &lt;link rel="stylesheet" href="/static/index.css"&gt;#&#125;&#123;# &lt;link rel="stylesheet" href="/static/temp.css"&gt;#&#125;&#123;# &lt;link rel="stylesheet" href="/ooo/index.css"&gt;#&#125;&#123;# &lt;link rel="stylesheet" href="/ooo/temp.css"&gt;#&#125;&#123;# &lt;link rel="stylesheet" href="/static/css/test.css"&gt;#&#125; &lt;link rel="stylesheet" href="/static/css/index.css"&gt;&lt;/head&gt;&lt;body&gt; &lt;h1 style="text-align: center"&gt;ä¸»é¡µ&lt;/h1&gt; &lt;img src="/static/img/001.png" alt=""&gt;&lt;/body&gt;&lt;/html&gt; 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364&lt;!DOCTYPE html&gt;&lt;html&gt;&lt;head&gt; &lt;meta charset="UTF-8"&gt; &lt;title&gt;ç™»å½•&lt;/title&gt; &lt;link rel="stylesheet" href="/static/bootstrap-3.3.7-dist/css/bootstrap.css"&gt; &lt;style&gt; .box &#123; border: 1px solid #ccc; padding: 20px; border-radius: 20px; height: 380px; &#125; &lt;/style&gt;&lt;/head&gt;&lt;body&gt;&#123;#&lt;button class="btn btn-warning"&gt; æŒ‰é’®&lt;/button&gt;#&#125;&#123;#&lt;div class="btn-group"&gt;#&#125;&#123;# &lt;button class="btn btn-default btn-lg dropdown-toggle" type="button" data-toggle="dropdown" aria-haspopup="true"#&#125;&#123;# aria-expanded="false"&gt;#&#125;&#123;# Large button &lt;span class="caret"&gt;&lt;/span&gt;#&#125;&#123;# &lt;/button&gt;#&#125;&#123;# &lt;ul class="dropdown-menu"&gt;#&#125;&#123;# &lt;li&gt;&lt;a href="#"&gt;Action&lt;/a&gt;&lt;/li&gt;#&#125;&#123;# &lt;li&gt;&lt;a href="#"&gt;Another action&lt;/a&gt;&lt;/li&gt;#&#125;&#123;# &lt;li&gt;&lt;a href="#"&gt;Something else here&lt;/a&gt;&lt;/li&gt;#&#125;&#123;# &lt;li role="separator" class="divider"&gt;&lt;/li&gt;#&#125;&#123;# &lt;li&gt;&lt;a href="#"&gt;Separated link&lt;/a&gt;&lt;/li&gt;#&#125;&#123;# &lt;/ul&gt;#&#125;&#123;#&lt;/div&gt;#&#125;&lt;div class="container"&gt; &lt;div class="box row col-sm-6 col-sm-offset-3"&gt; &#123;# action: æ²¡å†™ | http://localhost:8801/login | /login/ | &#123;% url 'url_name' %&#125; #&#125; &lt;form action="&#123;% url 'lg' %&#125;" method="GET"&gt;&#123;# &#123;% csrf_token %&#125;#&#125; &lt;div class="form-group"&gt; &lt;label for="usr"&gt;ç”¨æˆ·å:&lt;/label&gt; &lt;input type="text" class="form-control" name="usr" id="usr" placeholder="è¯·è¾“å…¥ç”¨æˆ·å"&gt; &lt;/div&gt; &lt;div class="form-group"&gt; &lt;label for="pwd"&gt;Password&lt;/label&gt; &lt;input type="password" class="form-control" name="pwd" id="pwd" placeholder="è¯·è¾“å…¥å¯†ç "&gt; &lt;/div&gt; &lt;div class="checkbox"&gt; &lt;label&gt; &lt;input name="stu" type="checkbox" value="stu1"&gt; å­¦ç”Ÿ1 &lt;/label&gt; &lt;label&gt; &lt;input name="stu" type="checkbox" value="stu2"&gt; å­¦ç”Ÿ2 &lt;/label&gt; &lt;label&gt; &lt;input name="stu" type="checkbox" value="stu3"&gt; å­¦ç”Ÿ3 &lt;/label&gt; &lt;/div&gt; &lt;button type="submit" class="btn btn-info pull-right"&gt;ç™»å½•&lt;/button&gt; &lt;/form&gt; &lt;/div&gt;&lt;/div&gt;&#123;#&lt;a href="/index/"&gt;å‰å¾€ä¸»é¡µ&lt;/a&gt;#&#125;&lt;/body&gt;&lt;script src="/static/bootstrap-3.3.7-dist/js/jquery-3.3.1.js"&gt;&lt;/script&gt;&lt;script src="/static/bootstrap-3.3.7-dist/js/bootstrap.js"&gt;&lt;/script&gt;&lt;/html&gt; å‰åŽç«¯äº¤äº’Djangoè¯·æ±‚ç”Ÿå‘½å‘¨æœŸ]]></content>
      <categories>
        <category>django</category>
      </categories>
  </entry>
  <entry>
    <title><![CDATA[Djangoï¼ˆäºŒï¼‰]]></title>
    <url>%2F2019%2F01%2F04%2FDjango%EF%BC%88%E4%BA%8C%EF%BC%89%2F</url>
    <content type="text"><![CDATA[Django ç³»åˆ—åšå®¢ï¼ˆäºŒï¼‰å‰è¨€ä»Šå¤©åšå®¢çš„å†…å®¹ä¸ºä½¿ç”¨ Django å®Œæˆç¬¬ä¸€ä¸ª Django é¡µé¢ï¼Œå¹¶è¿›è¡Œä¸€äº›ç®€å•é¡µé¢çš„æ­å»ºå’Œè½¬è·³ã€‚ å‘½ä»¤è¡Œæ­å»º Django é¡¹ç›®åˆ›å»ºçº¯å‡€è™šæ‹ŸçŽ¯å¢ƒåœ¨ä¸Šä¸€ç¯‡åšå®¢ä¸­å·²ç»å®‰è£…å¥½äº†è™šæ‹ŸçŽ¯å¢ƒï¼Œæ‰€ä»¥ç”¨è™šæ‹ŸçŽ¯å¢ƒæ¥å®‰è£…æŒ‡å®šç‰ˆæœ¬çš„ Djangoã€‚ä¸ºäº†å¯ä»¥ä»Žå¤´åˆ°å°¾çš„èµ°ä¸€éæµç¨‹ï¼Œæˆ‘é‡æ–°åˆ›å»ºäº†ä¸€ä¸ªè™šæ‹ŸçŽ¯å¢ƒã€‚ æ¿€æ´»è™šæ‹ŸçŽ¯å¢ƒå¹¶å®‰è£… Django é¦–å…ˆè¿›å…¥è™šæ‹ŸçŽ¯å¢ƒè·¯å¾„ä¸‹çš„ bin ç›®å½• ä½¿ç”¨å‘½ä»¤æ¿€æ´»è™šæ‹ŸçŽ¯å¢ƒ å®‰è£…æŒ‡å®šç‰ˆæœ¬ Django é¦–å…ˆä½¿ç”¨ pip3 list å‘½ä»¤æŸ¥çœ‹ å¯ä»¥çœ‹åˆ°éƒ½æ˜¯åˆ›å»ºè™šæ‹ŸçŽ¯å¢ƒæ—¶å®‰è£…çš„ä¾èµ–åŒ…ï¼ŒçŽ°åœ¨ä½¿ç”¨ pip å‘½ä»¤å®‰è£…æŒ‡å®š django ç‰ˆæœ¬ï¼Œå› ä¸ºåšé¡¹ç›®éœ€è¦ç¨³å®šï¼Œæ‰€ä»¥å®‰è£…çš„ç‰ˆæœ¬ä¸æ˜¯æœ€æ–°çš„ã€‚ å¯ä»¥çœ‹åˆ°æ–°å®‰è£…äº†2ä¸ªåŒ…ï¼Œpytz æ˜¯ python time zone çš„ç¼©å†™ï¼Œæ˜¯ç”¨æ¥è½¬æ¢æ—¶åŒºçš„åŒ…ã€‚ åˆ›å»ºé¡¹ç›®å‰å¾€ç›®æ ‡è·¯å¾„åˆ›å»ºé¡¹ç›®ï¼Œåœ¨è¿™é‡Œæˆ‘çš„ django é¡¹ç›®éƒ½åœ¨æˆ‘çš„å®¶ç›®å½•ä¸‹é¢çš„ django_projecté‡Œé¢ã€‚ è¿›å…¥è¦åˆ›å»ºé¡¹ç›®çš„è·¯å¾„ä¸‹ï¼Œä½¿ç”¨ä¸‹é¢çš„å‘½ä»¤åˆ›å»ºä¸€ä¸ª django é¡¹ç›®ã€‚ 1django-admin startproject project_name å¯ä»¥çœ‹åˆ°å¤šäº†ä¸ªæ–‡ä»¶å¤¹ã€‚æŸ¥çœ‹é¡¹ç›®ç»“æž„ åˆ›å»ºåº”ç”¨è¿›å…¥é¡¹ç›®æ ¹ç›®å½•ä½¿ç”¨ä¸‹é¢å‘½ä»¤åˆ›å»ºä¸€ä¸ª appã€‚ 1python3 manage.py startapp app_name åˆ›å»ºæˆåŠŸå¹¶æŸ¥çœ‹é¡¹ç›®ç»“æž„ã€‚ å¯åŠ¨é¡¹ç›®ä½¿ç”¨ä¸‹é¢å‘½ä»¤ 1python3 manage.py runserver 127.0.0.1:8888 æˆåŠŸåŽä¼šåœ¨æœ¬æœºä¸Šçš„8888ç«¯å£å¼€å¯ django æœåŠ¡ è®¿é—®8888ç«¯å£ä¼šæ˜¾ç¤ºä¸‹å›¾é¡µé¢ å¥½äº†ï¼Œåˆ°çŽ°åœ¨ä½ å·²ç»å¼€å¯äº†ç¬¬ä¸€ä¸ª django æœåŠ¡ï¼Œå¹¶ä¸”è¿˜æ˜¯ä½¿ç”¨äº†å‘½ä»¤è¡Œã€‚ pycharm åˆ›å»º Django é¡¹ç›®å…¶å®žä¼šä½¿ç”¨å‘½ä»¤è¡Œåˆ›å»ºé¡¹ç›®é‚£ä¹ˆä½¿ç”¨ pycharm åº”è¯¥æ˜¯æ‰‹åˆ°æ“’æ¥ï¼Œæ¯•ç«Ÿ pycharm å·²ç»åšäº†å¾ˆå¤šå·¥ä½œäº†ã€‚ä¸è¿‡ä¹Ÿæœ‰ç‚¹éº»çƒ¦ã€‚ã€‚ã€‚ åœ¨è™šæ‹ŸçŽ¯å¢ƒä¸‹ä½¿ç”¨ pycharm å®‰è£…æŒ‡å®šdjango ç‰ˆæœ¬ åˆ›å»ºé¡¹ç›® é¡¹ç›®ç›®å½•ç»“æž„åŠä½œç”¨1234567é¡¹ç›®ç›®å½•ï¼šåŒ…å«é¡¹ç›®æœ€åŸºæœ¬çš„ä¸€äº›é…ç½® -- __init__.pyï¼šæ¨¡å—çš„é…ç½®æ–‡ä»¶ï¼Œå°†blog_projæ–‡ä»¶å¤¹å˜æˆäº†æ¨¡å— -- settings.pyï¼šé…ç½®æ€»æ–‡ä»¶ -- urls.pyï¼šurlé…ç½®æ–‡ä»¶ï¼Œdjangoé¡¹ç›®ä¸­çš„æ‰€æœ‰é¡µé¢éƒ½éœ€è¦å¯¹å…¶é…ç½®urlåœ°å€ -- wsgi.pyï¼š(web server gateway interface)ï¼ŒæœåŠ¡å™¨ç½‘å…³æŽ¥å£ï¼Œpythonåº”ç”¨ä¸ŽwebæœåŠ¡å™¨ç›´æŽ¥é€šä¿¡çš„æŽ¥å£templatesï¼šæ¨¡æ¿æ–‡ä»¶å¤¹ï¼Œå­˜æ”¾htmlæ–‡ä»¶çš„(é¡µé¢)ï¼Œæ”¯æŒä½¿ç”¨Djangoæ¨¡æ¿è¯­è¨€(DTL)ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨ç¬¬ä¸‰æ–¹(jinja2)manage.pyï¼šé¡¹ç›®ç®¡ç†å™¨ï¼Œä¸Žé¡¹ç›®äº¤äº’çš„å‘½ä»¤è¡Œå·¥å…·é›†çš„å…¥å£ï¼ŒæŸ¥çœ‹æ”¯æŒçš„æ‰€æœ‰å‘½ä»¤python3 manage.py settings.pyç»“æž„123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102import os# é¡¹ç›®æ ¹ç›®å½•BASE_DIR = os.path.dirname(os.path.dirname(os.path.abspath(__file__)))# é¡¹ç›®å®‰å…¨ç SECRET_KEY = 'guwba1u$18=&amp;*8kf44_u&amp;swqb@xlwgel7n$0rs=(+f10yvz)p0'# è°ƒè¯•æ¨¡å¼ï¼Œä¸Šçº¿é¡¹ç›®è¦å…³é—­debugæ¨¡å¼ï¼Œä¸ç„¶åŽå°å‡ºçŽ°å¼‚å¸¸ä¼šç›´æŽ¥æŠ›ç»™å‰å°å±•çŽ°ç»™ç”¨æˆ·çœ‹äº†DEBUG = True# åœ¨ä¸Šçº¿é¡¹ç›®ä¸­ï¼Œè§„å®šåªèƒ½ä»¥ä»€ä¹ˆipåœ°å€æ¥è®¿é—®djangoé¡¹ç›®# DEBUG = FALSE# ALLOWED_HOSTS = ['localhost']ALLOWED_HOSTS = []# é¡¹ç›®è‡ªå¸¦çš„åº”ç”¨# æˆ‘ä»¬åˆ›å»ºäº†è‡ªå·±çš„åº”ç”¨å°±è¦å°†è‡ªå®šä¹‰åº”ç”¨æ·»åŠ åˆ°è¯¥é…ç½®INSTALLED_APPS = [ 'django.contrib.admin', 'django.contrib.auth', 'django.contrib.contenttypes', 'django.contrib.sessions', 'django.contrib.messages', 'django.contrib.staticfiles',]# ä¸­é—´ä»¶# djangoè‡ªå¸¦çš„å·¥å…·é›†MIDDLEWARE = [ 'django.middleware.security.SecurityMiddleware', 'django.contrib.sessions.middleware.SessionMiddleware', 'django.middleware.common.CommonMiddleware', 'django.middleware.csrf.CsrfViewMiddleware', 'django.contrib.auth.middleware.AuthenticationMiddleware', 'django.contrib.messages.middleware.MessageMiddleware', 'django.middleware.clickjacking.XFrameOptionsMiddleware',]# é…ç½®urlé…ä»¶æ–‡ä»¶çš„æ ¹æ–‡ä»¶ï¼Œæ‰§è¡Œurls.pyROOT_URLCONF = 'é¡¹ç›®ç›®å½•.urls'# æ¨¡æ¿ï¼Œä¸€ä¸ªä¸ªhtmlæ–‡ä»¶TEMPLATES = [ &#123; # å¦‚æžœä½¿ç”¨ç¬¬ä¸‰æ–¹ï¼Œå¯ä»¥åœ¨è¿™ä¸ªåœ°æ–¹ä¿®æ”¹æ¨¡æ¿å¼•æ“Ž 'BACKEND': 'django.template.backends.django.DjangoTemplates', 'DIRS': [os.path.join(BASE_DIR, 'templates')] , 'APP_DIRS': True, 'OPTIONS': &#123; 'context_processors': [ 'django.template.context_processors.debug', 'django.template.context_processors.request', 'django.contrib.auth.context_processors.auth', 'django.contrib.messages.context_processors.messages', ], &#125;, &#125;,]# æœåŠ¡å™¨ç½‘å…³æŽ¥å£åº”ç”¨WSGI_APPLICATION = 'é¡¹ç›®ç›®å½•.wsgi.application'# æ•°æ®åº“é…ç½®# è¦é…ç½®è‡ªå®šä¹‰æ•°æ®åº“åŽ»ä¸‹é¢é“¾æŽ¥åŽ»æŸ¥è¯¢è¯¦ç»†é…ç½®# https://docs.djangoproject.com/en/1.11/ref/settings/#databasesDATABASES = &#123; 'default': &#123; 'ENGINE': 'django.db.backends.sqlite3', 'NAME': os.path.join(BASE_DIR, 'db.sqlite3'), &#125;&#125;# å¯†ç è®¤è¯é…ç½®# https://docs.djangoproject.com/en/1.11/ref/settings/#auth-password-validatorsAUTH_PASSWORD_VALIDATORS = [ &#123; 'NAME': 'django.contrib.auth.password_validation.UserAttributeSimilarityValidator', &#125;, &#123; 'NAME': 'django.contrib.auth.password_validation.MinimumLengthValidator', &#125;, &#123; 'NAME': 'django.contrib.auth.password_validation.CommonPasswordValidator', &#125;, &#123; 'NAME': 'django.contrib.auth.password_validation.NumericPasswordValidator', &#125;,]# å›½é™…åŒ–ç›¸å…³é…ç½®# https://docs.djangoproject.com/en/1.11/topics/i18n/LANGUAGE_CODE = 'en-us'TIME_ZONE = 'UTC'USE_I18N = TrueUSE_L10N = TrueUSE_TZ = True# é™æ€æ–‡ä»¶åœ°å€ (CSS, JavaScript, Images)# https://docs.djangoproject.com/en/1.11/howto/static-files/STATIC_URL = '/static/' åˆ›å»ºé¡¹ç›®åº”ç”¨ä½¿ç”¨ pycharm è‡ªå¸¦çš„å‘½ä»¤è¡Œå·¥å…·æ¥åˆ›å»ºåº”ç”¨ åº”ç”¨åˆ›å»ºå®ŒåŽå°†åº”ç”¨åæ·»åŠ åˆ° settings.pyæ–‡ä»¶ä¸­ 1234567INSTALLED_APPS = [ 'django.contrib.admin', ... 'django.contrib.staticfiles', # æ·»åŠ çš„è‡ªå®šä¹‰åº”ç”¨ 'app',] appç›®å½•ç»“æž„åˆ›å»ºåŽçš„ app ç›®å½•ç»“æž„å’Œä½¿ç”¨å‘½ä»¤è¡Œåˆ›å»ºçš„ä¸€æ ·ï¼Œä¸‹é¢æ¥çœ‹çœ‹å…·ä½“éƒ½æœ‰ä»€ä¹ˆä½œç”¨ 12345678migrationsï¼šæ•°æ®è¿ç§»(ç§»æ¤)æ¨¡å—ï¼Œå†…å®¹éƒ½æ˜¯ç”±Djangoè‡ªåŠ¨ç”Ÿæˆ -- __init__.py__init__.pyadmin.pyï¼šåº”ç”¨çš„åŽå°ç®¡ç†ç³»ç»Ÿé…ç½®apps.pyï¼šdjango 1.9åŽï¼Œæœ¬åº”ç”¨çš„ç›¸å…³é…ç½®models.pyï¼šæ•°æ®æ¨¡åž‹æ¨¡å—ï¼Œä½¿ç”¨ORMæ¡†æž¶ï¼Œç±»ä¼¼äºŽMVCæ¨¡å¼ä¸‹çš„Modelå±‚tests.pyï¼šè‡ªåŠ¨åŒ–æµ‹è¯•æ¨¡å—ï¼Œå¯ä»¥å†™è‡ªåŠ¨åŒ–æµ‹è¯•è„šæœ¬views.pyï¼šæ‰§è¡Œç›¸åº”çš„é€»è¾‘ä»£ç æ¨¡å—(ç›¸åº”ä»€ä¹ˆï¼Œå¦‚ä½•ç›¸åº”)ï¼Œä»£ç é€»è¾‘å¤„ç†çš„ä¸»è¦åœ°ç‚¹ï¼Œé¡¹ç›®çš„å¤§éƒ¨åˆ†ä»£ç æ‰€åœ¨ä½ç½® é¡µé¢å“åº”ç¬¬ä¸€ä¸ªå“åº”é€šè¿‡é…ç½®è·¯ç”±å’Œè§†å›¾æ–‡ä»¶æ¥å“åº”ç¬¬ä¸€æ¬¡è¿žæŽ¥è¯·æ±‚ã€‚ é…ç½®è·¯ç”±123456789101112from django.conf.urls import urlfrom django.contrib import admin# å¯¼å…¥åº”ç”¨è§†å›¾import app.views as app_view # å–åˆ«å# é…ç½®è·¯ç”±urlpatterns = [ url(r'^admin/', admin.site.urls), # ä¸ºæŒ‡å®šå‡½æ•°é…ç½® url url(r'^index/&amp;', app_view.index)] é…ç½®è§†å›¾1234567# å¯¼å…¥å¤„ç†è¯·æ±‚çš„ http ç›¸åº”åŠŸèƒ½from django.http import HttpResponse# djangoä¸­æ¯ä¸€ä¸ªè¯·æ±‚éƒ½ä¼šè®¾ç½®ç›¸åº”å‡½æ•°æ¥è¿›è¡Œå¤„ç†# å‡½æ•°çš„å‚æ•°çº¦å®šä¸º requestdef index(request): return HttpResponse('index page!') å¯åŠ¨æœåŠ¡å¯åŠ¨æœåŠ¡åŽè®¿é—® localhost:8000/index/ï¼Œå¯ä»¥çœ‹åˆ°å“åº”ä¸º index å‡½æ•°é‡Œå¡«å†™çš„å“åº”ï¼Œè¯´æ˜ŽæœåŠ¡æˆåŠŸå¯åŠ¨å¹¶ä¸”å“åº”äº†è‡ªå·±æƒ³è¦çš„å“åº”å­—ç¬¦ä¸²ã€‚ ç¬¬ä¸€ä¸ªæ¨¡æ¿é¡µé¢é¡¹ç›®ç›®å½•ä¸‹æœ‰ä¸ª templates æ–‡ä»¶å¤¹æ˜¯ä¸“é—¨ç”¨äºŽå­˜æ”¾é¡µé¢èµ„æºçš„ï¼Œæ¯”å¦‚index.html 12345from django.shortcuts import renderdef index(request): # å‚æ•°ï¼šè¯·æ±‚å¯¹è±¡ requestï¼Œæ¨¡æ¿ html æ–‡ä»¶ï¼Œä¼ ç»™å‰å°çš„èµ„æº return render(request, 'index.html') index.html æ–‡ä»¶ 12345678910 &lt;!DOCTYPE html&gt;&lt;html&gt;&lt;head&gt; &lt;meta charset="UTF-8"&gt; &lt;title&gt;ä¸»é¡µ&lt;/title&gt;&lt;/head&gt;&lt;body&gt; &lt;h1&gt;è¿™æ˜¯ä¸»é¡µ&lt;/h1&gt;&lt;/body&gt;&lt;/html&gt; é…ç½®å®ŒæˆåŽï¼Œè®¿é—®127.0.0.1:8000/index/åŽæ˜¾ç¤ºä¸ºï¼š åœ¨ views.pyæ–‡ä»¶ä¸­ç¼–å†™å¯¹åº”å“åº”åŠŸèƒ½å‡½æ•°æ—¶ï¼Œä¼šè‡ªåŠ¨å‡ºçŽ°æ¨¡æ¿æ–‡ä»¶ è¿™æ˜¯å› ä¸ºåœ¨ settings.pyæ–‡ä»¶ä¸­å·²ç»æŠŠæ¨¡æ¿è·¯å¾„é…ç½®å¥½äº† 123456789101112TEMPLATES = [ &#123; # å¦‚æžœä½¿ç”¨ç¬¬ä¸‰æ–¹ï¼Œå¯ä»¥åœ¨è¿™ä¸ªåœ°æ–¹ä¿®æ”¹æ¨¡æ¿å¼•æ“Ž 'BACKEND': 'django.template.backends.django.DjangoTemplates', # æ¨¡æ¿é¡µé¢é»˜è®¤è·¯å¾„ï¼šé¡¹ç›®æ ¹è·¯å¾„ä¸‹çš„templatesæ–‡ä»¶å¤¹ 'DIRS': [os.path.join(BASE_DIR, 'templates')] , # å…è®¸æ‰€æœ‰appå‡æ‹¥æœ‰è‡ªå·±çš„æ¨¡æ¿æ–‡ä»¶å¤¹ 'APP_DIRS': True, ... &#125;,] ç¬¬ä¸€ä¸ªé‡å®šå‘å’Œä¸Šé¢çš„ä¸€æ ·ï¼Œé¦–å…ˆåœ¨ views.pyæ–‡ä»¶ä¸­é…ç½®å“åº”å‡½æ•° 1234567from django.shortcuts import render, redirect# / è·¯å¾„æ¸²æŸ“index.htmlé¡µé¢def home(request): return render(request, 'index.html')# /index/ è·¯å¾„é‡å®šå‘åˆ° / è·¯å¾„ï¼Œè¾¾åˆ°æ¸²æŸ“index.htmlé¡µé¢def index(request): return redirect('/') å“åº”çš„è·¯ç”±é…ç½®ä¸º 123456789from django.conf.urls import urlfrom django.contrib import admin# å¯¼å…¥åº”ç”¨è§†å›¾import app.views as app_viewurlpatterns = [ url(r'^admin/', admin.site.urls), url(r'^index/$', app_view.index), url(r'^$', app_view.home),] çŠ¶æ€ç æ˜¾ç¤ºä¸º301è¯´æ˜Žå‘ç”Ÿäº†è½¬è·³ï¼ŒæŸ¥çœ‹ç½‘ç»œè¯¦ç»†ä¿¡æ¯å‘çŽ°åœ¨index/ä¸­æœ‰ä¸ª location å­—æ®µï¼Œ è¯¥å­—æ®µå€¼ä¸º /ï¼Œè¯´æ˜Žè½¬è·³åˆ°äº†æ ¹ç›®å½•ä¸‹ã€‚ å…¶ä»–é…ç½®urlåº”ç”¨ç§»æ¤é¡¹ç›®ç›®å½•ä¸‹çš„urls.pyæ–‡ä»¶123456789# å¯¼å…¥includeåŠŸèƒ½ï¼Œå°†urlé…ç½®è½¬ç§»åˆ°æŒ‡å®šåº”ç”¨å†…éƒ¨çš„è‡ªèº«urlé…ç½®æ–‡ä»¶from django.conf.urls import url, includefrom django.contrib import adminurlpatterns = [ url(r'^admin/', admin.site.urls), # å°†urlé…ç½®æ“ä½œäº¤ç»™app_testè‡ªèº«çš„urls.pyæ¥è¿›è¡Œæ“ä½œ # app-test/ä¸ºapp_teståº”ç”¨çš„æ€»è·¯å¾„ url(r'^app-test/', include('app_test.urls')),] app_testä¸‹çš„urls.pyæ–‡ä»¶123456789from django.conf.urls import urlfrom . import viewsurlpatterns = [ # 1.ä¸è¦ç›´æŽ¥ç•™ç©ºï¼Œç›´æŽ¥ç•™ç©º http://localhost:8000/app-test/* å‡å¯ä»¥è®¿é—® # 2.å¦‚æžœè¦é…ç½®indexï¼Œè®¿é—®çš„åœ°å€ä¸º http://localhost:8000/app-test/index # 3.é…ç½®æ–¹å¼ï¼šr'^index/$'ï¼Œä¸è¦çœç•¥ / ç¬¦å· # 4.æ­£åˆ™æ˜¯å¦ä»¥$æ ‡è¯†ç»“å°¾å–å†³äºŽè¯¥è·¯å¾„æ˜¯å¦ä¼šæœ‰ä¸‹ä¸€çº§è·¯å¾„ url(r'^$', views.index),] å¤šåº”ç”¨ç›¸åŒæ¨¡æ¿é¡µé¢å†²çªå¦‚æžœåœ¨ä¸¤ä¸ªåº”ç”¨ä¸­å‡æœ‰ç›¸åŒçš„æ¨¡æ¿é¡µé¢å‡å¦‚ä¸ºindex.html 123456# 1.åœ¨åº”ç”¨templatesæ–‡ä»¶å¤¹ä¸‹å»ºç«‹ä¸Žåº”ç”¨åŒåçš„æ–‡ä»¶å¤¹ï¼Œegï¼šapp_textä¸‹å°±å»ºç«‹app_text# 2.å°†æ¨¡æ¿åˆ›å»ºåœ¨ä¸Žåº”ç”¨åŒåçš„æ¨¡æ¿æ–‡ä»¶å¤¹ä¸‹# 3.ä¿®æ”¹æŒ‡å®šåº”ç”¨ä¸‹views.pyå¤„ç†è¯·æ±‚çš„renderæ¨¡æ¿æŒ‡å‘def index(request): # æ¨¡æ¿æŒ‡å‘ï¼šblog_appåº”ç”¨çš„templatesä¸‹çš„blog_appæ–‡ä»¶å¤¹ä¸­çš„index.html return render(request, 'app_text/index.html') é™æ€èµ„æºçš„é…ç½®å‡å¦‚é¡µé¢éœ€è¦ä¸€äº›é™æ€èµ„æºï¼Œæ¯”å¦‚éœ€è¦ css æ ·å¼ã€js æ–‡ä»¶ç­‰ï¼Œé‚£ä¹ˆå°±éœ€è¦åœ¨ settings æ–‡ä»¶ä¸­é…ç½®å¥½é™æ€æ–‡ä»¶çš„è·¯å¾„ã€‚ é…ç½® settings.pyæ–‡ä»¶123456789# é™æ€æ–‡ä»¶åœ°å€ (CSS, JavaScript, Images)# https://docs.djangoproject.com/en/1.11/howto/static-files/STATIC_URL = '/static/'# åœ¨é¡¹ç›®æ ¹ç›®å½•ä¸‹æ–°å»ºstaticæ–‡ä»¶å¤¹ï¼Œé™æ€èµ„æºå‡æ”¾åœ¨è¯¥æ–‡ä»¶å¤¹ä¸­# å¢žåŠ STATICFILES_DIRSé…ç½®STATICFILES_DIRS = [ os.path.join(BASE_DIR, 'static')]# å‰ç«¯é¡µé¢åŠ è½½é™æ€èµ„æºçš„è·¯å¾„ï¼š/static/... (...ä¸ºå…·ä½“åœ¨staticæ–‡ä»¶å¤¹ä¸­çš„è·¯å¾„) æ‹“å±•é™æ€èµ„æºé…ç½®1234567# å¦‚æžœè¦å°†é¡¹ç›®æ ¹ç›®å½•ä¸‹sourceæ–‡ä»¶å¤¹ä¹Ÿä½œä¸ºé™æ€èµ„æºè·¯å¾„# STATICFILES_DIRSå¢žåŠ sourceé…ç½®STATICFILES_DIRS = [ os.path.join(BASE_DIR, 'static'), os.path.join(BASE_DIR, 'source')]# å‰ç«¯é¡µé¢åŠ è½½é™æ€èµ„æºè·¯å¾„ä¾æ—§ä¸å˜ï¼ŒDjangoä¼šè‡ªåŠ¨ç´¢å¼•ï¼š/static/... (...ä¸ºå…·ä½“åœ¨sourceæ–‡ä»¶å¤¹ä¸­çš„è·¯å¾„) urlæ­£åˆ™åŽŸç”Ÿå­—ç¬¦ä¸²123456789# urls.pyé…ç½®è·¯ç”±url(r'test', app_view.test)# views.pyè®¾ç½®å“åº”å‡½æ•°def test(request): return HttpResponse('test')# é—®é¢˜ï¼šè¯·æ±‚åœ°å€åŒ…å«testå‡å¯ä»¥è®¿é—®# http://127.0.0.1:8000/test =&gt; /test | /atest | /testa | /atesta | /test/a | /test/ å¼€å¤´123456789# urls.pyé…ç½®è·¯ç”±url(r'^test', app_view.test)# views.pyè®¾ç½®å“åº”å‡½æ•°def test(request): return HttpResponse('test')# é—®é¢˜ï¼šè¯·æ±‚åœ°å€ä»¥testå¼€å¤´å‡å¯ä»¥è®¿é—®# http://127.0.0.1:8000/test =&gt; /test | /testa | /test/a | /test/ ç»“å°¾1234567891011# urls.pyé…ç½®è·¯ç”±url(r'^test$', app_view.test)# views.pyè®¾ç½®å“åº”å‡½æ•°def test(request): return HttpResponse('test')# é—®é¢˜ï¼šåªèƒ½ä¸€ç§æ–¹å¼è®¿é—®# http://127.0.0.1:8000/test =&gt; /test# ä¸èƒ½ä»¥ /test/ è®¿é—®# http://127.0.0.1:8000/test/ ä¼˜åŒ–ç»“å°¾1234567891011121314# urls.pyé…ç½®è·¯ç”±url(r'^test/$', app_view.test)# views.pyè®¾ç½®å“åº”å‡½æ•°def test(request): return HttpResponse('test')# /test å’Œ /test/ å‡å¯ä»¥è®¿é—®# http://127.0.0.1:8000/test# http://127.0.0.1:8000/test/# é—®é¢˜ï¼šä¸èƒ½ä½œä¸ºåº”ç”¨æ€»è·¯ç”±# egï¼šapp_teståº”ç”¨åœ¨é¡¹ç›®urls.py# url(r'^app-test/', include('app_test.urls')) æœ«å°¾ä¸èƒ½åŠ $ï¼Œå› ä¸ºä½œä¸ºåº”ç”¨æ€»ç›®å½•ï¼Œæ˜¯æœ‰ä¸‹ä¸€çº§ï¼Œå¦‚æžœç”¨$æ ‡è¯†ç»“å°¾äº†ï¼Œå°±ä»£è¡¨ä¸èƒ½æœ‰ä¸‹ä¸€çº§è·¯ç”± åœ°å€æ•èŽ·1234567891011# urls.pyé…ç½®è·¯ç”±url(r'^test/(\d+)/\d+/(\d+)/$', app_view.test)# å¯¹åº”è¯·æ±‚è·¯å¾„# http://127.0.0.1:8000/test/1/22/333/# å¯¹åº”å“åº”å‡½æ•°def test(request, arg1, arg2): # arg1: str 1 # arg2: str 333 return HttpResponse('test') å°ç»“123456789101112131415# å¸¸è§„è·¯ç”±é…ç½®# r'^index/$'# r'^page/2/$'# åº”ç”¨è·¯ç”±é…ç½®# r'^app/'# æ ¹è·¯ç”±é…ç½®# r'^$'# è·¯ç”±é…ç½®å‡ä»¥ / ç»“å°¾# ()ä¸­çš„å­—æ®µä¼šè¢«è¯·æ±‚å“åº”å‡½æ•°æ•èŽ·# é™åˆ¶å“åº”å‡½æ•°æ•èŽ·çš„å˜é‡å# (?P&lt;num&gt;[0-9]+) å“åº”å‡½æ•°å‚æ•°(requset, num)]]></content>
      <categories>
        <category>Django</category>
      </categories>
  </entry>
  <entry>
    <title><![CDATA[Djangoï¼ˆä¸€ï¼‰]]></title>
    <url>%2F2019%2F01%2F03%2FDjango%EF%BC%88%E4%B8%80%EF%BC%89%2F</url>
    <content type="text"><![CDATA[Django ç³»åˆ—åšå®¢ï¼ˆä¸€ï¼‰å‰è¨€å­¦ä¹ äº† python è¿™ä¹ˆä¹…ï¼Œç»ˆäºŽåˆ°äº†Django æ¡†æž¶ã€‚è¿™å¯ä»¥è¯´æ˜¯ python åæ°”æœ€å¤§çš„web æ¡†æž¶äº†ï¼Œé‚£ä¹ˆä»Žä»Šå¤©å¼€å§‹ä¼šå¼€å§‹ä»Ž Djangoæ¡†æž¶çš„å®‰è£…åˆ°ä½¿ç”¨ä¸€æ­¥æ­¥çš„å­¦ä¹ ï¼Œè¿™ç³»åˆ—åšå®¢ä¸ä¼šåƒå‰ç«¯çš„é‚£æ ·æ°´äº†ï¼ˆç«‹ä¸ª flagï¼‰ï¼Œå¸Œæœ›å¯ä»¥æˆä¸ºé«˜è´¨é‡çš„åšå®¢ã€‚é‚£ä¹ˆæœ¬ç¯‡åšå®¢ä»‹ç» Django çš„å®‰è£…ä»¥åŠå¦‚ä½•åœ¨ç”µè„‘ä¸Šè¿è¡Œç¬¬ä¸€ä¸ª Django åº”ç”¨ã€‚ Django çš„å®‰è£…Django çš„å®‰è£…å¾ˆç®€å•ï¼Œåœ¨ win å’Œ mac ä¸Šé¢éƒ½å¯ä»¥ä½¿ç”¨ pip å®‰è£…å‘½ä»¤å®‰è£…ï¼Œä¹Ÿå¯ä»¥é€šè¿‡ pycharm å®‰è£…ï¼Œæˆ–è€…ä¸‹è½½æ–‡ä»¶åœ¨å‘½ä»¤è¡Œä½¿ç”¨å®‰è£…å·¥å…·å®‰è£…ã€‚ æŽ¥ä¸‹æ¥æˆ‘åœ¨ ubuntu ä¸Šå®‰è£…åšç¤ºä¾‹ã€‚ åœ¨è¿™é‡Œè¿˜å®‰è£…äº†ä¸€ä¸ªä¾èµ–åŒ… pytzã€‚è¿™æ˜¯ç”¨æ¥åšæ—¶åŒºè½¬æ¢çš„ä¸€ä¸ªç¬¬ä¸‰æ–¹åº“ã€‚ å…¶ä»–å¹³å°çš„ pip å®‰è£…æ–¹å¼ä¸€æ ·ï¼Œä¸è¿‡è¦é€‰ç”¨ python3çš„å¯¹åº” pip æ¥å®‰è£…ï¼Œå› ä¸ºçŽ°åœ¨çš„ Django ç‰ˆæœ¬å·²ç»ä¸æ”¯æŒ python2äº†ã€‚ è™šæ‹ŸçŽ¯å¢ƒçš„å®‰è£…ä»€ä¹ˆæ˜¯è™šæ‹ŸçŽ¯å¢ƒ å¯¹çœŸå®žçš„ python è§£é‡Šå™¨çš„ä¸€ä¸ªæ‹·è´ç‰ˆæœ¬ äº‹å®žæœ‰æ•ˆï¼Œå¯ä»¥ç‹¬ç«‹å­˜åœ¨å¹¶è¿è¡Œè§£é‡Š python ä»£ç  å¯ä»¥åœ¨è®¡ç®—æœºä¸Šæ‹·è´å¤šä¸ªè™šæ‹ŸçŽ¯å¢ƒ ä¸ºä»€ä¹ˆè¦ä½¿ç”¨è™šæ‹ŸçŽ¯å¢ƒ ä¿è¯çœŸå®žçŽ¯å¢ƒçš„çº¯å‡€æ€§ æ¡†æž¶çš„å¤šç‰ˆæœ¬å…±å­˜ æ–¹ä¾¿åšæ¡†æž¶çš„ç‰ˆæœ¬è¿­ä»£ é™ä½Žå¤šæ¡†æž¶å…±å­˜çš„ç»´æŠ¤æˆæœ¬ å®‰è£…è™šæ‹ŸçŽ¯å¢ƒ é€šè¿‡ pip å®‰è£…è™šæ‹ŸçŽ¯å¢ƒåº“ å› ä¸ºæˆ‘ä¹‹å‰å·²ç»ä¸‹è½½å¥½äº†ï¼Œæ‰€ä»¥è¿™é‡Œç›´æŽ¥æ˜¾ç¤ºè¯·æ±‚å·²ç»å®Œæˆï¼Œå¹¶ä¸”åŽé¢æ˜¯å®‰è£…çš„ç»å¯¹è·¯å¾„ã€‚ å‰å¾€ç›®æ ‡æ–‡ä»¶å¤¹ è¿™ä¸ªæ–‡ä»¶å¤¹æ˜¯ä½ ç”¨æ¥ä¿å­˜è™šæ‹ŸçŽ¯å¢ƒçš„æ–‡ä»¶å¤¹ï¼Œè¯¥æ–‡ä»¶å¤¹ä¸€æ—¦ç¡®å®šå°±ä¸è¦è½»æ˜“æ›´æ”¹ã€‚ è¿™ä¸ª py3-env1æ˜¯åˆ›å»ºçš„ä¸€ä¸ªçº¯å‡€è™šæ‹ŸçŽ¯å¢ƒã€‚ åˆ›å»ºçº¯å‡€çš„è™šæ‹ŸçŽ¯å¢ƒ 1virtualenv è™šæ‹ŸçŽ¯å¢ƒå (py3-env2) ç»ˆç«¯å¯åŠ¨è™šæ‹ŸçŽ¯å¢ƒ 12cd py3-env1\Scriptsactivate è¿›å…¥è™šæ‹ŸçŽ¯å¢ƒä¸‹çš„ python å¼€å‘çŽ¯å¢ƒ 1python3 å…³é—­è™šæ‹ŸçŽ¯å¢ƒ 1deactivate Pycharmçš„å¼€å‘é…ç½® 12æ·»åŠ ï¼šåˆ›å»ºé¡¹ç›® -&gt; Project Interpreter -&gt; Existing interpreter -&gt; Virtualenv Environment | System Interpreter -&gt; ç›®æ ‡è·¯å¾„ä¸‹çš„ python.exeåˆ é™¤ï¼šSetting -&gt; Project -&gt; Project Interpreter -&gt; Show All mac ç”µè„‘ä»Žç¬¬ä¸‰æ­¥ç›´æŽ¥åˆ°æœ€åŽä¸€æ­¥å°±å¥½ äº†è§£12# åˆ›å»ºéžçº¯å‡€çŽ¯å¢ƒï¼š# -- virtualenv-clone æœ¬åœ°çŽ¯å¢ƒ è™šæ‹ŸçŽ¯å¢ƒå 1234# Macé…ç½®ç»ˆç«¯ï¼Œåœ¨ç»ˆç«¯è¿è¡Œè™šæ‹ŸçŽ¯å¢ƒ# åœ¨ç”¨æˆ·æ ¹ç›®å½•ä¸‹çš„.bash_profileï¼ˆæ²¡æœ‰éœ€æ‰‹åŠ¨åˆ›å»ºï¼‰æ–‡ä»¶ä¸­è®¾ç½®# alias ç»ˆç«¯æŒ‡ä»¤å(env-py3)='/Library/Virtualenv/è™šæ‹ŸçŽ¯å¢ƒå/bin/python3'# alias ç»ˆç«¯æŒ‡ä»¤å(env-pip3)='/Library/Virtualenv/è™šæ‹ŸçŽ¯å¢ƒå/bin/pip3' HTTP åè®®å› ä¸º Django æ¡†æž¶åº”ç”¨å±‚æ˜¯é‡‡ç”¨çš„ HTTP åè®®ï¼Œæ‰€ä»¥æœ‰å¿…è¦äº†è§£ HTTP åè®®ã€‚ ä»€ä¹ˆæ˜¯ HTTP åè®® HTTPï¼ˆHyperText Transport Protocolï¼‰ æ˜¯è¶…æ–‡æœ¬ä¼ è¾“åè®®ï¼Œè€Œ HTTPS ä¹Ÿå½’å±žäºŽ HTTP åè®®ï¼ŒS ä»£è¡¨å®‰å…¨ã€‚ åŸºäºŽ TCP/IPåè®®åŸºç¡€ä¸Šçš„åº”ç”¨å±‚åè®®ï¼Œåº•å±‚å®žçŽ°ä»ä¸º socket åŸºäºŽè¯·æ±‚-å“åº”æ¨¡å¼ï¼šé€šä¿¡ä¸€å®šæ˜¯ä»Žå®¢æˆ·ç«¯å¼€å§‹ï¼ŒæœåŠ¡ç«¯æŽ¥æ”¶åˆ°å®¢æˆ·ç«¯ä¸€å®šä¼šåšå‡ºå¯¹åº”å“åº” æ— çŠ¶æ€ï¼šåè®®ä¸å¯¹ä»»ä½•ä¸€æ¬¡é€šä¿¡çŠ¶æ€å’Œä»»ä½•æ•°æ®åšä¿å­˜ æ— è¿žæŽ¥ï¼šä¸€æ¬¡è¿žæŽ¥åªå®Œæˆä¸€æ¬¡è¯·æ±‚-å“åº”ï¼Œè¯·æ±‚-å“åº”å®Œæ¯•åŽä¼šç«‹å³æ–­å¼€è¿žæŽ¥ã€‚ HTTP å·¥ä½œåŽŸç†ä¸€æ¬¡ HTTP è¿žæŽ¥ç§°ä¹‹ä¸ºä¸€ä¸ªäº‹åŠ¡ï¼Œè¿‡ç¨‹å¯ä»¥åˆ†ä¸ºå››æ­¥ å®¢æˆ·ç«¯ä¸ŽæœåŠ¡ç«¯å»ºç«‹è¿žæŽ¥ å®¢æˆ·ç«¯å‘ç”Ÿä¸€ä¸ª HTTP åè®®æŒ‡å®šæ ¼å¼çš„è¯·æ±‚ æœåŠ¡ç«¯æŽ¥æ”¶è¯·æ±‚åŽï¼Œå›žåº”ä¸€ä¸ª HTTP åè®®æŒ‡å®šæ ¼å¼çš„å“åº” å®¢æˆ·ç«¯å°†æœåŠ¡ç«¯çš„å“åº”å±•çŽ°ç»™ç”¨æˆ· HTTP çŠ¶æ€ç  1å¼€å¤´ï¼š 2å¼€å¤´ï¼š 3å¼€å¤´ï¼š 4å¼€å¤´ï¼š 5å¼€å¤´ï¼š è¯·æ±‚æŠ¥æ–‡12345678910111213# è¯·æ±‚è¡Œ è¯·æ±‚å¤´ è¯·æ±‚ä½“'''POST / HTTP/1.1\r\nHost: 127.0.0.1:8001\r\nConnection: keep-alive\r\nUpgrade-Insecure-Requests: 1\r\nUser-Agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_14_1) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/70.0.3538.110 Safari/537.36\r\nAccept: text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,image/apng,*/*;q=0.8\r\nAccept-Encoding: gzip, deflate, br\r\nAccept-Language: zh-CN,zh;q=0.9,en;q=0.8\r\n\r\nusr=abc&amp;pwd=123''' å“åº”æŠ¥æ–‡1234567# å“åº”è¡Œ å“åº”å¤´ å“åº”ä½“'''HTTP/1.1 200 OK\r\nContent-type:text/html\r\n\r\nLogin Success''' ä½¿ç”¨åŽŸç”Ÿ socket å®Œæˆå’Œæµè§ˆå™¨çš„äº¤äº’ç›®å½•ç»“æž„1234501_socket -- 01_client.htmlï¼šå‰å°é€šè¿‡formè¡¨å•è®¿é—®åŽå°çš„é¡µé¢ -- 01_login.htmlï¼šåŽå°æµ‹è¯•æ¸²æŸ“ç»™å‰å°çš„ç™»å½•é¡µé¢ -- 01_index.htmlï¼šåŽå°æµ‹è¯•æ¸²æŸ“ç»™å‰å°çš„ä¸»é¡µ -- 01_server.pyï¼šåŽå°æœåŠ¡å™¨æ–‡ä»¶ å› ä¸º B/Sæž¶æž„çš„å®¢æˆ·ç«¯å·²ç»ç”±æµè§ˆå™¨å†™å¥½ï¼Œæ‰€ä»¥åªéœ€è¦å…³æ³¨æœåŠ¡å™¨ç«¯å°±okã€‚ æœåŠ¡å™¨ç«¯ä»£ç 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647from socket import socket# è®¾ç½®å“åº”å¤´(åŒ…å«å“åº”è¡Œ)RESP_HEADER = b'HTTP/1.1 200 OK\r\nContent-type:text/html;charset=utf-8\r\n\r\n' # è¿žç»­ä¸¤ä¸ª\r\nè¡¨ç¤ºå“åº”å¤´ç»“æŸ# è®¾ç½®æœåŠ¡å™¨ socket ç›¸å…³ä¿¡æ¯server = socket()server.bind('', 8080) # ç©ºå­—ç¬¦ä¸²è¡¨ç¤ºç»‘å®šæœ¬æœºserver.listen(5)print(('æœåŠ¡ï¼šhttp://localhost:8080'))while True: # èŽ·å–Browserä»¥ http åè®®å‘æ¥çš„è¯·æ±‚ client, addr = server.accept() data = client.recv(1024) # æ•°æ®æŠ¥æ–‡ åŒ…å«è¯·æ±‚è¡Œ è¯·æ±‚å¤´ è¯·æ±‚ä½“ print(data) client.send(RESP_HEADER) # /index =&gt; å“åº”ä¸»é¡µ # /login =&gt; ç™»å½•é¡µé¢ # é”™è¯¯ =&gt; 404 # æ•°æ® data, å­—èŠ‚å½¢å¼ =&gt; å­—ç¬¦ä¸²å½¢å¼ strData = str(data, encodeing) # è§£æžè¯·æ±‚çš„æ•°æ®ï¼Œåˆ†æžå¾—åˆ°è·¯ç”± my_route = strData.split('\r\n')[0].split(' ')[1] # åŽå°æ²¡æœ‰è®¾ç½®çš„è·¯ç”±ï¼Œç»Ÿç»Ÿç”±404æ¥å¤„ç† dt = b'404' # è®¾ç½®çš„è·¯ç”±è¿”å›žå“åº”çš„é¡µé¢æ–‡ä»¶ if my_route == '/index': with open('index é¡µé¢è·¯å¾„', 'rb') as f: dt = f.read() if my_route == '/login': with open('login é¡µé¢è·¯å¾„', 'rb') as f: dt = f.read() # /favicon.icoè¯¥è¯·æ±‚æ˜¯å¾€åŽå°è¯·æ±‚æ ‡ç­¾å›¾æ ‡ if my_route == '/favicon.ico': with open('favicon.ico', 'rb') as f: dt = f.read() # æœåŠ¡å™¨å‘é€å“åº”ä½“ client.send(dt) # ä¸€æ¬¡å¾ªçŽ¯ï¼Œä»£è¡¨ä¸€æ¬¡å“åº”ï¼Œä¹Ÿå°±æ˜¯ä¸€æ¬¡äº‹åŠ¡çš„å®Œæˆï¼Œè¦å…³é—­ http è¯·æ±‚è¿žæŽ¥ client.close() ä¿®æ”¹è¿”å›žæ•°æ®ï¼Œå®Œå–„å“åº”ä½“1234# å­—ç¬¦ä¸²client.send(b'HTTP/1.1 200 OK\r\n')client.send(b'\r\n')client.send(b'Normal Socket Web') 12345# htmlä»£ç ï¼Œè¯·æ±‚å¤´è¦è®¾ç½®æ”¯æŒ html ä»£ç client.send(b'HTTP/1.1 200 OK\r\n')client.send(b'Content-type:text/html\r\n')client.send(b'\r\n')client.send(b'&lt;h1&gt;Normal Socket Web&lt;/h1&gt;') 12345678# htmlæ–‡ä»¶ï¼ˆåŒçº§ç›®å½•å»ºç«‹ä¸€ä¸ªindex.htmlé¡µé¢ï¼‰client.send(b'HTTP/1.1 200 OK\r\n')client.send(b'Content-type:text/html\r\n')client.send(b'\r\n')# åˆ©ç”¨æ–‡ä»¶æ–¹å¼è¯»å–é¡µé¢with open('01_index.html', 'rb') as f: dt = f.read()client.send(dt) æ‹“å±•ä¿®æ”¹æŽ¥æ”¶æ•°æ®ï¼Œæ¨¡æ‹ŸåŽå°è·¯ç”± 12345678910111213141516# åˆ†æžæŽ¥æ”¶åˆ°çš„æ•°æ®data = client.recv(1024)# ä¿è¯æŽ¥æ”¶åˆ°çš„æ•°æ®ä½œä¸ºå­—ç¬¦ä¸²è¿›è¡Œä»¥ä¸‹å¤„ç†data = str(data, encoding='utf-8')# æ‹†åˆ†å‡ºåœ°å€ä½route = data.split('\r\n')[0].split(' ')[1]# åŒ¹é…åœ°å€ï¼Œåšå‡ºä¸åŒçš„å“åº”if route == '/index': with open('01_index.html', 'rb') as f: dt = f.read()elif route == '/login': with open('01_login.html', 'rb') as f: dt = f.read()else: dt = b'404'client.send(dt) æ¡†æž¶æ¼”å˜ç›®å½•ç»“æž„123402_frame -- favicon.ico -- index.html -- manage.py manage.py12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758import socketimport pymysql# å“åº”å¤´RESP_HEADER = b'HTTP/1.1 200 OK\r\nContent-type:text/html\r\n\r\n'# è¯·æ±‚å¤„ç†def index(): # ä»¥å­—èŠ‚æ–¹å¼è¯»å–æ–‡ä»¶ with open('index.html', 'rb') as f: dt = f.read() return dtdef ico(): with open('favicon.ico', 'rb') as f: dt = f.read() return dtdef user(): # æ•°æ®åº“æ“ä½œ conn = pymysql.connect(host='127.0.0.1', port=3306, db='django', user='root', password='root') cur = conn.cursor(pymysql.cursors.DictCursor) cur.execute('select * from user') users = cur.fetchall() print(users) users = '''%d:%s %d:%s''' % (users[0]['id'], users[0]['name'], users[1]['id'], users[1]['name']) return users.encode('utf-8')# è®¾ç½®è·¯ç”±urls = &#123; # è¯·æ±‚è·¯å¾„ä¸Žè¯·æ±‚å¤„ç†å‡½æ•°ä¸€ä¸€å¯¹åº” '/index': index, '/favicon.ico': ico, '/user': user&#125;# è®¾ç½®socketdef serve(host, port): server = socket.socket() server.bind((host, port)) print('start:http://' + host + ':' + str(port)) server.listen(5) while True: sock, addr = server.accept() data = sock.recv(1024) data = str(data, encoding='utf-8') print(data) route = data.split('\r\n')[0].split(' ')[1] resp = b'404' if route in urls: resp = urls[route]() sock.send(RESP_HEADER) sock.send(resp) sock.close()# å¯æœåŠ¡if __name__ == '__main__': serve('127.0.0.1', 8002) é¡¹ç›®æ¼”å˜ç›®å½•ç»“æž„1234567803_proj -- template -- index.html -- user.html favicon.ico start.py urls.py views.py index.html1&lt;h1&gt;&#123;&#123; name &#125;&#125;&lt;/h1&gt; user.html1234567891011121314&lt;table border="1"&gt; &lt;tr&gt; &lt;th&gt;id&lt;/th&gt; &lt;th&gt;name&lt;/th&gt; &lt;th&gt;password&lt;/th&gt; &lt;/tr&gt; &#123;% for user in users%&#125; &lt;tr&gt; &lt;td&gt;&#123;&#123;user.id&#125;&#125;&lt;/td&gt; &lt;td&gt;&#123;&#123;user.name&#125;&#125;&lt;/td&gt; &lt;td&gt;&#123;&#123;user.password&#125;&#125;&lt;/td&gt; &lt;/tr&gt; &#123;% endfor %&#125;&lt;/table&gt; start.py123456789101112131415161718192021from wsgiref.simple_server import make_serverfrom urls import urlsdef app(env, response): print(env) # è®¾ç½®å“åº”å¤´ response("200 OK", [('Content-type', 'text/html')]) route = env['PATH_INFO'] print(route) data = urls['error']() if route in urls: data = urls[route]() # è¿”å›žäºŒè¿›åˆ¶å“åº”ä½“ return [data]if __name__ == '__main__': server = make_server('127.0.0.1', 8003, app) print('start:http://127.0.0.1:8003') server.serve_forever() urls.py1234567from views import *urls = &#123; '/index': index, '/favicon.ico': ico, '/user': user, 'error': error&#125; views.py123456789101112131415161718192021222324252627282930313233import pymysql# åˆ©ç”¨jinja2æ¥æ¸²æŸ“æ¨¡æ¿ï¼Œå°†åŽå°æ•°æ®ä¼ ç»™å‰å°from jinja2 import Templatedef index(): with open('templates/index.html', 'r') as f: dt = f.read() tem = Template(dt) resp = tem.render(name='ä¸»é¡µ') return resp.encode('utf-8')def ico(): with open('favicon.ico', 'rb') as f: dt = f.read() return dtdef user(): # æ•°æ®åº“æ“ä½œ conn = pymysql.connect(host='127.0.0.1', port=3306, db='django', user='root', password='root') cur = conn.cursor(pymysql.cursors.DictCursor) cur.execute('select * from user') users = cur.fetchall() print(users) with open('templates/user.html', 'r') as f: dt = f.read() tem = Template(dt) resp = tem.render(users=users) return resp.encode('utf-8')def error(): return b'404']]></content>
      <categories>
        <category>Django</category>
      </categories>
  </entry>
  <entry>
    <title><![CDATA[jQueryï¼ˆä¸€ï¼‰]]></title>
    <url>%2F2018%2F12%2F30%2FjQuery%EF%BC%88%E4%B8%80%EF%BC%89%2F</url>
    <content type="text"><![CDATA[jQuery ç³»åˆ—åšå®¢ï¼ˆä¸€ï¼‰å‰è¨€]]></content>
      <categories>
        <category>jQuery</category>
      </categories>
  </entry>
  <entry>
    <title><![CDATA[JavaScriptï¼ˆå…«ï¼‰]]></title>
    <url>%2F2018%2F12%2F30%2FJavaScript%EF%BC%88%E5%85%AB%EF%BC%89%2F</url>
    <content type="text"><![CDATA[JavaScript ç³»åˆ—åšå®¢ï¼ˆå…«ï¼‰å‰è¨€æœ¬ç¯‡åšå®¢ä»‹ç»é¡µé¢èŠ‚ç‚¹æ¦‚å¿µã€æ–‡æ¡£ç»“æž„ä»¥åŠå¦‚ä½•ä½¿ç”¨ js æ“ä½œæ–‡æ¡£èŠ‚ç‚¹è¿˜æœ‰äº‹ä»¶ target ä»¥åŠ BOM æ“ä½œã€‚ èŠ‚ç‚¹ domä¸Ždomå±žæ€§ 12// DOM: æ–‡æ¡£å¯¹è±¡æ¨¡åž‹ =&gt; æé«˜ç»™ç”¨æˆ·æ“ä½œdocument objçš„æ ‡å‡†æŽ¥å£// DOMæ ‘: ä»¥documentä¸ºæ ¹, æ ‘çŠ¶å±•å¼€æ‰€æœ‰å­èŠ‚ç‚¹ èŠ‚ç‚¹åˆ†ç±» 12// èŠ‚ç‚¹åˆ†ç±»: 6ä¸ª// document | doctype | element | text | attr | comment èŠ‚ç‚¹å¸¸è§„æ“ä½œ 123456var info_node = document.createAttribute("info"); // åˆ›å»ºconsole.log(info_node.nodeName);console.log(info_node.nodeType);info_node.value = '123'; // è®¾ç½®console.log(info_node.nodeValue);sup1.setAttributeNode(info_node); // æ·»åŠ  æ–‡æ¡£ç»“æž„(elementå…ƒç´ èŒƒå›´)1234567891011121314// çˆ¶çº§console.log(sup.parentElement)// å­çº§ä»¬console.log(sup.children);// ç¬¬ä¸€ä¸ªå­çº§console.log(sup.firstElementChild);// æœ€åŽä¸€ä¸ªå­çº§console.log(sup.lastElementChild);// ä¸Šå…„å¼Ÿconsole.log(sup.previousElementSibling);// ä¸‹å…„å¼Ÿconsole.log(sup.nextElementSibling);// æ³¨: æ–‡æ¡£ç»“æž„æ“ä½œæ˜¯å¯ä»¥é‡‡ç”¨è¿ž.è¯­æ³•// sup.children[0].parentElement // è‡ªå·± æ–‡æ¡£å…ƒç´ èŠ‚ç‚¹æ“ä½œ1234// æ“ä½œæ­¥éª¤// 1. åˆ›å»ºdiv(å…ƒç´ èŠ‚ç‚¹)// 2. è®¾ç½®divå±žæ€§(å•ä¸€css | cssç±»å | æ–‡æœ¬ | å­æ ‡ç­¾ | äº‹ä»¶ | ...)// 3. æ·»åŠ åˆ°(æ–‡æ¡£ç»“æž„ä¸­)æŒ‡å®šä½ç½® 123456789101112// åˆ›å»º:åªèƒ½ç”±documentè°ƒç”¨var box = document.createElement('div');// åœ¨bodyå…ƒç´ çš„æœ€åŽè¿½åŠ ä¸€ä¸ªå­å…ƒç´ body.appendChild(box);// åœ¨bodyå…ƒç´ oldEleä¹‹å‰æ’å…¥ä¸€ä¸ªå­å…ƒç´ body.insertBefore(box, oldEle);// ä»Žbodyä¸­åˆ é™¤boxå…ƒç´ ,å¯ä»¥æŽ¥å—è¿”å›žå€¼,å°±æ˜¯åˆ é™¤çš„å…ƒç´ var res = body.removeChild(div);// å°†bodyä¸­oldEleå…ƒç´ æ›¿æ¢ä¸ºbox,å¯ä»¥æŽ¥å—è¿”å›žå€¼,å°±æ˜¯è¢«æ›¿æ¢çš„å…ƒç´ res = bodyreplaceChild(box, oldEle);// trueæ·±æ‹·è´,æ‹·è´è‡ªèº«ä¸Žå†…å®¹, falseæµ…æ‹·è´,åªæ‹·è´è‡ªèº«æ ‡ç­¾box.cloneNode() äº‹ä»¶å¯¹è±¡targetå±žæ€§12345// ev.targeté€šè¿‡çˆ¶çº§çš„äº‹ä»¶å¯¹è±¡,èŽ·å–å…·ä½“ç›¸åº”åŒºåŸŸä½ç½®çš„å­çº§å…ƒç´ // åº”ç”¨åœºæ™¯// 1. çˆ¶çº§çš„å­å…ƒç´ ç±»åž‹ä¸åŒä¸€,é‡‡ç”¨å¾ªçŽ¯ç»‘å®šä¸æ–¹ä¾¿// 2. çˆ¶çº§å­å…ƒç´ è¾ƒå¤šæˆ–ä¸ç¡®å®š BOMæ“ä½œ1234// BOM: Browser Object Model, æä¾›ç”¨æˆ·ä¸Žæµè§ˆå™¨äº¤äº’çš„æ ‡å‡†æŽ¥å£// BOMçš„é¡¶çº§å¯¹è±¡ä¸ºwindowå¯¹è±¡, é¡µé¢ä¸­å‡ºçŽ°çš„å…¶å®žæ‰€æœ‰å¯¹è±¡éƒ½æ˜¯windowçš„å­å¯¹è±¡// é‡è¦çš„å­å¯¹è±¡// document | history | location | navigator | screen 12345678910// location =&gt; urlä¿¡æ¯console.log(location);// åŸŸå:ç«¯å£å·console.log(location.host);// åŸŸåconsole.log(location.hostname);// ç«¯å£å·console.log(location.port);// æŸ¥è¯¢ä¿¡æ¯console.log(location.search); 12// historyhistory.back() | history.forward() | history.go(-num | num) 123// navigatorconsole.log(navigator.userAgent)// Mozilla/5.0 (Windows NT 10.0; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/70.0.3538.77 Safari/537.36]]></content>
      <categories>
        <category>JavaStript</category>
      </categories>
  </entry>
  <entry>
    <title><![CDATA[JavaScriptï¼ˆä¸ƒï¼‰]]></title>
    <url>%2F2018%2F12%2F30%2FJavaScript%EF%BC%88%E4%B8%83%EF%BC%89%2F</url>
    <content type="text"><![CDATA[JavaScript ç³»åˆ—åšå®¢ï¼ˆä¸ƒï¼‰å‰è¨€æœ¬ç¯‡åšå®¢ä»‹ç» js æ“ä½œé«˜çº§ï¼Œé€šè¿‡ js èŽ·å–æ ‡ç­¾çš„å…¨å±€å±žæ€§ã€è®¾ç½®æ ‡ç­¾çš„å…¨å±€å±žæ€§ï¼Œä»¥åŠäº‹ä»¶çš„ç»‘å®šä¸Žå–æ¶ˆã€js ç›’æ¨¡åž‹ä¸Ž js åŠ¨ç”»ã€‚ å¯¹è±¡ä½¿ç”¨çš„é«˜çº§ å¯¹è±¡çš„keyä¸ºå­—ç¬¦ä¸²ç±»åž‹, valueä¸ºä»»æ„ç±»åž‹ 1234567var obj = &#123; name: "name", "person-age": 18&#125;// è®¿é—®obj.name | obj["name"]obj["person-age"] å¯¹è±¡çš„å±žæ€§å¯ä»¥ä»»æ„æ·»åŠ ä¸Žåˆ é™¤ 12345678var obj = &#123; name: "obj"&#125;// åˆ é™¤delete obj.name// æ·»åŠ obj.age = 18 // å¦‚æžœageçš„keyå·²å­˜åœ¨å°±æ˜¯ä¿®æ”¹å€¼, ä¸å­˜åœ¨å°±æ˜¯æ·»åŠ é”®å€¼å¯¹, æ·»åŠ çš„keyä»»æ„// æ³¨: èŽ·å–çš„é¡µé¢å…ƒç´ (æ ‡ç­¾å¯¹è±¡)ä¹Ÿå¯ä»¥ä»»æ„æ·»åŠ /åˆ é™¤å±žæ€§ é¡µé¢æ ‡ç­¾å…¨å±€å±žæ€§æ“ä½œ123456ele.getAttribute("alert");// èŽ·å–é¡µé¢æ ‡ç­¾eleçš„alertå…¨å±€å±žæ€§çš„å€¼, å¦‚æžœæ²¡æœ‰è¯¥å…¨å±€å±žæ€§å€¼ä¸ºnullele.setAttribute("attr_key", "attr_value");// é¡µé¢æ ‡ç­¾eleå·²æœ‰è¯¥å…¨å±€å±žæ€§,å°±æ˜¯ä¿®æ”¹å€¼, æ²¡æœ‰å°±æ˜¯æ·»åŠ è¯¥å…¨å±€å±žæ€§å¹¶èµ‹ç›¸åº”å€¼// æ³¨: ä¸€èˆ¬åº”ç”¨åœºæ™¯, ç»“åˆcssçš„å±žæ€§é€‰æ‹©å™¨å®Œæˆæ ·å¼ä¿®æ”¹ äº‹ä»¶ äº‹ä»¶çš„ç»‘å®š 1234567891011// ç¬¬ä¸€ç§box.onclick = function()&#123;&#125;// åªèƒ½ç»‘å®šä¸€ä¸ªå®žçŽ°ä½“, å¦‚æžœæœ‰å¤šæ¬¡ç»‘å®š, ä¿ç•™æœ€åŽä¸€æ¬¡// box.onclick = nullæ¥å–æ¶ˆäº‹ä»¶çš„ç»‘å®š// ç¬¬äºŒç§var fn = function() &#123;&#125;box.addEventListener('click', fn)// èƒ½ç»‘å®šå¤šä¸ªå®žçŽ°ä½“, å¦‚æžœæœ‰å¤šæ¬¡ç»‘å®š, æŒ‰é¡ºåºä¾æ¬¡æ‰§è¡Œ// box.removerEventListener('click', fn)æ¥å–æ¶ˆäº‹ä»¶çš„ç»‘å®š// äº†è§£: ç¬¬ä¸‰ä¸ªå‚æ•°å†³å®šå†’æ³¡é¡ºåº(å­çˆ¶çº§è°å…ˆç›¸åº”äº‹ä»¶) äº‹ä»¶å¯¹è±¡ 12345678910111213// ç³»ç»Ÿå›žè°ƒäº‹ä»¶å‡½æ•°æ—¶, ä¼ é€’äº†ä¸€ä¸ª äº‹ä»¶(event) å®žå‚// å¦‚æžœè¦ä½¿ç”¨ä¼ é€’æ¥çš„å®žå‚ äº‹ä»¶(event), å®šä¹‰æŽ¥æ”¶çš„ å½¢å‚ å³å¯box.onclick = function(ev)&#123; // ä½¿ç”¨äº‹ä»¶å¯¹è±¡ // ç‰¹æ®ŠæŒ‰é”® eg: ev.altKey: true | false // é¼ æ ‡è§¦å‘ç‚¹: ev.clientX | ev.clientY // å–æ¶ˆå†’æ³¡ ev.cancelBubber = true; // å–æ¶ˆé»˜è®¤äº‹ä»¶ return false;&#125; äº‹ä»¶æ€»ç»“ é¼ æ ‡äº‹ä»¶ 123456789101112131415161718192021222324252627282930var box = document.querySelector('.box');// 1. ç‚¹å‡»äº‹ä»¶box.onclick = function () &#123; console.log("å•å‡»");&#125;;// 2. åŒå‡»äº‹ä»¶(åº”ç”¨åœºæ™¯ä¸å¹¿)box.ondblclick = function () &#123; console.log("åŒå‡»");&#125;;// 3. é¼ æ ‡å³é”®box.oncontextmenu = function () &#123; console.log("å³é”®äº†"); return false;&#125;;// 4. é¼ æ ‡æ‚¬æµ® | ç§»åŠ¨ | æŒ‰ä¸‹ | æŠ¬èµ· | ç¦»å¼€box.onmouseover = function () &#123; console.log("æ‚¬æµ®");&#125;;box.onmousemove = function () &#123; console.log("ç§»åŠ¨");&#125;;box.onmousedown = function () &#123; console.log("æŒ‰ä¸‹");&#125;;box.onmouseup = function () &#123; console.log("æŠ¬èµ·");&#125;;box.onmouseout = function () &#123; console.log("ç¦»å¼€");&#125; 12345678910111213// over | out VS enter | leave// æ€»ç»“:// 1. å°†å­çº§ä¸Žçˆ¶çº§åˆ†å¼€è€ƒè™‘, å¤§å®¶éƒ½æœ‰å„è‡ªçš„æ‚¬æµ®ç¦»å¼€äº‹ä»¶, é‡‡ç”¨ over | out ç»„åˆ// 2. å°†å­çº§çº³å…¥çˆ¶çº§è€ƒè™‘èŒƒå›´, ä¹Ÿå°±æ˜¯åªæœ‰çˆ¶çº§åŽ»ç›¸åº”æ‚¬æµ®ç¦»å¼€äº‹ä»¶, é‡‡ç”¨ enter | leave ç»„åˆ// 3. å•ç‹¬è€ƒè™‘ä¸€ä¸ªç›’å­çš„æ‚¬æµ®ç¦»å¼€äº‹ä»¶, ä¸¤å¥—å‡å¯ä»¥// ç‰¹æ€§// ä»Žçˆ¶çº§ç§»è‡³å­çº§, ä¼šè§¦å‘outäº‹ä»¶, ç´§æŽ¥ç€è§¦å‘å­çº§çš„overäº‹ä»¶, å¹¶å¯ä»¥å†’æ³¡ç»™çˆ¶çº§// ä»Žçˆ¶çº§ç§»è‡³å­çº§, leaveäº‹ä»¶å¹¶ä¸ä¼šè§¦å‘, å®ƒè®¤ä¸ºå­çº§æ˜¯å±žäºŽçˆ¶çº§çš„ä¸€éƒ¨åˆ†, enteräº‹ä»¶, ä¹Ÿä¸ä¼šå†æ¬¡è§¦å‘// æ‚¬æµ®å­çº§:// sub over =&gt; sup over æ”¯æŒå†’æ³¡// sup enter =&gt; sub enter ä¸æ”¯æŒå†’æ³¡ é”®ç›˜äº‹ä»¶ 1234// onkeydown: é”®ç›˜æŒ‰ä¸‹ä¼šè§¦å‘, é•¿æŒ‰ä¼šæŒç»­è§¦å‘// onkeyup: é”®ç›˜æŠ¬èµ·ä¼šè§¦å‘// ev.keyCode: æŒ‰ä¸‹çš„é”®ç›˜é”®çš„æ ‡å· å…¶ä»–äº‹ä»¶ 12// window.onload: é¡µé¢åŠ è½½å®Œæ¯•è§¦å‘// window.onscroll | document.onscroll =&gt; window.scrollY(é¡µé¢ä¸‹æ»šè·ç¦»): é¡µé¢æ»šåŠ¨è§¦å‘ jsç›’æ¨¡åž‹1234// content: é€šè¿‡è®¡ç®—åŽæ ·å¼èŽ·å–// padding + content: box.clientWidth | box.clientHeight// border + padding + content: box.offsetWidth | box.offsetHeight// ç»å¯¹å®šä½top|left: box.offsetTop | box.offsetLeft åŠ¨ç”» å®šæ—¶å™¨ 1234567891011121314151617181920// ä¸€æ¬¡æ€§å®šæ—¶å™¨var timeout = setTimeout(function(a, b)&#123;&#125;, 1000, 10, 20);// æŒç»­æ€§å®šæ—¶å™¨var timer = setInterval(function(a, b)&#123;&#125;, 1000, 10, 20);// æ¸…é™¤å®šæ—¶å™¨// clearTimeout | clearInterval//ç»“è®º:// 1. å®šæ—¶å™¨ä¸ä¼šç«‹å³æ‰§è¡Œ// 2. ä¸€æ¬¡æ€§å®šæ—¶å™¨åªæ‰§è¡Œä¸€æ¬¡, æŒç»­æ€§å®šæ—¶å™¨ä¸åšæ¸…é™¤çš„è¯ä¼šä¸€ç›´æ‰§è¡Œ// 3. å£°æ˜Žå®šæ—¶å™¨ç¬¬ä¸€ä¸ªå‚æ•°ä¸ºé€»è¾‘å‡½æ•°åœ°å€, ç¬¬äºŒä¸ªå‚æ•°ä¸ºäº‹ä»¶é—´éš”, ç¬¬ä¸‰ä¸ªä¸ºé€»è¾‘å‡½æ•°æ‰€éœ€å‚æ•°(å¯ä»¥ä¸ºå¤šä¸ª,ä¸€èˆ¬çœç•¥)// 4. æ¸…é™¤å®šæ—¶å™¨å¯ä»¥æ··ç”¨, æœ¬è´¨å°±æ˜¯æ¸…é™¤åˆ›å»ºå®šæ—¶å™¨æ—¶çš„æ•°å­—æ ‡å·, è¯¥ç¼–å·å°±æ˜¯åˆ›å»ºå®šæ—¶å™¨æ—¶çš„è¿”å›žå€¼// å°æŠ€å·§: å¦‚æžœé¡µé¢ä¸­æœ‰nä¸ªå®šæ—¶å™¨var n = setTimeout(function () &#123;&#125;, 1);for (var i = 1; i &lt; n; i++) &#123; clearInterval(i)&#125;]]></content>
      <categories>
        <category>JavaScript</category>
      </categories>
  </entry>
  <entry>
    <title><![CDATA[python ä¸­çš„æ·±æµ…å¤åˆ¶]]></title>
    <url>%2F2018%2F12%2F26%2Fpython-%E4%B8%AD%E7%9A%84%E6%B7%B1%E6%B5%85%E5%A4%8D%E5%88%B6%2F</url>
    <content type="text"><![CDATA[python ä¸­çš„æ·±æµ…å¤åˆ¶å‰è¨€æƒ³èµ·æ¥å†™è¿™ç¯‡åšå®¢æ˜¯å› ä¸ºè¿™æ®µæ—¶é—´å­¦ä¹  js çš„æ—¶å€™æ¶‰åŠåˆ°äº†å˜é‡çš„æ·±æµ…å¤åˆ¶é—®é¢˜ï¼Œç„¶åŽæƒ³å…ˆæŠŠ python ä¸­çš„æ·±æµ…å¤åˆ¶ç†è§£çš„æ›´æ·±å…¥ä¸€äº›ï¼Œå†å†™ js ä¸­çš„æ·±æµ…å¤åˆ¶ï¼Œå› ä¸º python å¯¹æˆ‘æ¥è¯´å·²ç»å¾ˆç†Ÿæ‚‰äº†ã€‚ åœ¨ python ä¸­ï¼Œæ ‡è¯†ä¸€ä¸ªå¯¹è±¡çš„å”¯ä¸€èº«ä»½æœ‰ä¸‰ä¸ªçŠ¶æ€ï¼šå¯¹è±¡çš„ idï¼ˆå†…å­˜åœ°å€ï¼‰ï¼Œå¯¹è±¡ç±»åž‹ï¼Œå¯¹è±¡å€¼ã€‚ èµ‹å€¼ èµ‹å€¼æ˜¯å°†ä¸€ä¸ªå¯¹è±¡çš„åœ°å€èµ‹å€¼ç»™ä¸€ä¸ªå˜é‡ï¼Œä½¿å¾—å˜é‡æŒ‡å‘è¯¥å†…å­˜åœ°å€ï¼› ä¿®æ”¹ä¸å¯å˜å¯¹è±¡æ—¶ï¼ˆstrã€tupleã€intï¼‰éœ€è¦å¼€è¾Ÿæ–°çš„å†…å­˜ç©ºé—´ï¼› ä¿®æ”¹å¯å˜å¯¹è±¡æ—¶ï¼ˆlistã€dictã€setï¼‰ä¸éœ€è¦å¼€è¾Ÿæ–°çš„å†…å­˜ç©ºé—´ã€‚ èµ‹å€¼æ˜¯å°† id é‡æ–°èµ‹å€¼ç»™äº†ä¸€ä¸ªæ–°çš„å˜é‡ï¼Œå¼•ç”¨è®¡æ•°åŠ 1ã€‚ æµ…æ‹·è´æµ…æ‹·è´åªæ˜¯æ‹·è´çˆ¶å¯¹è±¡ï¼Œè€Œå¯¹äºŽçˆ¶å¯¹è±¡ä¸­çš„å­å¯¹è±¡å¹¶ä¸ä¼šè¿›è¡Œæ‹·è´ã€‚ 12345678a = &#123;1: [1, 2, 3]&#125;b = a.copy()a['name'] = 'musibii'a # &#123;1: [1, 2, 3], 'name': 'musibii'&#125;b # &#123;1: [1, 2, 3]&#125;a[1].append(4)a # &#123;1: [1, 2, 3, 4], 'name': 'musibii'&#125;b # &#123;1: [1, 2, 3, 4]&#125; ä¹Ÿå°±æ˜¯è¯´æµ…æ‹·è´å°†açš„å€¼å¤åˆ¶åˆ°ä¸€ä¸ªæ–°çš„å†…å­˜ç©ºé—´ï¼Œå¹¶å°†å†…å­˜åœ°å€èµ‹å€¼ç»™ bï¼Œæ‰€ä»¥å¯¹ a å¯¹è±¡æ·»åŠ æ–°çš„å±žæ€§ï¼Œb å¹¶ä¸ä¼šæ”¹å˜ï¼›ä½†æ˜¯å› ä¸ºæµ…æ‹·è´åªæ˜¯æ‹·è´äº†ä¸€å±‚ï¼Œå¯¹äºŽå­å¯¹è±¡çš„å†…å­˜ç©ºé—´æ˜¯åŽŸå¯¹è±¡çš„å†…å­˜å¼•ç”¨ï¼Œæ‰€ä»¥ä¿®æ”¹ a ç›¸åº”çš„ b ä¸­ä¹Ÿä¼šæ”¹å˜ã€‚ æµ…æ‹·è´åªæ‹·è´çˆ¶å¯¹è±¡ï¼Œä¸ä¼šæ‹·è´å¯¹è±¡å†…éƒ¨çš„å­å¯¹è±¡ã€‚ æ·±æ‹·è´æ·±æ‹·è´å®Œå…¨èµ‹å€¼è¢«å¤åˆ¶å¯¹è±¡çš„å…ƒç´ ï¼Œä¸æ˜¯å¤åˆ¶å†…å­˜åœ°å€ï¼Œæ˜¯å¼€è¾Ÿæ–°çš„å†…å­˜ç©ºé—´å°†è¢«å¤åˆ¶å¯¹è±¡çš„å€¼æ”¾åœ¨äº†æ–°çš„å†…å­˜ç©ºé™ä¸­ï¼Œå¹¶å°†æ–°çš„å†…å­˜åœ°å€æŒ‡å‘äº†æ–°çš„å˜é‡ï¼Œè¿™æ ·çš„è¯ï¼Œä¿®æ”¹åŽŸå¯¹è±¡ä¸ä¼šå¯¹æ–°çš„å¯¹è±¡äº§ç”Ÿå½±å“ã€‚ æ·±æ‹·è´æ˜¯åœ¨å¦ä¸€å—åœ°å€ä¸­åˆ›å»ºä¸€ä¸ªæ–°çš„å˜é‡ï¼ŒåŒæ—¶å®¹å™¨å†…çš„å…ƒç´ çš„åœ°å€ä¹Ÿæ˜¯æ–°å¼€è¾Ÿçš„ï¼Œä»…ä»…æ˜¯å€¼ç›¸åŒè€Œå·²ï¼Œæ˜¯å®Œå…¨çš„å‰¯æœ¬ã€‚ åœ¨Python ä¸­æ·±æ‹·è´éœ€è¦å¼•å…¥ copy æ¨¡å—ï¼š 123456import copyc = copy.deepcopy(a)c # &#123;1: [1, 2, 3], 'name': 'musibii'&#125;a[1].append(4)a # &#123;1: [1, 2, 3, 4], 'name': 'musibii'&#125;c # &#123;1: [1, 2, 3], 'name': 'musibii'&#125; è§£æž b = aï¼šèµ‹å€¼å¼•ç”¨ï¼Œa å’Œ b éƒ½æŒ‡å‘åŒä¸€ä¸ªå¯¹è±¡ b = a.copy()ï¼šæµ…æ‹·è´ï¼Œa å’Œ b æ˜¯ä¸€ä¸ªç‹¬ç«‹çš„å¯¹è±¡ï¼Œä½†ä»–ä»¬çš„å­å¯¹è±¡è¿˜æ˜¯æŒ‡å‘åŒä¸€ä¸ªå¯¹è±¡ï¼ˆå¼•ç”¨ï¼‰ã€‚ b = copy.deepcopy(a)ï¼šæ·±æ‹·è´ï¼Œa å’Œ b å®Œå…¨æ‹·è´äº†çˆ¶å¯¹è±¡åŠå…¶å­å¯¹è±¡ï¼Œä¸¤è€…å®Œå…¨ç‹¬ç«‹ã€‚ æ›´å¤šå®žä¾‹1234567891011121314import copya = [1, 2, 3, 4, ['a', 'b']] #åŽŸå§‹å¯¹è±¡ b = a #èµ‹å€¼ï¼Œä¼ å¯¹è±¡çš„å¼•ç”¨c = copy.copy(a) #å¯¹è±¡æ‹·è´ï¼Œæµ…æ‹·è´d = copy.deepcopy(a) #å¯¹è±¡æ‹·è´ï¼Œæ·±æ‹·è´ a.append(5) #ä¿®æ”¹å¯¹è±¡aa[4].append('c') #ä¿®æ”¹å¯¹è±¡aä¸­çš„['a', 'b']æ•°ç»„å¯¹è±¡ print( 'a = ', a )print( 'b = ', b )print( 'c = ', c )print( 'd = ', d ) è¾“å‡º 1234('a = ', [1, 2, 3, 4, ['a', 'b', 'c'], 5])('b = ', [1, 2, 3, 4, ['a', 'b', 'c'], 5])('c = ', [1, 2, 3, 4, ['a', 'b', 'c']])('d = ', [1, 2, 3, 4, ['a', 'b']]) ä»¥ä¸Šéƒ¨åˆ†å‚è€ƒèœé¸Ÿæ•™ç¨‹]]></content>
      <categories>
        <category>python</category>
      </categories>
  </entry>
  <entry>
    <title><![CDATA[JavaScriptï¼ˆå…­ï¼‰]]></title>
    <url>%2F2018%2F12%2F22%2FJavaScript%EF%BC%88%E5%85%AD%EF%BC%89%2F</url>
    <content type="text"><![CDATA[JavaScript ç³»åˆ—åšå®¢ï¼ˆå…­ï¼‰å‰è¨€æœ¬ç¯‡åšå®¢å­¦ä¹  js é€‰æ‹©å™¨æ¥æŽ§åˆ¶ css å’Œ htmlã€ä½¿ç”¨äº‹ä»¶ï¼ˆé’©å­å‡½æ•°ï¼‰æ¥å¤„ç†äº‹ä»¶å®ŒæˆåŽå®ŒæˆæŒ‡å®šåŠŸèƒ½ä»¥åŠjs äº‹ä»¶æŽ§åˆ¶é¡µé¢å†…å®¹ã€‚ js é€‰æ‹©å™¨åœ¨å­¦ä¹  js é€‰æ‹©å™¨å‰éœ€è¦äº†è§£å‡ ä¸ªæ¦‚å¿µã€‚ èŠ‚ç‚¹ï¼ˆä¸€ï¼‰ï¼šåœ¨æ–‡æ¡£ï¼ˆdocumentï¼‰ä¸­å‡ºçŽ°çš„æ‰€æœ‰å†…å®¹éƒ½æ˜¯ document ä¸­çš„èŠ‚ç‚¹ã€‚ èŠ‚ç‚¹ï¼ˆäºŒï¼‰ï¼šæ ‡ç­¾èŠ‚ç‚¹ï¼ˆå…ƒç´  elementï¼‰ | æ³¨é‡ŠèŠ‚ç‚¹ | æ–‡æœ¬èŠ‚ç‚¹ | &lt;!doctype&gt;èŠ‚ç‚¹ã€‚ js é€‰æ‹©å™¨æ˜¯å°† js ä¸Ž html å»ºç«‹èµ·è¿žæŽ¥çš„æ¡¥æ¢ï¼Œå°±å¥½æ¯” css é€‰æ‹©å™¨æ˜¯ css ä¸Ž html çš„æ¡¥æ¢ï¼Œä¸è¿‡js ä¸­å°† html æ ‡ç­¾ç§°ä¸ºå…ƒç´ ã€‚ 123456789101112131415161718192021222324&lt;!DOCTYPE html&gt;&lt;html&gt;&lt;head&gt; &lt;meta charset="UTF-8"&gt; &lt;title&gt;jsé€‰æ‹©å™¨&lt;/title&gt; &lt;style&gt; #d &#123; color: red; &#125; &lt;/style&gt;&lt;/head&gt;&lt;body id="bd"&gt; &lt;!--æ³¨é‡Š--&gt; &lt;div id="d" class="dd"&gt;æˆ‘æ˜¯ddd111&lt;/div&gt; &lt;div id="d" class="dd"&gt;æˆ‘æ˜¯ddd222&lt;/div&gt; &lt;div class="sup1"&gt; &lt;div id="div"&gt;&lt;/div&gt; &lt;/div&gt; &lt;div class="sup2"&gt; &lt;div id="div"&gt;&lt;/div&gt; &lt;/div&gt;&lt;/body&gt;&lt;/html&gt; é€šè¿‡ id åè¿›è¡ŒåŒ¹é…123&lt;script&gt; console.log(d); // ä¸¤ä¸ªéƒ½å¯ä»¥åŒ¹é…åˆ° &lt;/script&gt; é€šè¿‡ getElementæ‰€æœ‰æ˜¾ç¤ºåœ¨é¡µé¢ä¸­çš„å†…å®¹éƒ½æ˜¯å±žäºŽæ–‡æ¡£ï¼ˆdocumentï¼‰å¯¹è±¡çš„å†…å®¹ï¼Œå­˜æ”¾åœ¨æ–‡æ¡£ä¸­ã€‚ 123456789console.log(document)// id èŽ·å–getElementById('id å'); // åªèƒ½ç”± document æ¥è°ƒç”¨// class èŽ·å–getElementByClassName('class å'); // å¯ä»¥ç”± document ä»¥åŠæ‰€æœ‰çˆ¶çº§è°ƒç”¨// tag èŽ·å–getElementByTagName('æ ‡ç­¾å'); // å¯ä»¥ç”± document ä»¥åŠæ‰€å±žçˆ¶çº§è°ƒç”¨ querySelector123456789// èŽ·å–ç¬¬ä¸€ä¸ªæ»¡è¶³è¦æ±‚çš„ç›®æ ‡querySelector()// èŽ·å–æ‰€æœ‰æ»¡è¶³è¦æ±‚çš„ç›®æ ‡querySelectorAll()// 1. å‚æ•°ï¼šé‡‡ç”¨çš„ä¸º css é€‰æ‹©å™¨è¯­æ³•// 2. å¯ä»¥ç”± document ä»¥åŠçˆ¶çº§æ¥è°ƒç”¨// 3. å¯¹ id æ£€ç´¢ä¸ä¸¥è°¨ï¼Œæ…Žç”¨ id é€‰æ‹©å™¨ js æ“ä½œé¡µé¢å†…å®¹ æ–‡æœ¬å†…å®¹ 12box.innerText// å¯ä»¥è®¾ç½®ï¼Œä¹Ÿå¯ä»¥ç›´æŽ¥èŽ·å–å€¼ æ ‡ç­¾å†…å®¹ 12345box.innerHTML// å¯ä»¥è®¾ç½®ï¼Œä¹Ÿå¯ä»¥èŽ·å–å€¼ï¼Œèƒ½è§£æž html è¯­æ³•ä»£ç box.outerHTML// èŽ·å–åŒ…å«è‡ªèº«æ ‡ç­¾ä¿¡æ¯çš„æ‰€æœ‰å­å†…å®¹ä¿¡æ¯ æ ·å¼ 12345/ box.style.æ ·å¼å ==&gt; å¯ä»¥è®¾å€¼,ä¹Ÿå¯ä»¥èŽ·å–,ä½†æ“ä½œçš„åªèƒ½æ˜¯è¡Œé—´å¼// getComputedStyle(box, null).æ ·å¼å ==&gt; åªèƒ½èŽ·å–å€¼,ä¸èƒ½è®¾å€¼, èƒ½èŽ·å–æ‰€æœ‰æ–¹å¼è®¾ç½®çš„å€¼(è¡Œé—´å¼ ä¸Ž è®¡ç®—åŽæ ·å¼)// æ³¨: èŽ·å–è®¡ç®—åŽæ ·å¼,éœ€è¦å…³æ³¨å€¼çš„æ ¼å¼ é¡µé¢æ ‡ç­¾å…¨å±€å±žæ€§æ“ä½œ 123456ele.getAttribute("alert");// èŽ·å–é¡µé¢æ ‡ç­¾eleçš„alertå…¨å±€å±žæ€§çš„å€¼, å¦‚æžœæ²¡æœ‰è¯¥å…¨å±€å±žæ€§å€¼ä¸ºnullele.setAttribute("attr_key", "attr_value");// é¡µé¢æ ‡ç­¾eleå·²æœ‰è¯¥å…¨å±€å±žæ€§,å°±æ˜¯ä¿®æ”¹å€¼, æ²¡æœ‰å°±æ˜¯æ·»åŠ è¯¥å…¨å±€å±žæ€§å¹¶èµ‹ç›¸åº”å€¼// æ³¨: ä¸€èˆ¬åº”ç”¨åœºæ™¯, ç»“åˆcssçš„å±žæ€§é€‰æ‹©å™¨å®Œæˆæ ·å¼ä¿®æ”¹ äº‹ä»¶12345678910111213// jsäº‹ä»¶: é¡µé¢æ ‡ç­¾åœ¨æ»¡è¶³æŸç§æ¡ä»¶ä¸‹å¯ä»¥å®ŒæˆæŒ‡å®šåŠŸèƒ½çš„è¿™ç§è¿‡ç¨‹, æˆä¹‹ä¸ºäº‹ä»¶// æŸç§æ¡ä»¶: å¦‚é¼ æ ‡ç‚¹å‡»æ ‡ç­¾: ç‚¹å‡»äº‹ä»¶ | é¼ æ ‡åŒå‡»æ ‡ç­¾: åŒå‡»äº‹ä»¶ | é”®ç›˜æŒ‰ä¸‹: é”®ç›˜æŒ‰ä¸‹äº‹ä»¶// æŒ‡å®šåŠŸèƒ½: å°±æ˜¯å¼€å‘è€…æ ¹æ®å®žé™…éœ€æ±‚å®Œæ•´ç›¸åº”çš„åŠŸèƒ½å®žçŽ°// é’©å­å‡½æ•°: å°±æ˜¯æ»¡è¶³æŸç§æ¡ä»¶è¢«ç³»ç»Ÿå›žè°ƒçš„å‡½æ•°(å®ŒæˆæŒ‡å®šåŠŸèƒ½)// ç‚¹å‡»äº‹ä»¶: æ˜Žç¡®æ¿€æ´»é’©å­çš„æ¡ä»¶ = æ¿€æ´»é’©å­åŽæ”¹å¤„ç†ä»€ä¹ˆé€»è¾‘, å®ŒæˆæŒ‡å®šåŠŸèƒ½(å‡½æ•°)// èŽ·å–é¡µé¢æ ‡ç­¾æ˜¯å‰ævar div = document.querySelector('.div');// é’©å­æ¡ä»¶: åŒå‡» = æŒ‡å®šåŠŸèƒ½(è‡ªèº«èƒŒæ™¯é¢œè‰²å˜çº¢)div.ondblclick = function () &#123; this.style.backgroundColor = 'red';&#125; äº‹ä»¶çš„ç»‘å®š1234567891011// ç¬¬ä¸€ç§box.onclick = function()&#123;&#125;// åªèƒ½ç»‘å®šä¸€ä¸ªå®žçŽ°ä½“, å¦‚æžœæœ‰å¤šæ¬¡ç»‘å®š, ä¿ç•™æœ€åŽä¸€æ¬¡// box.onclick = nullæ¥å–æ¶ˆäº‹ä»¶çš„ç»‘å®š// ç¬¬äºŒç§var fn = function() &#123;&#125;box.addEventListener('click', fn)// èƒ½ç»‘å®šå¤šä¸ªå®žçŽ°ä½“, å¦‚æžœæœ‰å¤šæ¬¡ç»‘å®š, æŒ‰é¡ºåºä¾æ¬¡æ‰§è¡Œ// box.removerEventListener('click', fn)æ¥å–æ¶ˆäº‹ä»¶çš„ç»‘å®š// äº†è§£: ç¬¬ä¸‰ä¸ªå‚æ•°å†³å®šå†’æ³¡é¡ºåº(å­çˆ¶çº§è°å…ˆç›¸åº”äº‹ä»¶) äº‹ä»¶å¯¹è±¡12345678910111213// ç³»ç»Ÿå›žè°ƒäº‹ä»¶å‡½æ•°æ—¶, ä¼ é€’äº†ä¸€ä¸ª äº‹ä»¶(event) å®žå‚// å¦‚æžœè¦ä½¿ç”¨ä¼ é€’æ¥çš„å®žå‚ äº‹ä»¶(event), å®šä¹‰æŽ¥æ”¶çš„ å½¢å‚ å³å¯box.onclick = function(ev)&#123; // ä½¿ç”¨äº‹ä»¶å¯¹è±¡ // ç‰¹æ®ŠæŒ‰é”® eg: ev.altKey: true | false // é¼ æ ‡è§¦å‘ç‚¹: ev.clientX | ev.clientY // å–æ¶ˆå†’æ³¡ ev.cancelBubber = true; // å–æ¶ˆé»˜è®¤äº‹ä»¶ return false;&#125;]]></content>
      <categories>
        <category>JavaScript</category>
      </categories>
  </entry>
  <entry>
    <title><![CDATA[websocket åˆè¯†]]></title>
    <url>%2F2018%2F12%2F22%2Fwebsocket-%E5%88%9D%E8%AF%86%2F</url>
    <content type="text"><![CDATA[websocket åˆè¯†å‰è¨€å…¶å®žå¾ˆæ—©å°±çŸ¥é“äº† websocket è¿™ä¸ªæ¦‚å¿µäº†ï¼ŒåƒçŽ°åœ¨å¤§ç«çš„ç›´æ’­ç­‰ä½¿ç”¨çš„å°±æ˜¯ websocketã€‚ä¹‹å‰æ‰¾çˆ¬è™«å·¥ä½œï¼Œå¯¹é¢é—®æˆ‘çˆ¬è¿‡ websocket ç½‘ç«™æ²¡ï¼Œå¾ˆæ±—é¢œï¼Œé‚£æ—¶å€™è¿˜åªæ˜¯å¬è¯´è¿‡ã€‚çŽ°åœ¨æƒ³äº†è§£ä¸€ä¸‹ï¼ŒåŸºäºŽ JavaScript è¯­è¨€ã€‚ Websocket æ˜¯ä»€ä¹ˆwebsocket æ˜¯ä¸€ç§ç½‘ç»œé€šä¿¡åè®®ï¼Œè¿è¡Œåœ¨ TCP åè®®ä¹‹ä¸Šã€‚ å¯¹äºŽä¼ ç»Ÿçš„ HTTP åè®®æ¥è¯´ï¼Œé€šä¿¡åªèƒ½ç”±å®¢æˆ·ç«¯å‘èµ·ï¼Œç„¶åŽæœåŠ¡ç«¯å“åº”ã€‚HTTP åè®®åšä¸åˆ°æœåŠ¡å™¨åˆ¶åŠ¨å‘å®¢æˆ·ç«¯æŽ¨é€ä¿¡æ¯ã€‚HTTP åè®®çš„è¿™ç§å•å‘è¯·æ±‚çš„ç‰¹ç‚¹ï¼Œæ³¨å®šäº†å¦‚æžœæœåŠ¡å™¨æœ‰è¿žç»­çš„çŠ¶æ€å˜åŒ–ï¼Œå®¢æˆ·ç«¯è¦èŽ·çŸ¥å°±éžå¸¸éº»çƒ¦ã€‚åªèƒ½ä½¿ç”¨â€˜â€™è½®è¯¢â€˜â€™ï¼šï¼ˆéžé˜»å¡žé€šä¿¡ï¼‰ï¼Œæ¯éš”ä¸€æ®µæ—¶å€™ï¼Œå°±å‘å‡ºä¸€ä¸ªè¯¢é—®ï¼Œäº†è§£æœåŠ¡å™¨æœ‰æ²¡æœ‰æ–°çš„æ¶ˆæ¯ã€‚è½®è¯¢çš„æ•ˆçŽ‡ä½Žï¼Œéžå¸¸æµªè´¹èµ„æºã€‚ websocket åè®®åœ¨2008å¹´è¯žç”Ÿï¼Œå®ƒçš„æœ€å¤§ç‰¹ç‚¹å°±æ˜¯æœåŠ¡å™¨å¯ä»¥ä¸»åŠ¨å‘å®¢æˆ·ç«¯æŽ¨é€æ¶ˆæ¯ï¼Œå®¢æˆ·ç«¯ä¹Ÿå¯ä»¥ä¸»åŠ¨å‘æœåŠ¡å™¨å‘é€æ¶ˆæ¯ï¼Œæ˜¯çœŸæ­£çš„åŒå‘å¹³ç­‰å¯¹è¯ï¼Œå±žäºŽæœåŠ¡å™¨æŽ¨é€æŠ€æœ¯çš„ä¸€ç§ã€‚websocket å…è®¸æœåŠ¡å™¨ç«¯ä¸Žå®¢æˆ·ç«¯è¿›è¡Œå…¨åŒå·¥é€šä¿¡ã€‚å…¶ç‰¹ç‚¹å¦‚ä¸‹ï¼š å»ºç«‹åœ¨ TCP åè®®ä¹‹ä¸Šï¼ŒæœåŠ¡ç«¯çš„å®žçŽ°æ¯”è¾ƒå®¹æ˜“ï¼› ä¸Ž HTTP åè®®æœ‰ç€è‰¯å¥½çš„å…¼å®¹æ€§ã€‚é»˜è®¤ç«¯å£ä¹Ÿæ˜¯80å’Œ443ï¼Œå¹¶ä¸”æ¡æ‰‹é˜¶æ®µé‡‡ç”¨ HTTP åè®®ï¼Œå› æ­¤æ¡æ‰‹æ—¶ä¸å®¹æ˜“å±è”½ï¼Œèƒ½é€šè¿‡å„ç§ HTTP ä»£ç†æœåŠ¡å™¨ï¼› æ•°æ®ä¸ªæ•°æ¯”è¾ƒè½»é‡ï¼Œæ€§èƒ½å¼€é”€å°ï¼Œé€šä¿¡é«˜æ•ˆï¼› å¯ä»¥å‘é€æ–‡æœ¬ï¼Œä¹Ÿå¯ä»¥å‘é€äºŒè¿›åˆ¶æ•°æ®ï¼› æ²¡æœ‰åŒæºé™åˆ¶ï¼Œå®¢æˆ·ç«¯å¯ä»¥ä¸Žä»»æ„æœåŠ¡å™¨é€šä¿¡ï¼Œå®Œå…¨å¯ä»¥å–ä»£ AJAXï¼› åè®®æ ‡è¯†ç¬¦æ˜¯ wsï¼ˆåŠ å¯†å°±æ˜¯ wssï¼‰ï¼ŒæœåŠ¡å™¨ç½‘å€ä¸º URLã€‚ 1ws://example.com:80/some/path websocket æ¡æ‰‹æµè§ˆå™¨å‘å‡ºçš„ websocket æ¡æ‰‹è¯·æ±‚ç±»ä¼¼äºŽä¸‹é¢ï¼š 1234567GET / HTTP/1.1Connection: UpgradeUpgrade: websocketHost: example.comOrigin: nullSec-WebSocket-Key: ...Sec-WebSocket-Version: 13 è¿™æ˜¯æ•°æ®å¤´ï¼ŒHTTP1.1åè®®è§„å®šï¼ŒUpgrade å­—æ®µè¡¨ç¤ºå°†é€šä¿¡åè®®ä»Ž HTTP/1.1è½¬å‘è¯¥å­—æ®µæŒ‡å®šçš„åè®®ã€‚Connection å­—æ®µè¡¨ç¤ºæµè§ˆå™¨é€šçŸ¥æœåŠ¡å™¨ï¼Œå¦‚æžœå¯ä»¥çš„è¯å°±å‡çº§åˆ° WebScoket åè®®ã€‚Origin å­—æ®µç”¨äºŽæä¾›è¯·æ±‚å‘å‡ºçš„åŸŸåï¼Œä¾›æœåŠ¡å™¨éªŒè¯æ˜¯å¦è®¸å¯çš„èŒƒå›´å†…ï¼ˆæœåŠ¡å™¨å¯ä»¥ä¸éªŒè¯ï¼‰ã€‚Sec-Websocket-Key åˆ™æ˜¯ç”¨äºŽæ¡æ‰‹åè®®çš„å¯†é’¥ï¼Œæ˜¯ Base64ç¼–ç çš„16å­—èŠ‚éšæœºå­—ç¬¦ä¸²ï¼ˆå¯ä»¥åè§£ï¼‰ã€‚ æœåŠ¡å™¨çš„ WebSocket å›žåº”å¦‚ä¸‹ï¼š 123456HTTP/1.1 101 Switching ProtocolsConnection: UpgradeUpgrade: websocketSec-WebSocket-Accept: ...Sec-WebSocket-Origin: nullSec-WebSocket-Location: ws://exammple.com/ æœåŠ¡å™¨åŒæ ·ç”¨ Connection å­—æ®µé€šçŸ¥æµè§ˆå™¨ï¼Œå¯ä»¥æ”¹å˜åè®®ä¸º Websocketï¼ŒSec-WebSocket-Accept å­—æ®µæ˜¯æœåŠ¡å™¨åœ¨æµè§ˆå™¨æä¾›çš„ Sec-Webscoket-Key å­—ç¬¦ä¸²åŽé¢ï¼Œæ·»åŠ  RFC6465ï¼ˆä¸äº†è§£ï¼‰æ ‡å‡†è§„å®šçš„â€˜â€™258EAFA5-E914-47DA-95CA-C5AB0DC85B11â€˜â€™å­—ç¬¦ä¸²ï¼Œç„¶åŽå†å– SHA-1çš„å“ˆå¸Œå€¼ã€‚æµè§ˆå™¨å°†å¯¹è¿™ä¸ªå€¼è¿›è¡ŒéªŒè¯ï¼Œä»¥è¯æ˜Žç¡®å®žæ˜¯ç›®æ ‡æœåŠ¡å™¨å›žåº”äº† Websocket è¯·æ±‚ã€‚Sec-WebSocket-Location å­—æ®µè¡¨ç¤ºè¿›è¡Œé€šä¿¡çš„ Websocket ç½‘å€ã€‚ å®Œæˆæ¡æ‰‹ä»¥åŽï¼ŒWebSocket åè®®å°±åœ¨ TCP åè®®ä¹‹ä¸Šï¼Œå¼€å§‹ä¼ é€æ•°æ®ã€‚ å®¢æˆ·ç«¯çš„ç¤ºä¾‹1234567891011121314var ws = new WebSocket('wss://echo.websocket.org'); // ç½‘å€ä¸å¯è¾¾ws.open = function(ev) &#123; console.log('Connection open...'); ws.send('Hello WebSocket!');&#125;;ws.onmessage = function(ev) &#123; console.log('Recevied Message: ' + ev.data);&#125;;ws.onclose = function(ev) &#123; console.log('Connection closed.');&#125; å®¢æˆ·ç«¯ APIæµè§ˆå™¨å¯¹ WebSocket åè®®çš„å¤„ç†ï¼Œæ— éžæ˜¯ä¸‰ä»¶äº‹ï¼š å»ºç«‹è¿žæŽ¥å’Œæ–­å¼€è¿žæŽ¥ï¼› å‘é€æ•°æ®å’ŒæŽ¥æ”¶æ•°æ®ï¼› å¤„ç†é”™è¯¯ã€‚ æž„é€ å‡½æ•° WebSocketWebSocket å¯¹è±¡ä½œä¸ºä¸€ä¸ªæž„é€ å‡½æ•°ï¼Œç”¨äºŽæ–°å»º WebSocketå®žä¾‹ã€‚ 1var ws = new WebSocket('ws://localhost:8080'); æ‰§è¡Œä¸Šé¢è¯­å¥åŽï¼Œå®¢æˆ·ç«¯å°±ä¼šä¸ŽæœåŠ¡å™¨è¿›è¡Œè¿žæŽ¥ã€‚ WebSocket.readyStateè·Ÿ HTTP åè®®ä¸€æ ·ï¼ŒWebSocket ä¹Ÿæœ‰è‡ªå·±çš„çŠ¶æ€ç ï¼š CONNECTINGï¼šå€¼ä¸º0ï¼Œè¡¨ç¤ºæ­£åœ¨è¿žæŽ¥ï¼› OPENï¼šå€¼ä¸º1ï¼Œè¡¨ç¤ºè¿žæŽ¥æˆåŠŸï¼Œå¯ä»¥è¿›è¡Œé€šä¿¡ï¼› CLOSINGï¼šå€¼ä¸º2ï¼Œè¡¨ç¤ºè¿žæŽ¥æ­£åœ¨å…³é—­ï¼› CLOSEDï¼šå€¼ä¸º3ï¼Œè¡¨ç¤ºè¿žæŽ¥å·²ç»å…³é—­ï¼Œæˆ–è€…æ‰“å¼€è¿žæŽ¥å¤±è´¥ã€‚ å®žä¾‹ï¼š 1234567891011121314151617switch (ws.readyState) &#123; case WebSocket.CONNECTING: // do something break; case WebSocket.OPEN: // do something break; case WebSocket.CLOSING: // do something break; case WebSocket.CLOSED: // do something break; default: // this never happend break;&#125; webSocket.onopenå®žä¾‹å¯¹è±¡çš„ onopen å±žæ€§ï¼Œç”¨äºŽæŒ‡å®šè¿žæŽ¥æˆåŠŸåŽçš„å›žè°ƒå‡½æ•°ã€‚ 123ws.onopen = function () &#123; ws.send('Hello MUSIBII');&#125; å¦‚æžœè¦æŒ‡å®šå¤šä¸ªå›žè°ƒå‡½æ•°ï¼Œå¯ä»¥ä½¿ç”¨ addEventListener æ–¹æ³•ã€‚ 123ws.addEventListener('open', function () &#123; ws.send('Hello MUSIBII');&#125;) webSocket.oncloseå®žä¾‹å¯¹è±¡çš„ onclose å±žæ€§ï¼Œç”¨äºŽæŒ‡å®šè¿žæŽ¥å…³é—­åŽçš„å›žè°ƒå‡½æ•°ã€‚ 12345678910111213ws.onclose = function (ev) &#123; var code = ev.code; var reason = ev.reason; var wasClean = ev.wasClean; // handle close event&#125;;ws.addEnentListener('close', function (ev) &#123; var code = ev.clde; var reason = ev.reason; var wasClean = ev.wasClean; // handle close event&#125;) webSocket.onmessageå®žä¾‹å¯¹è±¡çš„ onmessage å±žæ€§ï¼Œç”¨äºŽæŒ‡å®šæ”¶åˆ°æœåŠ¡å™¨æ•°æ®åŽçš„å›žè°ƒå‡½æ•°ã€‚ 123456789ws.onmessage = function (ev) &#123; var data = ev.data; // handle data&#125;;ws.addEvendListener('message', function (ev) &#123; var date = ev.data; // handle data&#125;) æ³¨æ„ï¼šæœåŠ¡å™¨çš„æ•°æ®å¯èƒ½æ˜¯æ–‡æœ¬ï¼Œä¹Ÿå¯èƒ½æ˜¯äºŒè¿›åˆ¶æ•°æ®ï¼ˆblob å¯¹è±¡æˆ– Arraybuffer å¯¹è±¡ï¼‰ã€‚ 12345678910ws.onmessage = function (ev) &#123; if(typeof ev.data === String) &#123; console.log('Received data string'); &#125; if(ev.data instanceof ArrayBuffer) &#123; var buffer = ev.data; console.log('Received arraybuffer'); &#125;&#125; é™¤äº†åŠ¨æ€åˆ¤æ–­æ”¶åˆ°çš„æ•°æ®ç±»åž‹ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨ binaryType å±žæ€§ï¼Œæ˜¾å¼æŒ‡å®šæ”¶åˆ°çš„äºŒè¿›åˆ¶æ•°æ®ç±»åž‹ã€‚ 1234567891011// æ”¶åˆ°çš„æ˜¯ blob æ•°æ®ws.binaryType = 'blob';ws.onmessage = function (ev) &#123; console.log(ev.data.size);&#125;;// æ”¶åˆ°çš„æ˜¯ ArrayBuffer æ•°æ®ws.binaryType = 'arraybuffer';ws.onmessage = function (ev) &#123; console.log(ev.data.byteLength);&#125; webSocket.send()å®žä¾‹å¯¹è±¡çš„ send() æ–¹æ³•ç”¨äºŽå‘æœåŠ¡å™¨å‘é€æ•°æ®ã€‚ å‘é€æ–‡æœ¬çš„ä¾‹å­ã€‚ 1ws.send('your message'); å‘é€ Blob å¯¹è±¡çš„ä¾‹å­ã€‚ 12var file = document.querySelector('input[type = "file"]').files[0];ws.send(file); å‘é€ ArrayBuffer å¯¹è±¡çš„ä¾‹å­ã€‚ 12345678// Senging canvas ImageData as ArrayBuffervar img = canvas_context.getImageData(0, 0, 400, 320);var binary = new Uint8Array(img.data.length);for (var i = 0; i &lt; img.data.length; i++) &#123; binary[i] = img.data[i];&#125;;ws.seng(binary.buffer); webSocket.bufferedAmoutå®žä¾‹å¯¹è±¡çš„ bufferedAmout å±žæ€§ï¼Œè¡¨ç¤ºè¿˜æœ‰å¤šå°‘å­—èŠ‚çš„äºŒçº§åˆ¶æ•°æ®æ²¡æœ‰å‘é€å‡ºåŽ»ã€‚å®ƒå¯ä»¥ç”¨æ¥åˆ¤æ–­å‘é€æ˜¯å¦ç»“æŸã€‚ 12345678var data = new ArrayBuffer(100000);socket.send(data);if (socket.bufferedAmount === 0) &#123; // å‘é€å®Œæ¯•&#125; else &#123; // å‘é€æ²¡æœ‰ç»“æŸ&#125; webSocket.onerrorå®žä¾‹å¯¹è±¡çš„ onerror å±žæ€§ï¼Œç”¨äºŽæŒ‡å®šæŠ¥é”™æ—¶çš„å›žè°ƒå‡½æ•°ã€‚ 1234567socket.onerror = function (ev) &#123; // handle error event&#125;;socket.addEventListener('error', function (ev) &#123; // handle error enent&#125;);]]></content>
      <categories>
        <category>websocket</category>
      </categories>
  </entry>
  <entry>
    <title><![CDATA[JavaScriptï¼ˆäº”ï¼‰]]></title>
    <url>%2F2018%2F12%2F21%2FJavaScript%EF%BC%88%E4%BA%94%EF%BC%89%2F</url>
    <content type="text"><![CDATA[JavaScript ç³»åˆ—åšå®¢ä¹‹ï¼ˆäº”ï¼‰å‰è¨€æœ¬ç¯‡ä»‹ç» JavaScript ä¸­çš„å¯¹è±¡ã€‚åœ¨ç¬¬ä¸€ç¯‡åšå®¢ä¸­å·²ç»è¯´åˆ° JavaScript æ˜¯ä¸€ç§â€˜â€™å¯¹è±¡æ¨¡åž‹â€˜â€™è¯­è¨€ã€‚æ‰€ä»¥å¯ä»¥è¿™æ ·è¯´ï¼Œå¯¹è±¡æ˜¯ JavaScript è¯­è¨€çš„æ ¸å¿ƒæ¦‚å¿µï¼Œä¹Ÿæ˜¯æœ€é‡è¦çš„æ•°æ®ç±»åž‹ã€‚ æ¦‚è¿°ç”Ÿæˆæ–¹æ³•åœ¨ JavaScript ä¸­å£°ç§°å¯¹è±¡ç›¸å½“æ–¹ä¾¿ï¼Œç›´æŽ¥å®šä¹‰ä¸€ä¸ªç©ºå­—å…¸å°± okã€‚æƒ³è¦æ·»åŠ å±žæ€§æˆ–è€…æ–¹æ³•çš„è¯å¯ä»¥åœ¨å®šä¹‰ç»“æŸä¹‹åŽåŠ¨æ€æ·»åŠ ã€‚æ³¨æ„ï¼šå¯¹è±¡æ—¶æ— åºçš„å¤åˆæ•°æ®é›†åˆã€‚ ä¸Šé¢ä»£ç ä¸­ï¼Œå¤§æ‹¬å·å°±å¯ä»¥ç›´æŽ¥å®šä¹‰ä¸€ä¸ªå¯¹è±¡ï¼Œè¢«èµ‹å€¼ç»™å˜é‡ aï¼Œæ‰€ä»¥ a å°±æŒ‡å‘ä¸€ä¸ªå¯¹è±¡ã€‚è¯¥å¯¹è±¡ä¸ºä¸€ä¸ªç©ºå¯¹è±¡ï¼Œä½†æ˜¯ä¼šæœ‰ä¸€äº›é»˜è®¤çš„æ–¹æ³•ï¼Œåƒ constructor æ˜¯æž„é€ æ–¹æ³•ï¼Œæƒ³è¦åŠ¨æ€çš„æ·»åŠ å±žæ€§å’Œæ–¹æ³•å°±æ˜¯è¿™ä¸ªæ–¹æ³•çš„åŠŸåŠ³ã€‚ åœ¨è¿™é‡Œæ·»åŠ äº†ä¸€ä¸ªå±žæ€§ä¸ºnameï¼Œé‚£ä¹ˆ name æ˜¯é”®åï¼ˆæˆå‘˜åç§°ï¼‰ï¼Œå­—ç¬¦ä¸² musibii æ˜¯é”®å€¼ï¼ˆæˆå‘˜çš„å€¼ï¼‰ã€‚é”®åä¸Žé”®å€¼ä¹‹é—´ç”¨å†’å·åˆ†éš”ã€‚å¦‚æžœå†æ·»åŠ ä¸€ä¸ªå±žæ€§ï¼Œé‚£ä¹ˆå±žæ€§ä¹‹é—´ä½¿ç”¨é€—å·åˆ†éš”ã€‚ å…·ä½“ç”Ÿæˆæ–¹æ³•1234567891011121314151617181920212223242526272829303132333435363738394041424344// 1.å•ä¸€å¯¹è±¡var obj = &#123; // å±žæ€§ name: 'Zero', // æ–¹æ³• teach: function () &#123; console.log("æ•™å­¦"); &#125;&#125;;obj.name | obj.teach()// 2.æž„é€ å‡½æ•°function Person(name) &#123; // ç±»ä¼¼äºŽpythonä¸­çš„ç±»ä¸€æ ·æ¥ä½¿ç”¨ // thisä»£è¡¨Personæž„é€ å‡½æ•°å®žä¾‹åŒ–å‡ºçš„æ‰€æœ‰å…·ä½“å¯¹è±¡ä¸­çš„æŸä¸€ä¸ª this.name = name; this.teach = function () &#123; console.log(this.name + "æ­£åœ¨æ•™å­¦"); &#125;&#125;// â‘ é€šè¿‡æž„é€ å‡½æ•°å®žä¾‹åŒ–å‡ºå…·ä½“å¯¹è±¡// â‘¡é€šè¿‡å¯¹è±¡.è¯­æ³•è°ƒç”¨å±žæ€§ä¸Žæ–¹æ³•var p1 = new Person("å¼ ä¸‰"); p1.name // å¼ ä¸‰, thisæŒ‡å‘p1å¯¹è±¡var p2 = new Person("æŽå››"); p2.teach // æŽå››æ­£åœ¨æ•™å­¦, thisæŒ‡å‘p2å¯¹è±¡// 3.ES6ç±»è¯­æ³•class Student &#123; // éœ€è¦æž„é€ å™¨(æž„é€ å‡½æ•°)æ¥å®Œæˆå¯¹è±¡çš„å£°æ˜Žä¸Žåˆå§‹åŒ– constructor (name) &#123; // å±žæ€§åœ¨æž„é€ å™¨ä¸­å£°æ˜Žå¹¶å®Œæˆåˆå§‹åŒ– this.name = name; &#125; // ç±»ä¸­è§„å®šæ™®é€šæ–¹æ³• study () &#123; console.log(this.name + "æ­£åœ¨å­¦ä¹ "); &#125; // ç±»æ–¹æ³• static fn() &#123; console.log("æˆ‘æ˜¯ç±»æ–¹æ³•") &#125;&#125;// ç±»ä¸­çš„æ™®é€šæ–¹æ³•ç”±ç±»çš„å…·ä½“å®žä¾‹åŒ–å¯¹è±¡æ¥è°ƒç”¨// ç±»ä¸­çš„ç±»æ–¹æ³•ç”±ç±»ç›´æŽ¥æ¥è°ƒç”¨(è¿™ç±»åž‹çš„æ–¹æ³•å¤§å¤šæ˜¯åŠŸèƒ½æ€§æ–¹æ³•,ä¸éœ€è¦å¯¹è±¡çš„å­˜åœ¨) é”®åå¯¹è±¡çš„æ‰€æœ‰é”®åéƒ½æ˜¯å­—ç¬¦ä¸²ï¼ˆES6åˆå¼•å…¥äº† Symbol å€¼ä¹Ÿå¯ä»¥ä½œä¸ºé”®åï¼šè¿˜æ²¡äº†è§£è¿‡ï¼‰ï¼Œæ‰€ä»¥åŠ ä¸åŠ å¼•å·éƒ½å¯ä»¥ã€‚å¦‚æžœé”®åæ˜¯æ•°å€¼ï¼Œä¼šè¢«è‡ªåŠ¨è½¬ä¸ºå­—ç¬¦ä¸²ã€‚å¦‚æžœé”®åä¸ç¬¦åˆæ ‡è¯†åçš„æ¡ä»¶ï¼ˆæ¯”å¦‚ç¬¬ä¸€ä¸ªå­—ç¬¦ä¸ºæ•°å­—ï¼Œæˆ–è€…å«æœ‰ç©ºæ ¼æˆ–è¿ç®—ç¬¦ï¼‰ï¼Œä¸”ä¹Ÿä¸æ˜¯æ•°å­—ï¼Œåˆ™å¿…é¡»åŠ ä¸Šå¼•å·ï¼Œå¦åˆ™ä¼šæŠ¥é”™ã€‚ å¯¹è±¡çš„æ¯ä¸€ä¸ªé”®ååˆç§°ä¸ºâ€˜â€™å±žæ€§â€˜â€™ï¼Œå®ƒçš„é”®å€¼å¯ä»¥æ˜¯ä»»ä½•æ•°æ®ç±»åž‹ã€‚å¦‚æžœä¸€ä¸ªå±žæ€§çš„å€¼ä¸ºå‡½æ•°ï¼Œé€šå¸¸æŠŠè¿™ä¸ªå±žæ€§ç§°ä¸ºæ–¹æ³•ï¼Œè°ƒç”¨æ–¹æ³•å’Œå‡½æ•°ä¸€æ ·ã€‚ ç‰¹åˆ«çš„å¦‚æžœå±žæ€§çš„å€¼æŒ‡å‘çš„è¿˜æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œé‚£ä¹ˆå°±è¡Œæˆäº†é“¾å¼å¼•ç”¨ã€‚å¯¹è±¡çš„å±žæ€§ä¹‹é—´ç”¨é€—å·åˆ†éš”ï¼Œæœ€åŽä¸€ä¸ªå±žæ€§åŽé¢å¯ä»¥åŠ é€—å·ï¼Œä¹Ÿå¯ä»¥ä¸åŠ ã€‚ å¯¹è±¡çš„å¼•ç”¨å¦‚æžœä¸åŒçš„å˜é‡åæŒ‡å‘åŒä¸€ä¸ªå¯¹è±¡ï¼Œé‚£ä¹ˆå®ƒä»¬éƒ½æ˜¯è¿™ä¸ªå¯¹è±¡çš„å¼•ç”¨ï¼Œä¹Ÿå°±æ˜¯è¯´æŒ‡å‘åŒä¸€ä¸ªå†…å­˜åœ°å€ã€‚ä¿®æ”¹å…¶ä¸­ä¸€ä¸ªå˜é‡ï¼Œä¼šå½±å“åˆ°å…¶ä»–æ‰€æœ‰çš„å¼•ç”¨ã€‚å’Œ JavaScript ä¸­çš„åŸºæœ¬æ•°æ®ç±»åž‹ä¸ä¸€æ ·ï¼Œå¤åˆæ•°æ®ç±»åž‹æ˜¯ä¼ å€ä¼ é€’ã€‚ a å’Œ bæŒ‡å‘åŒä¸€ä¸ªå¯¹è±¡ï¼Œå› æ­¤ä¸ºå…¶ä¸­ä»»ä½•ä¸€ä¸ªå˜é‡æ·»åŠ å±žæ€§ï¼Œå¦ä¸€ä¸ªå˜è„¸éƒ½å¯ä»¥è¯»å†™è¯¥å±žæ€§ã€‚å¦‚æžœå–æ¶ˆæŸä¸€ä¸ªå¯¹è±¡çš„å¼•ç”¨ï¼Œä¸ä¼šå½±å“åˆ°å…¶ä»–å˜é‡ã€‚ è¿™ç§å¼•ç”¨åªå±€é™äºŽå¯¹è±¡ï¼Œåœ¨ä¹‹å‰çš„åšå®¢ä¹Ÿæåˆ°ï¼Œä¸¤ä¸ªå˜é‡æŒ‡å‘åŒä¸€ä¸ªåŽŸå§‹ç±»åž‹ï¼ˆåŸºæœ¬æ•°æ®ç±»åž‹ï¼‰çš„å€¼ï¼Œé‚£ä¹ˆå˜é‡åªæ˜¯å¯¹å€¼å¾—æ‹·è´ï¼ˆä¼ å€¼ä¼ é€’ï¼‰ã€‚ å±žæ€§çš„æ“ä½œå±žæ€§çš„è¯»å–è¯»å–å¯¹è±¡çš„å±žæ€§ï¼Œæœ‰ä¸¤ç§æ–¹æ³•ï¼Œä¸€ç§æ˜¯ä½¿ç”¨ç‚¹è¿ç®—ç¬¦ï¼›å¦ä¸€ç§æ˜¯ä½¿ç”¨æ–¹æ‹¬å·è¿ç®—ç¬¦ã€‚ï¼ˆåœ¨ python ä¸­ï¼Œå­—å…¸åªèƒ½é€šè¿‡æ–¹æ‹¬å·å–å€¼ï¼›å¯¹è±¡åªå¯ä»¥é€šè¿‡ç‚¹è¿ç®—ç¬¦å–å€¼ã€‚ä¸è¿‡å¯ä»¥é€šè¿‡è‡ªå®šä¹‰å­—å…¸ç±»æ”¹å†™ getattr é­”æœ¯æ–¹æ³•æ”¹å˜ã€‚ï¼‰ æ³¨æ„ï¼šå¦‚æžœä½¿ç”¨æ–¹æ‹¬å·è¿ç®—ç¬¦ï¼Œé”®åå¿…é¡»æ”¾åœ¨å¼•å·é‡Œé¢ï¼Œå¦åˆ™ä¼šè¢«å½“åšå˜é‡å¤„ç†ã€‚ 123456789var foo = 'bar';var obj = &#123; foo: 1, bar: 2&#125;;obj.foo // 1obj[foo]// 2 ä¸Šé¢ä»£ç ä¸­ï¼Œå¼•ç”¨å¯¹è±¡obj çš„ foo å±žæ€§æ—¶ï¼Œå¦‚æžœä½¿ç”¨ç‚¹è¿ç®—ç¬¦ï¼Œfoo å°±æ˜¯å­—ç¬¦ä¸²ï¼›å¦‚æžœä½¿ç”¨æ–¹æ‹¬å·è¿ç®—ç¬¦ï¼Œä½†æ˜¯ä¸ä½¿ç”¨å¼•å·ï¼Œé‚£ä¹ˆ foo å°±æ˜¯ä¸€ä¸ªå˜é‡ï¼ŒæŒ‡å‘å­—ç¬¦ä¸² barã€‚ æ–¹æ‹¬å·è¿ç®—ç¬¦å†…éƒ¨è¿˜å¯ä»¥ä½¿ç”¨è¡¨è¾¾å¼ï¼š 12obj['hello' + 'world']obj[3 + 3] æ•°å­—é”®å¯ä»¥ä¸åŠ å¼•å·ï¼Œå› ä¸ºä¼šè‡ªåŠ¨è½¬ä¸ºå­—ç¬¦ä¸²ã€‚ 12345var obj = &#123; 0.7: 'hello world'&#125;;obj['0.7'] // 'Hello World'obj[0.7] // 'Hello World' ä¸Šé¢ä»£ç å¯¹è±¡çš„æ•°å­—é”®0.7åŠ ä¸åŠ å¼•å·éƒ½å¯ä»¥ï¼Œå› ä¸ºä¼šè‡ªåŠ¨è½¬ä¸ºå­—ç¬¦ä¸²ã€‚ 123456var obj = &#123; 123: 'Hello musibii'&#125;;obj.123 // æŠ¥é”™obj[123] // 'Hello musibii' å¦‚æžœå¯¹æ•°å€¼é”®å123ä½¿ç”¨ç‚¹è¿ç®—ç¬¦ï¼Œä¼šæŠ¥é”™ï¼Œä½¿ç”¨æ–¹æ‹¬å·è¿ç®—ç¬¦æ‰æ˜¯æ­£ç¡®çš„æ–¹å¼ã€‚ å±žæ€§çš„èµ‹å€¼ç‚¹è¿ç®—ç¬¦å’Œæ–¹æ‹¬å·è¿ç®—ç¬¦ï¼Œä¸ä»…å¯ä»¥ç”¨æ¥è¯»å–å€¼ï¼Œè¿˜å¯ä»¥ç”¨æ¥èµ‹å€¼ã€‚ JavaScript å…è®¸å±žæ€§çš„åŽç»‘å®šï¼Œä¹Ÿå°±æ˜¯è¯´å¯ä»¥åœ¨ä»»æ„æ—¶åˆ»æ–°å¢žå±žæ€§ï¼Œæ²¡å¿…è¦åœ¨å®šä¹‰å¯¹è±¡çš„æ—¶å€™å°±æŠŠå±žæ€§å…¨éƒ½å®šä¹‰å¥½ã€‚ å±žæ€§çš„æŸ¥çœ‹æŸ¥çœ‹ä¸€ä¸ªå¯¹è±¡çš„æ‰€æœ‰å±žæ€§ä½¿ç”¨ Object.keys æ–¹æ³•ã€‚ 123456var obj = &#123; key1: 1, key2: 2&#125;;Object.keys(obj); // [key1, key2] å±žæ€§çš„åˆ é™¤delete å‘½ä»¤ç”¨äºŽåˆ é™¤å¯¹è±¡çš„å±žæ€§ï¼Œåˆ é™¤æˆåŠŸåŽè¿”å›ž trueã€‚ 1234567var obj = &#123; p: 1;&#125;delete obj.p; // trueobj.p // undefinedObject.keys(obj) // [] ä¸Šè¿°ä»£ç ä¸­ï¼Œdelete å‘½ä»¤åˆ é™¤å¯¹è±¡ obj çš„ p å±žæ€§ã€‚åˆ é™¤åŽï¼Œå†è¯»å– p å±žæ€§å°±ä¼šè¿”å›ž undefinedï¼Œè€Œä¸” Object.keys æ–¹æ³•çš„è¿”å›žå€¼ä¹Ÿä¸å†åŒ…æ‹¬è¯¥å±žæ€§ã€‚ æ³¨æ„ï¼šåˆ é™¤ä¸€ä¸ªä¸å­˜åœ¨çš„å±žæ€§ï¼Œdelete ä¸ä¼šæŠ¥é”™è€Œæ˜¯è¿”å›ž trueã€‚å› æ­¤ä¸èƒ½æ ¹æ® delete å‘½ä»¤çš„ç»“æžœè®¤ä¸ºæŸä¸ªå±žæ€§çš„å­˜åœ¨ã€‚ï¼ˆé‚£ä¹ˆåˆ°åº•å“ªç§æ–¹å¼æ‰å¯ä»¥è¯æ˜ŽæŸä¸ªå±žæ€§çš„å­˜åœ¨ä¸Žå¦ï¼‰ å¦‚æžœåˆ é™¤å±žæ€§æ—¶è¿”å›ž falseé‚£å°±è¯´æ˜Žè¯¥å±žæ€§å­˜åœ¨ï¼Œä½†æ˜¯ä¸å¯ä»¥åˆ é™¤ã€‚ 1234567var obj = Object.defineProperty(&#123;&#125;, 'p', &#123; value: 'musibii', configurable: false&#125;);obj.p // 'musibii'delete obj.p // false ä¸Šè¿°ä»£ç ä¸­ï¼Œé€šè¿‡ Object çš„definePropertyæ–¹æ³•ç»™å¯¹è±¡ objåˆ›å»ºäº†ä¸€ä¸ªå±žæ€§ï¼Œå±žæ€§çš„configurableï¼ˆå¯é…ç½®ï¼‰ çš„å€¼ä¸º falseï¼Œè¿™æ ·çš„ä¸€ä¸ªå±žæ€§å°±æ˜¯ä¸å¯ä»¥åˆ é™¤çš„ã€‚ å¦å¤–éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œdelete å‘½ä»¤åªèƒ½åˆ é™¤å¯¹è±¡æœ¬èº«çš„å±žæ€§ï¼Œæ— æ³•åˆ é™¤ç»§æ‰¿çš„å±žæ€§ã€‚ å¯ä»¥çœ‹å‡ºè™½ç„¶ delete å‘½ä»¤è¿”å›ž trueï¼Œä½†æ˜¯åˆ é™¤çš„å±žæ€§ä¾ç„¶å­˜åœ¨ã€‚ä½†æ˜¯å¦‚æžœé€šè¿‡ proto åˆ é™¤çš„è¯å°±å¯ä»¥åˆ é™¤ã€‚ åˆ¤æ–­å±žæ€§çš„å­˜åœ¨in è¿ç®—ç¬¦ç”¨äºŽæ£€å‡ºå¯¹è±¡æ˜¯å¦åŒ…å«æŸä¸ªå±žæ€§ï¼ˆæ³¨æ„ï¼Œæ£€æŸ¥çš„æ˜¯é”®åï¼Œä¸æ˜¯é”®å€¼ï¼‰ã€‚å¦‚æžœåŒ…å«å°±è¿”å›ž trueï¼Œå¦åˆ™å°±è¿”å›ž falseã€‚å®ƒçš„å·¦è¾¹æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œè¡¨ç¤ºå±žæ€§åï¼Œå³è¾¹åˆ™æ˜¯ä¸€ä¸ªå¯¹è±¡ã€‚ 123var obj = &#123;p: 1&#125;;'p' in obj //true'toString' in obj // true æ‹¿ä¸Šé¢åˆ é™¤çš„ constructor æ¥è¯´ï¼š in è¿ç®—ç¬¦çš„ä¸€ä¸ªé—®é¢˜æ˜¯ï¼Œå®ƒä¸èƒ½è¯†åˆ«å“ªäº›å±žæ€§æ—¶å¯¹è±¡è‡ªèº«çš„ï¼Œå“ªäº›å±žæ€§æ˜¯ç»§æ‰¿çš„ã€‚å°±åƒä¸Šé¢ï¼Œå¯¹è±¡ obj æœ¬èº«å¹¶æ²¡æœ‰ toString å±žæ€§ï¼Œä½†æ˜¯ in è¿ç®—ç¬¦ä¼šè¿”å›ž trueï¼Œå› ä¸ºè¿™ä¸ªå±žæ€§æ˜¯ç»§æ‰¿çš„ã€‚ è¿™æ—¶å¯ä»¥é€šè¿‡å¯¹è±¡çš„ hasOwnProperty æ–¹æ³•åˆ¤æ–­ï¼Œæ˜¯å¦ä¸ºå¯¹è±¡è‡ªèº«å±žæ€§ 1234var obj = &#123;&#125;;if ('toString' in obj) &#123; console.log(obj.hasOwnProperty('toString')); // fasle&#125; å±žæ€§éåŽ†forâ€¦in å¾ªçŽ¯ç”¨æ¥éåŽ†ä¸€ä¸ªå¯¹è±¡çš„æ‰€æœ‰å±žæ€§ã€‚ forâ€¦in å¾ªçŽ¯æœ‰ä¸¤ä¸ªæ³¨æ„ç‚¹; å®ƒéåŽ†çš„æ˜¯å¯¹è±¡æ‰€æœ‰å¯éåŽ†çš„å±žæ€§ï¼Œä¼šè·³è¿‡ä¸å¯éåŽ†çš„å±žæ€§ï¼› å®ƒä¸ä»…éåŽ†å¯¹è±¡è‡ªèº«çš„å±žæ€§ï¼Œè¿˜éåŽ†ç»§æ‰¿çš„å±žæ€§ã€‚ å¦‚æžœç»§æ‰¿çš„å±žæ€§æ˜¯å¯éåŽ†çš„ï¼Œé‚£ä¹ˆå°±ä¼šè¢« forâ€¦in å¾ªçŽ¯éåŽ†åˆ°ã€‚ä½†æ˜¯ï¼Œä¸€èˆ¬æƒ…å†µä¸‹ï¼Œéƒ½æ˜¯åªæƒ³éåŽ†å¯¹è±¡è‡ªèº«çš„å±žæ€§ï¼Œæ‰€ä»¥ä½¿ç”¨ forâ€¦in çš„æ—¶å€™ï¼Œåº”è¯¥ç»“åˆä½¿ç”¨ hasOwnProperty æ–¹æ³•ï¼Œåœ¨å¾ªçŽ¯å†…éƒ¨åˆ¤æ–­ä¸€ä¸‹ï¼ŒæŸä¸ªå±žæ€§æ˜¯å¦ä¸ºå¯¹è±¡è‡ªèº«çš„å±žæ€§ã€‚ 1234567var person = &#123;name: 'è€å¼ '&#125;;for (var key in person) &#123; if (person.hasOwnProperty(key)) &#123; console.log(key); &#125;&#125; // name with è¯­å¥with è¯­å¥çš„æ ¼å¼å¦‚ä¸‹ï¼š 123with (å¯¹è±¡) &#123; è¯­å¥;&#125; å®ƒçš„ä½œç”¨æ˜¯æ“ä½œåŒä¸€ä¸ªå¯¹è±¡çš„å¤šä¸ªå±žæ€§æ—¶ï¼Œæä¾›ä¸€äº›ä¹¦å†™çš„æ–¹ä¾¿ã€‚ æ³¨æ„ï¼šå¦‚æžœ with åŒºå—å†…éƒ¨æœ‰å˜é‡çš„èµ‹å€¼æ“ä½œï¼Œå¿…é¡»æ˜¯å½“å‰å¯¹è±¡å·²ç»å­˜åœ¨çš„å±žæ€§ï¼Œå¦åˆ™ä¼šåˆ›é€ ä¸€ä¸ªå½“å‰ä½œç”¨åŸŸçš„å…¨å±€å˜é‡ã€‚ 12345678var obj = &#123;&#125;;with (obj) &#123; p1 = 4, p2 = 5&#125;obj.p1 // undefinedp1 // 4 ä¸Šé¢ä»£ç ä¸­ï¼Œå¯¹è±¡ obj å¹¶æ²¡æœ‰ p1å±žæ€§ï¼Œå¯¹ p1èµ‹å€¼ç­‰äºŽåˆ›é€ äº†ä¸€ä¸ªå…¨å±€å˜é‡ p1.æ­£ç¡®çš„å†™æ³•åº”è¯¥æ˜¯ï¼Œå…ˆå®šä¹‰å¯¹è±¡ obj çš„å±žæ€§ p1ï¼Œç„¶åŽåœ¨ with åŒºå—å†…æ“ä½œå®ƒã€‚ è¿™æ˜¯å› ä¸º with åŒºå—æ²¡æœ‰æ”¹å˜ä½œç”¨åŸŸï¼Œå®ƒçš„å†…éƒ¨ä¾ç„¶æ˜¯å½“å‰ä½œç”¨åŸŸã€‚è¿™é€ æˆäº†with è¯­å¥çš„ä¸€ä¸ªå¾ˆå¤§çš„å¼Šç—…ï¼Œå°±æ˜¯ç»‘å®šå¯¹è±¡ä¸æ˜Žç¡®ã€‚ 123with (obj) &#123; console.log(x);&#125; å•çº¯ä»Žä¸Šé¢çš„ä»£ç å—ï¼Œæ ¹æœ¬æ— æ³•åˆ¤æ–­ x åˆ°åº•æ˜¯å…¨å±€å˜é‡ï¼Œè¿˜æ˜¯å¯¹è±¡ obj çš„ä¸€ä¸ªå±žæ€§ã€‚è¿™éžå¸¸ä¸åˆ©äºŽä»£ç çš„é™¤é”™å’Œæ¨¡å—åŒ–ï¼Œç¼–è¯‘å™¨ä¹Ÿæ— æ³•å¯¹è¿™æ®µä»£ç è¿›è¡Œä¼˜åŒ–ï¼Œåªèƒ½ç•™åˆ°è¿è¡Œæ—¶åˆ¤æ–­ï¼Œè¿™å°±æ‹–æ…¢äº†è¿è¡Œé€Ÿåº¦ã€‚å› æ­¤ï¼Œå»ºè®®ä¸è¦ä½¿ç”¨ with è¯­å¥ï¼Œå¯ä»¥è€ƒè™‘ç”¨ä¸€ä¸ªä¸´æ—¶å˜é‡ä»£æ›¿ withã€‚ 123456with (obj1.obj2.obj3) &#123; console.log(p1 + p2);&#125;// å¯ä»¥å†™ä¸ºvar temp = obj1.obj2.obj3;console.log(temp.p1 + temp.p2);]]></content>
      <categories>
        <category>JavaScript</category>
      </categories>
      <tags>
        <tag>å¯¹è±¡</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[JavaScriptï¼ˆå››ï¼‰]]></title>
    <url>%2F2018%2F12%2F19%2FJavaScript%EF%BC%88%E5%9B%9B%EF%BC%89%2F</url>
    <content type="text"><![CDATA[JavaScript ç³»åˆ—åšå®¢ä¹‹ï¼ˆå››ï¼‰å‰è¨€æœ¬ç¯‡ä»‹ç» JavaScript ä¸­çš„å‡½æ•°çŸ¥è¯†ã€‚ å‡½æ•°çš„ä¸‰ç§å£°æ˜Žæ–¹æ³•function å‘½ä»¤å¯ä»¥ç±»æ¯”ä¸º python ä¸­çš„ def å…³é”®è¯ã€‚ function å‘½ä»¤å£°æ˜Žçš„ä»£ç åŒºå—ï¼Œå°±æ˜¯ä¸€ä¸ªå‡½æ•°ã€‚å‘½ä»¤åŽé¢æ˜¯å‡½æ•°åï¼Œå‡½æ•°ååŽé¢çš„åœ†æ‹¬å·é‡Œé¢æ˜¯è¦ä¼ å…¥çš„å½¢å‚åã€‚å‡½æ•°ä½“æ”¾åœ¨å¤§æ‹¬å·é‡Œé¢ã€‚ 123function fn(name) &#123; console.log(name);&#125; ä½¿ç”¨ function å‘½åäº†ä¸€ä¸ª fn å‡½æ•°ï¼Œä»¥åŽå¯ä»¥é€šè¿‡è°ƒç”¨ fn æ¥è¿è¡Œè¯¥å‡½æ•°ã€‚è¿™å«åšå‡½æ•°çš„å£°æ˜Žï¼ˆFunction Declarationï¼‰ã€‚ å‡½æ•°è¡¨è¾¾å¼é™¤äº†ä½¿ç”¨ function å‘½ä»¤å£°æ˜Žå‡½æ•°å¤–ï¼Œå¯ä»¥é‡‡ç”¨å˜é‡èµ‹å€¼çš„å†™æ³•ã€‚ï¼ˆåŒ¿åå‡½æ•°ï¼‰ 123var fn = function(name) &#123; console.log(name);&#125;; è¿™ç§å†™æ³•å°†ä¸€ä¸ªåŒ¿åå‡½æ•°èµ‹å€¼ç»™å˜é‡ã€‚è¿™æ—¶ï¼Œè¿™ä¸ªåŒ¿åå‡½æ•°åˆç§°ä¹‹ä¸ºå‡½æ•°è¡¨è¾¾å¼ï¼ˆFunction Expressionï¼‰ï¼Œå› ä¸ºèµ‹å€¼è¯­å¥çš„ç­‰å·å³ä¾§åªèƒ½æ”¾è¡¨è¾¾å¼ã€‚ é‡‡ç”¨å‡½æ•°è¡¨è¾¾å¼å£°æ˜Žå‡½æ•°æ—¶ï¼Œfunction å‘½ä»¤åŽé¢ä¸å¸¦æœ‰å‡½æ•°åã€‚å¦‚æžœåŠ ä¸Šå‡½æ•°åï¼Œè¯¥å‡½æ•°ååªèƒ½åœ¨å‡½æ•°ä½“å†…è®¿é—®ï¼Œåœ¨å‡½æ•°ä½“å¤–éƒ¨æ— æ•ˆã€‚ 1234567var fn = function x(name) &#123; console.log(typeof x);&#125;;x// ReferenceError: x is not definedfn();// function å£°æ˜Žå‡½æ•°æ—¶ï¼Œåœ¨å‡½æ•°è¡¨è¾¾å¼åŽåŠ äº†å‡½æ•°å xï¼Œè¿™ä¸ª x åªå¯ä»¥åœ¨å‡½æ•°å†…éƒ¨ä½¿ç”¨ï¼ŒæŒ‡ä»£å‡½æ•°è¡¨è¾¾å¼æœ¬èº«ã€‚è¿™ç§å†™æ³•æœ‰ä¸¤ä¸ªç”¨å¤„ï¼šä¸€å¯ä»¥åœ¨å‡½æ•°ä½“å†…éƒ¨è°ƒç”¨è‡ªèº«ï¼›äºŒæ–¹ä¾¿debugï¼ˆdebug æ˜¾ç¤ºå‡½æ•°è°ƒç”¨æ ˆæ—¶ï¼Œä¼šæ˜¾ç¤ºå‡½æ•°åï¼‰ã€‚éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå‡½æ•°è¡¨è¾¾å¼éœ€è¦åœ¨è¯­å¥çš„ç»“å°¾åŠ ä¸Šåˆ†å·ï¼Œè¡¨ç¤ºè¯­å¥ç»“æŸã€‚è€Œå‡½æ•°çš„å£°æ˜Žåœ¨ç»“å°¾çš„å¤§æ‹¬å·åŽé¢ä¸ç”¨åŠ åˆ†å·ã€‚ Function æž„é€ å‡½æ•°ç¬¬ä¸‰ç§å£°æ˜Žå‡½æ•°çš„æ–¹æ³•æ˜¯é€šè¿‡æž„é€ å‡½æ•°ï¼Œå¯ä»¥ç†è§£ä¸º python ä¸­çš„å‡½æ•°ç±»ï¼Œé€šè¿‡ä¼ å…¥å‚æ•°å¹¶ä¸”è¿”å›žç»“æžœå°±å¯ä»¥åˆ›å»ºä¸€ä¸ªå‡½æ•°ã€‚ æž„é€ å‡½æ•°æŽ¥æ”¶ä¸‰ä¸ªå‚æ•°ï¼Œæœ€åŽä¸€ä¸ªä¸º addå‡½æ•°çš„â€˜â€™å‡½æ•°ä½“â€˜â€™ï¼Œå…¶ä»–å‚æ•°ä¸ºadd å‡½æ•°çš„å‚æ•°ã€‚å¯ä»¥ä¸ºæž„é€ å‡½æ•°ä¼ é€’ä»»æ„æ•°é‡çš„å‚æ•°ï¼Œä¸è¿‡åªæœ‰æœ€åŽä¸€ä¸ªå‚æ•°è¢«å½“åšå‡½æ•°ä½“ï¼Œå¦‚æžœåªæœ‰ä¸€ä¸ªå‚æ•°ï¼Œè¯¥å‚æ•°å°±æ˜¯å‡½æ•°ä½“ã€‚ Function æž„é€ å‡½æ•°ä¹Ÿå¯ä»¥ä¸ç”¨ new å‘½ä»¤ï¼Œç»“æžœä¸€æ ·ã€‚è¿™ç§å£°æ˜Žå‡½æ•°çš„æ–¹å¼ä¸ç›´è§‚ï¼Œä½¿ç”¨æ¦‚çŽ‡å¾ˆå°‘ã€‚ å‡½æ•°çš„è°ƒç”¨å’Œ python ä¸€æ ·ï¼Œè°ƒç”¨ä¸€ä¸ªå‡½æ•°é€šè¿‡åœ†æ‹¬å·ï¼Œåœ†æ‹¬å·ä¸­æ˜¯è¦ä¼ å…¥çš„å®žå‚ã€‚ å‡½æ•°ä½“å†…éƒ¨çš„ return è¯­å¥ï¼Œè¡¨ç¤ºè¿”å›žã€‚JavaScript å¼•æ“Žé‡åˆ° return æ—¶ï¼Œå°±ç›´æŽ¥è¿”å›ž return åŽé¢è¡¨è¾¾å¼çš„å€¼ï¼ˆå’Œ python ä¸€æ ·ï¼‰ï¼Œæ‰€ä»¥ return åŽé¢çš„ä»£ç æ˜¯æ— æ„ä¹‰çš„ï¼Œå¦‚æžœæ²¡æœ‰ return é‚£ä¹ˆå°±ä¼šè¿”å›ž undefinedï¼ˆpython ä¸­è¿”å›ž Noneï¼‰ã€‚ å‡½æ•°ä½œç”¨åŸŸä½œç”¨åŸŸçš„å®šä¹‰ä½œç”¨åŸŸæŒ‡çš„æ˜¯å˜é‡å­˜åœ¨çš„èŒƒå›´ã€‚åœ¨ ES5ä¸­ï¼ŒJavaScript åªæœ‰ä¸¤ç§ä½œç”¨åŸŸï¼šä¸€ç§æ˜¯å…¨å±€ä½œç”¨åŸŸï¼Œå˜é‡åœ¨æ•´ä¸ªç¨‹åºä¸­ä¸€ç›´å­˜åœ¨ï¼Œä»»æ„ä½ç½®å¯ä»¥è®¿é—®åˆ°ï¼›å¦ä¸€ç§æ˜¯å‡½æ•°ä½œç”¨åŸŸï¼Œä¹Ÿç§°ä¹‹ä¸ºå±€éƒ¨ä½œç”¨åŸŸï¼Œå˜é‡åªæœ‰åœ¨å‡½æ•°å†…éƒ¨æ‰èƒ½è®¿é—®åˆ°ã€‚ES6æ–°å¢žäº†å—çº§ä½œç”¨åŸŸï¼Œç­‰ä»·äºŽå±€éƒ¨ä½œç”¨åŸŸä¸€æ ·ï¼Œå°±æ˜¯æ–°å¢žäº†ä¸€ç§äº§ç”Ÿå±€éƒ¨ä½œç”¨åŸŸçš„æ–¹å¼ã€‚é€šè¿‡å¤§æ‹¬å·äº§ç”Ÿå—çº§ä½œç”¨åŸŸã€‚ åœ¨å‡½æ•°å¤–éƒ¨å£°æ˜Žçš„å˜é‡å°±æ˜¯å…¨å±€å˜é‡ï¼Œå¯ä»¥åœ¨ä»»æ„ä½ç½®è¯»å–ã€‚ åœ¨å‡½æ•°å†…éƒ¨å®šä¹‰çš„å˜é‡ï¼Œå¤–éƒ¨æ— æ³•è¯»å–ï¼Œåªæœ‰åœ¨å‡½æ•°å†…éƒ¨å¯ä»¥è®¿é—®åˆ°ã€‚å¹¶ä¸”å‡½æ•°å†…éƒ¨å®šä¹‰çš„åŒåå˜é‡ï¼Œä¼šåœ¨å‡½æ•°å†…è¦†ç›–å…¨å±€å˜é‡ã€‚ æ³¨æ„ï¼šå¯¹äºŽ var å‘½ä»¤æ¥è¯´ï¼Œå±€éƒ¨å˜é‡åªå¯ä»¥åœ¨å‡½æ•°å†…éƒ¨å£°æ˜Žï¼Œåœ¨å…¶ä»–åŒºå—ä¸­å£°æ˜Žï¼Œä¸€å¾‹éƒ½æ˜¯å…¨å±€å˜é‡ã€‚ES6ä¸­å£°æ˜Žå˜é‡çš„å‘½ä»¤æ”¹ä¸º letï¼Œåœ¨åŒºå—ä¸­å£°æ˜Žå˜é‡äº§ç”Ÿå—çº§ä½œç”¨åŸŸã€‚ å‡½æ•°å†…éƒ¨çš„å˜é‡æå‡ä¸Žå…¨å±€ä½œç”¨åŸŸä¸€æ ·ï¼Œå‡½æ•°ä½œç”¨åŸŸä¹Ÿä¼šäº§ç”Ÿâ€˜â€™å˜é‡æå‡â€˜â€™çŽ°è±¡ã€‚var å‘½ä»¤ç”Ÿå‘½çš„å˜é‡ï¼Œä¸ç®¡åœ¨ä»€ä¹ˆä½ç½®ï¼Œå˜é‡å£°æ˜Žéƒ½ä¼šè¢«æå‡åˆ°å‡½æ•°ä½“çš„å¤´éƒ¨ã€‚ 12345678910111213function foo(x) &#123; if (x &gt; 100) &#123; var tmp = x - 100; &#125;&#125;// ç­‰åŒäºŽfunction foo(x) &#123; var tmp; if (x &gt; 100) &#123; tmp = x - 100; &#125;&#125; å‡½æ•°æœ¬èº«çš„ä½œç”¨åŸŸå‡½æ•°å’Œå…¶ä»–å€¼ï¼ˆæ•°å€¼ã€å­—ç¬¦ä¸²ã€å¸ƒå°”å€¼ç­‰ï¼‰åœ°ä½ç›¸åŒã€‚å‡¡æ˜¯å¯ä»¥ä½¿ç”¨å€¼å¾—åœ°æ–¹ï¼Œå°±å¯ä»¥ä½¿ç”¨å‡½æ•°ã€‚æ¯”å¦‚ï¼Œå¯ä»¥æŠŠå‡½æ•°èµ‹å€¼ç»™å˜é‡å’Œå¯¹è±¡çš„å±žæ€§ï¼Œä¹Ÿå¯ä»¥å½“åšå‚æ•°ä¼ å…¥å…¶ä»–å‡½æ•°ï¼Œæˆ–è€…ä½œä¸ºå‡½æ•°çš„ç»“æžœè¿”å›žã€‚å‡½æ•°æ˜¯ä¸€ä¸ªå¯ä»¥æ‰§è¡Œçš„å€¼ï¼Œæ­¤å¤–æ²¡æœ‰ç‰¹æ®Šä¹‹å¤„ã€‚ å‡½æ•°ä¹Ÿæœ‰è‡ªå·±çš„ä½œç”¨åŸŸï¼Œå‡½æ•°çš„ä½œç”¨åŸŸç§°ä¸ºå±€éƒ¨ä½œç”¨åŸŸã€‚ä¸Žå˜é‡ä¸€æ ·ï¼Œå°±æ˜¯å…¶ç”Ÿå‘½æ—¶æ‰€åœ¨çš„ä½œç”¨åŸŸï¼Œä¸Žå…¶è¿è¡Œæ—¶æ‰€åœ¨çš„ä½œç”¨åŸŸæ— å…³ï¼ˆé—­åŒ…ã€è£…é¥°å™¨ï¼‰ã€‚é€šä¿—åœ°è®²å°±æ˜¯åœ¨å®šä¹‰å‡½æ•°çš„æ—¶å€™ï¼Œä½œç”¨åŸŸå·²ç»å°±ç¡®å®šå¥½äº†ï¼Œé‚£ä¹ˆåœ¨è®¿é—®å˜é‡çš„æ—¶å€™å°±å¼€å§‹ä»Žæœ¬ä½œç”¨åŸŸå¼€å§‹æŸ¥æ‰¾ï¼Œè€Œä¸Žå‡½æ•°çš„è°ƒç”¨ä½ç½®æ— å…³ã€‚ 123456789var x = function () &#123; var a = 1; console.log(a);&#125;;function y() &#123; var a = 2; x();&#125;y(); // 1 å‡½æ•° x æ˜¯åœ¨å‡½æ•° f çš„å¤–éƒ¨ç”Ÿå‘½çš„ï¼Œæ‰€ä»¥å®ƒçš„ä½œç”¨åŸŸç»‘å®šå¤–å±‚ï¼Œå†…éƒ¨å˜é‡ a ä¸ä¼šåˆ°å‡½æ•° f ä½“å†…å–å€¼ï¼Œæ‰€ä»¥è¾“å‡º1ï¼Œè€Œä¸æ˜¯2ã€‚ æ€»ä¹‹ï¼Œå‡½æ•°æ‰§è¡Œæ—¶æ‰€åœ¨çš„ä½œç”¨åŸŸï¼Œæ˜¯å®šä¹‰æ—¶çš„ä½œç”¨åŸŸï¼Œè€Œä¸æ˜¯è°ƒç”¨æ—¶æ‰€åœ¨çš„ä½œç”¨åŸŸã€‚ å‡½æ•°å‚æ•°è°ƒç”¨å‡½æ•°æ—¶ï¼Œæœ‰æ—¶å€™éœ€è¦å¤–éƒ¨ä¼ å…¥çš„å®žå‚ï¼Œä¼ å…¥ä¸åŒçš„å®žå‚ä¼šå¾—åˆ°ä¸åŒçš„ç»“æžœï¼Œè¿™ç§å¤–éƒ¨æ•°æ®å°±å«å‚æ•°ã€‚ å‚æ•°çš„çœç•¥åœ¨ JavaScript ä¸­å‡½æ•°å‚æ•°ä¸æ˜¯å¿…éœ€çš„ï¼Œå°±ç®—ä¼ å…¥çš„å‚æ•°å’Œå½¢å‚çš„ä¸ªæ•°ä¸ç›¸ç­‰ä¹Ÿä¸ä¼šæŠ¥é”™ã€‚è°ƒç”¨æ—¶æ— è®ºæä¾›å¤šå°‘ä¸ªå‚æ•°ï¼ˆæˆ–è€…ä¸æä¾›å‚æ•°ï¼‰ï¼ŒJavaScript éƒ½ä¸ä¼šæŠ¥é”™ã€‚çœç•¥çš„å‚æ•°çš„å€¼å˜ä¸º undefinedã€‚éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå‡½æ•°çš„ length å±žæ€§å€¼ä¸Žå®žé™…ä¼ å…¥çš„å‚æ•°ä¸ªæ•°æ— å…³ï¼Œåªåæ˜ å‡½æ•°é¢„æœŸä¼ å…¥çš„å‚æ•°ä¸ªæ•°ã€‚ ä½†æ˜¯ï¼ŒJavaScript ä¸­çš„å‚æ•°éƒ½æ˜¯ä½ç½®å‚æ•°ï¼Œæ‰€ä»¥æ²¡æœ‰åŠžæ³•åªçœç•¥é å‰çš„å‚æ•°ï¼Œè€Œä¿ç•™é åŽçš„å‚æ•°ã€‚å¦‚æžœä¸€å®šè¦çœç•¥é å‰çš„å‚æ•°ï¼Œåªæœ‰æ˜¾ç¤ºçš„ä¼ å…¥ undefinedã€‚ ä¼ é€’æ–¹å¼å‡½æ•°å‚æ•°å¦‚æžœæ˜¯åŽŸå§‹ç±»åž‹çš„å€¼ï¼ˆæ•°å€¼ã€å­—ç¬¦ä¸²ã€å¸ƒå°”å€¼ï¼‰ï¼Œä¼ é€’æ–¹å¼æ˜¯ä¼ å€¼ä¼ é€’ï¼ˆpass by valueï¼‰ã€‚è¿™æ„å‘³ç€ï¼Œåœ¨å‡½æ•°ä½“å†…ä¿®æ”¹å‚æ•°å€¼ï¼Œä¸ä¼šå½±å“åˆ°å‡½æ•°å¤–éƒ¨ï¼ˆå±€éƒ¨å˜é‡çš„ä¿®æ”¹ä¸ä¼šå½±å“åˆ°å…¨å±€å˜é‡ï¼šå¯¹äºŽåŸºæœ¬æ•°æ®ç±»åž‹ï¼‰ã€‚ ä½†æ˜¯ï¼Œå¦‚æžœå‡½æ•°å‚æ•°æ˜¯å¤åˆç±»åž‹çš„å€¼ï¼ˆæ•°ç»„ã€å¯¹è±¡ã€å…¶ä»–å‡½æ•°ï¼‰ï¼Œå› ä¸ºä¼ å€¼æ–¹å¼ä¸ºåœ°å€ä¼ é€’ï¼ˆpass by referenceï¼‰ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œä¼ å…¥å‡½æ•°çš„åŽŸå§‹å€¼çš„åœ°å€ï¼Œå› æ­¤åœ¨å‡½æ•°å†…éƒ¨ä¿®æ”¹å‚æ•°ï¼Œå°†ä¼šå½±å“åˆ°åŽŸå§‹å€¼ã€‚ æ³¨æ„ï¼šå¦‚æžœå‡½æ•°å†…éƒ¨ä¿®æ”¹çš„ä¸æ˜¯å‚æ•°å¯¹è±¡çš„æŸä¸ªå±žæ€§ï¼Œè€Œæ˜¯ç›´æŽ¥æ›¿æ¢æŽ‰æ•´ä¸ªå‚æ•°ï¼Œè¿™æ—¶ä¸ä¼šå½±å“åˆ°åŽŸå§‹å€¼ã€‚ 12345678var obj = [1, 2, 3];function f(o) &#123; o = [2, 3, 4];&#125;f(obj);obj // [1, 2, 3] ä¸Šé¢ä»£ç ï¼Œåœ¨å‡½æ•° f å†…éƒ¨ï¼Œå‚æ•°å¯¹è±¡ obj è¢«æ•´ä¸ªæ›¿æ¢æˆå¦ä¸€ä¸ªå€¼ã€‚è¿™æ—¶ä¸ä¼šå½±å“åˆ°åŽŸå§‹å€¼ã€‚è¿™æ˜¯å› ä¸ºï¼Œå½¢å¼å‚æ•°ï¼ˆoï¼‰çš„å€¼å®žé™…ä¸Šæ˜¯å‚æ•° obj çš„åœ°å€ï¼Œé‡æ–°å¯¹o èµ‹å€¼å¯¼è‡´ o æŒ‡å‘å¦ä¸€ä¸ªåœ°å€ï¼Œä¿å­˜åœ¨åŽŸåœ°å€ä¸Šçš„æ•°æ®ä¸ä¼šè¢«æ”¹å˜ã€‚ åŒåå‚æ•°å¦‚æžœæœ‰åŒåçš„å‚æ•°ï¼Œåˆ™å–æœ€åŽå‡ºçŽ°çš„é‚£ä¸ªå€¼ã€‚ 12345function f(a, a) &#123; console.log(a);&#125;f(1, 2) // 2 ä¸Šé¢ä»£ç ä¸­ï¼Œå‡½æ•° f æœ‰ä¸¤ä¸ªå‚æ•°ï¼Œä¸”å‚æ•°åéƒ½æ˜¯ aã€‚å–å€¼çš„æ—¶å€™ï¼Œä»¥åŽé¢çš„ a ä¸ºå‡†ï¼Œå³ä½¿åŽé¢çš„a æ²¡æœ‰å€¼æˆ–è¢«çœç•¥ï¼Œä¹Ÿæ˜¯ä»¥å…¶ä¸ºå‡†ã€‚ 1234function f(a, a) &#123; console.log(a);&#125;f(1) // undefined è°ƒç”¨å‡½æ•° f æ—¶ï¼Œæ²¡æœ‰æä¾›ç¬¬äºŒä¸ªå‚æ•°ï¼Œa çš„å–å€¼å°±å˜æˆäº† undefinedã€‚è¿™æ—¶ï¼Œå¦‚æžœè¦èŽ·å¾—ç¬¬ä¸€ä¸ª a çš„å€¼ï¼Œå¯ä»¥ä½¿ç”¨ arguments å¯¹è±¡ï¼ˆç±»æ¯”linux ä¸­çš„argï¼‰ã€‚ 12345function f(a, a) &#123; console.log(arguments[0]);&#125;f(1) // 1 arguments å¯¹è±¡å®šä¹‰ç”±äºŽ JavaScript å…è®¸å‡½æ•°æœ‰ä¸å®šæ•°ç›®çš„å‚æ•°ï¼Œæ‰€ä»¥éœ€è¦ä¸€ç§æœºåˆ¶ï¼Œå¯ä»¥åœ¨å‡½æ•°ä½“å†…éƒ¨è¯»å–æ‰€æœ‰å‚æ•°ã€‚è¿™å°±æ˜¯ arguments å¯¹è±¡çš„ç”±æ¥ã€‚ arguments å¯¹è±¡åŒ…å«äº†å‡½æ•°è¿è¡Œæ—¶çš„æ‰€æœ‰å‚æ•°ï¼Œarguments[0]å°±æ˜¯ç¬¬ä¸€ä¸ªå‚æ•°ï¼Œä»¥æ­¤ç±»æŽ¨ã€‚æ³¨æ„ï¼šè¯¥å¯¹è±¡åªæœ‰åœ¨å‡½æ•°ä½“å†…éƒ¨æ‰å¯ä»¥ä½¿ç”¨ã€‚ æ­£å¸¸æ¨¡å¼ä¸‹ï¼Œarguments å¯¹è±¡å¯ä»¥åœ¨è¿è¡Œæ—¶ä¿®æ”¹ã€‚ 123456var f = function(a, b) &#123; arguments[0] = 3; arguments[1] = 3; return a + b;&#125;f(1, 1) // 5 ä¸Šé¢ä»£ç ä¸­ï¼Œè°ƒç”¨ f æ—¶ä¼ å…¥çš„å‚æ•°ï¼Œåœ¨å‡½æ•°ä½“å†…è¢«ä¿®æ”¹äº†ï¼Œé‚£ä¹ˆç»“æžœä¹Ÿä¼šä¿®æ”¹ã€‚ ä¸¥æ ¼æ¨¡å¼ä¸‹ï¼Œarguments å¯¹è±¡æ˜¯ä¸€ä¸ªåªè¯»å¯¹è±¡ï¼Œä¿®æ”¹å®ƒæ˜¯æ— æ•ˆçš„ï¼Œä½†ä¸ä¼šæŠ¥é”™ã€‚ 12345678var f = function(a, b) &#123; 'use strict'; // å¼€å¯ä¸¥æ ¼æ¨¡å¼ arguments[0] = 3; // æ— æ•ˆ arguments[1] = 2; // æ— æ•ˆ return a + b;&#125;f(1, 1) // 2 å¼€å¯ä¸¥æ ¼æ¨¡å¼åŽï¼Œè™½ç„¶ä¿®æ”¹å‚æ•°ä¸æŠ¥é”™ï¼Œä½†æ˜¯æ˜¯æ— æ•ˆçš„ã€‚ é€šè¿‡ arguments å¯¹è±¡çš„ length å±žæ€§ï¼Œå¯ä»¥åˆ¤æ–­å‡½æ•°è°ƒç”¨æ—¶åˆ°åº•å¸¦å‡ ä¸ªå‚æ•°ã€‚ 12345function f() &#123; return arguments.length;&#125;f(1, 2, 3) // 3f(1) // 1 ä¸Žæ•°ç»„çš„å…³ç³»éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œè™½ç„¶ arguments å¾ˆåƒæ•°ç»„ï¼Œä½†å®ƒæ˜¯ä¸€ä¸ªå¯¹è±¡ã€‚æ•°ç»„ä¸“æœ‰çš„æ–¹æ³•ï¼ˆæ¯”å¦‚ slice å’Œ forEachï¼‰ï¼Œä¸èƒ½å† arguments å¯¹è±¡ä¸Šç›´æŽ¥ä½¿ç”¨ã€‚ å¦‚æžœè¦è®© arguments å¯¹è±¡ä½¿ç”¨æ•°ç»„æ–¹æ³•ï¼ŒçœŸæ­£çš„è§£å†³æ–¹æ³•æ˜¯å°† arguments è½¬ä¸ºçœŸæ­£çš„æ•°ç»„ã€‚ä¸‹é¢æ˜¯ä¸¤ç§å¸¸ç”¨çš„è½¬æ¢æ–¹æ³•ï¼šslice æ–¹æ³•å’Œé€ä¸€å¡«å…¥æ–°æ•°ç»„ã€‚ 123456var args = Array.prototype.slice.call(arguments);// var args = [];for (var i = 0; i &lt; arguments.length; i++) &#123; args.push(arguments[i]);&#125; callee å±žæ€§arguments å¯¹è±¡å¸¦æœ‰ä¸€ä¸ª callee å±žæ€§ï¼Œè¿”å›žå®ƒæ‰€å¯¹åº”çš„åŽŸå‡½æ•°ã€‚ 1234var f = function() &#123; console.log(arguments.callee === f); &#125;f(); // true å¯ä»¥é€šè¿‡ arguments.calleeï¼Œè¾¾åˆ°è°ƒç”¨è‡ªèº«çš„ç›®çš„ã€‚è¿™ä¸ªå±žæ€§åœ¨ä¸¥æ ¼æ¨¡å¼é‡Œé¢æ˜¯ç¦ç”¨çš„ï¼Œä¸å»ºè®®ä½¿ç”¨ã€‚ å‡½æ•°é—­åŒ…é—­åŒ…æ˜¯æ‰€æœ‰ç¼–ç¨‹è¯­è¨€çš„éš¾ç‚¹ï¼Œåœ¨ python ä¸­é—­åŒ…çš„å¤šåº”ç”¨äºŽè£…é¥°å™¨ä¸­ã€‚åœ¨ JavaScript ä¸­é—­åŒ…å¤šç”¨äºŽåˆ›å»ºä½œç”¨åŸŸï¼Œæˆ–è€…è§£å†³å˜é‡æ±¡æŸ“çš„é—®é¢˜ã€‚ ç†è§£é—­åŒ…ï¼Œé¦–å…ˆéœ€è¦ç†è§£å˜é‡ä½œç”¨åŸŸã€‚åœ¨ ES5ä¸­ï¼ŒJavaScript åªæœ‰ä¸¤ç§ä½œç”¨åŸŸï¼šå…¨å±€ä½œç”¨äºŽå’Œå‡½æ•°ä½œç”¨åŸŸã€‚å‡½æ•°å†…éƒ¨å¯ä»¥ç›´æŽ¥è¯»å–å…¨å±€å˜é‡ã€‚ 123456var n = 999;function f1() &#123; console.log(n);&#125;f1(); // 999,næ˜¯å…¨å±€å˜é‡ï¼Œå¯ä»¥è¢«è®¿é—®åˆ° ä½†æ˜¯å‡½æ•°å¤–éƒ¨æ— æ³•è¯»ç‰©å‡½æ•°å†…éƒ¨å£°æ˜Žçš„å˜é‡ã€‚ 12345function f1() &#123; var n = 999;&#125;console.log(n);// Uncaught ReferenceError: n is not defined å› ä¸ºå˜é‡ä½œç”¨åŸŸçš„å…³ç³»ï¼Œåœ¨å¤–éƒ¨éœ€è¦è®¿é—®åˆ°å±€éƒ¨å˜é‡åœ¨æ­£å¸¸æƒ…å†µä¸‹æ˜¯åšä¸åˆ°çš„ï¼Œè¿™å°±å¯ä»¥é€šè¿‡é—­åŒ…æ¥å®žçŽ°ã€‚ä¸‹æ¥æ¥çœ‹ä¸€ä¸ªç»å…¸ä¾‹å­ï¼šå¾ªçŽ¯ç»‘å®šäº‹ä»¶äº§ç”Ÿçš„å˜é‡æ±¡æŸ“ 12345678910111213141516171819&lt;div class="box"&gt; 0000001&lt;/div&gt;&lt;div class="box"&gt; 0000002&lt;/div&gt;&lt;div class="box"&gt; 0000003&lt;/div&gt;&lt;script&gt; var divs = document.querySelectorAll(".box"); // å­˜åœ¨æ±¡æŸ“çš„å†™æ³• for (var i =0; i &lt; divs.length; i++) &#123; divs.onclick = function () &#123; console.log('xxx', i) &#125; &#125; // è¿è¡Œç»“æžœæ˜¾ç¤º4&lt;/script&gt; ä¼šäº§ç”Ÿå˜é‡æ±¡æŸ“çš„åŽŸå› æ˜¯ä½œç”¨åŸŸï¼Œå› ä¸º var å¹¶ä¸äº§ç”Ÿä½œç”¨åŸŸï¼Œæ‰€ä»¥åœ¨ forå¾ªçŽ¯ä¸­çš„å˜é‡å°±æ˜¯å…¨å±€å˜é‡ï¼Œåªè¦ forå¾ªçŽ¯ç»“æŸé‚£ä¹ˆ i çš„å€¼å°±ç¡®å®šäº†ï¼Œé™¤éžåœ¨æžé™æƒ…å†µä¸‹ï¼Œä½ çš„æ‰‹é€Ÿæ¯” cpu è¿˜è¦å¿«ï¼Œé‚£ä¹ˆå¯èƒ½ä¼šçœ‹åˆ°å°äºŽ4çš„å€¼ã€‚è¿™æ ·çš„é—®é¢˜å¯ä»¥é€šè¿‡å‡½æ•°çš„é—­åŒ…æ¥è§£å†³ã€‚äº§ç”Ÿæ–°çš„ä½œç”¨åŸŸç”¨æ¥ä¿å­˜ i çš„å€¼ã€‚ 12345678910111213141516for (var i = 0; i &lt; divs.length; i++) &#123; (function () &#123; var index = i; divs[index].onclick = function () &#123; console.log('xxx', index); &#125; &#125;)()&#125;// å¦ä¸€ç§ç‰ˆæœ¬for (var i = 0; i &lt; divs.length; i++) &#123; function(i) &#123; divs[i].onclick = function () &#123; console.log('yyy', i) &#125; &#125;(i)&#125; åˆ©ç”¨é—­åŒ…åŽŸç†äº§ç”Ÿæ–°çš„ä½œç”¨åŸŸç”¨æ¥ä¿å­˜å˜é‡ i çš„å€¼ï¼Œè¿™æ ·å°±è§£å†³äº†å˜é‡æ±¡æŸ“çš„é—®é¢˜ï¼Œè¿˜æœ‰åˆ©ç”¨ES6çš„å£°æ˜Žå˜é‡å…³é”®è¯ letï¼Œä¹Ÿä¼šäº§ç”Ÿæ–°çš„ä½œç”¨åŸŸï¼ˆå—çº§ä½œç”¨åŸŸï¼‰ä¹Ÿå¯ä»¥è§£å†³å˜é‡æ±¡æŸ“çš„é—®é¢˜ã€‚ åœ¨ JavaScript ä¸­ï¼ŒåµŒå¥—å‡½æ•°ä¸­çš„å­å‡½æ•°ä¸­å¯ä»¥è®¿é—®åˆ°å¤–éƒ¨å‡½æ•°ä¸­çš„å±€éƒ¨å˜é‡ï¼Œä½†æ˜¯å¤–éƒ¨å‡½æ•°è®¿é—®ä¸åˆ°å­å‡½æ•°ä¸­çš„å±€éƒ¨å˜é‡ï¼Œè¿™æ˜¯ JavaScript ä¸­ç‰¹æœ‰çš„â€˜â€™é“¾å¼ä½œç”¨åŸŸâ€˜â€™ç»“æž„ï¼ˆpython ä¹Ÿä¸€æ ·ï¼‰ï¼Œå­å¯¹è±¡ä¼šä¸€çº§ä¸€çº§çš„å‘ä¸Šå¯»æ‰¾æ‰€æœ‰çˆ¶å¯¹è±¡çš„å˜é‡ã€‚æ‰€ä»¥ï¼Œçˆ¶å¯¹è±¡çš„æ‰€æœ‰å˜é‡ï¼Œå¯¹å­å¯¹è±¡éƒ½æ˜¯å¯è§çš„ï¼Œåä¹‹åˆ™ä¸æˆç«‹ã€‚å¯ä»¥ç®€å•åœ°æŠŠé—­åŒ…ç†è§£ä¸ºâ€˜â€™å®šä¹‰åœ¨ä¸€ä¸ªå‡½æ•°å†…éƒ¨çš„å‡½æ•°â€˜â€™ï¼Œé—­åŒ…æœ€å¤§çš„ç‰¹ç‚¹å°±æ˜¯å®ƒå¯ä»¥â€˜â€™è®°ä½â€˜â€™è¯žç”Ÿçš„çŽ¯å¢ƒï¼Œåœ¨æœ¬è´¨ä¸Šé—­åŒ…å°±æ˜¯å°†å‡½æ•°å†…éƒ¨å’Œå‡½æ•°å¤–è¿žæŽ¥èµ·æ¥çš„ä¸€åº§æ¡¥æ¢ã€‚ å¿…æŠ¥çš„æœ€å¤§ç”¨å¤„æœ‰ä¸¤ä¸ªï¼Œä¸€ä¸ªæ˜¯å¯ä»¥è¯»å–å‡½æ•°å†…éƒ¨çš„å˜é‡ï¼Œå¦ä¸€ä¸ªå°±æ˜¯è®©è¿™äº›å˜é‡å§‹ç»ˆä¿æŒåœ¨å†…å­˜ä¸­ï¼Œå³é—­åŒ…å¯ä»¥ä½¿å¾—å®ƒè¯žç”Ÿçš„çŽ¯å¢ƒä¸€ç›´å­˜åœ¨ã€‚ä¸‹é¢çš„ä¾‹å­ï¼š 1234567891011function createIncrementor(start) &#123; return function () &#123; return start++; &#125;;&#125;var inc = createIncrementor(5);inc(); // 5inc(); // 6inc(): // 7 ä¸Šé¢ä»£ç ä¸­ï¼Œstart æ˜¯å‡½æ•° createIncrementor çš„å†…éƒ¨å˜é‡ã€‚é€šè¿‡é—­åŒ…ï¼Œstart çš„çŠ¶æ€è¢«ä¿å­˜ï¼Œæ¯ä¸€æ¬¡è°ƒç”¨éƒ½æ˜¯åœ¨ä¸Šä¸€æ¬¡è°ƒç”¨çš„åŸºç¡€ä¸Šè¿›è¡Œè®¡ç®—ã€‚ä»Žä¸­å¯ä»¥çœ‹å‡ºï¼Œé—­åŒ… inc ä½¿å¾—å‡½æ•° createIncrementor çš„å†…éƒ¨çŽ¯å¢ƒä¸€ç›´å­˜åœ¨ã€‚æ‰€ä»¥é—­åŒ…å¯ä»¥çœ‹åšæ˜¯å‡½æ•°å†…éƒ¨ä½œç”¨åŸŸçš„ä¸€ä¸ªæŽ¥å£ã€‚ä¸ºä»€ä¹ˆä¼šè¿™æ ·å‘¢ï¼ŸåŽŸå› å°±åœ¨äºŽ inc å§‹ç»ˆåœ¨å†…å­˜ä¸­ï¼Œè€Œ inc çš„å­˜åœ¨ä¾èµ–äºŽ createIncrementorï¼Œå› æ­¤ä¹Ÿä¸€ç›´å­˜åœ¨äºŽå†…å­˜ä¸­ï¼Œä¸ä¼šå†å¤–å±‚å‡½æ•°è°ƒç”¨ç»“æŸåŽ start å˜é‡è¢«åžƒåœ¾å›žæ”¶æœºåˆ¶å›žæ”¶ã€‚ é—­åŒ…çš„å¦å¤–ä¸€ä¸ªç”¨å¤„æ˜¯å°è£…å¯¹è±¡çš„ç§æœ‰å±žæ€§å’Œç§æœ‰æ–¹æ³•ã€‚ï¼ˆè¿™éƒ¨åˆ†è¿˜ä¸å¤ªæ‡‚ï¼Œè¿˜éœ€è¦ç¢ç£¨ï¼‰ 12345678910111213141516171819function Person(name) &#123; var _age; function setAge(n) &#123; _age = n; &#125; function getAge() &#123; return _age; &#125; return &#123; name: name, getAge: getAge, setAge: setAge &#125;;&#125;var p1 = Person('å¼ ä¸‰');p1.setAge(25);p1.getAge() // 25 ä¸Šé¢ä»£ç ä¸­ï¼Œå‡½æ•° Person çš„å†…éƒ¨å˜é‡_ageï¼Œé€šè¿‡é—­åŒ… getAge å’Œ setAgeï¼Œå˜æˆäº†è¿”å›žå¯¹è±¡p1çš„ç§æœ‰å˜é‡ã€‚ æ³¨æ„ï¼šå¤–åŸŽå‡½æ•°æ¯æ¬¡è¿è¡Œï¼Œéƒ½ä¼šäº§ç”Ÿä¸€ä¸ªæ–°çš„é—­åŒ…ï¼Œè€Œè¿™ä¸ªé—­åŒ…åˆä¼šä¿ç•™å¤–åŸŽå‡½æ•°çš„å†…éƒ¨å˜é‡ï¼Œæ‰€ä»¥å†…å­˜æ¶ˆè€—å¾ˆå¤§ã€‚]]></content>
      <categories>
        <category>JavaScript</category>
      </categories>
  </entry>
  <entry>
    <title><![CDATA[JavaScriptï¼ˆä¸‰ï¼‰]]></title>
    <url>%2F2018%2F12%2F18%2FJavaScript%EF%BC%88%E4%B8%89%EF%BC%89%2F</url>
    <content type="text"><![CDATA[JavaScript ç³»åˆ—åšå®¢ï¼ˆä¸‰ï¼‰å‰è¨€æœ¬ç¯‡åšå®¢ä»‹ç» js ä¸­çš„è¿ç®—ç¬¦ã€æ¡ä»¶è¯­å¥ã€å¾ªçŽ¯è¯­å¥ä»¥åŠæ•°ç»„ã€‚ è¿ç®—ç¬¦ ç®—æœ¯è¿ç®—ç¬¦ 1234567891011121314151617181920212223// + | - | * | / | % | ++ | -- console.log(5 / 2); // 2.5 // å–æ•´ console.log('%d', 5 / 2); // "2" var num = parseInt(5 / 2); // 2 console.log(num); // å–æ¨¡(æ±‚ä½™) console.log(5 % 2); // 1 // ä»»ä½•ä¸€ä¸ªè‡ªç„¶æ•°å¯¹ n å–ä½™, ç»“æžœä¸º [0, n-1] // è‡ªå¢ž|è‡ªå‡ ++|-- // ++å°±æ˜¯è‡ªå¢ž1, --å°±æ˜¯è‡ªå‡1 var num = 10 console.log(num++); // 10 console.log(++num); // 12 console.log(num); // 12 // ++åœ¨å˜é‡åŽ(num++), å…ˆå°†å˜é‡çš„å€¼æ‹¿åŽ»ä½¿ç”¨,å†è‡ªèº«è‡ªå¢ž1 // ++å†å˜é‡å‰(++num), å…ˆå°†å˜é‡è‡ªèº«è‡ªå¢ž1, å†å°†ç»“æžœæ‹¿åŽ»ä½¿ç”¨ // æ€»ç»“: ä¸ç®¡++åœ¨å‰åœ¨åŽ,è¿ç®—ç»“æŸåŽ,å˜é‡è‡ªèº«å€¼ä¸€å®šè‡ªå¢ž1 // res = ++num &lt;==&gt; num++; res = num // res = num++ &lt;==&gt; res = num; ++num èµ‹å€¼è¿ç®—ç¬¦ 123456789// = | += | -= | *= | /= | %= var x = 10; // å°†10çš„å€¼èµ‹å€¼ç»™å˜é‡x y = x; // å°†å˜é‡xçš„å€¼ä¼ é€’ç»™å˜é‡y console.log(y); // 10 x += 10; // x = x + 10, è¿ç®—æ–¹å¼ç”±å³è‡³å·¦, å°†x+10çš„ç»“æžœé‡æ–°å¤åˆ¶ç»™x console.log(y); // 10, yçš„å€¼è™½ç„¶æ¥æºäºŽx, ä½†yå€¼åªç”±è‡ªèº«æŽ§åˆ¶ // x /= 10 == x = x / 10 æ¯”è¾ƒè¿ç®—ç¬¦ 12345678// æ¯”è¾ƒè¿ç®—ç¬¦, ç»“æžœä¸ºBooleanç±»åž‹ // == | === console.log("5" == 5); // true, åªåšå€¼æ¯”è¾ƒ console.log("5" === 5); // false, æ¯”è¾ƒå€¼åŠç±»åž‹ // != | !== console.log("5" != 5); // false, åªåšå€¼æ¯”è¾ƒ console.log("5" !== 5); // true, æ¯”è¾ƒå€¼åŠç±»åž‹ é€»è¾‘è¿ç®—ç¬¦ 1234567891011121314// æ€»ç»“&amp;&amp;: å…¨çœŸä¸ºçœŸ, æœ‰å‡åˆ™å‡ // æ€»ç»“||: å…¨å‡åˆ™å‡, æœ‰çœŸåˆ™çœŸ // æ€»ç»“!: çœŸåˆ™å‡, å‡åˆ™çœŸ // é€»è¾‘è¿ç®—ç¬¦çš„ç»“æžœæœ¬è´¨ä¸Šä¸ºè¡¨è¾¾å¼å€¼ // è¡¨è¾¾å¼: ç”±æ•°å­—,å˜é‡,è¿ç®—ç¬¦ç»„æˆçš„åˆæ³•å¼å­ res = a &lt; b &amp;&amp; c; console.log(res); res = (a = 1 || b == c); console.log(res); // é’ˆå¯¹ &amp;&amp; | || // ç–‘é—®: é€»è¾‘è¿ç®—ç¬¦ç»“æžœå¯èƒ½ä¸ºé€»è¾‘è¿ç®—ç¬¦ä¹‹å‰è¡¨è¾¾å¼çš„å€¼,ä¹Ÿå¯èƒ½æ˜¯ä¹‹åŽè¡¨è¾¾å¼çš„å€¼ é’ˆå¯¹é€»è¾‘è¿ç®—ç¬¦ï¼Œä¼šå‡ºçŽ°çŸ­è·¯çŽ°è±¡ã€‚å½“è¿ç®—ç¬¦ä¸º&amp;&amp;æ—¶ï¼Œå¦‚æžœç¬¬ä¸€ä¸ªè¡¨è¾¾å¼çš„ç»“æžœä¸ºå‡ï¼Œé‚£ä¹ˆç¬¬äºŒä¸ªè¡¨è¾¾å¼å°±ä¸ä¼šæ‰§è¡Œï¼›åŒç†ï¼Œ||å½“ç¬¬ä¸€ä¸ªè¡¨è¾¾å¼çš„ç»“æžœä¸ºçœŸæ—¶ï¼Œç¬¬äºŒä¸ªè¡¨è¾¾å¼å°±ä¸ä¼šæ‰§è¡Œï¼ˆpython åœ¨é€»è¾‘åˆ¤æ–­ä¹Ÿä¼šå‡ºçŽ°çŸ­è·¯çŽ°è±¡ï¼‰ ä¸‰ç›®è¿ç®—ç¬¦ï¼ˆç­‰åŒäºŽ python ä¸­çš„ä¸‰å…ƒè¡¨è¾¾å¼ï¼‰ 123456789// è¯­æ³•: æ¡ä»¶è¡¨è¾¾å¼ ? è¡¨è¾¾å¼1 : è¡¨è¾¾å¼2 var a = 10, b = 20; var res = a &lt; b ? a : b; // å–å°å€¼ console.log(res); res = a &lt; b ? b : a; // å–å¤§å€¼ console.log(res); // ç±»ä¼¼äºŽif...esle... a &lt; b ? console.log("è¡¨è¾¾å¼ç»“æžœä¸ºtrue") : console.log("è¡¨è¾¾å¼ç»“æžœä¸ºfalse") ä¸‰ç›®è¡¨è¾¾å¼å¯ä»¥çœ‹åš ifâ€¦else çš„ç®€å†™å½¢å¼ã€‚ ç¨‹åºç»“æž„æ ¹æ®æ‰§è¡Œæ–¹å¼ç¨‹åºå¯ä»¥åˆ†ä¸ºä¸‰å¤§ç»“æž„ï¼šé¡ºåºç»“æž„ã€åˆ†æ”¯ç»“æž„ã€å¾ªçŽ¯ç»“æž„ã€‚å…¶å®žåªæœ‰ä¸€ç§ç»“æž„å°±æ˜¯é¡ºåºç»“æž„ï¼Œåƒåˆ†æ”¯ç»“æž„æœ¬è´¨è¿˜æ˜¯é¡ºåºæ‰§è¡Œçš„ï¼Œåªä¸è¿‡é€‰æ‹©å¤šäº†ï¼›è€Œå¾ªçŽ¯ç»“æž„ä¹Ÿæ˜¯ä¸€æ ·çš„é“ç†ã€‚ æ¡ä»¶è¯­å¥if ç»“æž„ifç»“æž„é¦–å…ˆåˆ¤æ–­åŽé¢è¡¨è¾¾å¼çš„å¸ƒå°”å€¼ï¼Œç„¶åŽå†³å®šæ˜¯å¦æ‰§è¡ŒåŽé¢çš„ä»£ç ã€‚å¸ƒå°”å€¼åªæœ‰ä¸¤ä¸ªï¼Œtrue ä¸ºçœŸï¼Œfalse ä¸ºå‡ã€‚ 12345// è¯­æ³•if (è¡¨è¾¾å¼1) &#123; è¯­å¥; &#125;;// æˆ–if (è¡¨è¾¾å¼2) &#123;è¯­å¥&#125;; ä¸Šé¢æ˜¯ if ç»“æž„çš„åŸºæœ¬å½¢å¼ã€‚éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œâ€˜â€™å¸ƒå°”å€¼â€˜â€™å¾€å¾€æ˜¯ç”±ä¸€ä¸ªæ¡ä»¶è¡¨è¾¾å¼äº§ç”Ÿçš„ï¼Œå¿…é¡»æ”¾åœ¨åœ†æ‹¬å·ä¸­ï¼Œè¡¨è¾¾å¯¹è¯¥è¡¨è¾¾å¼æ±‚å€¼ã€‚å¦‚æžœè¡¨è¾¾å¼çš„ç»“æžœä¸º trueï¼Œå°±æ‰§è¡ŒåŽé¢çš„ä»£ç è¯­å¥ï¼›å¦‚æžœä¸º falseï¼Œåˆ™è·³è¿‡åŽé¢çš„è¯­å¥ã€‚ ifâ€¦else ç»“æž„è·Ÿ python ä¸€æ ·ï¼Œif åŽé¢ä¹Ÿå¯ä»¥è·Ÿ else ä»£ç å—ï¼Œè¡¨ç¤ºä¸æ»¡è¶³æ¡ä»¶æ—¶ï¼Œè¦æ‰§è¡Œçš„ä»£ç å—ã€‚ 12345if (è¡¨è¾¾å¼3) &#123; //è¡¨è¾¾å¼ç»“æž„ä¸ºçœŸæ—¶ï¼Œæ‰§è¡Œçš„ä»£ç &#125; else &#123; // è¡¨è¾¾æ˜¯ç»“æž„ä¸ºå‡æ—¶ï¼Œæ‰§è¡Œçš„ä»£ç &#125; å¦‚æžœéœ€è¦å¯¹äºŽä¸€ä¸ªè¡¨è¾¾å¼è¿›è¡Œå¤šæ¬¡åˆ¤æ–­æ—¶ï¼Œå¤šä¸ª ifâ€¦else è¯­å¥å¯ä»¥è¿žåˆ°ä¸€èµ·ã€‚ 123456789if (è¡¨è¾¾å¼4) &#123; &#125; else if &#123;è¡¨è¾¾å¼5&#125; &#123; &#125; else if &#123;è¡¨è¾¾å¼6&#125; &#123; &#125; else &#123; &#125; // æ³¨æ„ï¼šelse ä»£ç å—æ€»æ˜¯ä¸Žç¦»è‡ªå·±æœ€è¿‘çš„é‚£ä¸ª if è¯­å¥é…å¯¹ switch åˆ†æ”¯123456789// è¯­æ³•switch (ç»“æžœä¸ºæ•´æ•°|å­—ç¬¦ä¸²çš„è¡¨è¾¾å¼) &#123; case å€¼1(å€¼éœ€è¦å’Œè¡¨è¾¾å¼è¿›è¡Œç±»åž‹ç»Ÿä¸€): ä»£ç å—; break; ... case å€¼n: ä»£ç å—; break; default: ä»£ç å—; &#125;// éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œswitch è¯­å¥åŽé¢çš„è¡¨è¾¾æ˜¯ï¼Œä¸Ž case è¯­å¥åŽé¢çš„è¡¨è¾¾æ˜¯æ¯”è¾ƒè¿è¡Œç»“æžœæ—¶ï¼Œé‡‡ç”¨çš„æ˜¯ä¸¥æ ¼ç›¸ç­‰è¿ç®—ç¬¦(===)ï¼Œè€Œä¸æ˜¯ç›¸ç­‰è¿ç®—ç¬¦(==)ï¼Œè¿™æ„å‘³ç€æ¯”è¾ƒæ—¶ä¸ä¼šå‘ç”Ÿç±»åž‹è½¬æ¢ã€‚// breakä½œç”¨æ˜¯ç»“æŸåˆ†æ”¯ç»“æž„(ç»“æŸæ‰€å±žswitchè¯­å¥)ï¼Œå¯ä»¥çœç•¥ã€‚ default åˆ†æ”¯defaultåˆ†æ”¯ï¼Œå‡ºçŽ°åœ¨æ‰€æœ‰caseä¹‹ä¸‹ï¼Œå½“æ‰€æœ‰caseæ²¡æœ‰åŒ¹é…ä¸Šï¼Œèµ°è¯¥åˆ†æ”¯,è¯¥åˆ†æ”¯ä¹Ÿå¯ä»¥çœç•¥ï¼Œä»£è¡¨æ²¡æœ‰æœªåŒ¹é…åˆ°çš„åŠ¨ä½œã€‚ å¾ªçŽ¯è¯­å¥å¾ªçŽ¯è¯­å¥ç”¨äºŽé‡å¤æ‰§è¡ŒæŸä¸ªæ“ä½œï¼Œç›´åˆ°æ¡ä»¶ä¸æ»¡è¶³è·³å‡ºå¾ªçŽ¯ã€‚ while å¾ªçŽ¯while å¾ªçŽ¯åŒ…æ‹¬ä¸€ä¸ªå¾ªçŽ¯æ¡ä»¶å’Œä¸€æ®µä»£ç å—ï¼Œåªè¦æ¡ä»¶ä¸ºçœŸï¼Œå°±ä¼šä¸æ–­æ‰§è¡Œä»£ç å—ã€‚ 123while (æ¡ä»¶è¡¨è¾¾å¼) &#123; è¯­å¥;&#125; whileè¯­å¥çš„å¾ªçŽ¯æ¡ä»¶ä¸ºä¸€ä¸ªæ¡ä»¶è¡¨è¾¾å¼ï¼Œå¿…é¡»æ”¾åœ¨åœ†æ‹¬å·ä¸­ï¼Œè¡¨ç¤ºéœ€è¦å…ˆè®¡ç®—è¡¨è¾¾å¼çš„ç»“æžœæ‰èƒ½è¿›è¡Œæ˜¯å¦è¿›è¡Œå¾ªçŽ¯ã€‚ä»£ç å—éƒ¨åˆ†ï¼Œå¦‚æžœåªæœ‰ä¸€æ¡è¯­å¥ï¼Œå¯ä»¥çœç•¥å¤§æ‹¬å·ã€‚ 12345var i = 0;while (i &lt; 100) &#123; console.log('i ä¸ºï¼š' + i); i++;&#125; è¿™æ®µä»£ç ä¼šå¾ªçŽ¯100æ¬¡ï¼Œç›´åˆ°i ç­‰äºŽ100ã€‚ for å¾ªçŽ¯for å¾ªçŽ¯æ˜¯å¾ªçŽ¯ç»“æž„çš„å¦ä¸€ç§å½¢å¼ï¼Œå¯ä»¥æŒ‡å®šå¾ªçŽ¯çš„èµ·ç‚¹ã€ç»ˆç‚¹å’Œç»ˆæ­¢æ¡ä»¶ã€‚æ ¼å¼å¦‚ä¸‹ï¼š 12345678910/* for (å¾ªçŽ¯å˜é‡å®šä¹‰å¹¶åˆå§‹åŒ–â‘ ; å¾ªçŽ¯å˜é‡æ¡ä»¶è¡¨è¾¾å¼â‘¡; å¾ªçŽ¯å˜é‡å¢žé‡â‘¢) &#123; ä»£ç å—â‘£; &#125; æ‰§è¡Œé¡ºåº â‘  â‘¡â‘£â‘¢ ... â‘¡â‘£â‘¢ â‘¡, â‘¡â‘£â‘¢ä¸ªæ•°å°±æ˜¯å¾ªçŽ¯æ¬¡æ•° */ for (var i = 0; i &lt; 5; i++) &#123; console.log("æˆ‘æœ€æ£’, æˆ‘æœ€å¸…, æˆ‘æ˜¯å¤©ä¸‹ç¬¬ä¸€!"); &#125; ä¸Šæ®µä»£ç åœ†æ‹¬å·é‡Œé¢æœ‰ä¸‰ä¸ªè¡¨è¾¾å¼ï¼š è¡¨è¾¾å¼â‘ ï¼ˆinitializeï¼‰ï¼šç¡®å®šå¾ªçŽ¯å˜é‡çš„åˆå§‹å€¼ï¼Œåªåœ¨å¾ªçŽ¯å¼€å§‹æ—¶æ‰§è¡Œä¸€æ¬¡ã€‚ è¡¨è¾¾å¼â‘¡ï¼ˆtestï¼‰ï¼šæ¯è½®å¾ªçŽ¯å¼€å§‹æ—¶ï¼Œéƒ½éœ€è¦æ‰§è¡Œåˆ¤æ–­ï¼Œåªæœ‰åˆ¤æ–­ä¸ºçœŸæ—¶ï¼Œæ‰ä¼šç»§ç»­å¾ªçŽ¯ã€‚ è¡¨è¾¾å¼â‘¢ï¼ˆincrementï¼‰ï¼šæ¯è½®å¾ªçŽ¯çš„æœ€åŽä¸€ä¸ªæ“ä½œï¼Œé€šå¸¸ç”¨æ¥é€’å¢žå¾ªçŽ¯å˜é‡ã€‚ æ‰€æœ‰ for å¾ªçŽ¯ï¼Œéƒ½å¯ä»¥ç”¨ while å¾ªçŽ¯å®žçŽ°ã€‚ for å¾ªçŽ¯é‡Œé¢çš„ä¸‰ä¸ªè¡¨è¾¾å¼å¯ä»¥çœç•¥å…¶ä¸­ä»»ä½•ä¸€ä¸ªï¼Œä¹Ÿå¯ä»¥å…¨éƒ¨çœç•¥ã€‚ 123for ( ; ; ) &#123; console.log('Hello MUSIBII!');&#125; è¿™æ®µä»£ç çœç•¥äº† for è¡¨è¾¾å¼çš„ä¸‰ä¸ªéƒ¨åˆ†ï¼Œç»“æžœå°±å¯¼è‡´äº†ä¸€ä¸ªæ— é™å¾ªçŽ¯ã€‚ doâ€¦while å¾ªçŽ¯doâ€¦while å¾ªçŽ¯å’Œ for å¾ªçŽ¯ç±»ä¼¼ï¼Œå”¯ä¸€åŒºåˆ«å°±æ˜¯ do å¾ªçŽ¯ä¸ç®¡æ¡ä»¶æ»¡ä¸æ»¡è¶³éƒ½ä¼šæ‰§è¡Œä¸€æ¬¡å¾ªçŽ¯ï¼Œä¹‹åŽè¿›è¡Œç¬¬äºŒæ¬¡å¾ªçŽ¯æ‰ä¼šè¿›è¡Œåˆ¤æ–­æ¡ä»¶ã€‚ 12345678do ä»£ç å—while (æ¡ä»¶è¡¨è¾¾å¼);// æˆ–do &#123; ä»£ç &#125; while (æ¡ä»¶è¡¨è¾¾å¼); ä¸ç®¡æ¡ä»¶æ˜¯å¦ä¸ºçœŸï¼Œdoâ€¦while å¾ªçŽ¯è‡³å°‘éœ€è¦è¿è¡Œä¸€æ¬¡ï¼Œè¿™æ˜¯å’Œwhile å¾ªçŽ¯çš„æœ¬è´¨åŒºåˆ«ã€‚å¦å¤– while è¯­å¥åŽé¢çš„åˆ†å·ä¸è¦çœç•¥ã€‚ 123456var x = 3;var y = 0;do &#123; console.log(y); y++;&#125; while(y &lt; x); break å’Œ continue è¯­å¥åªè¦æœ‰å¾ªçŽ¯å°±å°‘ä¸äº† break å’Œ continueï¼Œè¿™ä¸¤ä¸ªå…³é”®è¯éƒ½å…·æœ‰è·³è½¬ä½œç”¨ï¼Œå¯ä»¥æŽ§åˆ¶ä»£ç çš„æ‰§è¡Œé¡ºåºã€‚ break è¯­å¥ç”¨äºŽè·³å‡ºå¾ªçŽ¯ä½“ 1234567var i = 0;while(i &lt; 100) &#123; console.log('i ä¸ºï¼š' +i); i++; if (i === 10) break;&#125; å½“ i ç­‰äºŽ10æ—¶ï¼Œif è¡¨è¾¾å¼åˆ¤æ–­ä¸ºçœŸï¼Œæ‰§è¡Œ break è·³å‡ºå¾ªçŽ¯ä½“ continue è¯­å¥ç”¨äºŽç«‹å³ç»ˆæ­¢æœ¬è½®å¾ªçŽ¯ï¼Œè¿›å…¥ä¸‹æ¬¡å¾ªçŽ¯ã€‚ 123456var i = 0;while(i &lt; 100) &#123; if (i % 2 === 0) continue; console.log('i ä¸ºï¼š' +i); i++;&#125; è¿™æ®µä»£ç åªæœ‰ i ä¸ºå¥‡æ•°æ—¶ï¼Œæ‰ä¼šè¾“å‡º i çš„å€¼ã€‚å¦‚æžœ i ä¸ºå¶æ•°ï¼Œåˆ™ç›´æŽ¥è¿›å…¥ä¸‹ä¸€è½®å¾ªçŽ¯ã€‚å¦‚æžœå­˜åœ¨å¤šé‡å¾ªçŽ¯ï¼Œä¸å¸¦å‚æ•°çš„ break è¯­å¥å’Œ continue è¯­å¥éƒ½åªé’ˆå¯¹æœ¬å±‚å¾ªçŽ¯ã€‚ æ•°ç»„æ•°ç»„çš„å®šä¹‰æ•°ç»„ï¼ˆArrayï¼‰æ˜¯æŒ‰ç…§æ¬¡åºæŽ’åˆ—çš„ä¸€ç»„å€¼ã€‚æ¯ä¸ªå€¼å¾—ç´¢å¼•ä»Ž0å¼€å§‹ï¼Œæ•°ç»„ä½¿ç”¨ä¸­æ‹¬å·è¡¨ç¤ºã€‚ 1var array = ['a', 'b', 'c', 1, 2, 3]; è¿™æ ·ï¼Œarray å°±æž„æˆä¸€ä¸ªæ•°ç»„ï¼Œä¸¤ç«¯çš„æ–¹æ‹¬å·æ˜¯æ•°ç»„çš„æ ‡å¿—ã€‚â€™aâ€™ æ˜¯0å·ä½ç½®ï¼Œ3æ˜¯5å·ä½ç½®ã€‚ é™¤äº†åœ¨å®šä¹‰æ—¶èµ‹å€¼ï¼Œæ•°ç»„ä¹Ÿå¯ä»¥å…ˆå®šä¹‰åŽèµ‹å€¼ã€‚ï¼ˆé€šè¿‡æž„é€ å‡½æ•°ï¼ˆconstructorï¼‰ï¼‰ 123var array = [];array[0] = 'hello';array[1] = 'world'; ä»»ä½•ç±»åž‹çš„æ•°æ®ï¼Œéƒ½å¯ä»¥æ”¾å…¥æ•°ç»„ï¼ˆç±»æ¯” python çš„åˆ—è¡¨ï¼‰ã€‚ ç‰¹åˆ«çš„ï¼Œå¦‚æžœæ•°ç»„çš„å…ƒç´ è¿˜æ˜¯æ•°ç»„ï¼Œåˆ™å½¢æˆäº†å¤šç»´æ•°ç»„ã€‚ æ•°ç»„çš„æœ¬è´¨æœ¬è´¨ä¸Šï¼Œæ•°ç»„æ˜¯å¯¹è±¡ç±»åž‹çš„ä¸€ç§ï¼Œtypeof è¿ç®—ç¬¦ä¼šè¿”å›žæ•°ç»„çš„ç±»åž‹ä¸º objectã€‚ 1typeof(['a', 'b', 'c']) // object è¿™è¡¨æ˜Žï¼Œæ•°ç»„ç±»åž‹ä¸ºå¯¹è±¡ã€‚æ•°ç»„çš„ç‰¹æ®Šæ€§ä½“çŽ°åœ¨ï¼Œå®ƒçš„é”®åæ˜¯æŒ‰æ¬¡åºæŽ’åˆ—çš„ä¸€ç»„æ•´æ•°ï¼ˆä»Ž0å¼€å§‹ï¼‰ã€‚ 123var array = ['a', 'b', 'c'];Object.keys(array) // ['0', '1', '2'] é€šè¿‡ Object çš„ keys æ–¹æ³•å¯ä»¥è¿”å›žæŒ‡å®šæ•°ç»„çš„æ‰€æœ‰é”®åã€‚ ç”±äºŽæ•°ç»„æˆå‘˜çš„é”®åæ˜¯å›ºå®šçš„ï¼Œå› æ­¤æ•°ç»„ä¸ç”¨ä¸ºæ¯ä¸ªå…ƒç´ æŒ‡å®šé”®åï¼Œè€Œå¯¹è±¡çš„æ¯ä¸ªæˆå‘˜éƒ½å¿…é¡»æŒ‡å®šé”®åã€‚JavaScript è¯­è¨€è§„å®šï¼Œå¯¹è±¡çš„é”®åä¸€å¾‹ä¸ºå­—ç¬¦ä¸²ï¼Œæ‰€ä»¥ï¼Œæ•°ç»„çš„é”®åå…¶å®žä¹Ÿæ˜¯å­—ç¬¦ä¸²ã€‚ä¹‹æ‰€ä»¥å¯ä»¥ç”¨æ•°å€¼å–å€¼ï¼Œæ˜¯å› ä¸ºéžå­—ç¬¦ä¸²çš„é”®åä¼šè¢«è½¬ä¸ºå­—ç¬¦ä¸²ã€‚ 1234var array = ['a', 'b', 'c'];array[0]; // 'a'array['0']; // 'a' è¿™ç‚¹åœ¨èµ‹å€¼æ—¶ä¹Ÿä¼šæˆç«‹ï¼ˆjs çš„æ•°æ®ç±»åž‹è½¬æ¢éœ€è¦æ³¨æ„ï¼‰ï¼Œä¸€ä¸ªå€¼æ€»æ˜¯å…ˆè½¬æˆå­—ç¬¦ä¸²ï¼Œå†è¿›è¡Œèµ‹å€¼ã€‚ 123var a = [];a[1.00] = 'c';a[1]; // 'c' èµ‹å€¼æ—¶ï¼Œå…ˆæŠŠ1.00è½¬ä¸ºå­—ç¬¦ä¸²1ï¼Œèµ‹å€¼ç»“æŸåŽå¯ä»¥é€šè¿‡æ•°å­—é”®1å–å€¼ã€‚ length å±žæ€§æ•°ç»„çš„ length å±žæ€§è¿”å›žæ•°ç»„çš„æˆå‘˜æ•°é‡ã€‚ 1array.length // 3 JavaScript ä½¿ç”¨ä¸€ä¸ª32ä½æ•´æ•°ï¼Œä¿å­˜æ•°ç»„çš„å…ƒç´ ä¸ªæ•°ã€‚è¿™æ„å‘³ç€ï¼Œæ•°ç»„æˆå‘˜æœ€å¤šåªç”¨ï¼ˆ2^32 - 1ï¼‰ä¸ªï¼Œä¹Ÿå°±æ˜¯è¯´ length å±žæ€§çš„æœ€å¤§å€¼å°±æ˜¯4294967295ã€‚ åªè¦æ˜¯æ•°ç»„å°±ä¸€å®šæœ‰ length å±žæ€§ã€‚è¯¥å±žæ€§æ˜¯ä¸€ä¸ªåŠ¨æ€çš„å€¼ï¼ˆå› ä¸ºå¯ä»¥åŠ¨æ€èµ‹å€¼ï¼‰ã€‚æ•°ç»„çš„æ•°å­—é”®ä¸éœ€è¦è¿žç»­ï¼Œlength å±žæ€§çš„å€¼æ€»æ˜¯æ¯”æœ€å¤§çš„é‚£ä¸ªæ•´æ•°é”®å¤§1.å¦å¤–ï¼Œæ•°ç»„æ˜¯ä¸€ç§åŠ¨æ€çš„æ•°æ®ç»“æž„ï¼Œå¯ä»¥éšæ—¶å¢žå‡æ•°ç»„æˆå‘˜ã€‚ æ³¨æ„ï¼šlength å±žæ€§æ˜¯å¯å†™çš„ã€‚å¦‚æžœè®¤ä¸ºçš„è®¾ç½®ä¸€ä¸ªå°äºŽå½“å‰æˆå‘˜ä¸ªæ•°çš„å€¼ï¼Œè¯¥æ•°ç»„çš„æˆå‘˜ä¼šè‡ªåŠ¨å‡å°‘åˆ° length è®¾ç½®çš„å€¼ã€‚ 1234var array = ['a', 'b', 'c'];array.length; // 3array.length = 2;array // ['a', 'b'] è¿™è¡¨æ˜Žå½“æ•°ç»„çš„ length å±žæ€§å€¼è®¾ä¸º2ï¼Œé‚£ä¹ˆæ•´æ•°é”®2å°±ä¼šè¢«åˆ é™¤ã€‚è¿™æ ·æ¸…ç©ºä¸€ä¸ªæ•°ç»„å°±å¯ä»¥ç›´æŽ¥æŠŠ length å±žæ€§å€¼è®¾ä¸º0å°± ok äº†ã€‚ å¦‚æžœäººä¸ºè®¾ç½® length å€¼å¤§äºŽå½“å‰æ•°ç»„å…ƒç´ ä¸ªæ•°ï¼Œé‚£ä¹ˆæ•°ç»„çš„æˆå‘˜æ•°é‡ä¼šå¢žåŠ åˆ°è¿™ä¸ªå€¼ï¼Œæ–°å¢žçš„ä½ç½®éƒ½æ˜¯ç©ºï¼ˆundefinedï¼‰ã€‚ 1234var array = ['a'];a.length = 2;a[1]; // undedined å½“ length å±žæ€§å€¼è®¾ä¸ºå¤§äºŽæ•°ç»„ä¸ªæ•°æ—¶ï¼Œè¯»å–æ–°å¢žçš„ä½ç½®éƒ½ä¼šè¿”å›ž undefinedã€‚å¦‚æžœè®¾ç½®çš„ä¸åˆæ³•ï¼Œæ¯”å¦‚è®¾ç½®ä¸€ä¸ªéžæ•´æ•°çš„å€¼æ—¶ï¼ŒJavaScript ä¼šæŠ¥é”™ã€‚ 123456789var array = [];array.length = -1;// RangeError: Invalid array lengtharray.length = Math.pow(2, 32);// RangeError: Invalid array lengtharray.length = 'abc';// RangeError: Invalid array length å› ä¸ºæ•°ç»„çš„æœ¬è´¨æ˜¯ä¸€ç§å¯¹è±¡ï¼Œæ‰€ä»¥å¯ä»¥ä¸ºæ•°ç»„æ·»åŠ å±žæ€§ï¼Œä½†æ˜¯è¿™ä¸ä¼šå½±å“æ•°ç»„çš„ length å±žæ€§ã€‚ 1234var array = ['a'];array['name'] = 'musibii';array.length; // 1 æ³¨æ„ï¼šå¦‚æžœæ•°ç»„æ·»åŠ çš„é”®åè¶…è¿‡èŒƒå›´çš„æ•°å€¼ï¼Œè¯¥é”®åä¼šè‡ªåŠ¨è½¬åŒ–ä¸ºå­—ç¬¦ä¸²ã€‚ 12345678var array = [];array[-1] = 'a';array[Math.pow(2, 32)] = 'b';array.length //0array[-1]; // 'a'array[4294967296]; // 'b' ä¸Šé¢ä¸ºæ•°ç»„æ·»åŠ äº†ä¸¤ä¸ªä¸åˆæ³•çš„æ•°å­—é”®ï¼Œå¹¶ä¸ä¼šå½±å“åˆ° length çš„å€¼ã€‚è¿™äº›æ•°å­—é”®éƒ½å˜æˆäº†å­—ç¬¦ä¸²é”®åã€‚æœ€åŽä¸¤è¡Œä¼šå–åˆ°å€¼æ˜¯å› ä¸ºä¼šæŠŠæ•°å­—è½¬ä¸ºå­—ç¬¦ä¸²ã€‚ in è¿ç®—ç¬¦æ£€æŸ¥æŸä¸ªé”®åæ˜¯å¦å­˜åœ¨äºŽæ•°ç»„ä¸­ï¼Œä½¿ç”¨ in è¿ç®—ç¬¦ï¼Œè¿™ä¸ªé€‚ç”¨äºŽå¯¹è±¡ï¼Œè‡ªç„¶ä¹Ÿé€‚ç”¨äºŽæ•°ç»„ã€‚ 1234var array = ['a', 'b', 'c', 1, 2, 3];2 in array; // true'2' in array; // true6 in array; // false æ•°ç»„å­˜åœ¨é”®åä¸º2çš„é”®ï¼Œç”±äºŽé”®åéƒ½ä¸ºå­—ç¬¦ä¸²ï¼Œæ‰€ä»¥æ•°å€¼2ä¼šè‡ªåŠ¨è½¬æˆå­—ç¬¦ä¸²ã€‚ 1234567var array = [];array[100] = 'a';array.length; // 101array[1]; // undefined1 in array; // false æ•°ç»„ array åªæœ‰ä¸€ä¸ªæˆå‘˜ï¼Œè™½ç„¶ length ä¸º101ï¼Œä½†æ˜¯å…¶ä»–ä½ç½®çš„é”®åéƒ½ä¼šè¿”å›ž falseã€‚ forâ€¦in å¾ªçŽ¯å’Œæ•°ç»„çš„éåŽ†forâ€¦in å¾ªçŽ¯ä¸ä»…å¯ä»¥éåŽ†å¯¹è±¡ï¼Œä¹Ÿå¯ä»¥éåŽ†æ•°ç»„ã€‚å› ä¸ºæ•°ç»„æ˜¯å¯¹è±¡ã€‚ 12345var array = ['a', 'b', 'c'];for (var i in array) &#123; console.log(array[i]);&#125;// 'a', 'b', 'c' æ¢è¡Œæ‰“å° forâ€¦in ä¸ä»…ä¼šéåŽ†æ•°ç»„æ‰€æœ‰çš„æ•°å­—é”®ï¼Œä¹Ÿä¼šéåŽ†éžæ•°å­—é”®ã€‚ 1234567var array = ['a', 'b', 'c'];array.name = 'musibii';for (var i in array) &#123; console.log(array[i]);&#125;// 'a', 'b', 'c', 'musibii' åœ¨éåŽ†æ•°ç»„æ—¶ï¼Œä¹Ÿä¼šéåŽ†éžæ•´æ•°é”®nameï¼Œæ‰€ä»¥ä¸å»ºè®®ä½¿ç”¨forâ€¦in éåŽ†æ•°ç»„ã€‚å¯ä»¥ä½¿ç”¨ for å¾ªçŽ¯æˆ–è€… while å¾ªçŽ¯ã€‚ï¼ˆè¿™æ ·åªä¼šéåŽ†å‡ºæ•´æ•°çš„é”®åï¼‰ æ•°ç»„çš„ç©ºä½å½“æ•°ç»„çš„æŸä¸ªä½ç½®æ˜¯ç©ºå…ƒç´ ï¼Œå³ä¸¤ä¸ªé€—å·ä¹‹é—´æ²¡æœ‰ä»»ä½•å€¼ï¼Œé‚£ä¹ˆç§°è¯¥æ•°ç»„å­˜åœ¨ç©ºä½ã€‚ 123var array = ['a', '', 'c'];array.length; // 3array[1]; // undefined è¿™è¡¨åæ•°ç»„çš„ç©ºä½ä¸å½±å“ length å±žæ€§çš„å€¼ã€‚ å¹¶ä¸”ç©ºä½æ˜¯å¯ä»¥è¢«è¯»å–çš„ï¼Œåªä¸è¿‡å€¼ä¸º undefinedã€‚ ä½¿ç”¨ delete å‘½ä»¤å¯ä»¥åˆ é™¤æ•°ç»„ä¸­çš„æŸä¸ªæˆå‘˜ï¼Œè¿™æ ·ä¼šå½¢æˆç©ºä½ï¼Œå’Œä¸Šé¢ä¸€æ ·ä¸ä¼šå½±å“æ•°ç»„çš„ length å±žæ€§ã€‚ 1234var array = ['a', 'b', 'c'];delete array[1];a[1]; //undefineda.length; // 3 ä½¿ç”¨ delete åˆ é™¤äº†æ•°ç»„ä¸­çš„å…ƒç´ ï¼Œä¸ä¼šå½±å“æ•°ç»„çš„ length å±žæ€§å€¼ï¼Œè¿™æ ·å¦‚æžœä½¿ç”¨ length å¯¹ä¸€ä¸ªæ•°ç»„è¿›è¡ŒéåŽ†æ—¶éœ€è¦è°¨æ…Žï¼ˆè¿™å¥½å¥‡æ€ªå•Šã€‚ã€‚ã€‚ã€‚ï¼‰ æ•°ç»„çš„æŸä¸ªä½ç½®æ˜¯ç©ºä½ï¼Œä¸ŽæŸä¸ªä½ç½®æ˜¯ undefinedï¼Œæ˜¯ä¸ä¸€æ ·çš„ã€‚å¦‚æžœæ˜¯ç©ºä½ï¼Œä½¿ç”¨æ•°ç»„çš„ forEach æ–¹æ³•ã€forâ€¦in ç»“æž„ä»¥åŠ Object.keys æ–¹æ³•è¿›è¡ŒéåŽ†æ—¶ï¼Œç©ºä½ä¼šè¢«è·³è¿‡ã€‚ ä¸å¾—ä¸è¯´ï¼ŒçœŸçš„å¥‡æ€ªã€‚è¿™ä¸ªè®¾è®¡æ€æƒ³ä¹Ÿå¤ªçµæ´»äº†8ã€‚ã€‚ã€‚ ç©ºä½è¡¨ç¤ºæ•°ç»„æ²¡æœ‰è¿™ä¸ªå…ƒç´ ï¼Œæ‰€ä»¥ä¸ä¼šè¢«éåŽ†åˆ°ï¼Œè€Œ undefined è¡¨ç¤ºæ•°ç»„æœ‰è¿™ä¸ªå…ƒç´ ï¼Œå€¼ä¸º undefinedï¼Œè¿™æ ·éåŽ†å°±ä¸ä¼šè·³è¿‡ã€‚]]></content>
      <categories>
        <category>JavaScript</category>
      </categories>
  </entry>
  <entry>
    <title><![CDATA[JavaScriptï¼ˆäºŒï¼‰]]></title>
    <url>%2F2018%2F12%2F18%2FJavaScript%EF%BC%88%E4%BA%8C%EF%BC%89%2F</url>
    <content type="text"><![CDATA[JSå¸¸ç”¨ç±»ä¸€ã€Number1ã€å¸¸ç”¨æ•°å­—1234æ•´æ•°ï¼š10å°æ•°ï¼š3.14ç§‘å­¦è®¡æ•°æ³•ï¼š1e5 | 1e-5æ­£è´Ÿæ— ç©·ï¼šInfinity | -Infinity 2ã€å¸¸ç”¨è¿›åˆ¶1234äºŒè¿›åˆ¶ï¼š0b1010å…«è¿›åˆ¶ï¼š012åè¿›åˆ¶ï¼š10åå…­è¿›åˆ¶ï¼š0xA 3ã€NaN1éžæ•°å­—ç±»åž‹ï¼Œé€šè¿‡isNaN()è¿›è¡Œåˆ¤æ–­ 4ã€å¸¸ç”¨å¸¸é‡123æœ€å¤§å€¼ï¼šMAX_VALUE(1.7976931348623157e+308)æœ€å°å€¼ï¼šMIN_VALUE(5e-324)æ­£è´Ÿæ— ç©·ï¼šNEGATIVE_INFINITY | POSITIVE_INFINITY(Infinity | -Infinity) 5ã€å¸¸ç”¨å®žä¾‹æ–¹æ³•1234toExponential(n) =&gt; 3.14.toExponential(1) =&gt; 1.3e+1 (å…ˆç§‘å­¦è®°æ•°ï¼Œå†ç¡®å®šç²¾åº¦ï¼Œnä¸ºå°æ•°ç²¾åº¦)toFixed(n) =&gt; 3.14.toFixed(1) =&gt; 3.1 (å…ˆç¡®å®šç²¾åº¦ï¼Œå†æ™®é€šè®°æ•°ï¼Œnä¸ºå°æ•°ç²¾åº¦)toPrecision(n) =&gt; 13.14.toPrecision(1|2) =&gt; 1e+1|13 (å…ˆç¡®å®šç²¾åº¦ï¼Œå†è®°æ•°ï¼Œnä¸ºä½æ•°è¿›åº¦)toString() =&gt; v-hintï¼šç»å…¸bugæ•°å­—13.145äºŒã€æ—¶é—´1ã€åˆ›å»ºå¹¶èŽ·å–æ—¶é—´1var date = new Date(); 2ã€æ—¶é—´æˆ³1date.getTime(); 3ã€èŽ·å–æ—¶é—´12345678å¹´ï¼šdate.getFullYear()æœˆï¼šdate.getMonth() + 1æ—¥ï¼šdate.getDate()æ˜ŸæœŸï¼šdate.getDay()å°æ—¶ï¼šdate.getHours()åˆ†é’Ÿï¼šdate.getMinutes()ç§’ï¼šdate.getSeconds()æ¯«ç§’ï¼šdate.getMilliseconds() 4ã€å¸¸è§æ ¼å¼æ—¶é—´123getUTCFullYear()getUTCDate()getUTCHours() ä¸‰ã€å­—ç¬¦ä¸²1ã€å¸¸ç”¨å­—ç¬¦ä¸²1'string' | "string" | 'my name is "zero"' | "I'm boy" | "I \"love\" you" 2ã€å¸¸ç”¨å±žæ€§1lengthï¼šå­—ç¬¦ä¸²é•¿åº¦ 3ã€å¸¸ç”¨æ–¹æ³•123456789101112chartAt(n)ï¼šæŒ‡å®šç´¢å¼•å­—ç¬¦ï¼ŒåŒ[n]concat(str)ï¼šå°†ç›®æ ‡å­—ç¬¦ä¸²æ‹¼æŽ¥åˆ°æŒ‡å®šå­—ç¬¦ä¸²ä¹‹åŽindexOf(str)ï¼šæŒ‡å®šå­—ç¬¦ä¸²ç¬¬ä¸€æ¬¡å‡ºçŽ°çš„ä½ç½®lastIndexOf(str)ï¼šæŒ‡å®šå­—ç¬¦ä¸²æœ€ä¸€æ¬¡å‡ºçŽ°çš„ä½ç½®replace(re, str)ï¼šå°†æ­£åˆ™åŒ¹é…åˆ°çš„å­—ç¬¦ä¸²æ›¿æ¢ä¸ºæŒ‡å®šå­—ç¬¦ä¸²substr(n, m)ï¼šä»Žç´¢å¼•nå¼€å§‹ï¼Œæˆªå–mä¸ªå­—ç¬¦é•¿åº¦(mçœç•¥ä»£è¡¨æˆªå–åˆ°æœ€åŽ)substring(n, m)ï¼šä»Žç´¢å¼•nå¼€å§‹ï¼Œæˆªå–åˆ°ç´¢å¼•m(mçœç•¥ä»£è¡¨æˆªå–åˆ°æœ€åŽ)slice(n, m)ï¼šåŒsubstring(n, m)split(re)ï¼šä»¥æŒ‡å®šæ­£åˆ™å°†å­—ç¬¦ä¸²æ‹†åˆ†ä¸ºæ•°ç»„toUpperCase()ï¼šè½¬æ¢ä¸ºå¤§å†™toLowerCase()ï¼šè½¬æ¢ä¸ºå°å†™trim()ï¼šåŽ»é™¤é¦–å°¾ç©ºç™½å­—ç¬¦ å››ã€æ•°ç»„1ã€å¸¸è§æ•°ç»„1[1, 2, 3] | ['1', '2', '3'] | [1, '2', true] 2ã€å¸¸ç”¨å±žæ€§1lengthï¼šæ•°ç»„å…ƒç´ ä¸ªæ•° 3ã€å¸¸ç”¨åŸºç¡€æ–¹æ³•12345678concat(arr)ï¼šå°†ç›®æ ‡æ•°ç»„æ‹¼æŽ¥åˆ°æŒ‡å®šæ•°ç»„ä¹‹åŽindexOf(ele)ï¼šæŒ‡å®šå…ƒç´ ç¬¬ä¸€æ¬¡å‡ºçŽ°çš„ä½ç½®lastIndexOf(ele)ï¼šæŒ‡å®šå…ƒç´ æœ€ä¸€æ¬¡å‡ºçŽ°çš„ä½ç½®reverse()ï¼šåè½¬æ•°ç»„includes(ele, n)ï¼šä»Žç´¢å¼•nå¼€å§‹å¾€åŽï¼Œå…ƒç´ eleæ˜¯å¦åœ¨æ•°ç»„ä¸­ï¼Œåšå…¨ç­‰åŒ¹é…ï¼Œç´¢å¼•ä»Žå¤´å¼€å§‹nå¯ä»¥çœç•¥(inåªåšå€¼åŒ¹é…)fill(ele)ï¼šä»¥æŒ‡å®šå…ƒç´ å¡«å……æ•´ä¸ªæ•°ç»„slice(n, m)ï¼šä»Žç´¢å¼•nå¼€å§‹ï¼Œæˆªå–åˆ°ç´¢å¼•m(mçœç•¥ä»£è¡¨æˆªå–åˆ°æœ€åŽ)join(str)ï¼šä»¥æŒ‡å®šå­—ç¬¦ä¸²è¿žæŽ¥æˆå­—ç¬¦ä¸² 4ã€å¢žåˆ æ”¹æ–¹æ³•12345678910push(ele)ï¼šä»Žå°¾åŠ unshift(ele)ï¼šä»Žå¤´åŠ pop()ï¼šä»Žå°¾åˆ shift()ï¼šä»Žå¤´åˆ splice(begin, length, ...eles)ï¼šå®Œæˆå¢žåˆ æ”¹// beginå¼€å§‹ç´¢å¼•// lengthé•¿åº¦// æ–°å…ƒç´ ä»¬(å¯ä»¥çœç•¥) 5ã€å›žè°ƒå‡½æ•°æ–¹æ³•12345filter(function(value, index)&#123; return true | false&#125;)ï¼šè¿‡æ»¤å™¨every(function(value, index)&#123; return æ¡ä»¶è¡¨è¾¾å¼; &#125;)ï¼šå…¨éƒ¨æ»¡è¶³æ¡ä»¶some(function(value, index)&#123; return æ¡ä»¶è¡¨è¾¾å¼; &#125;)ï¼šéƒ¨åˆ†æ»¡è¶³æ¡ä»¶reduce(function(prev,value,index)&#123; return prev * value; &#125;)ï¼šç´¯ç§¯sort(function(o, n)&#123; return o &gt; n &#125;)ï¼šæ­£é€†å‘æŽ’åº äº”ã€Math1ã€å¸¸ç”¨å¸¸é‡123456Eï¼šè¿”å›žç®—æœ¯å¸¸é‡ eï¼Œå³è‡ªç„¶å¯¹æ•°çš„åº•æ•°ï¼ˆçº¦ç­‰äºŽ2.718ï¼‰LN2ï¼šè¿”å›ž 2 çš„è‡ªç„¶å¯¹æ•°ï¼ˆçº¦ç­‰äºŽ0.693ï¼‰LN10ï¼šè¿”å›ž 10 çš„è‡ªç„¶å¯¹æ•°ï¼ˆçº¦ç­‰äºŽ2.302ï¼‰LOG2Eï¼šè¿”å›žä»¥ 2 ä¸ºåº•çš„ e çš„å¯¹æ•°ï¼ˆçº¦ç­‰äºŽ 1.4426950408889634ï¼‰LOG10Eï¼šè¿”å›žä»¥ 10 ä¸ºåº•çš„ e çš„å¯¹æ•°ï¼ˆçº¦ç­‰äºŽ0.434ï¼‰PIï¼šè¿”å›žåœ†å‘¨çŽ‡ï¼ˆçº¦ç­‰äºŽ3.14159ï¼‰ 2ã€å¸¸ç”¨æ–¹æ³•12345678abs(x)ï¼šè¿”å›ž x çš„ç»å¯¹å€¼ceil(x)ï¼šå‘ä¸Šå–æ•´floor(x)ï¼šå‘ä¸‹å–æ•´max(...n)ï¼šæ±‚æœ€å¤§å€¼min(...n)ï¼šæ±‚æœ€å°å€¼pow(x,y)ï¼šè¿”å›ž x çš„ y æ¬¡å¹‚random()ï¼šè¿”å›ž 0 ~ 1 ä¹‹é—´çš„éšæœºæ•°round(x)ï¼šå››èˆäº”å…¥ å…­ã€æ­£åˆ™1ã€æ­£åˆ™å¯¹è±¡1234// æž„é€ å‡½æ•°var re = new RegExp('^\\w', 'igm');// å­—é¢é‡var re = /^\w/igm; 2ã€ä¿®é¥°ç¬¦123iï¼šä¸åŒºåˆ†å¤§å°å†™gï¼šå…¨æ–‡åŒ¹é…mï¼šå¤šè¡ŒåŒ¹é… 3ã€æ­£åˆ™æ–¹æ³•12test()ï¼šåŒ¹é…ç›®æ ‡å­—ç¬¦ä¸²ï¼Œç»“æžœä¸ºtrue|falseexec()ï¼šåŒ¹é…ç›®æ ‡å­—ç¬¦ä¸²ï¼Œç»“æžœä¸ºç¬¬ä¸€æ¡ç»“æžœæ‰€æœ‰ä¿¡æ¯çš„æ•°ç»„ 4ã€å­—ç¬¦ä¸²æ–¹æ³•1234match(re)ï¼šåŒ¹é…æŒ‡å®šæ­£åˆ™ï¼Œç»“æžœä¸ºæ•°ç»„(å¯å…¨æ–‡åŒ¹é…)search(re)ï¼šåŒ¹é…æŒ‡å®šæ­£åˆ™ï¼Œç»“æžœä¸ºåŒ¹é…çš„ç´¢å¼•ï¼Œåä¹‹-1replace(re, newStr)ï¼šåŒ¹é…æŒ‡å®šæ­£åˆ™ï¼Œæ›¿æ¢åŒ¹é…çš„ç»“æžœ(å¯å…¨æ–‡åŒ¹é…)split(re, n)ï¼šæŒ‰æ­£åˆ™è¿›è¡Œæ‹†åˆ†ï¼Œnçš„å€¼å¯ä»¥å†³å®šç»“æžœçš„æ•°ç»„é•¿åº¦(å¯é€‰å‚æ•°)]]></content>
      <categories>
        <category>JavaScript</category>
      </categories>
  </entry>
  <entry>
    <title><![CDATA[JavaScriptï¼ˆä¸€ï¼‰]]></title>
    <url>%2F2018%2F12%2F17%2FJavaScript%EF%BC%88%E4%B8%80%EF%BC%89%2F</url>
    <content type="text"><![CDATA[JavaScript ç³»åˆ—åšå®¢ï¼ˆä¸€ï¼‰å‰è¨€æœ¬ç³»åˆ—åšå®¢ä¸ºè®°å½•å­¦ä¹  JavaScript çš„å­¦ä¹ ç¬”è®°ï¼Œä¼šä»ŽåŸºç¡€å¼€å§‹æ…¢æ…¢æŽ¢ç´¢ jsã€‚ä»Šå¤©çš„å­¦ä¹ ç¬”è®°ä¸»è¦ä¸º js å¼•å…¥ã€å®šä¹‰å˜é‡ä»¥åŠ JavaScript ä¸­æ•°æ®ç±»åž‹å’Œæ•°æ®ç±»åž‹ä¹‹é—´çš„è½¬æ¢ã€‚ å¼•å…¥ JavaScriptä»€ä¹ˆæ˜¯JavaScript è¯­è¨€ï¼ŸJavaScript æ˜¯ä¸€ç§è½»é‡çº§çš„è„šæœ¬è¯­è¨€ã€‚æ‰€è°“çš„â€˜â€™è„šæœ¬è¯­è¨€â€˜â€™ï¼ŒæŒ‡çš„æ˜¯å®ƒä¸å…·å¤‡å¼€å‘æ“ä½œç³»ç»Ÿçš„èƒ½åŠ›ï¼Œè€Œæ˜¯åªç”¨æ¥ç¼–å†™ç›¸å…³åº”ç”¨ç¨‹åºçš„â€˜â€™è„šæœ¬â€˜â€™ï¼Œä½¿ç”¨åœºæ™¯æœ€å¤šçš„æ˜¯æµè§ˆå™¨ä¸­ã€‚ JavaScript ä¹Ÿæ˜¯ä¸€ç§åµŒå…¥å¼è¯­è¨€ã€‚æœ¬èº«çš„æ ¸å¿ƒè¯­æ³•ä¸ç®—å¾ˆå¤šï¼Œåªèƒ½ç”¨æ¥åšä¸€äº›æ•°å­¦å’Œé€»è¾‘è¿ç®—ã€‚JavaScript æœ¬èº«ä¸æä¾›ä»»ä½•ä¸Ž I/Oç›¸å…³çš„æŽ¥å£ï¼Œéƒ½è¦é å®¿ä¸»çŽ¯å¢ƒæä¾›ï¼Œæ‰€ä»¥ JavaScript åªé€‚åˆåµŒå…¥æ›´å¤§åž‹çš„åº”ç”¨ç¨‹åºçŽ¯å¢ƒï¼ŒåŽ»è°ƒç”¨å®¿ä¸»çŽ¯å¢ƒæä¾›çš„æŽ¥å£ã€‚æ¯”å¦‚å’Œæµè§ˆå™¨çš„äº¤äº’ã€‚ ä»Žè¯­æ³•è§’åº¦çœ‹ï¼ŒJavaScript è¯­è¨€æ˜¯ä¸€ç§â€˜â€™å¯¹è±¡æ¨¡åž‹â€˜â€™è¯­è¨€ï¼ˆObject Modelsï¼‰ã€‚å„ç§å®¿ä¸»çŽ¯å¢ƒé€šè¿‡è¿™ä¸ªæ¨¡åž‹ï¼Œæè¿°è‡ªå·±çš„åŠŸèƒ½å’Œæ“ä½œæŽ¥å£ï¼Œè¿˜æ”¯æŒå…¶ä»–ç¼–ç¨‹èŒƒå¼ï¼ˆæ¯”å¦‚å‡½æ•°å¼ç¼–ç¨‹ï¼‰ã€‚ JavaScript çš„æ ¸å¿ƒè¯­æ³•éžå¸¸ç²¾ç®€ï¼ŒåªåŒ…æ‹¬ä¸¤ä¸ªéƒ¨åˆ†ï¼šåŸºæœ¬çš„è¯­æ³•æž„é€ ï¼ˆæ¯”å¦‚æ“ä½œç¬¦ã€æŽ§åˆ¶ç»“æž„ã€è¯­å¥ï¼‰å’Œæ ‡å‡†åº“ï¼ˆä¸€ç³»åˆ—çš„å…·ä½“å¯¹è±¡ç±»åž‹ï¼Œæ¯”å¦‚ Arrayã€Date ç­‰ï¼‰ã€‚é™¤æ­¤ä¹‹å¤–ï¼Œå„ç§å®¿ä¸»çŽ¯å¢ƒæä¾›é¢å¤–çš„æŽ¥å£ï¼ˆå³åªèƒ½åœ¨è¯¥çŽ¯å¢ƒä½¿ç”¨çš„æŽ¥å£ï¼‰ï¼Œä»¥ä¾¿ JavaScript è°ƒç”¨ã€‚ä»¥æµè§ˆå™¨ä¸ºä¾‹ï¼Œä»–æä¾›ä¸ªé¢å¤–æŽ¥å£åˆ†ä¸ºä¸‰å¤§ç±»ã€‚ æµè§ˆå™¨æŽ§åˆ¶ç±»ï¼šæ“ä½œæµè§ˆå™¨ DOM ç±»ï¼šæ“ä½œç½‘é¡µçš„å„ç§å…ƒç´  Web ç±»ï¼šå®žçŽ°äº’è”ç½‘çš„å„ç§åŠŸèƒ½ å¦‚æžœå®¿ä¸»çŽ¯å¢ƒæ˜¯æœåŠ¡å™¨ï¼Œåˆ™ä¼šæä¾›å„ç§æ“ä½œç³»ç»Ÿçš„æŽ¥å£ï¼Œæ¯”å¦‚æ–‡ä»¶æ“ä½œæŽ¥å£ï¼Œç½‘ç»œé€šä¿¡æŽ¥å£ç­‰ã€‚ JavaScript ä¸Ž Javaçš„å…³ç³»å…¶å®žæˆ‘å¾ˆæ—©å°±çŸ¥é“ JavaScript å’Œ Java äº†ï¼Œå¼€å§‹ä¹Ÿå¾ˆçº³é—·å®ƒä»¬ä¹‹é—´çš„å…³ç³»ï¼Œè¿™é‡Œè¯¦ç»†ä»‹ç»ä¸€ä¸‹ã€‚ JavaScript çš„åŸºæœ¬è¯­æ³•å’Œå¯¹è±¡ä½“ç³»ï¼Œæ˜¯æ¨¡ä»¿ Java è®¾è®¡çš„ã€‚ä½†æ˜¯JavaScript æ²¡æœ‰é‡‡ç”¨ Java çš„é™æ€ ç±»åž‹ã€‚æ­£æ˜¯å› ä¸º JavaScriptä¸Ž Java æœ‰å¾ˆå¤§çš„ç›¸ä¼¼æ€§ï¼Œæ‰€ä»¥è¿™é—¨è¯­è¨€ä»Žä¸€å¼€å§‹çš„ LiveScript æ”¹åä¸º JavaScriptã€‚åŸºæœ¬ä¸Šï¼ŒJavaScript è¿™ä¸ªåå­—çš„åŽŸæ„æ˜¯â€˜â€™å¾ˆåƒ Javaçš„è„šæœ¬è¯­è¨€â€˜â€™ã€‚ JavaScript è¯­è¨€çš„å‡½æ•°æ˜¯ä¸€ç§ç‹¬ç«‹çš„æ•°æ®ç±»åž‹ï¼Œä»¥åŠé‡‡ç”¨åŸºäºŽåŽŸåž‹å¯¹è±¡çš„ç»§æ‰¿é“¾ã€‚è¿™æ˜¯å®ƒä¸Ž Java è¯­æ³•æœ€å¤§çš„ä¸¤ç‚¹åŒºåˆ«ã€‚JavaScript è¯­æ³•æ¯” Java è¦è‡ªç”±çš„å¤šã€‚ï¼ˆçº¦æŸå°‘äº†ï¼Œé—®é¢˜ä¹Ÿä¼šå¤šèµ·æ¥ï¼‰ã€‚ é™¤æ­¤ä¹‹å¤–ï¼ŒJava è¯­è¨€éœ€è¦ç¼–è¯‘ï¼Œè€Œ JavaScript è¯­è¨€åˆ™æ˜¯è¿è¡Œæ—¶ç”±è§£é‡Šå™¨ç›´æŽ¥æ‰§è¡Œã€‚ JavaScript ä¸Ž ECMAScript çš„å…³ç³»1996å¹´8æœˆï¼Œå¾®è½¯æ¨¡ä»¿ JavaScript å¼€å‘äº†ä¸€ç§ç›¸è¿‘çš„è¯­è¨€ï¼Œå–åä¸ºJScriptï¼ˆJavaScript æ˜¯ Netscape çš„æ³¨å†Œå•†æ ‡ï¼Œå¾®è½¯ä¸èƒ½ç”¨ï¼‰ï¼Œé¦–å…ˆå†…ç½®äºŽIE 3.0ã€‚Netscape å…¬å¸é¢ä¸´ä¸§å¤±æµè§ˆå™¨è„šæœ¬è¯­è¨€çš„ä¸»å¯¼æƒçš„å±€é¢ã€‚ 1996å¹´11æœˆï¼ŒNetscape å…¬å¸å†³å®šå°† JavaScript æäº¤ç»™å›½é™…æ ‡å‡†åŒ–ç»„ç»‡ ECMAï¼ˆEuropean Computer Manufacturers Associationï¼‰ï¼Œå¸Œæœ› JavaScript èƒ½å¤Ÿæˆä¸ºå›½é™…æ ‡å‡†ï¼Œä»¥æ­¤æŠµæŠ—å¾®è½¯ã€‚ECMA çš„39å·æŠ€æœ¯å§”å‘˜ä¼šï¼ˆTechnical Committee 39ï¼‰è´Ÿè´£åˆ¶å®šå’Œå®¡æ ¸è¿™ä¸ªæ ‡å‡†ï¼Œæˆå‘˜ç”±ä¸šå†…çš„å¤§å…¬å¸æ´¾å‡ºçš„å·¥ç¨‹å¸ˆç»„æˆï¼Œç›®å‰å…±25ä¸ªäººã€‚è¯¥å§”å‘˜ä¼šå®šæœŸå¼€ä¼šï¼Œæ‰€æœ‰çš„é‚®ä»¶è®¨è®ºå’Œä¼šè®®è®°å½•ï¼Œéƒ½æ˜¯å…¬å¼€çš„ã€‚ 1997å¹´7æœˆï¼ŒECMA ç»„ç»‡å‘å¸ƒ262å·æ ‡å‡†æ–‡ä»¶ï¼ˆECMA-262ï¼‰çš„ç¬¬ä¸€ç‰ˆï¼Œè§„å®šäº†æµè§ˆå™¨è„šæœ¬è¯­è¨€çš„æ ‡å‡†ï¼Œå¹¶å°†è¿™ç§è¯­è¨€ç§°ä¸º ECMAScriptã€‚è¿™ä¸ªç‰ˆæœ¬å°±æ˜¯ ECMAScript 1.0 ç‰ˆã€‚ä¹‹æ‰€ä»¥ä¸å« JavaScriptï¼Œä¸€æ–¹é¢æ˜¯ç”±äºŽå•†æ ‡çš„å…³ç³»ï¼ŒJava æ˜¯ Sun å…¬å¸çš„å•†æ ‡ï¼Œæ ¹æ®ä¸€ä»½æŽˆæƒåè®®ï¼Œåªæœ‰ Netscape å…¬å¸å¯ä»¥åˆæ³•åœ°ä½¿ç”¨ JavaScript è¿™ä¸ªåå­—ï¼Œä¸” JavaScript å·²ç»è¢« Netscape å…¬å¸æ³¨å†Œä¸ºå•†æ ‡ï¼Œå¦ä¸€æ–¹é¢ä¹Ÿæ˜¯æƒ³ä½“çŽ°è¿™é—¨è¯­è¨€çš„åˆ¶å®šè€…æ˜¯ ECMAï¼Œä¸æ˜¯ Netscapeï¼Œè¿™æ ·æœ‰åˆ©äºŽä¿è¯è¿™é—¨è¯­è¨€çš„å¼€æ”¾æ€§å’Œä¸­ç«‹æ€§ã€‚å› æ­¤ï¼ŒECMAScript å’Œ JavaScript çš„å…³ç³»æ˜¯ï¼Œå‰è€…æ˜¯åŽè€…çš„è§„æ ¼ï¼ŒåŽè€…æ˜¯å‰è€…çš„ä¸€ç§å®žçŽ°ã€‚åœ¨æ—¥å¸¸åœºåˆï¼Œè¿™ä¸¤ä¸ªè¯æ˜¯å¯ä»¥äº’æ¢çš„ã€‚ ECMAScript åªç”¨æ¥æ ‡å‡†åŒ– JavaScript è¿™ç§è¯­è¨€çš„åŸºæœ¬è¯­æ³•ç»“æž„ï¼Œä¸Žéƒ¨ç½²çŽ¯å¢ƒç›¸å…³çš„æ ‡å‡†éƒ½ç”±å…¶ä»–æ ‡å‡†è§„å®šï¼Œæ¯”å¦‚ DOM çš„æ ‡å‡†å°±æ˜¯ç”± W3Cç»„ç»‡ï¼ˆWorld Wide Web Consortiumï¼‰åˆ¶å®šçš„ã€‚ ECMA-262 æ ‡å‡†åŽæ¥ä¹Ÿè¢«å¦ä¸€ä¸ªå›½é™…æ ‡å‡†åŒ–ç»„ç»‡ ISOï¼ˆInternational Organization for Standardizationï¼‰æ‰¹å‡†ï¼Œæ ‡å‡†å·æ˜¯ ISO-16262ã€‚ åœ¨ HTML ä¸­å¼•å…¥ jsåœ¨ä¹‹å‰å­¦ä¹  css ä¸­æœ‰ä¸‰ç§å¼•å…¥ css çš„æ–¹å¼ï¼Œé‚£ä¹ˆä¹Ÿæœ‰ä¸‰ç§å¼•å…¥ js çš„æ–¹å¼ã€‚ è¡Œé—´å¼ 1&lt;div id="ddd" onmouseover="this.style.color ='red'" onmouseleave="this.style.color = 'blue'"&gt;è¿™æ˜¯è¡Œé—´å¼ js çš„ div&lt;/div&gt; ç‰¹ç‚¹ï¼š è¡Œé—´å¼ä»£ç å—ä¹¦å†™åœ¨ä¸€ä¸ªä¸ªå…¨å±€äº‹ä»¶åå±žæ€§ä¸­ï¼Œæ²¡æœ‰ script è¿™æ ·çš„ä¸€ä¸ªå…¨å±€å±žæ€§ï¼› åœ¨æŸä¸€ä¸ªæ ‡ç­¾çš„æŸä¸€ä¸ªäº‹ä»¶å±žæ€§å€¼ä¸­ï¼Œå‡ºçŽ°çš„ this ä»£è¡¨è¯¥æ ‡ç­¾ï¼› è¯¥æ ‡ç­¾å¯¹è±¡ this å¯ä»¥è®¿é—®è¯¥æ ‡ç­¾çš„ä»»æ„å…¨å±€å±žæ€§ã€‚ å†…è”å¼ 123&lt;script&gt; ddd.style.backgroundColor = 'pink'&lt;/script&gt; ç‰¹ç‚¹ï¼š å¯ä»¥é€šè¿‡æ ‡ç­¾çš„ idï¼ˆå”¯ä¸€æ ‡è¯†ï¼‰ï¼Œåœ¨ js ä»£ç å—ä¸­è®¿é—®åˆ°è¯¥æ ‡ç­¾ï¼ˆjs é€‰æ‹©å™¨ï¼‰ï¼› js ä»£ç å—ä¸­è¯­æ³•é‡‡ç”¨çš„æ˜¯å°é©¼å³°å‘½åæ³•ï¼Œå±žæ€§çš„å€¼éƒ½æ˜¯ç”¨å­—ç¬¦ä¸²å½¢å¼è¿›è¡Œå¤åˆ¶ï¼› js å±žäºŽè§£é‡Šåž‹è¯­è¨€ï¼ŒåŠ è½½é¡ºåºä¼šå½±å“æ‰§è¡Œç»“æž„ã€‚ å¤–è”å¼ 1234&lt;script src="js/01.js"&gt; // è¢«å±è”½æŽ‰çš„ä»£ç å— ddd.style.fontSize = '100px';&lt;/script&gt; ç‰¹ç‚¹ï¼š é€šè¿‡ script æ ‡ç­¾çš„ src æ•°æ®è¿žæŽ¥å¤–éƒ¨ js æ–‡ä»¶ï¼› ä½¿ç”¨å¤–è”çš„ scriptï¼ˆæ‹¥æœ‰ src å±žæ€§ï¼‰æ ‡ç­¾ï¼Œä¼šå±è”½æŽ‰æ ‡ç­¾å†…éƒ¨çš„ js ä»£ç å—ï¼› åœ¨ js çš„ä»»æ„åœ°æ–¹ï¼Œå‡æœ‰ thiså¯¹è±¡ï¼Œthis å¯¹è±¡ä¸æŒ‡å‘ä»»ä½•æ ‡ç­¾æ—¶ï¼ŒæŒ‡å‘çš„æ˜¯ window å¯¹è±¡ã€‚ åœ¨ js ä¸­å®šä¹‰å˜é‡å››ç§å®šä¹‰å˜é‡çš„æ–¹å¼12345678910111213141516171819è¯­æ³•: å…³é”®è¯ å˜é‡å = å˜é‡å€¼num = 10; // çœç•¥å…³é”®è¯, å®šä¹‰çš„ä¸ºå…¨å±€å˜é‡, åœ¨ä»»ä½•ä½ç½®å®šä¹‰, åœ¨ä»»ä½•ä½ç½®éƒ½å¯ä»¥è®¿é—®, ä½†ä¸å»ºè®®ä½¿ç”¨var num = 10; // varå…³é”®è¯, æ— å—çº§ä½œç”¨åŸŸ, å®šä¹‰åœ¨å—çº§ä½œç”¨åŸŸä¸­çš„å˜é‡, å¤–ç•Œä¹Ÿå¯ä»¥è®¿é—®let num = 20; // letå…³é”®è¯, æœ‰å—çº§ä½œç”¨åŸŸ, å®šä¹‰åœ¨å—çº§ä½œç”¨åŸŸä¸­çš„å˜é‡, å¤–ç•Œæ— æ³•è®¿é—®const NUM = 30; // constå…³é”®è¯,æœ‰å—çº§ä½œç”¨åŸŸ, å®šä¹‰åœ¨å—çº§ä½œç”¨åŸŸä¸­çš„å˜é‡, å¤–ç•Œæ— æ³•è®¿é—®, ä¸”å˜é‡çš„å€¼ä¸èƒ½å†è¢«äºŒæ¬¡ä¿®æ”¹, æ‰€ä»¥ä¸ºå¸¸é‡/* äº§ç”Ÿå—çº§ä½œç”¨åŸŸçš„æ–¹å¼&#123; ç›´æŽ¥ä¹¦å†™&#125;ifè¯­å¥å¯ä»¥äº§ç”Ÿwhileè¯­å¥å¯ä»¥äº§ç”Ÿforè¯­å¥ä¹Ÿå¯ä»¥äº§ç”Ÿ*/// å‡½æ•°å¯ä»¥äº§ç”Ÿå±€éƒ¨ä½œç”¨åŸŸ, é™¤äº†å®šä¹‰åœ¨å±€éƒ¨ä½œç”¨åŸŸä¸­çš„å…¨å±€å˜é‡(æ²¡æœ‰å…³é”®å­—çš„å˜é‡å£°æ˜Ž), å¤–ç•Œå¯ä»¥è®¿é—®, å…¶ä»–å®šä¹‰æ–¹å¼, å¤–ç•Œéƒ½ä¸å¯ä»¥è®¿é—®// ES5 | ES6// æ˜¯ECMAScriptä¸¤ä¸ªè¯­æ³•ç‰ˆæœ¬, ES6æ˜¯ES5ä¹‹åŽçš„ä¸€ä¸ªç‰ˆæœ¬, ä½†æ˜¯å¯¹ES5å‘ä¸‹å…¼å®¹, ES6ä¸­æ”¯æŒES5è¯­æ³• å‘½åè§„èŒƒ12345678// å‘½åè§„èŒƒ// å˜é‡å‘½åè§„èŒƒ// å¯ä»¥ç”±å“ªäº›ç»„æˆ: å­—æ¯, æ•°å­—, _, $, ä¸­æ–‡(ä¸€èˆ¬ä¸è€ƒè™‘)// å¯ä»¥ä»¥ä»€ä¹ˆå¼€å¤´: å­—æ¯, _, $, ä¸­æ–‡// ä¸èƒ½å‡ºçŽ°ä»€ä¹ˆ: å…³é”®å­—, ä¿ç•™å­—// æå€¡ä»€ä¹ˆä¹¦å†™è§„èŒƒ: å°é©¼å³°, æ”¯æŒ_è¿žæŽ¥è¯­æ³•å¥½çš„ = "çœŸå¥½";console.log(å¥½çš„); æ•°æ®ç±»åž‹å€¼ç±»åž‹ number ç±»åž‹ 12345678var num = 10; // ç±»åž‹, å€¼ console.log(typeof(num), num) // åˆ¤æ–­æ–¹å¼ console.log(typeof num == 'number'); num = 3.14; console.log(typeof(num), num); stringç±»åž‹ 1234var str = 'å•å¼•å·å­—ç¬¦ä¸²'; console.log(typeof(str), str); str = "åŒå¼•å·å­—ç¬¦ä¸²"; console.log(typeof(str), str); boolean ç±»åž‹ 1234var res = true; console.log(typeof(res), res); res = false; console.log(typeof(res), res); undefined ç±»åž‹ 123console.log(typeof(abc), abc); var abc = undefined; console.log(typeof(abc), abc); å¼•ç”¨ç±»åž‹ function ç±»åž‹ 12var fn = function (a, b) &#123; return a + b; &#125;; console.log(typeof(fn), fn); object ç±»åž‹ï¼ˆç±»å­—å…¸æ–¹å¼æ¥ä½¿ç”¨ï¼‰ 123456var obj = &#123; name: 'egon', age: 78 &#125;; console.log(typeof(obj), obj); console.log(obj instanceof Object); å…¶ä»–å½¢å¼å¯¹è±¡ null ç±»åž‹ 123var xyz = null; console.log(typeof(xyz), xyz); // object null console.log(xyz instanceof Object); // false =&gt; Nullç±»åž‹ å…·ä½“çš„å¯¹è±¡ç±»åž‹ Array ç±»åž‹ 123456var a = new Array(1, 2, 3, 4, 5); console.log(a, typeof a); // åˆ¤æ–­æ–¹å¼ console.log(typeof a == 'object'); console.log(a instanceof Object); console.log(a instanceof Array); Date ç±»åž‹ 123456var a = new Date(); console.log(a, typeof a); // åˆ¤æ–­æ–¹å¼ console.log(typeof a == 'object'); console.log(a instanceof Object); console.log(a instanceof Date); RegExp ç±»åž‹ 12345678910var a = new RegExp('a'); a = /[abc]/; console.log(a, typeof a); // åˆ¤æ–­æ–¹å¼ console.log(typeof a == 'object'); console.log(a instanceof Object); console.log(a instanceof RegExp) // ä½¿ç”¨æ­£åˆ™ console.log('abc'.match(a)) æ•°æ®ç±»åž‹ä¹‹é—´çš„è½¬æ¢ number ä¸Ž boolean ç±»åž‹ 123// booleanç±»åž‹çš„trueå°±æ˜¯æ•°å­—1, falseå°±æ˜¯æ•°å­—0 console.log((true + true) * 10 * false) // number ä¸­ 0, NaN å¯ä»¥ç›´æŽ¥å½“falseæ¥ä½¿ç”¨, å…¶ä»–çš„éƒ½å¯ä»¥å½“trueæ¥ä½¿ç”¨ string,boolean è½¬æ¢ä¸º number 123456789101112131415161718192021var a = '10'; // =&gt; 10 a = '3.14'; // =&gt; 3.14 a = '3.14.15'; // =&gt; NaN var b = true; var n1 = Number(a); console.log(n1) var n2 = Number(b); console.log(n2) a = '3.14.15'; // 3.14 a = 'a3.14'; // NaN console.log(parseFloat(a)); a = '3.94.15'; // 3 console.log(parseInt(a)); // ä½“çŽ°å¼±è¯­è¨€ç±»åž‹ a = '10'; var res = +a; // number 10 console.log(typeof(res), res) number,string è½¬æ¢ä¸º boolean 123456789// åœ¨åˆ†æ”¯æˆ–å¾ªçŽ¯åˆ¤æ–­ä¸­, ç³»ç»Ÿä¼šå°†æ•°å­—ä¸Žå­—ç¬¦ä¸²ç±»åž‹è‡ªåŠ¨è½¬æ¢ä¸ºå¸ƒå°”ç±»åž‹ // ä¸åœ¨åˆ¤æ–­ä¸­, å¦‚ä½•è½¬æ¢ console.log(Boolean("")); console.log(Boolean(0)); console.log(Boolean(NaN)); console.log(Boolean(null)); console.log(Boolean("1")); console.log(Boolean(-100)); number,boolean è½¬æ¢ä¸º string 1234567891011121314151617181920console.log(String(true)); console.log(String(1)); var a = 123; console.log(a.toString()); console.log(123..toString()); console.log(3.14.toString()); var c = 123 + ""; console.log(typeof c, c); // ç”¨ä¾‹ var z1 = 2 + +"5"; // 7 z1 = 2 + "5"; // "25" // z1 = 2 ++"5"; // è¯­æ³•é”™è¯¯ ++è¿žåœ¨ä¸€èµ·æ˜¯ ++è¯­æ³•(äº†è§£) var z2 = "5" - 2; // 3 console.log(z1, z2); // è¡¥å…… // NaNä¸ŽNaNä¸ç›¸ç­‰ æ€»ç»“ä¸€.JSä¸‰ä¸ªç»„æˆéƒ¨åˆ† ES: ECMAScriptè¯­æ³• DOM: documentå¯¹è±¡æ¨¡åž‹ =&gt; é€šè¿‡jsä»£ç ä¸Žé¡µé¢æ–‡æ¡£(å‡ºçŽ°åœ¨bodyä¸­çš„æ‰€æœ‰å¯è§†åŒ–æ ‡ç­¾)è¿›è¡Œäº¤äº’ BOM: borwserå¯¹è±¡æ¨¡åž‹ =&gt; é€šè¿‡jsä»£ç ä¸Žæµè§ˆå™¨è‡ªå¸¦åŠŸèƒ½è¿›è¡Œäº¤äº’ äºŒ.å¼•å…¥æ–¹å¼ è¡Œé—´å¼ 12å‡ºçŽ°åœ¨æ ‡ç­¾ä¸­çš„å…¨å±€äº‹ä»¶å±žæ€§ä¸­thisä»£è¡¨è¯¥æ ‡ç­¾, å¯ä»¥è®¿é—®å…¨å±€å±žæ€§, å†è®¿é—®å…·ä½“æ“ä½œå¯¹è±¡(eg: this.style.color = &quot;red&quot;) å†…è”å¼ 123å‡ºçŽ°åœ¨scriptè„šæœ¬æ ‡ç­¾ä¸­å¯ä»¥é€šè¿‡æ ‡ç­¾çš„idå”¯ä¸€æ ‡è¯†,åœ¨jsä»£ç å—ä¸­æ“ä½œé¡µé¢æ ‡ç­¾jsé‡‡ç”¨çš„æ˜¯å°é©¼å³°å‘½åè§„èŒƒ, å±žäºŽè§£é‡Šæ€§è¯­è¨€(ç”±ä¸Šè‡³ä¸‹ä¾æ¬¡è§£é‡Šæ‰§è¡Œ) å¤–è”å¼ 12é€šè¿‡scriptæ ‡ç­¾çš„srcå±žæ€§é“¾æŽ¥å¤–éƒ¨jsæ–‡ä»¶, é“¾æŽ¥åŽ, scriptæ ‡ç­¾æœ¬èº«å†…éƒ¨çš„jsä»£ç å—å°†ä¼šè¢«å±è”½åœ¨ä»»ä½•ä½ç½®éƒ½å¯ä»¥ä½¿ç”¨thiså¯¹è±¡,å½“thiså¯¹è±¡ä¸æŒ‡å‘ä»»æ„ä¸€ä¸ªæ ‡ç­¾æ—¶,ä»£è¡¨çš„æ˜¯windowå¯¹è±¡ jså…·ä½“å‡ºçŽ°çš„ä½ç½® 12headæ ‡ç­¾çš„åº•éƒ¨: ä¾èµ–æ€§jsåº“bodyæ ‡ç­¾çš„åº•éƒ¨(bodyä¸Žhtmlç»“æŸæ ‡ç­¾çš„ä¹‹é—´): åŠŸèƒ½æ€§jsè„šæœ¬ ä¸‰.å˜é‡çš„å®šä¹‰123456789101112131415161718å››ç§å®šä¹‰å˜é‡çš„æ–¹å¼è¯­æ³•: å…³é”®è¯ å˜é‡å = å˜é‡å€¼num = 10; // çœç•¥å…³é”®è¯, å®šä¹‰çš„ä¸ºå…¨å±€å˜é‡, åœ¨ä»»ä½•ä½ç½®å®šä¹‰, åœ¨ä»»ä½•ä½ç½®éƒ½å¯ä»¥è®¿é—®, ä½†ä¸å»ºè®®ä½¿ç”¨var num = 10; // varå…³é”®è¯, æ— å—çº§ä½œç”¨åŸŸ, å®šä¹‰åœ¨å—çº§ä½œç”¨åŸŸä¸­çš„å˜é‡, å¤–ç•Œä¹Ÿå¯ä»¥è®¿é—®let num = 20; // letå…³é”®è¯, æœ‰å—çº§ä½œç”¨åŸŸ, å®šä¹‰åœ¨å—çº§ä½œç”¨åŸŸä¸­çš„å˜é‡, å¤–ç•Œæ— æ³•è®¿é—®const NUM = 30; // constå…³é”®è¯,æœ‰å—çº§ä½œç”¨åŸŸ, å®šä¹‰åœ¨å—çº§ä½œç”¨åŸŸä¸­çš„å˜é‡, å¤–ç•Œæ— æ³•è®¿é—®, ä¸”å˜é‡çš„å€¼ä¸èƒ½å†è¢«äºŒæ¬¡ä¿®æ”¹, æ‰€ä»¥ä¸ºå¸¸é‡/* äº§ç”Ÿå—çº§ä½œç”¨åŸŸçš„æ–¹å¼&#123; ç›´æŽ¥ä¹¦å†™&#125;ifè¯­å¥å¯ä»¥äº§ç”Ÿwhileè¯­å¥å¯ä»¥äº§ç”Ÿforè¯­å¥ä¹Ÿå¯ä»¥äº§ç”Ÿ*/// å‡½æ•°å¯ä»¥äº§ç”Ÿå±€éƒ¨ä½œç”¨åŸŸ, é™¤äº†å®šä¹‰åœ¨å±€éƒ¨ä½œç”¨åŸŸä¸­çš„å…¨å±€å˜é‡(æ²¡æœ‰å…³é”®å­—çš„å˜é‡å£°æ˜Ž), å¤–ç•Œå¯ä»¥è®¿é—®, å…¶ä»–å®šä¹‰æ–¹å¼, å¤–ç•Œéƒ½ä¸å¯ä»¥è®¿é—® 12// ES5 | ES6// æ˜¯ECMAScriptä¸¤ä¸ªè¯­æ³•ç‰ˆæœ¬, ES6æ˜¯ES5ä¹‹åŽçš„ä¸€ä¸ªç‰ˆæœ¬, ä½†æ˜¯å¯¹ES5å‘ä¸‹å…¼å®¹, ES6ä¸­æ”¯æŒES5è¯­æ³• 12345678// å‘½åè§„èŒƒ// å˜é‡å‘½åè§„èŒƒ// å¯ä»¥ç”±å“ªäº›ç»„æˆ: å­—æ¯, æ•°å­—, _, $, ä¸­æ–‡(ä¸€èˆ¬ä¸è€ƒè™‘)// å¯ä»¥ä»¥ä»€ä¹ˆå¼€å¤´: å­—æ¯, _, $, ä¸­æ–‡// ä¸èƒ½å‡ºçŽ°ä»€ä¹ˆ: å…³é”®å­—, ä¿ç•™å­—// æå€¡ä»€ä¹ˆä¹¦å†™è§„èŒƒ: å°é©¼å³°, æ”¯æŒ_è¿žæŽ¥è¯­æ³•å¥½çš„ = "çœŸå¥½";console.log(å¥½çš„); å››.ä¸‰ç§å¼¹å‡ºæ¡†12345678910// æ™®é€šå¼¹å‡ºæ¡†// alert("ä½ ä¸«çœŸå¸…!!!");// è¾“å…¥æ¡†: ä»¥å­—ç¬¦ä¸²å½¢å¼æŽ¥æ”¶ç”¨æˆ·è¾“å…¥å†…å®¹// var info = prompt("è¯·è¾“å…¥å†…å®¹:");// console.log(info)// ç¡®è®¤æ¡†: æ ¹æ®ç”¨æˆ·é€‰æ‹©ç¡®è®¤æˆ–å–æ¶ˆ, å¾—åˆ° true | false ä¸¤ä¸ªå¸ƒå°”ç»“æžœ// var res = confirm("ä½ æ˜¯çŒªå—?");// console.log(res) äº”.æ•°æ®ç±»åž‹123456789101112// å€¼ç±»åž‹var a = 10; // Number 10var a = 'abc'; // String abcvar a = true; // Boolean truevar a = undefined // undefined undefined// å¼•ç”¨ç±»åž‹var a = function()&#123;&#125; // function f()&#123;&#125;var a = &#123;&#125; // Object &#123;&#125;var a = null // Null null// å…¶ä»–Objectå…·ä½“ä½“çŽ°Array | Date | RegExp å…­.å€¼ç±»åž‹çš„ç±»åž‹è½¬æ¢12345678910// 1.é€šè¿‡ç±»åž‹å£°æ˜Žè½¬æ¢Number() | String() | Boolean()// 2.æ–¹æ³•(å‡½æ•°)parseInt('10') | parseFloat('3.14')123..toString()// 3.éšå¼è½¬æ¢+'10' =&gt; 10'' + 10 =&gt; '10']]></content>
      <categories>
        <category>JavaScript</category>
      </categories>
  </entry>
  <entry>
    <title><![CDATA[å‰ç«¯ï¼ˆä¹ï¼‰ ä¹‹è¡¨æ ¼çš„ä½¿ç”¨]]></title>
    <url>%2F2018%2F12%2F17%2F%E5%89%8D%E7%AB%AF%EF%BC%88%E4%B9%9D%EF%BC%89-%E4%B9%8B%E8%A1%A8%E6%A0%BC%E7%9A%84%E4%BD%BF%E7%94%A8%2F</url>
    <content type="text"><![CDATA[å‰ç«¯ä¹‹è¡¨æ ¼çš„ä½¿ç”¨12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667686970717273747576777879808182838485868788899091929394959697&lt;!DOCTYPE html&gt;&lt;html&gt;&lt;head&gt; &lt;meta charset="UTF-8"&gt; &lt;title&gt;è¡¨æ ¼&lt;/title&gt; &lt;style type="text/css"&gt; .table1 &#123; width: 500px; height: 500px; display: none; &#125; th, td &#123; padding: 20px; &#125; .table2 td &#123; /*border: 10px solid black;*/ &#125; &lt;/style&gt;&lt;/head&gt;&lt;body&gt; &lt;!-- tableçš„display: table --&gt; &lt;!-- tableæ˜¾ç¤ºè§„åˆ™æ³¨æ„ç‚¹: å½“è®¾ç½®çš„ç›’å­é«˜åº¦ä¸è¶³å¤Ÿæ˜¾ç¤ºå†…å®¹æ—¶, ç›’å­é«˜åº¦ç”±å†…å®¹æ’‘å¼€, å½“è®¾ç½®çš„é«˜åº¦å¤§äºŽæ˜¾ç¤ºå†…å®¹æ‰€éœ€é«˜åº¦,é‡‡ç”¨è®¾ç½®çš„é«˜åº¦ --&gt; &lt;!-- border: è®¾ç½®è¾¹æ¡†å®½åº¦ --&gt; &lt;!-- cellspacing: å•å…ƒæ ¼é—´çš„é—´è· --&gt; &lt;!-- cellpadding: å•å…ƒæ ¼çš„å†…è¾¹è· == th, tdè®¾ç½®padding --&gt; &lt;table class="table1" border="1" cellspacing="0"&gt; &lt;!-- tr&gt;th&#123;æ ‡é¢˜&#125;*3 --&gt; &lt;tr&gt; &lt;th&gt;æ ‡é¢˜&lt;/th&gt; &lt;th&gt;æ ‡é¢˜&lt;/th&gt; &lt;th&gt;æ ‡é¢˜&lt;/th&gt; &lt;/tr&gt; &lt;!-- (tr&gt;td&#123;å•å…ƒæ ¼&#125;*3)*3 --&gt; &lt;tr&gt; &lt;td&gt;å•å…ƒæ ¼&lt;/td&gt; &lt;td&gt;å•å…ƒæ ¼&lt;/td&gt; &lt;td&gt;å•å…ƒæ ¼&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td&gt;å•å…ƒæ ¼&lt;/td&gt; &lt;td&gt;å•å…ƒæ ¼&lt;/td&gt; &lt;td&gt;å•å…ƒæ ¼&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td&gt;å•å…ƒæ ¼&lt;/td&gt; &lt;td&gt;å•å…ƒæ ¼&lt;/td&gt; &lt;td&gt;å•å…ƒæ ¼&lt;/td&gt; &lt;/tr&gt; &lt;/table&gt; &lt;!-- è¾¹æ¡†çš„ä¿ç•™æ ¼å¼ =&gt; rules: rows | cols | groups | all --&gt; &lt;table class="table2" border="10" rules="all"&gt; &lt;caption&gt;è¡¨æ ¼æ ‡é¢˜&lt;/caption&gt; &lt;thead&gt; &lt;tr&gt; &lt;th&gt;æ ‡é¢˜&lt;/th&gt; &lt;th&gt;æ ‡é¢˜&lt;/th&gt; &lt;th&gt;æ ‡é¢˜&lt;/th&gt; &lt;th&gt;æ ‡é¢˜&lt;/th&gt; &lt;/tr&gt; &lt;/thead&gt; &lt;tbody&gt; &lt;tr&gt; &lt;td rowspan="2"&gt;å•å…ƒæ ¼&lt;/td&gt; &lt;td rowspan="2" colspan="2"&gt;å•å…ƒæ ¼&lt;/td&gt; &lt;!-- &lt;td&gt;å•å…ƒæ ¼&lt;/td&gt; --&gt; &lt;td&gt;å•å…ƒæ ¼&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;!-- &lt;td&gt;å•å…ƒæ ¼&lt;/td&gt; --&gt; &lt;!-- &lt;td&gt;å•å…ƒæ ¼&lt;/td&gt; --&gt; &lt;!-- &lt;td&gt;å•å…ƒæ ¼&lt;/td&gt; --&gt; &lt;td&gt;å•å…ƒæ ¼&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td&gt;å•å…ƒæ ¼&lt;/td&gt; &lt;td&gt;å•å…ƒæ ¼&lt;/td&gt; &lt;td&gt;å•å…ƒæ ¼&lt;/td&gt; &lt;td&gt;å•å…ƒæ ¼&lt;/td&gt; &lt;/tr&gt; &lt;/tbody&gt; &lt;tfoot&gt; &lt;tr&gt; &lt;td&gt;å•å…ƒæ ¼&lt;/td&gt; &lt;td colspan="2"&gt;å•å…ƒæ ¼&lt;/td&gt; &lt;!-- &lt;td&gt;å•å…ƒæ ¼&lt;/td&gt; --&gt; &lt;td&gt;å•å…ƒæ ¼&lt;/td&gt; &lt;/tr&gt; &lt;/tfoot&gt; &lt;/table&gt; &lt;!-- &gt;&gt;&gt; display: table-cell =&gt; å¯ä»¥åµŒå…¥ä»»æ„ç±»åž‹æ ‡ç­¾, å¯ä»¥å¿«é€Ÿå®žçŽ°å¤šè¡Œæ–‡æœ¬åž‚ç›´å±…ä¸­ --&gt;&lt;/body&gt;&lt;/html&gt;]]></content>
      <categories>
        <category>å‰ç«¯</category>
      </categories>
  </entry>
  <entry>
    <title><![CDATA[å‰ç«¯ï¼ˆå…«ï¼‰ä¹‹å½¢å˜]]></title>
    <url>%2F2018%2F12%2F17%2F%E5%89%8D%E7%AB%AF%EF%BC%88%E5%85%AB%EF%BC%89%E4%B9%8B%E5%BD%A2%E5%8F%98%2F</url>
    <content type="text"><![CDATA[å‰ç«¯ä¹‹å½¢å˜ä¸€.å½¢å˜1234567891011121314/*1.å½¢å˜å‚è€ƒç‚¹: ä¸‰è½´äº¤ç•Œç‚¹*/transform-origin: xè½´åæ ‡ yè½´åæ ‡;/*2.æ—‹è½¬ rotate deg*/transform: rotate(720deg);/*åç§» translate px*/transform: translateX(200px) translateY(200px);/*ç¼©æ”¾ scale æ— å•ä½*/transform: scale(xè½´æ¯”ä¾‹, yè½´æ¯”ä¾‹)/*æ³¨: å¯ä»¥å¤šå½¢å˜, ç©ºæ ¼éš”å¼€ä¹¦å†™åœ¨ä¸€æ¡transformå±žæ€§ä¸­, é¡ºåºä¸€èˆ¬ä¼šå½±å“å½¢å˜ç»“æžœ*//*å½¢å˜ä¸æ”¹å˜ç›’å­å¸ƒå±€, åªæ‹¿å½¢å˜åšåŠ¨ç”»*/ äºŒ.åŠ¨ç”»animation12345678910111213141516171819202122232425/*1.è®¾ç½®åŠ¨ç”»ä½“*/@keyframes move &#123; /*èµ·ç‚¹çœç•¥é‡‡ç”¨çš„å°±æ˜¯åˆå§‹çŠ¶æ€*/ 0% &#123;&#125; 33.3% &#123; margin-left: 800px; /*åœ¨æ¯ä¸€ä¸ªåŠ¨ç”»èŠ‚ç‚¹éƒ½éœ€è¦æ˜Žç¡®æ‰€æœ‰åšåŠ¨ç”»å±žæ€§åœ¨è¯¥èŠ‚ç‚¹çš„å±žæ€§å€¼*/ margin-top: 50px; &#125; 66.6% &#123; margin-left: 500px; margin-top: 300px; &#125; /*ç»ˆç‚¹éœ€è¦è®¾ç½®*/ 100% &#123; margin-left: 200px; margin-top: 50px; &#125;&#125;/*2.è®¾ç½®åŠ¨ç”»å±žæ€§*//*animation: åŠ¨ç”»å æ—¶é—´ è¿åŠ¨æ¬¡æ•°(æ— é™æ¬¡:infinite) è¿åŠ¨æ›²çº¿*/.box &#123; animation: move 2s 1 linear;&#125; ä¸‰.è¡¨æ ¼1234567891011121314151617181920212223242526272829303132333435363738&lt;table&gt; &lt;caption&gt;è¡¨æ ¼æ ‡é¢˜&lt;/caption&gt; &lt;thead&gt; &lt;tr&gt; &lt;th&gt;æ ‡é¢˜&lt;/th&gt; &lt;th&gt;æ ‡é¢˜&lt;/th&gt; &lt;th&gt;æ ‡é¢˜&lt;/th&gt; &lt;/tr&gt; &lt;/thead&gt; &lt;tbody&gt; &lt;tr&gt; &lt;td&gt;å•å…ƒæ ¼&lt;/td&gt; &lt;td&gt;å•å…ƒæ ¼&lt;/td&gt; &lt;td&gt;å•å…ƒæ ¼&lt;/td&gt; &lt;/tr&gt; &lt;/tbody&gt; &lt;tfoot&gt; &lt;tr&gt; &lt;td&gt;å•å…ƒæ ¼&lt;/td&gt; &lt;td&gt;å•å…ƒæ ¼&lt;/td&gt; &lt;td&gt;å•å…ƒæ ¼&lt;/td&gt; &lt;/tr&gt; &lt;/tfoot&gt;&lt;/table&gt;tableçš„å…¨å±€å±žæ€§:border="1" è®¾ç½®è¾¹æ¡†å®½åº¦cellspacing="10" å•å…ƒæ ¼é—´çš„é—´è·cellpadding="10" å•å…ƒæ ¼çš„å†…è¾¹è·rules="rows | cols | groups | all" è¾¹æ¡†çš„ä¿ç•™æ ¼å¼tdçš„å…¨å±€å±žæ€§rowspan='2' åˆå¹¶ä¸¤è¡Œå•å…ƒæ ¼colspan='3' åˆå¹¶ä¸‰åˆ—å•å…ƒæ ¼tableçš„é«˜åº¦: ç”±å†…å®¹å’Œè®¾ç½®é«˜åº¦ä¸­çš„å¤§å€¼å†³å®štable-cell: å¯ä»¥åµŒå¥—ä»»æ„ç±»åž‹æ ‡ç­¾, å¯ä»¥å¿«é€Ÿå®žçŽ°å¤šè¡Œæ–‡æœ¬åž‚ç›´å±…ä¸­ å››.å¤šè¡Œæ–‡æœ¬åž‚ç›´å±…ä¸­1234&lt;div class="sup"&gt; &lt;p&gt;ç¬¬ä¸€è¡Œæ–‡æœ¬&lt;/p&gt; &lt;div&gt;ç¬¬äºŒè¡Œæ–‡æœ¬&lt;/div&gt;&lt;/div&gt; 12345678.sup &#123; /*å®žçŽ°å¤šè¡Œæ–‡æœ¬åž‚ç›´å±…ä¸­ =&gt; é’ˆå¯¹çˆ¶çº§è®¾ç½®, çˆ¶çº§ä¸­çš„å¤šä¸ªå—çº§æ–‡æœ¬ç±»å­çº§æ ‡ç­¾åž‚ç›´å±…ä¸­*/ display: table-cell; vertical-align: middle;&#125;/*æ³¨: å¦‚æžœæƒ³è°ƒæ•´supçš„ä½ç½®,å¯ä»¥ç»™supåµŒå¥—ä¸€ä¸ª"ä½ç½®å±‚"*//*.box&gt;.sup&gt;p+div*/]]></content>
      <categories>
        <category>å‰ç«¯</category>
      </categories>
  </entry>
  <entry>
    <title><![CDATA[å‰ç«¯ï¼ˆä¸ƒï¼‰ä¹‹åŠ¨ç”»ä¸Žé˜´å½±]]></title>
    <url>%2F2018%2F12%2F14%2F%E5%89%8D%E7%AB%AF%EF%BC%88%E4%B8%83%EF%BC%89%E4%B9%8B%E5%8A%A8%E7%94%BB%E4%B8%8E%E9%98%B4%E5%BD%B1%2F</url>
    <content type="text"><![CDATA[åŠ¨ç”»åŠé˜´å½±ä¸€.æ‹¼æŽ¥ç½‘é¡µ1234å°†åŒºåŸŸæ•´ä½“åˆ’åˆ†èµ·å =&gt; å¯¹å…¶ä»–åŒºåŸŸå¸ƒå±€ä¸äº§ç”Ÿå½±å“æå‡ºå…¬å…±css =&gt; resetæ“ä½œå½“æœ‰åŒºåŸŸå‘é€æ˜¾ç¤ºé‡å (è„±ç¦»æ–‡æ¡£æµå¯¼è‡´çš„), éœ€è¦é€šè¿‡z-indexè°ƒæ•´å±‚çº§ä¸€å®šéœ€è¦æœ€å¤–å±‚,ä¸”æœ€å¤–å±‚åšè‡ªèº«å¸ƒå±€æ—¶,ä¸è¦åšè¿‡å¤šå¸ƒå±€æ“ä½œ äºŒ.è¿‡æ¸¡12345transitionå±žæ€§transition: è¿‡æ¸¡æ—¶é—´(å¿…é¡») å»¶è¿Ÿæ—¶é—´(ä¸€èˆ¬ä¸è®¾) è¿‡æ¸¡å±žæ€§(ä¸€èˆ¬é‡‡ç”¨allé»˜è®¤å€¼) è¿‡æ¸¡æ›²çº¿(è´èµ›å°”æ›²çº¿)(cubic-bezier())è¿‡æ¸¡å±žæ€§å…·ä½“è®¾ç½®ç»™åˆå§‹çŠ¶æ€è¿˜æ˜¯ç¬¬äºŒçŠ¶æ€ æ ¹æ®å…·ä½“éœ€æ±‚ 12345678910/*è¿‡æ¸¡çš„æŒç»­æ—¶é—´*/transition-duration: 2s;/*å»¶è¿Ÿæ—¶é—´*/transition-delay: 50ms;/*è¿‡æ¸¡å±žæ€§*//*å•ä¸€å±žæ€§ | å±žæ€§1, ..., å±žæ€§n | all*/transition-property: all;/*è¿‡æ¸¡æ›²çº¿*//*cubic-bezier() | ease | ease-in | ease-out | ease-in-out | linear*/transition-timing-function: cubic-bezier(0, 2.23, 0.99, -1.34); 1234/*ç»“è®º:*//*1.å°½é‡æ‚¬æµ®é™æ­¢çš„ç›’å­, æŽ§åˆ¶è¿åŠ¨çš„ç›’å­*//*2.ä¸èƒ½ç¡®å®šåŒºé—´èŒƒå›´çš„å±žæ€§å€¼, ä¸ä¼šäº§ç”ŸåŠ¨ç”»æ•ˆæžœ*//*display ä¸èƒ½åšåŠ¨ç”» | opacity å¯ä»¥åšåŠ¨ç”»*/ ä¸‰.é˜´å½±12345/*xè½´åç§»é‡ yè½´åç§»é‡ è™šåŒ–ç¨‹åº¦ é˜´å½±å®½åº¦ é˜´å½±é¢œè‰²*/box-shadow: 0 0 10px 10px black;/*ä¸€ä¸ªç›’å­å¯ä»¥è®¾ç½®å¤šä¸ªé˜´å½±, æ¯ä¸€å¥—é˜´å½±é—´ç”¨é€—å·éš”å¼€*/box-shadow: 0 -10px 10px -5px black, 0 10px 10px -5px black; å››.ä¼ªç±»å®žçŽ°è¾¹æ¡†12345678910111213141516171819202122232425/*è‡ªèº«éœ€è¦å®šä½*/.box &#123; position: relative;&#125;/*ä¼ªç±»é€šè¿‡å®šä½æ¥å®Œæˆå›¾å±‚çš„å¸ƒå±€*/.box:before &#123; content: ""; /*å®Œæˆå¸ƒå±€*/ position: absolute; top: 10px; left: 0; /*æž„å»ºå›¾å±‚*/ width: 1px; height: 100px; background-color: black;&#125;.box:after &#123; content: ""; position: absolute; width: 100px; height: 1px; background-color: black; top: 0; left: 10px;&#125;]]></content>
      <categories>
        <category>å‰ç«¯</category>
      </categories>
  </entry>
  <entry>
    <title><![CDATA[å‰ç«¯ï¼ˆå…­ï¼‰ä¹‹ç›’æ¨¡åž‹æ˜¾éšã€å®šä½ä¸Žæµå¼å¸ƒå±€æ€æƒ³]]></title>
    <url>%2F2018%2F12%2F11%2F%E5%89%8D%E7%AB%AF%EF%BC%88%E5%85%AD%EF%BC%89%E4%B9%8B%E7%9B%92%E6%A8%A1%E5%9E%8B%E6%98%BE%E9%9A%90%E3%80%81%E5%AE%9A%E4%BD%8D%E4%B8%8E%E6%B5%81%E5%BC%8F%E5%B8%83%E5%B1%80%E6%80%9D%E6%83%B3%2F</url>
    <content type="text"><![CDATA[å‰ç«¯ä¹‹ç›’æ¨¡åž‹æ˜¾éšã€å®šä½ä¸Žæµå¼å¸ƒå±€æ€æƒ³ç›’æ¨¡åž‹çš„æ˜¾éš123456789101112131415161718192021222324252627282930313233343536373839404142434445&lt;!DOCTYPE html&gt;&lt;html&gt;&lt;head&gt; &lt;meta charset="UTF-8"&gt; &lt;title&gt;ç›’å­çš„æ˜¾éš&lt;/title&gt; &lt;style type="text/css"&gt; .box, .wrap &#123; width: 200px; height: 200px; background: red; &#125; .wrap &#123; background: orange; &#125; /*display: none; é€šè¿‡æŽ§åˆ¶ç›’å­çš„æ˜¾ç¤ºæ–¹å¼æ¥éšè—ç›’å­*/ /*è¯¥éšè—æ–¹å¼åœ¨é¡µé¢ä¸­ä¸å ä½*/ .box &#123; display: none; &#125; /*opacity: 0; é€šè¿‡æŽ§åˆ¶ç›’å­çš„é€æ˜Žåº¦æ¥éšè—ç›’å­*/ /*è¯¥éšè—æ–¹å¼åœ¨é¡µé¢ä¸­å ä½*/ .box &#123; /*opacity: 0*/ &#125; /*æ³¨: ä¸€èˆ¬æ˜¾éšæ“ä½œçš„ç›’å­éƒ½æ˜¯é‡‡ç”¨å®šä½å¸ƒå±€*/ /*æ‚¬æµ®çˆ¶çº§æ˜¾ç¤ºå­çº§*/ body:hover .box &#123; display: block; &#125; /*å°†ç›’å­è—åˆ°å±å¹•å¤–: ä¸èƒ½é€šè¿‡ç›’æ¨¡åž‹å¸ƒå±€, ä¹Ÿä¸å»ºè®®é€šè¿‡æµ®åŠ¨å¸ƒå±€, å¯ä»¥é‡‡ç”¨å®šä½å¸ƒå±€*/ .box &#123; /*margin-top: -208px*/ &#125; &lt;/style&gt;&lt;/head&gt;&lt;body&gt; &lt;div class="box"&gt;&lt;/div&gt; &lt;div class="wrap"&gt;&lt;/div&gt;&lt;/body&gt;&lt;/html&gt; å®šä½ç›¸å¯¹å®šä½1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768697071&lt;!DOCTYPE html&gt;&lt;html&gt;&lt;head&gt; &lt;meta charset="UTF-8"&gt; &lt;title&gt;ç›¸å¯¹å®šä½å¸ƒå±€&lt;/title&gt; &lt;style type="text/css"&gt; /*å®šä½å¸ƒå±€çš„å¯¼å…¥*/ /*éœ€æ±‚: */ /*1.å­çº§åœ¨çˆ¶çº§çš„å³ä¸‹è§’æ˜¾ç¤º*/ /*2.å­çº§å®Œæˆå¸ƒå±€åŽ,çˆ¶çº§åšcontentåŽ,å­çº§ä¸éœ€è¦é‡æ–°å¸ƒå±€*/ .sup &#123; width: 300px; height: 300px; background: pink; border: 10px solid black; &#125; .sub &#123; width: 50px; height: 50px; background: red; margin-left: auto; margin-top: 150px; &#125; /*èƒ½ä¸èƒ½æœ‰ä¸€ç§å®šä½, è®©ç›’å­å¯ä»¥é€šè¿‡ä¸Šä¸‹å·¦å³å››ä¸ªæ–¹ä½å‡æ“ä½œè‡ªèº«å¸ƒå±€ =&gt; å®šä½å¸ƒå±€*/ /*ä»€ä¹ˆæ˜¯å®šä½å¸ƒå±€: å¯ä»¥é€šè¿‡ä¸Šä¸‹å·¦å³å››ä¸ªæ–¹ä½å®Œæˆè‡ªèº«å¸ƒå±€çš„å¸ƒå±€æ–¹å¼*/ .sup &#123; display: none; &#125; &lt;/style&gt; &lt;style type="text/css"&gt; /*ç›¸å¯¹å®šä½å¸ƒå±€*/ .box &#123; width: 200px; height: 200px; background: pink; &#125; .b2 &#123; background: orange &#125; .b1 &#123; /*1.è®¾ç½®å®šä½å±žæ€§ï¼Œå°±ä¼šæ‰“å¼€å®šä½æ–¹ä½*/ position: relative; /*2.é€šè¿‡å®šä½æ–¹ä½å®Œæˆå¸ƒå±€*/ top: 300px; left: 300px; /*bottom: 100px;*/ /*right: 100px;*/ /*margin-top: 200px;*/ /*ç»“è®º*/ /*1.å·¦å³å–å·¦,ä¸Šä¸‹å–ä¸Š(eg:leftä¸Žrightå…±å­˜æ˜¯,leftç”Ÿæ•ˆ)*/ /*2.left=-right, top=-bottom*/ /*3.å‚è€ƒç³»: è‡ªèº«åŽŸæœ‰ä½ç½®(ä¸æ˜¯æŸä¸€ä¸ªç‚¹,eg: rightå‚è€ƒçš„å°±æ˜¯åŽŸæœ‰ä½ç½®çš„å³è¾¹ç•Œ)*/ /*4.è‡ªèº«å¸ƒå±€åŽä¸ä¼šå½±å“è‡ªèº«åŽŸæœ‰ä½ç½®*/ /*5.ä¸è„±ç¦»æ–‡æ¡£æµ(è„±ç¦»æ–‡æ¡£æµ: ä¸å†æ’‘å¼€çˆ¶çº§é«˜åº¦)*/ &#125; &lt;/style&gt;&lt;/head&gt;&lt;body&gt; &lt;div class="box b1"&gt;1&lt;/div&gt; &lt;div class="box b2"&gt;&lt;/div&gt; &lt;div class="sup"&gt; &lt;div class="sub"&gt;&lt;/div&gt; &lt;/div&gt;&lt;/body&gt;&lt;/html&gt; ç»å¯¹å®šä½12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061&lt;!DOCTYPE html&gt;&lt;html&gt;&lt;head&gt; &lt;meta charset="UTF-8"&gt; &lt;title&gt;ç»å¯¹å®šä½å¸ƒå±€&lt;/title&gt; &lt;style type="text/css"&gt; .box &#123; width: 200px; height: 300px; background: orange; &#125; .sup &#123; width: 200px; height: 200px; background: pink; /*position: absolute;*/ &#125; .sub &#123; width: 50px; height: 50px; background: red; /*1.å¼€çš„å®šä½*/ position: absolute; /*2.é‡‡ç”¨å®šä½æ–¹ä½å®Œæˆå¸ƒå±€*/ right: 0; bottom: 0; &#125; body &#123; position: relative; &#125; /*æ³¨: ä¸€èˆ¬çˆ¶çº§é‡‡ç”¨çš„æ˜¯ç›¸å¯¹å®šä½å¸ƒå±€, ä¸€èˆ¬æƒ…å†µä¸‹,çˆ¶çº§ä¸éœ€è¦è„±ç¦»æ–‡æ¡£æµ*/ /*å¦‚æžœçˆ¶çº§éœ€è¦è„±ç¦»æ–‡æ¡£æµ,ç”¨ç»å¯¹å®šä½çˆ¶çº§å®Œæˆå¸ƒå±€,å®Œå…¨å¯ä»¥,ä¸ä¼šå½±å“å­çº§ç›¸å¯¹äºŽè‡ªèº«çš„å¸ƒå±€,ä½†æ˜¯è‡ªèº«åˆè¦éœ€è¦ä¸€ä¸ªåœ¨æ–‡æ¡£æµä¸­çš„(ä¸è„±ç¦»æ–‡æ¡£æµä¸­çš„)å®šä½å‚è€ƒçˆ¶çº§ =&gt; çˆ¶ç›¸å­ç»*/ /*ç›¸å¯¹å®šä½çš„åº”ç”¨åœºæ™¯å¤§éƒ¨åˆ†éƒ½æ˜¯è¾…åŠ©äºŽå­çº§çš„ç»å¯¹å®šä½*/ .sup &#123; position: relative; &#125; .sub &#123; /*left: 0;*/ right: 0; &#125; &lt;/style&gt;&lt;/head&gt;&lt;body&gt; &lt;!-- ç»å¯¹å®šä½å¸ƒå±€ä¸€å®šå­˜åœ¨çˆ¶å­å…³ç³» --&gt; &lt;!-- å¯¼å…¥å®šä½å¸ƒå±€æ—¶,çˆ¶çº§è®¾ç½®å®½é«˜æ²¡?(è®¾ç½®äº†) å­çº§å‘¢?(ä¹Ÿè®¾ç½®äº†) =&gt; çˆ¶çº§çš„é«˜åº¦ä¸å†ä¾èµ–äºŽå­çº§ =&gt; å­çº§è„±ç¦»æ–‡æ¡£æµ --&gt; &lt;!-- å‚è€ƒç³»: æœ€è¿‘çš„å®šä½çˆ¶çº§ --&gt; &lt;div class="sup"&gt; &lt;div class="sub"&gt;&lt;/div&gt; &lt;/div&gt; &lt;!-- &lt;div class="box"&gt;&lt;/div&gt; --&gt; &lt;!-- 1.top|bottom|left|rightéƒ½å¯ä»¥å®Œæˆè‡ªèº«å¸ƒå±€, ä¸Šä¸‹å–ä¸Š,å·¦å³å–å·¦ 2.çˆ¶çº§å¿…é¡»è‡ªå·±è®¾ç½®å®½é«˜ 3.å®Œå…¨ç¦»æ–‡æ¡£æµ --&gt;&lt;/body&gt;&lt;/html&gt; å›ºå®šå®šä½123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126&lt;!DOCTYPE html&gt;&lt;html&gt;&lt;head&gt; &lt;meta charset="UTF-8"&gt; &lt;title&gt;å›ºå®šå®šä½&lt;/title&gt; &lt;style type="text/css"&gt; /*å‚è€ƒç³»: é¡µé¢çª—å£*/ /*1.top|bottom|left|rightéƒ½å¯ä»¥å®Œæˆè‡ªèº«å¸ƒå±€, ä¸Šä¸‹å–ä¸Š,å·¦å³å–å·¦*/ /*2.ç›¸å¯¹äºŽé¡µé¢çª—å£æ˜¯é™æ­¢çš„*/ /*3.å®Œå…¨è„±ç¦»æ–‡æ¡£æµ*/ .box &#123; width: 200px; height: 300px; background: orange; &#125; .box &#123; position: fixed; top: 200px; right: 50px; &#125; &lt;/style&gt;&lt;/head&gt;&lt;body&gt; &lt;div class="box"&gt;&lt;/div&gt; &lt;br&gt; &lt;br&gt; &lt;br&gt; &lt;br&gt; &lt;br&gt; &lt;br&gt; &lt;br&gt; &lt;br&gt; &lt;br&gt; &lt;br&gt; &lt;br&gt; &lt;br&gt; &lt;br&gt; &lt;br&gt; &lt;br&gt; &lt;br&gt; &lt;br&gt; &lt;br&gt; &lt;br&gt; &lt;br&gt; &lt;br&gt; &lt;br&gt; &lt;br&gt; &lt;br&gt; &lt;br&gt; &lt;br&gt; &lt;br&gt; &lt;br&gt; &lt;br&gt; &lt;br&gt; &lt;br&gt; &lt;br&gt; &lt;br&gt; &lt;br&gt; &lt;br&gt; &lt;br&gt; &lt;br&gt; &lt;br&gt; &lt;br&gt; &lt;br&gt; &lt;br&gt; &lt;br&gt; &lt;br&gt; &lt;br&gt; &lt;br&gt; &lt;br&gt; &lt;br&gt; &lt;br&gt; &lt;br&gt; &lt;br&gt; &lt;br&gt; &lt;br&gt; &lt;br&gt; &lt;br&gt; &lt;br&gt; &lt;br&gt; &lt;br&gt; &lt;br&gt; &lt;br&gt; &lt;br&gt; &lt;br&gt; &lt;br&gt; &lt;br&gt; &lt;br&gt; &lt;br&gt; &lt;br&gt; &lt;br&gt; &lt;br&gt; &lt;br&gt; &lt;br&gt; &lt;br&gt; &lt;br&gt; &lt;br&gt; &lt;br&gt; &lt;br&gt; &lt;br&gt; &lt;br&gt; &lt;br&gt; &lt;br&gt; &lt;br&gt; &lt;br&gt; &lt;br&gt; &lt;br&gt; &lt;br&gt; &lt;br&gt; &lt;br&gt; &lt;br&gt; &lt;br&gt; &lt;br&gt; &lt;br&gt; &lt;br&gt; &lt;br&gt; &lt;br&gt; &lt;br&gt; &lt;br&gt; &lt;br&gt; &lt;br&gt; &lt;br&gt; &lt;br&gt; &lt;br&gt;&lt;/body&gt;&lt;/html&gt; z-index å±žæ€§123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566&lt;!DOCTYPE html&gt;&lt;html&gt;&lt;head&gt; &lt;meta charset="UTF-8"&gt; &lt;title&gt;z-index&lt;/title&gt; &lt;style type="text/css"&gt; .wrap &#123; width: 200px; height: 200px; background: pink; /*çˆ¶çº§åšç›¸å¯¹å®šä½å¤„ç†,å¹¶ä¸æ˜¯è‡ªå·±éœ€è¦ç”¨å®šä½å®Œæˆå¸ƒå±€,æœ€ä¸»è¦çš„åŽŸå› æ˜¯è¾…åŠ©äºŽå­çº§å®Œæˆç»å¯¹å®šä½å¸ƒå±€*/ position: relative; &#125; .box &#123; width: 75px; height: 75px; font: normal 30px/75px "STSong"; text-align: center; background: cyan; /*ç»å¯¹å®šä½éœ€è¦å¤§å®¶è„±ç¦»æ–‡æ¡£æµ,ç›¸äº’ä¸ä¼šå½±å“å¸ƒå±€,æ¯ä¸ªéƒ½æ˜¯ç‹¬ç«‹ç›¸å¯¹äºŽçˆ¶çº§è¿›è¡Œå¸ƒå±€çš„ä¸ªä½“*/ position: absolute; /*top: 0;*/ /*bottom: 0;*/ /*left: 0;*/ &#125; .b1 &#123; left: 0; top: 0; background: red; &#125; .b2 &#123; right: 0; top: 0; background: yellow; &#125; .b3 &#123; /*è™½ç„¶å­çº§è„±ç¦»äº†æ–‡æ¡£æµ,ä½†æ˜¯çˆ¶å­å…³ç³»ä»¥åŠå­˜åœ¨,å­çº§èŽ·å–100%,å¾—åˆ°çš„è¿˜æ˜¯çˆ¶çº§å¯¹åº”çš„å€¼*/ left: calc((100% - 75px) / 2); top: calc((100% - 75px) / 2);; background: green; /*z-indexæ”¹å˜æ˜¾ç¤ºå±‚çº§, æ˜¾ç¤ºå±‚çº§çš„å€¼ä¸ºæ­£æ•´æ•°, å€¼è¶Šå¤§,æ˜¾ç¤ºå±‚çº§è¶Šé«˜*/ z-index: 1; &#125; .b4 &#123; left: 0; bottom: 0; background: blue; /*z-index: 88889;*/ &#125; .b5 &#123; right: 0; bottom: 0; background: white; &#125; &lt;/style&gt;&lt;/head&gt;&lt;body&gt; &lt;div class="wrap"&gt; &lt;div class="box b1"&gt;1&lt;/div&gt; &lt;div class="box b2"&gt;2&lt;/div&gt; &lt;div class="box b3"&gt;3&lt;/div&gt; &lt;div class="box b4"&gt;4&lt;/div&gt; &lt;div class="box b5"&gt;5&lt;/div&gt; &lt;/div&gt;`&lt;/body&gt;&lt;/html&gt; æµå¼å¸ƒå±€æ€æƒ³12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667686970717273747576777879808182838485&lt;!DOCTYPE html&gt;&lt;html&gt;&lt;head&gt; &lt;meta charset="UTF-8"&gt; &lt;title&gt;æµå¼å¸ƒå±€æ€æƒ³&lt;/title&gt; &lt;style type="text/css"&gt; html, body &#123; margin: 0; width: 100%; /*è¾…åŠ©bodyå†…éƒ¨çš„å­çº§æœ‰heightæµå¼å¸ƒå±€çš„åŸºç¡€*/ height: 100%; &#125; /*æµå¼å¸ƒå±€æ€æƒ³: å°½å¯èƒ½ä¸åŽ»ä½¿ç”¨å›ºå®šå±žæ€§å€¼*/ /*é€šè¿‡çˆ¶çº§æ¥èŽ·å–ç›¸åº”çš„å±žæ€§å€¼*/ .b1 &#123; width: 100%; height: 100%; background: red; &#125; .b2 &#123; /*view-width view-height*/ width: 80vw; height: 80vh; background: orange; /*æµå¼å¸ƒå±€é™åˆ¶æ¡ä»¶: æµå¼å¸ƒå±€ä¸‹å®½åº¦æœ€å¤§åªèƒ½æ”¾å¤§åˆ°800px,æœ€å°åªèƒ½ç¼©å°åˆ°600px*/ max-width: 800px; min-width: 600px; &#125; html &#123; font-size: 200px; &#125; body &#123; font-size: 100px; &#125; span &#123; /*è®¾ç½®è‡ªèº«å­—ä½“æ—¶ em = ?px çˆ¶çº§å­—ä½“çš„å¤§å°*/ font-size: 2em; display: block; /*å®½é«˜emåœ¨è‡ªèº«è®¾ç½®å­—ä½“å¤§å°åŽ,å€¼åˆä¼šæ›´æ”¹ä¸ºç›¸åº”å¤§å°*/ /*eg: body: 100px =&gt; è®¾ç½®è‡ªèº«å­—ä½“æ—¶em=100px, */ /*è‡ªèº«è®¾ç½®å­—ä½“å¤§å°ä¸º2em,è‡ªèº«å­—ä½“å¤§å°ä¸º200px =&gt; width=2emçš„em=200px*/ /*ç»“æžœè‡ªèº«å®½åº¦æ˜¯400pk*/ /*è‡ªèº«éžè®¾ç½®å­—ä½“æ—¶ä½¿ç”¨emå•ä½,emå€¼å–è‡ªèº«å­—ä½“å¤§å°*/ width: 2em; /*rem = htmlå­—ä½“çš„å¤§å°*/ height: 2rem; background: red; &#125; &lt;/style&gt; &lt;style type="text/css"&gt; .sup &#123; width: 200px; height: 200px; padding: 50px; background: red; &#125; .sub &#123; /*çˆ¶çº§çš„contentæ˜¯æä¾›ç»™å­çº§ç›’å­åˆ©ç”¨çš„*/ margin: 0 5px; border: 5px solid black; padding: 5px; /*auto &lt;= 100%*/ width: auto; /*width: 100%;*/ height: 50px; background: orange; &#125; &lt;/style&gt;&lt;/head&gt;&lt;body&gt; &lt;!-- &lt;div class="b1"&gt;&lt;/div&gt; --&gt; &lt;!-- &lt;div class="b2"&gt;&lt;/div&gt; --&gt; &lt;!-- &lt;span&gt;å¥½çš„&lt;/span&gt; --&gt; &lt;div class="sup"&gt; &lt;div class="sub"&gt;&lt;/div&gt; &lt;/div&gt;&lt;/body&gt;&lt;/html&gt; hover çˆ¶å­æ‚¬æµ®1234567891011121314151617181920212223242526272829303132&lt;!DOCTYPE html&gt;&lt;html&gt;&lt;head&gt; &lt;meta charset="UTF-8"&gt; &lt;title&gt;&lt;/title&gt; &lt;style type="text/css"&gt; .sup &#123; width: 120px; height: 40px; background: pink; position: relative; &#125; .sub &#123; width: 120px; height: 100px; background: black; position: absolute; left: 0; top: 40px; display: none; &#125; .sup:hover .sub &#123; display: block; &#125; &lt;/style&gt;&lt;/head&gt;&lt;body&gt; &lt;div class="sup"&gt; &lt;div class="sub"&gt;&lt;/div&gt; &lt;/div&gt;&lt;/body&gt;&lt;/html&gt; æ€»ç»“ä¸€.æµ®åŠ¨å¸ƒå±€çš„æ€»ç»“121.åŒä¸€ç»“æž„ä¸‹, å¦‚æžœé‡‡ç”¨æµ®åŠ¨å¸ƒå±€,æ‰€æœ‰çš„åŒçº§åˆ«å…„å¼Ÿæ ‡ç­¾éƒ½è¦é‡‡ç”¨æµ®åŠ¨å¸ƒå±€2.æµ®åŠ¨å¸ƒå±€çš„ç›’å­å®½åº¦åœ¨æ²¡æœ‰è®¾å®šæ—¶ä¼šè‡ªé€‚åº”å†…å®¹å®½åº¦ äºŒ.ç›’å­çš„æ˜¾éš12345display: none;åœ¨é¡µé¢ä¸­ä¸å ä½, é‡‡ç”¨å®šä½å¸ƒå±€åŽ, æ˜¾ç¤ºéšè—éƒ½ä¸ä¼šå½±å“å…¶ä»–æ ‡ç­¾å¸ƒå±€, ä¸éœ€è¦ç”¨åŠ¨ç”»å¤„ç†æ—¶opacity: 0;åœ¨é¡µé¢ä¸­å ä½, é‡‡ç”¨å®šä½å¸ƒå±€åŽ, æ˜¾ç¤ºéšè—éƒ½ä¸ä¼šå½±å“å…¶ä»–æ ‡ç­¾å¸ƒå±€, éœ€è¦é‡‡ç”¨åŠ¨ç”»å¤„ç†æ—¶ ä¸‰.å®šä½å¸ƒå±€1ä»€ä¹ˆæ˜¯å®šä½å¸ƒå±€: å¯ä»¥é€šè¿‡ä¸Šä¸‹å·¦å³å››ä¸ªæ–¹ä½å®Œæˆè‡ªèº«å¸ƒå±€çš„å¸ƒå±€æ–¹å¼ ç›¸å¯¹å®šä½ 123456å‚è€ƒç³»: è‡ªèº«åŽŸæœ‰ä½ç½®position: relative; =&gt; æ‰“å¼€äº†å››ä¸ªå®šä½æ–¹ä½1.top|bottom|left|rightéƒ½å¯ä»¥å®Œæˆè‡ªèº«å¸ƒå±€, ä¸Šä¸‹å–ä¸Š,å·¦å³å–å·¦2.left = -right | top = -bottom3.å¸ƒå±€åŽä¸å½±å“è‡ªèº«åŽŸæœ‰ä½ç½®4.ä¸è„±ç¦»æ–‡æ¡£æµ ç»å¯¹å®šä½ 12345å‚è€ƒç³»: æœ€è¿‘çš„å®šä½çˆ¶çº§position: absolute; =&gt; æ‰“å¼€äº†å››ä¸ªå®šä½æ–¹ä½1.top|bottom|left|rightéƒ½å¯ä»¥å®Œæˆè‡ªèº«å¸ƒå±€, ä¸Šä¸‹å–ä¸Š,å·¦å³å–å·¦2.çˆ¶çº§å¿…é¡»è‡ªå·±è®¾ç½®å®½é«˜3.å®Œå…¨ç¦»æ–‡æ¡£æµ å›ºå®šå®šä½ 12345å‚è€ƒç³»: é¡µé¢çª—å£position: fixed; =&gt; æ‰“å¼€äº†å››ä¸ªå®šä½æ–¹ä½1.top|bottom|left|rightéƒ½å¯ä»¥å®Œæˆè‡ªèº«å¸ƒå±€, ä¸Šä¸‹å–ä¸Š,å·¦å³å–å·¦2.ç›¸å¯¹äºŽé¡µé¢çª—å£æ˜¯é™æ­¢çš„3.å®Œå…¨è„±ç¦»æ–‡æ¡£æµ z-index 1ä¿®æ”¹æ˜¾ç¤ºå±‚çº§(åœ¨å‘ç”Ÿé‡å æ—¶ä½¿ç”¨), å€¼å–æ­£æ•´æ•°, å€¼ä¸éœ€è¦æŽ’åºéšæ„è§„å®š, å€¼å¤§çš„æ˜¾ç¤ºå±‚çº§é«˜ å››.æµå¼å¸ƒå±€æ€æƒ³1231. ç™¾åˆ†æ¯”2. vw | vh =&gt; max-width(height) | min-width(height)3. em | rem]]></content>
      <categories>
        <category>å‰ç«¯</category>
      </categories>
  </entry>
  <entry>
    <title><![CDATA[å‰ç«¯ï¼ˆäº”ï¼‰ä¹‹æµ®åŠ¨]]></title>
    <url>%2F2018%2F12%2F10%2F%E5%89%8D%E7%AB%AF%EF%BC%88%E4%BA%94%EF%BC%89%E4%B9%8B%E6%B5%AE%E5%8A%A8%2F</url>
    <content type="text"><![CDATA[å‰ç«¯ä¹‹æµ®åŠ¨å¸ƒå±€ã€æ¸…æµ®åŠ¨display æ€»ç»“123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293&lt;!DOCTYPE html&gt;&lt;html&gt;&lt;head&gt; &lt;meta charset="UTF-8"&gt; &lt;title&gt;display æ€»ç»“&lt;/title&gt; &lt;style type="text/css"&gt; /*1. åŒè¡Œæ˜¾ç¤ºï¼Œå°±ç›¸å½“äºŽçº¯æ–‡æœ¬ï¼Œå½“ä¸€è¡Œæ˜¾ç¤ºä¸ä¸‹ï¼Œé‚£ä¹ˆæ˜¾ç¤ºä¸ä¸‹çš„ï¼ˆå­—ï¼‰å°±ä¼šè‡ªåŠ¨æ¢è¡Œï¼Œå’Œçº¯æ–‡æœ¬çš„åŒºåˆ«å°±æ˜¯æœ‰æ ‡ç­¾æ•´ä½“çš„æ¦‚å¿µï¼Œæ ‡ç­¾ä¸Žæ ‡ç­¾é—´æœ‰ä¸€ä¸ªç©ºæ ¼çš„éš”æ–­*/ /*2. æ”¯æŒéƒ¨åˆ† css æ ·å¼ï¼Œä¸æ”¯æŒå®½é«˜ | ä¸æ”¯æŒè¡Œé«˜ï¼Œè¡Œé«˜ä¼šæ˜ å°„åˆ°çˆ¶çº§ block æ ‡ç­¾ | ä¸æ”¯æŒ margin ä¸Šä¸‹*/ /*3. content ç”±æ–‡æœ¬å†…å®¹æ’‘å¼€*/ /*4. inline æ ‡ç­¾åªåµŒå¥— inline æ ‡ç­¾*/ abc &#123; display: inline; background-color: orange; width: 200px; height: 200px; /*line-height: 300px;*/ margin-top: 30px; margin-bottom: 30px; &#125; &lt;/style&gt; &lt;style type="text/css"&gt; /*1. åŒè¡Œæ˜¾ç¤ºï¼Œå°±ç›¸å½“äºŽçº¯æ–‡æœ¬ï¼Œæ ‡ç­¾ä¼šä½œä¸ºä¸€ä¸ªæ•´ä½“æ¢è¡Œæ˜¾ç¤º*/ /*2. æ”¯æŒæ‰€æœ‰ css æ ·å¼ï¼Œ*/ /*3. content é»˜è®¤ç”±æ–‡æœ¬ï¼ˆå›¾ç‰‡ï¼‰å†…å®¹æ’‘å¼€ï¼Œä¹Ÿå¯ä»¥è‡ªå®šä¹‰å®½é«˜ï¼Œå½“è‡ªå®šä¹‰å®½é«˜åŽä¸€å®šä¼šé‡‡ç”¨è‡ªå®šä¹‰å®½é«˜ï¼ˆæ˜¾ç¤ºåŒºåŸŸä¸è¶³ï¼Œå†…å®¹ä¼šåœ¨æ ‡ç­¾å†…éƒ¨æ¢è¡Œæ˜¾ç¤ºï¼Œå¯èƒ½è¶…å‡ºæ˜¾ç¤ºåŒºåŸŸï¼‰*/ /*4. inline-block æ ‡ç­¾ä¸å»ºè®®åµŒå¥—ä»»æ„æ ‡ç­¾*/ .d2 &#123; background: pink; &#125; def &#123; display: inline-block; background: blue; width: 200px; height: 200px; &#125; &lt;/style&gt; &lt;style type="text/css"&gt; /*1. å¼‚è¡Œæ˜¾ç¤ºï¼Œä¸ç®¡è‡ªèº«åŒºåŸŸå¤šå¤§éƒ½ä¼šç‹¬å ä¸€è¡Œ*/ /*2. æ”¯æŒæ‰€æœ‰css æ ·å¼ï¼Œ*/ /*3. widthé»˜è®¤ç»§æ‰¿çˆ¶çº§ï¼Œheightç”±å†…å®¹ï¼ˆæ–‡æœ¬ã€å›¾ç‰‡ã€å­æ ‡ç­¾ï¼‰æ’‘å¼€ï¼Œå½“è®¾ç½®è‡ªå®šä¹‰å®½é«˜åŽä¸€å®šé‡‡ç”¨è‡ªå®šä¹‰å®½é«˜*/ /*4. block æ ‡ç­¾å¯ä»¥åµŒå¥—ä»»æ„æ ‡ç­¾*/ .d3 &#123; background: brown; &#125; opq &#123; display: block; background: cyan; width: 20px; height: 20px; &#125; &lt;/style&gt;&lt;/head&gt;&lt;body&gt; &lt;div class="d2"&gt; &lt;abc&gt; è‡ªå®šä¹‰æ ‡ç­¾&lt;/abc&gt; &lt;abc&gt; è‡ªå®šä¹‰æ ‡ç­¾&lt;/abc&gt; &lt;abc&gt; è‡ªå®šä¹‰æ ‡ç­¾&lt;/abc&gt; &lt;/div&gt; &lt;div class="d2"&gt; &lt;def&gt;è‡ªå®šä¹‰æ ‡ç­¾&lt;/def&gt; &lt;def&gt;è‡ªå®šä¹‰æ ‡ç­¾&lt;/def&gt; &lt;def&gt;è‡ªå®šä¹‰æ ‡ç­¾&lt;/def&gt; &lt;/div&gt; &lt;div class="d3"&gt; &lt;opq&gt;è‡ªå®šä¹‰æ ‡ç­¾&lt;/opq&gt; &lt;opq&gt;è‡ªå®šä¹‰æ ‡ç­¾&lt;/opq&gt; &lt;opq&gt;è‡ªå®šä¹‰æ ‡ç­¾&lt;/opq&gt; &lt;/div&gt; &lt;!-- inline-block ä¸å»ºè®®ä½œä¸ºç»“æž„|å¸ƒå±€å±‚ç†ç”± --&gt; &lt;style type="text/css"&gt; xyz &#123; display: inline-block; width: 200px; height: 200px; background: yellow; &#125; xyz &#123; /*æ–‡æœ¬åž‚ç›´æ–¹å‘æŽ§åˆ¶å±žæ€§*/ vertical-align: top; &#125; .x2 &#123; line-height: 200px; &#125; &lt;/style&gt; &lt;div class="d4"&gt; &lt;xyz class="x1"&gt;ä¸€æ®µæ–‡æœ¬&lt;/xyz&gt; &lt;xyz class="x2"&gt;ä¸¤æ®µæ–‡æœ¬&lt;/xyz&gt; &lt;xyz class="x3"&gt;ä¸‰æ®µæ–‡æœ¬ä¸‰æ®µæ–‡æœ¬ä¸‰æ®µæ–‡æœ¬ä¸‰æ®µæ–‡æœ¬ä¸‰æ®µæ–‡æœ¬ä¸‰æ®µæ–‡æœ¬ä¸‰æ®µæ–‡æœ¬ä¸‰æ®µæ–‡æœ¬ä¸‰æ®µæ–‡æœ¬ä¸‰æ®µæ–‡æœ¬ä¸‰æ®µæ–‡æœ¬ä¸‰æ®µæ–‡æœ¬ä¸‰æ®µæ–‡æœ¬&lt;/xyz&gt; &lt;/div&gt;&lt;/body&gt;&lt;/html&gt; overflowåœ¨å¤„ç†è¶…å‡ºå†…å®¹ä¸­çš„åº”ç”¨123456789101112131415161718192021222324252627282930313233343536373839404142434445464748&lt;!DOCTYPE html&gt;&lt;html&gt;&lt;head&gt; &lt;meta charset="UTF-8"&gt; &lt;title&gt;overflow&lt;/title&gt; &lt;style type="text/css"&gt; div &#123; width: 50px; height: 100px; &#125; .d1 &#123; background: red; &#125; .d2 &#123; background: orange; &#125; .d2 &#123; /*margin-top: -50px;*/ &#125; &lt;/style&gt; &lt;style type="text/css"&gt; .b1 &#123; background: yellow; /*overflow:å¤„ç†å†…å®¹è¶…å‡ºç›’å­æ˜¾ç¤ºåŒºåŸŸ*/ /* autoï¼šè‡ªé€‚åº”ï¼Œå†…å®¹è¶…å‡ºï¼Œæ»šåŠ¨æ˜¾ç¤ºè¶…å‡ºéƒ¨åˆ†ï¼Œä¸è¶…å‡ºåˆ™æ­£å¸¸æ˜¾ç¤º*/ /*scrollï¼šä¸€ç›´é‡‡ç”¨æ»šåŠ¨æ–¹å¼æ˜¾ç¤º*/ /*overflow: scroll;*/ /*hiddenï¼šéšè—è¶…å‡ºç›’å­æ˜¾ç¤ºèŒƒå›´çš„å†…å®¹*/ overflow: hidden; &#125; /*æ³¨ï¼šæ ¹æ®æ–‡æœ¬çš„å…·ä½“è¶…å‡ºèŒƒå›´ï¼Œæ¨ªå‘çºµå‘å‡å¯èƒ½å‡ºçŽ°æ»šåŠ¨æ¡*/ .b2 &#123; background: cyan; overflow: scroll; &#125; &lt;/style&gt;&lt;/head&gt;&lt;body&gt; &lt;!-- æ–‡æœ¬å±‚è¦é«˜äºŽèƒŒæ™¯å±‚ --&gt; &lt;div class="d1"&gt;æˆ‘æ˜¯æ–‡æœ¬æˆ‘æ˜¯&lt;/div&gt; &lt;div class="d2"&gt;æˆ‘æ˜¯æ–‡æœ¬æˆ‘æ˜¯&lt;/div&gt; &lt;!-- é—®é¢˜ï¼šå†…å®¹ï¼ˆæ–‡æœ¬ã€å›¾ç‰‡ã€å­æ ‡ç­¾ï¼‰ä¼šè¶…å‡ºç›’å­çš„æ˜¾ç¤ºåŒºåŸŸ --&gt; &lt;div class="b1"&gt;æˆ‘æ˜¯æ–‡æœ¬æˆ‘æ˜¯æˆ‘æ˜¯æ–‡æœ¬æˆ‘æ˜¯æˆ‘æ˜¯æ–‡æœ¬æˆ‘æ˜¯æˆ‘æ˜¯æ–‡æœ¬æˆ‘æ˜¯æˆ‘æ˜¯æ–‡æœ¬æˆ‘æ˜¯&lt;/div&gt; &lt;div class="b2"&gt;sdfsafafasdfafasdfsdfsafafasdfafasdfsdfsafafasdfafasdfsdfsafafasdfafasdfsdfsafafasdfafasdf&lt;/div&gt;&lt;/body&gt;&lt;/html&gt; æµ®åŠ¨æµ®åŠ¨å¸ƒå±€12345678910111213141516171819202122232425262728293031323334353637383940414243444546&lt;!DOCTYPE html&gt;&lt;html&gt;&lt;head&gt; &lt;meta charset="UTF-8"&gt; &lt;title&gt;æµ®åŠ¨å¸ƒå±€&lt;/title&gt; &lt;style type="text/css"&gt; .temp &#123; width: 200px; height: 200px; background: orange; /*Boxè‡ªèº«æ°´å¹³æ–¹å‘çš„ä½ç½®ç”±marginå·¦æˆ–å³å†³å®š(å…·ä½“å·²ç»å‚ç…§BFCæ–¹ä½)ï¼Œå±žäºŽåŒä¸€ä¸ªBFCçš„ä¸¤ä¸ªç›¸é‚»Boxçš„marginä¼šå‘ç”Ÿå åŠ ã€‚*/ margin-right: 100px; float: right; &#125; /*&lt;!-- floatï¼šæµ®åŠ¨å¸ƒå±€ï¼Œæ”¹å˜ bfc çš„å‚ç…§æ–¹ä½ï¼Œå°±å¯ä»¥æ”¹å˜ç›’å­çš„æŽ’åˆ—æ–¹å¼ --&gt;*/ /*&lt;!-- ä¸ºä»€ä¹ˆè¦ä½¿ç”¨ï¼šå—çº§ç›’å­å°±ä¼šåŒè¡Œæ˜¾ç¤º --&gt;*/ /*float: left | right*/ .box &#123; width: 100px; height: 100px; background: orange; font: 900 40px/100px 'STSong'; text-align: center; &#125; .box:nth-child(2n) &#123; background: red; &#125; .box &#123; float: left; &#125; /*æ³¨ï¼šæµ®åŠ¨å¸ƒå±€çš„æ¨ªå‘æ˜¾ç¤ºèŒƒå›´ç”±çˆ¶çº§width å†³å®šï¼Œå½“ä¸€è¡Œæ˜¾ç¤ºä¸ä¸‹æ—¶ä¼šè‡ªåŠ¨æ¢è¡Œï¼ŒæŽ’åˆ—æ–¹å¼ï¼ˆèµ·ç‚¹ï¼‰è¿˜æ˜¯éµå¾ª BFC å‚ç…§æ–¹ä½ =&gt; å›ºå®šäº†çˆ¶çº§width ä¹Ÿå°±å›ºå®šäº†æµ®åŠ¨å¸ƒå±€çš„è¡Œæ•°*/ &lt;/style&gt;&lt;/head&gt;&lt;body&gt; &lt;div class="temp"&gt;&lt;/div&gt; &lt;div class="wraper"&gt; &lt;div class="box"&gt;1&lt;/div&gt; &lt;div class="box"&gt;2&lt;/div&gt; &lt;div class="box"&gt;3&lt;/div&gt; &lt;div class="box"&gt;4&lt;/div&gt; &lt;div class="box"&gt;5&lt;/div&gt; &lt;/div&gt;&lt;/body&gt;&lt;/html&gt; æ¸…æµ®åŠ¨1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556&lt;!DOCTYPE html&gt;&lt;html&gt;&lt;head&gt; &lt;meta charset="UTF-8"&gt; &lt;title&gt;æ¸…æµ®åŠ¨&lt;/title&gt; &lt;style type="text/css"&gt; .outter &#123; /*height: 200px;*/ background: orange; &#125; /*æ¸…æµ®åŠ¨ï¼šè®©çˆ¶çº§ï¼ˆæœ‰æµ®åŠ¨å­çº§ï¼‰èŽ·å¾—ä¸€ä¸ªåˆé€‚çš„é«˜åº¦*/ /*å­æ ‡ç­¾è®¾ç½®æµ®åŠ¨ =&gt; å¯¼è‡´å­æ ‡ç­¾ä¸å®Œå…¨è„±ç¦»æ–‡æ¡£æµ*/ /*è„±ç¦»æ–‡æ¡£æµï¼šäº§ç”Ÿäº†æ–°çš„ BFCï¼Œï¼ˆä¸å†å…³è”çˆ¶çº§å®½é«˜ï¼‰*/ /*æµ®åŠ¨çš„å­çº§ï¼Œé»˜è®¤ä¸ä¼šèŽ·å–çˆ¶çº§å®½åº¦ï¼Œä¹Ÿä¸ä¼šæ’‘å¼€çˆ¶çº§é«˜åº¦*/ /*ä¸å®Œå…¨ï¼šçˆ¶çº§åœ¨åšæ¸…æµ®åŠ¨æ“ä½œåŽï¼Œå¯ä»¥é‡æ–°è¢«å­çº§æ’‘å¼€é«˜åº¦*/ /*å½“çˆ¶çº§æ²¡æœ‰ä¸‹å…„å¼Ÿæ ‡ç­¾å¯ä»¥ä¸åšæ¸…æµ®åŠ¨ï¼Œä½†æ¸…æµ®åŠ¨æ“ä½œåº”è¯¥åœ¨æ¯ä¸€æ¬¡å‘ç”Ÿæµ®åŠ¨åŽå‡éœ€è¦å¤„ç†*/ .inner &#123; width: 200px; height: 200px; background: red; float: left; border-radius: 50%; &#125; /*æ¸…æµ®åŠ¨æ“ä½œ*/ .outter:after &#123; content: ''; display: block; clear: both; &#125; .box &#123; width: 200px; height: 200px; background: cyan; &#125; &lt;/style&gt; &lt;style type="text/css"&gt; /*ç›’å­å…ˆåŠ è½½ beforeï¼Œåœ¨åŠ è½½è‡ªèº«ï¼ˆæ–‡æœ¬ã€å›¾ç‰‡ã€å­æ ‡ç­¾ï¼‰ï¼Œæœ€åŽåŠ è½½after*/ .div:before &#123; content: '123'; &#125; .div:after &#123; content: '456'; &#125; &lt;/style&gt;&lt;/head&gt;&lt;body&gt; &lt;!-- æ¸…æµ®åŠ¨ï¼šæ¸…é™¤æµ®åŠ¨å¯¼è‡´çš„å¸ƒå±€é—®é¢˜ --&gt; &lt;div class="outter"&gt; &lt;div class="inner"&gt;&lt;/div&gt; &lt;/div&gt; &lt;div class="box"&gt;&lt;/div&gt; &lt;div class="div"&gt;åŽŸæ–‡æœ¬&lt;/div&gt;&lt;/body&gt;&lt;/html&gt; æ¸…æµ®åŠ¨æ–¹å¼1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859&lt;!DOCTYPE html&gt;&lt;html&gt;&lt;head&gt; &lt;meta charset="UTF-8"&gt; &lt;title&gt;æ¸…æµ®åŠ¨æ–¹å¼&lt;/title&gt; &lt;style type="text/css"&gt; .sub, .box &#123; width: 200px; height: 200px; background: orange; &#125; .box &#123; background: red; &#125; .sub &#123; float: left; &#125; /*1. è®¾ç½®æ­»é«˜åº¦*/ .sup &#123; /*height: 200px;*/ &#125; /*2. overflow*/ .sup &#123; background: cyan; overflow: hidden; &#125; /*3. å…„å¼Ÿæ ‡ç­¾æ¸…æµ®åŠ¨*/ .box &#123; /*clear: left;*/ clear: both; &#125; /*4. ä¼ªç±»æ¸…æµ®åŠ¨*/ .sup &#123; content: ''; display: block; clear: both; &#125; &lt;/style&gt;&lt;/head&gt;&lt;body&gt; &lt;!-- æ¸…æµ®åŠ¨ï¼šä½¿çˆ¶çº§èŽ·å–ä¸€ä¸ªåˆé€‚é«˜åº¦ --&gt; &lt;!-- é€šå¸¸æƒ…å†µä¸‹åœ¨å­çº§æµ®åŠ¨ï¼Œçˆ¶çº§ä¸ä¼šè¢«æ’‘å¼€é«˜åº¦åœ¨è¯¥é—®é¢˜å‘ç”Ÿä¹‹åŽåšæ¸…æµ®åŠ¨æ“ä½œ --&gt; &lt;!-- åœ¨å‘ç”Ÿæµ®åŠ¨ä¹‹å‰ï¼Œå¯ä»¥é€šè¿‡è®¾ç½®çˆ¶çº§çš„é«˜åº¦æ¥é¿å…æµ®åŠ¨é—®é¢˜ã€‚--&gt; &lt;div class="sup"&gt; &lt;div class="sub"&gt;&lt;/div&gt; &lt;/div&gt; &lt;div class="box"&gt;&lt;/div&gt; &lt;style type="text/css"&gt; .bb &#123; width: 100px; /*æ‰‹åŠ¨è®¾ç½®äº†æ­»é«˜åº¦ï¼Œæ‰ä¼šäº§ç”Ÿè¶…å‡ºé«˜åº¦çš„å†…å®¹ä¸ºæ— ç”¨å†…å®¹*/ /*height: 50px;*/ background: pink; overflow: hidden; &#125; &lt;/style&gt; &lt;div class="bb"&gt;hao&lt;/div&gt;&lt;/body&gt;&lt;/html&gt; æ€»ç»“ä¸€ display æ€»ç»“1234567891011121314151617/* inline */ /*1. åŒè¡Œæ˜¾ç¤ºï¼Œå°±ç›¸å½“äºŽçº¯æ–‡æœ¬ï¼Œå½“ä¸€è¡Œæ˜¾ç¤ºä¸ä¸‹ï¼Œé‚£ä¹ˆæ˜¾ç¤ºä¸ä¸‹çš„ï¼ˆå­—ï¼‰å°±ä¼šè‡ªåŠ¨æ¢è¡Œï¼Œå’Œçº¯æ–‡æœ¬çš„åŒºåˆ«å°±æ˜¯æœ‰æ ‡ç­¾æ•´ä½“çš„æ¦‚å¿µï¼Œæ ‡ç­¾ä¸Žæ ‡ç­¾é—´æœ‰ä¸€ä¸ªç©ºæ ¼çš„éš”æ–­*/ /*2. æ”¯æŒéƒ¨åˆ† css æ ·å¼ï¼Œä¸æ”¯æŒå®½é«˜ | ä¸æ”¯æŒè¡Œé«˜ï¼Œè¡Œé«˜ä¼šæ˜ å°„åˆ°çˆ¶çº§ block æ ‡ç­¾ | ä¸æ”¯æŒ margin ä¸Šä¸‹*/ /*3. content ç”±æ–‡æœ¬å†…å®¹æ’‘å¼€*/ /*4. inline æ ‡ç­¾åªåµŒå¥— inline æ ‡ç­¾*//* inline-block */ /*1. åŒè¡Œæ˜¾ç¤ºï¼Œå°±ç›¸å½“äºŽçº¯æ–‡æœ¬ï¼Œæ ‡ç­¾ä¼šä½œä¸ºä¸€ä¸ªæ•´ä½“æ¢è¡Œæ˜¾ç¤º*/ /*2. æ”¯æŒæ‰€æœ‰ css æ ·å¼ï¼Œ*/ /*3. content é»˜è®¤ç”±æ–‡æœ¬ï¼ˆå›¾ç‰‡ï¼‰å†…å®¹æ’‘å¼€ï¼Œä¹Ÿå¯ä»¥è‡ªå®šä¹‰å®½é«˜ï¼Œå½“è‡ªå®šä¹‰å®½é«˜åŽä¸€å®šä¼šé‡‡ç”¨è‡ªå®šä¹‰å®½é«˜ï¼ˆæ˜¾ç¤ºåŒºåŸŸä¸è¶³ï¼Œå†…å®¹ä¼šåœ¨æ ‡ç­¾å†…éƒ¨æ¢è¡Œæ˜¾ç¤ºï¼Œå¯èƒ½è¶…å‡ºæ˜¾ç¤ºåŒºåŸŸï¼‰*/ /*4. inline-block æ ‡ç­¾ä¸å»ºè®®åµŒå¥—ä»»æ„æ ‡ç­¾*//* block */ /*1. å¼‚è¡Œæ˜¾ç¤ºï¼Œä¸ç®¡è‡ªèº«åŒºåŸŸå¤šå¤§éƒ½ä¼šç‹¬å ä¸€è¡Œ*/ /*2. æ”¯æŒæ‰€æœ‰css æ ·å¼ï¼Œ*/ /*3. widthé»˜è®¤ç»§æ‰¿çˆ¶çº§ï¼Œheightç”±å†…å®¹ï¼ˆæ–‡æœ¬ã€å›¾ç‰‡ã€å­æ ‡ç­¾ï¼‰æ’‘å¼€ï¼Œå½“è®¾ç½®è‡ªå®šä¹‰å®½é«˜åŽä¸€å®šé‡‡ç”¨è‡ªå®šä¹‰å®½é«˜*/ /*4. block æ ‡ç­¾å¯ä»¥åµŒå¥—ä»»æ„æ ‡ç­¾*/ äºŒ overflow çŸ¥è¯†123456789/* overflowï¼šå¤„ç†å†…å®¹è¶…å‡ºç›’å­æ˜¾ç¤ºåŒºåŸŸ */overflow: auto | scroll | hidden /*overflow:å¤„ç†å†…å®¹è¶…å‡ºç›’å­æ˜¾ç¤ºåŒºåŸŸ*/ /* autoï¼šè‡ªé€‚åº”ï¼Œå†…å®¹è¶…å‡ºï¼Œæ»šåŠ¨æ˜¾ç¤ºè¶…å‡ºéƒ¨åˆ†ï¼Œä¸è¶…å‡ºåˆ™æ­£å¸¸æ˜¾ç¤º*/ /*scrollï¼šä¸€ç›´é‡‡ç”¨æ»šåŠ¨æ–¹å¼æ˜¾ç¤º*/ /*overflow: scroll;*/ /*hiddenï¼šéšè—è¶…å‡ºç›’å­æ˜¾ç¤ºèŒƒå›´çš„å†…å®¹*/ /*æ³¨ï¼šæ ¹æ®æ–‡æœ¬çš„å…·ä½“è¶…å‡ºèŒƒå›´ï¼Œæ¨ªå‘çºµå‘å‡å¯èƒ½å‡ºçŽ°æ»šåŠ¨æ¡*/ ä¸‰ æµ®åŠ¨å¸ƒå±€12/*floatï¼šæµ®åŠ¨å¸ƒå±€ï¼Œæ”¹å˜ bfc çš„å‚ç…§æ–¹ä½ï¼Œå°±å¯ä»¥æ”¹å˜ç›’å­çš„æŽ’åˆ—æ–¹å¼ *//*ä¸ºä»€ä¹ˆè¦ä½¿ç”¨ï¼šå—çº§ç›’å­å°±ä¼šåŒè¡Œæ˜¾ç¤º */ 123float: left | right; å·¦ | å³ æµ®åŠ¨/*left: BFC å‚ç…§æ–¹å‘ä»Žå·¦å‘å³*//*right: BFC å‚ç…§æ–¹å‘ä»Žå³å‘å·¦*/ 1/*æµ®åŠ¨çš„åŒºåŸŸç”±çˆ¶çº§çš„ width å†³å®š*/ å›› æ¸…æµ®åŠ¨123æµ®åŠ¨é—®é¢˜ï¼šå­çº§æµ®åŠ¨äº†ï¼Œä¸å†æ’‘å¼€çˆ¶çº§çš„é«˜åº¦ï¼Œé‚£ä¹ˆçˆ¶çº§å¦‚æžœæ‹¥æœ‰å…„å¼Ÿæ ‡ç­¾å¯èƒ½å°±ä¼šå‡ºçŽ°å¸ƒå±€é‡å æ¸…æµ®åŠ¨ï¼šè§£å†³ä¸Šé¢çš„é—®é¢˜ï¼Œé€šè¿‡ä½¿çˆ¶çº§èŽ·å–ä¸€ä¸ªåˆé€‚çš„é«˜åº¦ï¼Œè¿™æ ·å­çº§å°±ä¸ä¼šå’Œçˆ¶çº§çš„å…„å¼Ÿå¸ƒå±€å‘ç”Ÿé‡å æ¸…æµ®åŠ¨çš„æœ¬è´¨æ˜¯ï¼šleft | right | both 12345678910111213/* æ¸…æµ®åŠ¨çš„å››ç§æ–¹å¼*/1. è®¾ç½®è…¹è‚Œçš„æ­»é«˜åº¦2. é€šè¿‡å…„å¼Ÿè®¾ç½® clear: both3. è®¾ç½®çˆ¶çº§ overflow å±žæ€§ä¸º hidden .sup &#123; overflow: hidden; &#125;4. é€šè¿‡çˆ¶çº§: after ä¼ªç±» .sup &#123; content: ''; display: block; clear: both; &#125;]]></content>
      <categories>
        <category>å‰ç«¯</category>
      </categories>
      <tags>
        <tag>æµ®åŠ¨</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[å‰ç«¯ï¼ˆå››ï¼‰]]></title>
    <url>%2F2018%2F12%2F07%2F%E5%89%8D%E7%AB%AF%EF%BC%88%E5%9B%9B%EF%BC%89%2F</url>
    <content type="text"><![CDATA[å‰ç«¯ä¹‹å¸¸ç”¨æ ‡ç­¾çš„ä½¿ç”¨ã€è¾¹ç•Œåœ†è§’ã€ç²¾çµå›¾ä»¥åŠç›’æ¨¡åž‹çš„å¸ƒå±€å‰è¨€ä¸Šç¯‡åšå®¢ä»‹ç»äº†ç»„åˆé€‰æ‹©å™¨ï¼ŒåŒ…æ‹¬å››ç§ï¼Œåˆ†åˆ«æ˜¯ç¾¤ç»„é€‰æ‹©å™¨ã€åŽä»£ï¼ˆå­ä»£ï¼‰é€‰æ‹©å™¨ã€å…„å¼Ÿï¼ˆç›¸é‚»é€‰æ‹©å™¨ï¼‰åŠäº¤é›†é€‰æ‹©å™¨ï¼›a æ ‡ç­¾çš„å››å¤§ä¼ªç±»é€‰æ‹©å™¨ï¼Œa:linkã€a:hoverã€a:activeã€a:visitedï¼Œå…¶ä¸­ hover å’Œ active ä¹Ÿå¯ä»¥ç”¨äºŽå…¶ä»–æ ‡ç­¾ï¼Œç´¢å¼•é€‰æ‹©å™¨åŒ…æ‹¬ä¸‰ç§ 123456&lt;!-- å…ˆä½ç½®åŽç±»åž‹ --&gt;div:nth-child(1) &lt;!-- å…ˆç±»åž‹åŽä½ç½® --&gt;div:nth-of-type(1)&lt;!-- å–åï¼Œå…ˆæ‰¾åˆ°æœ‰ abc å’Œ div ç±»çš„æ ‡ç­¾ï¼Œç„¶åŽå–å--&gt;.div:not([abc]) æœ€åŽä»‹ç»äº†æœ€æœ€é‡è¦çš„ç›’æ¨¡åž‹ï¼Œç›’æ¨¡åž‹ç”±å››éƒ¨åˆ†ç»„æˆç”±å†…åˆ°å¤–åˆ†åˆ«æ˜¯ï¼šcontent+padding+border+marginï¼Œå…¶ä¸­ content+padding+border å‚ä¸Žç›’å­æ˜¾ç¤ºï¼Œmargin å‚ä¸Žç›’å­å¸ƒå±€ã€‚ å¸¸ç”¨æ ‡ç­¾çš„ä½¿ç”¨123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148149150151152153154155156157158159160161162163164&lt;!DOCTYPE html&gt;&lt;html&gt;&lt;head&gt; &lt;meta charset="UTF-8"&gt; &lt;title&gt;å¸¸ç”¨æ ‡ç­¾çš„ä½¿ç”¨&lt;/title&gt; &lt;!-- SEO --&gt; &lt;!-- &lt;meta name="keywords" content="8-12ä¸ªä»¥è‹±æ–‡é€—å·éš”å¼€çš„å•è¯æˆ–è¯è¯­"&gt; --&gt; &lt;!-- &lt;meta name="description" content="80å­—ä»¥å†…çš„ä¸€æ®µè¯ï¼Œä¸Žç½‘ç«™å†…å®¹ç›¸å…³"&gt; --&gt; &lt;!-- ç§»åŠ¨é€‚é… --&gt; &lt;!-- &lt;meta name="viewport" content="width=device-width,initial-scale=1,minimum-scale=1,maximum-scale=1,user-scalable=no" /&gt; --&gt; &lt;link rel="icon" type="image/x-icon" href="http://www.baidu.com/favicon.ico"&gt; &lt;style type="text/css"&gt; .img &#123; /*æ ¹æ®éœ€æ±‚,æ˜¯æŒ‡å®šé«˜è¿˜æ˜¯æŒ‡å®šå®½,è®¾ç½®ä¸€ä¸ª,å¦ä¸€ä¸ªä¼šç­‰æ¯”ç¼©æ”¾*/ /*width: 200px;*/ height: 100px; &#125; /*å››ä¸ªä¼ªç±»*/ /*resetæ“ä½œ*/ a &#123; color: #333; text-decoration: none; &#125; /*ulçš„resetæ“ä½œ*/ ul &#123; margin: 0; padding: 0; list-style: none; /*margin-left: 40px;*/ &#125; &lt;/style&gt;&lt;/head&gt;&lt;body&gt; &lt;!-- 1.è®¾ç½®é”šç‚¹: é”šç‚¹åpage_top --&gt; &lt;a href="" name="page_top"&gt;&lt;/a&gt; &lt;img class="img" src="./img/timg.jpg" alt=""&gt; &lt;a href="00_å¤ä¹ é¢„ä¹ .html"&gt;å‰å¾€00é¡µé¢&lt;/a&gt; &lt;!-- å‰å¾€æœ¬é¡µé¢ä¸­ä¸ªæŸä¸ªä½ç½®: Top =&gt; é”šç‚¹ --&gt; &lt;!-- 1.è®¾ç½®é”šç‚¹ 2.è®¾ç½®å‰å¾€é”šç‚¹çš„aè½¬è·³ --&gt; &lt;ul&gt; &lt;li&gt;åˆ—è¡¨é¡¹&lt;/li&gt; &lt;li&gt;åˆ—è¡¨é¡¹&lt;/li&gt; &lt;li&gt;åˆ—è¡¨é¡¹&lt;/li&gt; &lt;li&gt;åˆ—è¡¨é¡¹&lt;/li&gt; &lt;li&gt;åˆ—è¡¨é¡¹&lt;/li&gt; &lt;/ul&gt; &lt;br&gt; &lt;br&gt; &lt;br&gt; &lt;br&gt; &lt;br&gt; &lt;br&gt; &lt;br&gt; &lt;br&gt; &lt;br&gt; &lt;br&gt; &lt;br&gt; &lt;br&gt; &lt;br&gt; &lt;br&gt; &lt;!-- é€šé…æ ‡ç­¾é¡µå¯ä»¥è®¾ç½®é”šç‚¹ --&gt; &lt;!-- &lt;a href="" name="t_123"&gt;&lt;/a&gt; --&gt; &lt;div id="t_123"&gt;123&lt;/div&gt; &lt;br&gt; &lt;br&gt; &lt;br&gt; &lt;br&gt; &lt;br&gt; &lt;br&gt; &lt;br&gt; &lt;br&gt; &lt;br&gt; &lt;br&gt; &lt;br&gt; &lt;br&gt; &lt;br&gt; &lt;br&gt; &lt;br&gt; &lt;br&gt; &lt;br&gt; &lt;br&gt; &lt;br&gt; &lt;br&gt; &lt;br&gt; &lt;br&gt; &lt;br&gt; &lt;br&gt; &lt;br&gt; &lt;br&gt; &lt;br&gt; &lt;br&gt; &lt;br&gt; &lt;br&gt; &lt;br&gt; &lt;br&gt; &lt;br&gt; &lt;br&gt; &lt;br&gt; &lt;br&gt; &lt;br&gt; &lt;br&gt; &lt;br&gt; &lt;br&gt; &lt;br&gt; &lt;br&gt; &lt;br&gt; &lt;br&gt; &lt;br&gt; &lt;br&gt; &lt;br&gt; &lt;br&gt; &lt;br&gt; &lt;br&gt; &lt;br&gt; &lt;br&gt; &lt;br&gt; &lt;br&gt; &lt;br&gt; &lt;br&gt; &lt;br&gt; &lt;br&gt; &lt;br&gt; &lt;br&gt; &lt;br&gt; &lt;br&gt; &lt;br&gt; &lt;br&gt; &lt;br&gt; &lt;br&gt; &lt;br&gt; &lt;br&gt; &lt;br&gt; &lt;br&gt; &lt;br&gt; &lt;br&gt; &lt;br&gt; &lt;br&gt; &lt;br&gt; &lt;br&gt; &lt;br&gt; &lt;br&gt; &lt;br&gt; &lt;br&gt; &lt;br&gt; &lt;br&gt; &lt;br&gt; &lt;br&gt; &lt;br&gt; &lt;br&gt; &lt;!-- 2.è®¾ç½®å‰å¾€é”šç‚¹çš„aè½¬è·³: #é”šç‚¹å --&gt; &lt;a href="#page_top"&gt;Top&lt;/a&gt; &lt;a href="#t_123"&gt;123&lt;/a&gt; &lt;a href="00_å¤ä¹ é¢„ä¹ .html#md"&gt;å‰å¾€é”šç‚¹&lt;/a&gt;&lt;/body&gt;&lt;/html&gt; è¾¹ç•Œåœ†è§’123456789101112131415161718192021222324252627282930313233343536373839&lt;!DOCTYPE html&gt;&lt;html&gt;&lt;head&gt; &lt;meta charset="UTF-8"&gt; &lt;title&gt;è¾¹ç•Œåœ†è§’&lt;/title&gt; &lt;style type="text/css"&gt; .box &#123; width: 200px; height: 200px; background-color: orange; &#125; .box &#123; /*è¾¹ç•Œåœ†è§’*/ /*ç™¾åˆ†æ¯”æŽ§åˆ¶*/ /*border-radius: 50%;*/ /*å®žé™…åƒç´ æŽ§åˆ¶*/ /*border-radius: 20px;*/ /*æ¨ªçºµåˆ†ç¦» æ¨ª / çºµ*/ /*border-radius: 20px / 50%;*/ /*å·¦ä¸Šä¸ºç¬¬ä¸€ä¸ªè§’, é¡ºæ—¶é’ˆèµ‹å€¼, æ— å€¼æ‰¾å¯¹è§’*/ /*å·¦ä¸Šæ¨ª30px å³ä¸Šæ¨ª100px å³ä¸‹æ¨ª=å·¦ä¸Šæ¨ª å·¦ä¸‹æ¨ª=å³ä¸Šæ¨ª, å››è§’çºµå‘å…¨æ˜¯50%*/ /*border-radius: 30px 100px / 50%;*/ /*å•ç‹¬è®¾ç½®æ—¶, æ¨ªå‘ çºµå‘*/ /*border-top-left-radius: 50% 100%; border-top-right-radius: 50% 100%;*/ border-radius: 50% 50% 0 0 / 100% 100% 0 0; &#125; &lt;/style&gt;&lt;/head&gt;&lt;body&gt; &lt;div class="box"&gt;&lt;/div&gt;&lt;/body&gt;&lt;/html&gt; èƒŒæ™¯æ ·å¼12345678910111213141516171819202122232425262728293031323334353637383940414243&lt;!DOCTYPE html&gt;&lt;html&gt;&lt;head&gt; &lt;meta charset="UTF-8"&gt; &lt;title&gt;èƒŒæ™¯æ ·å¼&lt;/title&gt; &lt;style type="text/css"&gt; .box, .wrap &#123; width: 200px; height: 200px; background-color: orange; &#125; .wrap &#123; /*å›¾ç‰‡è¿‡å¤§ä¼šæ˜¾ç¤ºä¸å…¨*/ background-image: url('img/timg.jpg'); /*è§„å®šèƒŒæ™¯å›¾ç‰‡æ˜¾ç¤ºå°ºå¯¸*/ background-size: 200px 200px; &#125; .box &#123; /*å›¾ç‰‡è¿‡å°ä¼šå¹³é“º*/ background-image: url('img/123.png'); /*å¹³é“º:repeat-x | repeat-y | repeat | no-repeat*/ background-repeat: no-repeat; /*ä½ç½®(å®šä½): å¯ä»¥å†™å…·ä½“æ•°å€¼,ä¹Ÿå¯ä»¥å†™ä½ç½®å•è¯*/ /*background-position: 10px center;*/ /*background-position: right bottom;*/ /*background-position: center center;*/ /*è®¾ç½®ä¸€ä¸ªå€¼æ—¶,æŽ§åˆ¶çš„æ˜¯xè½´,yè½´å–center*/ /*è®¾ç½®;ä¸¤ä¸ªå€¼æ—¶,ç¬¬ä¸€ä¸ªå€¼æŽ§åˆ¶x,ç¬¬äºŒä¸ªå€¼æŽ§åˆ¶y*/ background-position: 10px 40px; /*æ•´ä½“è®¾ç½®*/ background: url('img/123.png') red no-repeat 50px 50px; &#125; /*æ³¨: å®žé™…å¼€å‘ä¸­,èµ„æºå›¾ç‰‡å¤§å°ä¸€å®šè¦ä¸Žæ˜¾ç¤ºåŒºåŸŸç­‰å¤§*/ &lt;/style&gt;&lt;/head&gt;&lt;body&gt; &lt;img src="img/123.png" alt=""&gt; &lt;div class="box"&gt;&lt;/div&gt; &lt;div class="wrap"&gt;&lt;/div&gt;&lt;/body&gt;&lt;/html&gt; ç²¾çµå›¾12345678910111213141516171819202122232425262728293031323334353637383940414243&lt;!DOCTYPE html&gt;&lt;html&gt;&lt;head&gt; &lt;meta charset="UTF-8"&gt; &lt;title&gt;ç²¾çµå›¾&lt;/title&gt; &lt;style type="text/css"&gt; .box &#123; width: 500px; height: 100px; /*height: 300px;*/ border: 5px solid black; &#125; .box &#123; background-image: url('img/bg.png'); background-position: 0 -150px; &#125; .box:hover &#123; cursor: pointer; background-position: 0 -250px; &#125; /*1.æ˜¾ç¤ºåŒºåŸŸä¸€å®šè¦ä¸Žç²¾çµå›¾ç›®æ ‡å°å›¾å¤§å°ä¸€è‡´*/ /*2.é€šè¿‡èƒŒæ™¯å›¾ç‰‡å®šä½æ–¹å¼å°†ç›®æ ‡å°å›¾ç§»è‡³æ˜¾ç¤ºä½ç½®*/ &lt;/style&gt; &lt;style type="text/css"&gt; .lt1 &#123; width: 155px; height: 48px; background: url('img/bg.png') no-repeat 0 0; &#125; .lt1:hover &#123; cursor: pointer; background: url('img/bg.png') no-repeat 0 -48px; &#125; &lt;/style&gt;&lt;/head&gt;&lt;body&gt; &lt;!-- ç²¾çµå›¾: å„ç§å°å›¾æ‹¼æŽ¥èµ·æ¥çš„ä¸€å¼ å¤§å›¾ --&gt; &lt;!-- ä¸ºä»€ä¹ˆä½¿ç”¨ç²¾çµå›¾: å‡å°‘è¯·æ±‚æ¬¡æ•°, é™ä½Žæ€§èƒ½çš„æ¶ˆè€—, äºŒæ¬¡åŠ è½½å›¾ç‰‡èµ„æºæ—¶æžä¸ºè¿…é€Ÿ(ä¸åœ¨éœ€è¦å‘é€è¯·æ±‚) --&gt; &lt;div class="box"&gt;&lt;/div&gt; &lt;div class="lt1"&gt;&lt;/div&gt;&lt;/body&gt;&lt;/html&gt; ç›’æ¨¡åž‹å¸ƒå±€1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556&lt;!DOCTYPE html&gt;&lt;html&gt;&lt;head&gt; &lt;meta charset="UTF-8"&gt; &lt;title&gt;ç›’æ¨¡åž‹å¸ƒå±€ç»†èŠ‚&lt;/title&gt; &lt;style type="text/css"&gt; .sup &#123; width: 500px; height: 100px; background: orange; &#125; .sub &#123; width: 50px; height: 50px; background-color: red; &#125; /*subåœ¨supä¸­ æ°´å¹³å±…ä¸­*/ .sub &#123; /*margin-left: auto; margin-right: auto;*/ margin: 0 auto; &#125; /*åž‚ç›´å±…ä¸­*/ .sub &#123; margin-top: 24px; &#125; /*marginå‘: çˆ¶å­è”åŠ¨*/ /*.box &#123; width: 1px; height: 1px; &#125;*/ /*è§£å†³ä¸€: è®¾ç½®border-top*/ .sup &#123; /*border-top: 1px solid transparent; height: 99px;*/ &#125; /*è§£å†³äºŒ: è®¾ç½®padding-top*/ .sup &#123; padding-top: 1px; height: 99px; &#125; /*marginå‘: ä¸Šå…„å¼Ÿmargin-bottomä¸Žä¸‹å…„å¼Ÿmargin-topé‡åˆ, å–å¤§å€¼*/ /*è§£å†³æ–¹æ¡ˆ: åªè®¾ç½®ä¸€ä¸ª,å»ºè®®è®¾ç½®ä¸‹å…„å¼Ÿmargin-top*/ /*marginå¸ƒå±€: ä¸‹ç›’å­çš„åž‚ç›´èµ·å§‹ä½ç½®å†³å®šäºŽåŒç»“æž„ä¸­ä¸Šç›’å­çš„marginç»“æŸä½ç½®;æ°´å¹³èµ·å§‹ä½ç½®å°±æ˜¯çˆ¶çº§contentæœ€å·¦ä¾§*/ &lt;/style&gt;&lt;/head&gt;&lt;body&gt; &lt;div class="sup"&gt; &lt;!-- &lt;div class="box"&gt;&lt;/div&gt; --&gt; &lt;div class="sub"&gt;&lt;/div&gt; &lt;/div&gt;&lt;/body&gt;&lt;/html&gt;]]></content>
      <categories>
        <category>å‰ç«¯</category>
      </categories>
  </entry>
  <entry>
    <title><![CDATA[å‰ç«¯ï¼ˆä¸‰ï¼‰]]></title>
    <url>%2F2018%2F12%2F06%2F%E5%89%8D%E7%AB%AF%EF%BC%88%E4%B8%89%EF%BC%89%2F</url>
    <content type="text"><![CDATA[å‰ç«¯ä¹‹ CSS é€‰æ‹©å™¨é«˜çº§ä¸Žç›’æ¨¡åž‹å‰è¨€å…ˆå›žé¡¾æ˜¨æ—¥çš„å†…å®¹ï¼Œæ˜¨å¤©è®²äº† w3c çš„æ•´ä¸ªæž¶æž„ï¼Œç”±ç»“æž„å±‚&gt;å¸ƒå±€å±‚&gt;å†…å®¹å±‚ä¸‰éƒ¨åˆ†ç»„æˆï¼Œäº†è§£äº† CSS çš„ä¸‰ç§å¼•å…¥æ–¹å¼ï¼Œè¡Œé—´å¼æœ€ç®€å•ç›´æŽ¥ï¼›å†…è”å¼è§£è€¦åˆï¼Œå¯è¯»æ€§å¼ºï¼›å¤–è”å¼é€‚åˆå›¢é˜Ÿé«˜æ•ˆå¼€å‘ï¼Œè€¦åˆæ€§ä½Žï¼Œå¤ç”¨æ€§å¼ºï¼Œäº†è§£äº†ä¸‰ç§é€‰æ‹©å™¨ï¼Œå¹¶ä¸” id é€‰æ‹©å™¨&gt;ç±»é€‰æ‹©å™¨&gt;æ ‡ç­¾é€‰æ‹©å™¨&gt;é€šé…é€‰æ‹©å™¨ï¼Œè¿˜æœ‰é€šè¿‡å¤šç±»åé€‰æ‹©å™¨æ¥æ“ä½œæ ‡ç­¾ã€‚è¿˜æœ‰å¸¸ç”¨çš„é•¿åº¦å•ä½åŒ…æ‹¬ pxã€cmã€mmã€emã€vwã€inï¼Œé¢œè‰²å±žæ€§æœ‰ rgbã€rgba ç­‰ï¼Œè¿˜æœ‰æ“ä½œæ–‡æœ¬æ ·å¼çš„å±žæ€§è°ƒæ•´å­—ä½“å¤§å°ï¼Œå­—ä½“é£Žæ ¼ï¼Œæ–‡æœ¬å¯¹é½ï¼Œç¼©è¿›ï¼Œå­—é—´è·ï¼Œè¯é—´è·ç­‰ï¼Œå…¶ä¸­ font æ˜¯ç»¼åˆæ€§æè¿°ï¼šfont: é£Žæ ¼ å¤§å°/è¡Œé«˜ å­—æ—ï¼ˆé£Žæ ¼å¯ä»¥çœç•¥ï¼‰ï¼Œæ¯”å¦‚font: 100 normal 60px/200px â€˜STSongâ€™;æœ€åŽè®²çš„å°±æ˜¯ displayï¼Œè¿™æ˜¯ä¸€ä¸ªé‡ç‚¹éš¾ç‚¹ï¼Œdisplay ç›®å‰åªä»‹ç»äº†ä¸‰ä¸ªå±žæ€§å€¼ï¼šinlineï¼šä¸æ”¯æŒå®½é«˜ï¼Œå®½é«˜ç”±æ–‡æœ¬å†…å®¹æ’‘å¼€ï¼Œåªèƒ½åµŒå¥— inline æ ‡ç­¾åŒè¡Œæ˜¾ç¤ºï¼›blockï¼šåƒ p æ ‡ç­¾ï¼Œh æ ‡ç­¾çš„ display å±žæ€§å°±æ˜¯ blockï¼Œæ”¯æŒæ‰€æœ‰çš„ css æ ·å¼ï¼Œé»˜è®¤æœ‰å®½é«˜ï¼ˆè‡ªå®šä¹‰åŽå–è‡ªå®šä¹‰å€¼ï¼‰ï¼Œèƒ½åµŒå¥—æ‰€æœ‰æ ‡ç­¾ï¼Œå¼‚è¡Œæ˜¾ç¤ºï¼›inline-blockï¼šæ”¯æŒæ‰€æœ‰css æ ·å¼ï¼Œé»˜è®¤æ²¡æœ‰å®½é«˜ï¼ˆç”±å†…å®¹æ’‘å¼€ï¼ˆå¯ä»¥è‡ªå®šä¹‰å®½é«˜ï¼‰ï¼‰ä¸å»ºè®®åµŒå¥—ä»»æ„æ ‡ç­¾ï¼ŒåŒè¡Œæ˜¾ç¤ºã€‚ é€‰æ‹©å™¨é«˜çº§ç»„åˆé€‰æ‹©å™¨ç¾¤ç»„é€‰æ‹©å™¨ç¾¤ç»„é€‰æ‹©å™¨å¯ä»¥åŒæ—¶æŽ§åˆ¶å¤šä¸ªé€‰æ‹©å™¨ï¼Œè¯­æ³•ï¼šé€—å·åˆ†éš”ï¼ŒæŽ§åˆ¶å¤šä¸ª1234567891011121314151617&lt;!DOCTYPE html&gt;&lt;html&gt;&lt;head&gt; &lt;meta charset='utf-8'&gt; &lt;title&gt;ç¾¤ç»„é€‰æ‹©å™¨&lt;/title&gt; &lt;style type='text/css'&gt; .d1,div,#a &#123; color: green; &#125; &lt;/style&gt;&lt;/head&gt;&lt;body&gt; &lt;div class='d1'&gt;001&lt;/div&gt; &lt;div&gt;002&lt;/div&gt; &lt;div id='d3'&gt;003&lt;/div&gt;&lt;/body&gt;&lt;/html&gt; ä¸€æ¬¡æ€§æŽ§åˆ¶å¤šä¸ªé€‰æ‹©å™¨ é€‰æ‹©å™¨ä¹‹é—´ä»¥,éš”å¼€ï¼Œæ¯ä¸€ä¸ªé€‰æ‹©å™¨ä½å‡å¯ä»¥ä¸ºä»»æ„åˆæ³•é€‰æ‹©å™¨æˆ–é€‰æ‹©å™¨ç»„åˆ å­ä»£(åŽä»£)é€‰æ‹©å™¨12345678å­ä»£é€‰æ‹©å™¨ç”¨&gt;è¿žæŽ¥body &gt; div &#123; color: red;&#125;åŽä»£é€‰æ‹©å™¨ç”¨ç©ºæ ¼è¿žæŽ¥.sup .sub &#123; color: red;&#125; ä¸€æ¬¡æ€§æŽ§åˆ¶ä¸€ä¸ªé€‰æ‹©å™¨(é€»è¾‘æœ€åŽçš„é‚£ä¸ªé€‰æ‹©å™¨)ï¼Œå‰ç½®ä½çš„é€‰æ‹©å™¨ä¸ºä¿®é¥°æ€§é€‰æ‹©å™¨ æ¯ä¸€ä¸ªé€‰æ‹©å™¨ä½å‡å¯ä»¥ä¸ºä»»æ„åˆæ³•é€‰æ‹©å™¨æˆ–é€‰æ‹©å™¨ç»„åˆ å­ä»£é€‰æ‹©å™¨å¿…é¡»ä¸ºä¸€çº§çˆ¶å­åµŒå¥—å…³ç³»ï¼ŒåŽä»£é€‰æ‹©å™¨å¯ä»¥ä¸ºä¸€çº§åŠå¤šçº§çˆ¶å­åµŒå¥—å…³ç³» ç›¸é‚»(å…„å¼Ÿ)é€‰æ‹©å™¨12345678ç›¸é‚»é€‰æ‹©å™¨ç”¨+è¿žæŽ¥.d1 + .d2 &#123; color: red;&#125;å…„å¼Ÿé€‰æ‹©å™¨ç”¨~è¿žæŽ¥.d1 ~ .d3 &#123; color: red;&#125; ä¸€æ¬¡æ€§æŽ§åˆ¶ä¸€ä¸ªé€‰æ‹©å™¨(é€»è¾‘æœ€åŽçš„é‚£ä¸ªé€‰æ‹©å™¨)ï¼Œå‰ç½®ä½çš„é€‰æ‹©å™¨ä¸ºä¿®é¥°æ€§é€‰æ‹©å™¨ æ¯ä¸€ä¸ªé€‰æ‹©å™¨ä½å‡å¯ä»¥ä¸ºä»»æ„åˆæ³•é€‰æ‹©å™¨æˆ–é€‰æ‹©å™¨ç»„åˆ ç›¸é‚»é€‰æ‹©å™¨å¿…é¡»ä¸ºç›´æŽ¥ç›¸é‚»å…³ç³»ï¼Œå…„å¼Ÿé€‰æ‹©å™¨å¯ä»¥ä¸ºç›´æŽ¥ç›¸é‚»æˆ–é—´æŽ¥ç›¸é‚»å…³ç³» äº¤é›†é€‰æ‹©å™¨123456789&lt;div class="d" id="dd"&gt;&lt;/div&gt;div.d#dd &#123; color: red;&#125;&lt;div class="d1 d2 d3"&gt;&lt;/div&gt;.d1.d2.d3 &#123; color: red;&#125; ç»„åˆé€‰æ‹©å™¨ä¼˜å…ˆçº§ ç»„åˆé€‰æ‹©å™¨ä¼˜å…ˆçº§ä¸Žæƒå€¼ç›¸å…³ï¼Œæƒå€¼ä¸ºæƒé‡å’Œ æƒé‡å¯¹åº”å…³ç³» é€‰æ‹©å™¨ æƒé‡ é€šé… 1 æ ‡ç­¾ 10 ç±»ã€å±žæ€§ 100 id 1000 !important 10000 é€‰æ‹©å™¨æƒå€¼æ¯”è¾ƒï¼Œåªå…³å¿ƒæƒé‡å’Œï¼Œä¸æ›´æ–°é€‰æ‹©å™¨ä½ç½® ä¸åŒçº§åˆ«çš„é€‰æ‹©å™¨é—´ä¸å…·å¤‡å¯æ¯”æ€§ï¼š1ä¸ªç±»é€‰æ‹©å™¨ä¼˜å…ˆçº§é«˜äºŽnä¸ªæ ‡ç­¾é€‰æ‹©å™¨çš„ä»»æ„ç»„åˆ å±žæ€§é€‰æ‹©å™¨ [attr]ï¼šåŒ¹é…æ‹¥æœ‰attrå±žæ€§çš„æ ‡ç­¾ [attr=val]ï¼šåŒ¹é…æ‹¥æœ‰attrå±žæ€§ï¼Œå±žæ€§å€¼ä¸ºvalçš„æ ‡ç­¾ [attr^=val]ï¼šåŒ¹é…æ‹¥æœ‰attrå±žæ€§ï¼Œå±žæ€§å€¼ä»¥valå¼€å¤´çš„æ ‡ç­¾ [attr$=val]ï¼šåŒ¹é…æ‹¥æœ‰attrå±žæ€§ï¼Œå±žæ€§å€¼ä»¥valç»“å°¾çš„æ ‡ç­¾ [attr*=val]ï¼šåŒ¹é…æ‹¥æœ‰attrå±žæ€§ï¼Œå±žæ€§å€¼åŒ…å«valçš„æ ‡ç­¾ v_hintï¼šå±žæ€§é€‰æ‹©å™¨æƒé‡ç­‰ä»·äºŽç±»v_testï¼šæŽŒæ¡æ‰€æœ‰é€‰æ‹©å™¨ï¼Œå¹¶ç†ŸçŸ¥é€‰æ‹©å™¨ä¼˜å…ˆçº§ä¼ªç±»é€‰æ‹©å™¨1ã€aæ ‡ç­¾å››å¤§ä¼ªç±» :linkï¼šæœªè®¿é—®çŠ¶æ€ :hoverï¼šæ‚¬æµ®çŠ¶æ€ :activeï¼šæ´»è·ƒçŠ¶æ€ :visitedï¼šå·²è®¿é—®çŠ¶æ€ 2ã€å†…å®¹ä¼ªç±» :beforeï¼šå†…å®¹ä¹‹å‰ :afterï¼šå†…å®¹ä¹‹åŽ 123:before, :after &#123; content: "ctn";&#125; 3ã€ç´¢å¼•ä¼ªç±» :nth-child(n)ï¼šä½ç½®ä¼˜å…ˆï¼Œå†åŒ¹é…ç±»åž‹ :nth-of-type(n)ï¼šç±»åž‹ä¼˜å…ˆï¼Œå†åŒ¹é…ä½ç½® v_hintï¼šå€¼å¯ä»¥ä¸ºä½ç½®æ•°ï¼Œä¹Ÿå¯ä»¥ä¸º2nã€3nâ€¦ï¼Œä»£è¡¨2çš„å€æ•°ï¼Œ3çš„å€æ•°ï¼Œä¸”ä½ç½®æ•°ä»Ž1å¼€å§‹4ã€å–åä¼ªç±» :not(selector)ï¼šå¯¹selectorè¿›è¡Œå–å ##ç›’æ¨¡åž‹ ###ç›’æ¨¡åž‹æ¦‚å¿µ å¹¿ä¹‰ç›’æ¨¡åž‹ï¼šæ–‡æ¡£ä¸­æ‰€æœ‰åŠŸèƒ½æ€§åŠå†…å®¹æ€§æ ‡ç­¾ï¼ŒåŠæ–‡æ¡£ä¸­æ‰€æœ‰æ˜¾ç¤ºæ€§æ ‡ç­¾ ä¾ ä¹‰ç›’æ¨¡åž‹ï¼šæ–‡æ¡£ä¸­ä»¥å—çº§å½¢å¼å­˜åœ¨çš„æ ‡ç­¾ï¼ˆå—çº§æ ‡ç­¾æ‹¥æœ‰ç›’æ¨¡åž‹100%ç‰¹æ€§ä¸”æœ€å¸¸ç”¨ï¼‰ ç›’æ¨¡åž‹ç»„æˆï¼šmargin + border + padding + content v_hintï¼šcontent = width x height###ç›’æ¨¡åž‹æˆå‘˜ä»‹ç» 1ã€content é€šè¿‡è®¾ç½®widthä¸Žheightæ¥è§„å®šcontent å—çº§æ ‡ç­¾å¯ä»¥è®¾ç½®è‡ªèº«å®½é«˜ï¼Œé»˜è®¤å®½ä¸ºçˆ¶çº§å®½(width=auto)ã€é«˜ä¸º0ï¼Œé«˜åº¦å¯ä»¥ç”±å†…å®¹å†³å®š å†…è”æ ‡ç­¾ä¸å¯ä»¥è®¾ç½®è‡ªèº«å®½é«˜ï¼Œé»˜è®¤å®½é«˜å‡ä¸º0ï¼Œå®½é«˜ä¸€å®šç”±å†…å®¹å†³å®š 2ã€border border(è¾¹æ¡†)ç”±border-width(å®½åº¦)ã€border-color(é¢œè‰²)ã€border-style(é£Žæ ¼)ä¸‰éƒ¨åˆ†ç»„æˆ borderæˆå‘˜ï¼šborder-leftã€border-rightã€border-topã€border-bottom border-widthæˆå‘˜ï¼šborder-left-widthã€border-right-widthã€border-top-widthã€border-bottom-width border-coloræˆå‘˜ï¼šborder-left-colorã€border-right-colorã€border-top-colorã€border-bottom-color border-styleæˆå‘˜ï¼šborder-left-styleã€border-right-styleã€border-top-styleã€border-bottom-style é£Žæ ¼ è§£é‡Š solid å®žçº¿ dashed è™šçº¿ dotted ç‚¹çŠ¶çº¿ double åŒå®žçº¿ groove æ§½çŠ¶çº¿ ridge è„Šçº¿ inset å†…åµŒæ•ˆæžœçº¿ outset å¤–å‡¸æ•ˆæžœçº¿ v_hintï¼šborderæ»¡è¶³æ•´ä½“è®¾ç½®è¯­æ³•ï¼Œegï¼šborder: 1px solid red;3ã€padding paddingæˆå‘˜ï¼špadding-leftã€padding-rightã€padding-topã€padding-bottom paddingæ•´ä½“è®¾ç½® å€¼å¾—ä¸ªæ•° æ–¹ä½ 1 ä¸Šä¸‹å·¦å³ 2 ä¸Šä¸‹ \ å·¦å³ 3 ä¸Š \ å·¦å³ \ ä¸‹ 4 ä¸Š \ å³ \ ä¸‹ \ å·¦ 4ã€margin marginæˆå‘˜ï¼šmargin-leftã€margin-rightã€margin-topã€margin-bottom marginæ•´ä½“è®¾ç½® èµ‹å€¼ä¸ªæ•° æ–¹ä½ 1 ä¸Šä¸‹å·¦å³ 2 ä¸Šä¸‹ \ å·¦å³ 3 ä¸Š \ å·¦å³ \ ä¸‹ 4 ä¸Š \ å³ \ ä¸‹ \ å·¦ ###è¾¹ç•Œåœ†è§’ border-radius border-radiusæˆå‘˜ æˆå‘˜ è§£é‡Š border-top-left-radius å·¦ä¸Š æ–¹ä½ border-top-right-radius å³ä¸Š æ–¹ä½ border-bottom-left-radius å·¦ä¸‹ æ–¹ä½ border-bottom-right-radius å³ä¸‹ æ–¹ä½ å•æ–¹ä½è®¾ç½® èµ‹å€¼ä¸ªæ•°(å€¼ç±»åž‹ï¼šé•¿åº¦ \ ç™¾åˆ†æ¯”) è§£é‡Š 1 æ¨ªçºµ 2 æ¨ª \ çºµ æŒ‰è§’æ•´ä½“è®¾ç½® èµ‹å€¼ä¸ªæ•°(å€¼ç±»åž‹ï¼šé•¿åº¦ \ ç™¾åˆ†æ¯”) è§£é‡Š 1 å·¦ä¸Š å³ä¸Š å·¦ä¸‹ å³ä¸‹ 2 å·¦ä¸Š å³ä¸‹ \ å³ä¸Š å·¦ä¸‹ 3 å·¦ä¸Š \ å³ä¸Š å·¦ä¸‹ \ å³ä¸‹ 4 å·¦ä¸Š \ å³ä¸Š \ å³ä¸‹ \ å·¦ä¸‹ åˆ†å‘æ•´ä½“è®¾ç½® æ ¼å¼ è§£é‡Š 1 / 1 æ¨ªå‘ \ çºµå‘ ###å…¶ä»–ç›¸å…³å±žæ€§ max|min-width|height overflow å€¼ æè¿° visible é»˜è®¤å€¼ã€‚å†…å®¹ä¸ä¼šè¢«ä¿®å‰ªï¼Œä¼šå‘ˆçŽ°åœ¨å…ƒç´ æ¡†ä¹‹å¤–ã€‚ hidden å†…å®¹ä¼šè¢«ä¿®å‰ªï¼Œå¹¶ä¸”å…¶ä½™å†…å®¹æ˜¯ä¸å¯è§çš„ã€‚ scroll å†…å®¹ä¼šè¢«ä¿®å‰ªï¼Œä½†æ˜¯æµè§ˆå™¨ä¼šæ˜¾ç¤ºæ»šåŠ¨æ¡ä»¥ä¾¿æŸ¥çœ‹å…¶ä½™çš„å†…å®¹ã€‚ auto å¦‚æžœå†…å®¹è¢«ä¿®å‰ªï¼Œåˆ™æµè§ˆå™¨ä¼šæ˜¾ç¤ºæ»šåŠ¨æ¡ä»¥ä¾¿æŸ¥çœ‹å…¶ä½™çš„å†…å®¹ã€‚ inherit è§„å®šåº”è¯¥ä»Žçˆ¶å…ƒç´ ç»§æ‰¿ overflow å±žæ€§çš„å€¼ã€‚ display å€¼ æè¿° inline å†…è” block å—çº§ inline-block å†…è”å—]]></content>
      <categories>
        <category>CSS</category>
      </categories>
  </entry>
  <entry>
    <title><![CDATA[å‰ç«¯ï¼ˆäºŒï¼‰ä¹‹ CSS]]></title>
    <url>%2F2018%2F12%2F05%2F%E5%89%8D%E7%AB%AF%EF%BC%88%E4%BA%8C%EF%BC%89%E4%B9%8B-CSS%2F</url>
    <content type="text"><![CDATA[å‰ç«¯ä¹‹ CSSå‰è¨€æ˜¨å¤©å­¦ä¹ äº†æ ‡è®°å¼è¯­è¨€ï¼Œä¹Ÿå°±æ˜¯æ— é€»è¾‘è¯­è¨€ã€‚äº†è§£äº†ç½‘é¡µçš„éª¨æž¶æ˜¯ä»€ä¹ˆæž„æˆçš„ï¼Œäº†è§£äº†å¸¸ç”¨æ ‡ç­¾ï¼Œä¸¤ä¸ªæŒ‡ä»¤ä»¥åŠè½¬ä¹‰å­—ç¬¦ï¼›å…¶ä¸­æ ‡ç­¾å¯ä»¥åˆ†ä¸ºä¸¤å¤§ç±»ï¼š ä¸€ç±»æ˜¯æ ¹æ®æ ‡ç­¾å†…å®¹å¯ä»¥åˆ†ç±»å•åŒæ ‡ç­¾ï¼Œå•æ ‡ç­¾æŒ‡çš„æ˜¯ä¸éœ€è¦å­—å†…å®¹ï¼Œæ ‡ç­¾å°±å¯ä»¥ä»£è¡¨æ‰€æœ‰åŠŸèƒ½ï¼›åŒæ ‡ç­¾ï¼šä¸»å†…å®¹å¯ä»¥åŒ…å«æ–‡æœ¬ï¼Œä¹Ÿå¯ä»¥åŒ…å«å­æ ‡ç­¾ï¼ˆå…·æœ‰ä½œç”¨åŸŸï¼‰ï¼› å¦ä¸€ç±»æ˜¯æ ¹æ®æ ‡ç­¾æ˜¾ç¤ºçš„æ•ˆæžœå¯ä»¥åˆ†ä¸ºè¡Œå—æ ‡ç­¾ï¼Œå—æ ‡ç­¾ä¼šæ¢è¡Œæ˜¾ç¤ºï¼›è¡Œæ ‡ç­¾ä¼šåŒè¡Œæ˜¾ç¤ºã€‚ ä»Šå¤©å­¦ä¹  CSSï¼Œè¢«ç§°ä¹‹ä¸ºç½‘é¡µçš„åŒ–å¦†å¸ˆã€‚ ä»€ä¹ˆæ˜¯ CSSCSS å…¨ç§°ä¸ºçº§è”æ ·å¼è¡¨ï¼ˆCascading Style Sheetï¼‰ï¼Œä¸»è¦è´Ÿè´£é¡µé¢çš„é£Žæ ¼è®¾è®¡ï¼Œæ ·å¼ã€ç¾Žè§‚ã€‚é€šå¸¸ä»¥.css åŽç¼€ç»“å°¾ã€‚ æ ‡è®°è¯­è¨€ å’Œ html ä¸€æ ·æ˜¯éžç¼–ç¨‹è¯­è¨€ï¼Œä¸å…·å¤‡è¯­è¨€çš„ç¨‹åºé€»è¾‘ã€‚ css ä¸ºå‰ç«¯é¡µé¢çš„æ ·å¼ï¼Œç”±é€‰æ‹©å™¨ã€ä½œç”¨åŸŸä¸Žæ ·å¼å—ç»„æˆã€‚ é€‰æ‹©å™¨ï¼šç”±æ ‡ç­¾ã€ç±»ã€id å•ç‹¬æˆ–ç»„åˆå‡ºçŽ°ï¼› ä½œç”¨åŸŸï¼šä¸€ç»„å¤§æ‹¬å·åŒ…å«çš„åŒºåŸŸï¼› æ ·å¼å—ï¼šæ»¡è¶³ css è¿žæŽ¥è¯­æ³•çš„ä¼—å¤šæ ·å¼ã€‚ css å‘å±•å²ä»£è¡¨ç‰ˆæœ¬ 12345â‘  1990å¹´ï¼ŒTim Berners-Leeå’ŒRobert Cailliauå…±åŒå‘æ˜Žäº†Webã€‚1994å¹´ï¼ŒWebçœŸæ­£èµ°å‡ºå®žéªŒå®¤ã€‚â‘¡ 1994å¹´å“ˆå¤Â·åˆ©æå‡ºäº†CSSçš„æœ€åˆå»ºè®®ã€‚è€Œå½“æ—¶ä¼¯ç‰¹Â·æ³¢æ–¯ï¼ˆBert Bosï¼‰æ­£åœ¨è®¾è®¡ä¸€ä¸ªåä¸ºArgoçš„æµè§ˆå™¨ï¼ŒäºŽæ˜¯ä»–ä»¬å†³å®šä¸€èµ·è®¾è®¡CSSã€‚â‘¢ å“ˆå¤äºŽ1994å¹´åœ¨èŠåŠ å“¥çš„ä¸€æ¬¡ä¼šè®®ä¸Šç¬¬ä¸€æ¬¡æå‡ºäº†CSSçš„å»ºè®®ï¼Œ1995å¹´çš„wwwç½‘ç»œä¼šè®®ä¸ŠCSSåˆä¸€æ¬¡è¢«æå‡ºï¼Œåšæ–¯æ¼”ç¤ºäº†Argoæµè§ˆå™¨æ”¯æŒCSSçš„ä¾‹å­ï¼Œå“ˆè‚¯ä¹Ÿå±•ç¤ºäº†æ”¯æŒCSSçš„Arenaæµè§ˆå™¨ã€‚â‘£ 1997å¹´åˆï¼ŒW3Cç»„ç»‡è´Ÿè´£CSSçš„å·¥ä½œç»„å¼€å§‹è®¨è®ºç¬¬ä¸€ç‰ˆä¸­æ²¡æœ‰æ¶‰åŠåˆ°çš„é—®é¢˜ã€‚å…¶è®¨è®ºç»“æžœç»„æˆäº†1998å¹´5æœˆå‡ºç‰ˆçš„CSSè§„èŒƒç¬¬äºŒç‰ˆã€‚â‘¤ CSS3æ˜¯CSSï¼ˆå±‚å æ ·å¼è¡¨ï¼‰æŠ€æœ¯çš„å‡çº§ç‰ˆæœ¬ï¼ŒäºŽ1999å¹´å¼€å§‹åˆ¶è®¢ï¼Œ2001å¹´5æœˆ23æ—¥W3Cå®Œæˆäº†CSS3çš„å·¥ä½œè‰æ¡ˆï¼Œä¸»è¦åŒ…æ‹¬ç›’å­æ¨¡åž‹ã€åˆ—è¡¨æ¨¡å—ã€è¶…é“¾æŽ¥æ–¹å¼ã€è¯­è¨€æ¨¡å—ã€èƒŒæ™¯å’Œè¾¹æ¡†ã€æ–‡å­—ç‰¹æ•ˆã€å¤šæ å¸ƒå±€ç­‰æ¨¡å—ã€‚ CSS ä¹¦å†™è¯­æ³•css ç”±ä¸‰éƒ¨åˆ†ç»„æˆï¼šé€‰æ‹©å™¨ã€ä½œç”¨åŸŸä¸Žæ ·å¼å—ã€‚ 12345678910é€‰æ‹©å™¨ &#123; æ ·å¼1: å€¼1; æ ·å¼2: å€¼2;&#125;h3 &#123; width: 100px; height: 100px; background-color: yellowgreen&#125; CSS çš„ä¸‰ç§å¼•å…¥æ–¹å¼ç¬¬ä¸€ç§å¼•å…¥æ–¹å¼ï¼šè¡Œé—´å¼ç‰¹ç‚¹ï¼š ä¹¦å†™åœ¨æ ‡ç­¾çš„ styleå…¨å±€å±žæ€§ä¸­ï¼› æ ·å¼æ ¼å¼ä¸º=ã€‹keyï¼švalueï¼ˆå•ä½ï¼‰ï¼› ä»¥åˆ†å·éš”å¼€å¤šä¸ªæ ·å¼ï¼› æœ€åŽçš„åˆ†å·å¯ä»¥çœç•¥ 1234567891011&lt;!DOCTYPE html&gt;&lt;html&gt;&lt;head&gt; &lt;meta charset="UTF-8"&gt; &lt;title&gt;css ä¸‰ç§å¼•å…¥ç¬¬ä¸€ç§å¼•å…¥&lt;/title&gt;&lt;/head&gt;&lt;body&gt; &lt;!-- é»˜è®¤æœ‰å®½ é«˜ä¸º0 èƒŒæ™¯é¢œè‰²é»˜è®¤ä¸ºé€æ˜Ž --&gt; &lt;p style="width: 200px; height: 200px; background-color: green"&gt;css ç¬¬ä¸€ç§å¼•å…¥è¡Œé—´å¼&lt;/p&gt;&lt;/body&gt;&lt;/html&gt; ç¬¬äºŒç§å¼•å…¥æ–¹å¼ï¼šå†…è”å¼ç‰¹ç‚¹ï¼š æ ·å¼ä¹¦å†™åœ¨ head æ ‡ç­¾å†…çš„ style å±žæ€§å†…ï¼› æ ·å¼æ ¼å¼ä¸º =&gt; é€‰æ‹©å™¨ï¼šp|ä½œç”¨åŸŸ {}|æ ·å¼å—ï¼› ä»¥åˆ†å·éš”å¼€å¤šä¸ªæ ·å¼ï¼› æœ€åŽçš„åˆ†å·å¯ä»¥çœç•¥ 1234567891011121314151617181920&lt;!DOCTYPE html&gt;&lt;html&gt; &lt;head&gt; &lt;meta charset='utf-8' /&gt; &lt;title&gt;css ä¸‰ç§å¼•å…¥ç¬¬äºŒç§å¼•å…¥&lt;/title&gt; &lt;!-- å†…è”å¼ --&gt; &lt;style type='text/css'&gt; p &#123; width: 150px; height: 150px; background-color: red &#125; &lt;/style&gt; &lt;/head&gt; &lt;body&gt; &lt;p&gt; css ç¬¬äºŒç§å¼•å…¥å†…è”å¼å¼•å…¥ &lt;/p&gt; &lt;/body&gt;&lt;/html&gt; ç¬¬ä¸‰ç§å¼•å…¥æ–¹å¼ï¼šå¤–è”å¼ç‰¹ç‚¹ï¼š ä¹¦å†™åœ¨å¤–éƒ¨çš„ cssæ–‡ä»¶ä¸­ï¼Œä¸éœ€è¦ä¹¦å†™ä»»ä½•æ ‡ç­¾ï¼› å…¶ä»–åŒä¸Š 1234567/*css æ–‡ä»¶ä¹¦å†™ css è¯­æ³•*//*å¤–éƒ¨ css æ–‡ä»¶ 00.css*/h3 &#123; width: 100px; height: 100px; background-color: yellowgreen&#125; 1234567891011&lt;!DOCTYPE html&gt;&lt;html&gt; &lt;head&gt; &lt;meta charset='utf-8'/&gt; &lt;title&gt;ç¬¬ä¸‰ç§å¼•å…¥å¤–è”å¼å¼•å…¥&lt;/title&gt; &lt;link rel='stylesheet' href='./00.css'&gt; &lt;h3&gt; ç¬¬ä¸‰ç§å¼•å…¥å¤–è”å¼å¼•å…¥ &lt;/h3&gt;&lt;/head&gt; &lt;/html&gt; CSS ä¸‰ç§å¼•å…¥æ–¹å¼çš„ä¼˜å…ˆçº§ä¸‰ç§å¯ä»¥åŒæ—¶å­˜åœ¨å¹¶ååŒå®Œæ•´å¸ƒå±€ï¼Œä¸‰ç§å¼•å…¥æ–¹å¼ä¹‹é—´æ²¡æœ‰ä¼˜å…ˆçº§ä¹‹è¯´ï¼Œå“ªç§å¼•å…¥æ–¹å¼åœ¨é€»è¾‘ä¸‹æ–¹ï¼ˆåŽè§£é‡Šçš„ï¼‰è°å°±èµ·ä½œç”¨ï¼ˆæ ·å¼è¦†ç›–ï¼‰ã€‚å¹¶ä¸”è¡Œé—´å¼ä¸€å®šæ˜¯é€»è¾‘æœ€ä¸‹æ–¹çš„ã€‚ å½“ä¸‰ç§å¼•å…¥æ–¹å¼åŒæ—¶å­˜åœ¨ä¸”æ“ä½œåŒä¸€å¯¹è±¡çš„åŒä¸€å±žæ€§æ—¶ï¼Œæ‰ä¼šå‡ºçŽ°å†²çªï¼Œæœ€ç»ˆèµ·ä½œç”¨çš„å°±æ˜¯ä¼˜å…ˆçº§é«˜çš„ã€‚ 12345/*o4.css*/div &#123; height: 200px; color: brown;&#125; 1234567891011121314151617181920212223242526&lt;!DOCTYPE html&gt;&lt;html lang="zh"&gt;&lt;head&gt; &lt;meta charset="UTF-8"&gt; &lt;title&gt;ä¸‰ç§å¼•å…¥çš„ä¼˜å…ˆçº§&lt;/title&gt; &lt;!-- ä¸‰ç§å¯ä»¥åŒæ—¶å­˜åœ¨ï¼ŒååŒå®Œæ•´å¸ƒå±€ --&gt; &lt;!-- ä¸‰ç§ä¹‹é—´æ²¡æœ‰ä¼˜å…ˆçº§ä¹‹è¯´ è°åœ¨é€»è¾‘ä¸‹æ–¹ï¼ˆåŽè§£é‡Šçš„ï¼‰è°å°±èµ·ä½œç”¨ï¼ˆæ ·å¼è¦†ç›–ï¼‰ --&gt; &lt;!-- è¡Œé—´å¼ä¸€å®šæ˜¯é€»è¾‘æœ€ä¸‹æ–¹çš„ --&gt; &lt;!-- å†…è” --&gt; &lt;style type="text/css"&gt; div &#123; width: 200px; color: pink; /*height: 200px;*/ &#125; &lt;/style&gt; &lt;!-- å¤–è” --&gt; &lt;link rel="stylesheet" href="./04.css"&gt;&lt;/head&gt;&lt;body&gt; &lt;!-- ä¼˜å…ˆçº§ï¼šå¤§å®¶åŒæ—¶å­˜åœ¨ä¸”æ“ä½œç»Ÿä¸€å¯¹è±¡åŒä¸€å±žæ€§ï¼Œæ‰ä¼šå‡ºçŽ°å†²çªï¼Œæœ€ç»ˆèµ·ä½œç”¨çš„å°±æ˜¯ä¼˜å…ˆçº§é«˜çš„ --&gt; &lt;!-- è¡Œé—´ --&gt; &lt;div style="background-color: cyan; color: orange"&gt;ä½ æ˜¯ä¸ªå¥½äºº&lt;/div&gt;&lt;/body&gt;&lt;/html&gt; åŸºç¡€é€‰æ‹©å™¨123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566&lt;!DOCTYPE html&gt;&lt;html lang="zh"&gt;&lt;head&gt; &lt;meta charset="UTF-8"&gt; &lt;title&gt;åŸºç¡€é€‰æ‹©å™¨&lt;/title&gt; &lt;style type="text/css"&gt; /* div =&gt; æ ‡ç­¾å =ã€‹ æ ‡ç­¾é€‰æ‹©å™¨ï¼šå¼€å‘è¿‡ç¨‹ä¸­å°½å¯èƒ½å°‘çš„è¿ç”¨ï¼Œè¿ç”¨èŒƒå›´ä¸ºæœ€å†…å±‚çš„æ˜¾ç¤ºå±‚ */ /* dd =&gt; class å =ã€‹ ç±»é€‰æ‹©å™¨ï¼šå¸ƒå±€çš„ä¸»åŠ›å†› */ /* d =&gt; idå =ã€‹ id é€‰æ‹©å™¨ï¼šä¸€å®šå”¯ä¸€çš„ */ /* * =&gt; é€šé…é€‰æ‹©å™¨ =ã€‹æŽ§åˆ¶ html,body,body ä¸‹æ‰€æœ‰ç”¨äºŽæ˜¾ç¤ºå†…å®¹çš„æ ‡ç­¾ï¼ˆhead ä¸å‚ä¸Žæ˜¾ç¤ºï¼‰*/ * &#123; border: 1px solid black; &#125; /* ä¸‰ç§é€‰æ‹©å™¨æœ‰ä¼˜å…ˆçº§*/ div &#123; width: 200px; height: 200px; background-color: red; &#125; /* ç±»é€‰æ‹©å™¨ï¼š .ç±»å&#123;&#125; */ .dd &#123; background-color: orange; &#125; /* id é€‰æ‹©å™¨ï¼š #idå &#123;&#125;*/ #d &#123; background-color: green; &#125; /* ä¼˜å…ˆçº§ï¼šid é€‰æ‹©å™¨ &gt; ç±»é€‰æ‹©å™¨ &gt; æ ‡ç­¾é€‰æ‹©å™¨ &gt; é€šé…é€‰æ‹©å™¨*/ /* ä½œç”¨èŒƒå›´è¶Šç²¾ç¡®ï¼Œä¼˜å…ˆçº§è¶Šé«˜*/ &lt;/style&gt; &lt;style type="text/css"&gt; .div &#123; width: 100px; height: 100px; background-color: orange &#125; /* å¤šç±»åï¼šç±»åä¸Žç±»åä¹‹é—´ä¸èƒ½æ‹¥æœ‰ä»»ä½•ç¬¦å·éš”æ–­ */ .red.div&#123; &#125; .div.red &#123; background-color: red; &#125; &lt;/style&gt;&lt;/head&gt;&lt;body&gt; &lt;!-- ***** --&gt; &lt;!-- é€‰æ‹©å™¨ï¼šcss é€‰æ‹© html æ ‡ç­¾çš„ä¸€ä¸ªå·¥å…· =ã€‹å°† html ä¸Ž css å»ºç«‹èµ·è”ç³»ï¼Œé‚£ä¹ˆ css å°±å¯ä»¥æŽ§åˆ¶ htmlæ ·å¼ --&gt; &lt;!-- é€‰æ‹©å™¨å°±æ˜¯ç»™ html æ ‡ç­¾èµ·åå­— --&gt; &lt;div&gt;&lt;/div&gt; &lt;div class="dd"&gt;&lt;/div&gt; &lt;div class="dd" id="d"&gt;&lt;/div&gt; &lt;div class="div red"&gt;&lt;/div&gt; &lt;div class="div"&gt;&lt;/div&gt;&lt;/body&gt;&lt;/html&gt; é•¿åº¦å•ä½ä¸Žé¢œè‰²123456789101112131415161718192021&lt;!DOCTYPE html&gt;&lt;html&gt;&lt;head&gt; &lt;meta charset="UTF-8"&gt; &lt;title&gt;é•¿åº¦å•ä½ä¸Žé¢œè‰²&lt;/title&gt; &lt;style type="text/css"&gt; .div &#123; /*px mm cm in em vw vh*/ width: 200px; height: 200px; /*é¢œè‰²å•è¯ | rgb() 0~255 | rgba | #å…­ä¸ªåå…­è¿›åˆ¶æ•°*/ background-color: rgba(255,0,255,0.5); /* #abc == #AABBCC*/ background-color: #00FFFF &#125; &lt;/style&gt;&lt;/head&gt;&lt;body&gt; &lt;div class="div"&gt;&lt;/div&gt;&lt;/body&gt;&lt;/html&gt; æ–‡æœ¬æ ·å¼æ“ä½œ123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384&lt;!DOCTYPE html&gt;&lt;html&gt;&lt;head&gt; &lt;meta charset="UTF-8"&gt; &lt;title&gt;æ–‡æœ¬æ ·å¼æ“ä½œ&lt;/title&gt; &lt;style type="text/css"&gt; .box &#123; width: 200px; height: 200px; background-color: orange &#125; /*å­—ä½“æ ·å¼*/ .box &#123; width: 400px; /*å­—æ—*/ /* STSong ä½œä¸ºé¦–é€‰å­—ä½“ï¼Œå¾®è½¯é›…é»‘ä½œä¸ºå¤‡ç”¨å­—ä½“*/ font-family: 'STSong','å¾®è½¯é›…é»‘'; &#125; .box.uu &#123; /* å­—ä½“å¤§å°*/ font-size: 40px; /*å­—é‡*/ font-weight: 100; /*é£Žæ ¼*/ /*noneæ¸…é™¤ç³»ç»Ÿå­—ä½“é£Žæ ¼*/ /*font-style: none;*/ font-style: italic; /*è¡Œé«˜ï¼šæŸä¸€æ®µæ–‡æœ¬åœ¨è‡ªèº«è¡Œé«˜ä¸­å¯ä»¥åž‚ç›´å±…ä¸­æ˜¾ç¤º=ã€‹æ–‡æœ¬åž‚ç›´å±…ä¸­*/ line-height: 200px; /*å­—ä½“æ•´ä½“è®¾ç½®*/ /*å­—é‡ é£Žæ ¼ å¤§å°/è¡Œé«˜ å­—æ— ï¼ˆé£Žæ ¼å¯ä»¥çœç•¥ï¼‰*/ font: 100 normal 60px/200px 'STSong'; /*&#125; i &#123; Normal æ¸…é™¤ç³»ç»Ÿå­—ä½“é£Žæ ¼ font-style: normal; &#125;*/ &lt;/style&gt; &lt;style type="text/css"&gt; .wrap &#123; width: 200px; height: 200px; background-color: yellow; &#125; .w1 &#123; /*æ¢è¡Œæ–¹å¼*/ word-break: break-all; &#125; .w2 &#123; width: 400px; /*æ°´å¹³å±…ä¸­ï¼šleft|center|right*/ /*text-align: center;*/ /*å­—åˆ’çº¿ ä¸­ä¸‹ä¸Šåˆ’çº¿*/ text-decoration: line-through; text-decoration: underline; text-decoration: overline; /*å­—é—´è·*/ letter-spacing: 5px; /*è¯é—´è·*/ word-spacing: 5px; /*ç¼©è¿›*/ /*1em ç›¸å½“äºŽä¸€ä¸ªå­—çš„å®½åº¦*/ text-indent: 2em; &#125; a &#123; /*å–æ¶ˆåˆ’çº¿*/ text-decoration: none &#125; &lt;/style&gt;&lt;/head&gt;&lt;body&gt; &lt;div class="box uu"&gt;[æ™®é€šæ–‡æœ¬]&lt;/div&gt; &lt;i&gt;içš„æ–‡æœ¬&lt;/i&gt; &lt;div class="wrap"&gt; ä¸€äºŒä¸‰å››äº”ä¸€äºŒä¸‰å››äº”ä¸€äºŒä¸‰å››äº”ä¸€äºŒä¸‰å››äº”ä¸€äºŒä¸‰å››äº”ä¸€äºŒä¸‰å››äº”ä¸€äºŒä¸‰å››äº”ä¸€äºŒä¸‰å››äº”ä¸€äºŒä¸‰å››äº”ä¸€äºŒä¸‰å››äº”ä¸€äºŒä¸‰å››äº”ä¸€äºŒä¸‰å››äº”&lt;/div&gt; &lt;hr&gt; &lt;div class="wrap w1"&gt; ä¸€äºŒä¸‰å››äº”ä¸€äºŒä¸‰å››äº”ä¸€äºŒä¸‰å››äº”ä¸€äºŒä¸‰å››äº”ä¸€äºŒä¸‰å››äº”ä¸€äºŒä¸‰å››äº”ä¸€äºŒä¸‰å››äº”ä¸€äºŒä¸‰å››äº”ä¸€äºŒä¸‰å››äº”ä¸€äºŒä¸‰å››äº”ä¸€äºŒä¸‰å››äº”ä¸€äºŒä¸‰å››äº”ä¸€äºŒä¸‰å››äº”ä¸€äºŒä¸‰å››äº”ä¸€äºŒä¸‰å››äº”ä¸€äºŒ&lt;/div&gt; &lt;hr&gt; &lt;div class="wrap w2"&gt;hello world hello world&lt;/div&gt; &lt;a href="sfjsflj"&gt;aaa&lt;/a&gt;&lt;/body&gt;&lt;/html&gt; display1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950&lt;!DOCTYPE html&gt;&lt;html&gt;&lt;head&gt; &lt;meta charset="UTF-8"&gt; &lt;title&gt;display&lt;/title&gt; &lt;style&gt; .box &#123; width: 80px; height: 40px; background-color: orange &#125; .box &#123; /*block: å—çº§æ ‡ç­¾ï¼Œç‹¬å ä¸€è¡Œï¼Œæ”¯æŒæ‰€æœ‰ css æ ·å¼*/ /*display: block;*/ /*inlineï¼šå†…è”ï¼ˆè¡Œçº§ï¼‰æ ‡ç­¾ï¼ŒåŒè¡Œæ˜¾ç¤ºï¼Œä¸æ”¯æŒå®½é«˜*/ /*display: inline;*/ /*inline-blockï¼šå†…è”å—æ ‡ç­¾ï¼ŒåŒè¡Œæ˜¾ç¤ºï¼Œæ”¯æŒæ‰€æœ‰ css æ ·å¼*/ display: inline-block; /*æ ‡ç­¾çš„åµŒå¥—è§„åˆ™*/ /*block å¯ä»¥åµŒå¥—æ‰€æœ‰æ˜¾ç¤ºç±»åž‹æ ‡ç­¾ï¼Œdiv|h1~h6|pï¼Œ*/ /*æ³¨ï¼šhn ä¸Ž p å±žäºŽæ–‡æœ¬ç±»åž‹æ ‡ç­¾ï¼Œæ‰€ä»¥ä¸€èˆ¬åªåµŒå¥—inline æ ‡ç­¾*/ /* inline æ ‡ç­¾åªèƒ½åµŒå¥— inline æ ‡ç­¾ï¼Œspan|i|b|sub|sup|ins| /*inline-block å¯ä»¥åµŒå¥—å…¶ä»–ç±»åž‹æ ‡ç­¾ï¼Œä½†ä¸å»ºè®®åµŒå¥—ä»»æ„ç±»åž‹æ ‡ç­¾ img|input*/ &#125; .b1 &#123; height: 100px; &#125; .b2 &#123; height: 80px; &#125; .b3 &#123; height: 120px; &#125; .box &#123; /*æ–‡æœ¬åŸºçº¿å¯¹é½*/ vertical-align: baseline; &#125; &lt;/style&gt;&lt;/head&gt;&lt;body&gt; &lt;div class="box b1"&gt;123&lt;/div&gt; &lt;div class="box b2"&gt;456&lt;/div&gt; &lt;div class="box b3"&gt;789&lt;/div&gt;&lt;/body&gt;&lt;/html&gt;]]></content>
      <categories>
        <category>å‰ç«¯</category>
      </categories>
      <tags>
        <tag>CSS</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[å‰ç«¯ï¼ˆä¸€ï¼‰ä¹‹ HTML]]></title>
    <url>%2F2018%2F12%2F04%2F%E5%89%8D%E7%AB%AF%EF%BC%88%E4%B8%80%EF%BC%89%E4%B9%8B-HTML%2F</url>
    <content type="text"><![CDATA[å‰ç«¯ä¹‹ HTMLå‰è¨€python åŸºç¡€ã€ç½‘ç»œç¼–ç¨‹ã€å¹¶å‘ç¼–ç¨‹ä¸Žæ•°æ®åº“è¦å¼€å§‹å‘Šä¸€æ®µè½äº†ï¼Œä»ŽçŽ°åœ¨å¼€å§‹è¿›å…¥å‰ç«¯çš„å­¦ä¹ ã€‚å‰ç«¯çš„ä¸œè¥¿å¤šä¸”æ‚ï¼Œéœ€è¦å¥½å¥½åœ°ç»ƒä¹ ã€‚ ä»€ä¹ˆæ˜¯å‰ç«¯å‰ç«¯å³ç½‘ç«™å‰å°éƒ¨åˆ†ï¼Œè¿è¡Œåœ¨ PC ç«¯ï¼Œç§»åŠ¨ç«¯ç­‰æµè§ˆå™¨ä¸Šå±•çŽ°ç»™ç”¨æˆ·æµè§ˆçš„ç½‘é¡µã€‚éšç€äº’è”ç½‘æŠ€æœ¯çš„å‘å±•ï¼ŒHTML5ã€CSS3ï¼Œå‰ç«¯æ¡†æž¶çš„åº”ç”¨ï¼Œè·¨å¹³å°å“åº”å¼ç½‘é¡µè®¾è®¡èƒ½å¤Ÿé€‚åº”å„ç§å±å¹•åˆ†è¾¨çŽ‡ï¼Œå®Œç¾Žçš„åŠ¨æ•ˆè®¾è®¡ï¼Œç»™ç”¨æˆ·å¸¦æ¥æžé«˜çš„ç”¨æˆ·ä½“éªŒã€‚ å‰ç«¯æŠ€æœ¯ä¸€èˆ¬åˆ†ä¸ºå‰ç«¯è®¾è®¡å’Œå‰ç«¯å¼€å‘ï¼Œå‰ç«¯è®¾è®¡ä¸€èˆ¬å¯ä»¥ç†è§£ä¸ºç½‘ç«™çš„è§†è§‰è®¾è®¡ï¼Œå‰ç«¯å¼€å‘åˆ™æ˜¯ç½‘ç«™çš„å‰å°ä»£ç å®žçŽ°ï¼ŒåŒ…æ‹¬åŸºæœ¬çš„ HTML å’Œ CSS ä»¥åŠ JavaScriptã€‚ å¹¿ä¹‰å‰ç«¯ï¼šæ‰€æœ‰ç”¨æˆ·å¯ä»¥ç›´æŽ¥çœ‹è§å¹¶äº¤äº’çš„ç•Œé¢ï¼› ç‹­ä¹‰å‰ç«¯ï¼šæµè§ˆå™¨ä¸Šè¿è¡Œçš„ç”¨æˆ·äº¤äº’ç•Œé¢ã€‚ ä»€ä¹ˆæ˜¯ HTMLHTML æ˜¯ä¸€ç§è¶…æ–‡æœ¬æ ‡è®°è¯­è¨€ï¼ˆHyper Text Markup Languageï¼‰ï¼Œä¸»è¦è´Ÿè´£å®Œæˆé¡µé¢çš„ç»“æž„è®¾è®¡ï¼Œä¸€èˆ¬ä»¥.htmlæˆ–è€….htm åŽç¼€ç»“å°¾ã€‚ è¶…æ–‡æœ¬æŒ‡é¡µé¢å†…å¯ä»¥åŒ…å«å›¾ç‰‡ã€é“¾æŽ¥ç”šè‡³éŸ³ä¹ã€ç¨‹åºç­‰éžæ–‡å­—å…ƒç´ ã€‚ æ ‡è®°è¯­è¨€ æ ‡è®°è¯­è¨€ä¸ºéžç¼–ç¨‹è¯­è¨€ï¼Œä¸å…·å¤‡ç¼–ç¨‹è¯­è¨€å…·å¤‡çš„ç¨‹åºé€»è¾‘ã€‚ html ä¸ºå‰ç«¯é¡µé¢çš„ä¸»é¢˜ï¼Œç”±æ ‡ç­¾ã€æŒ‡ä»¤ä¸Žè½¬ä¹‰å­—ç¬¦ï¼ˆå®žä½“ï¼‰ç­‰ç»„æˆ æ ‡ç­¾ï¼šè¢«å°–æ‹¬å·åŒ…è£¹ï¼Œç”±å­—æ¯å¼€å¤´åŒ…å«åˆæ³•å­—ç¬¦çš„ï¼Œå¯ä»¥è¢«æµè§ˆå™¨è§£æžçš„æ ‡è®°ã€‚egï¼šç³»ç»Ÿæ ‡ç­¾ã€è‡ªå®šä¹‰æ ‡ç­¾ã€‚ æŒ‡ä»¤ï¼šè¢«å°–æ‹¬å·åŒ…è£¹ï¼Œç”± !å¼€å¤´çš„æ ‡è®°ã€‚egï¼š&lt;!doctype html&gt; è½¬ä¹‰å­—ç¬¦ï¼šè¢«&amp;ä¸Ž;åŒ…è£¹çš„ç‰¹æ®Šå­—æ¯ç»„åˆæˆ–#å¼€å¤´çš„åè¿›åˆ¶æ•°ã€‚egï¼š\&#60;\&#62;\&nbsp; æ–‡æ¡£ç±»åž‹ 12345678&lt;!-- æ ‡ç­¾è¯­æ³•è§„èŒƒ --&gt;&lt;!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN""http://www.w3.org/TR/html4/strict.dtd"&gt;&lt;!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN""http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"&gt;&lt;!DOCTYPE html&gt; ç¬¬ä¸€ä¸ªé¡µé¢åŸºç¡€æ¨¡æ¿123456789&lt;!DOCTYPE html&gt;&lt;html&gt; &lt;head&gt; &lt;meta charset='utf-8'/&gt; &lt;title&gt;ç¬¬ä¸€ä¸ªé¡µé¢&lt;/title&gt; &lt;/head&gt; &lt;body&gt; &lt;/body&gt;&lt;/html&gt; æ¨¡æ¿è§£è¯» DOCTYPEï¼šæŒ‡å®šæ–‡æ¡£ç±»åž‹ï¼Œè§„å®š html æ ‡ç­¾è¯­æ³•ï¼› htmlï¼šæ–‡æ¡£æ ¹æ ‡ç­¾ï¼Œæ ‡æ³¨ç€æ–‡æ¡£ï¼ˆé¡µé¢ï¼‰çš„å¼€å§‹ä¸Žç»“æŸï¼› headï¼šæ–‡æ¡£å¤´æ ‡ç­¾ï¼Œå¯ä»¥å¼•ç”¨è„šæœ¬æ–‡ä»¶ã€æŒ‡å®šæ ·å¼è¡¨ã€ä¹¦å†™ä»£ç é€»è¾‘å—ã€æä¾›å…ƒä¿¡æ¯ï¼› bodyï¼šæ–‡æ¡£ä¸»ä½“æ ‡ç­¾ï¼ŒåŒ…å«æ–‡æ¡£æ‰€æœ‰æ–‡æœ¬ä¸Žè¶…æ–‡æœ¬å†…å®¹ï¼› titleï¼šæ–‡æ¡£ tag æ ‡é¢˜æ ‡ç­¾ï¼Œè®¾ç½®æ–‡æ¡£ tag çš„æ ‡é¢˜å†…å®¹ã€‚ å…¶ä»–æ ¸å¿ƒæ¨¡æ¿æ ‡ç­¾1. metaï¼ˆå…ƒæ ‡ç­¾ï¼‰12345678å­—ç¬¦ç¼–ç &lt;meta charset='utf-8'&gt;&lt;meta http-equiv='content-type' content='text/html;charset=utf-8'/&gt;SEO&lt;meta name='keywords' content='8-12ä¸ªä»¥è‹±æ–‡é€—å·éš”å¼€çš„å•è¯æˆ–è¯è¯­'&gt;&lt;meta name='description' content='80å­—ä»¥å†…çš„ä¸€æ®µè¯ï¼Œä¸Žç½‘ç«™å†…å®¹ç›¸å…³'&gt;ç§»åŠ¨é€‚é…&lt;meta name='viewport' content='width=device-width,initial-scale=1,minimum-scale=1,maximum-scale=1,user-scalable=no'/&gt; 2. linkï¼ˆé“¾æŽ¥æ ‡ç­¾ï¼‰12345å¤–è”æ ·å¼è¡¨&lt;link rel='stylesheet' type='text/css' href='style.css'/&gt;æ–‡æ¡£ tag å›¾æ ‡&lt;link rel='shortcut icon' type='image/x-icon' href='http://www.baidu.con/favicon.ico'/&gt; 3. styleï¼ˆæ ·å¼æ ‡ç­¾ï¼‰12å†…è”æ ·å¼è¡¨&lt;style&gt;&lt;/style&gt; 4. sctiptï¼ˆè„šæœ¬æ ‡ç­¾ï¼‰1&lt;script type='text/javascript'&gt;&lt;/script&gt; html å¸¸ç”¨æ ‡ç­¾12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667686970717273747576777879808182838485868788899091929394&lt;!doctype html&gt;&lt;html&gt; &lt;head&gt; &lt;meta charset="utf-8"&gt; &lt;title&gt;åŸºæœ¬æ ‡ç­¾&lt;/title&gt; &lt;/head&gt; &lt;body&gt; &lt;!-- æ— æ„ä¹‰æ ‡ç­¾ --&gt; &lt;!-- divï¼šæœ€å¸¸ç”¨æ ‡ç­¾ï¼Œæ²¡æœ‰ä¹‹ä¸€ï¼ˆæ­å»ºé¡µé¢æž¶æž„ï¼‰ --&gt; &lt;div&gt;&lt;/div&gt; &lt;!-- spanï¼šæ–‡æœ¬æœ€å¸¸ç”¨æ ‡ç­¾ -ï¼ˆæž„å»ºæ–‡æœ¬æž¶æž„ï¼Œå¯ä»¥ç›´æŽ¥åŒ…è£¹æ–‡æœ¬ï¼Œä¹Ÿå¯ä»¥åŒ…è£¹å…¶ä»–æ–‡æœ¬ç±»ï¼ˆå†…è”ç±»åž‹æ ‡ç­¾ï¼‰--&gt; &lt;span&gt;&lt;/span&gt; &lt;!-- span ä½œä¸ºæ–‡æœ¬æž¶æž„ï¼Œåˆ é™¤æ ·å¼çš„æ–‡æœ¬å†ç”±å…·ä½“çš„æ–‡æœ¬ç±»æ ‡ç­¾ del åµŒå¥— --&gt; &lt;span&gt;$1000&lt;del&gt;$2300&lt;/del&gt;&lt;/span&gt; &lt;!-- æ ‡é¢˜æ ‡ç­¾ï¼šh1~h6 --&gt; &lt;!-- ä¸€èˆ¬ä¸€ä¸ªé¡µé¢ä¼šå‡ºçŽ°ä¸€æ¬¡ï¼Œä½œä¸ºè¯¥é¡µé¢çš„æ€»æ ‡é¢˜å‡ºçŽ° --&gt; &lt;h1&gt;ä¸€çº§æ ‡é¢˜&lt;/h1&gt; &lt;h2&gt;äºŒçº§æ ‡é¢˜&lt;/h2&gt; æ™®é€šæ–‡æœ¬ &lt;h6&gt;å…­çº§æ ‡é¢˜&lt;/h6&gt; &lt;!-- æ®µè½æ ‡ç­¾ --&gt; &lt;p&gt;æ®µè½æ®µè½æ®µè½æ®µè½æ®µè½&lt;/p&gt; &lt;!-- åŽŸç”Ÿæ ‡ç­¾ --&gt; &lt;pre&gt; å‘µ å‘µ &lt;/pre&gt; &lt;!-- åˆ†å‰²çº¿ --&gt; &lt;hr&gt;&lt;/hr&gt; &lt;!-- æ¢è¡Œ --&gt; &lt;br /&gt; &lt;br /&gt; &lt;br /&gt; &lt;!-- æ–‡æœ¬ç±»æ ‡ç­¾ --&gt; &lt;!-- æ–œä½“ --&gt; &lt;i&gt;æ–œä½“&lt;/i&gt; &lt;!-- æ–œä½“å¼ºè°ƒ --&gt; &lt;em&gt;æ–œä½“å¼ºè°ƒ&lt;/em&gt; &lt;!-- åŠ ç²— --&gt; &lt;b&gt;åŠ ç²—&lt;/b&gt; &lt;!-- åŠ ç²—å¼ºè°ƒ --&gt; &lt;strong&gt;åŠ ç²—å¼ºè°ƒ&lt;/strong&gt; &lt;!-- ç”± ruby å’Œ rt ä¸¤ä¸ªæ ‡ç­¾é…åˆä½¿ç”¨ --&gt; &lt;ruby&gt; æ‹¼éŸ³&lt;rt&gt;pinyin&lt;/rt&gt; &lt;/ruby&gt; &lt;!-- æ’å…¥æ–‡æœ¬ --&gt; &lt;ins&gt;&lt;/ins&gt; &lt;!-- ä¸Šè§’æ ‡ --&gt; &lt;span&gt;æ–‡æœ¬&lt;sup&gt;ä¸Šè§’æ ‡&lt;/sup&gt;&lt;/span&gt; &lt;!-- é“¾æŽ¥æ ‡ç­¾ --&gt; &lt;!-- href æ ‡ç­¾çš„å…¨å±€å±žæ€§ï¼Œè¶…é“¾æŽ¥ï¼Œè§„å®šåè®®--&gt; &lt;!-- ä¸è§„å®šçš„è¯ï¼šä¼šåœ¨å½“å‰æ–‡ä»¶è·¯å¾„åšè·¯å¾„æ‹¼æŽ¥ --&gt; &lt;a href="https://www.baidu.com" target="_self"&gt;é€šå¾€ç™¾åº¦&lt;/a&gt; &lt;!-- å›¾ç‰‡æ ‡ç­¾ --&gt; &lt;!-- src å›¾ç‰‡æºåœ°å€å¯ä»¥åŠ è½½ç½‘ç»œ|æœ¬åœ°|åŠ¨æ€å›¾ç‰‡ altï¼šå›¾ç‰‡èµ„æºåŠ è½½æ—¶æ–‡æœ¬æç¤º titleï¼šé¼ æ ‡æ‚¬æµ®äº§ç”Ÿçš„æ–‡æœ¬æç¤ºï¼ˆä»»æ„æ ‡ç­¾éƒ½å¯ä»¥å…·æœ‰è¯¥å…¨å±€å±žæ€§ï¼‰--&gt; &lt;img src="" alt="" title="å°æŸ¯åŸº"&gt; &lt;!-- è¡¨æ ¼ --&gt; &lt;table&gt; &lt;tr&gt; &lt;th&gt;æ ‡é¢˜&lt;/th&gt; &lt;th&gt;æ ‡é¢˜&lt;/th&gt; &lt;/tr&gt; &lt;tr&gt; &lt;th&gt;å•å…ƒæ ¼&lt;/th&gt; &lt;th&gt;å•å…ƒæ ¼&lt;/th&gt; &lt;/tr&gt; &lt;/table&gt; &lt;!-- è¡¨å• --&gt; &lt;form &gt; &lt;input type="text"&gt; &lt;input type="text"&gt; &lt;/form&gt; &lt;/body&gt;&lt;/html&gt; æ ‡ç­¾çš„åˆ†ç±»1234567891011121314151617181920212223242526272829303132333435363738394041424344&lt;!DOCTYPE html&gt;&lt;html&gt;&lt;head&gt; &lt;meta charset="UTF-8"&gt; &lt;title&gt;æ ‡ç­¾çš„åˆ†ç±»&lt;/title&gt;&lt;/head&gt;&lt;body&gt; &lt;!-- ç³»ç»Ÿæ ‡ç­¾ | è‡ªå®šä¹‰æ ‡ç­¾: ç³»ç»Ÿæ²¡æœ‰çš„æ»¡è¶³æ ‡ç­¾è¯­æ³•çš„æ‰€æœ‰æ ‡ç­¾ --&gt; &lt;zero title="XXX" style="color: red"&gt;zero&lt;/zero&gt; &lt;!-- è¡Œå—æ ‡ç­¾(display) --&gt; &lt;!-- å—: æ¢è¡Œæ˜¾ç¤º --&gt; &lt;p&gt;æµ‹è¯•1&lt;/p&gt; &lt;p&gt;æµ‹è¯•2&lt;/p&gt; &lt;!-- è¡Œ:åŒè¡Œæ˜¾ç¤º --&gt; &lt;span&gt;æµ‹è¯•3&lt;/span&gt; &lt;span&gt;æµ‹è¯•4&lt;/span&gt; &lt;!-- å•ç»“æž„ | ç»„åˆç»“æž„ --&gt; &lt;div&gt;å•ç»“æž„&lt;/div&gt; &lt;!-- è¢«formåŒ…è£¹çš„inputå†…å®¹å¯ä»¥æäº¤ç»™åŽå°,å•ç‹¬ä½¿ç”¨çš„inputå†…å®¹åªèƒ½åœ¨å‰å°(js)ä½¿ç”¨ --&gt; &lt;form action=""&gt; &lt;input type="text"&gt; &lt;/form&gt; &lt;input type="text"&gt; &lt;!-- å•åŒæ ‡ç­¾ --&gt; &lt;!-- åŒ: é¦–å°¾åˆ†ç¦» --&gt; &lt;!-- ä¸»å†…å®¹:å¯ä»¥åŒ…å«æ–‡æœ¬,ä¹Ÿå¯ä»¥åŒ…å«å­æ ‡ç­¾ (å…·æœ‰ä½œç”¨åŸŸ) --&gt; &lt;div&gt;&lt;/div&gt; &lt;span&gt;&lt;/span&gt; &lt;!-- å•: é¦–å°¾è¿žä½“ --&gt; &lt;!-- ä¸»åŠŸèƒ½: ä¸éœ€è¦å­å†…å®¹,æ ‡ç­¾å°±å¯ä»¥ä»£è¡¨æ‰€æœ‰çš„åŠŸèƒ½è¯­ä¹‰ --&gt; &lt;hr /&gt; &lt;br /&gt; &lt;!-- inputçš„å†…å®¹ --&gt; &lt;input type="text" value="abc" placeholder="è¯·è¾“å…¥"&gt;&lt;/body&gt;&lt;/html&gt; HTML ç‰¹æ®Šç¬¦å·è½¬ä¹‰]]></content>
      <categories>
        <category>å‰ç«¯</category>
      </categories>
  </entry>
  <entry>
    <title><![CDATA[Linuxå‘½ä»¤ä¹‹ls]]></title>
    <url>%2F2018%2F11%2F29%2FLinux%E5%91%BD%E4%BB%A4%E4%B9%8Bls%2F</url>
    <content type="text"><![CDATA[å‰è¨€ä¸çŸ¥é“ä»Žä»€ä¹ˆæ—¶å€™å¼€å§‹ï¼Œå¯¹Linuxç³»ç»Ÿä¸€ç›´å¾ˆç€è¿·ï¼Œå°±å•çº¯è§‰å¾—ä½¿ç”¨ Linux ç³»ç»Ÿï¼ˆç‰¹åˆ«æ˜¯å‘½ä»¤è¡Œï¼‰æ˜¯ä¸€ä»¶å¾ˆé…·çš„äº‹æƒ…ï¼Œæ‰€ä»¥å¾ˆæ—©å°±å¼€å§‹å­¦ä¹ ä¸€äº› linux çŸ¥è¯†äº†ï¼ŒæŽ¨èé¸Ÿå“¥çš„ linux ç§æˆ¿èœï¼Œå“ˆå“ˆï¼Œä¸ç”¨æˆ‘æŽ¨èè¿™æœ¬ä¹¦å·²ç»æ˜¯é¼Žé¼Žå¤§åäº†ï¼ˆæ‰€ä»¥è¿™ä¸ªç³»åˆ—åšå®¢ä¸»è¦å‚è€ƒé¸Ÿå“¥çš„ linux å¹¶ä¸”æˆ‘ä¼šåœ¨ linux18.04ä¸Šé¢æµ‹è¯•ï¼‰ã€‚æ‰€ä»¥çŽ°åœ¨æƒ³ä»Žæœ€åŸºç¡€çš„å‘½ä»¤å¼€å§‹ï¼Œç³»ç»Ÿçš„äº†è§£ linux ç³»ç»Ÿï¼Œæ‰€ä»¥è¿™ä¹Ÿä¼šæ˜¯ä¸ªç³»åˆ—åšå®¢ï¼Œå°½é‡åšåˆ°æ¯å¤©å†™ä¸€ä¸ª linux å‘½ä»¤ï¼Œè¿™ä¹Ÿæ˜¯ä»¶è‡ªæˆ‘æ¿€åŠ±çš„äº‹æƒ…ï¼Œå¼€å§‹æˆ‘çš„ linux ä¹‹æ—…å§ï¼ï¼ï¼ ls]]></content>
      <categories>
        <category>Linuxå‘½ä»¤</category>
      </categories>
  </entry>
  <entry>
    <title><![CDATA[è®¾è®¡æ¨¡å¼ä¹‹å•ä¾‹]]></title>
    <url>%2F2018%2F11%2F28%2F%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E4%B9%8B%E5%8D%95%E4%BE%8B%2F</url>
    <content type="text"><![CDATA[å‰è¨€æœ¬ç¯‡åšå®¢å½’ç±»äºŽè®¾è®¡æ¨¡å¼ï¼Œå•ä¾‹æ¨¡å¼ç®—æ˜¯æˆ‘äº†è§£çš„ä¸å¤šçš„è®¾è®¡æ¨¡å¼ä¹‹ä¸€ï¼Œåœ¨æŸäº›åº”ç”¨åœºæ™¯ä¸‹ä¸ºäº†èŠ‚çœèµ„æºï¼Œå¸¸å¸¸ä½¿ç”¨å•ä¾‹æ¨¡å¼æ¥ç¼–å†™ä»£ç ã€‚ å•ä¾‹æ¨¡å¼ï¼ˆSingleton Pattertï¼‰æ˜¯ä¸€ç§å¸¸ç”¨çš„è½¯ä»¶è®¾è®¡æ¨¡å¼ï¼Œè¯¥æ¨¡å¼çš„ä¸»è¦ç›®çš„æ˜¯ç¡®ä¿åœ¨æŸä¸€ä¸ªç±»ä¸­èƒ½ä¸”åªèƒ½äº§ç”Ÿä¸€ä¸ªå®žä¾‹ã€‚å½“åœ¨æŸäº›åœºæ™¯ä¸‹å¸Œæœ›æŸä¸ªç±»åªèƒ½äº§ç”Ÿä¸€ä¸ªå®žä¾‹æ—¶ï¼Œå°±å¯ä»¥ä½¿ç”¨å•ä¾‹æ¨¡å¼äº†ã€‚ python ä¸­çš„å•ä¾‹æ¨¡å¼å•ä¾‹æ¨¡å¼ä¹Ÿå«å•å­æ¨¡å¼ï¼Œæ˜¯ä¸€ç§å¸¸ç”¨çš„è½¯ä»¶è®¾è®¡æ¨¡å¼ã€‚åœ¨åº”ç”¨è¿™ä¸ªæ¨¡å¼æ—¶ï¼Œå•ä¾‹å¯¹è±¡çš„ç±»å¿…é¡»ä¿è¯åªæœ‰ä¸€ä¸ªå®žä¾‹å­˜åœ¨ã€‚è®¸å¤šæ—¶å€™æ•´ä¸ªç³»ç»Ÿåªéœ€è¦æ‹¥æœ‰ä¸€ä¸ªå…¨å±€å¯¹è±¡ï¼Œè¿™æ ·æœ‰åˆ©äºŽæˆ‘ä»¬åè°ƒç³»ç»Ÿæ•´ä½“çš„è¡Œä¸ºã€‚æ¯”å¦‚åœ¨æŸä¸ªæœåŠ¡å™¨ç¨‹åºä¸­ï¼Œè¯¥æœåŠ¡å™¨çš„é…ç½®ä¿¡æ¯å­˜æ”¾åœ¨ä¸€ä¸ªæ–‡ä»¶ä¸­ï¼Œè¿™äº›é…ç½®æ•°æ®ç”±ä¸€ä¸ªå•ä¾‹å¯¹è±¡ç»Ÿä¸€è¯»å–ï¼Œç„¶åŽæœåŠ¡è¿›ç¨‹ä¸­çš„å…¶ä»–å¯¹è±¡å†é€šè¿‡è¿™ä¸ªå•ä¾‹å¯¹è±¡èŽ·å–è¿™äº›é…ç½®ä¿¡æ¯ã€‚è¿™ç§æ–¹å¼ç®€åŒ–äº†åœ¨å¤æ‚çŽ¯å¢ƒä¸‹çš„é…ç½®ç®¡ç†ã€‚ å®žçŽ°å•ä¾‹æ¨¡å¼çš„æ€è·¯æ˜¯ï¼šä¸€ä¸ªç±»èƒ½è¿”å›žå¯¹è±¡ä¸€ä¸ªå¼•ç”¨ï¼ˆæ°¸è¿œæ˜¯åŒä¸€ä¸ªï¼‰å’Œä¸€ä¸ªèŽ·å¾—è¯¥å®žä¾‹çš„æ–¹æ³•ï¼ˆå¿…é¡»æ˜¯é™æ€æ–¹æ³•ï¼Œé€šå¸¸ä½¿ç”¨getInstanceè¿™ä¸ªåç§°ï¼‰ï¼›å½“æˆ‘ä»¬è°ƒç”¨è¿™ä¸ªæ–¹æ³•æ—¶ï¼Œå¦‚æžœç±»æŒæœ‰çš„å¼•ç”¨ä¸ä¸ºç©ºå°±è¿”å›žè¿™ä¸ªå¼•ç”¨ï¼Œå¦‚æžœç±»ä¿æŒçš„å¼•ç”¨ä¸ºç©ºå°±åˆ›å»ºè¯¥ç±»çš„å®žä¾‹å¹¶å°†å®žä¾‹çš„å¼•ç”¨èµ‹äºˆè¯¥ç±»ä¿æŒçš„å¼•ç”¨ï¼›åŒæ—¶æˆ‘ä»¬è¿˜å°†è¯¥ç±»çš„æž„é€ å‡½æ•°å®šä¹‰ä¸ºç§æœ‰æ–¹æ³•ï¼Œè¿™æ ·å…¶ä»–å¤„çš„ä»£ç å°±æ— æ³•é€šè¿‡è°ƒç”¨è¯¥ç±»çš„æž„é€ å‡½æ•°æ¥å®žä¾‹åŒ–è¯¥ç±»çš„å¯¹è±¡ï¼Œåªæœ‰é€šè¿‡è¯¥ç±»æä¾›çš„é™æ€æ–¹æ³•æ¥å¾—åˆ°è¯¥ç±»çš„å”¯ä¸€å®žä¾‹ã€‚ å•ä¾‹æ¨¡å¼åœ¨å¤šçº¿ç¨‹çš„åº”ç”¨åœºåˆä¸‹å¿…é¡»å°å¿ƒä½¿ç”¨ã€‚å¦‚æžœå½“å”¯ä¸€å®žä¾‹å°šæœªåˆ›å»ºæ—¶ï¼Œæœ‰ä¸¤ä¸ªçº¿ç¨‹åŒæ—¶è°ƒç”¨åˆ›å»ºå®žä¾‹æ–¹æ³•ï¼Œé‚£ä¹ˆå®ƒä»¬åŒæ—¶æ²¡æœ‰æ£€æµ‹åˆ°å”¯ä¸€å®žä¾‹çš„å­˜åœ¨ï¼Œä»Žè€ŒåŒæ—¶å„è‡ªåˆ›å»ºäº†ä¸€ä¸ªå®žä¾‹ï¼Œè¿™æ ·å°±æœ‰ä¸¤ä¸ªå®žä¾‹è¢«æž„é€ å‡ºæ¥ï¼Œä»Žè€Œè¿åäº†å•ä¾‹æ¨¡å¼ä¸­å®žä¾‹æƒŸä¸€çš„åŽŸåˆ™ã€‚è§£å†³è¿™ä¸ªé—®é¢˜çš„åŠžæ³•æ˜¯ä¸ºæŒ‡ç¤ºæ˜¯å¦å·²ç»å®žä¾‹åŒ–çš„å˜é‡æä¾›ä¸€ä¸ªäº’æ–¥é”ï¼ˆè™½ç„¶è¿™æ ·ä¼šé™ä½Žæ•ˆçŽ‡ï¼‰ã€‚ åœ¨é¢å‘å¯¹è±¡ç¼–ç¨‹ä¸­ï¼Œå­¦ä¹ äº†ä½¿ç”¨æŸä¸€ä¸ªç±»æ¥åˆ›å»ºå¤šä¸ªä¸åŒçš„å¯¹è±¡ï¼Œé‚£ä¹ˆå¦‚ä½•ä½¿å¾—è¯¥ç±»åªèƒ½äº§ç”Ÿä¸€ä¸ªå¯¹è±¡å‘¢ï¼Ÿ åœ¨Python ä¸­ï¼Œå¯ä»¥ä½¿ç”¨å¤šç§æ–¹æ³•æ¥å®žçŽ°å•ä¾‹æ¨¡å¼ï¼š ä½¿ç”¨æ¨¡å— ä½¿ç”¨é­”æœ¯æ–¹æ³•__new__ ä½¿ç”¨è£…é¥°å™¨ ä½¿ç”¨å…ƒç±» ä½¿ç”¨æ¨¡å—python ä¸­çš„æ¨¡å—å°±æ˜¯å¤©ç„¶çš„å•ä¾‹æ¨¡å¼ï¼Œå› ä¸ºæ¨¡å—åªä¼šåœ¨ç¬¬ä¸€æ¬¡å¯¼å…¥çš„æ—¶å€™åŠ è½½ï¼Œä¼šç”Ÿæˆä¸€ä¸ª .pycæ–‡ä»¶ï¼Œç¬¬äºŒæ¬¡å¯¼å…¥æ—¶ï¼Œå°±ä¼šç›´æŽ¥åŠ è½½ .pycæ–‡ä»¶ï¼Œè€Œä¸ä¼šå†æ¬¡æ‰§è¡Œæ¨¡å—ä»£ç ã€‚å› æ­¤ï¼Œå¯ä»¥æŠŠç›¸å…³çš„ä»£ç å’Œæ•°æ®å®šä¹‰åœ¨ä¸€ä¸ªæ¨¡å—ä¸­ï¼Œå°±å¯ä»¥èŽ·å¾—ä¸€ä¸ªå•ä¾‹å¯¹è±¡äº†ã€‚ç„¶åŽè¦ç”¨çš„è¯å¯¼å…¥å°±å¯ä»¥ï¼Œæˆ‘å¯ä»¥ä¿è¯è¿™æ ·åšçš„è¯è‚¯å®šåªæœ‰ä¸€ä¸ªå•ä¾‹å¯¹è±¡ã€‚ä»£ç å°±ä¸æ¼”ç¤ºäº†ã€‚ ä½¿ç”¨ç‰¹æ®Šæ–¹æ³•__new__åœ¨ä½¿ç”¨ç±»å®žä¾‹åŒ–ä¸€ä¸ªå¯¹è±¡æ—¶ï¼Œå…¶å®žpython è§£é‡Šå™¨åšäº†ä¸¤æ­¥æ“ä½œ: è°ƒç”¨ object çš„__new__æ–¹æ³•åˆ›å»ºä¸€ä¸ªç©ºå¯¹è±¡ï¼› è°ƒç”¨ç±»æœ¬èº«çš„__init__æ–¹æ³•è¿›è¡Œåˆå§‹åŒ–ï¼ˆè¿™éƒ½æ˜¯é€šè¿‡å…ƒç±»çš„__call__æ¥é—´æŽ¥è°ƒç”¨çš„ï¼‰ é‚£ä¹ˆæ˜¯ä¸æ˜¯å¯ä»¥åœ¨è°ƒç”¨__new__çš„æ—¶å€™åšä¸€äº›åˆ¤æ–­æ¥ä½¿å¾—åªèƒ½åˆ›å»ºä¸€ä¸ªå•ä¾‹å¯¹è±¡å‘¢ï¼Ÿ 12345678class Singleinstance: _instance = None def __new__(cls, *arg, **kwargs): if not cls._instance: cls._instance = super(Singleinstance, cls).__new__(cls, *args, **kwargs) return cls._instanceclass MyClass(Singleinstance): a = 1 åœ¨ä¸Šé¢çš„ä»£ç ä¸­ï¼Œå°†ç±»çš„__new__æ–¹æ³•å’Œä¸€ä¸ªç±»çš„å±žæ€§å…³è”èµ·æ¥ï¼Œå¦‚æžœ cls._instance ä¸º None åˆ™åˆ›å»ºä¸€ä¸ªå¯¹è±¡ï¼Œå¦åˆ™çš„è¯ç›´æŽ¥è¿”å›žcls._instanceã€‚ ä½¿ç”¨è£…é¥°å™¨è£…é¥°å™¨å¯ä»¥åŠ¨æ€çš„ä¿®æ”¹ä¸€ä¸ªç±»æˆ–è€…å‡½æ•°çš„åŠŸèƒ½ã€‚æ‰€ä»¥å¯ä»¥ä½¿ç”¨è£…é¥°å™¨æ¥è£…é¥°æŸå„ç±»ï¼Œä½¿å…¶åªèƒ½ç”Ÿæˆä¸€ä¸ªå®žä¾‹ï¼š 1234567891011121314from functools import wrapsdef singleinstance(cls): instances = &#123;&#125; @wraps(cls) def getinstance(*args, **kwargs): if cls not in instances: instances[cls] = cls(*args, **kwargs) return instances[cls] return getinstance@singleinstanceclass MyClass: a = 1 åœ¨ä¸Šé¢ï¼Œå®šä¹‰äº†ä¸€ä¸ªè£…é¥°å™¨ singleinstanceï¼Œå®ƒè¿”å›žäº†ä¸€ä¸ªå†…éƒ¨å‡½æ•°getinstanceï¼Œè¯¥å‡½æ•°ä¼šåˆ¤æ–­æŸä¸ªç±»æ˜¯å¦åœ¨å­—å…¸ instance ä¸­ï¼Œå¦‚æžœä¸å­˜åœ¨ï¼Œåˆ™ä¼šå°† cls ä½œä¸º keyï¼Œcls(*args, **kwargs)ä½œä¸º valueå­˜åˆ° instances ä¸­ï¼Œå¦åˆ™ï¼Œç›´æŽ¥è¿”å›ž instances[cls]ã€‚è¯¥è£…é¥°å™¨å¯ä»¥è£…é¥°æ‰€æœ‰åªéœ€è¦äº§ç”Ÿä¸€ä¸ªå®žä¾‹çš„ç±»ä¸Šã€‚ ä½¿ç”¨ metaclasså…ƒç±» metaclass å¯ä»¥é€šè¿‡è‡ªå®šä¹‰__new__æ–¹æ³•å’Œ__init__æ–¹æ³•æ¥æŽ§åˆ¶ç±»çš„åˆ›å»ºè¿‡ç¨‹ï¼Œå®ƒä¸»è¦åšä¸‰ä»¶äº‹ï¼š æ‹¦æˆªç±»çš„åˆ›å»º ä¿®æ”¹ç±»çš„å®šä¹‰ è¿”å›žä¿®æ”¹åŽçš„ç±» ä½¿ç”¨å…ƒç±»å®žçŽ°å•ä¾‹çš„ä»£ç å¦‚ä¸‹ï¼š 12345678910111213141516171819202122class MyMetaClass(type): # def __init__(self): # pass instance = None def __call__(cls, *args, **kwargs): # åˆ¤æ–­å¯¹è±¡æœ‰æ²¡æœ‰åˆ›å»ºè¿‡ if not MyMetaClass.instance: # åˆ›å»ºç©ºå¯¹è±¡ MyMetaClass.instance = object.__new__(cls) print(cls.__name__) print(cls.__dict__) print("åˆ›å»ºæ–°çš„æ’­æ”¾å™¨å¯¹è±¡!") # åˆå§‹åŒ–å¯¹è±¡ MyMetaClass.instance.__init__(*args,**kwargs) print(type(MyMetaClass.instance)) # è¿”å›žå¯¹è±¡ return MyMetaClass.instanceclass CDPlayer(metaclass=MyMetaClass): pass]]></content>
      <categories>
        <category>è®¾è®¡æ¨¡å¼</category>
      </categories>
  </entry>
  <entry>
    <title><![CDATA[å…ƒç±»]]></title>
    <url>%2F2018%2F11%2F28%2F%E5%85%83%E7%B1%BB%2F</url>
    <content type="text"><![CDATA[å‰è¨€æœ¬ç¯‡åšå®¢å­¦ä¹  python ä¸­ä¸€ç§é«˜çº§æ¦‚å¿µï¼Œå…ƒç±»ã€‚åœ¨ã€Šè¯´æ–‡ã€‹ä¸­è¿™æ ·æè¿°å…ƒï¼šå…ƒï¼Œå§‹ä¹Ÿï¼ˆpsï¼šè¿™ä¹Ÿå¤ªç®€çŸ­äº†ï¼‰ã€‚ä¸‰ä¸ªå­—ï¼Œæœ€åŽä¸€ä¸ªå­—è¿˜æ˜¯è¯­æ°”è¯ã€‚ã€‚å¾ˆå½¢è±¡çš„è¯´æ˜Žäº†å…ƒçš„æ„æ€ï¼Œæœ€å¼€å§‹çš„æ„æ€ï¼Œåœ¨é“æ•™ä¸­å…ƒçš„æ„æ€æ˜¯ï¼šå¼€å§‹çš„ï¼Œæœ€åˆã€‚ç¬¬ä¸€ã€‚ä¸ºé¦–çš„ã€‚ä¸»è¦ï¼Œæ ¹æœ¬ï¼Œæ•´ä½“çš„æ„æ€ã€‚é‚£ä¹ˆå¾ˆæ˜¾ç„¶ï¼Œå…ƒç±»æ˜¯æœ€å¼€å§‹çš„ç±»çš„æ„æ€ã€‚æˆ‘ä»¬éƒ½çŸ¥é“åœ¨ python ä¸­ä¸€åˆ‡çš†ä¸ºå¯¹è±¡ï¼Œè€Œå¯¹è±¡éƒ½ç»§æ‰¿ä¸Ž object ç±»ï¼Œé‚£ä¹ˆå…ƒç±»ä¸Ž object çš„å…³ç³»æ˜¯ä»€ä¹ˆå‘¢ï¼Ÿ å¯ä»¥çœ‹å‡ºå…ƒç±»ä¹Ÿæ˜¯ç»§æ‰¿è‡ª object ç±»çš„ã€‚ é‚£ä¹ˆå…ƒç±»å’Œç±»çš„å…³ç³»æ˜¯ä»€ä¹ˆå‘¢ï¼Ÿ ç®€å•æ¥è®²å°±æ˜¯ï¼šç±»ç”Ÿæˆå¯¹è±¡ï¼Œå…ƒç±»ç”Ÿæˆè‡ªå·±æœ¬èº«åŒæ—¶å®žä¾‹åŒ–å…¶ä»–æ‰€æœ‰çš„ç±»ã€‚ å…ƒç±»ç±»ä½œä¸ºå¯¹è±¡ä¹‹å‰å·²ç»è¯´è¿‡ python ä¸­ä¸€åˆ‡çš†å¯¹è±¡ï¼Œé‚£ä¹ˆç±»åŒæ ·ä¹Ÿæ˜¯å¯¹è±¡ï¼Œè€Œä¸”ç±»æ˜¯å…ƒç±»çš„å¯¹è±¡ã€‚å½“ä½¿ç”¨å…³é”®è¯classå®šä¹‰ä¸€ä¸ªç±»æ—¶ï¼Œåœ¨ä»£ç æ‰§è¡Œé˜¶æ®µå°±ä¼šåˆ›å»ºä¸€ä¸ª ç©ºçš„objectï¼Œå¹¶ä½¿ç”¨å…ƒç±»çš„__init__æ–¹æ³•æ¥å‡ºåˆå§‹åŒ–ä¸€ä¸ªç±»ã€‚è¿™ä¸ªå¯¹è±¡ï¼ˆç±»ï¼‰æœ¬èº«å¯ä»¥åˆ›å»ºå¯¹è±¡ï¼Œå› ä¸ºå®ƒæ˜¯ä¸€ä¸ªç±»ã€‚ 123# åœ¨å†…å­˜ä¸­åˆ›å»ºä¸€ä¸ª Foo å¯¹è±¡class ObjectCreator(object): pass ä½†æ˜¯åŒæ ·çš„å®ƒä¹Ÿæ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œä¸€ä¸ªå…ƒç±»çš„å®žä¾‹å¯¹è±¡ã€‚ æ‰€ä»¥ä»Žå¯¹è±¡å±‚é¢å°†å’Œå®ƒè‡ªå·±å®žä¾‹å‡ºæ¥çš„å¯¹è±¡æ²¡æœ‰ä»€ä¹ˆä¸åŒï¼Œå› æ­¤ï¼š å¯ä»¥å°†ç±»èµ‹å€¼ç»™ä¸€ä¸ªå˜é‡ å¯ä»¥å¤åˆ¶å®ƒ å¯ä»¥ä¸ºç±»æ·»åŠ å…¶ä»–çš„å±žæ€§ å¯ä»¥å°†å…¶ä½œä¸ºå‚æ•°æ¥ä¼ é€’ ä¾‹å¦‚ï¼š 12345678910111213141516171819&gt;&gt;&gt; print(ObjectCreator) # you can print a class because it's an object&lt;class '__main__.ObjectCreator'&gt;&gt;&gt;&gt; def echo(o):... print(o)...&gt;&gt;&gt; echo(ObjectCreator) # you can pass a class as a parameter&lt;class '__main__.ObjectCreator'&gt;&gt;&gt;&gt; print(hasattr(ObjectCreator, 'new_attribute'))False&gt;&gt;&gt; ObjectCreator.new_attribute = 'foo' # you can add attributes to a class&gt;&gt;&gt; print(hasattr(ObjectCreator, 'new_attribute'))True&gt;&gt;&gt; print(ObjectCreator.new_attribute)foo&gt;&gt;&gt; ObjectCreatorMirror = ObjectCreator # you can assign a class to a variable&gt;&gt;&gt; print(ObjectCreatorMirror.new_attribute)foo&gt;&gt;&gt; print(ObjectCreatorMirror())&lt;__main__.ObjectCreator object at 0x8997b4c&gt; åŠ¨æ€åˆ›å»ºç±»ç”±äºŽç±»ä¹Ÿæ˜¯å¯¹è±¡ï¼Œå› æ­¤å¯ä»¥åƒä»»ä½•å¯¹è±¡ä¸€æ ·åŠ¨æ€åˆ›å»ºå®ƒä»¬ã€‚ åœ¨pythonä¸­ï¼Œtype é™¤äº†å¯ä»¥æŸ¥çœ‹å¯¹è±¡çš„ç±»åž‹ï¼Œè¿˜æœ‰ä¸€ä¸ªå¾ˆå¼ºå¤§çš„åŠŸèƒ½ï¼Œtype å¯ä»¥åŠ¨æ€çš„åˆ›å»ºç±»ã€‚type å¯ä»¥å°†ç±»çš„æè¿°ä½œä¸ºå‚æ•°å¹¶è¿”å›žä¸€ä¸ªç±»ã€‚ ä½¿ç”¨ classå…³é”®è¯æ—¶ï¼Œpython ä¼šè‡ªåŠ¨çš„åˆ›å»ºæ­¤å¯¹è±¡ï¼Œå°±åƒå®žä¾‹åŒ–ä¸€ä¸ªå¯¹è±¡æ—¶ï¼Œè°ƒç”¨çš„æ˜¯ç±»ä¸­çš„__init__æ–¹æ³•ï¼Œåˆ›å»ºå¯¹è±¡æ—¶åŒæ ·çš„è°ƒç”¨äº†å…ƒç±»ä¸­çš„__init__æ–¹æ³•ï¼š è¯¥å‡½æ•°æœ‰å››ä¸ªå‚æ•°ï¼Œç¬¬ä¸€ä¸ªå‚æ•°ä¸º clsè¡¨ç¤ºè¿™æ˜¯ä¸€ä¸ªç”±ç±»è°ƒç”¨çš„åˆå§‹åŒ–å‡½æ•°ï¼Œpython åœ¨æ£€æµ‹è¯­æ³•çš„æ—¶å€™å‘çŽ° classåˆ™ä¼šæŠŠ class åŽé¢çš„ç±»åå½“åšå‚æ•°ä¼ ç»™ whatï¼Œbases è¡¨ç¤ºç»§æ‰¿çš„çˆ¶ç±»æ˜¯è°ï¼Œæ˜¯ä¸ªå…ƒç¥–ç±»åž‹ï¼ˆå› ä¸ºä¼šæœ‰å¤šç»§æ‰¿ï¼‰ï¼Œdict æ˜¯ä¸ªå­—å…¸ç±»åž‹ï¼Œæ˜¯ç±»çš„åç§°ç©ºé—´ï¼Œå¯ä»¥é€šè¿‡__dict__æŸ¥çœ‹ï¼Œä½¿ç”¨ typeæ¥åˆ›å»ºä¸€ä¸ªç±»ï¼š 123what = 'Music'bases = (object,)dict = &#123;'music_name': 'å—å±±å¿†'&#125; è¿™å’Œæˆ‘ä»¬ä½¿ç”¨ classå…³é”®è¯å®šä¹‰ä¸€ä¸ªç±»æ²¡æœ‰ä»€ä¹ˆä¸åŒï¼š ä¹‹å‰åœ¨å­¦ä¹ ç±»çš„æ—¶å€™ï¼Œæˆ‘ä»¬çŸ¥é“åˆ›å»ºä¸€ä¸ªå¯¹è±¡æ˜¯è°ƒç”¨äº†ç±»ä¸­__init__æ–¹æ³•ï¼ŒåŒç†åœ¨åˆ›å»ºç±»çš„æ—¶å€™æ˜¯è°ƒç”¨äº†å…ƒç±»ä¸­ä¹Ÿå°±æ˜¯ type ä¸­çš„__init__æ–¹æ³•ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥é€šè¿‡æ”¹å†™ type ä¸­çš„å…ƒç±»æ¥è‡ªå®šä¹‰åˆ›å»ºç±»ï¼Œæ¯”å¦‚åŠ äº›åˆ¤æ–­æˆ–è€…å…¶ä»–çš„å±žæ€§ï¼š å¯æƒœæƒ³è±¡æ˜¯ç¾Žå¥½çš„ï¼Œè¿™æ‹›æ ¹æœ¬è¡Œä¸é€šï¼Œé‚£ä¹ˆæœ‰æ²¡æœ‰åˆ«çš„åŠžæ³•å‘¢ï¼Ÿå½“ç„¶æœ‰å•¦ï¼Œå“ˆå“ˆå“ˆå“ˆå“ˆ åœ¨å­¦ä¹ ç±»çš„ä¸‰å¤§ç‰¹æ€§çš„æ—¶å€™ï¼Œä»Žçˆ¶ç±»ç»§æ‰¿çš„å±žæ€§å¯ä»¥æ”¹å†™ï¼ˆå¤šæ€çš„æ€æƒ³ï¼‰ï¼Œé‚£ä¹ˆæ”¹å†™ä¸äº†å…ƒç±»æ˜¯å› ä¸ºå…ƒç±»å¾ˆç‰¹æ®Šï¼Œé‚£æˆ‘ç»§æ‰¿è‡ªå…ƒç±»çš„ç±»è‚¯å®šå¯ä»¥æ”¹å†™å§ã€‚è¿™ä¸ªåˆ°åŽé¢å†è®²ï¼Œçªç„¶å‘çŽ°ä»€ä¹ˆæ˜¯å…ƒç±»è¿˜æ²¡è®²æ¸…æ¥šã€‚ã€‚ã€‚ ä»€ä¹ˆæ˜¯å…ƒç±»æˆ‘æŠŠå…ƒç±»ç§°ä¹‹ä¸º ç±»çš„ç±»ã€‚å…ƒç±»æ˜¯åˆ›å»ºç±»çš„â€˜â€™ä¸œè¥¿â€˜â€™ï¼Œæˆ‘ä»¬å®šä¹‰ç±»æ¥åˆ›å»ºå¯¹è±¡ï¼Œç±»ä¹Ÿæ˜¯å¯¹è±¡ï¼Œæ‰€ä»¥å®šä¹‰äº†ä¸€ä¸ªå…ƒç±»ç”¨æ¥åˆ›å»ºå¯¹è±¡ã€‚typeæ˜¯ Python ç”¨æ¥åˆ›å»ºæ‰€æœ‰ç±»çš„å…ƒç±»ï¼ˆä¸åŒ…æ‹¬ object ç±»ï¼‰ã€‚å…¶å®žè¿™å’Œç”¨ stråˆ›å»ºå­—ç¬¦ä¸²å¯¹è±¡ï¼Œintåˆ›å»ºæ•´æ•°å¯¹è±¡ä¸€è‡´çš„ã€‚typeåªæ˜¯åˆ›å»ºç±»å¯¹è±¡çš„ç±»ã€‚ ä¸€åˆ‡ï¼Œall thingéƒ½æ˜¯ Python ä¸­çš„ä¸€ä¸ªå¯¹è±¡ã€‚è¿™åŒ…æ‹¬æ•´æ•°ã€å­—ç¬¦ä¸²ã€å‡½æ•°å’Œç±»ã€‚æ‰€æœ‰è¿™äº›éƒ½æ˜¯å¯¹è±¡ï¼Œæ‰€æœ‰è¿™äº›éƒ½æ˜¯ä»Žä¸€ä¸ªç±»åˆ›å»ºçš„ã€‚å› æ­¤ï¼Œå…ƒç±»æ˜¯åˆ›å»ºç±»å¯¹è±¡çš„ä¸œè¥¿ã€‚ __metaclass__å±žæ€§é™¤äº†ä½¿ç”¨ type åŠ¨æ€åˆ›å»ºç±»ä»¥å¤–ï¼Œè¦æŽ§åˆ¶ç±»çš„åˆ›å»ºè¡Œä¸ºï¼Œå¯ä»¥ä½¿ç”¨ metaclassï¼Œè¿™ä¹Ÿæ˜¯è‡ªå®šä¹‰å…ƒç±»çš„æ–¹æ³•ã€‚ metaclass çš„æ„æ€å°±æ˜¯å…ƒç±»ï¼šå½“æˆ‘ä»¬å®šä¹‰äº†ç±»ä»¥åŽï¼Œå°±å¯ä»¥æ ¹æ®è¿™ä¸ªç±»åˆ›å»ºå‡ºå®žä¾‹ï¼Œæ‰€ä»¥å…ˆå®šä¹‰ç±»ï¼Œç„¶åŽåˆ›å»ºå®žä¾‹ã€‚ä½†æ˜¯å¦‚æžœæƒ³åˆ›å»ºå‡ºç±»å‘¢ï¼Ÿé‚£å°±å¿…é¡»æ ¹æ® metaclass åˆ›å»ºå‡ºç±»ï¼Œæ‰€ä»¥ï¼šå…ˆå®šä¹‰å…ƒç±»ï¼ˆä¸è‡ªå®šä¹‰æ—¶ï¼Œé»˜è®¤ç”¨ typeï¼‰ï¼Œç„¶åŽåˆ›å»ºç±»ã€‚ï¼ˆå¤§éƒ¨åˆ†æƒ…å†µä½¿ç”¨ä¸åˆ° metaclassï¼Œé™¤éžæƒ³è‡ªå®šä¹‰å…ƒç±»ï¼‰ã€‚ é»˜è®¤æƒ…å†µä¸‹ï¼Œç±»æ˜¯ä½¿ç”¨ type æž„é€ çš„ã€‚ç±»ä¸»ä½“åœ¨ä¸€ä¸ªæ–°çš„åç§°ç©ºé—´ä¸­æ‰§è¡Œï¼Œç±»ååœ¨æœ¬åœ°ç»‘å®šåˆ°ç±»åž‹çš„ç»“æžœï¼ˆåç§°ï¼ŒåŸºï¼Œåç§°ç©ºé—´ï¼‰ã€‚ å¯ä»¥é€šè¿‡ç±»å®šä¹‰è¡Œä¸­ä¼ é€’å…ƒç±»å…³é”®å­—å‚æ•°æ¥å®šåˆ¶ç±»çš„åˆ›å»ºè¿‡ç¨‹ï¼Œæˆ–è€…ä»ŽåŒ…å«æ­¤ç±»å‚æ•°çš„çŽ°æœ‰ç±»ç»§æ‰¿ã€‚ å®žä¾‹åŒ–å¯¹è±¡çš„å®Œæ•´è¿‡ç¨‹12class Foo(Bar): pass å½“è§£é‡Šå™¨æ‰§è¡Œè¿™è¡Œä»£ç æ—¶ï¼Œæ‰§è¡Œä»¥ä¸‹æ“ä½œï¼š Foo æœ‰__metaclass__å±žæ€§å—ï¼Ÿå¦‚æžœæœ‰çš„è¯ï¼Œpython ä¼šé€šè¿‡ __metaclass__åœ¨å†…å­˜ä¸­åˆ›å»ºä¸€ä¸ªåç§°ä¸º Foo çš„ç±»å¯¹è±¡ã€‚å¦‚æžœ Python æ²¡æœ‰æ‰¾åˆ°__metaclass__ï¼Œå®ƒä¼šç»§ç»­åœ¨ Bar ä¸­å¯»æ‰¾__metaclass__å±žæ€§ï¼Œå¹¶å°è¯•åšå’Œå‰é¢åŒæ ·çš„æ“ä½œã€‚å¦‚æžœ Python åœ¨ä»»ä½•çˆ¶ç±»ä¸­éƒ½æ‰¾ä¸åˆ°__metaclass__ï¼Œå®ƒå°±ä¼šåœ¨æ¨¡å—å±‚æ¬¡ä¸­åŽ»å¯»æ‰¾__metaclass__ï¼Œå¹¶å°è¯•åšåŒæ ·çš„æ“ä½œã€‚å¦‚æžœè¿˜æ‰¾ä¸åˆ°__metaclass__ï¼Œpython å°±ä¼šç”¨å†…ç½®çš„ type æ¥åˆ›å»ºè¿™ä¸ªç±»å¯¹è±¡ã€‚ é‚£ä¹ˆåœ¨è‡ªå®šä¹‰ç±»æ˜¯ï¼Œå¯ä»¥åœ¨__metaclass__ä¸­æ”¾ç½®ä»€ä¹ˆä»£ç å‘¢ï¼Ÿ å¯ä»¥æ”¾ç”¨æ¥åˆ›å»ºä¸€ä¸ªç±»çš„ä¸œè¥¿ï¼Œtype æˆ–è€… typeçš„å­ç±»éƒ½å¯ä»¥æ”¾ã€‚ ä»¥ä¸Šé¢çš„ä»£ç ä¸ºä¾‹ï¼Œæˆ‘ä»¬å®žä¾‹åŒ–ä¸€ä¸ªå¯¹è±¡obj=Foo()ï¼Œä¼šå…ˆæ‰§è¡Œ Foo ç±»ä¸­çš„__new__æ–¹æ³•ï¼Œæ²¡æœ‰åˆ™ä½¿ç”¨çˆ¶ç±»çš„__new__æ–¹æ³•ï¼Œåˆ›å»ºä¸€ä¸ªç©ºå¯¹è±¡å¹¶è¿”å›žï¼Œç„¶åŽæ‰§è¡Œ__init__æ–¹æ³•ï¼ˆè‡ªå·±æœ‰å°±ç”¨è‡ªå·±çš„ï¼Œæ²¡æœ‰å°±ç”¨çˆ¶ç±»çš„ï¼Œè¿™é‡Œåˆ†ä¸¤ç§æƒ…å†µï¼Œå¦‚æžœæ˜¯åˆ›å»ºä¸€ä¸ªç±»çš„å¯¹è±¡ï¼Œé‚£å°±æ˜¯ä½¿ç”¨çˆ¶ç±»çš„ï¼Œå› ä¸ºè‡ªå·±æ²¡æœ‰ï¼›å¦‚æžœæ˜¯åˆ›å»ºç±»ï¼Œè‡ªå·±æœ‰å°±æ˜¯ç”¨è‡ªå·±çš„ï¼Œå¦åˆ™å°±æ˜¯ç”¨çˆ¶ç±»çš„ï¼‰ï¼Œä¸ºåˆ›å»ºçš„å¯¹è±¡è¿›è¡Œåˆå§‹åŒ–ã€‚ obj()ä¼šæ‰§è¡Œ Foo ç±»çš„__call__æ–¹æ³•ï¼Œæ²¡æœ‰åˆ™ç”¨çˆ¶ç±»çš„ã€‚çŽ°åœ¨å·²ç»çŸ¥é“ã€‚ç±»åŒæ ·ä¹Ÿæ˜¯å¯¹è±¡ï¼Œæ˜¯å…ƒç±»çš„å¯¹è±¡ï¼Œå³å®žä¾‹åŒ–ä¸€ä¸ªå¯¹è±¡ï¼ˆç±»ï¼‰æ—¶ï¼Œè°ƒç”¨å…¶çˆ¶ç±»ï¼ˆå…ƒç±»ï¼‰çš„__call__æ–¹æ³•ã€‚ å…ƒç±»å¤„ç†è¿‡ç¨‹ï¼šå®šä¹‰ä¸€ä¸ªç±»æ—¶ï¼Œä½¿ç”¨å£°æ˜Žæˆ–è€…é»˜è®¤çš„å…ƒç±»å¯¹è¯¥ç±»è¿›è¡Œåˆ›å»ºï¼Œå¯¹å…ƒç±»æ±‚ type è¿ç®—ï¼Œå¾—åˆ°çˆ¶å…ƒç±»ï¼ˆè¯¥ç±»å£°æ˜Žå…ƒç±»çš„çˆ¶å…ƒç±»ï¼‰ï¼Œè°ƒç”¨çˆ¶å…ƒç±»çš„__call__æ–¹æ³•ï¼Œåœ¨çˆ¶å…ƒç±»çš„__call__æ–¹æ³•ä¸­ï¼Œè°ƒç”¨è¯¥ç±»å£°æ˜Žçš„å…ƒç±»çš„__new__æ¥åˆ›å»ºä¸€ä¸ªç©ºå¯¹è±¡ï¼ˆè¯¥æ–¹æ³•éœ€è¦è¿”å›žä¸€ä¸ªç±»å¯¹è±¡å®žä¾‹ï¼‰ï¼Œç„¶åŽå†è°ƒç”¨è¯¥å…ƒç±»çš„__init__æ–¹æ³•åˆå§‹åŒ–è¯¥ç±»å¯¹è±¡ï¼Œæœ€ç»ˆè¿”å›žä¸€ä¸ªç±»ã€‚ å¯¹è±¡æ—¶ç±»åˆ›å»ºï¼Œåˆ›å»ºå¯¹è±¡æ—¶ç±»çš„__init__æ–¹æ³•è‡ªåŠ¨æ‰§è¡Œï¼Œå¯¹è±¡()åˆ™ä¼šæ‰§è¡Œç±»çš„__call__æ–¹æ³•ï¼› ç±»æ˜¯ç”± type åˆ›å»ºçš„ï¼Œclass å®šä¹‰çš„æ—¶å€™ type çš„__init__æ–¹æ³•è‡ªåŠ¨æ‰§è¡Œï¼Œç±»()åˆ™ä¼šæ‰§è¡Œtype çš„__call__æ–¹æ³•ï¼ˆç±»çš„__new__ï¼Œç±»çš„__init__æ–¹æ³•ï¼‰ å…ƒç±»çš„__new__æ–¹æ³•å’Œ__init__å½±å“çš„æ˜¯åˆ›å»ºç±»çš„å¯¹è±¡è¡Œä¸ºï¼ˆä¸æ˜¯åˆ›å»ºç±»ï¼‰ï¼Œçˆ¶å…ƒç±»çš„__call__æŽ§åˆ¶å¯¹å­å…ƒç±»çš„__new__ï¼Œ__init__çš„è°ƒç”¨ï¼Œå°±æ˜¯è¯´æŽ§åˆ¶ç±»å¯¹è±¡çš„åˆ›å»ºå’Œåˆå§‹åŒ–ã€‚çˆ¶å…ƒç±»çš„__new__å’Œ__init__ç”±æ›´ä¸Šå±‚çš„å…ƒç±»æŽ§åˆ¶ï¼Œä¸€èˆ¬æ¥è¯´ï¼ŒåŽŸå§‹ type æ˜¯æœ€åˆçš„çˆ¶å…ƒç±»ï¼Œå…¶__new__å’Œ__init__æ˜¯æœ€å…·æœ‰æ™®éæ„ä¹‰çš„ï¼Œå³åº”è¯¥æ˜¯åˆ†é…å†…å­˜ã€åˆå§‹åŒ–ç›¸å…³ä¿¡æ¯ç­‰ã€‚å…ƒç±»çš„__call__æ–¹æ³•å½±å“çš„æ˜¯åˆ›å»ºç±»çš„å®žä¾‹å¯¹è±¡çš„è¡Œä¸ºï¼Œæ‰€ä»¥è¿™æ—¶å€™è‡ªå®šä¹‰__call__å°±å¯ä»¥æŽ§åˆ¶åˆ›å»ºç±»å¯¹è±¡çš„å®žä¾‹å¯¹è±¡çš„è¡Œä¸ºäº†ã€‚æ¯”å¦‚å•ä¾‹æ¨¡å¼çš„åˆ›å»ºã€‚ __new__å’Œ__init__å½±å“çš„æ˜¯åˆ›å»ºå¯¹è±¡çš„è¡Œä¸ºï¼Œå½“è¿™äº›å‡½æ•°åœ¨å…ƒç±»ä¸­æ—¶ï¼Œå½±å“åˆ›å»ºçš„æ˜¯ç±»ï¼›åŒç†ï¼Œå½“è¿™ä¸¤ä¸ªå‡½æ•°åœ¨æ™®é€šç±»ä¸­æ—¶ï¼Œå½±å“çš„æ˜¯åˆ›å»ºæ™®é€šçš„å¯¹è±¡å®žä¾‹è¡Œä¸ºã€‚ __call__å½±å“()è°ƒç”¨è¡Œä¸ºï¼Œ__call__æ˜¯åœ¨åˆ›å»ºç±»çš„æ—¶å€™è°ƒç”¨ï¼Œå³ï¼šå®šä¹‰ç±»æ—¶å°±æ˜¯åˆ›å»ºç±»ï¼Œæ­¤æ—¶ä¼šè°ƒç”¨å…ƒç±»çš„__call__ï¼Œå¦‚æžœå…ƒç±»æœ‰ç»§æ‰¿ï¼Œå­å…ƒç±»å®šä¹‰æ—¶æ‰§è¡Œçš„æ˜¯çˆ¶å…ƒç±»çš„__call__ã€‚å¦‚æžœæ˜¯æ™®é€šç±»å®žä¾‹åŒ–ï¼Œè°ƒç”¨çš„æ˜¯æ™®é€šç±»çš„__call__ã€‚ï¼ˆæ˜¨æ™šä¸Šå¡åœ¨è¿™é‡Œäº†ï¼Œå…¶å®žå®žä¾‹åŒ–ä¸€ä¸ªæ™®é€šçš„å¯¹è±¡æ—¶ï¼Œéƒ½æ˜¯è°ƒç”¨å…¶çˆ¶ç±»çš„__call__æ–¹æ³•ï¼Œé™¤äº†å…ƒç±»ï¼Œæ™®é€šç±»ä¸­ä¸ä¼šæœ‰__call__æ–¹æ³•ã€‚ï¼‰ è‡ªå®šä¹‰å…ƒç±»å…ƒç±»çš„ä¸»è¦ç›®çš„æ˜¯åœ¨åˆ›å»ºç±»æ—¶è‡ªåŠ¨æ›´æ”¹ç±»ï¼Œæ¯”å¦‚æƒ³è¦å°†åˆ›å»ºçš„æ‰€æœ‰ç±»éƒ½å˜æˆé¦–å­—æ¯å¤§å†™çš„ï¼š 12345678910111213141516class MymetaClass(type): def __call__(cls, *args, **kwargs): if type(args[0]) != str: raise TypeError('å‚æ•°å¿…é¡»ä¸ºå­—ç¬¦ä¸²ç±»åž‹') obj = object.__new__(cls) obj.__init__(*args, **kwargs) return objclass Foo(metaclass=MymetaClass): def __init__(self, name): self.name = nameres = Foo(123) è¿™å°±æ˜¯è‡ªå®šä¹‰å…ƒç±»çš„å¥½å¤„ï¼Œå¯ä»¥åœ¨__call__æ¥å¯¹ä¼ å…¥çš„å‚æ•°è¿›è¡Œä¸€äº›åˆ¤æ–­æ¥åšä¸€äº›è‡ªå®šä¹‰æ“ä½œã€‚ é€šè¿‡å‡½æ•°12345678910111213141516171819202122232425262728293031323334# the metaclass will automatically get passed the same argument# that you usually pass to `type`def upper_attr(future_class_name, future_class_parents, future_class_attr): """ Return a class object, with the list of its attribute turned into uppercase. """ # pick up any attribute that doesn't start with '__' and uppercase it uppercase_attr = &#123;&#125; for name, val in future_class_attr.items(): if not name.startswith('__'): uppercase_attr[name.upper()] = val else: uppercase_attr[name] = val # let `type` do the class creation return type(future_class_name, future_class_parents, uppercase_attr)__metaclass__ = upper_attr # this will affect all classes in the moduleclass Foo(): # global __metaclass__ won't work with "object" though # but we can define __metaclass__ here instead to affect only this class # and this will work with "object" children bar = 'bip'print(hasattr(Foo, 'bar'))# Out: Falseprint(hasattr(Foo, 'BAR'))# Out: Truef = Foo()print(f.BAR)# Out: 'bip' é€šè¿‡å…ƒç±»123456789101112131415161718192021222324# remember that `type` is actually a class like `str` and `int`# so you can inherit from itclass UpperAttrMetaclass(type): # __new__ is the method called before __init__ # it's the method that creates the object and returns it # while __init__ just initializes the object passed as parameter # you rarely use __new__, except when you want to control how the object # is created. # here the created object is the class, and we want to customize it # so we override __new__ # you can do some stuff in __init__ too if you wish # some advanced use involves overriding __call__ as well, but we won't # see this def __new__(upperattr_metaclass, future_class_name, future_class_parents, future_class_attr): uppercase_attr = &#123;&#125; for name, val in future_class_attr.items(): if not name.startswith('__'): uppercase_attr[name.upper()] = val else: uppercase_attr[name] = val return type(future_class_name, future_class_parents, uppercase_attr) ä½¿ç”¨å…ƒç±»çš„__new__æ–¹æ³•å› ä¸º type çš„__new__ä¸ä¼šè¢«è¦†ç›–ï¼Œæ‰€ä»¥å¯ä»¥ä½¿ç”¨ï¼š 12345678910111213141516class UpperAttrMetaclass(type): def __new__(upperattr_metaclass, future_class_name, future_class_parents, future_class_attr): uppercase_attr = &#123;&#125; for name, val in future_class_attr.items(): if not name.startswith('__'): uppercase_attr[name.upper()] = val else: uppercase_attr[name] = val # reuse the type.__new__ method # this is basic OOP, nothing magic in there return type.__new__(upperattr_metaclass, future_class_name, future_class_parents, uppercase_attr) ä½¿ç”¨ super çš„__new__æ–¹æ³•123456789101112class UpperAttrMetaclass(type): def __new__(cls, clsname, bases, dct): uppercase_attr = &#123;&#125; for name, val in dct.items(): if not name.startswith('__'): uppercase_attr[name.upper()] = val else: uppercase_attr[name] = val return super(UpperAttrMetaclass, cls).__new__(cls, clsname, bases, uppercase_attr) ä½¿ç”¨å…ƒç±»çš„ä»£ç å¤æ‚æ€§èƒŒåŽçš„åŽŸå› ä¸æ˜¯å› ä¸ºå…ƒç±»ï¼Œè€Œæ˜¯å› ä¸ºä½ é€šå¸¸ä½¿ç”¨å…ƒç±»æ¥ä¾èµ–äºŽå†…çœï¼Œæ“çºµç»§æ‰¿ï¼Œå˜é‡__dict__ç­‰ç­‰æ¥åšæ‰­æ›²çš„ä¸œè¥¿ã€‚å®žé™…ä¸Šï¼Œå…ƒç±»ç‰¹åˆ«é€‚ç”¨äºŽåˆ¶ä½œé»‘é­”æ³•ï¼Œå› æ­¤ä¹Ÿå¾ˆå¤æ‚ã€‚ä½†ä»–ä»¬æœ¬èº«å¾ˆç®€å•ï¼š æ‹¦æˆªç±»çš„åˆ›å»º è‡ªå®šä¹‰ç±» è¿”å›žä¿®æ”¹åŽçš„ç±» ä¸ºä»€ä¹ˆè¦ä½¿ç”¨å…ƒç±»è€Œä¸æ˜¯å‡½æ•°ï¼Ÿæ—¢ç„¶__metaclass__å¯ä»¥æŽ¥æ”¶ä»»ä½•è°ƒç”¨ï¼Œé‚£ä¹ˆä¸ºä»€ä¹ˆè¦ä½¿ç”¨ä¸€ä¸ªç±»ï¼Œå› ä¸ºç±»æ˜¾ç„¶æ¯”å‡½æ•°è¦å¤æ‚ã€‚ æœ‰å‡ ä¸ªåŽŸå› ï¼š ç›®çš„å¾ˆæ˜Žç¡®ï¼Œä½ çŸ¥é“ä½¿ç”¨å…ƒç±»ä¼šå‘ç”Ÿä»€ä¹ˆï¼› å¯ä»¥ä½¿ç”¨ OOPã€‚metaclass å¯ä»¥ä»Žå…ƒç±»ç»§æ‰¿ï¼Œè¦†ç›–çˆ¶æ–¹æ³•ï¼Œå…ƒç±»ç”šè‡³å¯ä»¥ä½¿ç”¨å…ƒç±»ï¼› å¦‚æžœä½ æŒ‡å®šäº†å…ƒç±»ï¼Œä½†æ²¡æœ‰ä½¿ç”¨å…ƒç±»å‡½æ•°ï¼Œåˆ™ç±»çš„å­ç±»å°†å…¶å…ƒç±»çš„å®žä¾‹ï¼› å¯ä»¥æ›´å¥½åœ°æž„å»ºä»£ç ï¼› å¯ä»¥å’Œ__new__ï¼Œ__init__ï¼Œ__call__æ­é…ä½¿ç”¨ï¼Œæ¥ä½¿å¾—åˆ›å»ºä¸€ä¸ªç±»æˆ–è€…ä¸€ä¸ªç±»å®žä¾‹å˜å¾—æ›´æœ‰åˆ›é€ æ€§ã€‚ å…ƒç±»åˆ›å»ºç±»ï¼Œè°ƒç”¨å…ƒç±»ä¸­çš„ new å’Œ init æ–¹æ³•ï¼Œç±»åˆ›å»ºç±»å¯¹è±¡ï¼Œè°ƒç”¨å…ƒç±»ä¸­çš„ call æ–¹æ³•ï¼Œcall é‡Œé¢ä¼šè°ƒç”¨ç±»å¯¹è±¡çš„ newï¼ˆé€šå¸¸ä¸º object çš„ newï¼Œäº§ç”Ÿä¸€ä¸ªç©ºå¯¹è±¡ï¼‰ï¼Œç„¶åŽè°ƒç”¨ç±»çš„ init å®žä¾‹åŒ–]]></content>
      <categories>
        <category>Python</category>
      </categories>
  </entry>
  <entry>
    <title><![CDATA[æ•°æ®åº“ï¼ˆå…«ï¼‰]]></title>
    <url>%2F2018%2F11%2F27%2F%E6%95%B0%E6%8D%AE%E5%BA%93%EF%BC%88%E5%85%AB%EF%BC%89%2F</url>
    <content type="text"><![CDATA[å‰è¨€æœ¬ç¯‡åšå®¢å†…å®¹ä¸ºç´¢å¼•ï¼Œç´¢å¼•æ˜¯ä¸ºäº†æé«˜æ•°æ®åº“çš„æŸ¥è¯¢æ•ˆçŽ‡ã€‚ ç´¢å¼•ä»€ä¹ˆæ˜¯ç´¢å¼•ï¼Ÿç´¢å¼•å°±ç›¸å½“äºŽä¹¦çš„ç›®å½•ï¼Œæ˜¯ mysql ä¸­ä¸€ç§ä¸“é—¨çš„æ•°æ®ç»“æž„ï¼Œç§°ä¸º keyï¼Œç´¢å¼•çš„æœ¬è´¨åŽŸç†å°±æ˜¯é€šè¿‡ä¸æ–­åœ°ç¼©å°æŸ¥è¯¢èŒƒå›´ï¼Œæ¥é™ä½Ž io æ¬¡æ•°ä»Žè€Œæå‡æŸ¥è¯¢æ€§èƒ½ã€‚å¼ºè°ƒï¼šä¸€æ—¦ä¸ºè¡¨åˆ›å»ºäº†ç´¢å¼•ï¼Œä»¥åŽçš„æŸ¥è¯¢éƒ½ä¼šå…ˆæŸ¥ç´¢å¼•ï¼Œå†æ ¹æ®ç´¢å¼•å®šä½çš„ç»“æžœåŽ»æ‰¾æ•°æ®ã€‚ ä¸ºä»€ä¹ˆè¦ç”¨ç´¢å¼•ï¼Ÿå¯¹äºŽä¸€ä¸ªåº”ç”¨æ¥è¯´ï¼Œå¯¹æ•°æ®åº“çš„è¯»å†™æ¯”ä¾‹åŸºæœ¬ä¸Šæ˜¯10ï¼š1ï¼Œå³è¯»å¤šå†™å°‘ã€‚è€Œä¸”å¯¹äºŽå†™æ¥è¯´æžå°‘å‡ºçŽ°æ€§èƒ½é—®é¢˜ï¼Œå¤§å¤šæ•°æ€§èƒ½é—®é¢˜éƒ½æ˜¯æ…¢æŸ¥è¯¢æåˆ°åŠ é€ŸæŸ¥ï¼Œè¿™æ—¶å€™å°±å¿…é¡»ç”¨åˆ°ç´¢å¼•ã€‚ ç´¢å¼•çš„å½±å“ åœ¨è¡¨ä¸­æœ‰å¤§é‡æ•°æ®çš„å‰æä¸‹ï¼Œåˆ›å»ºç´¢å¼•é€Ÿåº¦ä¼šå¾ˆæ…¢ï¼› åœ¨ç´¢å¼•åˆ›å»ºå®Œæ¯•åŽï¼Œå¯¹è¡¨çš„æŸ¥è¯¢æ€§èƒ½ä¼šå¤§å¹…åº¦æå‡ï¼Œä½†æ˜¯å†™æ€§èƒ½ä¼šé™ä½Žã€‚ ç£ç›˜ IO ä¸Žé¢„è¯»ç£ç›˜è¯»å–æ•°æ®é çš„æ˜¯æœºæ¢°è¿åŠ¨ï¼Œæ¯æ¬¡è¯»å–æ•°æ®èŠ±è´¹çš„æ—¶é—´å¯ä»¥åˆ†ä¸ºå¯»é“æ—¶é—´ã€æ—‹è½¬å»¶è¿Ÿã€ä¼ è¾“æ—¶é—´ä¸‰ä¸ªéƒ¨åˆ†ï¼Œå¯»é“æ—¶é—´æŒ‡çš„æ˜¯ç£è‡‚ç§»åŠ¨åˆ°æŒ‡å®šç£é“æ‰€éœ€è¦çš„æ—¶é—´ï¼Œä¸»æµç£ç›˜ä¸€èˆ¬åœ¨5ms ä»¥ä¸‹ï¼›æ—‹è½¬å»¶è¿Ÿå°±æ˜¯ç£ç›˜è½¬é€ŸèŠ±è´¹çš„æ—¶é—´ï¼Œæ¯”å¦‚ä¸€ä¸ªç£ç›˜7200è½¬ï¼Œè¡¨ç¤ºæ¯åˆ†é’Ÿèƒ½è½¬7200æ¬¡ï¼Œä¹Ÿå°±æ˜¯ä¸€ç§’é’Ÿèƒ½è½¬120æ¬¡ï¼Œæ—‹è½¬å»¶è¿Ÿå°±æ˜¯1/120/2=4.17msï¼›ä¼ è¾“æ—¶é—´æŒ‡çš„æ˜¯ä»Žç£ç›˜è¯»å‡ºæˆ–å°†æ•°æ®å†™å…¥ç£ç›˜çš„æ—¶é—´ï¼Œä¸€èˆ¬åœ¨é›¶ç‚¹å‡ æ¯«ç§’ï¼Œç›¸å¯¹äºŽå‰ä¸¤ä¸ªæ—¶é—´æ¥è¯´å¯ä»¥å¿½ç•¥ä¸è®¡ã€‚é‚£ä¹ˆè®¿é—®ä¸€æ¬¡ç£ç›˜çš„æ—¶é—´ï¼Œå³ä¸€æ¬¡ç£ç›˜ IO çš„æ—¶é—´çº¦ç­‰äºŽ5+4.17=9ms å·¦å³ï¼Œçœ‹èµ·æ¥è¿˜æŒºçŸ­çš„ï¼Œä½†æ˜¯å¯¹äºŽçŽ°åœ¨çš„è®¡ç®—æœºæ¥è¯´ï¼Œä¸€ç§’é’Ÿå¯ä»¥æ‰§è¡Œ5äº¿æ¡æŒ‡ä»¤ï¼Œæ‰§è¡Œä¸€æ¬¡ IO çš„æ—¶é—´å¯ä»¥æ‰§è¡Œçº¦450ä¸‡æ¡æŒ‡ä»¤ï¼Œæ•°æ®åº“åŠ¨è¾„åä¸‡ç™¾ä¸‡ä¹ƒè‡³åƒä¸‡çº§åˆ«æ•°æ®ï¼Œæ¯æ¬¡9æ¯«ç§’çš„æ—¶é—´ï¼Œå¾ˆæ˜¾ç„¶ä¼šé€ æˆå¤§é‡çš„ç­‰å¾…æ—¶é—´ã€‚ä¸‹å›¾æ˜¯è®¡ç®—æœºç¡¬ä»¶å»¶è¿Ÿçš„å¯¹æ¯”å›¾ï¼š è€ƒè™‘åˆ°ç£ç›˜ IO æ˜¯éžå¸¸é«˜æ˜‚çš„æ“ä½œï¼Œè®¡ç®—æœºæ“ä½œç³»ç»Ÿåšäº†ä¸€äº›ä¼˜åŒ–ï¼Œå½“ä¸€æ¬¡ IO æ—¶ï¼Œä¸å…‰æŠŠå½“å‰åœ°å€çš„æ•°æ®ï¼Œè€Œæ˜¯æŠŠç›¸é‚»çš„æ•°æ®ä¹Ÿéƒ½è¯»å–åˆ°å†…å­˜ç¼“å†²åŒºï¼Œå› ä¸ºå±€éƒ¨é¢„è¯»æ€§åŽŸç†å‘Šè¯‰æˆ‘ä»¬ï¼Œå½“è®¡ç®—æœºè®¿é—®ä¸€ä¸ªåœ°å€çš„æ•°æ®çš„æ—¶å€™ï¼Œä¸Žå…¶ç›¸é‚»çš„æ•°æ®ä¹Ÿä¼šå¾ˆå¿«è¢«è®¿é—®åˆ°ã€‚æ¯ä¸€æ¬¡ IO è¯»å–çš„æ•°æ®ç§°ä¹‹ä¸ºä¸€é¡µï¼ˆpageï¼‰ã€‚å…·ä½“ä¸€é¡µæœ‰å¤šå¤§æ•°æ®è·Ÿæ“ä½œç³»ç»Ÿæœ‰å…³ï¼Œä¸€èˆ¬ä¸º4k æˆ–8kï¼Œä¹Ÿå°±æ˜¯æˆ‘ä»¬è¯»å–ä¸€é¡µå†…çš„æ•°æ®æ—¶å€™æ‰å‘ç”Ÿäº†ä¸€æ¬¡ IOã€‚ ç´¢å¼•çš„æ•°æ®ç»“æž„å¯¹äºŽç´¢å¼•æ¥è¯´ï¼Œå®ƒçš„ç›®çš„å°±æ˜¯é™ä½ŽæŸ¥æ‰¾æ•°æ®æ—¶äº§ç”Ÿçš„ç£ç›˜ IO æ•°é‡çº§ï¼Œæœ€å¥½æ˜¯å¸¸æ•°æ•°é‡çº§ã€‚ç´¢å¼•ä½¿ç”¨çš„æ˜¯ B+æ ‘ï¼ˆB+æ ‘æ˜¯é€šè¿‡äºŒå‰æŸ¥æ‰¾æ ‘ï¼Œå†ç”±å¹³è¡¡äºŒå‰æ ‘ï¼ŒB æ ‘æ¼”åŒ–è€Œæ¥ï¼‰ã€‚ å¦‚ä¸Šå›¾ï¼Œæ˜¯ä¸€é¢— B+æ•°ï¼Œæµ…è“è‰²çš„å—ç§°ä¹‹ä¸ºä¸€ä¸ªç£å—ï¼Œå¯ä»¥çœ‹åˆ°æ¯ä¸ªäººç£å—åŒ…å«å‡ ä¸ªæ•°æ®é¡¹ï¼ˆæ·±è“è‰²æ‰€ç¤ºï¼‰å’ŒæŒ‡é’ˆï¼ˆé»„è‰²æ‰€ç¤ºï¼‰ï¼Œå¦‚ç£ç›˜å¿«1åŒ…å«æ•°æ®é¡¹17å’Œ35ï¼ŒåŒ…å«æŒ‡é’ˆ P1ã€P2ã€P3ï¼ŒP1è¡¨ç¤ºå°äºŽ17çš„ç£ç›˜å—ï¼ŒP2è¡¨ç¤ºåœ¨17å’Œ35ä¹‹é—´çš„ç£ç›˜å—ï¼ŒP3è¡¨ç¤ºå¤§äºŽ35çš„ç£ç›˜å—ã€‚çœŸå®žæ•°æ®å­˜åœ¨äºŽå¶å­èŠ‚ç‚¹å³3ã€5ã€9ã€10ã€13ã€15ã€28ã€29ã€36ã€60ã€75ã€79ã€90ã€99ã€‚éžå¶å­èŠ‚ç‚¹åªä¸è¿‡å­˜å‚¨çœŸå®žçš„æ•°æ®ï¼Œåªå­˜å‚¨æŒ‡å¼•æœç´¢æ–¹å‘çš„æ•°æ®é¡¹ï¼Œå¦‚17ã€35å¹¶ä¸çœŸå®žå­˜åœ¨äºŽæ•°æ®è¡¨ä¸­ã€‚ B+æ ‘æŸ¥æ‰¾è¿‡ç¨‹å¦‚æžœæ‰€ç¤ºï¼Œå¦‚æžœè¦æŸ¥æ‰¾æ•°æ®é¡¹29ï¼Œé‚£ä¹ˆé¦–å…ˆä¼šæŠŠç£ç›˜å—1ç”±ç£ç›˜åŠ è½½åˆ°å†…å­˜ï¼Œæ­¤æ—¶å‘ç”Ÿä¸€æ¬¡ IOï¼Œåœ¨å†…å­˜ä¸­ç”¨äºŒåˆ†æ³•æŸ¥æ‰¾ç¡®å®š29åœ¨17å’Œ35ä¹‹é—´ï¼Œé”å®šç£ç›˜å—1çš„ P2æŒ‡é’ˆï¼Œå†…å­˜æ—¶é—´å› ä¸ºéžå¸¸çŸ­ï¼ˆç›¸æ¯”ç£ç›˜ IOï¼‰å¯ä»¥å¿½ç•¥ä¸è®¡ï¼Œé€šè¿‡ç£ç›˜å—1çš„ P2æŒ‡é’ˆçš„ç£ç›˜åœ°å€æŠŠç£ç›˜å—3ç”±ç£ç›˜åŠ è½½åˆ°å†…å­˜ï¼Œå‘ç”Ÿç¬¬ä¸‰æ¬¡ IOï¼ŒåŒæ—¶å†…å­˜ä¸­åšäºŒåˆ†æŸ¥æ‰¾æ‰¾åˆ°29ï¼Œç»“æŸæŸ¥è¯¢ï¼Œæ€»è®¡ä¸‰æ¬¡ IOã€‚çœŸå®žæƒ…å†µæ˜¯ï¼Œ3å±‚çš„ B+æ•°å¯ä»¥è¡¨ç¤ºä¸Šç™¾ä¸‡çš„æ•°æ®ï¼Œå¦‚æžœä¸Šç™¾ä¸‡çš„æ•°æ®æŸ¥æ‰¾åªéœ€è¦ä¸‰æ¬¡ IOï¼Œæ€§èƒ½æå‡å°†æ˜¯å·¨å¤§çš„ï¼Œå¦‚æžœæ²¡æœ‰ç´¢å¼•ï¼Œæ¯ä¸ªæ•°æ®é¡¹éƒ½è¦å‘ç”Ÿä¸€æ¬¡ IOï¼Œé‚£ä¹ˆæ€»å…±éœ€è¦ç™¾ä¸‡æ¬¡çš„ IOï¼Œæ˜¾ç„¶æˆæœ¬éžå¸¸éžå¸¸é«˜ã€‚ B+æ•°æ€§è´¨ ç´¢å¼•å­—æ®µè¦å°½é‡çš„å°ï¼šIO æ¬¡æ•°å–å†³äºŽ B+æ ‘çš„é«˜åº¦ hï¼Œå‡è®¾å½“å‰æ•°æ®è¡¨çš„æ•°æ®ä¸º Nï¼Œæ¯æ¬¡ç£ç›˜å—çš„æ•°æ®é¡¹çš„æ•°é‡æ˜¯ mï¼Œåˆ™æœ‰ h=log(m+1)Nï¼Œå½“æ•°æ®é‡ N ä¸€å®šçš„æƒ…å†µä¸‹ï¼Œm è¶Šå¤§ï¼Œh è¶Šå°ï¼›è€Œ m=ç£ç›˜å—çš„å¤§å°/æ•°æ®é¡¹çš„å¤§å°ï¼Œç£ç›˜å—çš„å¤§å°ä¹Ÿæ˜¯ä¸€ä¸ªæ•°æ®é¡µçš„å¤§å°ï¼Œæ˜¯å›ºå®šçš„ï¼Œå¦‚æžœæ•°æ®é¡¹å çš„ç©ºé—´è¶Šå°ï¼Œæ•°æ®é¡¹çš„æ•°é‡è¶Šå¤šï¼Œæ ‘çš„é«˜åº¦è¶Šä½Žã€‚è¿™å°±æ˜¯ä¸ºä»€ä¹ˆæ¯ä¸ªæ•°æ®é¡¹ï¼Œå³ç´¢å¼•å­—æ®µè¦å°½é‡çš„å°ï¼Œæ¯”å¦‚ int å 4å­—èŠ‚ï¼Œè¦æ¯” bigint 8å­—èŠ‚å°‘ä¸€åŠã€‚è¿™ä¹Ÿæ˜¯ä¸ºä»€ä¹ˆ B+æ ‘è¦æ±‚æŠŠçœŸå®žçš„æ•°æ®æ”¾åœ¨å¶å­èŠ‚ç‚¹è€Œä¸æ˜¯å†…å±‚èŠ‚ç‚¹ï¼Œä¸€æ—¦æ”¾åˆ°å†…å±‚èŠ‚ç‚¹ï¼Œç£ç›˜å—çš„æ•°æ®é¡¹ä¼šå¤§å¹…åº¦ä¸‹é™ï¼Œå¯¼è‡´æ ‘å¢žé«˜ã€‚å½“æ•°æ®é¡¹ç­‰äºŽ1æ—¶å°†ä¼šé€€åŒ–æˆçº¿æ€§è¡¨ã€‚ ç´¢å¼•çš„æœ€å·¦åŒ¹é…ç‰¹æ€§ï¼šå½“B+æ ‘çš„æ•°æ®é¡¹æ˜¯å¤åˆçš„æ•°æ®ç»“æž„ï¼Œæ¯”å¦‚(name,age,sex)çš„æ—¶å€™ï¼ŒB+æ•°æ˜¯æŒ‰ç…§ä»Žå·¦åˆ°å³çš„é¡ºåºæ¥å»ºç«‹æœç´¢æ ‘çš„ï¼Œæ¯”å¦‚å½“(å¼ ä¸‰,20,F)è¿™æ ·çš„æ•°æ®æ¥æ£€ç´¢çš„æ—¶å€™ï¼ŒB+æ ‘ä¼šä¼˜å…ˆæ¯”è¾ƒnameæ¥ç¡®å®šä¸‹ä¸€æ­¥çš„æ‰€æœæ–¹å‘ï¼Œå¦‚æžœnameç›¸åŒå†ä¾æ¬¡æ¯”è¾ƒageå’Œsexï¼Œæœ€åŽå¾—åˆ°æ£€ç´¢çš„æ•°æ®ï¼›ä½†å½“(20,F)è¿™æ ·çš„æ²¡æœ‰nameçš„æ•°æ®æ¥çš„æ—¶å€™ï¼ŒB+æ ‘å°±ä¸çŸ¥é“ä¸‹ä¸€æ­¥è¯¥æŸ¥å“ªä¸ªèŠ‚ç‚¹ï¼Œå› ä¸ºå»ºç«‹æœç´¢æ ‘çš„æ—¶å€™nameå°±æ˜¯ç¬¬ä¸€ä¸ªæ¯”è¾ƒå› å­ï¼Œå¿…é¡»è¦å…ˆæ ¹æ®nameæ¥æœç´¢æ‰èƒ½çŸ¥é“ä¸‹ä¸€æ­¥åŽ»å“ªé‡ŒæŸ¥è¯¢ã€‚æ¯”å¦‚å½“(å¼ ä¸‰,F)è¿™æ ·çš„æ•°æ®æ¥æ£€ç´¢æ—¶ï¼ŒB+æ ‘å¯ä»¥ç”¨nameæ¥æŒ‡å®šæœç´¢æ–¹å‘ï¼Œä½†ä¸‹ä¸€ä¸ªå­—æ®µageçš„ç¼ºå¤±ï¼Œæ‰€ä»¥åªèƒ½æŠŠåå­—ç­‰äºŽå¼ ä¸‰çš„æ•°æ®éƒ½æ‰¾åˆ°ï¼Œç„¶åŽå†åŒ¹é…æ€§åˆ«æ˜¯Fçš„æ•°æ®äº†ï¼Œ è¿™ä¸ªæ˜¯éžå¸¸é‡è¦çš„æ€§è´¨ï¼Œå³ç´¢å¼•çš„æœ€å·¦åŒ¹é…ç‰¹æ€§ã€‚ èšé›†ç´¢å¼•ä¸Žè¾…åŠ©ç´¢å¼•åœ¨æ•°æ®åº“ä¸­ï¼ŒB+æ ‘çš„é«˜åº¦ä¸€èˆ¬éƒ½åœ¨2~4å±‚ï¼Œè¿™ä¹Ÿå°±æ˜¯è¯´æŸ¥æ‰¾æŸä¸€ä¸ªé”®å€¼çš„è¡Œè®°å½•æ—¶æœ€å¤šåªéœ€è¦2åˆ°4æ¬¡IOï¼Œè¿™å€’ä¸é”™ã€‚å› ä¸ºå½“å‰ä¸€èˆ¬çš„æœºæ¢°ç¡¬ç›˜æ¯ç§’è‡³å°‘å¯ä»¥åš100æ¬¡IOï¼Œ2~4æ¬¡çš„IOæ„å‘³ç€æŸ¥è¯¢æ—¶é—´åªéœ€è¦0.02~0.04ç§’ã€‚ æ•°æ®åº“ä¸­çš„B+æ ‘ç´¢å¼•å¯ä»¥åˆ†ä¸ºèšé›†ç´¢å¼•ï¼ˆclustered indexï¼‰å’Œè¾…åŠ©ç´¢å¼•ï¼ˆsecondary indexï¼‰ï¼Œ èšé›†ç´¢å¼•ä¸Žè¾…åŠ©ç´¢å¼•ç›¸åŒçš„æ˜¯ï¼šä¸ç®¡æ˜¯èšé›†ç´¢å¼•è¿˜æ˜¯è¾…åŠ©ç´¢å¼•ï¼Œå…¶å†…éƒ¨éƒ½æ˜¯B+æ ‘çš„å½¢å¼ï¼Œå³é«˜åº¦æ˜¯å¹³è¡¡çš„ï¼Œå¶å­ç»“ç‚¹å­˜æ”¾ç€æ‰€æœ‰çš„æ•°æ®ã€‚ èšé›†ç´¢å¼•ä¸Žè¾…åŠ©ç´¢å¼•ä¸åŒçš„æ˜¯ï¼šå¶å­èŠ‚ç‚¹å­˜æ”¾çš„æ˜¯å¦æ˜¯ä¸€æ¡å®Œæ•´çš„è®°å½•ã€‚ èšé›†ç´¢å¼•1234567InnoDBå­˜å‚¨å¼•æ“Žè¡¨ç¤ºç´¢å¼•ç»„ç»‡è¡¨ï¼Œå³è¡¨ä¸­æ•°æ®æŒ‰ç…§ä¸»é”®é¡ºåºå­˜æ”¾ã€‚è€Œèšé›†ç´¢å¼•ï¼ˆclustered indexï¼‰å°±æ˜¯æŒ‰ç…§æ¯å¼ è¡¨çš„ä¸»é”®æž„é€ ä¸€æ£µB+æ ‘ï¼ŒåŒæ—¶å¶å­ç»“ç‚¹å­˜æ”¾çš„å³ä¸ºæ•´å¼ è¡¨çš„è¡Œè®°å½•æ•°æ®ï¼Œä¹Ÿå°†èšé›†ç´¢å¼•çš„å¶å­ç»“ç‚¹ç§°ä¸ºæ•°æ®é¡µã€‚èšé›†ç´¢å¼•çš„è¿™ä¸ªç‰¹æ€§å†³å®šäº†ç´¢å¼•ç»„ç»‡è¡¨ä¸­æ•°æ®ä¹Ÿæ˜¯ç´¢å¼•çš„ä¸€éƒ¨åˆ†ã€‚åŒB+æ ‘æ•°æ®ç»“æž„ä¸€æ ·ï¼Œæ¯ä¸ªæ•°æ®é¡µéƒ½é€šè¿‡ä¸€ä¸ªåŒå‘é“¾è¡¨æ¥è¿›è¡Œé“¾æŽ¥ã€‚ å¦‚æžœæœªå®šä¹‰ä¸»é”®ï¼ŒMySQLå–ç¬¬ä¸€ä¸ªå”¯ä¸€ç´¢å¼•ï¼ˆuniqueï¼‰è€Œä¸”åªå«éžç©ºåˆ—ï¼ˆNOT NULLï¼‰ä½œä¸ºä¸»é”®ï¼ŒInnoDBä½¿ç”¨å®ƒä½œä¸ºèšç°‡ç´¢å¼•ã€‚ å¦‚æžœæ²¡æœ‰è¿™æ ·çš„åˆ—ï¼ŒInnoDBå°±è‡ªå·±äº§ç”Ÿä¸€ä¸ªè¿™æ ·çš„IDå€¼ï¼Œå®ƒæœ‰å…­ä¸ªå­—èŠ‚ï¼Œè€Œä¸”æ˜¯éšè—çš„ï¼Œä½¿å…¶ä½œä¸ºèšç°‡ç´¢å¼•ã€‚ç”±äºŽå®žé™…çš„æ•°æ®é¡µåªèƒ½æŒ‰ç…§ä¸€æ£µB+æ ‘è¿›è¡ŒæŽ’åºï¼Œå› æ­¤æ¯å¼ è¡¨åªèƒ½æ‹¥æœ‰ä¸€ä¸ªèšé›†ç´¢å¼•ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼ŒæŸ¥è¯¢ä¼˜åŒ–å™¨å€¾å‘äºŽé‡‡ç”¨èšé›†ç´¢å¼•ã€‚å› ä¸ºèšé›†ç´¢å¼•èƒ½å¤Ÿåœ¨B+æ ‘ç´¢å¼•çš„å¶å­èŠ‚ç‚¹ä¸Šç›´æŽ¥æ‰¾åˆ°æ•°æ®ã€‚æ­¤å¤–ç”±äºŽå®šä¹‰äº†æ•°æ®çš„é€»è¾‘é¡ºåºï¼Œèšé›†ç´¢å¼•èƒ½å¤Ÿç‰¹åˆ«å¿«åœ°è®¿é—®é’ˆå¯¹èŒƒå›´å€¼å¾—æŸ¥è¯¢ã€‚ èšé›†ç´¢å¼•ä¼˜ç‚¹ å®ƒå¯¹ä¸»é”®çš„æŽ’åºæŸ¥æ‰¾å’ŒèŒƒå›´æŸ¥æ‰¾é€Ÿåº¦éžå¸¸å¿«ï¼Œå¶å­èŠ‚ç‚¹çš„æ•°æ®å°±æ˜¯ç”¨æˆ·æ‰€è¦æŸ¥è¯¢çš„æ•°æ®ã€‚å¦‚ç”¨æˆ·éœ€è¦æŸ¥æ‰¾ä¸€å¼ è¡¨ï¼ŒæŸ¥è¯¢æœ€åŽçš„10ä½ç”¨æˆ·ä¿¡æ¯ï¼Œç”±äºŽ B+æ ‘ç´¢å¼•æ˜¯åŒå‘é“¾è¡¨ï¼Œæ‰€ä»¥ç”¨æˆ·å¯ä»¥å¿«é€Ÿæ‰¾åˆ°æœ€åŽä¸€ä¸ªæ•°æ®é¡µï¼Œå¹¶å–å‡º10æ¡è®°å½•ã€‚ èŒƒå›´æŸ¥è¯¢ï¼Œå³å¦‚æžœè¦æŸ¥æ‰¾æŸä¸€èŒƒå›´å†…çš„æ•°æ®ï¼Œé€šè¿‡å¶å­èŠ‚ç‚¹çš„ä¸Šå±‚èŠ‚ç‚¹å°±å¯ä»¥å¾—åˆ°é¡µçš„èŒƒå›´ï¼Œä¹‹åŽç›´æŽ¥è¯»å–æ•°æ®é¡µå³å¯ã€‚ è¾…åŠ©ç´¢å¼•è¡¨ä¸­é™¤äº†èšé›†ç´¢å¼•å¤–å…¶ä»–ç´¢å¼•éƒ½æ˜¯è¾…åŠ©ç´¢å¼•ï¼Œä¹Ÿç§°ä¸ºéžèšé›†ç´¢å¼•ï¼Œä¸Žèšé›†ç´¢å¼•çš„åŒºåˆ«æ˜¯ï¼šè¾…åŠ©ç´¢å¼•çš„å¶å­èŠ‚ç‚¹ä¸åŒ…å«è¡Œè®°å½•çš„å…¨éƒ¨æ•°æ®ã€‚ å¶å­èŠ‚ç‚¹é™¤äº†åŒ…å«é”®å€¼ä»¥å¤–ï¼Œæ¯ä¸ªå¶å­èŠ‚ç‚¹ä¸­çš„ç´¢å¼•è¡Œä¸­è¿˜åŒ…å«ä¸€ä¸ªä¹¦ç­¾ã€‚è¯¥ä¹¦ç­¾ç”¨æ¥å‘Šè¯‰ InnoDB å­˜å‚¨å¼•æ“ŽåŽ»å“ªé‡Œå¯ä»¥æ‰¾åˆ°ä¸Žç´¢å¼•ç›¸å¯¹åº”çš„è¡Œæ•°æ®ã€‚ ç”±äºŽ InnoDB å­˜å‚¨å¼•æ“Žæ˜¯ç´¢å¼•ç»„ç»‡è¡¨ï¼Œå› æ­¤ InnoDB å­˜å‚¨å¼•æ“Žçš„è¾…åŠ©ç´¢å¼•çš„ä¹¦ç­¾å°±æ˜¯ç›¸åº”è¡Œæ•°æ®çš„èšé›†ç´¢å¼•é”®ã€‚å¦‚ä¸‹å›¾ï¼š è¾…åŠ©ç´¢å¼•çš„å­˜åœ¨å¹¶ä¸å½±å“æ•°æ®å†èšé›†ç´¢å¼•ä¸­çš„ç»„ç»‡ï¼Œå› æ­¤æ¯å¼ è¡¨ä¸­å¯ä»¥æœ‰å¤šä¸ªè¾…åŠ©ç´¢å¼•ï¼Œä½†åªèƒ½æœ‰ä¸€ä¸ªèšé›†ç´¢å¼•ã€‚å½“é€šè¿‡è¾…åŠ©ç´¢å¼•æ¥å¯»æ‰¾æ•°æ®æ—¶ï¼ŒInnoDBå­˜å‚¨å¼•æ“Žä¼šéåŽ†è¾…åŠ©ç´¢å¼•å¹¶é€šè¿‡å¶å­çº§åˆ«çš„æŒ‡é’ˆèŽ·å¾—æŒ‡å‘ä¸»é”®ç´¢å¼•çš„ä¸»é”®ï¼Œç„¶åŽé€šè¿‡ä¸»é”®ç´¢å¼•æ¥æ‰¾åˆ°ä¸€ä¸ªå®Œæ•´çš„è¡Œè®°å½•ã€‚ ä¸¾ä¾‹æ¥è¯´ï¼Œå¦‚æžœåœ¨ä¸€æ£µé«˜åº¦ä¸º3çš„è¾…åŠ©ç´¢å¼•æ ‘ç§æŸ¥æ‰¾æ•°æ®ï¼Œé‚£éœ€è¦å¯¹è¿™ä¸ªè¾…åŠ©ç´¢å¼•æ ‘éåŽ†3æ¬¡æ‰¾åˆ°æŒ‡å®šä¸»é”®ï¼Œå¦‚æžœèšé›†ç´¢å¼•æ ‘çš„é«˜åº¦åŒæ ·ä¸º3ï¼Œé‚£ä¹ˆè¿˜éœ€è¦å¯¹èšé›†ç´¢å¼•æ ‘è¿›è¡Œä¸‰æ¬¡æŸ¥æ‰¾ï¼Œæœ€ç»ˆæ‰¾åˆ°ä¸€ä¸ªå®Œæ•´çš„è¡Œæ•°æ®æ‰€åœ¨çš„é¡µï¼Œå› æ­¤ä¸€å…±éœ€è¦6æ¬¡ IO è®¿é—®æ‰èƒ½å¾—åˆ°æœ€ç»ˆçš„ä¸€ä¸ªæ•°æ®é¡µã€‚ MySQL ç´¢å¼•ç®¡ç†ç´¢å¼•çš„åŠŸèƒ½ ç´¢å¼•çš„åŠŸèƒ½å°±æ˜¯åŠ é€ŸæŸ¥æ‰¾ mysql ä¸­çš„ primary keyã€uniqueï¼Œè”åˆå”¯ä¸€éƒ½æ˜¯ç´¢å¼•ï¼Œè¿™äº›ç´¢å¼•é™¤äº†åŠ é€ŸæŸ¥æ‰¾ä»¥å¤–ï¼Œè¿˜æœ‰çº¦æŸçš„åŠŸèƒ½ã€‚ MySQL å¸¸ç”¨ç´¢å¼• æ™®é€šç´¢å¼•ï¼šindex åŠ é€ŸæŸ¥æ‰¾ å”¯ä¸€ç´¢å¼•ï¼š ä¸»é”®ç´¢å¼• primary keyï¼šåŠ é€ŸæŸ¥æ‰¾+çº¦æŸï¼ˆä¸èƒ½ä¸ºç©ºï¼Œä¸èƒ½é‡å¤ï¼‰ å”¯ä¸€ç´¢å¼• uniqueï¼šåŠ é€ŸæŸ¥æ‰¾+çº¦æŸï¼ˆä¸èƒ½é‡å¤ï¼‰ è”åˆç´¢å¼•ï¼š primary key(id,name)ï¼šè”åˆä¸»é”®ç´¢å¼• unique(id,name)ï¼šè”åˆå”¯ä¸€ç´¢å¼• index(id,name)ï¼šè”åˆæ™®é€šç´¢å¼• åˆ›å»º/åˆ é™¤ç´¢å¼• åˆ›å»ºè¡¨æ—¶ 12345mysql&gt; create table è¡¨å( å­—æ®µå1 æ•°æ®ç±»åž‹ [å®Œæ•´æ€§çº¦æŸæ¡ä»¶...], å­—æ®µå2 æ•°æ®ç±»åž‹ [å®Œæ•´æ€§çº¦æŸæ¡ä»¶...], [unique | fulltext | spatial] index | key [ç´¢å¼•å] (å­—æ®µå[(é•¿åº¦)] [asc | desc])); åœ¨å·²å­˜åœ¨çš„è¡¨ä¸Šåˆ›å»ºç´¢å¼• 12mysql&gt; create [unique | fulltext | spatial ] index ç´¢å¼•å on è¡¨å (å­—æ®µå[(é•¿åº¦)] [asc | desc]); Alter tableåœ¨å·²å­˜åœ¨çš„è¡¨ä¸Šåˆ›å»ºç´¢å¼• 12mysql&gt; alter table è¡¨å add [unique | fulltext | spatial ] index ç´¢å¼•å(å­—æ®µå[(é•¿åº¦)] [asc | desc]); åˆ é™¤ç´¢å¼• 1mysql&gt; drop index ç´¢å¼•å on è¡¨å; æ€»ç»“123456789101. ä¸€å®šæ˜¯ä¸ºæœç´¢æ¡ä»¶çš„å­—æ®µåˆ›å»ºç´¢å¼•ï¼Œæ¯”å¦‚select * from s1 where id = 333;å°±éœ€è¦ä¸ºidåŠ ä¸Šç´¢å¼•2. åœ¨è¡¨ä¸­å·²ç»æœ‰å¤§é‡æ•°æ®çš„æƒ…å†µä¸‹ï¼Œå»ºç´¢å¼•ä¼šå¾ˆæ…¢ï¼Œä¸”å ç”¨ç¡¬ç›˜ç©ºé—´ï¼Œå»ºå®ŒåŽæŸ¥è¯¢é€Ÿåº¦åŠ å¿«æ¯”å¦‚create index idx on s1(id);ä¼šæ‰«æè¡¨ä¸­æ‰€æœ‰çš„æ•°æ®ï¼Œç„¶åŽä»¥idä¸ºæ•°æ®é¡¹ï¼Œåˆ›å»ºç´¢å¼•ç»“æž„ï¼Œå­˜æ”¾äºŽç¡¬ç›˜çš„è¡¨ä¸­ã€‚å»ºå®Œä»¥åŽï¼Œå†æŸ¥è¯¢å°±ä¼šå¾ˆå¿«äº†ã€‚3. éœ€è¦æ³¨æ„çš„æ˜¯ï¼šinnodbè¡¨çš„ç´¢å¼•ä¼šå­˜æ”¾äºŽs1.ibdæ–‡ä»¶ä¸­ï¼Œè€Œmyisamè¡¨çš„ç´¢å¼•åˆ™ä¼šæœ‰å•ç‹¬çš„ç´¢å¼•æ–‡ä»¶table1.MYIMySAMç´¢å¼•æ–‡ä»¶å’Œæ•°æ®æ–‡ä»¶æ˜¯åˆ†ç¦»çš„ï¼Œç´¢å¼•æ–‡ä»¶ä»…ä¿å­˜æ•°æ®è®°å½•çš„åœ°å€ã€‚è€Œåœ¨innodbä¸­ï¼Œè¡¨æ•°æ®æ–‡ä»¶æœ¬èº«å°±æ˜¯æŒ‰ç…§B+Treeï¼ˆBTreeå³Balance Trueï¼‰ç»„ç»‡çš„ä¸€ä¸ªç´¢å¼•ç»“æž„ï¼Œè¿™æ£µæ ‘çš„å¶èŠ‚ç‚¹dataåŸŸä¿å­˜äº†å®Œæ•´çš„æ•°æ®è®°å½•ã€‚è¿™ä¸ªç´¢å¼•çš„keyæ˜¯æ•°æ®è¡¨çš„ä¸»é”®ï¼Œå› æ­¤innodbè¡¨æ•°æ®æ–‡ä»¶æœ¬èº«å°±æ˜¯ä¸»ç´¢å¼•ã€‚å› ä¸ºinndobçš„æ•°æ®æ–‡ä»¶è¦æŒ‰ç…§ä¸»é”®èšé›†ï¼Œæ‰€ä»¥innodbè¦æ±‚è¡¨å¿…é¡»è¦æœ‰ä¸»é”®ï¼ˆMyisamå¯ä»¥æ²¡æœ‰ï¼‰ï¼Œå¦‚æžœæ²¡æœ‰æ˜¾å¼å®šä¹‰ï¼Œåˆ™mysqlç³»ç»Ÿä¼šè‡ªåŠ¨é€‰æ‹©ä¸€ä¸ªå¯ä»¥å”¯ä¸€æ ‡è¯†æ•°æ®è®°å½•çš„åˆ—ä½œä¸ºä¸»é”®ï¼Œå¦‚æžœä¸å­˜åœ¨è¿™ç§åˆ—ï¼Œåˆ™mysqlä¼šè‡ªåŠ¨ä¸ºinnodbè¡¨ç”Ÿæˆä¸€ä¸ªéšå«å­—æ®µä½œä¸ºä¸»é”®ï¼Œè¿™å­—æ®µçš„é•¿åº¦ä¸º6ä¸ªå­—èŠ‚ï¼Œç±»åž‹ä¸ºé•¿æ•´åž‹. æ­£ç¡®ä½¿ç”¨ç´¢å¼•å¹¶ä¸æ˜¯è¯´åˆ›å»ºäº†ç´¢å¼•å°±ä¸€å®šä¼šåŠ å¿«æŸ¥è¯¢é€Ÿåº¦ï¼Œè‹¥æƒ³åˆ©ç”¨ç´¢å¼•è¾¾åˆ°é¢„æœŸçš„æé«˜æŸ¥è¯¢é€Ÿåº¦çš„æ•ˆæžœï¼Œæˆ‘ä»¬åœ¨æ·»åŠ ç´¢å¼•æ—¶ï¼Œå¿…é¡»è€ƒè™‘ä»¥ä¸‹é—®é¢˜ï¼š èŒƒå›´é—®é¢˜ï¼Œæˆ–è€…è¯´æ¡ä»¶ä¸æ˜Žç¡®ï¼Œæ¡ä»¶ä¸­å‡ºçŽ°è¿™äº›ç¬¦å·ï¼š&gt;ã€&gt;=ã€&lt;ã€&lt;=ã€!=ã€between andã€like å°½é‡é€‰æ‹©åŒºåˆ†åº¦é«˜çš„åˆ—ä½œä¸ºç´¢å¼•ï¼ŒåŒºåˆ†åº¦çš„å…¬å¼æ˜¯ count(distinct col)/count(*)ï¼Œè¡¨ç¤ºå­—æ®µä¸é‡å¤çš„æ¯”ä¾‹ï¼Œæ¯”ä¾‹è¶Šå¤§æˆ‘ä»¬æ‰«æçš„è®°å½•è¶Šå°‘ï¼Œå”¯ä¸€é”®çš„åŒºåˆ†åº¦æ˜¯1ï¼Œè€Œä¸€äº›çŠ¶æ€ã€æ€§åˆ«å­—æ®µå¯èƒ½åœ¨æ•°æ®é‡ç‰¹åˆ«å¤§çš„åœ°æ–¹å°±æ˜¯0ï¼Œä¸€èˆ¬éœ€è¦ join çš„å­—æ®µè¦æ±‚éƒ½æ˜¯0.1ä»¥ä¸Šï¼Œå³å¹³å‡1æ¬¡æ‰«æ10æ¡è®°å½• =å’Œ in å¯ä»¥ä¹±åºï¼Œæ¯”å¦‚ a=1 and c=3å»ºç«‹(a,b,c)ç´¢å¼•å¯ä»¥ä»»æ„é¡ºåºï¼Œmysql çš„æŸ¥è¯¢ä¼˜åŒ–å™¨ä¼šä¼˜åŒ–æˆç´¢å¼•å¯ä»¥è¯†åˆ«çš„å½¢å¼ ç´¢å¼•åˆ—ä¸èƒ½å‚ä¸Žè®¡ç®—ï¼Œä¿æŒåˆ—â€œå¹²å‡€â€ï¼Œæ¯”å¦‚from_unixtime(create_time) = â€™2014-05-29â€™å°±ä¸èƒ½ä½¿ç”¨åˆ°ç´¢å¼•ï¼ŒåŽŸå› å¾ˆç®€å•ï¼Œb+æ ‘ä¸­å­˜çš„éƒ½æ˜¯æ•°æ®è¡¨ä¸­çš„å­—æ®µå€¼ï¼Œä½†è¿›è¡Œæ£€ç´¢æ—¶ï¼Œéœ€è¦æŠŠæ‰€æœ‰å…ƒç´ éƒ½åº”ç”¨å‡½æ•°æ‰èƒ½æ¯”è¾ƒï¼Œæ˜¾ç„¶æˆæœ¬å¤ªå¤§ã€‚æ‰€ä»¥è¯­å¥åº”è¯¥å†™æˆcreate_time = unix_timestamp(â€™2014-05-29â€™) and/or 1234567891011121314151617181920211ã€andä¸Žorçš„é€»è¾‘ æ¡ä»¶1 and æ¡ä»¶2:æ‰€æœ‰æ¡ä»¶éƒ½æˆç«‹æ‰ç®—æˆç«‹ï¼Œä½†å‡¡è¦æœ‰ä¸€ä¸ªæ¡ä»¶ä¸æˆç«‹åˆ™æœ€ç»ˆç»“æžœä¸æˆç«‹ æ¡ä»¶1 or æ¡ä»¶2:åªè¦æœ‰ä¸€ä¸ªæ¡ä»¶æˆç«‹åˆ™æœ€ç»ˆç»“æžœå°±æˆç«‹2ã€andçš„å·¥ä½œåŽŸç† æ¡ä»¶ï¼š a = 10 and b = &apos;xxx&apos; and c &gt; 3 and d =4 ç´¢å¼•ï¼š åˆ¶ä½œè”åˆç´¢å¼•(d,a,b,c) å·¥ä½œåŽŸç†: å¯¹äºŽè¿žç»­å¤šä¸ªandï¼šmysqlä¼šæŒ‰ç…§è”åˆç´¢å¼•ï¼Œä»Žå·¦åˆ°å³çš„é¡ºåºæ‰¾ä¸€ä¸ªåŒºåˆ†åº¦é«˜çš„ç´¢å¼•å­—æ®µ(è¿™æ ·ä¾¿å¯ä»¥å¿«é€Ÿé”å®šå¾ˆå°çš„èŒƒå›´)ï¼ŒåŠ é€ŸæŸ¥è¯¢ï¼Œå³æŒ‰ç…§dâ€”&gt;a-&gt;b-&gt;cçš„é¡ºåº3ã€orçš„å·¥ä½œåŽŸç† æ¡ä»¶ï¼š a = 10 or b = &apos;xxx&apos; or c &gt; 3 or d =4 ç´¢å¼•ï¼š åˆ¶ä½œè”åˆç´¢å¼•(d,a,b,c) å·¥ä½œåŽŸç†: å¯¹äºŽè¿žç»­å¤šä¸ªorï¼šmysqlä¼šæŒ‰ç…§æ¡ä»¶çš„é¡ºåºï¼Œä»Žå·¦åˆ°å³ä¾æ¬¡åˆ¤æ–­ï¼Œå³a-&gt;b-&gt;c-&gt;dåœ¨å·¦è¾¹æ¡ä»¶æˆç«‹ä½†æ˜¯ç´¢å¼•å­—æ®µçš„åŒºåˆ†åº¦ä½Žçš„æƒ…å†µä¸‹(name ä¸Ž gender å‡å±žäºŽè¿™ç§æƒ…å†µ)ï¼Œä¼šä¾æ¬¡å¾€å³æ‰¾åˆ°ä¸€ä¸ªåŒºåˆ†åº¦é«˜çš„ç´¢å¼•å­—æ®µï¼ŒåŠ é€ŸæŸ¥è¯¢ æœ€å·¦å‰ç¼€åŒ¹é…åŽŸåˆ™ï¼Œéžå¸¸é‡è¦çš„åŽŸåˆ™ï¼Œå¯¹äºŽç»„åˆç´¢å¼•mysqlä¼šä¸€ç›´å‘å³åŒ¹é…ç›´åˆ°é‡åˆ°èŒƒå›´æŸ¥è¯¢(&gt;ã€&lt;ã€betweenã€like)å°±åœæ­¢åŒ¹é…(æŒ‡çš„æ˜¯èŒƒå›´å¤§äº†ï¼Œæœ‰ç´¢å¼•é€Ÿåº¦ä¹Ÿæ…¢)ï¼Œæ¯”å¦‚a = 1 and b = 2 and c &gt; 3 and d = 4 å¦‚æžœå»ºç«‹(a,b,c,d)é¡ºåºçš„ç´¢å¼•ï¼Œdæ˜¯ç”¨ä¸åˆ°ç´¢å¼•çš„ï¼Œå¦‚æžœå»ºç«‹(a,b,d,c)çš„ç´¢å¼•åˆ™éƒ½å¯ä»¥ç”¨åˆ°ï¼Œa,b,dçš„é¡ºåºå¯ä»¥ä»»æ„è°ƒæ•´ã€‚ å…¶ä»–æƒ…å†µ 123456789- é¿å…ä½¿ç”¨select *- count(1)æˆ–count(åˆ—) ä»£æ›¿ count(*)- åˆ›å»ºè¡¨æ—¶å°½é‡æ—¶ char ä»£æ›¿ varchar- è¡¨çš„å­—æ®µé¡ºåºå›ºå®šé•¿åº¦çš„å­—æ®µä¼˜å…ˆ- ç»„åˆç´¢å¼•ä»£æ›¿å¤šä¸ªå•åˆ—ç´¢å¼•ï¼ˆç»å¸¸ä½¿ç”¨å¤šä¸ªæ¡ä»¶æŸ¥è¯¢æ—¶ï¼‰- å°½é‡ä½¿ç”¨çŸ­ç´¢å¼•- ä½¿ç”¨è¿žæŽ¥ï¼ˆJOINï¼‰æ¥ä»£æ›¿å­æŸ¥è¯¢(Sub-Queries)- è¿žè¡¨æ—¶æ³¨æ„æ¡ä»¶ç±»åž‹éœ€ä¸€è‡´- ç´¢å¼•æ•£åˆ—å€¼ï¼ˆé‡å¤å°‘ï¼‰ä¸é€‚åˆå»ºç´¢å¼•ï¼Œä¾‹ï¼šæ€§åˆ«ä¸é€‚åˆ]]></content>
      <categories>
        <category>æ•°æ®åº“</category>
      </categories>
  </entry>
  <entry>
    <title><![CDATA[æ•°æ®åº“ï¼ˆä¸ƒï¼‰]]></title>
    <url>%2F2018%2F11%2F26%2F%E6%95%B0%E6%8D%AE%E5%BA%93%EF%BC%88%E4%B8%83%EF%BC%89%2F</url>
    <content type="text"><![CDATA[å‰è¨€æœ¬ç¯‡åšå®¢å­¦ä¹ å†…å®¹ä¸ºè§†å›¾ã€è§¦å‘å™¨ã€äº‹åŠ¡ã€å­˜å‚¨è¿‡ç¨‹ã€å‡½æ•°ã€æ•°æ®å¤‡ä»½åŠæµç¨‹æŽ§åˆ¶ã€‚ è§†å›¾ä»€ä¹ˆæ˜¯è§†å›¾ï¼Ÿè§†å›¾æ˜¯ç”±ä¸€å¼ è¡¨æˆ–å¤šå¼ è¡¨çš„æŸ¥è¯¢ç»“æžœæž„æˆçš„ä¸€å¼ è™šæ‹Ÿè¡¨ï¼Œå»ºç«‹ä¸€å¼ è§†å›¾åŽä¼šåœ¨æ•°æ®åº“ä¸­ä¿ç•™ä¸€ä¸ªä»¥ frm åŽç¼€ç»“å°¾çš„æ–‡ä»¶ï¼Œåªä¿ç•™äº†æ•°æ®ç»“æžœï¼Œæ‰€æœ‰çš„æ•°æ®éƒ½æ¥è‡ª sql è¯­å¥ã€‚ ä¸ºä»€ä¹ˆä½¿ç”¨è§†å›¾ï¼Ÿåœ¨è¿›è¡Œå¤šè¡¨æŸ¥è¯¢çš„æ—¶å€™ï¼Œsql è¯­å¥ä¼šéžå¸¸éžå¸¸é•¿ï¼Œæ¯”å¦‚ 1select t1.student_id from (select student_id,num from score where course_id = (select cid from course where cname = &apos;ç‰©ç†&apos;)) as t1 join(select student_id,num from score where course_id = (select cid from course where cname = &apos;ç”Ÿç‰©&apos;)) as t2 on t1.student_id = t2.student_id where t1.num &gt; t2.num; çœ‹æ˜¯ä¸æ˜¯å¾ˆé•¿ï¼Œè¿™è¿˜åªæ˜¯ä¸‰è¡¨æŸ¥è¯¢ï¼Œå¦‚æžœé‡åˆ°æ›´åŠ å¤æ‚çš„è¡¨ç»“æž„è‚¯å®šä¼šæ›´é•¿ï¼Œä¸è¿‡é‚£æ ·çš„è¯å¯¹è¡¨çš„ç»´æŠ¤å›°éš¾ä¹ŸåŠ å¤§äº†ã€‚å¦‚æžœæ¯æ¬¡éƒ½ç¼–å†™éœ€è¦å¾—åˆ°ç›¸åŒæ•°æ®çš„ sql è¯­å¥ä¼šæ˜¯ä¸€ä»¶å¾ˆéº»çƒ¦çš„äº‹ï¼Œå¯ä»¥æŠŠç»å¸¸éœ€è¦æŸ¥è¯¢çš„ sql è¯­å¥è½¬å˜ä¸ºè§†å›¾å°±å¯ä»¥é¿å…é‡å¤å†™ sql è¯­å¥çš„é—®é¢˜ã€‚ è§†å›¾é™¤äº†å¯ä»¥å‡å°‘ sql è¯­å¥çš„ç¼–å†™æ¬¡æ•°ï¼Œè¿˜å¯ä»¥ä½¿ç”¨ä¸åŒçš„è§†å›¾æ¥å±•ç¤ºä¸åŒæ•°æ®çš„è®¿é—®ï¼Œé‚£ä¹ˆç»™æŸäº›ç”¨æˆ·è®¾ç½®æƒé™ä¸å°±å¯ä»¥äº†å—ï¼Ÿæ³¨æ„ï¼Œè®¾ç½®çš„æƒé™è¦ä¹ˆåªèƒ½çœ‹æŸå¼ è¡¨çš„å…¨éƒ¨æ•°æ®ï¼Œè¦ä¹ˆåªèƒ½çœ‹æŸå¼ è¡¨ä¸­çš„æŸä¸ª column çš„æ•°æ®ï¼Œä¹Ÿå°±æ˜¯åˆ—æ•°æ®ï¼Œåˆ—æ•°æ®åªæ˜¯ä¿å­˜äº†å­—æ®µåï¼Œæ¯”å¦‚è¯´æˆ‘è¦æŸ¥çœ‹æˆ‘çš„å½“æœˆå·¥èµ„ï¼Œæ˜¯éœ€è¦æŸ¥çœ‹ä¸€è¡Œæ•°æ®çš„ï¼Œè¿™æ ·æƒé™å°±å¸®ä¸äº†å¿™äº†ã€‚ï¼ˆå½“ç„¶å¯ä»¥åŠ  where æ¡ä»¶ï¼Œåœ¨è¿™é‡Œæ˜¯ä»‹ç»è§†å›¾ï¼‰ ä½¿ç”¨æ–¹æ³•åˆ›å»ºè§†å›¾1mysql&gt; create [or replace] view è§†å›¾å [(column_list)] as select_statement; åŠ ä¸Š or replace æ—¶å¦‚æžœå·²ç»å­˜åœ¨ç›¸åŒè§†å›¾åˆ™æ›¿æ¢åŽŸæœ‰è§†å›¾ï¼Œcolumn_list æŒ‡å®šå“ªäº›å­—æ®µè¦å‡ºçŽ°åœ¨è§†å›¾ä¸­ã€‚æ³¨æ„ï¼šç”±äºŽæ˜¯ä¸€å¼ è™šæ‹Ÿè¡¨ï¼Œè§†å›¾ä¸­çš„æ•°æ®å®žé™…æ¥æºäºŽå…¶ä»–è¡¨ï¼Œæ‰€ä»¥åœ¨è§†å›¾ä¸­çš„æ•°æ®ä¸ä¼šå‡ºçŽ°åœ¨ç¡¬ç›˜ä¸Šï¼Œä¹Ÿå°±æ˜¯åªä¼šä¿å­˜ä¸€ä»½æ•°æ®ç»“æž„ã€‚ ä½¿ç”¨è§†å›¾è§†å›¾æ˜¯ä¸€å¼ è™šæ‹Ÿè¡¨ï¼Œæ‰€ä»¥ä½¿ç”¨æ–¹å¼ä¸Žæ™®é€šè¡¨æ²¡æœ‰åŒºåˆ«ã€‚ æŸ¥çœ‹è§†å›¾ æŸ¥çœ‹æ•°æ®ç»“æž„ 1mysql&gt; desc view_name; æŸ¥çœ‹åˆ›å»ºè¯­å¥ 1mysql&gt; show create view view_name; ä¿®æ”¹è§†å›¾1mysql&gt; alter view_name select_statement; åˆ é™¤è§†å›¾1mysql&gt; drop view view_name; å…·ä½“ä½¿ç”¨æ¡ˆä¾‹ä¸€ï¼šç®€åŒ–å¤šè¡¨ sql è¯­å¥123456789101112131415161718# å‡†å¤‡æ•°æ®mysql&gt; create database db02 charset utf8;mysql&gt; use db02;mysql&gt; create table student( s_id int(3), name varchar(20), math float, chinese float);mysql&gt; insert into student values(1,&apos;tom&apos;,80,70),(2,&apos;jack&apos;,80,80),(3,&apos;rose&apos;,60,75);mysql&gt; create table stu_info( s_id int(3), class varchar(50), addr varchar(100));mysql&gt; insert into stu_info values(1,&apos;äºŒç­&apos;,&apos;å®‰å¾½&apos;)ï¼Œ(2ï¼Œ&apos;äºŒç­&apos;,&apos;æ¹–å—&apos;),(3,&apos;ä¸‰ç­&apos;,&apos;é»‘é¾™æ±Ÿ&apos;)ï¼›# åˆ›å»ºè§†å›¾åŒ…å«ç¼–å·ã€å­¦ç”Ÿå§“åã€ç­çº§mysql&gt; create view stu_v (ç¼–å·,å§“å,ç­çº§) as select student.s_id,student.name,stu_info.class from student,stu_info where student.s_id = stu_info.s_id;# æŸ¥çœ‹è§†å›¾ä¸­çš„æ•°æ®mysql&gt; select * from stu_v; æ¡ˆä¾‹äºŒï¼šéš”ç¦»æ•°æ®1234567891011121314# åˆ›å»ºå·¥èµ„è¡¨mysql&gt; create table salarys( id int primary key, name char(10), salary double, dept char(10));mysql&gt; insert into salarys values (1,&apos;åˆ˜å¼ºä¸œ&apos;,800000,&apos;å¸‚åœº&apos;), (2,&apos;é©¬äº‘&apos;,899990,&apos;å¸‚åœº&apos;), (3,&apos;æŽå½¦å®&apos;,989090,&apos;å¸‚åœº&apos;), (4,&apos;é©¬åŒ–è…¾&apos;,88889999,&apos;è´¢åŠ¡&apos;);# åˆ›å»ºå¸‚åœºéƒ¨è§†å›¾mysql&gt; create view dept_sc as select * from salarys where dept = &apos;å¸‚åœº&apos;;mysql&gt; select * from dept_sc; æ³¨æ„ï¼šå¯¹è§†å›¾æ•°æ®çš„ insert update delete ä¼šåŒæ­¥åˆ°åŽŸè¡¨ä¸­ï¼Œä½†ç”±äºŽè§†å›¾å¯èƒ½æ˜¯éƒ¨åˆ†å­—æ®µï¼Œå¾ˆå¤šæ—¶å€™ä¼šå¤±è´¥ã€‚ æ€»ç»“ï¼šmysql å¯ä»¥åˆ†æ‹…ç¨‹åºä¸­çš„éƒ¨åˆ†é€»è¾‘ï¼Œä½†è¿™æ ·ä¸€æ¥åŽç»­çš„ç»´æŠ¤ä¼šå˜å¾—æ›´éº»çƒ¦ã€‚å¦‚æžœéœ€è¦æ”¹è¡¨ç»“æž„ï¼Œé‚£æ„å‘³ç€è§†å›¾ä¹Ÿéœ€è¦ç›¸åº”çš„ä¿®æ”¹ï¼Œæ²¡æœ‰ç›´æŽ¥åœ¨ç¨‹åºä¸­ä¿®æ”¹ sql æ¥çš„æ–¹ä¾¿ã€‚ è§¦å‘å™¨ä»€ä¹ˆæ˜¯è§¦å‘å™¨ï¼Ÿè§¦å‘å™¨æ˜¯ä¸€æ®µä¸Žè¡¨æœ‰å…³çš„ mysql ç¨‹åºï¼Œå½“è¿™ä¸ªè¡¨åœ¨æŸä¸ªæ—¶é—´ç‚¹å‘ç”Ÿäº†æŸç§äº‹ä»¶æ—¶ï¼Œå°†ä¼šè‡ªåŠ¨æ‰§è¡Œç›¸åº”çš„è§¦å‘å™¨ç¨‹åºã€‚ ä½•æ—¶ä½¿ç”¨è§¦å‘å™¨å½“æˆ‘ä»¬æƒ³è¦åœ¨ä¸€ä¸ªè¡¨è®°å½•è¢«æ›´æ–°æ—¶åšä¸€äº›æ“ä½œæ—¶å°±å¯ä»¥è¯´ä½¿ç”¨è§¦å‘å™¨ï¼Œä½†æ˜¯å®Œå…¨å¯ä»¥åœ¨ python ä¸­æ¥å®Œæˆè¿™ä¸ªäº‹æƒ…ã€‚ åˆ›å»ºè§¦å‘å™¨è¯­æ³•1234mysql&gt; create trigger t_name t_time t_event on table_name for each rowbeginstmts...end æ”¯æŒçš„æ—¶é—´ç‚¹ï¼ˆt_timeï¼‰ï¼šäº‹ä»¶å‘ç”Ÿä¹‹å‰å’Œä¹‹åŽ before|after æ”¯æŒçš„äº‹ä»¶ï¼ˆt_eventï¼‰ï¼šupdateã€insertã€delete åœ¨è§¦å‘å™¨ä¸­å¯ä»¥è®¿é—®åˆ°å°†è¢«ä¿®æ”¹çš„é‚£ä¸€è¡Œæ•°æ®ï¼Œæ ¹æ®äº‹ä»¶ä¸åŒèƒ½è®¿é—®çš„ä¹Ÿä¸åŒï¼Œupdate å¯ç”¨ old è®¿é—®æ—§æ•°æ®ï¼Œnewè®¿é—®æ–°æ•°æ®ï¼Œinsert å¯ç”¨ new è®¿é—®æ–°æ•°æ®ï¼Œdelete å¯ç”¨ old è®¿é—®æ—§æ•°æ®ã€‚ å¯ä»¥å°† new å’Œ old çœ‹åšä¸€ä¸ªå¯¹è±¡ï¼Œå…¶ä¸­å°è£…äº†ä¿®æ”¹çš„æ•°æ®çš„æ‰€æœ‰å­—æ®µã€‚ ä½¿ç”¨è§¦å‘å™¨æ¡ˆä¾‹æœ‰ cmd è¡¨å’Œé”™è¯¯æ—¥å¿—è¡¨ï¼Œéœ€æ±‚ï¼šåœ¨ cmd æ‰§è¡Œå¤±è´¥æ—¶è‡ªåŠ¨å°†ä¿¡æ¯å­˜å‚¨åˆ°é”™è¯¯æ—¥å¿—è¡¨ä¸­ã€‚ 123456789101112131415161718192021222324252627282930313233343536# å‡†å¤‡æ•°æ®mysql&gt; create table cmd( id int primary key auto_increment, user char(32), priv char(10), cmd char(64), sub_time datetime, # æäº¤æ—¶é—´ success enum(&apos;yes&apos;,&apos;no&apos;)); # 0ä»£è¡¨æ‰§è¡Œå¤±è´¥# é”™è¯¯æ—¥å¿—è¡¨mysql&gt; create table errlog( id int primary key auto_increment, err_cmd char(64), err_time datetime);# åˆ›å»ºè§¦å‘å™¨mysql&gt; delimiter //mysql&gt; create trigger trigger1 after insert on cmd for each rowbeginif new.success = &apos;no&apos; then insert into errlog values(null,new.cmd,new.sub_time);end if;end //delimiter;# å¾€è¡¨ cmd ä¸­æ’å…¥è®°å½•ï¼Œè§¦å‘è§¦å‘å™¨ï¼Œæ ¹æ® if æ¡ä»¶å†³å®šæ˜¯å¦éœ€è¦æ’å…¥é”™è¯¯æ—¥å¿—mysql&gt; insert into cmd( user, priv, cmd, sub_time, success) values (&apos;thales&apos;,&apos;0755&apos;,&apos;ls-l /etc&apos;,now(),&apos;yes&apos;), (&apos;thales&apos;,&apos;0755&apos;,&apos;cat /etc/password&apos;,now(),&apos;no&apos;), (&apos;thales&apos;,&apos;0755&apos;,&apos;user ass xxx&apos;,now(),&apos;no&apos;), (&apos;thales&apos;,&apos;0755&apos;,&apos;ps aux&apos;,now(),&apos;yes&apos;);# æŸ¥çœ‹é”™è¯¯æ—¥å¿—è¡¨ä¸­çš„è®°å½•æ˜¯å¦æœ‰è‡ªåŠ¨æ’å…¥mysql&gt; select * from errlog; delimiterç”¨äºŽä¿®æ”¹é»˜è®¤çš„è¡Œç»“æŸç¬¦ï¼Œç”±äºŽåœ¨è§¦å‘å™¨ä¸­æœ‰å¤šæ¡ sql è¯­å¥éœ€è¦ä½¿ç”¨åˆ†å·æ¥ç»“æŸï¼Œä½†æ˜¯è§¦å‘å™¨æ˜¯ä¸€ä¸ªæ•´ä½“ï¼Œæ‰€ä»¥éœ€è¦å…ˆæ›´æ¢é»˜è®¤çš„ç»“æŸç¬¦ï¼ˆè¿™é‡Œä¿®æ”¹çš„åªæ˜¯å®¢æˆ·ç«¯çš„ç»“æŸç¬¦ï¼ŒæœåŠ¡ç«¯è¿˜æ˜¯ä»¥åˆ†å·ç»“æŸï¼‰ï¼Œåœ¨è§¦å‘å™¨ç¼–å†™å®ŒåŽå†è®²ç»“æŸç¬¦è®¾ç½®å›žåˆ†å· æ³¨æ„ï¼šå¤–é”®ä¸èƒ½è§¦å‘äº‹ä»¶ï¼Œä¸»è¡¨åˆ é™¤äº†æŸä¸ªä¸»é”®ï¼Œä»Žè¡¨ä¹Ÿä¼šç›¸åº”çš„åˆ é™¤æ•°æ®ï¼Œä½†æ˜¯å¹¶ä¸ä¼šæ‰§è¡Œè§¦å‘å™¨ï¼Œå¹¶ä¸”è§¦å‘å™¨ä¸­ä¸èƒ½ä½¿ç”¨äº‹åŠ¡ï¼Œç›¸åŒæ—¶é—´ç‚¹çš„ç›¸åŒäº‹ä»¶çš„è§¦å‘å™¨ï¼Œä¸èƒ½åŒæ—¶å­˜åœ¨ã€‚ åˆ é™¤è§¦å‘å™¨è¯­æ³•123mysql&gt; drop trigger trigger_name;# åˆ é™¤ä¸Šé¢åˆ›å»ºçš„è§¦å‘å™¨mysql&gt; drop trigger trigger1; äº‹åŠ¡ä»€ä¹ˆæ˜¯äº‹åŠ¡ï¼Ÿmysql äº‹åŠ¡ä¸»è¦ç”¨äºŽå¤„ç†æ“ä½œé‡å¤§ï¼Œå¤æ‚åº¦é«˜çš„æ•°æ®ã€‚æ¯”å¦‚è¯´ï¼Œåœ¨äººå‘˜ç®¡ç†ç³»ç»Ÿä¸­ï¼Œä½ åˆ é™¤ä¸€ä¸ªäººå‘˜ï¼Œä½ å³éœ€è¦åˆ é™¤äººå‘˜çš„åŸºæœ¬èµ„æ–™ï¼Œä¹Ÿéœ€è¦åˆ é™¤å’Œè¯¥äººå‘˜ç›¸å…³çš„ä¿¡æ¯ï¼Œå¦‚ä¿¡ç®±ã€æ–‡ç« ç­‰ï¼Œè¿™æ ·ï¼Œè¿™äº›æ•°æ®åº“æ“ä½œå°±æž„æˆä¸€ä¸ªäº‹åŠ¡ã€‚äº‹åŠ¡æ˜¯é€»è¾‘ä¸Šçš„ä¸€ç»„æ“ä½œï¼Œè¦ä¹ˆéƒ½æˆåŠŸï¼Œè¦ä¹ˆéƒ½å¤±è´¥ã€‚ åœ¨ mysql ä¸­åªæœ‰ä½¿ç”¨äº† InnoDB æ•°æ®åº“å¼•æ“Žçš„æ•°æ®åº“æˆ–è¡¨æ‰æ”¯æŒäº‹åŠ¡ï¼› äº‹åŠ¡å¤„ç†å¯ä»¥ç”¨æ¥ç»´æŠ¤æ•°æ®åº“çš„å®Œæ•´æ€§ï¼Œä¿è¯æˆæ‰¹çš„ sql è¯­å¥è¦ä¹ˆéƒ½æ‰§è¡Œï¼Œè¦ä¹ˆéƒ½ä¸æ‰§è¡Œï¼› äº‹åŠ¡ç”¨æ¥ç®¡ç† insertã€updateã€deleteè¯­å¥ äº‹åŠ¡çš„å››ä¸ªç‰¹æ€§ä¸€èˆ¬æ¥è¯´ï¼Œäº‹åŠ¡å¿…é¡»æ»¡è¶³å››ä¸ªæ¡ä»¶ï¼ˆACIDï¼‰ï¼šåŽŸå­æ€§ï¼ˆAtomicityï¼Œæˆ–ç§°ä¸å¯åˆ†å‰²æ€§ï¼‰ã€ä¸€è‡´æ€§ï¼ˆConsistencyï¼‰ã€éš”ç¦»æ€§ï¼ˆIsolationï¼Œåˆç§°ç‹¬ç«‹æ€§ï¼‰ã€æŒä¹…æ€§ï¼ˆDurabilityï¼‰ã€‚ åŽŸå­æ€§ï¼šä¸€ä¸ªäº‹åŠ¡ï¼ˆtransactionï¼‰ä¸­çš„æ‰€æœ‰æ“ä½œï¼Œè¦ä¹ˆå…¨éƒ¨å®Œæˆï¼Œè¦ä¹ˆå…¨éƒ¨ä¸å®Œæˆï¼Œä¸ä¼šç»“æŸåœ¨ä¸­é—´æŸä¸ªçŽ¯èŠ‚ï¼Œäº‹åŠ¡åœ¨æ‰§è¡Œè¿‡ç¨‹ä¸­å‘ç”Ÿé”™è¯¯ï¼Œä¼šè¢«å›žæ»šï¼ˆRollbackï¼‰åˆ°äº‹åŠ¡å¼€å§‹å‰çš„çŠ¶æ€ï¼Œå°±åƒè¿™ä¸ªäº‹åŠ¡ä»Žæ¥æ²¡æœ‰æ‰§è¡Œè¿‡ä¸€æ ·ï¼› ä¸€è‡´æ€§ï¼šåœ¨äº‹åŠ¡å¼€å§‹ä¹‹å‰å’Œäº‹åŠ¡ç»“æŸä»¥åŽï¼Œæ•°æ®åº“çš„å®Œæ•´æ€§æ²¡æœ‰è¢«ç ´åã€‚è¿™è¡¨ç¤ºå†™å…¥çš„èµ„æ–™å¿…é¡»å®Œå…¨ç¬¦åˆæ‰€æœ‰çš„é¢„è®¾è§„åˆ™ï¼Œè¿™åŒ…å«èµ„æ–™çš„ç²¾ç¡®åº¦ã€ä¸²è”æ€§ä»¥åŠåŽç»­æ•°æ®åº“å¯ä»¥è‡ªå‘æ€§çš„å®Œæˆé¢„å®šçš„å·¥ä½œï¼› éš”ç¦»æ€§ï¼šæ•°æ®åº“å…è®¸å¤šä¸ªå¹¶å‘äº‹åŠ¡åŒæ—¶å¯¹å…¶æ•°æ®è¿›è¡Œè¯»å†™å’Œä¿®æ”¹çš„èƒ½åŠ›ï¼Œéš”ç¦»æ€§å¯ä»¥é˜²æ­¢å¤šä¸ªäº‹åŠ¡å¹¶å‘æ‰§è¡Œæ—¶ç”±äºŽäº¤å‰æ‰§è¡Œè€Œå¯¼è‡´æ•°æ®çš„ä¸ä¸€è‡´ã€‚äº‹åŠ¡éš”ç¦»åˆ†ä¸ºä¸åŒçº§åˆ«ï¼ŒåŒ…æ‹¬è¯»æœªæäº¤ï¼ˆRead uncommittedï¼‰ã€è¯»æäº¤ï¼ˆRead committedï¼‰ã€å¯é‡å¤è¯»ï¼ˆRepeatable readï¼‰å’Œä¸²è¡ŒåŒ–ï¼ˆSerializableï¼‰ã€‚ æŒä¹…æ€§ï¼šäº‹åŠ¡å¤„ç†ç»“æŸåŽï¼Œå¯¹æ•°æ®çš„ä¿®æ”¹å°±æ˜¯æ°¸ä¹…çš„ï¼Œå³ä¾¿ç³»ç»Ÿæ•…éšœä¹Ÿä¸ä¼šä¸¢å¤±ã€‚ åœ¨ mysql å‘½ä»¤è¡Œçš„é»˜è®¤è®¾ç½®ä¸‹ï¼Œäº‹åŠ¡éƒ½æ˜¯è‡ªåŠ¨æäº¤çš„ï¼Œå³æ‰§è¡Œ sql è¯­å¥åŽå°±ä¼šé©¬ä¸Šæ‰§è¡Œ commit æ“ä½œã€‚å› æ­¤è¦æ˜¾å¼çš„å¼€å¯ä¸€ä¸ªäº‹åŠ¡å¿…é¡»ä½¿ç”¨å‘½ä»¤ begin æˆ– start transactionï¼Œæˆ–è€…æ‰§è¡Œå‘½ä»¤ set autocommit=0ï¼Œç”¨æ¥ç¦æ­¢ä½¿ç”¨å½“å‰ä¼šè¯çš„è‡ªåŠ¨æäº¤ã€‚ äº‹åŠ¡æŽ§åˆ¶è¯­å¥ begin æˆ– start transactionï¼šæ˜¾å¼çš„å¼€å¯ä¸€ä¸ªäº‹åŠ¡ï¼› commitï¼šä¹Ÿå¯ä»¥ä½¿ç”¨ commit workï¼Œä¸è¿‡äºŒè€…æ˜¯ç­‰ä»·çš„ã€‚commit ä¼šæäº¤äº‹åŠ¡ï¼Œå¹¶ä½¿å·²å¯¹æ•°æ®åº“è¿›è¡Œçš„æ‰€æœ‰ä¿®æ”¹æˆä¸ºæ°¸ä¹…æ€§çš„ï¼› rollbackï¼šä¹Ÿå¯ä»¥ä½¿ç”¨ rollback workï¼ŒäºŒè€…ä¹Ÿæ˜¯ç­‰ä»·çš„ã€‚å›žæ»šä¼šç»“æŸç”¨æˆ·çš„äº‹åŠ¡ï¼Œå¹¶æ’¤é”€æ­£åœ¨è¿›è¡Œçš„æ‰€æœ‰æœªæäº¤çš„ä¿®æ”¹ï¼› savepoint identifierï¼šsavepoint å…è®¸åœ¨äº‹åŠ¡ä¸­åˆ›å»ºä¸€ä¸ªä¿å­˜ç‚¹ï¼Œä¸€ä¸ªäº‹åŠ¡ä¸­å¯ä»¥æœ‰å¤šä¸ª savepointï¼› release savepoint identifierï¼šåˆ é™¤ä¸€ä¸ªäº‹åŠ¡çš„ä¿å­˜ç‚¹ï¼Œå½“æ²¡æœ‰æŒ‡å®šçš„ä¿å­˜ç‚¹æ—¶ï¼Œæ‰§è¡Œè¯¥è¯­å¥ä¼šæŠ›å‡ºä¸€ä¸ªå¼‚å¸¸ï¼› rollback to identifierï¼šæŠŠäº‹åŠ¡å›žæ»šåˆ°æ ‡è®°ç‚¹ï¼› set transactionï¼šç”¨æ¥è®¾ç½®äº‹åŠ¡çš„éš”ç¦»çº§åˆ«ã€‚InnoDB å­˜å‚¨å¼•æ“Žæä¾›äº‹åŠ¡çš„éš”ç¦»çº§åˆ«æœ‰ read uncommittedã€read committedã€repeatable readå’Œ serializableã€‚ mysql äº‹åŠ¡å¤„ç†çš„ä¸¤ç§æ–¹å¼ BEGINï¼ŒROLLBACKï¼ŒCOMMIT æ¥å®žçŽ° BEGINï¼šå¼€å§‹ä¸€ä¸ªäº‹åŠ¡ ROLLBACKï¼šäº‹åŠ¡å›žæ»š COMMITï¼šäº‹åŠ¡ç¡®è®¤ ç›´æŽ¥ä½¿ç”¨ set æ¥æ”¹å˜ mysql çš„è‡ªåŠ¨æäº¤æ¨¡å¼ SET AUTOCOMMIT=0ï¼šç¦æ­¢è‡ªåŠ¨æäº¤ SET AUTOCOMMIT=1ï¼šå¼€å¯è‡ªåŠ¨æäº¤ äº‹åŠ¡çš„ç”¨æˆ·éš”ç¦»çº§åˆ«æ•°æ®åº“ä½¿ç”¨è€…å¯ä»¥æŽ§åˆ¶æ•°æ®åº“å·¥ä½œåœ¨å“ªä¸ªçº§åˆ«ä¸‹ï¼Œå°±å¯ä»¥é˜²æ­¢ä¸åŒçš„éš”ç¦»æ€§é—®é¢˜ã€‚ read uncommittedï¼šä¸åšä»»ä½•éš”ç¦»ï¼Œå¯èƒ½è„è¯»ã€å¹»è¯»ï¼› read committedï¼šå¯ä»¥é˜²æ­¢è„è¯»ï¼Œä¸èƒ½é˜²æ­¢ä¸å¯é‡å¤è¯»å’Œå¹»è¯»ï¼› repeatable readï¼šå¯ä»¥é˜²æ­¢è„è¯»ï¼Œä¸å¯é‡å¤è¯»ï¼Œä¸èƒ½é˜²æ­¢å¹»è¯»ï¼› serializableï¼šæ•°æ®åº“è¿è¡Œåœ¨ä¸²è¡ŒåŒ–å®žçŽ°ï¼Œæ‰€æœ‰é—®é¢˜éƒ½æ²¡æœ‰ï¼Œå°±æ˜¯æ€§èƒ½ä½Žã€‚ ä¿®æ”¹éš”ç¦»çº§åˆ«æŸ¥è¯¢å½“å‰çº§åˆ«1mysql&gt; select @@tx_isolation; ä¿®æ”¹çº§åˆ«1mysql&gt; set global transaction isolation level Repeatable read; ä½¿ç”¨äº‹åŠ¡start transactionï¼šå¼€å¯äº‹åŠ¡ï¼Œåœ¨è¿™æ¡è¯­å¥ä¹‹åŽçš„ sql å°†å¤„åœ¨åŒä¸€äº‹åŠ¡ï¼Œä¸ä¼šç«‹å³ä¿®æ”¹æ•°æ®åº“ commitï¼šæäº¤äº‹åŠ¡ï¼Œè®©è¿™ä¸ªäº‹åŠ¡ä¸­çš„ sql ç«‹å³æ‰§è¡Œæ•°æ®çš„æ“ä½œ rollbackï¼šå›žæ»šäº‹åŠ¡ï¼Œå–æ¶ˆè¿™ä¸ªäº‹åŠ¡ï¼Œè¿™ä¸ªäº‹åŠ¡ä¸ä¼šå¯¹æ•°æ®åº“ä¸­çš„æ•°æ®äº§ç”Ÿä»»ä½•å½±å“ã€‚ æ¡ˆä¾‹ï¼šè½¬è´¦è¿‡ç¨‹ä¸­å‘ç”Ÿå¼‚å¸¸12345678910111213141516171819202122232425# å‡†å¤‡æ•°æ®mysql&gt; create table account( id int primary key auto_increment, name varchar(20), money double);insert into account values(1,&apos;èµµå¤§å„¿å­&apos;,1000);insert into account values(2,&apos;åˆ˜å¤§ç‰›&apos;,1000);insert into account values(3,&apos;çŒªå¤´ä¸‰&apos;,1000);insert into account values(4,&apos;çŽ‹è¿›&apos;,1000);insert into account values(5,&apos;é»„å‰&apos;,1000);# èµµå¤§å„¿å­åˆ˜å¤§ç‰›ä½³è½¬è´¦1000å—# æœªä½¿ç”¨äº‹åŠ¡update account set money = money - 1000 where id = 1;update account set moneys = money - 1000 where id = 1; # moneyæ‰“é”™äº†å¯¼è‡´æ‰§è¡Œå¤±è´¥# åœ¨pythonä¸­ä½¿ç”¨äº‹åŠ¡å¤„ç†sql = &apos;update account set money = money - 1000 where id = 1;&apos;sql2 = &apos;update account set moneys = money + 1000 where id = 2;&apos; # moneyæ‰“é”™äº†å¯¼è‡´æ‰§è¡Œå¤±è´¥try: cursor.execute(sql) cursor.execute(sql2) conn.commit()except: conn.rollback() æ³¨æ„ï¼šäº‹åŠ¡çš„å›žæ»šçš„å‰ææ˜¯èƒ½æ•æ‰åˆ°å¼‚å¸¸ï¼Œå¦åˆ™æ— æ³•å†³å®šä½•æ—¶å›žæ»šï¼Œpython ä¸­å¾ˆç®€å•å°±å¯ä»¥å®žçŽ°ï¼Œå¦å¤– mysql ä¸­éœ€è¦ä½¿ç”¨å­˜å‚¨è¿‡ç¨‹æ‰å¯ä»¥æ•èŽ·å¼‚å¸¸ã€‚ å­˜å‚¨è¿‡ç¨‹ä»€ä¹ˆæ˜¯å­˜å‚¨è¿‡ç¨‹ï¼Ÿå­˜å‚¨è¿‡ç¨‹æ˜¯ä¸€ç»„ä»»æ„çš„ sql è¯­å¥é›†åˆï¼Œå­˜å‚¨åœ¨ mysql ä¸­ï¼Œè°ƒç”¨å­˜å‚¨è¿‡ç¨‹æ—¶å°†ä¼šæ‰§è¡Œå…¶åŒ…å«çš„æ‰€æœ‰ sql è¯­å¥ï¼Œä¸Ž python ä¸­çš„å‡½æ•°ç±»ä¼¼ã€‚ ä¸ºä»€ä¹ˆä½¿ç”¨å­˜å‚¨è¿‡ç¨‹ï¼Ÿå›žé¡¾è§¦å‘å™¨ä¸Žè§†å›¾å…¶å®žéƒ½æ˜¯ä¸ºäº†ç®€åŒ–åº”ç”¨ç¨‹åºä¸­ sql è¯­å¥çš„ä¹¦å†™ï¼Œä½†æ˜¯è¿˜æ˜¯éœ€è¦ç¼–å†™ï¼Œè€Œå­˜å‚¨è¿‡ç¨‹ä¸­å¯ä»¥åŒ…å«ä»»ä½•çš„ sql è¯­å¥ï¼ŒåŒ…æ‹¬è§†å›¾ã€äº‹åŠ¡ã€æŽ§åˆ¶æµç¨‹ç­‰ï¼Œè¿™æ ·ä¸€æ¥ï¼Œç”¨ç”¨ç¨‹åºå¯ä»¥ä»Ž sql è¯­å¥ä¸­å®Œå…¨è§£æ”¾å‡ºæ¥ï¼Œmysql å¯ä»¥æ›¿ä»£åº”ç”¨ç¨‹åºå®Œæˆæ•°æ®ç›¸å…³çš„é€»è¾‘å¤„ç†ã€‚ ä¸‰ç§å¼€å‘æ–¹å¼å¯¹æ¯” åº”ç”¨ç¨‹åºä»…è´Ÿè´£ä¸šåŠ¡é€»è¾‘ç¼–å†™ï¼Œæ‰€æœ‰ä¸Žæ•°æ®ç›¸å…³çš„é€»è¾‘éƒ½äº¤ç»™ mysql æ¥å®Œæˆï¼Œé€šè¿‡å­˜å‚¨è¿‡ç¨‹ï¼ˆæŽ¨èä½¿ç”¨ï¼‰ ä¼˜ç‚¹ï¼šåº”ç”¨ç¨‹åºä¸Žæ•°æ®å¤„ç†å®Œå…¨è§£è€¦åˆï¼Œä¸€å¯¹å¤æ‚çš„ sql è¢«å°è£…æˆäº†ä¸€ä¸ªç®€å•çš„å­˜å‚¨è¿‡ç¨‹ï¼Œè€ƒè™‘åˆ°ç½‘ç»œçŽ¯å¢ƒå› ç´ ï¼Œæ•ˆçŽ‡é«˜ï¼Œåº”ç”¨ç¨‹åºå¼€å‘è€…ä¸éœ€è¦ç¼–å†™ sql è¯­å¥ï¼Œå¼€å‘æ•ˆçŽ‡é«˜ã€‚ ç¼ºç‚¹ï¼špython è¯­æ³•ä¸Ž mysql è¯­æ³•åŒºåˆ«å·¨å¤§ï¼Œå­¦ä¹ æˆæœ¬é«˜ï¼Œå¹¶ä¸”å„ç§æ•°æ®åº“çš„è¯­æ³•å¤§ä¸ç›¸åŒï¼Œæ‰€ä»¥ç§»æ¤æ€§éžå¸¸å·®ï¼Œåº”ç”¨ç¨‹åºå¼€å‘è€…ä¸Ž DBA çš„è·¨éƒ¨é—¨æ²Ÿé€šæˆæœ¬é«˜ï¼Œé€ æˆæ•´ä½“æ•ˆçŽ‡ä½Žã€‚ åº”ç”¨ç¨‹åºä¸ä»…ç¼–å†™ä¸šåŠ¡é€»è¾‘ï¼Œè¿˜éœ€è¦ç¼–å†™æ‰€æœ‰çš„ sql è¯­å¥ ä¼˜ç‚¹ï¼šæ‰©å±•æ€§é«˜ï¼Œå¯¹äºŽåº”ç”¨ç¨‹åºå¼€å‘è€…è€Œè¨€ï¼Œæ‰©å±•æ€§å’Œç»´æŠ¤æ€§ç›¸è¾ƒäºŽç¬¬ä¸€ç§éƒ½æœ‰æ‰€æé«˜ã€‚ ç¼ºç‚¹ï¼šæ‰§è¡Œæ•ˆçŽ‡ä½Žï¼Œç”±äºŽéœ€è¦å°†å¯¹è±¡çš„æ“ä½œè½¬åŒ–ä¸º sql è¯­å¥ï¼Œä¸”éœ€è¦é€šè¿‡ç½‘ç»œå‘é€å¤§é‡çš„ sql è¯­å¥ã€‚ åˆ›å»ºå­˜å‚¨è¿‡ç¨‹è¯­æ³•1234mysql&gt; create procedure pro_name(p_type p_name data_type)beginsql è¯­å¥......æµç¨‹æŽ§åˆ¶end p_typeï¼šå‚æ•°ç±»åž‹ inï¼šè¡¨ç¤ºè¾“å…¥å‚æ•° outï¼šè¡¨ç¤ºè¾“å‡ºå‚æ•° inoutï¼šè¡¨ç¤ºæ—¢èƒ½è¾“å…¥åˆèƒ½è¾“å‡º p_nameï¼šå‚æ•°åç§° data_typeï¼šå‚æ•°ç±»åž‹ mysql æ”¯æŒçš„æ‰€æœ‰æ•°æ®ç±»åž‹ æ¡ˆä¾‹ï¼šä½¿ç”¨å­˜å‚¨è¿‡ç¨‹å®Œæˆå¯¹ student è¡¨çš„æŸ¥è¯¢12345678910111213delimiter //create procedure p1(in m int,in n int,out res int)begin select *from student where chinese &gt; m and chinese &lt; n; #select *from student where chineseXXX &gt; m and chinese &lt; n; ä¿®æ”¹é”™è¯¯çš„åˆ—åä»¥æµ‹è¯•æ‰§è¡Œå¤±è´¥ set res = 100;end//delimiter ;set @res = 0;#è°ƒç”¨å­˜å‚¨è¿‡ç¨‹call p1(70,80,@res);#æŸ¥çœ‹æ‰§è¡Œç»“æžœselect @res; æ³¨æ„ï¼šå­˜å‚¨è¿‡ç¨‹çš„ out ç±»å‚æ•°å¿…é¡»æ˜¯ä¸€ä¸ªå˜é‡ï¼Œç”¨æ¥è£…è¾“å‡ºæ•°æ®çš„ï¼Œä¸å¯æ˜¯ä¸€ä¸ªå€¼ python ä¸­è°ƒç”¨å­˜å‚¨è¿‡ç¨‹123456789101112131415161718import pymysql#å»ºç«‹è¿žæŽ¥conn = pymysql.connect( host="127.0.0.1", user="root", password="admin", database="db02")# èŽ·å–æ¸¸æ ‡cursor = conn.cursor(pymysql.cursors.DictCursor)# è°ƒç”¨ç”¨å­˜å‚¨è¿‡ç¨‹cursor.callproc("p1",(70,80,0)) #p1ä¸ºå­˜å‚¨è¿‡ç¨‹å ä¼šè‡ªåŠ¨ä¸ºä¸ºæ¯ä¸ªå€¼è®¾ç½®å˜é‡,åç§°ä¸º @_p1_0,@_p1_1,@_p1_2# æå–æ‰§è¡Œç»“æžœæ˜¯å¦æœ‰ç»“æžœå–å†³äºŽå­˜å‚¨è¿‡ç¨‹ä¸­çš„sqlè¯­å¥print(cursor.fetchall())# èŽ·å–æ‰§è¡ŒçŠ¶æ€cursor.execute("select @_p1_2")print(cursor.fetchone()) æ­¤å¤„ pymysql ä¼šè‡ªåŠ¨å°†å‚æ•°éƒ½è®¾ç½®ä¸€ä¸ªå˜é‡æ‰€ä»¥å¯ä»¥ç›´æŽ¥ä¼ å…¥ä¸€ä¸ªå€¼ï¼Œå½“ç„¶å€¼å¦‚æžœä½œä¸ºè¾“å‡ºå‚æ•°çš„è¯ï¼Œä¼ å…¥ä»€ä¹ˆéƒ½å¯ä»¥ã€‚ åˆ é™¤å­˜å‚¨è¿‡ç¨‹1drop procedure è¿‡ç¨‹å; ä¿®æ”¹å­˜å‚¨è¿‡ç¨‹çš„æ„ä¹‰ä¸å¤§ï¼Œä¸å¦‚åˆ é™¤é‡å†™ã€‚ æŸ¥çœ‹å­˜å‚¨è¿‡ç¨‹1234# å½“å‰åº“æ‰€æœ‰å­˜å‚¨è¿‡ç¨‹åç§°mysql&gt; select &apos;name&apos; from mysql.proc where db = &apos;db02&apos; and &apos;type&apos; = &apos;procedure&apos;;# æŸ¥çœ‹åˆ›å»ºè¯­å¥mysql&gt; show create procedure p1; å­˜å‚¨è¿‡ç¨‹ä¸­çš„äº‹åŠ¡åº”ç”¨å­˜å‚¨è¿‡ç¨‹ä¸­æ”¯æŒä»»ä½•çš„ sql è¯­å¥ä¹ŸåŒ…æ‹¬äº‹åŠ¡ã€‚ æ¡ˆä¾‹ï¼šæ¨¡æ‹Ÿè½¬è´¦ä¸­å‘é€å¼‚å¸¸ï¼Œè¿›è¡Œå›žæ»šæ“ä½œ12345678910111213141516171819202122232425262728293031323334delimiter //create PROCEDURE p5( OUT p_return_code tinyint)BEGIN DECLARE exit handler for sqlexception BEGIN -- ERROR set p_return_code = 1; rollback; END; # exit ä¹Ÿå¯ä»¥æ¢æˆcontinue è¡¨ç¤ºå‘é€å¼‚å¸¸æ—¶ç»§ç»­æ‰§è¡Œ DECLARE exit handler for sqlwarning BEGIN -- WARNING set p_return_code = 2; rollback; END; START TRANSACTION; update account set money = money - 1000 where id = 1; update account set moneys = money - 1000 where id = 1; # moneyså­—æ®µå¯¼è‡´å¼‚å¸¸ COMMIT; -- SUCCESS set p_return_code = 0; #0ä»£è¡¨æ‰§è¡ŒæˆåŠŸEND //delimiter ;#åœ¨mysqlä¸­è°ƒç”¨å­˜å‚¨è¿‡ç¨‹set @res=123;call p5(@res);select @res; æ€»ç»“ï¼šæŠ›å¼€æ²Ÿé€šæˆæœ¬ã€å­¦ä¹ æˆæœ¬ï¼Œå­˜å‚¨è¿‡ç¨‹æ— ç–‘æ˜¯æ•ˆçŽ‡æœ€é«˜çš„å¤„ç†æ–¹å¼ã€‚ å‡½æ•°å†…ç½®å‡½æ•°åœ¨SQL è¯­å¥ä¸­ï¼Œè¡¨è¾¾å¼å¯ç”¨äºŽä¸€äº›è¯¸å¦‚SELECTè¯­å¥çš„ORDER BY æˆ– DELETEæˆ– UPDATEè¯­å¥çš„ WHERE å­å¥æˆ– SETè¯­å¥ä¹‹ç±»çš„åœ°æ–¹ã€‚ä½¿ç”¨æ–‡æœ¬å€¼ã€columnå€¼ã€NULLå€¼ã€å‡½æ•°ã€ æ“ä½œç¬¦æ¥ä¹¦ å†™ è¡¨è¾¾å¼ã€‚ æœ¬ç« å™è¿°äº†å¯ç”¨äºŽä¹¦å†™MySQLè¡¨è¾¾å¼çš„å‡½æ•°å’Œæ“ä½œç¬¦ã€‚ è¿™äº›å†…ç½®å‡½æ•°å¤§å¤§æé«˜äº†æˆ‘ä»¬çš„å¼€å‘æ•ˆçŽ‡ å­—ç¬¦ç›¸å…³å‡½æ•° æ•°å­¦ç›¸å…³å‡½æ•° æ—¥æœŸç›¸å…³å‡½æ•° å…¶ä»–å‡½æ•° è‡ªå®šä¹‰å‡½æ•°è¯­æ³•123mysql&gt; create function f_name(paramters)return dataTypereturn value; è¯´æ˜Žï¼šparamters åªèƒ½æ˜¯ in è¾“å…¥å‚æ•°ã€å‚æ•°åã€ç±»åž‹å¿…é¡»æœ‰è¿”å›žå€¼ï¼Œä¸èƒ½åŠ  begin å’Œ endï¼Œreturns åŽé¢æ˜¯è¿”å›žå€¼çš„ç±»åž‹ï¼Œè¿™é‡Œä¸åŠ åˆ†å·ï¼Œreturn åŽé¢æ˜¯è¦è¿”å›žçš„å€¼ã€‚ æ¡ˆä¾‹ï¼šå°†ä¸¤æ•°ç›¸åŠ 1234mysql&gt; create function addfuntion(a int,b int)returns int return a + b;# æ‰§è¡Œå‡½æ•°mysql&gt; select addfuntion(1,1); æ³¨æ„ï¼šå‡½æ•°åªèƒ½è¿”å›žä¸€ä¸ªå€¼ï¼Œå‡½æ•°ä¸€èˆ¬ä¸æ¶‰åŠæ•°æ®çš„å¢žåˆ æŸ¥æ”¹ï¼Œå°±æ˜¯ä¸€ä¸ªé€šç”¨çš„åŠŸèƒ½ï¼Œè°ƒç”¨è‡ªå®šä¹‰çš„å‡½æ•°ä¸Žè°ƒç”¨ç³»ç»Ÿçš„ä¸€ç›´ï¼Œä¸éœ€è¦ call ä½¿ç”¨ select å¯èŽ·å¾—è¿”å›žå€¼ï¼Œå‡½æ•°ä¸­ä¸èƒ½ä½¿ç”¨ sql è¯­å¥ï¼Œå°±åƒåœ¨ java ä¸­ä¸èƒ½è¯†åˆ« sql è¯­å¥ä¸€æ ·ï¼ˆæ²¡å­¦è¿‡javaã€‚ã€‚ã€‚ï¼‰ æ•°æ®å¤‡ä»½ä½¿ç”¨ mysqldump ç¨‹åºè¿›è¡Œå¤‡ä»½1mysqldump -u -p db_name [table_name,,,] &gt; fileName.sql æ³¨æ„ï¼šè¿™æ˜¯å‘½ä»¤è¡Œå‘½ä»¤ å¯ä»¥é€‰åˆ™è¦å¤‡ä»½é‚£äº›è¡¨ï¼Œå¦‚æžœä¸æŒ‡å®šä»£è¡¨å…¨éƒ¨å¤‡ä»½ 12345678910# ç¤ºä¾‹# å•åº“å¤‡ä»½mysqldump -uroot -p123 db1 &gt; db1.sqlmysqldump -uroot -p123 db1 table table2 &gt; db1-table1-table2.sql# å¤šåº“å¤‡ä»½mysqldump -uroot -p123 --databases db1 db2 mysql db3 &gt; db1_db2_mysql_db3.sql# å¤‡ä»½æ‰€æœ‰mysqldump -uroot -p123 --all-databases &gt; all.sql ä½¿ç”¨ mysql è¿›è¡Œæ¢å¤ é€€å‡ºæ•°æ®åº“åŽ 1mysql -u -p &lt; filenam.sql ä¸ç”¨é€€å‡ºæ•°æ®åº“ åˆ›å»ºç©ºæ•°æ®åº“ é€‰æ‹©æ•°æ®åº“ ç„¶åŽä½¿ç”¨ source filename æ¥è¿›è¡Œè¿˜åŽŸ 12mysql&gt; use db1;mysql&gt; source /root/db1.sql æ•°æ®åº“è¿ç§»12# åŠ¡å¿…ä¿è¯åœ¨ç›¸åŒç‰ˆæœ¬ä¹‹é—´è¿ç§»mysqldump -h æºip -uroot -p123 --databases db1 | mysql -h ç›®æ ‡ip -uroot -p456 æµç¨‹æŽ§åˆ¶if è¯­å¥if æ¡ä»¶ then è¯­å¥;end if;ç¬¬äºŒç§ if else if æ¡ä»¶ then è¯­å¥1;else if æ¡ä»¶ then è¯­å¥2;else è¯­å¥3;end if; æ¡ˆä¾‹ï¼šç¼–å†™è¿‡ç¨‹å®žçŽ° è¾“å…¥ä¸€ä¸ªæ•´æ•° type èŒƒå›´1-2 è¾“å‡º type=1 or type=other;12345678910mysql&gt; create procedure showType(in type int,out result char(20))beginif type = 1 then set result = &quot;type = 1&quot;;elseif type = 2 then set result = &quot;type = 2&quot;;else set result = &quot;type = other&quot;;end if;end case è¯­å¥ä¸Ž switch ä¸€æ ·ï¼Œè¿›è¡Œé€‰æ‹©æ‰§è¡Œ 12345678mysql&gt; create procedure caseTest(in type int)beginCASE type when 1 then select &quot;type = 1&quot;;when 2 then select &quot;type = 2&quot;;else select &quot;type = other&quot;;end case;end å®šä¹‰å˜é‡12mysql&gt; declare å˜é‡å ç±»åž‹ default å€¼;mysql&gt; declare i int default 0; while å¾ªçŽ¯12345678# å¾ªçŽ¯è¾“å‡º10æ¬¡ hello mysqlmysql&gt; create procedure showHello()begindeclare i int default 0;while i &lt; 10 doselect &apos;hello mysql&apos;;end while;end loop å¾ªçŽ¯æ²¡æœ‰æ¡ä»¶ï¼Œéœ€è¦è‡ªå·±å®šä¹‰ç»“æŸè¯­å¥ 12345678910# è¾“å‡º10æ¬¡ hello mysqlmysql&gt; create procedure showLoop()begindeclare i int default 0;aloop:loopselect &apos;hello loop&apos;;set i &gt; 9 then leave aloop;end if;end loop aloop;end repeat å¾ªçŽ¯1234567891011121314151617181920212223# ç±»ä¼¼do while# è¾“å‡º10æ¬¡hello repeatmysql&gt; create procedure showRepeat()begindeclare i int default 0;repeatselect &quot;hello repeat&quot;;set i = i + 1;until i &gt; 9end repeat;end# è¾“å‡º0-100ä¹‹é—´çš„å¥‡æ•°mysql&gt; create procedure showjishu()begindeclare i int default 0;aloop: loopset i = i + 1;if i &gt;= 101 then leave aloop; end if;if i % 2 = 0 then iterate aloop; end if;select i;end loop aloop;end]]></content>
      <categories>
        <category>æ•°æ®åº“</category>
      </categories>
  </entry>
  <entry>
    <title><![CDATA[æ•°æ®åº“ï¼ˆå…­ï¼‰]]></title>
    <url>%2F2018%2F11%2F24%2F%E6%95%B0%E6%8D%AE%E5%BA%93%EF%BC%88%E5%85%AD%EF%BC%89%2F</url>
    <content type="text"><![CDATA[å‰è¨€æœ¬ç¯‡åšå®¢å­¦ä¹  mysql çš„ç”¨æˆ·ç®¡ç†å’Œä½¿ç”¨ python æ“ä½œ mysql çš„ä¸€ä¸ªæ¨¡å— pymysqlã€‚ mysql ç”¨æˆ·ç®¡ç†å› ä¸ºæ•°æ®å®‰å…¨å¯¹äºŽäº’è”ç½‘å…¬å¸æ¥è¯´æ˜¯æœ€é‡è¦çš„ï¼Œä¸å¯èƒ½éšä¾¿åˆ†é… root è´¦æˆ·ï¼Œåº”è¯¥æŒ‰ç…§ä¸åŒå¼€å‘å²—ä½åˆ†é…ä¸åŒçš„è´¦æˆ·å’Œæƒé™ã€‚ ç”¨æˆ·ç®¡ç†ç›¸å…³è¡¨12mysql&gt; use mysql;mysql&gt; show tables; ç”¨æˆ·å¯¹æ•°æ®åº“çš„æƒé™é¡ºåºmysql å°†ä¸Žç”¨æˆ·ç›¸å…³çš„æ•°æ®æ”¾åœ¨ mysqlåº“ä¸­ï¼Œ 1user-&gt;db-&gt;tables_priv-&gt;columns_priv å¦‚æžœç”¨æˆ·æ‹¥æœ‰å¯¹æ‰€æœ‰åº“çš„è®¿é—®æƒï¼Œåˆ™å­˜å‚¨åœ¨ user ä¸­ï¼› å¦‚æžœç”¨æˆ·æ‹¥æœ‰å¯¹éƒ¨åˆ†åº“çš„ä½¿ç”¨æƒï¼Œåˆ™å­˜å‚¨åœ¨ db ä¸­ï¼› å¦‚æžœç”¨æˆ·æ‹¥æœ‰å¯¹éƒ¨åˆ†è¡¨çš„ä½¿ç”¨æƒï¼Œåˆ™å­˜å‚¨åœ¨ tables_priv ä¸­ï¼› å¦‚æžœç”¨æˆ·æ‹¥æœ‰å¯¹è¡¨ä¸­æŸäº›å­—æ®µçš„ä½¿ç”¨æƒï¼Œåˆ™å­˜å‚¨åœ¨ columns_priv ä¸­ã€‚ ç”¨æˆ·æŽˆæƒè®¾ç½®åˆ›å»ºæ–°è´¦æˆ·1mysql&gt; create user ç”¨æˆ·å@ip identified by &apos;å¯†ç &apos;; 1mysql&gt; create user musibii@127.0.0.1 identified by &apos;123&apos;; åˆ›å»ºæˆåŠŸåŽä¼šåœ¨ user è¡¨ä¸­æŸ¥çœ‹åˆ°ï¼š 1mysql&gt; select * from user\G; è¿™æ ·åˆ›å»ºçš„è´¦æˆ·æ˜¯æ²¡æœ‰ä»»ä½•æƒé™çš„ï¼Œå¯ä»¥çœ‹å‡ºå…³äºŽæƒé™å­—æ®µçš„å€¼å…¨ä¸º Nï¼ŒæŽ¥ä¸‹æ¥éœ€è¦ç»™ musibii è´¦å·åˆ†é…æƒé™äº†ã€‚ æŽˆäºˆç”¨æˆ·æœ€é«˜æƒé™1mysql&gt; grant all on *.* to musibii@127.0.0.1 identified by &apos;123&apos;; å¦‚æžœ musibii è´¦å·ä¸å­˜åœ¨ï¼Œé‚£ä¹ˆä¼šåœ¨æŽˆäºˆæƒé™çš„æ—¶å€™è‡ªåŠ¨åˆ›å»ºè´¦å·ã€‚ çŽ°åœ¨æŸ¥çœ‹ä¸€ä¸‹ musibii è´¦å·çš„æƒé™å…³ç³»ï¼š æŽˆäºˆæŽˆäºˆæƒé™çŽ°åœ¨é™¤äº† grant_priv æƒé™å…¶ä»–æƒé™éƒ½æœ‰äº†ï¼Œè¿™ä¸ªæƒé™æ˜¯æŽˆæƒæƒé™ã€‚é€šè¿‡ root è´¦æˆ·æŽˆäºˆï¼š 1mysql&gt; grant all on *.* to musibii@127.0.0.1 identified by &apos;123&apos; with grant option; çŽ°åœ¨å¯ä»¥è¯´è¿™ä¸ªè´¦å·å°±æ˜¯ä¸€ä¸ª root è´¦æˆ·ï¼Œä½†æ˜¯åªèƒ½åœ¨æœ¬æœºç™»é™†ã€‚ æŽˆäºˆåœ¨ä»»ä½•åœ°æ–¹ç™»é™†æƒé™1mysql&gt; grant all on *.* to musibii@&apos;%&apos; identified by &apos;123&apos;; çŽ°åœ¨ host å­—æ®µå¯¹åº”çš„å€¼å˜ä¸ºäº†%ï¼Œæ„å‘³ç€å¯ä»¥åœ¨ä»»ä½•ä¸»æœºç™»é™†è¯¥æ•°æ®åº“äº†ã€‚ è®¾ç½®åªèƒ½è®¿é—®æŸä¸ªåº“1mysql&gt; grant all on day46 to eureka@&apos;%&apos; identified by &apos;123&apos;; è¿™æ ·è®¾ç½®çš„ç”¨æˆ·æƒé™ä¿¡æ¯å­˜å‚¨åœ¨ db ä¸­ï¼Œä½†æ˜¯ä¸çŸ¥é“ä¸ºä»€ä¹ˆåœ¨ db ä¸­æ²¡æœ‰è´¦æˆ·ä¿¡æ¯ã€‚ã€‚ã€‚ è®¾ç½®èƒ½èƒ½è®¿é—®æŸä¸ªåº“ä¸­çš„æŸä¸ªè¡¨1mysql&gt; grant all on day46.emp to thales@&apos;%&apos; identified by &apos;123&apos;; è®¾ç½®åªèƒ½å¢žåˆ æŸ¥æ”¹æƒé™1mysql&gt; grant select(name) on day46.emp to thales@&apos;%&apos; identified by &apos;123&apos;; è¿™æ · thales ç”¨æˆ·å°±åªèƒ½å¯¹ emp è¡¨ä¸­çš„ name å­—æ®µè¿›è¡ŒæŸ¥è¯¢æ“ä½œäº†ã€‚ ç”¨æˆ·æ”¶æƒè®¾ç½®æ”¶å›žæŸä¸ªè´¦å·çš„æ‰€æœ‰æƒé™1mysql&gt; revoke all privileges [column] on db.table from user@&apos;host&apos;; 1mysql&gt; revoke all privileges on *.* from musibii@&apos;127.0.0.1&apos;; æŸ¥è¯¢ user è¡¨ä¸­çš„æƒé™ä¿¡æ¯ï¼Œå‘çŽ°é™¤äº†æŽˆæƒæƒé™å…¶ä»–æƒé™éƒ½æ²¡æœ‰äº†ï¼š ä¸è¿‡åœ¨ä¿®æ”¹æƒé™ä¹‹åŽéœ€è¦åˆ·æ–°æƒé™è¡¨ï¼š 1mysql&gt; flush privileges; æ³¨æ„ï¼šå¦‚ä½•æŽˆäºˆæƒé™å°±åº”è¯¥å¦‚ä½•æ”¶å›žæƒé™ï¼Œå› ä¸ºä¸åŒçš„æƒé™å­˜å‚¨åœ¨ä¸åŒçš„è¡¨ä¸­ åˆ é™¤ç”¨æˆ·1mysql&gt; drop user ç”¨æˆ·å@ä¸»æœº; å½“ä½ åœ¨äº‘æœåŠ¡å™¨éƒ¨ç½²äº† mysql çŽ¯å¢ƒæ—¶ï¼Œä½ çš„ç¨‹åºæ— æ³•ç›´æŽ¥è¿žå‡»æœåŠ¡å™¨ï¼Œéœ€è¦æŽˆäºˆåœ¨ä»»æ„ä¸€å°ç”µè„‘ç™»é™†çš„æƒé™ 1mysql&gt; grant all on *.* to ç”¨æˆ·å@&apos;%&apos; identified by å¯†ç  with grant option; pymysqlpymysql è¿žæŽ¥æ•°æ®åº“123456789import pymysqlconn = pymysql.connect( host='127.0.0.1', port=3306, user='root', password='123', database='day46', charset='utf8') æ“ä½œæ•°æ®åº“cursor æ¸¸æ ‡å¯¹è±¡ï¼Œè´Ÿè´£æ‰§è¡Œ sql è¯­å¥ï¼ŒèŽ·å–è¿”å›žçš„æ•°æ® 12345678910cursor = conn.cursor()sql = 'select *from emp'res = cursor.execute(sql) # è¿”å›žå€¼æ˜¯æœ¬æ¬¡æŸ¥è¯¢çš„è®°å½•æ¡æ•°# èŽ·å–ä¸€æ¡è®°å½•print(cursor.fetchone())# æŽ¥ç€èŽ·å–print(cursor.fetchone())# æå–æ‰€æœ‰ç»“æžœprint(cursor.fetchall()) 1print(fetchamany(3)) è¿è¡Œç»“æžœ ((3, â€˜å…³ç¾½â€™, â€˜ç”·â€™, â€˜å¸‚åœºâ€™, â€˜å‘˜å·¥â€™, 4000.0), (4, â€˜å­™æƒâ€™, â€˜ç”·â€™, â€˜è¡Œæ”¿â€™, â€˜æ€»ç›‘â€™, 6000.0), (5, â€˜å‘¨ç‘œâ€™, â€˜ç”·â€™, â€˜è¡Œæ”¿â€™, â€˜å‘˜å·¥â€™, 5000.0)) å‚æ•°æ˜¯æŒ‡å®šèŽ·å–çš„æ•°æ®æ¡æ•°ã€‚ æŽ§åˆ¶æ¸¸æ ‡ä½ç½®12cursor.scroll(1,mode='relative) # æ¸¸æ ‡ä»Žå½“å‰ä½ç½®å¾€åŽç§»åŠ¨ä¸€æ¡è®°å½•cursor.scroll(1,mode='absolute') # æ¸¸æ ‡ä»Žå¼€å§‹ä½ç½®å¾€åŽç§»åŠ¨ä¸€æ¡è®°å½• èŽ·å–ç»“æžœä½¿ç”¨å­—å…¸è¡¨ç¤ºæŒ‡å®šä½¿ç”¨å­—å…¸ç±»åž‹çš„æ¸¸æ ‡ï¼Œé»˜è®¤æ˜¯å…ƒç¥–ç±»åž‹ 1cursor = conn.cursor(pymysql.cursor.DictCursor) åœ¨ python ä½¿ç”¨ä»£ç æ‰§è¡Œäº†å¢žåˆ æŸ¥æ”¹åŽåªæ˜¯åœ¨å†…å­˜ä¸­ä¿®æ”¹äº†å€¼ï¼Œæƒ³è¦ä¿®æ”¹æ•°æ®åº“ä¸­çš„å€¼éœ€è¦æäº¤æ“ä½œ 1conn.commit() è¿™æ ·ä¿®æ”¹çš„å€¼æ‰ä¼šæ”¹å˜ã€‚ #sql æ³¨å…¥ 1234567891011121314151617181920212223import pymysqlconn = pymysql.connect( host='127.0.0.1', port=3306, user='root', password='password', database='day46', charset='utf8')cursor = conn.cursor(pymysql.cursors.DictCursor)name = input('ç”¨æˆ·å')pwd = input('å¯†ç ')sql = 'select * from user where name = "%s" and pwd = "%s"' % (name, password)res = cursor.execute(sql)if res: print('ç™»é™†æˆåŠŸ')else: print('ç™»é™†å¤±è´¥') æ³¨å…¥å†™æ³• é¿å…æ–¹å¼ï¼š å†è¾“å…¥æ—¶åŠ ä¸Šæ­£åˆ™åˆ¤æ–­ï¼Œä¸å…è®¸è¾“å…¥ä¸Ž sql ç›¸å…³çš„å…³é”®è¯ã€‚è¿™ç§æ–¹å¼æ— æ³•é¿å…ä»£ç†æœåŠ¡å™¨å‘èµ·çš„æ”»å‡»ï¼› 2.åœ¨æœåŠ¡ç«¯ï¼Œæ‰§è¡Œ sql å‰è¿›è¡Œåˆ¤æ–­ã€‚ pymysql ä¸­å·²ç»åšäº†å¤„ç†ï¼Œåªè¦å°†å‚æ•°çš„æ‹¼æŽ¥äº¤ç»™ mysql æ¥å®Œæˆå°±èƒ½å¤Ÿé¿å…æ”»å‡»ã€‚ ä»£ç å®žçŽ°123456name = input('ç”¨æˆ·å')pwd = input('å¯†ç ')sql = 'select * from user where name = %s and password = %s'res = cursor.execute(sql, (name,pwd)) # è¿™æ ·æ‰§è¡Œ sql è¯­å¥å°±å¯ä»¥é¿å…æ”»å‡»ã€‚]]></content>
      <categories>
        <category>æ•°æ®åº“</category>
      </categories>
  </entry>
  <entry>
    <title><![CDATA[æ•°æ®åº“ï¼ˆäº”ï¼‰]]></title>
    <url>%2F2018%2F11%2F23%2F%E6%95%B0%E6%8D%AE%E5%BA%93%EF%BC%88%E4%BA%94%EF%BC%89%2F</url>
    <content type="text"><![CDATA[å‰è¨€ç»è¿‡å‡ å¤©æ•°æ®åº“çš„å­¦ä¹ ï¼Œæ€»æ„Ÿè§‰è‡ªå·±åªæ˜¯ä¼šæ•²å†™å¢žåˆ æŸ¥æ”¹è¯­å¥è€Œå·²ï¼Œå¯¹æ•°æ®åº“çš„å†…éƒ¨æ‰§è¡Œæƒ…å†µå¹¶ä¸äº†è§£ï¼Œä»¥åŠæ‰§è¡Œé¡ºåºï¼ŒæŸ¥è¯¢åŽŸç†ç­‰ï¼Œæ‰€ä»¥æƒ³å¯¹ MySQL å†…éƒ¨çš„ä¸€äº›åŽŸç†åŠ æ·±ä¸€ä¸‹äº†è§£ã€‚ MySQL è¯­å¥æ‰§è¡Œé¡ºåºMySQL è¯­å¥ä¸€å…±åˆ†ä¸º11ä¸ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œæœ€å…ˆæ‰§è¡Œçš„æ°¸è¿œæ˜¯ FROMï¼Œæœ€åŽæ‰§è¡Œçš„æ˜¯ LIMIT æ“ä½œã€‚å…¶ä¸­æ¯ä¸€ä¸ªæ“ä½œéƒ½ä¼šäº§ç”Ÿä¸€å¼ è™šæ‹Ÿçš„è¡¨ï¼ˆè™šæ‹Ÿè¡¨æƒ³è¦åœ¨ä¸‹æ¬¡æŸ¥è¯¢ä½¿ç”¨éœ€è¦å–åˆ«åï¼‰ï¼Œè¿™ä¸ªè™šæ‹Ÿçš„è¡¨ä½œä¸ºä¸€ä¸ªå¤„ç†çš„è¾“å…¥ï¼Œåªæ˜¯è¿™äº›è™šæ‹Ÿçš„è¡¨å¯¹ç”¨æˆ·æ¥è¯´æ˜¯é€æ˜Žçš„ï¼Œä½†æ˜¯åªæœ‰æœ€åŽä¸€å¼ è™šæ‹Ÿè¡¨æ‰ä¼šä½œä¸ºç»“æžœè¿”å›žã€‚å¦‚æžœæ²¡æœ‰åœ¨è¯­å¥ä¸­æŒ‡å®šæŸä¸€ä¸ªå­å¥ï¼Œé‚£ä¹ˆä¼šè·³è¿‡ç›¸åº”çš„æ­¥éª¤ã€‚ æ¥åˆ†æžä»¥ä¸‹å…·ä½“æŸ¥è¯¢çš„æ¯ä¸€ä¸ªé˜¶æ®µ fromï¼šå¯¹ from å·¦è¾¹çš„è¡¨å’Œå³è¾¹çš„è¡¨è®¡ç®—ç¬›å¡å°”ç§¯ã€‚äº§ç”Ÿè™šæ‹Ÿè¡¨ VT1ï¼› onï¼šå¯¹è™šæ‹Ÿè¡¨ VT1è¿›è¡Œ on ç­›é€‰ï¼Œåªæœ‰ç¬¦åˆ\&lt;join-condition>çš„è¡Œæ‰ä¼šè¢«è®°å½•åœ¨è™šæ‹Ÿè¡¨ VT2ä¸­ï¼› joinï¼šå¦‚æžœæŒ‡å®šäº† OUTER JOINï¼ˆæ¯”å¦‚ left joinã€right joinï¼‰ï¼Œé‚£ä¹ˆä¿ç•™è¡¨ä¸­æœªåŒ¹é…çš„è¡Œå°±ä¼šä½œä¸ºå¤–éƒ¨è¡Œæ·»åŠ åˆ°è™šæ‹Ÿè¡¨ VT2ä¸­ï¼Œäº§ç”Ÿè™šæ‹Ÿè¡¨ VT3ï¼Œrug from å­å¥ä¸­åŒ…å«ä¸¤ä¸ªä»¥ä¸Šçš„è¡¨çš„è¯ï¼Œé‚£ä¹ˆå°±ä¼šå¯¹ä¸Šä¸€ä¸ª join è¿žæŽ¥äº§ç”Ÿçš„ç»“æžœ VT3å’Œä¸‹ä¸€ä¸ªè¡¨é‡å¤æ‰§è¡Œæ­¥éª¤1~3è¿™ä¸‰ä¸ªæ­¥éª¤ï¼Œä¸€ç›´å¤„ç†å®Œæ‰€æœ‰çš„è¡¨ä¸ºæ­¢ï¼› whereï¼šå¯¹è™šæ‹Ÿè¡¨ VT3è¿›è¡Œ where æ¡ä»¶è¿‡æ»¤ã€‚åªæœ‰ç¬¦åˆ\&lt;where-condition>çš„è®°å½•æ‰ä¼šè¢«æ’å…¥åˆ°è™šæ‹Ÿè¡¨ VT4ä¸­ï¼› group byï¼šæ ¹æ® group by å­å¥ä¸­çš„åˆ—ï¼Œå¯¹ VT4ä¸­çš„è®°å½•è¿›è¡Œåˆ†ç»„æ“ä½œï¼Œäº§ç”Ÿ VT5ï¼› cube|rollupï¼šå¯¹è™šæ‹Ÿè¡¨ VT5è¿›è¡Œ cube æˆ– rollup æ“ä½œï¼Œäº§ç”Ÿè™šæ‹Ÿè¡¨ VT6ï¼› havingï¼šå¯¹è™šæ‹Ÿè¡¨ VT6åº”ç”¨ having è¿‡æ»¤ï¼Œåªæœ‰ç¬¦åˆ\&lt;having-condition>çš„è®°å½•æ‰ä¼šè¢«æ’å…¥åˆ°è™šæ‹Ÿè¡¨ VT7ä¸­ï¼› selectï¼šæ‰§è¡Œ select æ“ä½œï¼Œé€‰æ‹©æŒ‡å®šçš„åˆ—ï¼Œæ’å…¥åˆ°è™šæ‹Ÿè¡¨ VT8ä¸­ï¼› distinctï¼šå¯¹ VT8ä¸­çš„è®°å½•è¿›è¡ŒåŽ»é‡ï¼Œäº§ç”Ÿè™šæ‹Ÿè¡¨ VT9ï¼› order byï¼šå¯¹è™šæ‹Ÿè¡¨ VT9ä¸­çš„è®°å½•æŒ‰ç…§\&lt;order-by-list>è¿›è¡ŒæŽ’åºæ“ä½œï¼Œäº§ç”Ÿè™šæ‹Ÿè¡¨ VT10ï¼› limitï¼šå–å‡ºæŒ‡å®šè¡Œçš„è®°å½•ï¼Œäº§ç”Ÿè™šæ‹Ÿè¡¨ VT11ï¼Œå¹¶å°†ç»“æžœè¿”å›žã€‚ MySQL è¯­å¥æ‰§è¡Œè¿‡ç¨‹ä¸‹é¢æ˜¯ MySQL çš„åŸºæœ¬æž¶æž„ç¤ºæ„å›¾,ä»Žä¸­å¯ä»¥å¾ˆæ¸…æ¥šçš„çœ‹åˆ° SQL è¯­å¥åœ¨ MySQL çš„å„ä¸ªåŠŸèƒ½æ¨¡å—ä¸­çš„æ‰§è¡Œè¿‡ç¨‹. å¤§ä½“æ¥è¯´, MySQL å¯ä»¥åˆ†ä¸º Server å±‚å’Œå­˜å‚¨å¼•æ“Žä¸¤éƒ¨åˆ†.Server å±‚åŒ…æ‹¬è¿žæŽ¥å™¨ã€æŸ¥è¯¢ç¼“å­˜ã€åˆ†æžå™¨ã€ä¼˜åŒ–å™¨ã€æ‰§è¡Œå™¨ç­‰ï¼Œæ¶µç›– MySQL çš„å¤§å¤šæ•°æ ¸å¿ƒæœåŠ¡åŠŸèƒ½ï¼Œä»¥åŠæ‰€æœ‰çš„å†…ç½®å‡½æ•°ï¼ˆå¦‚æ—¥æœŸã€æ—¶é—´ã€æ•°å­—å’ŒåŠ å¯†å‡½æ•°ç­‰ï¼‰ï¼Œæ‰€æœ‰è·¨å­˜å‚¨å¼•æ“Žçš„åŠŸèƒ½éƒ½åœ¨è¿™ä¸€å±‚å®žçŽ°ï¼Œæ¯”å¦‚å­˜å‚¨è¿‡ç¨‹ã€è§¦å‘å™¨ã€è§†å›¾ç­‰ã€‚è€Œå­˜å‚¨å¼•æ“Žå±‚è´Ÿè´£æ•°æ®çš„å­˜å‚¨å’Œæå–ã€‚å…¶æž¶æž„æ¨¡å¼æ˜¯æ’ä»¶å¼çš„ï¼Œæ”¯æŒ InnoDBã€MylSAMã€Memoryç­‰å¤šä¸ªå­˜å‚¨å¼•æ“Žã€‚çŽ°åœ¨æœ€å¸¸ç”¨çš„å­˜å‚¨å¼•æ“Žæ˜¯ InnoDBï¼Œå®ƒä»Ž MySQL5.5.5ç‰ˆæœ¬å¼€å§‹æˆä¸ºäº†é»˜è®¤å­˜å‚¨å¼•æ“Žã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œä½ åœ¨æ‰§è¡Œ create table å»ºè¡¨çš„æ—¶å€™ï¼Œå¦‚æžœä¸æŒ‡å®šå¼•æ“Žç±»åž‹ï¼Œé»˜è®¤ä½¿ç”¨çš„å°±æ˜¯ InnoDBã€‚ä¸è¿‡ï¼Œå¯ä»¥é€šè¿‡æŒ‡å®šå­˜å‚¨å¼•æ“Žçš„ç±»åž‹æ¥é€‰æ‹©å…¶ä»–çš„å¼•æ“Žï¼Œæ¯”å¦‚åœ¨ create table è¯­å¥ä¸­ä½¿ç”¨ engine=memeoryï¼Œæ¥æŒ‡å®šä½¿ç”¨å†…å­˜å¼•æ“Žåˆ›å»ºè¡¨ã€‚ä¸åŒå­˜å‚¨å¼•æ“Žçš„è¡¨æ•°æ®å­˜å–æ–¹å¼ä¸åŒï¼Œæ”¯æŒçš„åŠŸèƒ½ä¹Ÿä¸åŒã€‚ä»Žä¸Šå›¾ä¸­å¯ä»¥çœ‹å‡ºï¼Œä¸åŒçš„å­˜å‚¨å¼•æ“Žå…±ç”¨ä¸€ä¸ª Server å±‚ï¼Œä¹Ÿå°±æ˜¯ä»Žè¿žæŽ¥å™¨åˆ°æ‰§è¡ŒæœŸçš„éƒ¨åˆ†ã€‚ è¿žæŽ¥å™¨ç¬¬ä¸€æ­¥ï¼Œä½ ä¼šå…ˆè¿žæŽ¥åˆ°è¿™ä¸ªæ•°æ®åº“ä¸Šï¼Œè¿™æ—¶å€™æŽ¥å¾…ä½ çš„å°±æ˜¯è¿žæŽ¥å™¨ã€‚è¿žæŽ¥å™¨è´Ÿè´£è·Ÿå®¢æˆ·ç«¯å»ºç«‹è¿žæŽ¥ã€èŽ·å–æƒé™ã€ç»´æŒå’Œç®¡ç†è¿žæŽ¥ã€‚è¿™æ—¶å€™å‘½ä»¤æ˜¯è¿™ä¹ˆå†™çš„ï¼š 1mysql -h$ip -P$port -u$user -p è¾“å®Œå‘½ä»¤åŽï¼Œå°±éœ€è¦åœ¨äº¤äº’å¯¹è¯ä¸­è¾“å…¥å¯†ç ã€‚è¿žæŽ¥å‘½ä»¤ä¸­çš„ mysql æ˜¯å®¢æˆ·ç«¯å·¥å…·ï¼Œç”¨æ¥æ ¹æœåŠ¡ç«¯å»ºç«‹è¿žæŽ¥ã€‚åœ¨å®Œæˆç»å…¸çš„ TCP æ¡æ‰‹åŽï¼Œè¿žæŽ¥å™¨å°±å¼€å§‹è®¤è¯èº«ä»½ï¼Œè¿™ä¸ªæ—¶å€™ç”¨çš„å°±æ˜¯ä½ è¾“å…¥çš„ç”¨æˆ·åå’Œå¯†ç ã€‚ å¦‚æžœç”¨æˆ·åæˆ–å¯†ç ä¸å¯¹ï¼Œä¼šè¿”å›žâ€™Access denied for userâ€™çš„é”™è¯¯ï¼Œç„¶åŽå®¢æˆ·ç«¯ç¨‹åºç»“æŸã€‚ å¦‚æžœç”¨æˆ·åå¯†ç è®¤è¯é€šè¿‡ï¼Œè¿žæŽ¥å™¨ä¼šåˆ°æƒé™è¡¨é‡Œé¢æŸ¥çœ‹ç”¨æˆ·æ‹¥æœ‰çš„æƒé™ã€‚ä¹‹åŽï¼Œè¿™ä¸ªé“¾æŽ¥é‡Œé¢çš„æƒé™åˆ¤æ–­é€»è¾‘ï¼Œéƒ½ä¾èµ–äºŽæ­¤æ—¶è¯»åˆ°çš„æƒé™ã€‚è¿™æ„å‘³ç€ä¿®æ”¹æƒé™ä¸ä¼šç«‹é©¬æœ‰æ•ˆï¼Œéœ€è¦é‡æ–°è¿žæŽ¥æœåŠ¡å™¨æ‰ä¼šç”Ÿæ•ˆã€‚ è¿žæŽ¥å®ŒæˆåŽï¼Œå¦‚æžœæ²¡æœ‰åŽç»­çš„åŠ¨ä½œï¼Œè¿™ä¸ªé“¾æŽ¥å°±å¤„äºŽç©ºé—²çŠ¶æ€ï¼Œä½ å¯ä»¥åœ¨ show processlist å‘½ä»¤ä¸­çœ‹åˆ°å®ƒã€‚å¦‚ä¸‹æ‰€ç¤ºï¼Œå…¶ä¸­çš„ Command åˆ—æ˜¾ç¤ºä¸ºQueryï¼Œè¡¨ç¤ºçŽ°åœ¨ç³»ç»Ÿé‡Œé¢æœ‰ä¸€ä¸ªæŸ¥è¯¢é“¾æŽ¥ã€‚ å®¢æˆ·ç«¯å¦‚æžœå¤ªé•¿æ—¶é—´ä¸æ´»è·ƒï¼Œè¿žæŽ¥å™¨å°±ä¼šè‡ªåŠ¨æ–­å¼€è¿žæŽ¥ã€‚è¿™ä¸ªæ—¶é—´ç”±å‚æ•° wiait_timeout æŽ§åˆ¶ï¼Œé»˜è®¤ä¸º8å°æ—¶ã€‚å¦‚æžœè¿žæŽ¥æ–­å¼€ï¼Œå®¢æˆ·ç«¯å†æ¬¡å‘é€è¯·æ±‚æ—¶ï¼Œä¼šæ”¶åˆ°é”™è¯¯æé†’ï¼šLost connection to MySQL server during queryã€‚è¿™æ—¶å€™å¦‚æžœè¦ç»§ç»­è¿žæŽ¥ï¼Œå°±éœ€è¦é‡è¿žï¼Œç„¶åŽæ‰§è¡ŒæŸ¥è¯¢ã€‚æ•°æ®åº“é‡Œé¢ï¼Œé•¿è¿žæŽ¥æ˜¯æŒ‡è¿žæŽ¥æˆåŠŸåŽï¼Œå¦‚æžœå®¢æˆ·ç«¯æŒç»­æœ‰è¯·æ±‚ï¼Œåˆ™ä¸€ç›´ä½¿ç”¨åŒä¸€ä¸ªè¿žæŽ¥ã€‚çŸ­è¿žæŽ¥åˆ™æ˜¯æŒ‡æ¯æ¬¡æ‰§è¡Œå®Œå¾ˆå°‘çš„å‡ æ¬¡æŸ¥è¯¢å°±æ–­å¼€è¿žæŽ¥ï¼Œä¸‹æ¬¡æŸ¥è¯¢é‡å»ºä¸€ä¸ªã€‚å»ºç«‹è¿žæŽ¥çš„è¿‡ç¨‹é€šå¸¸æ˜¯æ¯”è¾ƒå¤æ‚çš„ï¼Œæ‰€ä»¥åœ¨ä½¿ç”¨ä¸­å°½é‡å‡å°‘å»ºç«‹è¿žæŽ¥çš„åŠ¨ä½œï¼Œä¹Ÿå°±æ˜¯å°½é‡ä½¿ç”¨é•¿è¿žæŽ¥ã€‚ä½†æ˜¯å…¨éƒ¨ä½¿ç”¨é•¿è¿žæŽ¥åŽï¼Œä¼šå‘çŽ° MySQL å ç”¨å†…å­˜æ¶¨çš„ç‰¹åˆ«å¿«ï¼Œè¿™æ˜¯å› ä¸º MySQL åœ¨æ‰§è¡Œè¿‡ç¨‹ä¸­ä¸´æ—¶ä½¿ç”¨çš„å†…å­˜æ˜¯ç®¡ç†åœ¨è¿žæŽ¥å¯¹è±¡é‡Œé¢çš„ã€‚è¿™äº›èµ„æºä¼šåœ¨è¿žæŽ¥æ–­å¼€æ‰ä¼šé‡Šæ”¾ï¼Œæ‰€ä»¥å¦‚æžœå¤§é‡çš„é•¿è¿žæŽ¥ç§¯ç´¯çš„è¯ï¼Œä¼šå¯¼è‡´å†…å­˜å ç”¨å¤ªå¤§ï¼Œè¢«ç³»ç»Ÿå¼ºè¡Œæ€æŽ‰ï¼ˆOOMï¼‰ï¼Œä»ŽçŽ°è±¡çœ‹å°±æ˜¯ MySQL å¼‚å¸¸é‡å¯äº†ã€‚æ€Žä¹ˆè§£å†³è¿™ä¸ªé—®é¢˜å‘¢ï¼Ÿæœ‰ä¸¤ç§æ–¹æ¡ˆã€‚ å®šæœŸæ–­å¼€é•¿è¿žæŽ¥ã€‚ä½¿ç”¨ä¸€æ®µæ—¶é—´ï¼Œæˆ–è€…ç¨‹åºé‡Œé¢åˆ¤æ–­æ‰§è¡Œè¿‡å ç”¨å†…å­˜çš„å¤§æŸ¥è¯¢åŽï¼Œæ–­å¼€è¿žæŽ¥ï¼Œä¹‹åŽè¦æŸ¥è¯¢å†è¿žæŽ¥ã€‚ å¦‚æžœä½¿ç”¨çš„æ˜¯5.7åŠä»¥åŽçš„ç‰ˆæœ¬ï¼Œå¯ä»¥åœ¨æ¯æ¬¡æ‰§è¡Œä¸€ä¸ªæ¯”è¾ƒå¤§çš„æ“ä½œåŽï¼Œé€šè¿‡æ‰§è¡Œ mysql_reset_connection æ¥é‡æ–°åˆå§‹åŒ–è¿žæŽ¥èµ„æºã€‚è¿™ä¸ªè¿‡ç¨‹ä¸éœ€è¦é‡è¿žå’Œé‡æ–°åšæƒé™éªŒè¯ï¼Œä½†æ˜¯ä¼šå°†è¿žæŽ¥å›žå¤åˆ°åˆšåˆšåˆ›å»ºå®Œæ—¶çš„çŠ¶æ€ã€‚ æŸ¥è¯¢ç¼“å­˜è¿žæŽ¥å»ºç«‹å®ŒæˆåŽï¼Œä½ å°±å¯ä»¥æ‰§è¡Œ select è¯­å¥äº†ã€‚æ‰§è¡Œé€»è¾‘å°±ä¼šæ¥åˆ°ç¬¬äºŒæ­¥ï¼šæŸ¥è¯¢ç¼“å­˜ã€‚MySQL æ‹¿åˆ°ä¸€ä¸ªæŸ¥è¯¢è¯·æ±‚åŽï¼Œä¼šå…ˆåˆ°æŸ¥è¯¢å†…å­˜æŸ¥çœ‹ï¼Œä¹‹å‰æ˜¯å¦æ‰§è¡Œè¿‡è¿™æ¡è¯­å¥ã€‚ä¹‹å‰æ‰§è¡Œè¿‡çš„è¯­å¥åŠå…¶ç»“æžœå¯èƒ½ä¼šä»¥ key-value çš„å½¢å¼å­˜å‚¨åœ¨å†…å­˜ä¸­ã€‚key æ˜¯æŸ¥è¯¢çš„è¯­å¥ï¼Œvalue æ˜¯æŸ¥è¯¢çš„ç»“æžœã€‚å¦‚æžœä½ çš„æŸ¥è¯¢èƒ½å¤Ÿç›´æŽ¥åœ¨è¿™ä¸ªç¼“å­˜ä¸­æ‰¾åˆ° keyï¼Œé‚£ä¹ˆè¿™ä¸ª value å°±ä¼šç›´æŽ¥è¿”å›žç»™å®¢æˆ·ç«¯ã€‚å¦‚æžœä¹‹å‰æ²¡æœ‰æ‰§è¡Œè¿‡è¿™æ¡è¯­å¥ï¼Œå°±ä¼šæ‰§è¡ŒåŽé¢çš„æ‰§è¡Œé˜¶æ®µã€‚æ‰§è¡Œå®ŒæˆåŽï¼Œæ‰§è¡Œç»“æžœä¼šå­˜å…¥æŸ¥è¯¢ç¼“å­˜ã€‚è¿™æ ·çš„ä¼˜ç‚¹æ˜¯ï¼Œå¦‚æžœæŸ¥è¯¢ç¼“å­˜å‘½ä¸­ï¼Œä¸éœ€è¦æ‰§è¡ŒåŽé¢çš„å¤æ‚æ“ä½œï¼Œå°±å¯ä»¥ç›´æŽ¥è¿”å›žç»“æžœï¼Œæ•ˆçŽ‡ä¼šæžå¤§åœ°æé«˜ã€‚ä½†æ˜¯å¤§å¤šæ•°æƒ…å†µä¸å»ºè®®ä½¿ç”¨æŸ¥è¯¢ç¼“å­˜ï¼Œå› ä¸ºæŸ¥è¯¢ç¼“å­˜å¾€å¾€åˆ©å¤§äºŽå¼Šã€‚æŸ¥è¯¢ç¼“å­˜çš„å¤±æ•ˆéžå¸¸é¢‘ç¹ï¼Œåªè¦æœ‰å¯¹ä¸€ä¸ªè¡¨çš„æ›´æ–°ï¼Œè¿™ä¸ªè¡¨ä¸Šæ‰€æœ‰çš„æŸ¥è¯¢ç¼“å­˜éƒ½ä¼šè¢«æ¸…ç©ºã€‚å› æ­¤å¾ˆå¯èƒ½è´¹åŠ²å­˜å‚¨çš„ç¼“å­˜ï¼Œè¿˜æ²¡ä½¿ç”¨å°±è¢«ä¸€ä¸ªæ›´æ–°å…¨æ¸…ç©ºäº†ã€‚å¯¹äºŽæ›´æ–°åŽ‹åŠ›å¤§çš„æ•°æ®åº“æ¥è¯´ï¼ŒæŸ¥è¯¢ç¼“å­˜çš„å‘½ä¸­çŽ‡ä¼šéžå¸¸ä½Žã€‚é™¤éžæ‰€æœ‰çš„ä¸šåŠ¡æ˜¯ä¸€å¼ é™æ€è¡¨ï¼Œå¾ˆé•¿æ—¶é—´æ›´æ–°ä¸€æ¬¡ã€‚æ¯”å¦‚ä¸€ä¸ªç³»ç»Ÿé…ç½®è¡¨ï¼Œé‚£è¿™å¼ è¡¨ä¸Šçš„æŸ¥è¯¢æ‰é€‚åˆä½¿ç”¨æŸ¥è¯¢ç¼“å­˜ã€‚å¥½åœ¨ MySQL æä¾›äº†æŒ‰éœ€ä½¿ç”¨çš„æ–¹å¼ã€‚å¯ä»¥å°†å‚æ•°query_cache_type è®¾ç½®æˆ DEMANDï¼Œè¿™æ ·å¯¹äºŽé»˜è®¤çš„ SQL è¯­å¥éƒ½ä¸ä½¿ç”¨æŸ¥è¯¢ç¼“å­˜ã€‚è€Œå¯¹äºŽä½ ç¡®å®šè¦ä½¿ç”¨æŸ¥è¯¢ç¼“å­˜çš„è¯­å¥ï¼Œå¯ä»¥ç”¨ SQL_CACHE æ˜¾ç¤ºæŒ‡å®šï¼Œåƒä¸‹é¢è¿™ä¸ªè¯­å¥ä¸€æ ·ï¼š 1mysql&gt; select SQL_CACHE * from T where ID=10; ä¸è¿‡åœ¨æœ€æ–°çš„8.0ç‰ˆæœ¬è¿™åŠŸèƒ½è¢«åˆ äº†ã€‚ åˆ†æžå™¨å¦‚æžœæ²¡æœ‰å‘½ä¸­æŸ¥è¯¢ç¼“å­˜ï¼Œå°±è¦å¼€å§‹çœŸæ­£çš„æ‰§è¡Œè¯­å¥äº†ã€‚é¦–å…ˆï¼ŒMySQL éœ€è¦çŸ¥é“ä½ è¦åšä»€ä¹ˆï¼Œå› æ­¤éœ€è¦å¯¹ SQL è¯­å¥åšè§£æžã€‚åˆ†æžå™¨é¦–å…ˆä¼šåšâ€˜â€™è¯æ³•åˆ†æžâ€˜â€™ï¼Œä½ è¾“å…¥çš„æ˜¯ç”±å¤šä¸ªå­—ç¬¦ä¸²å’Œç©ºæ ¼ç»„æˆçš„ä¸€æ¡ SQL è¯­å¥ï¼ŒMySQLéœ€è¦è¯†åˆ«å‡ºé‡Œé¢çš„å­—ç¬¦ä¸²åˆ†åˆ«æ˜¯ä»€ä¹ˆï¼Œä»£è¡¨ä»€ä¹ˆã€‚MySQL ä»Žä½ è¾“å…¥çš„â€˜â€™selectâ€˜â€™è¿™ä¸ªå…³é”®è¯è¯†åˆ«å‡ºæ¥ï¼Œè¿™æ˜¯ä¸€ä¸ªæŸ¥è¯¢è¯­å¥ã€‚å®ƒä¹Ÿè¦æŠŠå­—ç¬¦ä¸²â€˜â€™Tâ€˜â€™è¯†åˆ«æˆâ€˜â€™è¡¨åTâ€˜â€™ï¼ŒæŠŠå­—ç¬¦ä¸²â€˜â€™IDâ€˜â€™è¯†åˆ«æˆâ€˜â€™åˆ— IDâ€˜â€™ã€‚åšå®Œäº†è¿™äº›è¯†åˆ«ä»¥åŽï¼Œå°±è¦åšâ€˜â€™è¯­æ³•åˆ†æžâ€˜â€™ã€‚æ ¹æ®æ­¤æ³•åˆ†æžçš„ç»“æžœï¼Œè¯­æ³•åˆ†æžå™¨ä¼šæ ¹æ®è¯­æ³•è§„åˆ™ï¼Œåˆ¤æ–­ä½ è¾“å…¥çš„è¿™ä¸ª SQL è¯­å¥æ˜¯å¦æ»¡è¶³ MySQL è¯­æ³•ã€‚å¦‚æžœä½ çš„è¯­å¥ä¸å¯¹ï¼Œå°±ä¼šæ”¶åˆ°â€˜â€™You have an error in your SQL syntaxâ€˜â€™çš„é”™è¯¯æé†’ã€‚ä¸€èˆ¬è¯­æ³•é”™è¯¯ä¼šæç¤ºç¬¬ä¸€ä¸ªå‡ºçŽ°é”™è¯¯çš„ä½ç½®ï¼Œæ‰€ä»¥ä½ è¦å…³æ³¨çš„æ˜¯ç´§æŽ¥â€˜â€™use nearâ€˜â€™çš„å†…å®¹ã€‚ ä¼˜åŒ–å™¨ç»è¿‡äº†åˆ†æžå™¨ï¼ŒMySQL å°±çŸ¥é“è¦åšä»€ä¹ˆäº†ã€‚åœ¨å¼€å§‹æ‰§è¡Œä¹‹å‰ï¼Œè¿˜è¦ç»è¿‡ä¼˜åŒ–å™¨çš„å¤„ç†ã€‚ä¼˜åŒ–å™¨æ˜¯åœ¨è¡¨é‡Œé¢æœ‰å¤šä¸ªç´¢å¼•çš„æ—¶å€™ï¼Œå†³å®šä½¿ç”¨å“ªä¸ªç´¢å¼•ï¼›æˆ–è€…åœ¨ä¸€ä¸ªè¯­å¥æœ‰å¤šè¡¨å…³è”ï¼ˆjoinï¼‰çš„æ—¶å€™ï¼Œå†³å®šå„ä¸ªè¡¨çš„è¿žæŽ¥é¡ºåºã€‚æ¯”å¦‚ä¸‹é¢è¿™ä¸ªè¯­å¥ï¼Œæ˜¯æ‰§è¡Œä¸¤ä¸ªè¡¨çš„ joinï¼š 1mysql&gt; select * from t1 join t2 using(ID) where t1.c=10 and t2.d=20; æ—¢å¯ä»¥å…ˆä»Žè¡¨ t1ä¸­å–å‡º c=10 è®°å½•çš„ID å€¼ï¼Œåœ¨æ ¹æ® ID å€¼å…³è”åˆ°è¡¨ t2ï¼Œå†åˆ¤æ–­ t2é‡Œé¢ d çš„å€¼æ˜¯å¦ç­‰äºŽ20ã€‚ ä¹Ÿå¯ä»¥å…ˆä»Žè¡¨ t2é‡Œé¢å–å‡º d=20è®°å½•çš„ ID å€¼ï¼Œåœ¨æ ¹æ® ID å€¼å…³è”åˆ° t1ï¼Œå†åˆ¤æ–­ t1é‡Œé¢ c çš„å€¼æ˜¯å¦ç­‰äºŽ10ã€‚ è¿™ä¸¤ç§æ‰§è¡Œæ–¹æ¡ˆçš„é€»è¾‘ç»“æžœæ˜¯ä¸€æ ·çš„ï¼Œä½†æ˜¯æ•ˆçŽ‡ä¼šæœ‰ä¸åŒï¼Œè€Œä¼˜åŒ–å™¨çš„ä½œç”¨å°±æ˜¯å†³å®šé€‰æ‹©ä½¿ç”¨å“ªä¸ªæ–¹æ¡ˆã€‚ ä¼˜åŒ–å™¨é˜¶æ®µå®ŒæˆåŽï¼Œè¿™ä¸ªè¯­å¥çš„æ‰§è¡Œæ–¹æ¡ˆå°±ç¡®å®šä¸‹æ¥äº†ï¼Œç„¶åŽè¿›å…¥æ‰§è¡Œå™¨é˜¶æ®µã€‚ æ‰§è¡Œå™¨MySQL é€šè¿‡åˆ†æžå™¨çŸ¥é“äº†è¦åšä»€ä¹ˆï¼Œé€šè¿‡äº†ä¼˜åŒ–å™¨çŸ¥é“æ€Žä¹ˆåšï¼ŒäºŽæ˜¯å°±è¿›å…¥äº†æ‰§è¡Œå™¨é˜¶æ®µï¼Œå¼€å§‹æ‰§è¡Œè¯­å¥ã€‚å¼€å§‹æ‰§è¡Œçš„æ—¶å€™ï¼Œéœ€è¦å…ˆåˆ¤æ–­ç”¨æˆ·å¯¹è¡¨ T æ˜¯å¦æ‹¥æœ‰æŸ¥è¯¢æƒé™ï¼Œå¦‚æžœæ²¡æœ‰ï¼Œå°±ä¼šè¿”å›žæ²¡æœ‰æƒé™çš„é”™è¯¯ã€‚ 12mysql&gt; select * from T where ID=10;ERROR 1142 (42000): SELECT command denied to user &apos;b&apos;@&apos;localhost&apos; for table &apos;T&apos; å¦‚æžœæœ‰æƒé™ï¼Œå°±æ‰“å¼€è¡¨ç»§ç»­æ‰§è¡Œã€‚æ‰“å¼€è¡¨çš„æ—¶å€™ï¼Œæ‰§è¡Œå™¨ä¼šæ ¹æ®è¡¨çš„å¼•æ“Žå®šä¹‰ï¼ŒåŽ»ä½¿ç”¨è¯¥å¼•æ“Žæä¾›çš„æŽ¥å£ã€‚æ¯”å¦‚è¡¨ T ä¸­ï¼ŒID å­—æ®µä¹ˆæœ‰ç´¢å¼•ï¼Œé‚£ä¹ˆæ‰§è¡ŒæœŸçš„æ‰§è¡Œæµç¨‹æ˜¯è¿™æ ·çš„ï¼š è°ƒç”¨ InnoDB å¼•æ“ŽæŽ¥å£å–è¯¥è¡¨çš„ç¬¬ä¸€è¡Œï¼Œåˆ¤æ–­ ID å€¼æ˜¯å¦ä¸º10ï¼Œå¦‚æžœä¸æ˜¯åˆ™è·³è¿‡ï¼Œå¦‚æžœæ˜¯åˆ™å°†è¿™è¡Œå­˜åœ¨ç»“æžœé›†ä¸­ï¼› è°ƒç”¨å¼•æ“ŽæŽ¥å£å–â€˜â€™ä¸‹ä¸€è¡Œâ€˜â€™ï¼Œé‡å¤ç›¸åŒçš„åˆ¤æ–­é€»è¾‘ï¼Œç›´åˆ°å–åˆ°è¿™ä¸ªè¡¨çš„æœ€åŽä¸€è¡Œã€‚ æ‰§è¡Œå™¨å°†ä¸Šè¿°éåŽ†è¿‡ç¨‹ä¸­æ‰€æœ‰æ»¡è¶³æ¡ä»¶çš„è¡Œç»„æˆçš„è®°å½•é›†ä½œä¸ºç»“æžœé›†è¿”å›žç»™å®¢æˆ·ç«¯ã€‚ è‡³æ­¤ï¼Œè¯¥è¯­å¥æ‰§è¡Œç»“æŸã€‚ å¯¹äºŽæœ‰ç´¢å¼•çš„è¡¨ï¼Œæ‰§è¡Œçš„é€»è¾‘å·®ä¸å¤šã€‚ç¬¬ä¸€æ¬¡è°ƒç”¨çš„æ˜¯â€˜â€™å–æ»¡è¶³æ¡ä»¶çš„ç¬¬ä¸€è¡Œâ€˜â€™è¿™ä¸ªæŽ¥å£ï¼Œä¹‹åŽå¾ªçŽ¯å–â€˜â€™æ»¡è¶³æ¡ä»¶çš„ä¸‹ä¸€è¡Œâ€˜â€™è¿™ä¸ªæŽ¥å£ï¼Œè¿™äº›æŽ¥å£éƒ½æ˜¯å¼•æ“Žä¸­å·²ç»å®šä¹‰å¥½çš„ã€‚ ä½ ä¼šåœ¨æ•°æ®åº“çš„æ…¢æŸ¥è¯¢æ—¥å¿—ä¸­çœ‹åˆ°ä¸€ä¸ª rows_examined çš„å­—æ®µï¼Œè¡¨ç¤ºè¿™ä¸ªè¯­å¥æ‰§è¡Œè¿‡ç¨‹ä¸­æ‰«æäº†å¤šå°‘è¡Œã€‚è¿™ä¸ªå€¼å°±æ˜¯åœ¨æ‰§è¡Œå™¨æ¯æ¬¡è°ƒç”¨å¼•æ“ŽèŽ·å–æ•°æ®è¡Œçš„æ—¶å€™ç´¯åŠ çš„ã€‚ åœ¨æŸäº›åœºæ™¯ä¸‹ï¼Œæ‰§è¡Œå™¨è°ƒç”¨ä¸€æ¬¡ï¼Œåœ¨å¼•æ“Žå†…éƒ¨åˆ™æ‰«æäº†å¤šè¡Œï¼Œå› æ­¤å¼•æ“Žæ‰«æè¡Œæ•°è·Ÿrows_examined å¹¶ä¸æ˜¯å®Œå…¨ç›¸åŒçš„ã€‚]]></content>
      <categories>
        <category>æ•°æ®åº“</category>
      </categories>
  </entry>
  <entry>
    <title><![CDATA[æ•°æ®åº“ï¼ˆå››ï¼‰]]></title>
    <url>%2F2018%2F11%2F22%2F%E6%95%B0%E6%8D%AE%E5%BA%93%EF%BC%88%E5%9B%9B%EF%BC%89%2F</url>
    <content type="text"><![CDATA[å‰è¨€æ˜¨å¤©å­¦ä¹ äº†è¡¨ä¸Žè¡¨ä¹‹é—´çš„å…³ç³»ã€å¤šè¡¨å…³è”ã€å¤åˆ¶è¡¨ã€å•è¡¨æŸ¥è¯¢çš„çŸ¥è¯†ï¼Œä»Šå¤©å­¦ä¹ çš„å†…å®¹æ˜¯å•è¡¨æŸ¥è¯¢ä¸Žå…³é”®è¯çš„æ‰§è¡Œé¡ºåºã€æ­£åˆ™è¡¨è¾¾å¼ä»¥åŠæœ€é‡è¦çš„å¤šè¡¨æŸ¥è¯¢ã€‚ æ•°æ®åº“å¢žåˆ æ”¹å¢ž1insert [into] è¡¨å[(å¯é€‰å­—æ®µå)] values(ä¸€ç»„å€¼1),(ä¸€ç»„å€¼2),...; into å¯ä»¥çœç•¥ï¼Œè¡¨ååŽçš„å­—æ®µå¯é€‰ï¼Œå¦‚æžœå†™äº†åŽé¢çš„ values ä¸­çš„å€¼å¿…é¡»ä¸Žè¡¨ååŽçš„å­—æ®µæ„ä¹‰å¯¹åº”ï¼Œå¦‚æžœæ²¡å†™åŽé¢çš„ values ä¸­çš„å€¼å¿…é¡»ä¸Žè¡¨çš„æ‰€æœ‰å­—æ®µä¸€ä¸€å¯¹åº”ï¼ŒvaluesåŽé¢å¯ä»¥ç»™å‡ºå¤šç»„å€¼å¹¶ç”¨é€—å·éš”å¼€ã€‚ åˆ 1delete from è¡¨å[where æ¡ä»¶]; å¦‚æžœæ¡ä»¶ä¸å†™çš„è¯æ˜¯åˆ é™¤æ‰€æœ‰è®°å½•ï¼Œä¸è¿‡è¿™æ ·åˆ é™¤è¡¨çš„æ•ˆçŽ‡å¾ˆä½Žï¼Œå› ä¸ºæ˜¯ä¸€è¡Œè¡Œåˆ é™¤æ•°æ®ï¼Œè‡ªå¢žçš„ idä¸ä¼šå½’é›¶ã€‚ä½¿ç”¨truncate æ˜¯é‡å»ºè¡¨ï¼Œå…ˆè®°å½•è¡¨ç»“æž„ç„¶åŽåˆ é™¤æ•´ä¸ªè¡¨å†é‡æ–°å»ºè¡¨å‡ºæ¥ï¼Œè‡ªå¢žçš„ id ä¼šå½’é›¶ã€‚ æ”¹1update è¡¨å set å­—æ®µå = å€¼,[,å­—æ®µ2 = å€¼2],[where æ¡ä»¶]; å¯ä»¥ä¸€æ¬¡æ€§ä¿®æ”¹å¤šä¸ªå­—æ®µçš„å€¼ï¼Œå€¼ä¹‹é—´éœ€è¦ç”¨é€—å·éš”å¼€ï¼›å¦‚æžœä¸å†™æ¡ä»¶çš„è¯å°±æ˜¯ä¿®æ”¹æ‰€æœ‰è®°å½•ã€‚ å•è¡¨æŸ¥è¯¢ä¸å¸¦å…³é”®å­—çš„æŸ¥è¯¢1select (*|å­—æ®µå|å››åˆ™è¿ç®—|èšåˆå‡½æ•°) from è¡¨å [where æ¡ä»¶]; å‡†å¤‡æ•°æ® 1234567891011mysql&gt; create table stu(id int primary key auto_increment, name char(10), math int, english int);mysql&gt; insert into stu values(null,&apos;èµµäº‘&apos;,90,30);mysql&gt; insert into stu values(null,&apos;å°ä¹”&apos;,90,60);mysql&gt; insert into stu values(null,&apos;å°ä¹”&apos;,90.60);mysql&gt; insert into stu values(null,&apos;å¤§ä¹”&apos;,10,70);mysql&gt; insert into stu values(null,&apos;æŽæ¸…ç…§&apos;,100,100);mysql&gt; insert into stu values(null,&apos;é“æ‹æŽ&apos;,20,55);mysql&gt; insert into stu values(null,&apos;å°æŽå­&apos;,20,55); * è¡¨ç¤ºæŸ¥è¯¢æ‰€æœ‰å­—æ®µ 1mysql&gt; select * from stu; å­—æ®µå å¯ä»¥æ‰‹åŠ¨æŒ‡å®šè¦æŸ¥è¯¢çš„å­—æ®µ 1mysql&gt; select engish from stu; å­—æ®µçš„å€¼å¯ä»¥è¿›è¡ŒåŠ å‡ä¹˜é™¤ ç»Ÿè®¡æ€»åˆ† 1mysql&gt; select math+ english from stu; å¦‚æžœè§‰å¾— math+english åå­—å¤ªé•¿ä¹Ÿå¯ä»¥å–åˆ«å 1mysql&gt; select math+english [as] æ€»åˆ† from stu; aså¯ä»¥çœç•¥ ç»™è‹±è¯­æˆç»©åŠ åˆ† 1mysql&gt; select english+10 from stu; èšåˆå‡½æ•° ç”¨äºŽç»Ÿè®¡ ä»€ä¹ˆæ˜¯èšåˆå‡½æ•°ï¼Œå°†å¤šä¸ªæ•°æ®è¿›è¡Œè®¡ç®—ï¼Œå¹¶å¾—åˆ°ä¸€ä¸ªç»“æžœï¼Œç§°ä¸ºèšåˆ èšåˆå‡½æ•°ï¼š æ³¨æ„ä¸èƒ½å† where åŽé¢ä½¿ç”¨èšåˆå‡½æ•°ï¼Œå› ä¸º where ç›¸å½“äºŽæ‰“å¼€æ–‡ä»¶ç„¶åŽè¯»å–æ–‡ä»¶ä¸­çš„æ•°æ®ï¼Œè€Œä½¿ç”¨èšåˆå‡½æ•°å¾ˆæ˜¾ç„¶éœ€è¦å¤šä¸ªå€¼æ¥èšåˆï¼Œé‚£ä¹ˆæ²¡æœ‰è¯»å–å®Œæ•°æ®å°±ä½¿ç”¨ä¸äº†èšåˆå‡½æ•°ï¼Œæ‰€ä»¥è¿™æ—¶å€™åº”è¯¥ä½¿ç”¨ onï¼Œæ‰€ä»¥èšåˆå‡½æ•°ä¸èƒ½å†™åœ¨ where åŽé¢,whereä¼šæœ€å…ˆæ‰§è¡Œï¼Œå®ƒçš„ä½œç”¨æ˜¯è¯»å–æ•°æ®å¹¶è¿‡æ»¤ sum 1mysql&gt; select sum(salary) from emp; count 1mysql&gt; select count(*) from emp group by dept; avg 1mysql&gt; select avg(salary) from emp; max/min 12mysql&gt; select max(salary) from emp;mysql&gt; select min(salary) from emp; ç»“åˆä½¿ç”¨ï¼š 1mysql&gt; select dept,count(name) from emp group by dept; where æ˜¯å¯é€‰çš„ å…³é”®å­—çš„æ‰§è¡Œé¡ºåºfromç”¨äºŽæ‰“å¼€æ–‡ä»¶ distinctåŽ»é™¤é‡å¤æ•°æ®ï¼Œæ‰€æœ‰æ•°æ®å…¨éƒ½é‡å¤æ‰ç®—é‡å¤ 1mysql&gt; select distinct * from stu; whereå¯¹è¯»å–çš„æ•°æ®è¿›è¡Œè¿‡æ»¤ where åŽé¢è·Ÿçš„æ¡ä»¶æ¯”è¾ƒå¤šï¼š between and1mysql&gt; select * from stu where english between 70 and 80; in1mysql&gt; select * from stu where math in (89,90,91); like1mysql&gt; select * from stu where name like &apos;æŽ%&apos;; and1mysql&gt; select * from stu where math &gt; 80 and english &gt; 80; 1mysql&gt; select * from stu where math &gt; 60 and english &lt; 60; group byå¯¹æ•°æ®è¿›è¡Œåˆ†ç»„ï¼Œä¸ºäº†è¿›è¡Œç»Ÿè®¡ã€‚group by åŽé¢å¯ä»¥æœ‰å¤šä¸ªåˆ†ç»„ä¾æ®ï¼Œä¼šæŒ‰ç…§é¡ºåºæ‰§è¡Œ å‡†å¤‡æ•°æ® 1234567891011121314151617mysql&gt; create table emp( id int, name char(10), sex char, dept char(10), job char(10), salary double);mysql&gt; insert into emp values( (1,&apos;åˆ˜å¤‡&apos;,&apos;ç”·&apos;,&apos;å¸‚åœº&apos;,&apos;æ€»ç›‘&apos;,5800), (2,&apos;å¼ é£ž&apos;,&apos;ç”·&apos;,&apos;å¸‚åœº&apos;,&apos;å‘˜å·¥&apos;,3000), (3,&apos;å…³ç¾½&apos;,&apos;ç”·&apos;,&apos;å¸‚åœº&apos;,&apos;å‘˜å·¥&apos;,4000), (4,&apos;å­™æƒ&apos;,&apos;ç”·&apos;,&apos;è¡Œæ”¿&apos;,&apos;æ€»ç›‘&apos;,6000), (5,&apos;å‘¨ç‘œ&apos;,&apos;ç”·&apos;,&apos;è¡Œæ”¿&apos;,&apos;å‘˜å·¥&apos;,5000), (6,&apos;å°ä¹”&apos;,&apos;å¥³&apos;,&apos;è¡Œæ”¿&apos;,&apos;å‘˜å·¥&apos;,4000), (7,&apos;æ›¹æ“&apos;,&apos;ç”·&apos;,&apos;è´¢åŠ¡&apos;,&apos;æ€»ç›‘&apos;,10000), (8,&apos;å¸é©¬æ‡¿&apos;,&apos;ç”·&apos;,&apos;è´¢åŠ¡&apos;,&apos;å‘˜å·¥&apos;,6000) ); æŸ¥çœ‹æ‰€æœ‰éƒ¨é—¨1mysql&gt; select dept from emp group by dept; åˆ†ç»„åŽï¼Œç»„é‡Œçš„è¯¦ç»†è®°å½•å°±è¢«éšè—èµ·æ¥äº†ï¼Œä¸èƒ½ç›´æŽ¥æŸ¥çœ‹ï¼Œdept åˆ†ç»„å°±å˜æˆä¸‰æ¡è®°å½•ï¼Œæ¯ä¸ªç»„ä¸­ä¼šåŒ…å«éšè—çš„è®°å½•ï¼Œæ²¡åŠžæ³•æ˜¾ç¤ºï¼Œå¦‚æžœä¸€å®šæƒ³æ˜¾ç¤ºçš„è¯ï¼Œå¯ä»¥ä½¿ç”¨ group_concat(å­—æ®µå)ï¼Œå¯ä»¥å°†å¤šä¸ªå€¼æ‹¼æŽ¥ä¸ºä¸€ä¸ªå€¼ï¼š 1mysql&gt; select dept,group_concat(name) from emp group by dept; æ³¨æ„ï¼šåªæœ‰å‡ºçŽ°åœ¨ group by åŽé¢çš„å­—æ®µï¼Œæ‰å¯ä»¥é€šè¿‡ select æ˜¾ç¤ºå‡ºæ¥ï¼Œå…¶ä»–çš„éƒ½è¢«éšè—äº†ã€‚åœ¨ mysql5.6åˆ†ç»„åŽä¼šé»˜è®¤æ˜¾ç¤ºæ¯ç»„çš„ç¬¬ä¸€æ¡è®°å½•ï¼Œ5.7ä¸æ˜¾ç¤ºï¼Œå› ä¸º5.7ä¸­sql_modeä¸­å°±æ˜¯ONLY_FULL_GROUP_BY æŸ¥çœ‹æ¯ä¸ªéƒ¨åˆ†æœ‰å¤šå°‘äºº1mysql&gt; select dept,count(name) from emp group by dept; è®¡ç®—æ¯ä¸ªéƒ¨é—¨çš„å¹³å‡è–ªèµ„1mysql&gt; select dept,avg(salary) from emp group by dept; å–åˆ«å 1mysql&gt; select dept,avg(salary) å¹³å‡å·¥èµ„ from emp group by dept; è®¡ç®—æ¯ä¸ªå²—ä½çš„å¹³å‡å·¥èµ„1mysql&gt; select job,avg(salary) from emp group by job; è®¡ç®—æ¯ä¸ªéƒ¨é—¨æ¯ä¸ªå²—ä½çš„å¹³å‡å·¥èµ„1mysql&gt; select dept,job,avg(salary) from emp group by dept,job; æŸ¥è¯¢å¹³å‡å·¥èµ„å¤§äºŽ5000çš„éƒ¨é—¨1mysql&gt; select dept from emp where avg(salary) &gt; 5000; è¿™æ ·å†™æ˜¯ä¸è¡Œçš„ï¼Œå› ä¸º where ç›¸å½“äºŽä¸€æ¡æ¡ä»Žæ–‡ä»¶ä¸­è¯»å–æ•°æ®ï¼Œè€Œæ•°æ®æ²¡æœ‰è¯»å–å®Œæ˜¯ä¸èƒ½åšå¹³å‡å€¼è®¡ç®—çš„ï¼Œè¿™æ—¶å€™å°±éœ€è¦ç”¨ having äº†ã€‚ havingå¯¹åˆ†ç»„åŽçš„æ•°æ®è¿›è¡Œè¿‡æ»¤ï¼Œä½œç”¨ä¸Ž where ç›¸åŒï¼Œç”¨äºŽè¿‡æ»¤ã€‚ä¸é€šç”µåœ¨äºŽï¼Œwhere æ˜¯ä»Žæ–‡ä»¶è¯»å–æ•°æ®æ—¶çš„è¿‡æ»¤æ¡ä»¶ï¼Œè¿™å¯¼è‡´äº† whereä¸­ä¸èƒ½ä½¿ç”¨èšåˆå‡½æ•°ã€‚ è®¡ç®—å·¥èµ„å¹³å‡å€¼å¤§äºŽ5000çš„éƒ¨é—¨1mysql&gt; select dept,avg(salary) from emp group by dept having avg(salary) &gt; 5000; æ€»ç»“ï¼šselect è¯­æ³•æ˜¯æœ‰æ‰§è¡Œé¡ºåºçš„ï¼ŒæŒ‰ç…§ä»Žå·¦åˆ°å³çš„é¡ºåºæ‰§è¡Œï¼Œæ‰€ä»¥ where ä¼šåœ¨æ‰§è¡Œå®Œæˆä¹‹å‰ç”¨ä¸äº†èšåˆå‡½æ•° æŸ¥è¯¢å²—ä½å¹³å‡è–ªèµ„é«˜äºŽ6000çš„å²—ä½åç§°å’Œå¹³å‡è–ªèµ„1mysql&gt; select job,avg(salary) from emp group by job having avg(salary) &gt; 6000; æŸ¥è¯¢éƒ¨é—¨äººæ•°å°‘äºŽ3çš„éƒ¨é—¨åç§°äººå‘˜åç§°å’Œäººå‘˜ä¸ªæ•°1mysql&gt; select dept,group_concat(name),count(*) from emp group by dept having count(name) &lt; 3; order byå¯¹ç»“æžœæŽ’åº asc è¡¨ç¤ºå‡åºï¼Œæ˜¯é»˜è®¤çš„ desc è¡¨ç¤ºé™åº by åŽé¢å¯ä»¥æœ‰å¤šä¸ªæŽ’åº æŒ‰ç…§å·¥èµ„æŽ’åº1mysql&gt; select * from emp order by salary; æŒ‰ç…§å·¥èµ„é™åºæŽ’åº1mysql&gt; select * from emp order by salary desc; æŒ‰ç…§å·¥èµ„å‡åº id é™åºæŽ’åº1mysql&gt; select * from emp order by salary,id desc; æŒ‰ç…§å·¥èµ„å‡åº id å‡åºæŽ’åº1mysql&gt; select * from emp order by salary,id; limitæŒ‡å®šèŽ·å–æ•°æ®æ¡æ•° ä½¿ç”¨æ–¹æ³•ï¼š â€‹ limit a,b;è¡¨ç¤ºä»Ž a å¼€å§‹ä¸åŒ…æ‹¬ aï¼ŒèŽ·å– b ä¸ªæ•°æ®ã€‚ 1mysql&gt; select * from emp limit a,b; 1mysql&gt; select * from emp limit 2,2; åˆ†é¡µæŸ¥è¯¢è®¡ç®—é¡µæ•°èµ·å§‹ä½ç½®çš„ç®—æ³• æ¯é¡µæ˜¾ç¤ºaæ¡ï¼ŒçŽ°åœ¨æ˜¯ç¬¬ b é¡µï¼Œæ±‚èµ·å§‹ä½ç½® 1(b - 1) * a å­—ç¬¦ä¸²æ‹¼æŽ¥ å®Œæ•´çš„selectè¯­å¥123456mysql&gt; select [distinct] æŸ¥è¯¢å­—æ®µ1ã€æŸ¥è¯¢å­—æ®µ2â€¦â€¦ from è¡¨å [where æŸ¥è¯¢ä¹‹å‰çš„è¿‡æ»¤æ¡ä»¶ group by åˆ†ç»„ä¾æ® having åˆ†ç»„ä¹‹åŽçš„è¿‡æ»¤æ¡ä»¶ order by æŽ’åºå­—æ®µ limit]; æ˜¾ç¤ºæ¡æ•° æ³¨æ„åœ¨ä¹¦å†™æ—¶ï¼Œå¿…é¡»æŒ‰ç…§è¿™ä¸ªé¡ºåºæ¥å†™ æ­£åˆ™è¡¨è¾¾å¼åŒ¹é…^ åŒ¹é…å­—æ®µåç§°ä»¥â€™å¼ â€™å¼€å¤´çš„æ•°æ®1mysql&gt; select * from emp where name regexp &apos;^å¼ &apos;; $ åŒ¹é…å­—æ®µåç§°ä»¥â€™é£žâ€™ç»“å°¾çš„æ•°æ®1mysql&gt; select * from emp where name regexp &apos;é£ž$&apos;; . åŒ¹é…å­—æ®µåç§°ç¬¬äºŒä½åŽåŒ…å«â€™é£žâ€™çš„æ•°æ®ï¼Œâ€˜â€™.â€˜â€™è¡¨ç¤ºä»»æ„å­—ç¬¦1mysql&gt; select * from emp where name regexp &apos;.é£ž&apos;; [abci] åŒ¹é…å­—æ®µåç§°ä¸­å«æœ‰æŒ‡å®šé›†åˆå†…å®¹çš„äººå‘˜1mysql&gt; select * from emp where name regexp &apos;[å¼ é£žå…³ç¾½åˆ˜å¤‡]&apos;; [^alex] åŒ¹é…ä¸ç¬¦åˆé›†åˆä¸­æ¡ä»¶çš„å†…å®¹ï¼Œ^è¡¨ç¤ºå–å æ³¨æ„1ï¼š^åªæœ‰åœ¨[]å†…æ‰æ˜¯å–åçš„æ„æ€ï¼Œåœ¨åˆ«çš„åœ°æ–¹éƒ½æ˜¯è¡¨ç¤ºä»Žå¼€å§‹å¤„åŒ¹é… æ³¨æ„2ï¼šç®€å•ç†è§£ name regexp â€˜[^alex]â€™ ç­‰ä»·äºŽ name!=â€™alexâ€™ â€˜a|xâ€™ åŒ¹é…æ¡ä»¶ä¸­çš„ä»»æ„å€¼1mysql&gt; select * from emp where name regexp &apos;å¼ é£ž|å…³ç¾½&apos;; æŸ¥è¯¢ä»¥ å¼ å¼€å¤´ä»¥é£žç»“å°¾çš„æ•°æ®1mysql&gt; select * from emp where name regexp &apos;^å¼ .*é£ž$&apos;; MySQL ä¸­ä½¿ç”¨ regexp æ“ä½œç¬¦æ¥è¿›è¡Œæ­£åˆ™è¡¨è¾¾å¼åŒ¹é…ã€‚ æ¨¡å¼^ åŒ¹é…è¾“å…¥å­—ç¬¦ä¸²çš„å¼€å§‹ä½ç½® $ åŒ¹é…è¾“å…¥å­—ç¬¦ä¸²çš„ç»“æŸä½ç½® . åŒ¹é…ä»»ä½•å­—ç¬¦ [â€¦] å­—ç¬¦é›†åˆã€‚åŒ¹é…æ‰€åŒ…å«çš„ä»»æ„ä¸€ä¸ªå­—ç¬¦ã€‚ä¾‹å¦‚ï¼Œâ€™[abc]â€™ å¯ä»¥åŒ¹é… â€˜plainâ€™ ä¸­çš„ â€˜aâ€™ [^â€¦] è´Ÿå€¼å­—ç¬¦é›†åˆã€‚åŒ¹é…æœªåŒ…å«çš„ä»»æ„å­—ç¬¦ã€‚ä¾‹å¦‚ï¼Œâ€™[^abc]â€™ å¯ä»¥åŒ¹é… â€˜plainâ€™ ä¸­çš„ â€˜pâ€™ p1|p2|p3 åŒ¹é… p1 æˆ– p2 æˆ– p3.ä¾‹å¦‚ï¼Œâ€™z|foodâ€™ èƒ½åŒ¹é… â€˜zâ€™ æˆ– â€˜foodâ€™ã€‚â€™(z|f)oodâ€™ åˆ™åŒ¹é… â€˜zoodâ€™ æˆ– â€˜foodâ€™ å¤šè¡¨æŸ¥è¯¢ç¬›å¡å°”ç§¯æŸ¥è¯¢1mysql&gt; select * from è¡¨1,...è¡¨n; æŸ¥è¯¢ç»“æžœæ˜¯å°†åæ ‡ä¸­çš„æ¯æ¡è®°å½•ä¸Žå³è¡¨ä¸­çš„æ¯æ¡è®°å½•éƒ½å…³è”ä»¥éï¼Œå‡å¦‚ a è¡¨æœ‰ m æ¡è®°å½•ï¼Œb è¡¨æœ‰ n æ¡è®°å½•ï¼Œåˆ™ç¬›å¡å°”ç§¯ç»“æžœä¸º m*nã€‚ æ•°æ®å‡†å¤‡ 1234mysql&gt; create table empl (id int,name char(10),sex char,dept_id int); insert empl values(1,&quot;å¤§é»„&quot;,&quot;m&quot;,1); insert empl values(2,&quot;è€çŽ‹&quot;,&quot;m&quot;,2); insert empl values(3,&quot;è€æŽ&quot;,&quot;w&quot;,30); 1234mysql&gt; create table deptl (id int,name char(10)); insert deptl values(1,&apos;å¸‚åœº&apos;); insert deptl values(2,&apos;è´¢åŠ¡&apos;); insert deptl values(3,&apos;è¡Œæ”¿&apos;); 1mysql&gt; select * from empl,deptl; å› ä¸ºç¬›å¡å°”ç§¯æŸ¥è¯¢ä¼šäº§ç”Ÿå¾ˆå¤šé”™è¯¯æ•°æ®ï¼Œæ‰€ä»¥éœ€è¦ç»è¿‡ç­›é€‰å‡ºæ­£ç¡®çš„å…³è”å…³ç³»ã€‚ 1mysql&gt; select * from empl,deptl where empl.dept_id = deptl.id; å†…è¿žæŽ¥æŸ¥è¯¢å°±æ˜¯ç¬›å¡å°”ç§¯æŸ¥è¯¢ 1mysql&gt; select * from empl [inner] join deptl; åŠ ä¸Šç­›é€‰æ¡ä»¶ 1mysql&gt; select * from empl [inner] join deptl where empl.dept_id = deptl.id; å·¦å¤–è¿žæŽ¥æŸ¥è¯¢1mysql&gt; select * from empl left join deptl on empl.dept_id = deptl.id; å·¦è¡¨æ•°æ®å…¨éƒ¨æ˜¾ç¤ºï¼Œå³è¡¨åªæ˜¾ç¤ºåŒ¹é…ä¸Šçš„æ•°æ®ã€‚ on å…³é”®è¯å’Œ where å…³é”®è¯éƒ½æ˜¯ç”¨äºŽæ¡ä»¶è¿‡æ»¤ï¼Œæ²¡æœ‰æœ¬è´¨åŒºåˆ«ã€‚åœ¨å•è¡¨ä¸­ where çš„ä½œç”¨æ˜¯ç­›é€‰è¿‡æ»¤æ¡ä»¶ï¼›åœ¨å¤šè¡¨ä¸­ where è¿žæŽ¥å¤šè¡¨ï¼Œæ»¡è¶³æ¡ä»¶å°±è¿žæŽ¥ï¼Œä¸æ»¡è¶³å°±ä¸è¿žæŽ¥ã€‚äºŽæ˜¯ä¸ºäº†åŒºåˆ†å•è¡¨è¿˜æ˜¯å¤šè¡¨æ¢ç”¨äº† on å…³é”®è¯ã€‚åªè¦æ˜¯è¿žæŽ¥å¤šè¡¨çš„æ¡ä»¶å°±ä½¿ç”¨ onã€‚ å³å¤–è¿žæŽ¥æŸ¥è¯¢1mysql&gt; select * from empl right join deptl on empl.dept_id = deptl.id; å³è¡¨æ•°æ®å…¨éƒ¨æ˜¾ç¤ºï¼Œå·¦è¡¨åªæ˜¾ç¤ºåŒ¹é…ä¸Šçš„æ•°æ®ã€‚ å†…è¿žæŽ¥å’Œå¤–è¿žæŽ¥çš„ç†è§£ï¼šå†…æŒ‡çš„æ˜¯åŒ¹é…ä¸Šçš„æ•°æ®ï¼Œå¤–æŒ‡çš„æ˜¯æ²¡åŒ¹é…ä¸Šçš„æ•°æ®ã€‚ å…¨å¤–è¿žæŽ¥æ˜¾ç¤º1mysql&gt; select * from empl full join deptl on empl.dept_id = deptl.id; # mysql ä¸æ”¯æŒ åˆå¹¶æŸ¥è¯¢ç»“æžœ(å…¨å¤–è¿žæŽ¥)123mysql&gt; select * from empl left join deptl on empl.dept_id = deptl.id union select * from empl right join deptl on empl.dept_id = deptl.id; union ä¼šåŽ»é™¤é‡å¤æ•°æ®ï¼Œä¸”åªèƒ½åˆå¹¶å­—æ®µæ•°é‡ç›¸åŒçš„è¡¨ï¼›å¦‚æžœä¸æƒ³åŽ»é™¤é‡å¤æ•°æ®ï¼Œä½¿ç”¨ union all 123mysql&gt; select * from empl left join deptl on empl.dept_id = deptl.id union all select * from empl right join deptl on empl.dept_id = deptl.id; ä¸‰è¡¨æŸ¥è¯¢æ•°æ®å‡†å¤‡ 12mysql&gt; create table stul(id int primary key auto_increment,name char(10));mysql&gt; create table teal(id int primary key auto_increment,name char(10)); åˆ›å»ºä¸­é—´è¡¨ 1234567mysql&gt; create table tsr(id int primary key auto_increment, t_id int,s_id int, foreign key(s_id) references stul(id), foreign key(t_id) references teal(id));mysql&gt; insert into stul values(null,&apos;å¼ ä¸‰&apos;),(null,&apos;æŽå››&apos;);mysql&gt; insert into teal values(null,&apos;musibii&apos;),(null,&apos;thales&apos;);mysql&gt; insert into tsr values(null,1,1),(null,1,2)(null,2,2); æŸ¥è¯¢ musibii æ•™è¿‡é‚£äº›å­¦ç”Ÿ12mysql&gt; select * from stul join teal join tsr on stul.id = tsr.s_id and teal.id = tsr.t_id where teal.name = &apos;musibii&apos;; å¤šè¡¨æŸ¥è¯¢æ€»ç»“ï¼š æŠŠæ‰€æœ‰è¡¨è¿žæŽ¥èµ·æ¥ åŠ ä¸Šè¿žæŽ¥æ¡ä»¶ å¦‚æžœæœ‰åˆ«çš„è¿‡æ»¤æ¡ä»¶ï¼ŒåŠ ä¸Š where å­æŸ¥è¯¢ å½“ä¸€ä¸ªæŸ¥è¯¢çš„ç»“æžœæ˜¯å¦ä¸€ä¸ªæŸ¥è¯¢çš„æ¡ä»¶æ˜¯ï¼Œè¿™ä¸ªæŸ¥è¯¢ç§°ä¹‹ä¸ºå­æŸ¥è¯¢ï¼ˆå†…å±‚æŸ¥è¯¢ï¼‰ã€‚ ä»€ä¹ˆæ—¶å€™ä½¿ç”¨å­æŸ¥è¯¢ï¼Ÿ å½“ä¸€æ¬¡æŸ¥è¯¢æ— æ³•å¾—åˆ°æƒ³è¦çš„ç»“æžœæ—¶ï¼Œéœ€è¦å¤šæ¬¡æŸ¥è¯¢ã€‚è¿™æ ·å¯ä»¥åˆ†å¤šæ­¥æŸ¥è¯¢å‡å°‘æŸ¥è¯¢çš„å¤æ‚åº¦ã€‚ æ•°æ®å‡†å¤‡ 12345678910mysql&gt; create table emps(id int,name char(10),sex char,age int,dept_id int, job char(10),salary double);mysql&gt; insert into emps values (1,&apos;åˆ˜å¤‡&apos;,&apos;ç”·&apos;,26,1,&apos;æ€»ç›‘&apos;,5800), (2,&apos;å¼ é£ž&apos;,&apos;ç”·&apos;,24,1,&apos;å‘˜å·¥&apos;,3000), (3,&apos;å…³ç¾½&apos;,&apos;ç”·&apos;,30,1,&apos;å‘˜å·¥&apos;,4000), (4,&apos;å­™æƒ&apos;,&apos;ç”·&apos;,25,2,&apos;æ€»ç›‘&apos;,6000), (5,&apos;å‘¨ç‘œ&apos;,&apos;ç”·&apos;,22,2,&apos;å‘˜å·¥&apos;,5000), (6,&apos;å°ä¹”&apos;,&apos;å¥³&apos;,31,2,&apos;å‘˜å·¥&apos;,4000), (7,&apos;æ›¹æ“&apos;,&apos;ç”·&apos;,40,3,&apos;æ€»ç›‘&apos;,10000), (8,&apos;å¸é©¬æ‡¿&apos;,&apos;ç”·&apos;,46,3,&apos;å‘˜å·¥&apos;,6000); 12mysql&gt; create table depts(id int primary key,name char(10));mysql&gt; insert into depts values(1,&apos;å¸‚åœº&apos;),(2,&apos;è¡Œæ”¿&apos;),(3,&apos;è´¢åŠ¡&apos;); æŸ¥è¯¢å¸‚åœºéƒ¨äººå‘˜1mysql&gt; select * from emps where dept_id = (select id from depts where name = &apos;å¸‚åœº&apos;); å­æŸ¥è¯¢æ€è·¯ï¼š å°†ä¸€ä¸ªå¤æ‚çš„é—®é¢˜ æ‹†åˆ†ä¸ºå¤šä¸ªç®€å•çš„é—®é¢˜ æŠŠä¸€ä¸ªå¤æ‚çš„æŸ¥è¯¢ æ‹†åˆ†ä¸ºå¤šä¸ªç®€å•çš„æŸ¥è¯¢ å°±æ¯”å¦‚æŸ¥è¯¢éƒ¨é—¨äººå‘˜ï¼š æŸ¥è¯¢éƒ¨é—¨ id æ‹¿ç€ id åŽ»å‘˜å·¥è¡¨æŸ¥è¯¢ 1mysql&gt; select emps.name from emps join dept on dept.id = emps.dept_id where depts.name = &apos;è´¢åŠ¡&apos;; æŸ¥è¯¢å¹³å‡å¹´é¾„å¤§äºŽ26çš„éƒ¨é—¨åç§°1mysql&gt; select * from depts where id in (select dept_id from emps group by dept_id having avg(age) &gt; 26); 12mysql&gt; select depts.name from depts join emps on emps.dept_id = depts.id group by depts.name having avg(age) &gt; 26; exists å…³é”®è¯æŸ¥è¯¢exists åŽè·Ÿå­æŸ¥è¯¢ï¼Œå­æŸ¥è¯¢æœ‰ç»“æžœæ—¶ä¸º Trueï¼Œæ²¡æœ‰ç»“æžœæ˜¯ä¸º Falseï¼Œä¸º True æ—¶å¤–å±‚æ‰§è¡Œï¼Œä¸º False æ—¶å¤–å±‚ä¸æ‰§è¡Œ 1mysql&gt; select * from emps where exists(select * from emps where salary &gt; 1000); ç»¼åˆç»ƒä¹ æŸ¥è¯¢æ¯ä¸ªéƒ¨é—¨å·¥èµ„æœ€é«˜çš„å‘˜å·¥ä¿¡æ¯12345mysql&gt; select * from emps join # ä½¿ç”¨å­æŸ¥è¯¢å¾—åˆ°æ¯ä¸ªéƒ¨é—¨çš„ id ä»¥åŠéƒ¨é—¨çš„æœ€é«˜å·¥èµ„ï¼Œå½¢æˆä¸€ä¸ªè™šæ‹Ÿè¡¨æŠŠåŽŸå§‹è¡¨å’Œè™šæ‹Ÿè¡¨è¿žæŽ¥åœ¨ä¸€èµ· (select dept_id,max(salary) as m from emps group by dept_id) as t1 # å¦‚æžœè¿™ä¸ªäººçš„éƒ¨é—¨ç¼–å·ç­‰äºŽè™šæ‹Ÿè¡¨ä¸­çš„éƒ¨é—¨ç¼–å·ï¼Œå¹¶ä¸”è¿™ä¸ªäººçš„å·¥èµ„ç­‰äºŽè™šæ‹Ÿè¡¨ä¸­çš„æœ€é«˜å·¥èµ„ï¼Œå°±æ˜¯è¦æ‰¾çš„æ•°æ® on emps.dept_id = t1.dept_id and emps.salary = t1.m;]]></content>
      <categories>
        <category>æ•°æ®åº“</category>
      </categories>
      <tags>
        <tag>day46</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[æ•°æ®åº“ï¼ˆä¸‰ï¼‰]]></title>
    <url>%2F2018%2F11%2F21%2F%E6%95%B0%E6%8D%AE%E5%BA%93%EF%BC%88%E4%B8%89%EF%BC%89%2F</url>
    <content type="text"><![CDATA[å‰è¨€æœ¬ç¯‡åšå®¢ä¸»è¦å†…å®¹ä¸ºè¡¨ä¹‹é—´çš„å…³ç³»ã€å¤šè¡¨å…³è”ã€å¤åˆ¶è¡¨ï¼›æŸ¥è¯¢å¦‚å•è¡¨æŸ¥è¯¢ã€å¤šè¡¨å…³è”æŸ¥è¯¢ è¡¨ä¹‹é—´å…³ç³»ä¸ºä»€ä¹ˆè¦åˆ†è¡¨ï¼Ÿå‡å¦‚çŽ°åœ¨æœ‰ä¸¤ç§æ•°æ®ï¼Œä¸€ç§æ˜¯éƒ¨é—¨æ•°æ®ä¸€ç§æ˜¯å‘˜å·¥æ•°æ®ï¼Œå¦‚æžœä¸¤ä¸­æ•°æ®æ”¾åœ¨åŒä¸€å¼ è¡¨ä¸­åˆ™ä¼šé€ æˆï¼š æ•°æ®é‡å¤ ç»“æž„æ··ä¹± æ‰©å±•ç»´æŠ¤æ€§å·® éœ€è¦åˆ†è¡¨ æ‰€ä»¥éœ€è¦æŠŠè¡¨ä¸­ä¼šé€ æˆæ··ä¹±çš„æ•°æ®åˆ†å‡ºæ¥ï¼Œåˆ†æˆä¸¤å¼ è¡¨ã€‚ 1mysql&gt; create table dept(id int primary key auto_increment,name char(20),job char(20)); 1mysql&gt; create table emp(id int primary key auto_increment,name char(20),gender char,age int,salary float,d_id int); ä»€ä¹ˆæ—¶å€™éœ€è¦åˆ†è¡¨ï¼Ÿ å½“å‡ºçŽ°å¤§é‡é‡å¤æ•°æ®æ—¶ï¼Œå½“ä¸€æ¡è®°å½•ä¸­çš„æ•°æ®ä¸å±žäºŽåŒä¸€ç±»æ—¶éœ€è¦åˆ†è¡¨ã€‚ åˆ†è¡¨ä¹‹åŽäº§ç”Ÿçš„é—®é¢˜ï¼Œå‘˜å·¥è¡¨å¯ä»¥å­˜å‚¨ä¸€ä¸ªä¸å­˜åœ¨çš„éƒ¨é—¨ç¼–å·ï¼Œè¿™æ ·çš„æ•°æ®æ˜¯ä¸å®Œæ•´çš„æ— æ•ˆæ•°æ®ï¼Œå¿…é¡»æ‰¾åˆ°ä¸€ç§æ–¹æ³•å¯ä»¥åœ¨ç‰©ç†å±‚é¢å»ºç«‹å…³è”å…³ç³»ã€‚ ä»¥ä¸Šå»ºè¡¨è¯­å¥å¯ä»¥å»ºç«‹é€»è¾‘ä¸Šçš„å…³è”å…³ç³»ï¼Œè¿™æœ‰å»ºè¡¨çš„äººæ‰æ˜Žç™½å…¶ä¸­çš„å…³ç³»ï¼Œè€Œ mysql å¹¶ä¸çŸ¥é“å…³ç³»ï¼Œæ‰€ä»¥éœ€è¦é€šè¿‡å¤–é”®æ¥è¿›è¡Œçº¦æŸï¼Œè¯´æ˜Žè¿™ä¸¤å¼ è¡¨çš„å…³è”å…³ç³»ã€‚ ##å¤–é”®çš„ä½¿ç”¨ 1mysql&gt; create table è¡¨å(å­—æ®µå ç±»åž‹(é•¿åº¦),foreign key(å¤–é”®çš„å­—æ®µå) references è¦å…³è”è¡¨å(ä¸»é”®å)); ä½¿ç”¨å¤–é”®æ—¶å¿…é¡»åˆ†æ¸…ä¸»ä»Žå…³ç³»ï¼Œä¹Ÿå°±æ˜¯è¦åˆ†æ¸…å…ˆé”®é‚£å¼ è¡¨ï¼Œå› ä¸ºåœ¨ä½¿ç”¨å¤–é”®å…³è”è¡¨æ—¶ï¼Œéœ€è¦çŸ¥é“å¯¹æ–¹è¡¨çš„è¡¨åï¼Œæ‰€ä»¥è¦å…³è”çš„è¡¨åº”è¯¥æ˜¯ä¸»è¡¨ï¼Œåº”è¯¥å…ˆå»ºä¸»è¡¨ï¼Œè¿™æ ·æ‰èƒ½å…³è”èµ·æ¥ã€‚ å¤–é”®çš„ç¬¬ä¸€ä¸ªçº¦æŸå…ˆé”®ä¸»è¡¨ï¼Œå†å»ºä»Žè¡¨ 1mysql&gt; create table dept(id int primary key auto_increment,name char(20),job char(20)); 1mysql&gt; create table emp(id int primary key auto_increment,name char(20),d_id int,foreign key(d_id) references dept(id)); å¤–é”®çš„ç¬¬äºŒä¸ªçº¦æŸæ•°æ®å…ˆæ’å…¥ä¸»è¡¨ï¼Œå†æ’å…¥ä»Žè¡¨æ•°æ® 1mysql&gt; insert into dept values(1,&apos;hr&apos;,&apos;æ‹›è˜&apos;); 1mysql&gt; insert into emp values(1,&apos;å¼ æ— å¿Œ&apos;,1); å¤–é”®çš„ç¬¬ä¸‰ä¸ªçº¦æŸåˆ é™¤æ•°æ®æ—¶å…ˆåˆ ä»Žè¡¨ï¼Œå†åˆ ä¸»è¡¨ 1mysql&gt; delete from emp where name = &apos;å¼ æ— å¿Œ&apos;; 1mysql&gt; delete from dept where id = 1; å¤–é”®çš„ç¬¬å››ä¸ªçº¦æŸä»Žè¡¨æ›´æ–°å¤–é”®æ—¶å¿…é¡»ä¿è¯å¤–é”®æ˜¯å­˜åœ¨çš„ã€‚ å¤–é”®çš„ç¬¬äº”ä¸ªçº¦æŸæ›´æ–°ä¸»è¡¨çš„ id æ—¶ï¼Œè¦ä¹ˆå…ˆåˆ é™¤ä»Žè¡¨å…³è”çš„æ•°æ®ï¼Œæˆ–è€…æŠŠå…³è”æ•°æ®å…³è”åˆ°å…¶ä»–çš„ä¸»è¡¨ idã€‚ æœ‰äº†è¿™å‡ ç§çº¦æŸåŽï¼Œå¯ä»¥ä¿è¯æ•°æ®çš„å®Œæ•´æ€§ã€‚ç›¸åº”çš„å—åˆ°å¤–é”®çº¦æŸï¼Œä¸»è¡¨çš„åˆ é™¤å’Œæ›´æ–°æ“ä½œå—åˆ°é™åˆ¶ï¼Œå¾ˆå¤šæƒ…å†µä¸‹ï¼Œåˆ é™¤ä¸»è¡¨æŸä¸ªæ•°æ®éœ€è¦è‡³å°‘ä¸¤æ¡sql è¯­å¥ï¼Œä¼šå¾ˆéº»çƒ¦ã€‚ å¤–é”®çš„ç¬¬å…­ä¸ªçº¦æŸåˆ é™¤ä¸»è¡¨æ—¶ï¼Œè¦å…ˆåˆ é™¤ä»Žè¡¨ã€‚ çº§è”æ“ä½œåˆ é™¤çº§è”å½“ä¸»è¡¨åˆ é™¤æ—¶ï¼Œä»Žè¡¨ç›¸å…³è”çš„è®°å½•åŒæ­¥åˆ é™¤ 1mysql&gt; create table emp(id int primary key auto_increment,name char(20),d_id int,foreign key(d_id) references dept(id) on delete cascade); æ›´æ–°çº§è”å½“ä¸»è¡¨ id æ—¶ï¼Œä»Žè¡¨ç›¸å…³è”çš„è®°å½•é€šæ­¥æ›´æ–° 1mysql&gt; create table emp(id int primary key auto_increment,name char(20),d_id int,foreign key(d_id) references dept(id) on update cascade); çº§è”æ–¹å‘åªèƒ½æ˜¯ä¸»è¡¨çº§è”ä»Žè¡¨ï¼Œå¯ä»¥åœ¨æ“ä½œä¸»è¡¨æ—¶è‡ªåŠ¨æ“ä½œä»Žè¡¨ã€‚ï¼ˆå•ç®±æ“ä½œï¼Œä¸»è¡¨å˜åŒ–æ˜¯çº§è”æ“ä½œä»Žè¡¨ï¼Œä»Žè¡¨çš„å˜åŒ–ä¸ä¼šå½±å“ä¸»è¡¨ï¼‰ ä¸€å¯¹ä¸€å…³ç³»ä¸€å¯¹ä¸€çš„å…³ç³»åªéœ€è¦åŠ ä¸€ä¸ªå¤–é”®æ¥å…³è”å³å¯ï¼Œä½†æ˜¯éœ€è¦ç»™å¤–é”®åŠ ä¸Šå”¯ä¸€çº¦æŸã€‚æœ‰ä¸»ä»Žå…³ç³»çš„éƒ½éœ€è¦å…ˆå»ºä¸»è¡¨ã€‚ 1mysql&gt; create customer(c_id int primary key auto_increment,name char(20),phonenum char(11),addr char(20)); 1mysql&gt; create student(s_id int primary key auto_increment,name char(20),class char(11),number char(20),housenum char(20),c_id int unique,foreign key(c_id) references customer(c_id)); ä¸€å¯¹ä¸€çš„å¦ä¸€ç§ä½¿ç”¨åœºæ™¯ï¼Œå½“ä¸€ä¸ªè¡¨çš„å­—æ®µå¤ªå¤šï¼Œè€Œå¸¸ç”¨çš„å­—æ®µä¸å¤šæ—¶ï¼Œå¯ä»¥é‡‡å–åž‚ç›´åˆ†è¡¨çš„æ–¹å¼æ¥æé«˜æ•ˆçŽ‡ï¼Œæ¯”å¦‚ä¸ªäººä¿¡æ¯æœ‰èº«ä»½è¯ã€æ€§åˆ«ã€å¹´é¾„ã€åœ°å€ç­‰ï¼Œå¯ä»¥æ‹†åˆ†ä¸ºåŸºç¡€ä¿¡æ¯å’Œç»†èŠ‚ä¿¡æ¯ï¼›ä¹Ÿæœ‰å¦ä¸€ç§æå‡æ•ˆçŽ‡çš„æ–¹å¼ï¼Œæ°´å¹³åˆ†è¡¨ï¼Œå½“ä¸€ä¸ªè¡¨ä¸­çš„æ•°æ®è®°å½•å¤ªå¤šæ—¶ï¼Œæ•ˆçŽ‡ä¼šé™ä½Žï¼Œå¯ä»¥é‡‡å–æ°´å¹³åˆ†è¡¨ï¼Œå­—æ®µå®Œå…¨ç›¸åŒã€‚ å¤šå¯¹å¤šå…³ç³»å‡å¦‚æœ‰ä¸¤å¼ è¡¨ï¼Œä¸€å¼ è¡¨å­˜çš„æ˜¯è€å¸ˆï¼Œå¦ä¸€å¼ è¡¨å­˜çš„æ˜¯å­¦ç”Ÿã€‚å› ä¸ºä¸€ä¸ªè€å¸ˆå¯ä»¥æ•™å¤šä¸ªå­¦ç”Ÿï¼Œä¸€ä¸ªå­¦ç”Ÿä¹Ÿå¯ä»¥æœ‰å¤šä¸ªè€å¸ˆï¼Œæ‰€ä»¥è¿™æ˜¯åŒå‘å¤šå¯¹ä¸€çš„å…³ç³»ï¼Œä¹Ÿå°±æ˜¯å¤šå¯¹å¤šçš„å…³ç³»ã€‚é‚£ä¹ˆåº”è¯¥æ€Žä¹ˆå­˜å‚¨æ•°æ®å‘¢ï¼Ÿ å¯ä»¥é€šè¿‡å¢žåŠ ä¸€ä¸ªä¸­é—´è¡¨æ¥å­˜å‚¨ä¸¤å¼ è¡¨çš„å…³ç³»ï¼Œç„¶åŽå…¶ä»–ä¸¤å¼ è¡¨åˆ†åˆ«ç”¨ä¸€ä¸ªå­—æ®µä½œä¸ºå¤–é”®æ¥å…³è”ä¸­é—´è¡¨ã€‚ï¼ˆåªè¦æ˜¯å¤šå¯¹å¤šå…³ç³»éƒ½æ˜¯é ä¸­é—´è¡¨æ¥å­˜å‚¨ä¸¤å¼ è¡¨ä¹‹é—´çš„å…³ç³»ï¼‰é™¤äº†ä¸­é—´è¡¨ï¼Œå¦å¤–ä¸¤å¼ éƒ½æ˜¯ä¸»è¡¨ï¼Œå…·ä½“å…ˆå»ºå“ªç§ä¸»è¡¨æ²¡æœ‰å…ˆåŽé¡ºåºã€‚å¤šå¯¹å¤šå…³ç³»è‡³å°‘éœ€è¦ä¸‰å¼ è¡¨ã€‚ 1mysql&gt; create table stu(id int primary key auto_increment,name char(20)); 1mysql&gt; create table tea(id int primary key auto_increment,name char(20)); 1mysql&gt; create table tsr(id int primary key auto_incrementï¼Œt_id int,s_id int,foreign key(t_id) references tea(id),foreign key(s_id) references stu(id)); å› ä¸ºè€å¸ˆå’Œå­¦ç”Ÿéƒ½æ˜¯ä¸»è¡¨ï¼Œå…³ç³»è¡¨æ˜¯ä»Žè¡¨ï¼Œæ‰€ä»¥éœ€è¦å…ˆæ’å…¥è€å¸ˆå’Œå­¦ç”Ÿçš„æ•°æ®ï¼ŒæŽ¥ç€æ’å…¥ä¸­é—´è¡¨çš„æ•°æ®ã€‚ å¤šå¯¹å¤šå…³ç³»è¡¨ä¸­å› ä¸ºå·²ç»æœ‰äº† id ä¸ºä¸»é”®ï¼Œæ‰€ä»¥å¯ä»¥é‡å¤å­˜å…¥ç›¸åŒçš„å­¦ç”Ÿå’Œè€å¸ˆå…³ç³»æ•°æ®ï¼Œå¯ä»¥é€šè¿‡è”åˆä¸»é”®æ”¹å˜ã€‚ å¤šå¯¹ä¸€å…³ç³»1mysql&gt; create table dept(id int primary key auto_increment,name char(20),job char(20)); 1mysql&gt; create table emp(id int primary key auto_increment,name char(20),d_id int,foreign key(d_id) references dept(id)); å¤åˆ¶è¡¨1mysql&gt; create table æ–°è¡¨å select * from è¢«å¤åˆ¶çš„è¡¨å; æ³¨æ„ä¸ä¼šå¤åˆ¶ä¸»é”®å’Œçº¦æŸæ¡ä»¶ï¼Œæ•°æ®ç»“æž„éƒ½å¯ä»¥å¤åˆ¶ã€‚ 1mysql&gt; create table æ–°è¡¨å select * from æºè¡¨å where 1 = 2; å½“where åŽé¢æ¡ä»¶ä¸æˆç«‹æ—¶ï¼Œåªä¼šå¤åˆ¶è¡¨ç»“æž„ã€‚ è •è™«å¤åˆ¶è‡ªæˆ‘å¤åˆ¶ã€‚ 1mysql&gt; insert into è¡¨å select * from è¡¨å; å¦‚æžœæœ‰ä¸»é”® 1mysql&gt; insert into è¡¨å(å…¶ä»–å­—æ®µ) select å…¶ä»–å­—æ®µ from è¡¨å; åœ¨æ—¥å¸¸å¼€å‘ä¸­ï¼Œå¦‚æžœå¯¹æ€§èƒ½è¦æ±‚å¾ˆé«˜ï¼Œä¸åº”è¯¥ä½¿ç”¨å¤–é”® æ•ˆçŽ‡é™ä½Ž è€¦åˆ å…³ç³»å¤šèµ·æ¥ä¼šé€ æˆç®¡ç†éº»çƒ¦ è¿™æ—¶å€™å…³ç³»åªæ˜¯é€»è¾‘å…³ç³»å¾ˆæœ‰å¯èƒ½äº§ç”Ÿé”™è¯¯æ•°æ®ã€‚]]></content>
      <categories>
        <category>æ•°æ®åº“</category>
      </categories>
  </entry>
  <entry>
    <title><![CDATA[æ•°æ®åº“ï¼ˆäºŒï¼‰]]></title>
    <url>%2F2018%2F11%2F20%2F%E6%95%B0%E6%8D%AE%E5%BA%93-%E4%BA%8C%2F</url>
    <content type="text"><![CDATA[å‰è¨€æœ¬ç¯‡åšå®¢å­¦ä¹ æ•°æ®åº“çš„è¯¦ç»†å»ºè¡¨è¯­å¥ï¼Œæ•°æ®åº“æ•°æ®ç±»åž‹ä»¥åŠçº¦æŸæ¡ä»¶ã€‚ è¯¦ç»†å»ºè¡¨è¯­å¥åœ¨ä»‹ç»å»ºè¡¨è¯­å¥ä¹‹å‰éœ€è¦äº†è§£ä¸€ä¸‹å­˜å‚¨å¼•æ“Žã€‚ å­˜å‚¨å¼•æ“ŽMySQL æ”¯æŒçš„å­˜å‚¨å¼•æ“Žæœ‰ä»¥ä¸‹å‡ ç§ï¼š ä»¥åŽæˆ‘ä»¬ä½¿ç”¨çš„å°±åªæœ‰ InnoDB å¼•æ“Žï¼Œå¯ä»¥çœ‹åˆ°é»˜è®¤æƒ…å†µä¸‹å­˜å‚¨å¼•æ“Žå°±æ˜¯ InnoDBï¼Œå»ºç«‹ä¸€ä¸ªè¡¨çš„æ—¶å€™ï¼Œå¯ä»¥çœ‹çœ‹åœ¨æ–‡ä»¶å¤¹é‡Œå‘ç”Ÿäº†ä»€ä¹ˆã€‚ 1mysql&gt; create table t1(id int, name char); å»ºè¡¨æˆåŠŸåŽåœ¨æ–‡ä»¶å¤¹é‡Œå¤šäº†ä¸¤ä¸ªæ–‡ä»¶ï¼š t1.frm t1.ibd frmæ˜¯ frame çš„ç¼©å†™æ˜¯è¡¨ç¤ºè¯¥è¡¨çš„æ•°æ®ç»“æž„ï¼Œè€Œ ibd è¡¨ç¤º InnoDB data è¡¨ç¤ºå­˜å‚¨çš„æ˜¯ InnoDB å¼•æ“Žçš„æ•°æ®ã€‚ å­˜å‚¨å¼•æ“Žå°±ç›¸å½“äºŽä¸€ä¸ªç”¨æ¥å­˜å–æ•°æ®çš„è½¯ä»¶ã€‚ æŒ‡å®šä»¥æŸç§å­˜å‚¨å¼•æ“Žå»ºè¡¨ 1create table t2(id int name char)engine=memory; å»ºè¡¨è¯­å¥åˆ›å»ºè¡¨çš„å®Œæ•´è¯­æ³•ï¼Œä¸­æ‹¬å·é‡Œé¢çš„è¡¨ç¤ºå¯é€‰å‚æ•°ã€‚ 1234create table è¡¨å(å­—æ®µ1 æ•°æ®ç±»åž‹[(å®½åº¦) çº¦æŸæ¡ä»¶],å­—æ®µ2 æ•°æ®ç±»åž‹[(å®½åº¦) çº¦æŸæ¡ä»¶],å­—æ®µ3 æ•°æ®ç±»åž‹[(å®½åº¦) çº¦æŸæ¡ä»¶]); æœ€åŽä¸€ä¸ªå­—æ®µåŽé¢ä¸èƒ½åŠ é€—å·ï¼Œå¦åˆ™ä¼šæŠ¥é”™ã€‚ ç±»åž‹ï¼šä½¿ç”¨é™åˆ¶å­—æ®µå¿…é¡»ä»¥ä»€ä¹ˆæ ·çš„æ•°æ®ç±»åž‹ä¼ å€¼ çº¦æŸæ¡ä»¶ï¼šçº¦æŸæ¡ä»¶æ˜¯åœ¨ç±»åž‹ä¹‹å¤–æ·»åŠ ä¸€ç§é¢å¤–çš„é™åˆ¶ã€‚ æ³¨æ„ åœ¨åŒä¸€å¼ è¡¨ä¸­ï¼Œå­—æ®µåä¸èƒ½ç›¸åŒï¼› å®½åº¦å’Œçº¦æŸæ¡ä»¶å¯é€‰ï¼Œå­—æ®µåå’Œç±»åž‹æ˜¯å¿…é¡»çš„ï¼› æœ€åŽä¸€ä¸ªå­—æ®µåŽä¸åŠ é€—å·ã€‚ æ•°æ®ç±»åž‹æ•´åž‹ï¼šintã€tinyintã€bigintç­‰ æ•´åž‹é»˜è®¤æ˜¯æœ‰ç¬¦å·çš„ï¼Œå¯ä»¥é€šè¿‡çº¦æŸæ¡ä»¶æ”¹å˜ï¼ˆunsignedï¼‰ï¼› 1mysql&gt; create table t3(x tinyint unsigned); å¯é€‰å‚æ•°é‡Œé¢çš„å®½åº¦åªæœ‰æ•´åž‹è¡¨ç¤ºçš„æ˜¯æ˜¾ç¤ºå®½åº¦ï¼Œå…¶ä»–çš„éƒ½è¡¨ç¤ºå­˜å‚¨é™åˆ¶ã€‚ 1mysql&gt; create table t4(x int(8) unsigned zerofill); æ˜¾ç¤ºæ—¶ä¸å¤Ÿå…«ä½çš„ä½¿ç”¨0å¡«å……ï¼Œå¦‚æžœè¶…è¿‡å…«ä½æ­£å¸¸æ˜¾ç¤ºã€‚ å¦‚æžœä¸æŒ‡å®šé™åˆ¶å®½åº¦ä¼šæœ‰é»˜è®¤å€¼ï¼š 1mysql&gt; create table t5(id int unsigned); å¦‚æžœæ˜¯æœ‰ç¬¦å·çš„æ•´åž‹ï¼Œåˆ™ä¼šæ¯”æ— ç¬¦å·çš„å¤šä¸€ä½ï¼Œå› ä¸ºè¦æ˜¾ç¤ºæ­£è´Ÿå·ã€‚ 1mysql&gt; create table t6(id int); å¼ºè°ƒï¼šå¯¹äºŽæ•´åž‹æ¥è¯´ï¼Œæ•°æ®ç±»åž‹åŽçš„å®½åº¦å¹¶ä¸æ˜¯å­˜å‚¨é™åˆ¶ï¼Œè€Œæ˜¯æ˜¾ç¤ºé™åˆ¶ã€‚æ‰€ä»¥åœ¨åˆ›å»ºè¡¨ç¤ºï¼Œå¦‚æžœå­—æ®µé‡‡ç”¨çš„æ˜¯æ•´åž‹ç±»åž‹ï¼Œå®Œå…¨æ— éœ€æŒ‡å®šæ˜¾ç¤ºå®½åº¦ï¼Œé»˜è®¤çš„æ˜¾ç¤ºå®½åº¦ï¼Œè¶³å¤Ÿæ˜¾ç¤ºå®Œæ•´å½“åˆå­˜æ”¾çš„æ•°æ®ã€‚ æµ®ç‚¹åž‹ï¼šfloatã€doubleã€decimalç­‰float 4å­—èŠ‚ double 8å­—èŠ‚ decimal ä¸å›ºå®š 1mysql&gt; create table t7(num float(m,d)); m è¡¨ç¤ºæ€»é•¿åº¦ d è¡¨ç¤ºå°æ•°éƒ¨åˆ†é•¿åº¦ é•¿åº¦è¡¨ç¤ºçš„æ˜¯å­—ç¬¦é•¿åº¦è€Œä¸æ˜¯æ•°æ®å­˜å‚¨èŒƒå›´ã€‚ å„ä¸ªç±»åž‹çš„æœ€å¤§é•¿åº¦ float (255,30) double (255,30) decimal (65,30) åŒºåˆ« float ä¸Ž double çš„ç²¾åº¦ä¸åŒï¼Œéƒ½æ˜¯ä¸å‡†ç¡®çš„å°æ•°ï¼Œdecimal å‡†ç¡®çš„å°æ•°ä¸ä¼šä¸¢å¤±ç²¾åº¦ å…·ä½“ä½¿ç”¨å“ªç§ç±»åž‹å¾—éœ€è¦ä½¿ç”¨åœºæ™¯åˆ¤æ–­ float æ»¡è¶³å¤§éƒ¨åˆ†ä½¿ç”¨åœºæ™¯ï¼Œdecimal é€‚åˆé“¶è¡Œç³»ç»Ÿï¼Œç§‘å­¦ç ”ç©¶ã€‚ æ‹¬å·ä¸­ m å’Œ d çš„å€¼ï¼Œå¯ä»¥é™åˆ¶æ•°æ®å­˜å‚¨èŒƒå›´ï¼Œä¸Žæ•´åž‹ä¸åŒ é‡ç‚¹ï¼šè®°ä½ m å’Œ d çš„å«ä¹‰ã€‚ å­—ç¬¦åž‹å¸¸ç”¨ä¸¤ç§ â€‹ char å®šé•¿å­—ç¬¦ä¸² â€‹ varchar å¯å˜é•¿åº¦å­—ç¬¦ä¸² æ³¨æ„ï¼šå­—ç¬¦ä¸²ä¸­ï¼Œé•¿åº¦æŒ‡å®šçš„æ˜¯æ•°æ®çš„å­—ç¬¦é•¿åº¦ï¼Œä¸Žå­—èŠ‚æ²¡æœ‰å…³ç³»ï¼Œåœ¨åˆ›å»ºæ—¶ varchar å¿…é¡»æŒ‡å®šï¼Œchar æœ‰é»˜è®¤å€¼ã€‚ ä¸åŒç‚¹ï¼š â€‹ char ç±»åž‹åœ¨å–æ•°æ®æ—¶ï¼Œæ ¹æ®é•¿åº¦æ¥èŽ·å–ï¼Œä¸å…³å¿ƒçœŸå®žæ•°æ®é•¿åº¦ â€‹ æ— è®ºæ•°æ®æœ‰å¤šé•¿ï¼Œå ç”¨çš„ç©ºé—´æ˜¯å›ºå®šçš„ï¼Œé€ æˆäº†ä¸€å®šç©ºé—´æµªè´¹ã€‚ â€‹ varchar ç±»åž‹åœ¨å–æ•°æ®æ—¶ï¼Œå…ˆèŽ·å–æ•°æ®é•¿åº¦ï¼Œåœ¨æ ¹æ®é•¿åº¦èŽ·å–çœŸå®žæ•°æ®æ—¶ä¹Ÿå…³å¿ƒçœŸå®žæ•°æ®é•¿åº¦ï¼Œå…ˆå­˜å‚¨é•¿åº¦éœ€è¦ä¸€ä¸ªå­—èŠ‚ï¼Œåœ¨å­˜å‚¨çœŸå®žæ•°æ®ä¸ä¼šæµªè´¹ç©ºé—´ï¼Œä½†æ˜¯ç”±äºŽéœ€è¦è®¡ç®—æ•°æ®çš„é•¿åº¦ï¼Œæ‰€ä»¥å­˜å–é€Ÿåº¦ä¼šæ¯”å®šé•¿æ…¢ã€‚ ç›¸åŒç‚¹ï¼š â€‹ æ‹¬å·ä¸­çš„æ•°å­—ï¼Œéƒ½æ˜¯è¡¨ç¤ºå­˜å‚¨æœ€å¤§å­—ç¬¦é•¿åº¦ã€‚ char ä½¿ç”¨é¢‘çŽ‡æ›´é«˜ã€‚ mysql ä¼šåœ¨å­˜å‚¨æ•°æ®æ—¶è‡ªåŠ¨å°†æ•°æ®æœ«å°¾çš„ç©ºæ ¼åŽ»æŽ‰ï¼Œå¦‚æžœå¿…é¡»è¦å­˜ç©ºæ ¼ï¼Œéœ€è¦ä¿®æ”¹ sql_mode å¢žåŠ PAD_CHAR_TO_FULL_LENGTH æ„æ€æ˜¯æŠŠç©ºæ ¼å½“åšæœ‰æ•ˆæ•°æ®ã€‚ ç”±äºŽè‡ªåŠ¨åŽ»é™¤ç©ºæ ¼è¿™ä¸ªæœºåˆ¶ï¼Œåœ¨ä½¿ç”¨ç­‰äºŽç¬¦å·å’Œ like æ—¶æœ‰åŒºåˆ«ï¼š â€‹ select * from t1 where name = â€˜yh â€˜; â€‹ ä¼šè‡ªåŠ¨åŽ»é™¤ç©ºæ ¼ â€‹ select * from t1 where name like â€˜yhâ€™; â€‹ like ç”¨äºŽæ¨¡ç³ŠåŒ¹é…ï¼Œä½¿ç”¨%è¡¨ç¤º0æˆ–ä»»æ„ä¸ªå­—ç¬¦ â€‹ ä½¿ç”¨_è¡¨ç¤ºä¸€ä¸ªä»»æ„å­—ç¬¦ã€‚ æ—¥æœŸç±»åž‹year time date datetime timestamp Timestamp ç‰¹ç‚¹æ˜¯å¯ä»¥ç»™ null è‡ªåŠ¨è¾“å…¥å½“å‰æ—¶é—´ å½“è¿™æ¡è®°å½•è¢«ä¿®æ”¹äº†ä¼šè‡ªåŠ¨æ›´æ–°å½“å‰æ—¶é—´ é›†åˆä¸Žæžšä¸¾ç±»åž‹æžšä¸¾â€‹ enum å¯ä»¥æŒ‡å®šä¸€å †å­—ç¬¦ä¸²çš„å€¼ï¼Œåœ¨æ’å…¥æ•°æ®æ—¶ â€‹ æ•°æ®å¿…é¡»åœ¨å †å­—ç¬¦ä¸²ä¸­çš„å…¶ä¸­ä¸€ä¸ªï¼ˆâ€˜â€™ç”·çš„â€˜â€™ï¼Œâ€˜â€™å¥³çš„â€˜â€™ï¼‰å¤šé€‰ä¸€ é›†åˆâ€‹ set å¯ä»¥æŒ‡å®šä¸€å †å­—ç¬¦ä¸²çš„å€¼ å†æ’å…¥æ•°æ®æ—¶ â€‹ æ•°æ®å¿…é¡»è¿™å †å­—ç¬¦ä¸²ä¸­çš„å…¶ä¸­ä¸€ä¸ªï¼ˆâ€˜â€™ç”·çš„â€˜â€™ï¼Œâ€˜â€™å¥³çš„â€˜â€™ï¼‰å¤šé€‰ä¸€ å…±åŒç‚¹ï¼šæ•°æ®éƒ½æ˜¯å­—ç¬¦ä¸²ç±»åž‹ çº¦æŸæ¡ä»¶æ˜¯ä¸€ç§å¯¹æ•°æ®çš„é™åˆ¶ã€‚ çº¦æŸçš„ä½œç”¨ï¼Ÿ â€‹ ä¸ºäº†ä¿è¯æ•°æ®çš„æ­£ç¡®æ€§ï¼Œå®Œæ•´æ€§ â€‹ ä¾‹å¦‚è¦å­˜å‡ºå¯†ç  char(20) åªé™åˆ¶äº†ç±»åž‹å’Œé•¿åº¦ï¼Œæ— æ³•ä¿è¯æ•°æ®çš„æ­£ç¡®æ€§ã€‚ é¢å¤–çš„çº¦æŸè¯­æ³•ï¼š â€‹ åˆ›å»ºæ—¶æŒ‡å®šçº¦æŸ â€‹ create table è¡¨åç§°(å­—æ®µå ç±»åž‹(é•¿åº¦) çº¦æŸåç§°1,çº¦æŸåç§°n,â€¦) â€‹ åŽæœŸä¿®æ”¹çš„æ–¹å¼æ·»åŠ  çº¦æŸ â€‹ alter table è¡¨åç§° modify å­—æ®µå ç±»åž‹(é•¿åº¦) çº¦æŸåç§°1 çº¦æŸåç§°n,â€¦ NOT NULL éžç©ºçº¦æŸ é™åˆ¶è¯¥å­—æ®µçš„å€¼ä¸èƒ½ä¸ºç©ºUNIQUE å”¯ä¸€æ€§çº¦æŸ é™åˆ¶è¯¥å­—æ®µçš„å€¼æ˜¯å”¯ä¸€çš„ä¸èƒ½å‡ºçŽ°é‡å¤DEFAULT é»˜è®¤å€¼çº¦æŸ å¦‚æžœæ’å…¥æ•°æ®æ—¶æ²¡æœ‰æŒ‡å®šè¯¥å­—æ®µçš„å€¼åˆ™ä½¿ç”¨é»˜è®¤å€¼PRIMARY KEY ä¸»é”®çº¦æŸ é™åˆ¶è¯¥å­—æ®µ ä¸èƒ½ä¸ºç©º å¹¶ä¸”æ˜¯å”¯ä¸€çš„ å¯ä»¥å”¯ä¸€æ ‡è¯†ä¸€æ¡æ•°æ® *FOREIGN KEY å¤–é”®çº¦æŸ ç”¨æ¥æŒ‡å‘å¦ä¸€ä¸ªè¡¨çš„ä¸»é”® æ¯ä¸ªè¡¨éƒ½åº”è¯¥æœ‰ä¸€ä¸ªä¸»é”®ï¼Œéœ€è¦å”¯ä¸€æ ‡è¯†ï¼Œå¦åˆ™å¯èƒ½å‡ºçŽ°å®Œå…¨ç›¸åŒçš„ä¸¤ä¸ªæ•°æ®ï¼Œæ— æ³•åŒºåˆ† UNIQUE ä¸èƒ½é‡å¤ï¼Œä½†æ˜¯å¯ä»¥ä¸ºç©ºï¼Œè¿™æ ·çš„è¯ä¸èƒ½å”¯ä¸€æ ‡è¯†ã€‚ UNIQUE NOT NULL ä¸èƒ½ä¸ºç©ºä¸”å”¯ä¸€ å¯ä»¥å”¯ä¸€æ ‡è¯†ä¸€æ¡æ•°æ®ï¼Œä¹¦å†™é¡ºåºæ— æ‰€è°“ã€‚ UNIQUE NOT NULL ä¸Žä¸»é”®çš„åŒºåˆ« â€‹ UNIQUE NOT NULL ä¸èƒ½è¢«å…¶ä»–è¡¨å¼•ç”¨ï¼ˆä¸èƒ½ä½œä¸ºå…¶ä»–è¡¨çš„å¤–é”®ï¼‰ â€‹ UNIQUE NOT NULL çº¦æŸ ä¸€ä¸ªè¡¨ä¸­å¯ä»¥æœ‰å¤šä¸ªï¼Œä½†æ˜¯ä¸»é”®åªèƒ½æœ‰ä¸€ä¸ªã€‚ è”åˆå”¯ä¸€ï¼š ç´¢å¼•ï¼šç”¨äºŽåŠ é€ŸæŸ¥è¯¢ InnoDB ä¸­ç´¢å¼•æ˜¯æ ‘å½¢ç»“æž„ â€‹ ä¸ºäº†æé«˜æŸ¥è¯¢æ•ˆçŽ‡ï¼ŒInnoDB ä¼šæ‰¾ä¸€ä¸ªä¸ä¸ºç©ºä¸”æƒŸä¸€çš„å­—æ®µä½œä¸ºä¸»é”® â€‹ å¦‚æžœè¡¨ä¸­ä¸å­˜åœ¨è¿™æ ·çš„å­—æ®µï¼Œä¼šè‡ªåŠ¨å¸®ä½ å»ºä¸€ä¸ªéšè—é€æ¸å­—æ®µï¼Œä½†æ˜¯æ— æ³•æå‡æŸ¥è¯¢æ•ˆçŽ‡ã€‚ â€‹ åªè¦æ˜¯ä½¿ç”¨ InnoDBï¼Œå°±åº”è¯¥ä¸ºæ¯ä¸ªè¡¨æŒ‡å®šä¸€ä¸ªéžç©ºä¸”å”¯ä¸€çš„å­—æ®µï¼ŒInnoDB ç»„ç»‡æ•°æ®æ—¶ï¼Œé¦–å…ˆä½¿ç”¨ä¸»é”®ï¼Œå¦‚æžœæ²¡æœ‰ä¸»é”®ï¼Œæ‰¾ä¸€ä¸ªéžç©ºä¸”æƒŸä¸€çš„å­—æ®µï¼Œå¦‚æžœæ²¡æœ‰é‚£å°±ä¼šå»ºä¸€ä¸ªéšè—å­—æ®µã€‚ å¤šå­—æ®µè”åˆä¸»é”®ï¼šä¸å¸¸ç”¨ 1mysql&gt; create table t7(ip char(15),port int,primary key(ip,port)); å½“ä¸€ä¸ªè¡¨ä¸­ï¼Œç”±äºŽä¸šåŠ¡éœ€æ±‚æ²¡æœ‰ä¸€ä¸ªéžç©ºä¸”æƒŸä¸€çš„å­—æ®µæ—¶ï¼Œæˆ‘ä»¬å¯ä»¥å»ºä¸€ä¸ªæ–°çš„å­—æ®µä¸“é—¨ä½œä¸ºä¸»é”®ï¼Œç®¡ç†ä¸»é”®çš„å€¼æŒºéº»çƒ¦ï¼Œéœ€è¦è®°å½•ä¸Šä¸€æ¬¡çš„ä¸»é”®å€¼ï¼ŒMySQL ä½¿ç”¨ auto_increment è‡ªåŠ¨å¢žé•¿ï¼Œauto_increment åªèƒ½ç”¨äºŽæ•´åž‹å­—æ®µï¼Œå¹¶ä¸”è¯¥å­—æ®µå¿…é¡»å…·å¤‡ç´¢å¼•ã€‚æ‰€ä»¥ä¸»é”®éƒ½ä¼šåŠ ä¸Šauto_incrementã€‚ æ‰‹åŠ¨ä¿®æ”¹è‡ªåŠ¨å¢žé•¿è®¡æ•° 1alter teble è¡¨å auto_increment æ–°å€¼ï¼› æ³¨æ„ï¼šå¦‚æžœæ–°çš„å€¼å°äºŽå½“å‰æœ€å¤§å€¼æ˜¯æ— æ•ˆçš„ã€‚ insert è¯­å¥ 1mysql&gt; insert into è¡¨å values(å€¼1,å€¼n,...) è¦æ±‚å€¼å¾—é¡ºåºä¸ªæ•°å¿…é¡»ä¸Žè¡¨å­—æ®µå®Œå…¨å¯¹åº” å¦ä¸€ç§å†™æ³•ï¼š 1mysql&gt; insert into è¡¨å(å­—æ®µå,å­—æ®µån,...) values(å€¼1,å€¼n,...) å¯ä»¥é€‰æ‹©æ€§æ’å…¥æŸäº›å­—æ®µï¼Œè¦æ±‚å€¼å¾—é¡ºåºå¿…é¡»ä¸Žè¡¨ååŽé¢å£°æ˜Žçš„å­—æ®µä¸€è‡´ã€‚ SQL_MODEæŸ¥çœ‹æ•°æ®åº“çš„æ¨¡å¼1mysql&gt; show variables like &apos;%mode%&apos;; åœ¨æœ€åŽä¸€è¡Œçš„ sql_mode æœ‰ä¸ªå€¼ä¸ºNO_ENGINE_SUBSTITUTIONæ„æ€ä¸ºéžä¸¥æ ¼æ¨¡å¼ï¼Œä½œç”¨æ˜¯åœ¨å¦‚æžœä½ å­˜å‚¨çš„æ•°æ®ç±»åž‹è¶…è¿‡é™åˆ¶æ¡ä»¶äº†ä¹Ÿä¸ä¼šæŠ¥é”™åè€Œä¼šå­˜å‚¨é™åˆ¶æ¡ä»¶çš„è¾¹ç•Œå¤§å°ï¼Œæ¯”å¦‚ tinyintï¼Œå¦‚æžœæ˜¯éžä¸¥æ ¼æ¨¡å¼ï¼Œä½ å­˜å‚¨ä¸€ä¸ªå¤§äºŽ255çš„æ•°æ®ï¼Œä¸ä¼šä¿é”™ä¼šå­˜å‚¨ä¸º255ã€‚ 1mysql&gt; create table t0(id tinyint); ä¿®æ”¹ä¸ºä¸¥æ ¼æ¨¡å¼1mysql&gt; set global sql_mode=&apos;strict_trans_tables&apos;; è®¾ç½®å®ŒæˆåŽï¼Œéœ€è¦é‡æ–°è¿žæŽ¥æ‰ä¼šç”Ÿæ•ˆã€‚ ä¿®æ”¹ä¸ºä¸¥æ ¼æ¨¡å¼åŽå¦‚æžœæ’å…¥çš„å€¼è¶…è¿‡æ•°æ®ç±»åž‹çš„ç•Œé™åŽå°±ä¼šæŠ¥é”™ã€‚]]></content>
      <categories>
        <category>æ•°æ®åº“</category>
      </categories>
  </entry>
  <entry>
    <title><![CDATA[æ•°æ®åº“ï¼ˆä¸€ï¼‰]]></title>
    <url>%2F2018%2F11%2F19%2F%E6%95%B0%E6%8D%AE%E5%BA%93-%E4%B8%80%2F</url>
    <content type="text"><![CDATA[å‰è¨€OK, ç»è¿‡ç½‘ç»œç¼–ç¨‹å’Œå¹¶å‘ç¼–ç¨‹çš„å­¦ä¹ ,çŽ°åœ¨åˆ°äº†å­¦ä¹ æ•°æ®åº“æ„‰å¿«ä¹‹æ—…äº†ðŸ‘½.æ„Ÿè§‰åˆ°ä¸€ä¸ä¸çš„å…´å¥‹,å­¦ä¹ æ–°çŸ¥è¯†çš„å¼€å§‹æ€»æ˜¯èƒ½å¤Ÿç»™äººåŠ¨åŠ›,ä½•å†µè¿˜æ˜¯å­¦ä¹ æ•°æ®åº“,ä¸€çœ‹å°±æ˜¾å¾—é«˜å¤§ä¸Š,è€Œä¸”å‡ ä¹Žéƒ½æ˜¯å‘½ä»¤è¡Œæ“ä½œ,é»‘å®¢æ—¢è§†æ„Ÿæœ‰æ²¡æœ‰â€¦ æ•°æ®åº“ä»‹ç»ä»€ä¹ˆæ˜¯æ•°æ®åº“ç®€å•æ¥è¯´,æ•°æ®åº“( DataBase)å°±æ˜¯ç”¨æ¥å­˜æ”¾æ•°æ®çš„ä»“åº“,å°±åƒ github ä»“åº“ä¸€æ ·æ˜¯ç”¨æ¥å­˜æ”¾æ•°æ®çš„,è¿™ä¸ªä»“åº“æ˜¯æŒ‰ç…§ä¸€å®šçš„æ•°æ®ç»“æž„(æ•°æ®ç»“æž„æ˜¯æŒ‡æ•°æ®çš„ç»„ç»‡å½¢å¼æˆ–æ•°æ®ä¹‹é—´çš„è”ç³»)æ¥ç»„ç»‡å’Œå­˜å‚¨æ•°æ®çš„,å¯ä»¥é€šè¿‡å„ç§ SQL è¯­å¥æ¥å­˜å–æ•°æ®åº“é‡Œçš„æ•°æ®.éšç€è®¡ç®—æœºæŠ€æœ¯çš„å‘å±•å’Œä¿¡æ¯çš„çˆ†ç‚¸,æ•°æ®åº“ä¸ä»…ä»…æ˜¯å­˜å‚¨å’Œç®¡ç†æ•°æ®äº†,è€Œè½¬å˜æˆç”¨æˆ·æ‰€éœ€è¦çš„å„ç§æ•°æ®ç®¡ç†æ–¹å¼.æ•°æ®åº“æœ‰å¾ˆå¤šç§ç±»å’ŒåŠŸèƒ½,ä»Žæœ€ç®€å•çš„å­˜å‚¨æœ‰å„ç§æ•°æ®çš„è¡¨æ ¼åˆ°èƒ½å¤Ÿè¿›è¡Œæµ·é‡æ•°æ®å­˜å‚¨çš„å¤§åž‹æ•°æ®åº“ç³»ç»Ÿéƒ½åœ¨å„æ–¹é¢å¾—åˆ°äº†å¹¿æ³›çš„åº”ç”¨. æ•°æ®åº“ä¹‹å‰åœ¨æ•°æ®åº“ä¹‹å‰æ˜¯æ€Žä¹ˆå­˜å‚¨æ•°æ®çš„å‘¢? æ–‡æœ¬æ¨¡åž‹æ—©å…ˆçš„æ•°æ®éƒ½æ˜¯ä¿å­˜åœ¨æ–‡æœ¬æ–‡ä»¶ä¸­çš„,æ‰€ä»¥è¿™å°±ä¿ƒä½¿äº†æ–‡æœ¬æ–‡ä»¶çš„ç¼–è¾‘å™¨éžå¸¸æµè¡Œ,æ–‡æœ¬æ£€ç´¢çš„é€Ÿåº¦æ…¢æ•ˆçŽ‡ä½Ž,å½“æ•°æ®åº“æ–‡ä»¶å˜å¾—åºžå¤§æ—¶,å¿«é€Ÿçš„æ£€ç´¢æ•°æ®å°±å˜æˆäº†ä¸€ä¸ªéš¾é¢˜.æ‰€ä»¥å‡ºçŽ°äº† DB,DB æ˜¯ä»¥ç»™æ¯ä¸€è¡Œåšä¸€ä¸ªç‰¹å®šçš„æ ‡å¿—çš„æ–¹å¼æ¥å·¥ä½œçš„,è¿™ä¸ªæ ‡è®°å« key, æŸ¥æ‰¾ä¸€ä¸ªä¹‹éœ€è¦å…ˆæ‰¾åˆ° key, è¿™æ ·å°±èƒ½å¿«é€Ÿçš„æ£€ç´¢å¤§éœ€è¦çš„å€¼( value).DB æ˜¯ä¼¯å…‹åˆ©å¤§å­¦å¼€å‘çš„,å®ƒæ—©æœŸä¹Ÿå« sleepcat. ä½†æ˜¯éšç€æ•°æ®çš„å¢žåŠ ,ä»¥åŠç”¨æˆ·å¯¹æ£€ç´¢é€Ÿåº¦çš„éœ€æ±‚,è¿™å°±è®©å¾ˆå¤šæ•°æ®ç›´æŽ¥å·¥ä½œåœ¨äº†å†…å­˜ä¸­,å½“æ•°æ®æ–‡ä»¶è¶Šæ¥è¶Šå¤§çš„æ—¶å€™,å†…å­˜çš„å®¹é‡å°±æˆäº†æˆ‘ä»¬çš„ç“¶é¢ˆ,è€Œæœ‰äº›æ“ä½œæ˜¯å®Œå…¨éœ€è¦è½½å…¥å†…å­˜ä¸­,ç„¶åŽç”±å†…å­˜å·¥ä½œæŸ¥è¯¢ä¹‹åŽ,æ‰å°†ç»“æžœåé¦ˆ,åœ¨è¿™ç§è¶Šæ¥è¶Šå¤æ‚çš„æœºåˆ¶ä¸‹,ä½¿ç”¨çº¯æ–‡æœ¬æ¥ä¿å­˜æ•°æ®å·²ç»ä¸èƒ½æ»¡è¶³éœ€æ±‚äº†,æŽ¥ç€å‡ºçŽ°äº†å±‚æ¬¡æ¨¡åž‹. å±‚æ¬¡æ¨¡åž‹å±‚æ¬¡æ¨¡åž‹å°†æ–‡æœ¬åˆ†æˆäº†åƒæ ¹â€“&gt;ä¸‹çº§ç›®å½•â€”&gt;ä¸‹ä¸‹çº§ç›®å½•è¿™æ ·çš„å½¢å¼.(å±‚æ¬¡æ¨¡åž‹ä¸­éžå¸¸è‘—åçš„æ˜¯ Sybase)ä¿¡æ¯ç®¡ç†ç³»ç»Ÿä¸­æœ€é‡è¦çš„å°±æ˜¯æ•°æ®,è€Œå¦‚æžœæŠŠä¿¡æ¯ç®¡ç†ç³»ç»Ÿæ¯”ä½œèº«ä½“çš„è¯,æ•°æ®å°±ç›¸å½“äºŽè¡€æ¶²,è€Œæˆ‘ä»¬çš„å¿ƒè„,å…¶å®žå°±æ˜¯æ•°æ®åº“.åƒä¹‹å‰çš„çº¯æ–‡æœ¬è®°å½•æ•°æ®,èƒ½å¤Ÿå®žçŽ°æ•°æ®è®°å½•çš„å°±æ˜¯æ–‡æœ¬æ–‡ä»¶,è€Œå®žçŽ°æ•°æ®ç®¡ç†çš„å°±æ˜¯æ£€ç´¢å‘½ä»¤.å±‚æ¬¡æ¨¡åž‹çš„å‡ºçŽ°,åœ¨å¾ˆå¤§ç¨‹åº¦ä¸Šç¼“è§£äº†æ•°æ®æ£€ç´¢é€Ÿåº¦çš„éš¾é¢˜,ä½†å®ƒæ¯•ç«Ÿæ˜¯æŒ‰ç…§å€’ç½®æ ‘çš„ç»“æž„æ¥æ‰§è¡Œçš„,è¿™æ ·çš„æ¨¡åž‹æƒ³è¦åœ¨å¤šä¸ªèŠ‚ç‚¹ä¹‹é—´å»ºç«‹æŸç§è”ç³»éžå¸¸å›°éš¾.æ‰€ä»¥åŽæ¥å‡ºçŽ°äº†ç½‘çŠ¶æ¨¡åž‹. ç½‘çŠ¶æ¨¡åž‹è¿™ç§æ¨¡åž‹æ˜¯ä»¥å½¼æ­¤é—´å¦‚ä½•å»ºç«‹å…³è”æ¥å†³å®šçš„.å®ƒåœ¨å±‚æ¬¡æ¨¡åž‹çš„åŸºç¡€ä¸Šå¯¹äºŽä¸åŒçš„èŠ‚ç‚¹å»ºç«‹äº†æ›´å¤šçš„è¿žæŽ¥,ä½¿å¾—ä¸åŒèŠ‚ç‚¹ä¹‹é—´çš„è¿žæŽ¥å˜å¾—è½»æ¾ç®€å•.ä½†æ˜¯è¿™ä¸¤ç§æ¨¡åž‹éƒ½æœ‰ä¸€ç§æžå¤§çš„ç¼ºé™·,å®ƒä»¬éœ€è¦è·Ÿè½¯ä»¶çš„è€¦åˆæˆéƒ½éžå¸¸çš„é«˜,å¦‚æžœæˆ‘ä»¬æƒ³ä¿®æ”¹ä¸€ä¸‹æ•°æ®æ¨¡åž‹ä¸­çš„å…³ç³»å’Œç»“æž„çš„è¯,åˆ™åŠ¿å¿…è¦å®Œå…¨ä¿®æ”¹å¯¹åº”çš„æ•°æ®æ¨¡åž‹ä¸‹çš„æ•°æ®ç®¡ç†è½¯ä»¶.ä¹‹åŽå‡ºçŽ°äº†å…³ç³»æ¨¡åž‹. å…³ç³»æ¨¡åž‹å…³ç³»æ¨¡åž‹å…¶å®žå°±æ˜¯ä¸€å †äºŒç»´è¡¨,ç”±è¡Œå’Œåˆ—ç»„æˆ,åœ¨åŒä¸€ä¸ªæ•°æ®åº“ä¹‹é—´å¯ä»¥å­˜åœ¨å¤šå¼ è¡¨,è¡¨ä¸Žè¡¨ä¹‹é—´è¿˜æœ‰ç›¸å…³çš„å±žæ€§ç›¸å…³è”.è¿™æ ·,è¡¨å†…ä¹‹é—´æœ‰å…³ç³»,è¡¨ä¸Žè¡¨ä¹‹é—´ä¹Ÿæœ‰å…³ç³»,è¿™å°±æ˜¯å…³ç³»æ¨¡åž‹.è€ŒçŽ°åœ¨çš„å…³ç³»æ¨¡åž‹ç»è¿‡è¿›ä¸€æ­¥å‘å±•,æœ‰äº†å¯¹è±¡â€”å…³ç³»æ¨¡åž‹, MySQL å°±æ˜¯ä¸€ä¸ªå¯¹è±¡â€”å…³ç³»æ¨¡åž‹.èƒ½å¤Ÿæä¾›å…³ç³»æ¨¡åž‹çš„å°±å«å…³ç³»åž‹æ•°æ®åº“æ¨¡æ‹Ÿç³»ç»Ÿ. æ•°æ®åº“çš„ä½œç”¨ä¸€ä¸ªè‰¯å¥½çš„æ•°æ®åº“ç®¡ç†ç³»ç»Ÿ,éƒ½æœ‰ä»¥ä¸‹åŠŸèƒ½: ç®¡ç†æ•°æ®å­˜å‚¨; å®‰å…¨ç®¡ç†,ä¸ºæ•°æ®åº“æä¾›é¿å…éžæ³•è®¿é—®çš„æœºåˆ¶,éžå¸¸é‡è¦; ç®¡ç†å…ƒæ•°æ®,æè¿°æ•°æ®åº“å±žæ€§çš„,æœ¬èº«è·Ÿæ•°æ®æ— å…³; äº‹åŠ¡ç®¡ç†,ä¸ºäº†ä¿è¯æ•°æ®ä¸€è‡´æ€§çš„ä¸€ä¸ªé‡è¦æœºåˆ¶,çŽ°åœ¨å¤§å¤šæ•°æ•°æ®ç®¡ç†ç³»ç»Ÿéƒ½æä¾›äº‹åŠ¡çš„åŠŸèƒ½; æ”¯æŒè¿žæŽ¥,ä¸»è¦æŒ‡ç½‘ç»œæ”¯æŒèƒ½åŠ›; æ€§èƒ½ä¼˜åŒ–,åœ¨æ€§èƒ½æ–¹é¢æä¾›ä¸€å®šçš„ä¼˜åŒ–æœºåˆ¶,è¿™æ˜¯çŽ°åœ¨æœ€æµè¡Œçš„å…³ç³»åž‹æ•°æ®ç®¡ç†ç³»ç»Ÿçš„æœ€é‡è¦çš„æ ‡å‡†ä¹‹ä¸€.åœ¨ RDBMS ä¸­æ£€ç´¢æ•ˆçŽ‡æœ€é«˜çš„,æ˜¯ Oracleå’Œ MySQL; æä¾›å¤‡ä»½å’Œæ¢å¤æœºåˆ¶,å¯¹äºŽæ•°æ®åº“ç®¡ç†ç³»ç»Ÿ,è¿™ä¹Ÿæ˜¯å¿…éœ€çš„åŠŸèƒ½,åƒ MySQL ä¸ºäº†æ•°æ®å®‰å…¨,æ¯ä»½æ•°æ®éƒ½ä¿å­˜ä¸¤ä»½,è™½ç„¶æ•°æ®å†—ä½™,ä½†æ˜¯ä¿è¯äº†æ•°æ®çš„å®‰å…¨; æä¾›æ•°æ®æ£€ç´¢å’Œä¿®æ”¹çš„å¤„ç†æœºåˆ¶,å¿«é€ŸæŸ¥è¯¢æ•°æ®å’Œä¿®æ”¹æ•°æ®. æ•°æ®åº“ç›¸å…³æ¦‚å¿µæ•°æ®åº“é‡Œå­˜å‚¨å¾ˆå¤šæ•°æ®åº“,ä¸€ä¸ªæ•°æ®åº“å¯ä»¥çœ‹åšæ˜¯ä¸€ä¸ªæ–‡ä»¶å¤¹,æ•°æ®åº“é‡Œé¢çš„è¡¨å¯ä»¥çœ‹åšç”±æ–‡ä»¶å¤¹ç®¡ç†çš„æ–‡ä»¶.åœ¨è¡¨ä¸­æœ‰è®¸å¤šçš„å­—æ®µ.(å¯ä»¥çœ‹åšæ˜¯æè¿°ä¸€ä¸ªæ•°æ®çš„ç‰¹å¾) å­—æ®µ è®°å½• è¡¨ åº“ DBMS æ•°æ®åº“æœåŠ¡å™¨ æ•°æ®åº“æœ¬è´¨ä¸Šæ˜¯ä¸€å¥— C/S æž¶æž„çš„ socket è½¯ä»¶. æ•°æ®åº“åˆ†ç±»åŠä¼˜ç¼ºç‚¹åœ¨å½“å‰çš„äº’è”ç½‘ä¸­,æœ€å¸¸ç”¨çš„æ•°æ®åº“æ¨¡åž‹ä¸»è¦æ˜¯ä¸¤ç§,å³å…³ç³»åž‹æ•°æ®åº“å’Œéžå…³ç³»åž‹æ•°æ®åº“. å…³ç³»åž‹æ•°æ®è™½ç„¶ç½‘çŠ¶æ•°æ®åº“å’Œå±‚æ¬¡æ•°æ®åº“å·²ç»å¾ˆå¥½çš„è§£å†³äº†æ•°æ®çš„å‡ ç§å’Œå…±äº«é—®é¢˜,ä½†æ˜¯åœ¨æ•°æ®ç‹¬ç«‹æ€§å’ŒæŠ½è±¡æ€§ä¸Šä»æœ‰å¾ˆå¤§ä¸è¶³,è€Œå…³ç³»åž‹æ•°æ®åº“å°±å¯ä»¥è¾ƒå¥½çš„è§£å†³è¿™äº›é—®é¢˜.å…³ç³»åž‹æ•°æ®åº“æ¨¡åž‹æ˜¯æŠŠå¤æ‚çš„æ•°æ®ç»“æž„å½’ç»“ä¸ºç®€å•çš„äºŒå…ƒå…³ç³»(å³äºŒç»´è¡¨æ ¼å½¢å¼).åœ¨å…³ç³»æ•°æ®åº“ä¸­,å¯¹æ•°æ®çš„æ“ä½œå‡ ä¹Žå…¨éƒ¨å»ºç«‹åœ¨ä¸€ä¸ªæˆ–å¤šä¸ªå…³ç³»è¡¨æ ¼ä¸Š,é€šè¿‡å¯¹è¿™äº›å…³è”è¡¨çš„è¡¨æ ¼åˆ†ç±»,åˆå¹¶,è¿žæŽ¥æˆ–é€‰å–ç­‰è¿ç®—æ¥å®žçŽ°æ•°æ®çš„ç®¡ç†.å…³ç³»åž‹æ•°æ®åº“è¯žç”Ÿè·ä»Šå·²æœ‰40å¤šå¹´,ä»Žç†è®ºäº§ç”Ÿåˆ°å‘å±•ä¸ºäº§å“,ä¾‹å¦‚, MySQL å’Œ Oracle æ•°æ®åº“.Oracle åœ¨æ•°æ®åº“é¢†åŸŸä¸Šå‡åˆ°éœ¸ä¸»åœ°ä½,å½¢æˆæ¯å¹´é«˜è¾¾æ•°ç™¾äº¿ç¾Žå…ƒçš„åºžå¤§å¸‚åœº,è€Œ MySQL ä¹Ÿæ˜¯ä¸€è·¯åŽå·,ä»¥è‡³äºŽè¢« Oracle æ”¶è´­(å…ˆè¢« SUN æ”¶è´­,ç„¶åŽ SUN è¢« Oracle æ”¶è´­) æ€»ç»“:ä»€ä¹ˆæ˜¯å…³ç³»åž‹æ•°æ®åº“ äºŒç»´çš„è¡¨æ ¼; é€šè¿‡ SQL ç»“æž„åŒ–æŸ¥è¯¢è¯­è¨€æ¥å­˜å–å’Œç®¡ç†æ•°æ®; ä¿æŒæ•°æ®ä¸€è‡´æ€§æ–¹é¢å¾ˆå¼º éžå…³ç³»æ•°æ®åº“éžå…³ç³»åž‹æ•°æ®åº“ä¹Ÿç§°ä¸º NoSQL,NoSQL çš„æœ¬æ„æ˜¯â€™ Not Only SQLâ€™,æŒ‡çš„æ˜¯éžå…³ç³»åž‹æ•°æ®åº“,è€Œä¸æ˜¯â€™No SQLâ€™çš„æ„æ€.å› æ­¤, NoSQL çš„äº§ç”Ÿå¹¶ä¸æ˜¯è¦å½»åº•å¦å®šå…³ç³»åž‹æ•°æ®åº“,è€Œæ˜¯ä½œä¸ºä¼ ç»Ÿå…³ç³»åž‹æ•°æ®åº“çš„ä¸€ä¸ªæœ‰æ•ˆè¡¥å……. NoSQL æ•°æ®åº“åœ¨ç‰¹å®šçš„åœºæ™¯ä¸‹å¯ä»¥å‘æŒ¥å‡ºéš¾ä»¥æƒ³è±¡çš„é«˜æ•ˆçŽ‡å’Œé«˜æ€§èƒ½.éšç€äº’è”ç½‘ web2.0ç½‘ç«™(ä»¥å‰åŸºæœ¬æ˜¯é™æ€ç½‘é¡µ)çš„å…´èµ·,ä¼ ç»Ÿçš„å…³ç³»åž‹æ•°æ®åº“åœ¨åº”ä»˜web2.0ç½‘ç«™,ç‰¹åˆ«æ˜¯å¯¹äºŽè§„æ¨¡æ—¥ç›Šæ‰©å¤§çš„æµ·é‡æ•°æ®,è¶…å¤§è§„æ¨¡å’Œé«˜å¹¶å‘çš„å¾®åš,å¾®ä¿¡, SNS ç±»åž‹çš„ web2.0çº¯åŠ¨æ€ç½‘ç«™å·²ç»æ˜¾å¾—åŠ›ä¸ä»Žå¿ƒ,æš´éœ²äº†å¾ˆå¤šéš¾ä»¥å…‹æœçš„é—®é¢˜,ä¾‹å¦‚:ä¼ ç»Ÿçš„å…³ç³»åž‹æ•°æ®åº“ I/O ç“¶é¢ˆ,æ€§èƒ½ç“¶é¢ˆéƒ½éš¾ä»¥æœ‰æ•ˆçªç ´,äºŽæ˜¯å¼€å§‹å‡ºçŽ°äº†å¤§æ‰¹é’ˆå¯¹åœºæ™¯,ä»¥é«˜æ€§èƒ½å’Œä½¿ç”¨ä¾¿åˆ©ä¸ºç›®çš„çš„åŠŸèƒ½ç‰¹å¼‚åŒ–å¾—æ•°æ®åº“äº§å“, NoSQL( éžå…³ç³»åž‹)ç±»çš„æ•°æ®åº“å°±æ˜¯åœ¨è¿™æ ·çš„åœºæ™¯ä¸­è¯žç”Ÿå¹¶å¾—åˆ°äº†éžå¸¸è¿…é€Ÿçš„å‘å±•. NoSQL ä¸å°†æ•°æ®çš„ä¸€è‡´æ€§ä½œä¸ºé‡ç‚¹,æˆ–è€…æ˜¯ä½œä¸ºæ¬¡é‡ç‚¹.NoSQLæ˜¯éžå…³ç³»åž‹æ•°æ®åº“çš„å¹¿æ³›å®šä¹‰.å®ƒæ‰“ç ´äº†é•¿ä¹…ä»¥æ¥å…³ç³»åž‹æ•°æ®åº“ä¸Ž ACID ç†è®ºå¤§ç»Ÿä¸€çš„å±€é¢. NoSQL æ•°æ®å­˜å‚¨ä¸éœ€è¦å›ºå®šçš„è¡¨ç»“æž„,é€šå¸¸ä¹Ÿä¸å­˜åœ¨è¿žæŽ¥æ“ä½œ.åœ¨å¤§æ•°æ®å­˜å‚¨ä¸Šå…·å¤‡å…³ç³»åž‹æ•°æ®åº“æ— æ³•æ¯”æ‹Ÿçš„æ€§èƒ½ä¼˜åŠ¿.å½“ä»Šçš„åº”ç”¨ä½“ç³»ç»“æž„éœ€è¦æ•°æ®å­˜å‚¨åœ¨å’Œå…´ä¼¸ç¼©æ€§ä¸Šèƒ½å¤Ÿæ»¡è¶³éœ€æ±‚.è€Œ NoSQL å­˜å‚¨å°±æ˜¯ä¸ºäº†å®žçŽ°è¿™ä¸ªéœ€æ±‚è€Œè¯žç”Ÿçš„. æ€»ç»“:ä»€ä¹ˆæ˜¯éžå…³ç³»åž‹æ•°æ®åº“ NoSQL ä¸æ˜¯å¦å®šå…³ç³»åž‹æ•°æ®åº“,è€Œæ˜¯ä½œä¸ºå…³ç³»æ•°æ®åº“çš„ä¸€ä¸ªé‡è¦è¡¥å……; NoSQL ä¸ºäº†é«˜æ€§èƒ½,é«˜å¹¶å‘è€Œç”Ÿ,å¿½ç•¥å½±å“é«˜æ€§èƒ½,é«˜å¹¶å‘çš„åŠŸèƒ½. å…·ä½“åˆ†ç±»å…³ç³»åž‹æ•°æ®åº“ Oracle: ç›®å‰æœ€å¥½çš„å…³ç³»åž‹æ•°æ®åº“,ä¼˜åŠ¿åœ¨äºŽç”¨æˆ·ç®¡ç†ä¸Žåˆ†å¸ƒå¼,ä½†æ˜¯å•†ä¸šç‰ˆæ”¶è´¹; MySQL: å…è´¹å¼€æº,åŠŸèƒ½æ²¡æœ‰ Oracle å¼ºå¤§,ä½†è¶³ä»¥æ»¡è¶³ä¸­å°ä¼ä¸šä½¿ç”¨; SQLserver: å±žäºŽå¾®è½¯ç”Ÿæ€,éœ€è¦å’Œ windows é…åˆä½¿ç”¨; DB2:IBM å¼€å‘çš„å¤§åž‹å…³ç³»åž‹æ•°æ®åº“,æ”¶è´¹,é€šå¸¸å’Œç¡¬ä»¶æ†ç»‘é”€å”®. éžå…³ç³»åž‹æ•°æ®åº“ MongoDB:é¢å‘æ–‡æ¡£ redis:æŒä¹…åŒ–ç¼“å­˜ memercach:çº¯å†…å­˜ MySQL æ•°æ®åº“Mysql çš„å®‰è£…MAC ç‰ˆå®‰è£… ä¸‹è½½MySQL ç¤¾åŒºç‰ˆ å®‰è£… MySQL åŒå‡» mysql-5.7.24-macos10.14-x86_64.dmg æ–‡ä»¶ï¼ŒåŠ è½½é•œåƒ,ä¸€ç›´ç‚¹å‡»ç»§ç»­,å› ä¸ºæˆ‘å·²ç»å®‰è£…äº†,å°±ä¸æ¼”ç¤ºäº†.æ³¨æ„å®‰è£…æˆåŠŸåŽæ‚”å¼¹å‡ºä¸€ä¸ªå¯¹è¯æ¡†,å‘Šè¯‰æˆ‘ä»¬ç”Ÿæˆäº†ä¸€ä¸ª root è´¦æˆ·çš„ä¸´æ—¶å¯†ç .éœ€è¦ä¿å­˜(å®žåœ¨ä¸è®°å¾—ä¹Ÿæ²¡äº‹,æœ‰åŠžæ³•ä¿®æ”¹) å¯åŠ¨ MySQL æ‰“å¼€ç³»ç»Ÿåå¥½è®¾ç½®,ä¼šå‘çŽ°åœ¨æœ€ä¸‹æ–¹å¤šäº†ä¸€ä¸ª MySQL å›¾æ ‡,ç‚¹å‡»è¿›å…¥è®¾ç½®ç•Œé¢ å®‰è£…å®Œæˆ,é»˜è®¤ MySQL çš„çŠ¶æ€æ˜¯ stopped, éœ€è¦ç‚¹å‡» Start MySQL Server æ¥å¯åŠ¨,å¯åŠ¨ä¹‹åŽ,çŠ¶æ€å˜ä¸º running. ä¸‹æ–¹æœ‰ä¸€ä¸ªè®¾ç½®æ˜¯å¦å¼€æœºè‡ªå¯åŠ¨. ç»ˆç«¯è¿žæŽ¥ MySQL é¦–å…ˆæŠŠ MySQL è·¯å¾„æ·»åŠ åˆ°çŽ¯å¢ƒå˜é‡ä¸­; å‘½ä»¤è¡Œç™»é™† 1mysql -u root -p ç™»é™†æˆåŠŸåŽéœ€è¦é‡è®¾ç™»å½•å¯†ç ,å¦åˆ™ä½¿ç”¨ä¸äº†. 1mysql&gt; show databases;ERROR 1820 (HY000): You must reset your password using ALTER USER statement before executing this statement.mysql&gt; ç™»é™†æˆåŠŸ å‡å¦‚å®‰è£…è®¾ç½®çš„é»˜è®¤å¯†ç å¿˜è®°äº†æ€Žä¹ˆåŠžå‘¢?åœ¨ä½¿ç”¨å®¢æˆ·ç«¯è¿žæŽ¥æœåŠ¡ç«¯çš„æ—¶å€™éœ€è¦ç»è¿‡è®¤è¯,é‚£ä¹ˆå› ä¸ºæœåŠ¡ç«¯ä¹Ÿåœ¨è‡ªå·±çš„ç”µè„‘ä¸Š,æ‰€ä»¥åªè¦ç»•è¿‡è®¤è¯å°±å¯ä»¥äº†. ç»•è¿‡æœåŠ¡ç«¯è®¤è¯ è¿›å…¥ mysql ä¸‹ bin ç›®å½• 1cd /usr/local/mysql/bin/ èŽ·å–è¶…çº§æƒé™ 1sudo su è¾“å…¥å¯†ç åŽè¾“å…¥ 1./mysqld_safe --skip-grant-tables &amp; æ‰“å¼€å¦ä¸€ä¸ªç»ˆç«¯è¾“å…¥ 1./mysql è¿›å…¥ mysql è¾“å…¥ 1flush privileges; å‡ºçŽ° Query OK, è¾“å…¥,ä¿®æ”¹å®Œæˆ 1set password for root@localhost = password(&apos;password&apos;); Windows å®‰è£…Windows å®‰è£…åˆ†ä¸ºä¸¤ç§,ä¸€ç§æ˜¯æœ‰ç•Œé¢å®‰è£…;ä¸€ç§æ˜¯æ— ç•Œé¢å®‰è£…ã€‚ æœ‰ç•Œé¢å®‰è£…å®‰è£…å’Œ MAC å·®ä¸å¤š,é€‰å¥½è‡ªå·±éœ€è¦çš„åŠŸèƒ½å°±å¯ä»¥äº†,é»˜è®¤æ˜¯å®‰è£…åœ¨c:\program files\mysql ä¸‹.å…³é”®è®°ä½è‡ªå·±è®¾ç½®çš„å¯†ç ã€‚ æ— ç•Œé¢å®‰è£… æ³¨æ„:5.7ä»¥åŽçš„ç‰ˆæœ¬å®‰è£…æˆåŠŸåŽéœ€è¦å…ˆåˆå§‹åŒ–; 1mysqld --initialize-insecure æ·»åŠ çŽ¯å¢ƒå˜é‡ æ‰“å¼€çŽ¯å¢ƒå˜é‡,å°† MySQL å®‰è£…ç›®å½•çº¿çš„ bin ç›®å½•åŠ å…¥ path å˜é‡; å°† mysqld åŠ å…¥åˆ° windows ç³»ç»ŸæœåŠ¡ 1mysqld --install ä¿®æ”¹å¯†ç  ä¿®æ”¹é»˜è®¤å¯†ç éœ€è¦å…ˆç™»é™†æˆåŠŸ,ç„¶åŽæ‰§è¡Œ update è¯­å¥ç›´æŽ¥ä¿®æ”¹ user è¡¨ä¸­çš„å¯†ç ; 5.7åŠä»¥åŽçš„ç‰ˆæœ¬ 1update mysql.user set authentication_string = password(&apos;root&apos;) where user = &apos;root&apos;; 5.6åŠä¹‹å‰çš„ç‰ˆæœ¬ 1update mysql.user set password = password(&apos;root&apos;) where user = &apos;root&apos;; ä¸éœ€è¦ç™»å½•ä½†éœ€è¦çŸ¥é“æ—§å¯†ç  1mysqladmin -u root -p æ—§å¯†ç  password æ–°å¯†ç  å¿˜è®°ç™»å½•å¯†ç  å…¶å®žæ€è·¯å’Œ mac ä¸€æ ·,éƒ½æ˜¯éœ€è¦ç»•è¿‡éªŒè¯,ç„¶åŽç™»é™†mysql æŽ¥ç€ä¿®æ”¹å¯†ç  å¯åŠ¨æœåŠ¡å™¨æ—¶,æŽ§åˆ¶å®ƒä¸è¦åŠ è½½æŽˆæƒè¡¨; æ— å¯†ç ç™»å½•æœåŠ¡å™¨ æ‰§è¡Œsql è¯­å¥ 1update mysql.user set authentication_string = password(&apos;root&apos;) where user = &apos;root&apos;; é‡å¯æœåŠ¡å™¨. ç”¨åˆ°çš„ç³»ç»ŸæŒ‡ä»¤ mysqld ç›´æŽ¥è¿è¡ŒæœåŠ¡å™¨ç¨‹åº; mysqld â€“skip-grant-tables è·³è¿‡æŽˆæƒè¡¨,ç”¨äºŽé‡è®¾å¯†ç ; tasklist | findstr mysqld æ‰¾åˆ° mysqld æœåŠ¡è¿›ç¨‹; taskkill /f /pid ç»“æŸæœåŠ¡å™¨ç¨‹åº; mysql -u ç”¨æˆ·å -p å¯†ç  -h ä¸»æœº -P ç«¯å£å·; mysqld â€“install å°† mysqld æ³¨å†Œåˆ° windows æœåŠ¡ä¸­,åœ¨æœåŠ¡ä¸­å« MySQL( æœ¬è´¨å°±æ˜¯ç»‘å®šäº†ä¸€ä¸ª exe ç¨‹åº); sc delete mysql åˆ é™¤ windows æœåŠ¡(é‡æ–° install çš„è¯ä¼šæ˜¾ç¤ºæœåŠ¡å·²å­˜åœ¨,éœ€è¦é‡å¯); exit é€€å‡ºå®¢æˆ·ç«¯ 5.6å’Œ5.7çš„åŒºåˆ« 5.7ç‰ˆæœ¬å®‰è£…åŽéœ€è¦åˆå§‹åŒ–ï¼› 5.6æ¸¸å®¢æ¨¡å¼ æ²¡æœ‰å¯†ç å°±å¯ä»¥ç™»å½•ä½†æ˜¯æ— æ³•æ“ä½œæ•°æ®ï¼Œåªèƒ½çœ‹åˆ°information_schema å’Œ mysqlï¼› 5.7ä¸­ dataæ•°æ®å­˜æ”¾ç›®å½•æ˜¯ç”±åˆå§‹åŒ–æ—¶å†³å®šçš„ å¸¦ç•Œé¢çš„åœ¨ C:\ProgramData; ä¸å¸¦ç•Œé¢çš„åœ¨å®‰è£…ç›®å½•ä¸­å’Œ bin åŒçº§; 5.6ä¸­ data å°±åœ¨å®‰è£…ç›®å½•ä¸­ å¯†ç å­˜å‚¨å­—æ®µåï¼Œåœ¨5.6ä¸­ä¸º passwordï¼Œ5.7ä¸­ä¸ºanthentication_string SQL è¯­å¥ä»€ä¹ˆæ˜¯ SQLsql:ç»“æž„åŒ–æŸ¥è¯¢è¯­è¨€,æ˜¯ä¸Šä¸ªä¸–çºª70å¹´ä»£ç”± IBM å…¬å¸å‘æ˜Žçš„ä¸€ç§ä¸“é—¨æ£€ç´¢,æŸ¥è¯¢æ•°æ®çš„ç¼–ç¨‹è¯­è¨€,è¿™ç§ç¼–ç¨‹è¯­è¨€ç±»ä¼¼äºŽè„šæœ¬è¯­è¨€.å®ƒæ˜¯ä¸€å¤§å †çš„å‘½ä»¤è¯­å¥.åªä¸è¿‡å®ƒæ‰§è¡Œçš„æŽ¥å£æ˜¯ SQL æŽ¥å£,å®ƒä¹Ÿæä¾›äº† SQL çš„è¯­å¥çš„è§£é‡Šå™¨,æ¯”å¦‚ select,update ç­‰å‘½ä»¤,åªä¸è¿‡è¿™æ ·çš„å‘½ä»¤è¦æ¯” bask å¤æ‚ä¸€ç‚¹.è¦å‘æ‰§è¡Œ SQL çš„è¯­å¥,éœ€è¦æœ‰ SQL æ¨¡åž‹æ‰å¯ä»¥.é¦–å…ˆéœ€è¦æŠŠç”¨æˆ·å†™çš„è¯­å¥è¾“é€åˆ°æœåŠ¡å™¨ç«¯,è¿™å°±è¦æœåŠ¡å™¨èƒ½å¤ŸæŽ¥å—å®¢æˆ·ç«¯çš„å‘½ä»¤,å¹¶å°†å‘½ä»¤æ‰€è¿”å›žçš„ç»“æžœ,é€å›žå®¢æˆ·ç«¯.è¿™å°±æ˜¯ SQL çš„æ‰§è¡ŒçŽ¯å¢ƒ,è€Œè¿™äº›è¯­å¥,åˆ™æ˜¯å®žçŽ°æ£€ç´¢ä¿®æ”¹ç­‰ç›¸å…³çš„æ•°æ®ç®¡ç†å·¥ä½œçš„.æ‰€ä»¥ SQL å°±æ˜¯ä¸€ç§ç®¡ç†è¯­è¨€,ç”¨äºŽç®¡ç†å…³ç³»åž‹ç³»ç»Ÿçš„,å®žçŽ°ç®¡ç†,ä¿®æ”¹æ•°æ®ç­‰å·¥ä½œçš„,ä¸€ç§ç‰¹æ®Šè¯­è¨€è§£æžå™¨.æœ€å¼€å§‹æ˜¯ IBM æä¾›çš„ SQL æ•°æ®æŽ¥å£( SEQUEL),ä½†æ˜¯ Oracle ä¹Ÿæœ‰è‡ªå·±çš„ SQL æ•°æ®æŽ¥å£,è¿™å°±é€ æˆäº†è§„åˆ™ä¸åŒ¹é….æ‰€ä»¥ç¾Žå›½å›½å®¶æ ‡å‡†å§”å‘˜ä¼š,å°±å®šä¹‰äº†ä¸€ä¸ªæ–°æ ‡å‡†: ANSI SQL æ ‡å‡†,å®ƒçš„å‘å±•åŽ†ç¨‹: ä¸Šä¸ªä¸–çºª80å¹´ä»£,1986å¹´ç ”å‘å‡ºæ¥,å«åš SQL-86æ ‡å‡†; 89å¹´æ‰©å±•ä¸º SQL-89; 1992å¹´å†æ¬¡æ‰©å±•, SQL-92:è¿™ä¸€ä»£è¢«åº”ç”¨äº†å¾ˆé•¿çš„æ—¶é—´:å„ç”Ÿäº§å•† RDBMS å…¬å¸,è¦æƒ³å®žçŽ°ä¸Šå¸‚,åˆ™å¿…é¡»ä¸¥æ ¼çš„æŒ‰ç…§92çš„æ ‡å‡†.ä½†æ˜¯è¿™ä¸ªæ ‡å‡†å®šä¹‰çš„å¤ªä¸¥æ ¼,ä»¥è‡³äºŽå‡ ä¹Žæ²¡æœ‰åŽ‚å•†å¯ä»¥è¾¾åˆ°è¿™ç§æ ‡å‡†,æ‰€ä»¥å…¼å®¹çš„æ ‡å‡†ä¹Ÿåˆ†æˆäº†ä¸‰ä¸­çº§åˆ«: Entry çº§åˆ«, Intermediate çº§åˆ«, Full çº§åˆ«,å‡ ä¹Žæ²¡æœ‰åŽ‚å•†å¯ä»¥è¾¾åˆ° Full çº§åˆ«,å¤§éƒ¨åˆ†éƒ½æ˜¯ Entry çº§åˆ«; 1999å¹´å†æ¬¡æ‰©å±•, SQL-99:MySQL æ˜¯å®Œå…¨å…¼å®¹ SQL-99çš„ Entry çº§åˆ«.è€Œåœ¨æ­¤åˆå‡ºçŽ°äº† Core SQL çº§åˆ«; 2003å¹´,åˆå‡ºçŽ°äº† SQL-2003æ ‡å‡†. XML æ ‡å‡†. SQL çš„ç‰ˆæœ¬å°±å’Œ bash ä¸€æ ·,æ¯ä¸€ä¸ªæ›´æ–°ç‰ˆæœ¬éƒ½æœ‰æ–°åŠŸèƒ½,è€Œä¸”æ‰§è¡Œé€Ÿåº¦,ä½¿ç”¨ä¾¿æ·,æä¾›çš„æ‰©å±•ä¹Ÿä¸ä¸€æ ·. ç®€å•çš„ sql è¯­å¥é’ˆå¯¹åº“çš„ç›¸å…³æ“ä½œ å¢ž create database åº“å; åˆ  drop database åº“å; æŸ¥ show databases;ï¼ˆæŸ¥çœ‹æ‰€æœ‰æ•°æ®åº“ï¼‰ show create database åº“å;ï¼ˆæŸ¥çœ‹å»ºåº“è¯­å¥ï¼‰ æ”¹ alter database åº“å è¦ä¿®æ”¹çš„å­—æ®µå; alter database åº“å DEAFULT CHARACTER SET utf8; ï¼ˆä¿®æ”¹é»˜è®¤ç¼–ç ï¼‰ alter database åº“å CHARSET utf8; æ³¨æ„åœ¨mysql ä¸­ åªèƒ½å†™ utf8 é’ˆå¯¹è¡¨çš„ç›¸å…³æ“ä½œ å¢žï¼šå»ºè¡¨æ˜¯é¦–å…ˆè¦æ˜Žç¡®æ•°æ®åº“ use åº“å; create table è¡¨å(å­—æ®µå ç±»åž‹(é•¿åº¦),â€¦.); create table åº“å(name char(10),gender char(1), age int); create table åº“å.è¡¨å(å­—æ®µå ç±»åž‹(é•¿åº¦),â€¦); # åˆ›å»ºåŒæ—¶æŒ‡å®šæ•°æ®åº“ åˆ  drop table è¡¨å; æŸ¥ show tables; æŸ¥çœ‹æ‰€æœ‰è¡¨ desc è¡¨å; æŸ¥çœ‹è¡¨ç»“æž„ show create table è¡¨å; æŸ¥å»ºè¡¨è¯­å¥ æ”¹ alter table è¡¨å drop|change|modify|add alter table è¡¨å drop å­—æ®µ; alter table è¡¨å change æ—§å­—æ®µå æ–°å­—æ®µå æ–°ç±»åž‹; alter table è¡¨å modify å­—æ®µå æ–°ç±»åž‹; alter table è¡¨å add å­—æ®µå ç±»åž‹; é‡å‘½åè¡¨ rename table æ—§è¡¨å to æ–°è¡¨å; ä¿®æ”¹è¡¨çš„å±žæ€§ alter table è¡¨å å±žæ€§å å€¼; é’ˆå¯¹è®°å½•çš„ç›¸å…³æ“ä½œ å¢ž insert into è¡¨å values(å€¼1,å€¼2â€¦); åˆ  delete from è¡¨å where å­—æ®µå=å€¼; # æ²¡æœ‰ç¬¦åˆæ¡ä»¶çš„è¯åˆ é™¤å…¨éƒ¨æ•°æ® æŸ¥ select from è¡¨å; # è¡¨ç¤ºé€šé…ç¬¦ æŸ¥çœ‹æ‰€æœ‰å­—æ®µ æ”¹ update è¡¨å set å­—æ®µå = æ–°å€¼ where å­—æ®µå = å€¼; # æ²¡æœ‰ç¬¦åˆæ¡ä»¶çš„è¯ä¿®æ”¹å…¨éƒ¨æ•°æ® å‘½åè§„èŒƒ ä¸èƒ½ä½¿ç”¨çº¯æ•°å­—ï¼› å¯ä»¥æ˜¯æ•°å­—ã€å­—æ¯ã€ä¸‹åˆ’çº¿çš„ç»„åˆï¼› å¯ä»¥ç”¨ä¸‹åˆ’çº¿å¼€å¤´ï¼› ä¸èƒ½ä½¿ sql å…³é”®è¯ï¼Œå¦‚ createï¼› ä¸åŒºåˆ†å¤§å°å†™ã€‚ ä¿®æ”¹é»˜è®¤é…ç½®é…ç½®æ–‡ä»¶æ”¾åœ¨å®‰è£…è·¯å¾„æ ¹ç›®å½•ä¸­å°±æ˜¯å’Œ bin åŒçº§ï¼Œåç§°å¿…é¡»å«my.iniï¼ˆmac çš„ä¸ä¸€æ ·ï¼‰ 12345678# å®¢æˆ·ç«¯çš„é…ç½®[mysql]user = rootpassword = passworddefault-character-set = utf8# æœåŠ¡ç«¯çš„é…ç½®[mysqld]character-set-server = utf8]]></content>
      <categories>
        <category>æ•°æ®åº“</category>
      </categories>
  </entry>
  <entry>
    <title><![CDATA[å¹¶å‘ç¼–ç¨‹ï¼ˆå…­ï¼‰]]></title>
    <url>%2F2018%2F11%2F18%2F%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B-%E5%85%AD%2F</url>
    <content type="text"><![CDATA[å‰è¨€å‰é¢ä¸¤ç¯‡ä»‹ç»äº†è¿›ç¨‹ç†è®º,åˆ›å»ºè¿›ç¨‹çš„ä¸¤ç§æ–¹å¼,äº’æ–¥é”ä»¥åŠè¿›ç¨‹é—´é€šä¿¡çš„ä¸‰ç§æ–¹å¼è¿˜æœ‰ç”Ÿäº§ç€æ¶ˆè´¹è€…æ¨¡åž‹.é™¤äº†è¿›ç¨‹é—´é€šä¿¡çº¿ç¨‹é‡Œé¢æ²¡æœ‰(å› ä¸ºçº¿ç¨‹é—´æ•°æ®å…±äº«)å…¶ä»–çš„å‡ ä¹Žæ²¡ä»€ä¹ˆä¸¤æ ·,è€Œä¸”åœ¨å¤šè¿›ç¨‹æ¨¡å—é‡Œé¢çš„Process ç±»ä»‹ç»ä¹Ÿè¯´äº† The class is analagous to &#39;threading.Thread&#39; å¤§æ„å°±æ˜¯è¯´è¿›ç¨‹ç±»å’Œçº¿ç¨‹ç±»ç±»ä¼¼,æ‰€ä»¥å¾ˆå¤šç”¨æ³•éƒ½ä¸€æ ·. çº¿ç¨‹çº¿ç¨‹ç†è®ºä¸ºäº†å……åˆ†åˆ©ç”¨ CPU å¤šæ ¸çš„æ€§èƒ½,ç¨‹åºå®žçŽ°äº†å¤šçº¿ç¨‹æ¨¡åž‹,é€šè¿‡å¤šçº¿ç¨‹å®žçŽ°å¤šä»»åŠ¡çš„å¹¶è¡Œæ‰§è¡Œ.]]></content>
      <categories>
        <category>å¹¶å‘ç¼–ç¨‹</category>
      </categories>
  </entry>
  <entry>
    <title><![CDATA[å¹¶å‘ç¼–ç¨‹ï¼ˆäº”ï¼‰]]></title>
    <url>%2F2018%2F11%2F17%2F%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B-%E4%BA%94%2F</url>
    <content type="text"><![CDATA[å‰è¨€ä¸Šç¯‡åšå®¢çš„å†…å®¹æ˜¯å®ˆæŠ¤è¿›ç¨‹,å¯¹äºŽæ“ä½œç³»ç»Ÿæ¥è¯´å¯ä»¥åœ¨åŽå°æ‰§è¡Œä¸€äº›ç¨‹åº.è¿™ç¯‡çš„å†…å®¹æ˜¯äº’æ–¥é”,åœ¨ä¸Šä¸Šç¯‡åšå®¢ä¸Šè¯´åˆ°è¿›ç¨‹å†…å­˜ç©ºé—´äº’ç›¸éš”ç¦»,æ‰€ä»¥å¯ä»¥é€šè¿‡å…±äº«æ–‡ä»¶æ¥æ“ä½œåŒä¸€ä¸ªæ–‡ä»¶,é‚£ä¹ˆè¿™æ ·æ“ä½œçš„è¯ä¼šå‘ç”Ÿä»€ä¹ˆå‘¢? é”äº’æ–¥é”å¤šä¸ªè¿›ç¨‹éœ€è¦å…±äº«æ•°æ®æ—¶,å…ˆå°†å…¶é”å®š,æ­¤æ—¶èµ„æºçŠ¶æ€ä¸ºâ€™é”å®šâ€™,å…¶ä»–è¿›ç¨‹ä¸èƒ½æ›´æ”¹;çŸ¥é“è¯¥è¿›ç¨‹é‡Šæ”¾èµ„æº,å°†èµ„æºçš„çŠ¶æ€å˜æˆéžâ€™é”å®šâ€™,å…¶ä»–çš„çº¿ç¨‹æ‰èƒ½å†æ¬¡é”å®šè¯¥èµ„æº.äº’æ–¥é”ä¿è¯äº†æ¯æ¬¡åªæœ‰ä¸€ä¸ªè¿›ç¨‹è¿›å…¥å†™å…¥æ“ä½œ,ä»Žè€Œä¿è¯äº†å¤šè¿›ç¨‹æƒ…å†µä¸‹æ•°æ®çš„æ­£ç¡®æ€§. æˆ‘ä»¬ä½¿ç”¨ä¸€ä¸ªdemo æ¥æ¨¡æ‹Ÿå¤šä¸ªè¿›ç¨‹æ“ä½œåŒä¸€ä¸ªæ–‡ä»¶: 12345678910111213141516171819202122232425262728293031import jsonimport time,randomfrom multiprocessing import Processdef show_tickets(name): time.sleep(random.randint(1,3)) with open('ticket.json', 'rt', encoding='utf-8') as f: data = json.load(f) print('%s æŸ¥çœ‹ å‰©ä½™ç¥¨æ•°: %s' % (name, data['count']))def buy_ticket(name): with open('ticket.json', 'rt', encoding='utf-8') as f: dic = json.load(f) if dic['count'] &gt; 0: dic['count'] -= 1 time.sleep(random.randint(1,3)) with open('ticket.json', 'wt', encoding='utf-8') as f: json.dump(dic, f) print('%s: è´­ç¥¨æˆåŠŸ' % name)def task(name): show_tickets(name) buy_ticket(name)if __name__ == '__main__': for i in range(1,11): p = Process(target=task, args=(i,)) p.start() è¿è¡Œç»“æžœ: åœ¨ ticket.json é‡Œé¢åªæœ‰ä¸€å¼ ç¥¨,ç»“æžœå´é€ æˆå¤šä¸ªç”¨æˆ·è´­ä¹°æˆåŠŸ,è¿™å¾ˆæ˜¾ç„¶æ˜¯ä¸ç¬¦åˆå®žé™…æƒ…å†µçš„.\ é‚£ä¹ˆæ€Žä¹ˆè§£å†³å‘¢?å¦‚æžœå¤šä¸ªè¿›ç¨‹å¯¹åŒä¸€ä¸ªæ–‡ä»¶è¿›è¡Œè¯»æ“ä½œå¯ä»¥ä¸è¿›è¡Œé™åˆ¶,ä½†æ˜¯å¯¹åŒä¸€ä¸ªæ–‡ä»¶è¿›è¡Œå†™æ“ä½œå°±å¿…è¦è¦è¿›è¡Œé™åˆ¶,ä¸å¯ä»¥åŒæ—¶å¤šä¸ªäººå¯¹åŒä¸€ä¸ªæ–‡ä»¶è¿›è¡Œå†™æ“ä½œ.python åœ¨å¤šè¿›ç¨‹æ¨¡å—é‡Œæä¾›ä¸€ä¸ªç±», Lock ç±»,å½“è¿›ç¨‹èŽ·å–åˆ°é”çš„æ—¶å€™å…¶ä»–çš„è¿›ç¨‹å°±å¿…é¡»è¦ç­‰å¾…é”é‡Šæ”¾æ‰å¯ä»¥è¿›è¡Œäº‰æŠ¢,åœ¨è¿™ä¸ªä¾‹å­é‡Œé¢å°±å¯ä»¥åŠ ä¸Šä¸€æŠŠé”æ¥ä¿æŠ¤æ•°æ®å®‰å…¨. 1234567891011121314151617181920212223242526272829303132333435from multiprocessing import Process, Lockimport json,time,randomdef show_tickets(name): time.sleep(random.randint(1,3)) with open('ticket.json', 'rt', encoding='utf-8') as f: data = json.load(f) print('%s æŸ¥çœ‹ å‰©ä½™ç¥¨æ•°: %s' % (name, data['count']))def buy_ticket(name): time.sleep(random.randint(1,3)) with open('ticket.json', 'rt', encoding='utf-8') as f: dic = json.load(f) if dic['count'] &gt; 0: dic['count'] -= 1 time.sleep(random.randint(1,3)) with open('ticket.json', 'wt', encoding='utf-8') as f: json.dump(dic, f) print('%s: è´­ç¥¨æˆåŠŸ' % name)def task(name,lock): show_tickets(name) lock.acquire() buy_ticket(name) lock.release()if __name__ == '__main__': mutex = Lock() for i in range(1,11): p = Process(target=task, args=(i,mutex)) p.start() è¿è¡Œç»“æžœ: è¿™æ ·åŠ äº†é”(äº’æ–¥é”)å°±å¯ä»¥è§£å†³åŒæ—¶æ“ä½œåŒä¸€ä¸ªæ–‡ä»¶é€ æˆçš„æ•°æ®æ··ä¹±é—®é¢˜äº†. å½“ä½¿ç”¨å¤šè¿›ç¨‹å¼€å‘æ—¶,å¦‚æžœå¤šä¸ªè¿›ç¨‹åŒæ—¶è¯»å†™åŒä¸€ä¸ªèµ„æº,å¯èƒ½ä¼šé€ æˆæ•°æ®çš„æ··ä¹±,ä¸ºäº†é˜²æ­¢å‘ç”Ÿé—®é¢˜,ä½¿ç”¨é”,æˆ–è€…ä½¿ç”¨ Process çš„æ–¹æ³• join å°†å¹¶è¡Œå˜ä¸ºä¸²è¡Œ. join å’Œé”çš„åŒºåˆ« join äººä¸ºæŽ§åˆ¶è¿›ç¨‹çš„æ‰§è¡Œé¡ºåº join æŠŠæ•´ä¸ªè¿›ç¨‹å…¨éƒ¨ä¸²è¡Œ,è€Œé”å¯ä»¥æŒ‡å®šéƒ¨åˆ†ä»£ç ä¸²è¡Œ ä¸€æ—¦ä¸²è¡Œ,æ•ˆçŽ‡å°±ä¼šé™ä½Ž,ä¸€æ—¦å¹¶è¡Œ,æ•°æ®å°±å¯èƒ½ä¼šå‡ºé”™. è¿›ç¨‹é—´é€šä¿¡è¿›ç¨‹é—´é€šä¿¡( internal-process communication),æˆ‘ä»¬åœ¨å¼€å¯å­è¿›ç¨‹æ˜¯å¸Œæœ›å­è¿›ç¨‹å¸®åŠ©å®Œæˆä»»åŠ¡,å¾ˆå¤šæƒ…å†µä¸‹éœ€è¦å°†æ•°æ®è¿”å›žç»™çˆ¶è¿›ç¨‹,ç„¶è€Œè¿›ç¨‹é—´å†…å­˜æ˜¯ç‰©ç†éš”ç¦»çš„. è§£å†³åŠžæ³•: å°†å…±äº«æ•°æ®æ”¾åˆ°æ–‡ä»¶ä¸­ ç®¡é“ å¤šè¿›ç¨‹æ¨¡å—ä¸­çš„ä¸€ä¸ªç±»,éœ€è¦æœ‰çˆ¶å­å…³ç³» å…±äº«ä¸€å¿«å†…å­˜åŒºåŸŸ éœ€è¦æ“ä½œç³»ç»Ÿåˆ†é… ç®¡é“é€šä¿¡Pipeç±»è¿”å›žä¸€ä¸ªç”±ç®¡é“è¿žæŽ¥çš„è¿žæŽ¥å¯¹è±¡,é»˜è®¤æƒ…å†µä¸‹ä¸ºåŒå·¥: 123456789101112from multiprocessing import Process,Pipedef f(conn): conn.send([42, None, 'hello']) conn.close() if __name__ == '__main__': parent_conn, child_conn = Pipe() p = Process(target=f, args=(child_conn,)) p.start() print(parent_conn.recv()) p.join() è¿è¡Œç»“æžœ: 1[42, None, 'hello'] å®žä¾‹åŒ– Pipe ç±»ä¼šè¿”å›žä¸¤ä¸ªè¿žæŽ¥å¯¹è±¡è¡¨ç¤ºç®¡é“çš„ä¸¤ç«¯.æ¯ä¸ªè¿žæŽ¥å¯¹è±¡éƒ½æœ‰ send() å’Œ recv() æ–¹æ³•(åŠå…¶ä»–).è¯·æ³¨æ„,å¦‚æžœä¸¤ä¸ªè¿›ç¨‹åŒæ—¶å°è¯•è¯»å†™ç®¡é“çš„åŒä¸€ç«¯,åˆ™ç®¡é“ä¸­çš„æ•°æ®å¯èƒ½ä¼šæŸå.å½“ç„¶,åŒæ—¶ä½¿ç”¨ç®¡é“çš„ä¸åŒç«¯éƒ¨çš„è¿‡ç¨‹ä¸å­˜åœ¨æŸåçš„é£Žé™©. å…±äº«å†…å­˜é€šä¿¡Queue é€šä¿¡Queueç±»ä¼šç”Ÿæˆä¸€ä¸ªå…ˆè¿›å…ˆå‡ºçš„å®¹å™¨,é€šè¿‡å¾€é˜Ÿåˆ—ä¸­å­˜å–æ•°æ®è€Œè¿›è¡Œè¿›ç¨‹é—´é€šä¿¡. 1234567891011from multiprocessing import Process, Queuedef f(q): q.put([42, None, 'hello']) if __name__ == '__main__': q = Queue() p = Process(target=f, args=(q,)) p.start() print(q.get()) p.join() è¿è¡Œç»“æžœ: 1[42, None, 'hello'] é˜Ÿåˆ—å…¶ä»–ç‰¹æ€§ 123456789101112131415161718192021222324252627282930313233# é˜»å¡žæ“ä½œ å¿…é¡»æŽŒæ¡q = Queue(3)# # å­˜å…¥æ•°æ®q.put("hello",block=False)q.put(["1","2","3"],block=False)q.put(1,block=False)# å½“å®¹é‡æ»¡çš„æ—¶å€™ å†æ‰§è¡Œput é»˜è®¤ä¼šé˜»å¡žç›´åˆ°æ‰§è¡ŒåŠ›äº†getä¸ºæ­¢# å¦‚æžœä¿®æ”¹block=False ç›´æŽ¥æŠ¥é”™ å› ä¸ºæ²¡åœ°æ–¹æ”¾äº†# q.put(&#123;&#125;,block=False)# # # å–å‡ºæ•°æ®print(q.get(block=False))print(q.get(block=False))print(q.get(block=False))# å¯¹äºŽget å½“é˜Ÿåˆ—ä¸­ä¸­æ²¡æœ‰æ•°æ®æ—¶é»˜è®¤æ˜¯é˜»å¡žçš„ ç›´è¾¾æ‰§è¡Œäº†put# å¦‚æžœä¿®æ”¹block=False ç›´æŽ¥æŠ¥é”™ å› ä¸ºæ²¡æ•°æ®å¯å–äº†print(q.get(block=False))# äº†è§£q = Queue(3)q.put("q",timeout=3)q.put("q2",timeout=3)q.put("q3",timeout=3)# å¦‚æžœæ»¡äº† æ„¿æ„ç­‰3ç§’ å¦‚æžœ3ç§’åŽè¿˜å­˜ä¸è¿›åŽ» å°±ç‚¸# q.put("q4",timeout=3)print(q.get(timeout=3))print(q.get(timeout=3))print(q.get(timeout=3))# å¦‚æžœæ²¡äº† æ„¿æ„ç­‰3ç§’ å¦‚æžœ3ç§’åŽè¿˜å–ä¸åˆ°æ•°æ® å°±ç‚¸print(q.get(timeout=3)) ####Manager é€šä¿¡ demo 1234567891011121314151617from multiprocessing import Process,Managerimport timedef task(dic): print("å­è¿›ç¨‹xxxxx") # li[0] = 1 # print(li[0]) dic["name"] = "xx"if __name__ == '__main__': m = Manager() # li = m.list([100]) dic = m.dict(&#123;&#125;) # å¼€å¯å­è¿›ç¨‹ p = Process(target=task,args=(dic,)) p.start() time.sleep(3) å¯ä»¥åˆ›å»ºä¸€ç‰‡å…±äº«å†…å­˜åŒºåŸŸç”¨æ¥å­˜å–æ•°æ®. ç”Ÿäº§è€…æ¶ˆè´¹è€…æ¨¡åž‹ä»€ä¹ˆæ˜¯ç”Ÿäº§è€…æ¶ˆè´¹è€…æ¨¡åž‹åœ¨è½¯ä»¶å¼€å‘è¿‡ç¨‹ä¸­,ç»å¸¸ç¢°åˆ°è¿™æ ·çš„åœºæ™¯: æŸäº›æ¨¡å—è´Ÿè´£ç”Ÿäº§æ•°æ®,è¿™äº›æ•°æ®ç”±å…¶ä»–æ¨¡å—æ¥è´Ÿè´£å¤„ç†(æ­¤å¤„çš„æ¨¡å—å¯èƒ½æ˜¯:å‡½æ•°,çº¿ç¨‹,è¿›ç¨‹ç­‰).ç”Ÿäº§æ•°æ®çš„æ¨¡å—ç§°ä¸ºç”Ÿäº§è€…,è€Œå¤„ç†æ•°æ®çš„æ¨¡å—ç§°ä¸ºæ¶ˆè´¹è€….åœ¨ç”Ÿäº§è€…ä¸Žæ¶ˆè´¹è€…ä¹‹é—´çš„ç¼“å†²åŒºç§°ä¹‹ä¸ºä»“åº“.ç”Ÿäº§è€…è´Ÿè´£å¾€ä»“åº“è¿è¾“å•†å“,è€Œæ¶ˆè´¹è€…è´Ÿè´£ä»Žä»“åº“é‡Œå–å‡ºå•†å“,è¿™å°±æž„æˆäº†ç”Ÿäº§è€…æ¶ˆè´¹è€…æ¨¡åž‹. ç»“æž„å›¾å¦‚ä¸‹: ä¸ºäº†ä¾¿äºŽç†è§£,æˆ‘ä»¬ä¸¾ä¸€ä¸ªå¯„ä¿¡çš„ä¾‹å­ã€‚å‡è®¾ä½ è¦å¯„ä¸€å°ä¿¡ï¼Œå¤§è‡´è¿‡ç¨‹å¦‚ä¸‹ï¼š ä½ æŠŠä¿¡å†™å¥½â€”â€”ç›¸å½“äºŽç”Ÿäº§è€…ç”Ÿäº§æ•°æ®; ä½ æŠŠä¿¡æ”¾å…¥é‚®ç®±â€”â€”ç›¸å½“äºŽç”Ÿäº§è€…æŠŠæ•°æ®æ”¾å…¥ç¼“å†²åŒº; é‚®é€’å‘˜æŠŠä¿¡ä»Žé‚®ç®±å–å‡ºï¼Œåšç›¸åº”å¤„ç†â€”â€”ç›¸å½“äºŽæ¶ˆè´¹è€…æŠŠæ•°æ®å–å‡ºç¼“å†²åŒº,å¤„ç†æ•°æ®. ç”Ÿäº§è€…æ¶ˆè´¹è€…æ¨¡åž‹çš„ä¼˜ç‚¹ è§£è€¦ å‡è®¾ç”Ÿäº§è€…å’Œæ¶ˆè´¹è€…åˆ†åˆ«æ˜¯ä¸¤ä¸ªçº¿ç¨‹.å¦‚æžœè®©ç”Ÿäº§è€…ç›´æŽ¥è°ƒç”¨æ¶ˆè´¹è€…çš„æŸä¸ªæ–¹æ³•,é‚£ä¹ˆç”Ÿäº§è€…å¯¹äºŽæ¶ˆè´¹è€…å°±ä¼šäº§ç”Ÿä¾èµ–(è€¦åˆ).å¦‚æžœæœªæ¥æ¶ˆè´¹è€…çš„ä»£ç å‘ç”Ÿæ”¹å˜,å¯èƒ½ä¼šå½±å“åˆ°ç”Ÿäº§è€…çš„ä»£ç .è€Œå¦‚æžœä¸¤è€…éƒ½ä¾èµ–äºŽæŸä¸ªç¼“å†²åŒº,ä¸¤è€…ä¹‹é—´ä¸ç›´æŽ¥ä¾èµ–,è€¦åˆä¹Ÿå°±ç›¸åº”é™ä½Žäº†. ä¸¾ä¸ªä¾‹å­,æˆ‘ä»¬åŽ»é‚®å±€æŠ•é€’ä¿¡ä»¶,å¦‚æžœä¸ä½¿ç”¨é‚®ç®±ï¼ˆä¹Ÿå°±æ˜¯ç¼“å†²åŒº,ä½ å¿…é¡»å¾—æŠŠä¿¡ç›´æŽ¥äº¤ç»™é‚®é€’å‘˜.æœ‰åŒå­¦ä¼šè¯´,ç›´æŽ¥ç»™é‚®é€’å‘˜ä¸æ˜¯æŒºç®€å•çš„å˜›?å…¶å®žä¸ç®€å•,ä½ å¿…é¡» å¾—è®¤è¯†è°æ˜¯é‚®é€’å‘˜,æ‰èƒ½æŠŠä¿¡ç»™ä»–.è¿™å°±äº§ç”Ÿäº†ä½ å’Œé‚®é€’å‘˜ä¹‹é—´çš„ä¾èµ–(ç›¸å½“äºŽç”Ÿäº§è€…å’Œæ¶ˆè´¹è€…çš„å¼ºè€¦åˆ).ä¸‡ä¸€å“ªå¤©é‚®é€’å‘˜æ¢äººäº†,ä½ è¿˜è¦é‡æ–°è®¤è¯†ä¸€ä¸‹(ç›¸å½“äºŽæ¶ˆè´¹è€…å˜åŒ–å¯¼è‡´ä¿®æ”¹ç”Ÿäº§è€…ä»£ç ).è€Œé‚®ç®±ç›¸å¯¹æ¥è¯´æ¯”è¾ƒå›ºå®š,ä½ ä¾èµ–å®ƒçš„æˆæœ¬å°±æ¯”è¾ƒä½Ž(ç›¸å½“äºŽå’Œç¼“å†²åŒºä¹‹é—´çš„å¼±è€¦åˆ). å¹¶å‘ ç”±äºŽç”Ÿäº§è€…ä¸Žæ¶ˆè´¹è€…æ˜¯ä¸¤ä¸ªç‹¬ç«‹çš„å¹¶å‘ä½“,å®ƒä»¬ä¹‹é—´æ˜¯ä½¿ç”¨ç¼“å†²åŒºé€šä¿¡çš„,ç”Ÿäº§è€…åªéœ€è¦å¾€ç¼“å†²åŒºé‡Œä¸¢æ•°æ®,å°±å¯ä»¥æŽ¥ç€ç”Ÿäº§ä¸‹ä¸€ä¸ªæ•°æ®äº†,è€Œæ¶ˆè´¹è€…åªéœ€è¦ä»Žç¼“å†²åŒºæ‹¿æ•°æ®å³å¯,è¿™æ ·å°±ä¸ä¼šå› ä¸ºå½¼æ­¤çš„å¤„ç†é€Ÿåº¦è€Œå‘ç”Ÿé˜»å¡ž. ç»§ç»­ä¸Šé¢çš„ä¾‹å­,å¦‚æžœæ²¡æœ‰é‚®ç®±,å°±å¾—åœ¨é‚®å±€ç­‰é‚®é€’å‘˜,çŸ¥é“ä»–å›žæ¥,æŠŠä¿¡äº¤ç»™ä»–,è¿™æœŸé—´æˆ‘ä»¬ä»€ä¹ˆäº‹éƒ½å¹²ä¸äº†(ç”Ÿäº§è€…é˜»å¡ž).æˆ–è€…é‚®é€’å‘˜æŒ¨å®¶æŒ¨æˆ·é—®,è°è¦å¯„ä¿¡(æ¶ˆè´¹è€…é˜»å¡ž). æ”¯æŒå¿™é—²ä¸å‡ å½“ç”Ÿäº§è€…åˆ¶é€ æ•°æ®å¿«çš„æ—¶å€™,æ¶ˆè´¹è€…æ¥ä¸åŠå¤„ç†,ä¸ºå¤„ç†çš„æ•°æ®å¯ä»¥æš‚æ—¶å­˜åœ¨ç¼“å†²åŒºä¸­,æ…¢æ…¢å¤„ç†,è€Œä¸è‡³äºŽå› ä¸ºæ¶ˆè´¹è€…çš„æ€§èƒ½è¿‡æ…¢é€ æˆæ•°æ®ä¸¢å¤±æˆ–å½±å“ç”Ÿäº§è€…ç”Ÿäº§æ•°æ®. å†æ‹¿å¯„ä¿¡çš„ä¾‹å­,å‡è®¾é‚®é€’å‘˜ä¸€æ¬¡åªèƒ½å¸¦èµ°1000å°ä¿¡,ä¸‡ä¸€ç¢°ä¸Šæƒ…äººèŠ‚æˆ–è€…å…¶ä»–çš„ç´§æ€¥ä»»åŠ¡,éœ€è¦å¯„å‡ºçš„ä¿¡è¶…è¿‡äº†1000å°,è¿™ä¸ªæ—¶å€™é‚®ç®±ä½œä¸ºç¼“å†²åŒºå°±æ´¾ä¸Šç”¨åœºäº†.é‚®é€’å‘˜æŠŠæ¥ä¸åŠå¸¦èµ°çš„ä¿¡æš‚å­˜åœ¨é‚®ç®±ä¸­,ç­‰ä¸‹æ¬¡è¿‡æ¥æ—¶åœ¨æ‹¿èµ°. ###ä½¿ç”¨ 1234567891011121314151617181920212223242526from multiprocessing import Process, Queueimport time, randomdef producer(name, food, q): for i in range(10): res = '%s %s' % (food, i) time.sleep(random.randint(1,3)) q.put(res) print('%s ç”Ÿäº§äº† %s' % (name, res)) def consumer(name, q): while True: res = q.get() time.sleep(random.randint(1,3)) print('%s æ¶ˆè´¹äº† %s' % (name, res))if __name__ == '__main__': q = Queue() p = Process(target=producer, args=('musibii', 'ðŸ”', q)) c = Process(target=consumer, args=('thales', q)) p.start() c.start() p.join() c.join() print('ä¸»è¿›ç¨‹') è¿è¡Œç»“æžœ: è¿™æ ·çš„è¯è¯¥è¿›ç¨‹å¹¶ä¸ä¼šç»“æŸ,å› ä¸º get æ–¹æ³•æ˜¯é˜»å¡žçš„,æ•°æ®æ¶ˆè´¹å®Œå°±ä¼šä¸€ç›´ç­‰å¾…çŸ¥é“ç”Ÿäº§è€…ç”Ÿäº§æ–°çš„æ•°æ®,è€Œç”Ÿäº§è€…åªèƒ½ç”Ÿäº§9ä¸ªæ•°æ®.æ‰€ä»¥ä¼šä¸€ç›´é˜»å¡ž. æ”¹è¿›ä½¿ç”¨æˆ‘ä»¬éœ€è¦åœ¨æ¶ˆè´¹è€…æ¶ˆè´¹çš„æ—¶å€™çŸ¥é“é˜Ÿåˆ—é‡Œé¢æœ‰å¤šå°‘æ•°æ®,åº”è¯¥ä»€ä¹ˆæ—¶å€™æ¶ˆè´¹å®Œäº†,æ‰€ä»¥å¯ä»¥åœ¨ç”Ÿäº§è€…é‡Œé¢ç”Ÿäº§ç»“æŸåŽæ·»åŠ ä¸€ä¸ªæ ‡å¿—,æ¯”å¦‚ None. 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061import time, randomfrom multiprocessing import Process, Queue# åˆ¶ä½œçƒ­ç‹—def make_hotdog(queue, name): for i in range(1, 4): time.sleep(random.randint(1, 2)) print("%s åˆ¶ä½œäº†ä¸€ä¸ªðŸŒ­ %s" % (name, i)) # ç”Ÿäº§å¾—åˆ°çš„æ•°æ® data = "%s ç”Ÿäº§çš„ðŸŒ­%s" % (name, i) # å­˜åˆ°é˜Ÿåˆ—ä¸­ queue.put(data) # è£…å…¥ä¸€ä¸ªç‰¹åˆ«çš„æ•°æ® å‘Šè¯‰æ¶ˆè´¹æ–¹ æ²¡æœ‰äº† # queue.put(None)# åƒçƒ­ç‹—def eat_hotdog(queue, name): while True: data = queue.get() if not data: break time.sleep(random.randint(1, 2)) print("%s åƒäº† %s" % (name, data))if __name__ == '__main__': # åˆ›å»ºé˜Ÿåˆ— q = Queue() p1 = Process(target=make_hotdog, args=(q, "musibiiçš„çƒ­ç‹—åº—")) p2 = Process(target=make_hotdog, args=(q, "egonçš„çƒ­ç‹—åº—")) p3 = Process(target=make_hotdog, args=(q, "eurekaçš„çƒ­ç‹—åº—")) c1 = Process(target=eat_hotdog, args=(q, "thales")) c2 = Process(target=eat_hotdog, args=(q, "maffia")) p1.start() p2.start() p3.start() c1.start() c2.start() # è®©ä¸»è¿›ç¨‹ç­‰ä¸‰å®¶åº—å…¨éƒ½åšå®ŒåŽ.... p1.join() p2.join() p3.join() # æ·»åŠ ç»“æŸæ ‡å¿— æ³¨æ„è¿™ç§æ–¹æ³•æœ‰å‡ ä¸ªæ¶ˆè´¹è€…å°±åŠ å‡ ä¸ªNone ä¸å¤ªåˆé€‚ ä¸æ¸…æ¥šå°†æ¥æœ‰å¤šå°‘æ¶ˆè´¹è€… q.put(None) q.put(None) # çŽ°åœ¨ éœ€è¦çŸ¥é“ä»€ä¹ˆæ—¶å€™åšå®Œçƒ­ç‹—äº† ç”Ÿäº§è€…ä¸çŸ¥é“ æ¶ˆè´¹è€…ä¹Ÿä¸çŸ¥é“ # åªæœ‰é˜Ÿåˆ—çŸ¥é“ print("ä¸»è¿›ç¨‹over") # ç”Ÿäº§æ–¹ä¸ç”Ÿäº§äº† ç„¶è€Œæ¶ˆè´¹æ–¹ä¸çŸ¥é“ æ‰€ä»¥å·²çŸ¥ç­‰å¾… getå‡½æ•°é˜»å¡ž # ä¸‰å®¶åº—éƒ½æ”¾äº†ä¸€ä¸ªç©ºè¡¨ç¤ºæ²¡çƒ­ç‹—äº† ä½†æ˜¯æ¶ˆè´¹è€…åªæœ‰ä¸¤ä¸ª ä»–ä»¬åªè¦çœ‹è§None å°±è®¤ä¸ºæ²¡æœ‰äº† # äºŽæ˜¯è¿›ç¨‹ä¹Ÿå°±ç»“æŸäº† é€ æˆä¸€äº›æ•°æ®æ²¡æœ‰è¢«å¤„ç† # ç­‰å¾…åšæœ‰åº—éƒ½åšå®Œçƒ­ç‹—åœ¨æ”¾None è¿è¡Œç»“æžœ: è¿™æ ·å°±è§£å†³äº†æœ€åˆç‰ˆæœ¬æ¶ˆè´¹ä¹‹å› ä¸ºæ²¡æœ‰æ•°æ®è€Œé˜»å¡žçš„é—®é¢˜äº†,ä½†æ˜¯è¿™é‡Œè¿˜æ˜¯æœ‰é—®é¢˜,å› ä¸ºä¸çŸ¥é“åˆ°åº•æœ‰å¤šå°‘æ¶ˆè´¹è€…,å› ä¸ºæƒ³è®©æ¶ˆè´¹è€…çŸ¥é“æ•°æ®å·²ç»ç»“æŸäº†çš„è¯,éœ€è¦ç»™æ¯ä¸ªæ¶ˆè´¹è€…ä¸€ä¸ªæ ‡å¿—ä½,è¿™æ ·æ˜¯ä¸çŽ°å®žçš„. å®Œç¾Žä½¿ç”¨python å¤šè¿›ç¨‹æ¨¡å—æä¾›äº†ä¸€ä¸ªJoinableQueueç±»,è¿½æ ¹æº¯æºç»§æ‰¿äºŽ Queue,æºç çœ‹çš„å¤´ç–¼. 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869import time, randomfrom multiprocessing import Process, JoinableQueue# åˆ¶ä½œçƒ­ç‹—def make_hotdog(queue, name): for i in range(1,4): time.sleep(random.randint(1, 2)) print("%s åˆ¶ä½œçš„ðŸŒ­ %s" % (name, i)) # ç”Ÿäº§å¾—åˆ°çš„æ•°æ® data = "%s ç”Ÿäº§çš„ðŸŒ­ %s" % (name, i) # å­˜åˆ°é˜Ÿåˆ—ä¸­ queue.put(data) # è£…å…¥ä¸€ä¸ªç‰¹åˆ«çš„æ•°æ® å‘Šè¯‰æ¶ˆè´¹æ–¹ æ²¡æœ‰äº† # queue.put(None)# åƒçƒ­ç‹—def eat_hotdog(queue, name): while True: data = queue.get() time.sleep(random.randint(1, 2)) print("%s åƒäº†%s" % (name, data)) # è¯¥å‡½æ•°å°±æ˜¯ç”¨æ¥è®°å½•ä¸€å…±ç»™æ¶ˆè´¹æ–¹å¤šå°‘æ•°æ®äº† å°±æ˜¯getæ¬¡æ•° queue.task_done()if __name__ == '__main__': # åˆ›å»ºé˜Ÿåˆ— q = JoinableQueue() p1 = Process(target=make_hotdog, args=(q, "musibiiçš„çƒ­ç‹—åº—")) p2 = Process(target=make_hotdog, args=(q, "egonçš„çƒ­ç‹—åº—")) p3 = Process(target=make_hotdog, args=(q, "eurekaçš„çƒ­ç‹—åº—")) c1 = Process(target=eat_hotdog, args=(q, "thales")) c2 = Process(target=eat_hotdog, args=(q, "maffia")) p1.start() p2.start() p3.start() # å°†æ¶ˆè´¹è€…ä½œä¸ºä¸»è¿›ç¨‹çš„å®ˆæŠ¤è¿›ç¨‹ c1.daemon = True c2.daemon = True c1.start() c2.start() # è®©ä¸»è¿›ç¨‹ç­‰ä¸‰å®¶åº—å…¨éƒ½åšå®ŒåŽ.... p1.join() p2.join() p3.join() # å¦‚ä½•çŸ¥é“ç”Ÿäº§æ–¹ç”Ÿäº§å®Œäº† å¹¶ä¸” æ¶ˆè´¹æ–¹ä¹Ÿåƒå®Œäº† # æ–¹æ³•ä¸€:ç­‰å¾…åšæœ‰åº—éƒ½åšå®Œçƒ­ç‹—åœ¨æ”¾None # # æ·»åŠ ç»“æŸæ ‡å¿— æ³¨æ„è¿™ç§æ–¹æ³•æœ‰å‡ ä¸ªæ¶ˆè´¹è€…å°±åŠ å‡ ä¸ªNone ä¸å¤ªåˆé€‚ ä¸æ¸…æ¥šå°†æ¥æœ‰å¤šå°‘æ¶ˆè´¹è€… # q.put(None) # q.put(None) # ä¸»è¿›ç¨‹ç­‰åˆ°é˜Ÿåˆ—ç»“æŸæ—¶å†ç»§ç»­ é‚£é˜Ÿåˆ—ä»€ä¹ˆæ—¶å€™ç®—ç»“æŸ? ç”Ÿäº§è€…å·²ç»ç”Ÿäº§å®Œäº† å¹¶ä¸”æ¶ˆè´¹è€…æŠŠæ•°æ®å…¨å–å®Œäº† q.join() # å·²ç»æ˜Žç¡®ç”Ÿäº§æ”¾ä¸€å…±æœ‰å¤šå°‘æ•°æ® # çŽ°åœ¨ éœ€è¦çŸ¥é“ä»€ä¹ˆæ—¶å€™åšå®Œçƒ­ç‹—äº† ç”Ÿäº§è€…ä¸çŸ¥é“ æ¶ˆè´¹è€…ä¹Ÿä¸çŸ¥é“ # åªæœ‰é˜Ÿåˆ—çŸ¥é“ print("ä¸»è¿›ç¨‹over") # ç”Ÿäº§æ–¹ä¸ç”Ÿäº§äº† ç„¶è€Œæ¶ˆè´¹æ–¹ä¸çŸ¥é“ æ‰€ä»¥ä¸€ç›´ç­‰å¾… getå‡½æ•°é˜»å¡ž # ä¸‰å®¶åº—éƒ½æ”¾äº†ä¸€ä¸ªç©ºè¡¨ç¤ºæ²¡çƒ­ç‹—äº† ä½†æ˜¯æ¶ˆè´¹è€…åªæœ‰ä¸¤ä¸ª ä»–ä»¬åªè¦çœ‹è§None å°±è®¤ä¸ºæ²¡æœ‰äº† # äºŽæ˜¯è¿›ç¨‹ä¹Ÿå°±ç»“æŸäº† é€ æˆä¸€äº›æ•°æ®æ²¡æœ‰è¢«å¤„ç† è¿è¡Œç»“æžœ: æŸ¥çœ‹ JoinableQueue ç±»æ–¹æ³• task_done æºç : çœ‹ä¸æ‡‚â€¦â€¦â€¦]]></content>
      <categories>
        <category>å¹¶å‘ç¼–ç¨‹</category>
      </categories>
  </entry>
  <entry>
    <title><![CDATA[å¹¶å‘ç¼–ç¨‹ï¼ˆå››ï¼‰]]></title>
    <url>%2F2018%2F11%2F17%2F%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B-%E5%9B%9B%2F</url>
    <content type="text"><![CDATA[å‰è¨€ä¸Šç¯‡åšå®¢ä»‹ç»äº†è¿›ç¨‹çš„åˆ›å»º,è¿›ç¨‹çš„ç›¸å…³å±žæ€§ä»¥åŠä¸‰ç§ç‰¹æ®Šè¿›ç¨‹:åƒµå°¸è¿›ç¨‹,å­¤å„¿è¿›ç¨‹å’Œå®ˆæŠ¤è¿›ç¨‹. å®ˆæŠ¤è¿›ç¨‹æ˜¯ä¸€ä¸ªåœ¨åŽå°è¿è¡Œå¹¶ä¸”ä¸å—ä»»ä½•ç»ˆç«¯æŽ§åˆ¶çš„è¿›ç¨‹,ç”¨äºŽæ‰§è¡Œç‰¹å®šçš„ç³»ç»Ÿä»»åŠ¡.å¾ˆå¤šå®ˆæŠ¤è¿›ç¨‹åœ¨ç³»ç»Ÿå¼•å¯¼çš„æ—¶å€™å¯åŠ¨,å¹¶ä¸”ä¸€ç›´è¿è¡Œç›´åˆ°ç³»ç»Ÿå…³é—­.å¦ä¸€äº›åªåœ¨éœ€è¦çš„æ—¶å€™æ‰å¯åŠ¨,å®Œæˆä»»åŠ¡åŽå°±è‡ªåŠ¨ç»“æŸ. æœ¬ç¯‡åšå®¢è¯¦ç»†ä»‹ç»å®ˆæŠ¤è¿›ç¨‹çš„äº§ç”ŸåŽŸå› ä»¥åŠä½œç”¨.(å› ä¸ºæˆ‘è§‰å¾—å®ˆæŠ¤è¿›ç¨‹å¯¹æ“ä½œç³»ç»Ÿçš„æ­£å¸¸è¿è¡Œè¿˜è›®é‡è¦çš„) å®ˆæŠ¤è¿›ç¨‹ä»‹ç»ä»¥ä¸‹ä»‹ç»æ‘˜è‡ªç™¾åº¦ç™¾ç§‘ å®ˆæŠ¤è¿›ç¨‹æ˜¯ä¸€ä¸ªåœ¨åŽå°è¿è¡Œå¹¶ä¸”ä¸å—ä»»ä½•ç»ˆç«¯æŽ§åˆ¶çš„è¿›ç¨‹. Unix æ“ä½œç³»ç»Ÿæœ‰å¾ˆå¤šå…¸åž‹çš„å®ˆæŠ¤è¿›ç¨‹,ä»–ä»¬åœ¨åŽå°è¿è¡Œ,æ‰§è¡Œä¸åŒçš„ç®¡ç†ä»»åŠ¡. ç”¨æˆ·ä½¿å®ˆæŠ¤è¿›ç¨‹ç‹¬ç«‹äºŽæ‰€æœ‰ç»ˆç«¯æ˜¯å› ä¸º,åœ¨å®ˆæŠ¤è¿›ç¨‹ä»Žä¸€ä¸ªç»ˆç«¯å¯åŠ¨çš„æƒ…å†µä¸‹,è¿™åŒä¸€ä¸ªç»ˆç«¯å¯èƒ½è¢«å…¶ä»–çš„ç”¨æˆ·ä½¿ç”¨.ä¾‹å¦‚,ç”¨æˆ·ä»Žä¸€ä¸ªç»ˆç«¯å¯åŠ¨å®ˆæŠ¤è¿›ç¨‹åŽé€€å‡º,ç„¶åŽå¦ä¸€ä¸ªäººä¹Ÿç™»é™†åˆ°è¿™ä¸ªç»ˆç«¯.ç”¨æˆ·ä¸å¸Œæœ›åŽè€…åœ¨ä½¿ç”¨è¯¥ç»ˆç«¯çš„è¿‡ç¨‹ä¸­,æŽ¥æ”¶åˆ°å®ˆæŠ¤è¿›ç¨‹çš„ä»»ä½•é”™è¯¯ä¿¡æ¯.åŒæ ·,ç”±ç»ˆç«¯é”®å…¥çš„ä»»ä½•ä¿¡å·(ä¾‹å¦‚ä¸­æ–­ä¿¡å·)ä¹Ÿä¸åº”è¯¥å½±å“å…ˆå‰åœ¨è¯¥ç»ˆç«¯å¯åŠ¨çš„ä»»ä½•å®ˆæŠ¤è¿›ç¨‹çš„è¿è¡Œ.è™½ç„¶è®©æœåŠ¡å™¨åŽå°è¿è¡Œå¾ˆå®¹æ˜“(åªè¦shell å‘½ä»¤è¡Œä»¥&amp;ç»“å°¾),ä½†ç”¨æˆ·è¿˜åº”è¯¥åšäº›å·¥ä½œ,è®©ç¨‹åºæœ¬èº«èƒ½å¤Ÿè‡ªåŠ¨è¿›å…¥åŽå°,ä¸”ä¸ä¾èµ–äºŽä»»ä½•ç»ˆç«¯. å®ˆæŠ¤è¿›ç¨‹æ²¡æœ‰æŽ§åˆ¶ç»ˆç«¯,å› æ­¤å½“æŸäº›æƒ…å†µå‘ç”Ÿæ—¶,ä¸ç®¡æ˜¯ä¸€èˆ¬çš„æŠ¥å‘Šæ€§ä¿¡æ¯,è¿˜æ˜¯ç”±ç®¡ç†å‘˜å¤„ç†çš„ç´§æ€¥ä¿¡æ¯,éƒ½éœ€è¦ä»¥æŸç§æ–¹å¼è¾“å‡º. Syslog å‡½æ•°å°±æ˜¯è¾“å‡ºè¿™äº›ä¿¡æ¯çš„æ ‡å‡†æ–¹æ³•,å®ƒæŠŠä¿¡æ¯å‘é€ç»™ syslogd å®ˆæŠ¤è¿›ç¨‹. åˆ›å»ºå®ˆæŠ¤è¿›ç¨‹æ­¥éª¤åœ¨ä¸åŒ UnixçŽ¯å¢ƒä¸‹,å®ˆæŠ¤è¿›ç¨‹çš„å…·ä½“å˜æˆç»†èŠ‚å¹¶ä¸ä¸€è‡´.ä½†æ‰€å¹¸çš„æ˜¯,å®ˆæŠ¤è¿›ç¨‹çš„ç¼–ç¨‹åŽŸåˆ™éƒ½ä¸€æ ·,åŒºåˆ«ä»…åœ¨äºŽå…·ä½“çš„å®žçŽ°ç»†èŠ‚ä¸åŒ,è¿™ä¸ªåŽŸåˆ™å°±æ˜¯è¦æ»¡è¶³å®ˆæŠ¤è¿›ç¨‹çš„ç‰¹æ€§.ç¼–ç¨‹è§„åˆ™å¦‚ä¸‹: åœ¨åŽå°è¿è¡Œä¸ºé¿å…æŒ‚èµ·æŽ§åˆ¶ç»ˆç«¯,è¦å°†å®ˆæŠ¤è¿›ç¨‹æ”¾å…¥åŽå°è¿è¡Œ,å…¶æ–¹æ³•æ˜¯åœ¨çˆ¶è¿›ç¨‹ä¸­è°ƒç”¨ fork ä½¿çˆ¶è¿›ç¨‹ç»ˆæ­¢,è®©å­è¿›ç¨‹åœ¨åŽå°æ‰§è¡Œ,ä½¿å¾—ç¨‹åºåœ¨ shell ç»ˆç«¯é‡Œé€ æˆä¸€ä¸ªå·²ç»è¿è¡Œå®Œæ¯•çš„å‡è±¡.ä¹‹åŽæ‰€æœ‰çš„å·¥ä½œéƒ½åœ¨å­è¿›ç¨‹ä¸­å®Œæˆ,è€Œç”¨æˆ·åœ¨ shell ç»ˆç«¯é‡Œåˆ™å¯ä»¥æ‰§è¡Œå…¶ä»–å‘½ä»¤,ä»Žè€Œä½¿å¾—ç¨‹åºä»¥åƒµå°¸è¿›ç¨‹è¿è¡Œ,åœ¨å½¢å¼ä¸Šåšåˆ°äº†ä¸ŽæŽ§åˆ¶ç»ˆç«¯çš„éš”ç¦».å…·ä½“å°±æ˜¯ fork äº§ç”Ÿå­è¿›ç¨‹åŽ,è°ƒç”¨ exit ä½¿çˆ¶è¿›ç¨‹ç»ˆæ­¢. è„±ç¦»æŽ§åˆ¶ç»ˆç«¯,ç™»é™†ä¼šè¯å’Œè¿›ç¨‹ç»„ç™»é™†å›žè¯å¯ä»¥åŒ…å«å¤šä¸ªè¿›ç¨‹ç»„,è¿™äº›è¿›ç¨‹ç»„å…±äº«ä¸€ä¸ªæŽ§åˆ¶ç»ˆç«¯,è¿™ä¸ªæŽ§åˆ¶ç»ˆç«¯é€šå¸¸æ˜¯åˆ›å»ºè¿›ç¨‹çš„ç™»é™†ç»ˆç«¯,æŽ§åˆ¶ç»ˆç«¯,ç™»é™†å›žè¯å’Œè¿›ç¨‹ç»„é€šå¸¸éƒ½æ˜¯ä»Žçˆ¶è¿›ç¨‹ç»§æ‰¿ä¸‹æ¥çš„.ç›®çš„å°±æ˜¯è¦è„±ç¦»è¿™äº›ç»§æ‰¿çš„ä¸œè¥¿,ä¸å—å®ƒä»¬çš„å½±å“. è¿™å°±è¦ä½¿ç”¨ setsid å‡½æ•°ä½¿è¿›ç¨‹æˆä¸ºä¼šè¯ç»„é•¿. setsid setsid å‘½ä»¤ å­è¿›ç¨‹ä»Žçˆ¶è¿›ç¨‹ç»§æ‰¿äº†: Session ID, è¿›ç¨‹ç»„ ID åˆæ‰“å¼€çš„ç»ˆç«¯.å­è¿›ç¨‹å¦‚æžœè¦è„±ç¦»è¿™äº›,ä»£ç ä¸­å¯é€šè¿‡è°ƒç”¨ setsid æ¥å®žçŽ°.è€Œå‘½ä»¤è¡Œæˆ–è„šæœ¬ä¸­å¯ä»¥é€šè¿‡å‘½ä»¤setsid æ¥å®žçŽ°. setsid å¸®åŠ©ä¸€ä¸ªè¿›ç¨‹è„±ç¦»ä»Žçˆ¶è¿›ç¨‹ç»§æ‰¿è€Œæ¥çš„å·²æ‰“å¼€çš„ç»ˆç«¯,ä¼šè¯å’Œè¿›ç¨‹ç»„. éœ€è¦è¯´æ˜Žçš„æ˜¯,å½“è¿›ç¨‹æ˜¯ä¼šè¯ç»„é•¿æ—¶, setsid è°ƒç”¨ä¼šå¤±è´¥,å¤§ç¬¬ä¸€ç‚¹å·²ç»ä¿è¯è¿›ç¨‹ä¸æ˜¯ä¼šè¯ç»„é•¿.setsid è°ƒç”¨æˆåŠŸåŽ,è¿›ç¨‹ä¼šæˆä¸ºæ–°çš„ä¼šè¯ç»„é•¿å’Œæ–°çš„è¿›ç¨‹ç»„é•¿,å¹¶ä¸ŽåŽŸæ¥çš„ç™»é™†ä¼šè¯å’Œè¿›ç¨‹ç»„è„±ç¦»,ç”±äºŽä¼šè¯è¿‡ç¨‹å¯¹æŽ§åˆ¶ç»ˆç«¯çš„ç‹¬å æ€§,è¿›ç¨‹åŒæ—¶ä¸ŽæŽ§åˆ¶ç»ˆç«¯è„±ç¦». å…·ä½“æ“ä½œå°±æ˜¯: æˆä¸ºæ–°ä¼šè¯çš„é¦–è¿›ç¨‹; æˆä¸ºä¸€ä¸ªæ–°è¿›ç¨‹ç»„çš„é¦–è¿›ç¨‹; æ²¡æœ‰æŽ§åˆ¶ç»ˆç«¯. ç¦æ­¢è¿›ç¨‹é‡æ–°æ‰“å¼€æŽ§åˆ¶ç»ˆç«¯çŽ°åœ¨è¿›ç¨‹å·²ç»æˆä¸ºæ— ç»ˆç«¯çš„ä¼šè¯ç»„é•¿,ä½†å®ƒå¯ä»¥é‡æ–°ç”³è¯·æ‰“å¼€ä¸€ä¸ªæŽ§åˆ¶ç»ˆç«¯.å¯ä»¥é€šè¿‡æ˜¯è¿›ç¨‹ä¸å†æˆä¸ºä¼šè¯ç»„é•¿æ¥ç¦æ­¢è¿›ç¨‹é‡æ–°æ‰“å¼€æŽ§åˆ¶ç»ˆç«¯. å…³é—­æ‰“å¼€çš„æ–‡ä»¶æè¿°ç¬¦è¿›ç¨‹ä»Žåˆ›å»ºå®ƒçš„çˆ¶è¿›ç¨‹é‚£é‡Œç»§æ‰¿äº†æ‰“å¼€çš„æ–‡ä»¶æè¿°ç¬¦.å¦‚æžœä¸å…³é—­,ä¼šé€ æˆèµ„æºæµªç»™,é€ æˆè¿›ç¨‹æ‰€åœ¨åœ°æ–‡ä»¶ç³»ç»Ÿæ— æ³•å¸ä¸‹ä»¥åŠäº§ç”Ÿæ— æ³•é¢„æ–™çš„é”™è¯¯.ä¸€èˆ¬æ¥è¯´,å¿…è¦çš„æ˜¯å…³é—­0,1,2ä¸‰ä¸ªæ–‡ä»¶æè¿°ç¬¦,å³æ ‡å‡†è¾“å…¥,æ ‡å‡†è¾“å‡º,æ ‡å‡†é”™è¯¯.å› ä¸ºä¸€èˆ¬å¸Œæœ›å®ˆæŠ¤è¿›ç¨‹è‡ªå·±æœ‰ä¸€å¥—ä¿¡æ¯è¾“å‡º,è¾“å…¥çš„ä½“ç³»,è€Œä¸æ˜¯æŠŠæ‰€æœ‰çš„ä¸œè¥¿éƒ½å‘é€åˆ°ç»ˆç«¯å±å¹•ä¸Š.æ‰€ä»¥éœ€è¦è°ƒç”¨ fclose æ¥å…³é—­æ–‡ä»¶æè¿°ç¬¦. æ”¹å˜å½“å‰å·¥ä½œç›®å½•å°†å½“å‰å·¥ä½œç›®å½•æ›´æ”¹ä¸ºæ ¹ç›®å½•,ä»Žçˆ¶è¿›ç¨‹ç»§æ‰¿è¿‡æ¥çš„å½“å‰å·¥ä½œç›®å½•å¯èƒ½åœ¨ä¸€ä¸ªè£…é…çš„æ–‡ä»¶ç³»ç»Ÿä¸­.å› ä¸ºå®ˆæŠ¤è¿›ç¨‹é€šå¸¸åœ¨ç³»ç»Ÿå¼•å¯¼ä¹‹å‰æ˜¯ä¸€ç›´å­˜åœ¨çš„,æ‰€ä»¥å¦‚æžœå®ˆæŠ¤è¿›ç¨‹çš„å½“å‰å·¥ä½œç›®å½•åœ¨ä¸€ä¸ªè£…é…æ–‡ä»¶ç³»ç»Ÿä¸­,é‚£ä¹ˆè¯¥æ–‡ä»¶ç³»ç»Ÿå°±ä¸èƒ½è¢«æ‹†å¸. å¦å¤–,æŸäº›å®ˆæŠ¤è¿›ç¨‹å¯èƒ½ä¼šæŠŠå½“å‰å·¥ä½œç›®å½•æ›´æ”¹åˆ°æŸä¸ªæŒ‡å®šä½ç½®,åœ¨æ­¤ä½ç½®åšå®ƒä»¬çš„å·¥ä½œ.ä¾‹å¦‚,è¡Œå¼æ‰“å°æœºå®ˆæŠ¤è¿›ç¨‹å¸¸å¸¸å°†å·¥ä½œç›®å½•æ›´æ”¹åˆ° spool ç›®å½•ä¸Š.å¯ä»¥è°ƒç”¨ chdir æ›´æ”¹å·¥ä½œç›®å½•. é‡è®¾æ–‡ä»¶åˆ›å»ºæŽ©ç æ–‡ä»¶åˆ›å»ºæŽ©ç æ˜¯æŒ‡å±è”½æŽ‰æ–‡ä»¶åˆ›å»ºæ—¶çš„å¯¹åº”ä¸º.ç”±äºŽä½¿ç”¨ fork åŽå‡½æ•°æ–°å»ºçš„å­è¿›ç¨‹ç»§æ‰¿äº†çˆ¶è¿›ç¨‹çš„æ–‡ä»¶åˆ›å»ºæŽ©ç ,è¿™å°±ç»™è¯¥å­è¿›ç¨‹ä½¿ç”¨æ–‡ä»¶å¸¦æ¥äº†è¯¸å¤šéº»çƒ¦.å› æ­¤,æŠŠæ–‡ä»¶åˆ›å»ºæŽ©ç è®¾ç½®ä¸º0,å¯ä»¥å¤§å¤§å¢žå¼ºè¯¥å®ˆæŠ¤è¿›ç¨‹çš„çµæ´»æ€§.è®¾ç½®æ–‡ä»¶åˆ›å»ºæŽ©ç çš„å‡½æ•°æ˜¯ umask, é€šå¸¸çš„ä½¿ç”¨æ–¹æ³•ä¸ºumask(0). å¤„ç† SIGCHLD ä¿¡å·å¤„ç† SIGCHLD ä¿¡å·å¹¶ä¸æ˜¯å¿…éœ€çš„.ä½†æ˜¯å¯¹äºŽæŸäº›å®ˆæŠ¤è¿›ç¨‹,ç‰¹åˆ«æ˜¯æœåŠ¡å™¨è¿›ç¨‹å¾€å¾€åœ¨è¯·æ±‚åˆ°æ¥æ—¶ç”Ÿäº§å­è¿›ç¨‹å‡ºæ¥è¯·æ±‚.å¦‚æžœçˆ¶è¿›ç¨‹ä¸ç­‰å¾…å­è¿›ç¨‹ç»“æŸ,å­è¿›ç¨‹å°†æˆä¸ºåƒµå°¸è¿›ç¨‹è€Œå ç”¨ç³»ç»Ÿèµ„æº.å¦‚æžœçˆ¶è¿›ç¨‹ç­‰å¾…å­è¿›ç¨‹ç»“æŸ,å°†å¢žåŠ çˆ¶è¿›ç¨‹çš„è´Ÿæ‹…,å½±å“æœåŠ¡å™¨è¿›ç¨‹çš„å¹¶å‘æ€§èƒ½.åœ¨ç³»ç»Ÿä¸‹å¯ä»¥ç®€å•çš„å°† SIGCHLD ä¿¡å·çš„æ“ä½œè®¾ä¸º SIG-IGN: signal(SIGCHLD,SIG_IGN) è¿™æ ·,å†…æ ¸åœ¨å­è¿›ç¨‹ç»“æŸåŽä¸ä¼šäº§ç”Ÿåƒµå°¸è¿›ç¨‹,è¿™ä¸€ç‚¹ä¸Ž BSD4ä¸åŒ,æ‚ iBSD4ä¸‹å¿…é¡»æ˜¾å¼ç­‰å¾…å­è¿›ç¨‹ç»“æŸåŽæ‰èƒ½é‡Šæ”¾åƒµå°¸è¿›ç¨‹. #pythonå®ˆæŠ¤è¿›ç¨‹ 12345678910111213141516171819202122232425262728293031323334353637import timeimport osimport sysdef initDaemon(stdoutfd, stderrfd=None, basePath=None): ''' åˆå§‹åŒ–ä¸º daemon è¿›ç¨‹ ''' basePath = '/' if basePath is None else basePath curTimeStr = time.strftime('%Y-%m-%d %H:%M:%S') try: stdoutfd.write('Start on %s, ' % curTimeStr) stdoutfd.flush() except: raise try: if os.fork() &gt; 0: os._exit(0) except OSError: raise OSError('fork error') os.chdir(basePath) os.setsid() sys.stdout = stdoutfd sys.stderr = stdoutfd if stderrfd is None else stderrfd sys.stdin = open('/dev/nu,,', 'r') try: if os.fork() &gt; 0: os._exit(0) except OSError: raise OSError('fork 2 error') pid = int(os.getpid()) stdoutfd.write('pid=%s\n' % pid) stdoutfd.flush() return ##å®ˆæŠ¤è¿›ç¨‹è¿è¡Œæ–¹å¼ ç‹¬ç«‹è¿è¡Œçš„å®ˆæŠ¤è¿›ç¨‹ç‹¬ç«‹è¿è¡Œçš„å®ˆæŠ¤è¿›ç¨‹æœ‰ init è„šæœ¬è´Ÿè´£ç®¡ç†,æ‰€æœ‰ç‹¬ç«‹è¿è¡Œçš„å®ˆæŠ¤è¿›ç¨‹çš„è„šæœ¬åœ¨/etc/rcå’Œ/etc/init.d ç›®å½•ä¸‹.ç³»ç»ŸæœåŠ¡éƒ½æ˜¯ç‹¬ç«‹è¿è¡Œçš„å®ˆæŠ¤è¿›ç¨‹åŒ…æ‹¬ syslogd å’Œ cron ç­‰.æœåŠ¡å™¨ç›‘å¬ä¸€ä¸ªç‰¹å®šçš„ç«¯å£ä¸Šç­‰å¾…å®¢æˆ·ç«¯çš„è¿žæŽ¥.å¦‚æžœå®¢æˆ·ç«¯äº§ç”Ÿä¸€ä¸ªè¿žæŽ¥è¯·æ±‚,å®ˆæŠ¤è¿›ç¨‹å°±åˆ›å»ºä¸€ä¸ªå­æœåŠ¡å™¨å“åº”è¿™ä¸ªè¿žæŽ¥,è€Œä¸»æœåŠ¡å™¨ç»§ç»­ç›‘å¬.ä»¥ä¿æŒå¤šä¸ªå­æœåŠ¡å™¨æ± ç­‰å¾…ä¸‹ä¸€ä¸ªå®¢æˆ·ç«¯è¯·æ±‚è¿žæŽ¥. ç”± xinetd ç®¡ç†çš„å®ˆæŠ¤è¿›ç¨‹ä»Žå®ˆæŠ¤è¿›ç¨‹çš„æ¦‚å¿µå¯ä»¥çœ‹å‡º,ç³»ç»Ÿæ‰€è¿è¡Œçš„æ¯ä¸€ç§æœåŠ¡,éƒ½å¿…é¡»è¿è¡Œä¸€ä¸ªç›‘å¬æŸä¸ªç«¯å£è¿žæŽ¥æ‰€å‘ç”Ÿçš„å®ˆæŠ¤è¿›ç¨‹,è¿™é€šå¸¸æ„å‘³ç€èµ„æºæµªè´¹.ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜, Linux å¼•è¿›äº†â€™ç½‘ç»œå®ˆæŠ¤è¿›ç¨‹æœåŠ¡ç¨‹åºâ€™çš„æ¦‚å¿µ. CentOS6.4ä½¿ç”¨çš„ç½‘ç»œå®ˆæŠ¤è¿›ç¨‹æ˜¯ xinted(eXtendedInterNET services daemon). ä¸Šå›¾æ˜¯ ubuntu18.04ä½¿ç”¨çš„ç½‘ç»œå®ˆæŠ¤è¿›ç¨‹æœåŠ¡ç¨‹åº, xinted èƒ½å¤ŸåŒæ—¶ç›‘å¬å¤šä¸ªæŒ‡å®šçš„ç«¯å£,åœ¨æŽ¥å—ç”¨æˆ·è¯·æ±‚æ—¶,å®ƒèƒ½å¤Ÿæ ¹æ®ç”¨æˆ·è¯·æ±‚çš„ç«¯å£ä¸åŒ,å¯åŠ¨ä¸åŒçš„ç½‘ç»œæœåŠ¡è¿›ç¨‹æ¥å¤„ç†è¿™äº›ç”¨æˆ·è¯·æ±‚.å¯ä»¥æŠŠ xinted çœ‹åšä¸€ä¸ªç®¡ç†å¯åŠ¨æœåŠ¡çš„ç®¡ç†æœåŠ¡å™¨,å®ƒå†³å®šæŠŠä¸€ä¸ªå®¢æˆ·è¯·æ±‚äº¤ç»™é‚£ä¸ªç¨‹åºå¤„ç†,ç„¶åŽå¯åŠ¨ç›¸åº”çš„å®ˆæŠ¤è¿›ç¨‹. ##å®ˆæŠ¤è¿›ç¨‹åˆ†ç±» æŒ‰ç…§æœåŠ¡ç±»åž‹åˆ†ä¸ºå¦‚ä¸‹å‡ ä¸ª: ç³»ç»Ÿå®ˆæŠ¤è¿›ç¨‹: syslogd,login,crond,at ç­‰ ç½‘ç»œå®ˆæŠ¤è¿›ç¨‹: sendmail,httpd,xinetd ç­‰ ç‹¬ç«‹å¯åŠ¨çš„å®ˆæŠ¤è¿›ç¨‹: httpd,named,xinetd ç­‰ è¢«åŠ¨å®ˆæŠ¤è¿›ç¨‹(ç”± xinetd å¯åŠ¨):telnet,finger,ktalk ç­‰ pythonå®ˆæŠ¤è¿›ç¨‹ä½¿ç”¨12345678910111213from multiprocessing import Processimport timedef task(): time.sleep(3) print('å­è¿›ç¨‹') if __name__ == '__main__': p = Process(target=task) # å°†è¯¥è¿›ç¨‹è®¾ä¸ºçˆ¶è¿›ç¨‹çš„å®ˆæŠ¤è¿›ç¨‹ p.daemon = True p.start() print('ä¸»è¿›ç¨‹') æ³¨æ„ è®¾ç½®å®ˆæŠ¤è¿›ç¨‹å¿…é¡»åœ¨å¯åŠ¨è¿›ç¨‹ä¹‹å‰æ‰§è¡Œ. æ€»ç»“å¯¹äºŽä¸€ä¸ªæ“ä½œç³»ç»Ÿæ¥è¯´,ä¸ºäº†æ‰§è¡Œä¸åŒçš„ç®¡ç†ä»»åŠ¡,éœ€è¦å®ˆæŠ¤è¿›ç¨‹æ¥ååŠ©ç®¡ç†.å¯¹äºŽå®ˆæŠ¤è¿›ç¨‹æœ€é‡è¦çš„æ¥è¯´æ˜¯éœ€è¦åœ¨åŽå°è¿è¡Œ.å…¶æ¬¡,å®ˆæŠ¤è¿›ç¨‹å¿…é¡»ä¸Žå…¶è¿è¡Œå‰çš„çŽ¯å¢ƒéš”ç¦»å¼€æ¥.è¿™äº›çŽ¯å¢ƒåŒ…æ‹¬æœªå…³é—­çš„æ–‡ä»¶æè¿°ç¬¦,æŽ§åˆ¶ç»ˆç«¯,ä¼šè¯å’Œè¿›ç¨‹ç»„,å·¥ä½œç›®å½•ä»¥åŠæ–‡ä»¶åˆ›å»ºæŽ©ç ç­‰.è¿™äº›çŽ¯å¢ƒé€šå¸¸æ˜¯å®ˆæŠ¤è¿›ç¨‹ä»Žæ‰§è¡Œå®ƒçš„çˆ¶è¿›ç¨‹(ç‰¹åˆ«æ˜¯ shell)ç»§æ‰¿ä¸‹æ¥çš„.æœ€åŽå®ˆæŠ¤è¿›ç¨‹çš„å¯åŠ¨æ–¹å¼æœ‰å…¶ç‰¹æ®Šä¹‹å¤„.å®ƒå¯ä»¥åœ¨ Linux ç³»ç»Ÿå¯åŠ¨æ—¶ä»Žå¯åŠ¨è„šæœ¬/etc/rc. dä¸­å¯åŠ¨,ä¹Ÿå¯ä»¥ç”±ä½œä¸šæŽ§åˆ¶è¿›ç¨‹ crond å¯åŠ¨,è¿˜å¯ä»¥ç”±ç”¨æˆ·ç»ˆç«¯(é€šå¸¸æ˜¯ shell)æ‰§è¡Œ. é™¤è¿™å‡ ç‚¹ä¹‹å¤–,å®ˆæŠ¤è¿›ç¨‹ä¸Žæ™®é€šè¿›ç¨‹åŸºæœ¬ä¸Šæ²¡ä»€ä¹ˆåŒºåˆ«.å› æ­¤,ç¼–å†™å®ˆæŠ¤è¿›ç¨‹å®žé™…ä¸Šæ˜¯æŠŠä¸€ä¸ªæ™®é€šè¿›ç¨‹æŒ‰ç…§ä¸Šè¿°çš„å®ˆæŠ¤è¿›ç¨‹çš„ç‰¹æ€§æ”¹é€ æˆä¸ºå®ˆæŠ¤è¿›ç¨‹.]]></content>
      <categories>
        <category>å¹¶å‘ç¼–ç¨‹</category>
      </categories>
  </entry>
  <entry>
    <title><![CDATA[å¹¶å‘ç¼–ç¨‹ï¼ˆä¸‰ï¼‰]]></title>
    <url>%2F2018%2F11%2F16%2F%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B-%E4%B8%89%2F</url>
    <content type="text"><![CDATA[å‰è¨€ç»è¿‡å‰ä¸€ç¯‡åšå®¢çš„å­¦ä¹ äº†è§£äº† Unix å’Œ Windows ç³»ç»Ÿåˆ›å»ºè¿›ç¨‹çš„æ–¹å¼äº†,å¯¹äºŽ Unixç³»ç»Ÿæ¥è¯´,ä¼šæŠŠçˆ¶è¿›ç¨‹çš„æ•°æ®ç›´æŽ¥æ‹·è´ä¸€ä»½åˆ°å­è¿›ç¨‹çš„å†…å­˜ç©ºé—´;è€Œ Windows ç³»ç»Ÿä¼šé‡æ–°åŠ è½½ä¸€éçˆ¶è¿›ç¨‹çš„ä»£ç . é‚£ä¹ˆåœ¨ python ä¸­æ€Žä¹ˆåˆ›å»ºè¿›ç¨‹å‘¢?å…¶å®žä¹Ÿæ˜¯è°ƒç”¨äº†æ“ä½œç³»ç»Ÿæä¾›çš„æŽ¥å£,åƒ Unix æ˜¯ fork æŽ¥å£, Windows æ˜¯ CreateProcess æŽ¥å£. python è¿›ç¨‹Process æºç æŽ¢æžé¦–å…ˆä¸ç®¡æ€Žä¹ˆåˆ›å»ºè¿›ç¨‹éƒ½æ˜¯è°ƒç”¨äº†ä¸€ä¸ªmultiprocessingæ¨¡å—é‡Œé¢çš„ Process ç±»,å­¦ä¹ ä¸€ä¸ªæ¨¡å—ç¬¬ä¸€ä»¶äº‹å°±æ˜¯æŸ¥çœ‹æºç .(ps: å¯¹æˆ‘æ¥è¯´çœ‹æºç å¾ˆçˆ½ðŸ˜‹)å› ä¸º python3çœ‹ä¸åˆ°æºç ,æ‰€ä»¥ç”¨ python2å¯ä»¥çœ‹åˆ°: ç¿»è¯‘ Process ç±»çš„æ³¨é‡Š:è¿›ç¨‹å¯¹è±¡è¡¨ç¤ºåœ¨éš”å¼€çš„è¿›ç¨‹ä¸­è¿è¡Œçš„æ´»åŠ¨,è¿™ä¸ªç±»å’Œ threading.Thread åŒä¹‰.(å› ä¸ºæœ€å¼€å§‹çš„è®¡ç®—æœºéƒ½æ˜¯å•æ ¸,å¤šè¿›ç¨‹æ˜¯åŽé¢æ‰å‡ºæ¥çš„) é‚£ä¹ˆå¾ˆæ˜¾ç„¶,å› ä¸º Process æ˜¯ä¸ªç±»,é‚£ä¹ˆæƒ³è¦åˆ›å»ºä¸€ä¸ªè¿›ç¨‹å°±æ˜¯å®žä¾‹åŒ–ä¸€ä¸ª Process ç±»çš„å¯¹è±¡.æŸ¥çœ‹ initæ–¹æ³•: å“‡,å‚æ•°å¥½å¤šå•Š,ä¸è¿‡å¤§éƒ¨åˆ†éƒ½å¯ä»¥ä½¿ç”¨é»˜è®¤å€¼,ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯ group, çœ‹åŽé¢æœ‰ä¸€å¥æ³¨é‡Š: group å‚æ•°å½“å‰å¿…é¡»ä¸º None, å¥½äº†å¯ä»¥ä¸ç”¨ç†ä¼šäº†;ç¬¬äºŒä¸ªå‚æ•°å¾ˆé‡è¦,è¡¨ç¤ºåˆ›å»ºçš„è¿›ç¨‹å°†è¦è¿›è¡Œçš„ä»»åŠ¡,å¿…é¡»è¦ä¼ å‚æ•°(å‡½æ•°å);ç¬¬ä¸‰ä¸ªæ˜¯åå­—,å¯ä»¥è‡ªå®šä¹‰è¿›ç¨‹å;ç¬¬å››ä¸ªæ˜¯å¯å˜é•¿å‚æ•°,å‚æ•°ä¼šåœ¨åˆ›å»ºè¿›ç¨‹çš„æ—¶å€™ä¼ è¿› target ä¸­;ç¬¬äº”ä¸ªä¸ºå…³é”®è¯å‚æ•°,ä¹Ÿæ˜¯ç»™ target ä¼ çš„. 1assert group is None æ–­è¨€,åªæœ‰è¯¥è¡¨è¾¾å¼å€¼ä¸º True æ‰ä¼šè¿è¡Œä¸‹é¢çš„ä»£ç .å¾ˆæ˜¾ç„¶ä¸ç”¨ç®¡å°±è¡Œ. ç„¶åŽä¸‹é¢çš„éƒ½æ˜¯ä¸€äº›ç±»å±žæ€§,éœ€è¦å…³æ³¨çš„æ˜¯ self._target,sekf._popen. æŸ¥çœ‹ process æ¨¡å—çš„æ³¨é‡Š: ç¿»è¯‘å¯çŸ¥: æ¨¡å—æä¾› Process ç±»æ˜¯æ¨¡æ‹ŸäºŽâ€™ threading.Threadâ€™ å†åˆ†é…å’Œä½¿ç”¨çš„æºä»£ç å’ŒäºŒè¿›åˆ¶å½¢å¼ï¼Œæ— è®ºæœ‰æ— ä¿®æ”¹,ä½†å¿…é¡»ç¬¦åˆä¸‹åˆ—çš„æƒ…å†µ: 1.æºä»£ç çš„å†åˆ†å‘å¿…é¡»ä¿ç•™ä¸Šè¿°ç‰ˆæƒå£°æ˜Žï¼Œæ­¤æ¡ä»¶åˆ—è¡¨å’Œä»¥ä¸‹å…è´£å£°æ˜Žã€‚ 2.äºŒè¿›åˆ¶å½¢å¼çš„å†åˆ†å‘å¿…é¡»åœ¨éšåˆ†å‘æä¾›çš„æ–‡æ¡£å’Œ/æˆ–å…¶ä»–ææ–™ä¸­å¤åˆ¶ä¸Šè¿°ç‰ˆæƒå£°æ˜Žï¼Œæ­¤æ¡ä»¶åˆ—è¡¨å’Œä»¥ä¸‹å…è´£å£°æ˜Žã€‚ 3.æœªç»äº‹å…ˆä¹¦é¢è®¸å¯ï¼Œä¸å¾—ä½¿ç”¨ä½œè€…å§“åæˆ–ä»»ä½•è´¡çŒ®è€…çš„å§“åæ¥è®¤å¯æˆ–å®£ä¼ æœ¬è½¯ä»¶è¡ç”Ÿçš„äº§å“ã€‚(ps: è¿™æ³¨é‡Šæ€Žä¹ˆå’Œ process ä¸€ç‚¹å…³ç³»æ²¡æœ‰ðŸ˜²) å¼€å¯è¿›ç¨‹çš„ä¸¤ç§æ–¹å¼ å®žä¾‹åŒ– Process ç±» åˆ›å»ºä¸€ä¸ªå­è¿›ç¨‹çš„ demo å¦‚ä¸‹: 123456789from multiprocessing import Process,current_processdef task(): print('å­', current_process) if __name__ == '__main__': p = Process(target=task) p.start() # å¯åŠ¨ä¸€ä¸ªè¿›ç¨‹ print('ä¸»', current_process) æ³¨æ„:åˆ›å»ºè¿›ç¨‹çš„ä»£ç ä¸ºä»€ä¹ˆè¦æ”¾åœ¨ mian ä¸‹é¢? è¿™æ˜¯å› ä¸ºåœ¨ windows ç³»ç»Ÿä¸‹åˆ›å»ºè¿›ç¨‹ä¼šé‡æ–°åŠ è½½ä¸€éçˆ¶è¿›ç¨‹çš„ä»£ç ,å¦‚æžœä¸æ”¾åœ¨ main åˆ¤æ–­ä¸‹é¢çš„è¯ä¼šé‡å¤æ‰§è¡Œåˆ›å»ºè¿›ç¨‹çš„ä»£ç .åœ¨ ç±»linux ç³»ç»Ÿä¸‹å°±ä¸ç”¨äº†.åˆ›å»ºè¿›ç¨‹åŽæ‰§è¡Œstartæ–¹æ³•å…¶å®žå°±æ˜¯è¿è¡Œä¼ å…¥çš„ task å‡½æ•°: è¿™ä¸ªç±»æ–¹æ³•çš„æ³¨é‡Šå«ä¹‰ä¸º:è¿è¡Œåœ¨å­è¿›ç¨‹ä¸­çš„æ–¹æ³•,å¯ä»¥åœ¨å­ç±»ä¸­é‡å†™. çœ‹çœ‹åˆ›å»ºçš„å­è¿›ç¨‹çš„è¿è¡Œç»“æžœ: ç»“æžœä¼šæ‰“å°å‡ºä¸»è¿›ç¨‹å’Œå­è¿›ç¨‹. æ–°å»ºä¸€ä¸ªç»§æ‰¿è‡ª Process ç±»çš„å­ç±»å¹¶æ”¹å†™ run æ–¹æ³• demo å¦‚ä¸‹: 1234567891011from multiprocessing import Process,current_processclass MyProcess(Process): def run(self): print('å­', current_process())if __name__ == '__main__': p = MyProcess() p.start() print('ä¸»', current_process()) è¿è¡Œç»“æžœ: è¿›ç¨‹ä¹‹é—´å†…å­˜ç©ºé—´äº’ç›¸éš”ç¦»123456789101112from multiprocessing import Processx = 100def task(): global x x = 1 print('å­', x) if __name__ == '__main__': p = Process(target=task) p.start() print('ä¸»', x) è¿è¡Œç»“æžœ: å¯ä»¥å¾—å‡ºå³ä½¿åœ¨å­è¿›ç¨‹ä¸­global xäº†,ä¿®æ”¹çš„ä¹Ÿæ˜¯å­è¿›ç¨‹å†…å­˜ç©ºé—´é‡Œé¢çš„åç§°,è¿™å’Œä¹‹å‰è®²çš„å­è¿›ç¨‹å°†çˆ¶è¿›ç¨‹çš„ä»£ç é‡æ–°åŠ è½½äº†ä¸€é,æ‰€ä»¥è¿™é‡Œé¢çš„ x æ˜¯ä¸¤ä¸ªä¸åŒçš„ x. ä¸ºä»€ä¹ˆè¿›ç¨‹çš„å†…å­˜ç©ºé—´éœ€è¦åˆ‡å¿…é¡»è¦äº’ç›¸éš”ç¦»å‘¢? è¿›ç¨‹éš”ç¦»æ˜¯ä¸ºä¿æŠ¤æ“ä½œç³»ç»Ÿä¸­è¿›ç¨‹äº’ä¸å¹²æ‰°è€Œè®¾è®¡çš„ä¸€ç»„ä¸åŒç¡¬ä»¶å’Œè½¯ä»¶çš„æŠ€æœ¯.è¿™ä¸ªæŠ€æœ¯æ˜¯ä¸ºäº†é¿å…A è¿›ç¨‹å†™å…¥ B è¿›ç¨‹çš„æƒ…å†µå‘ç”Ÿ.è¿›ç¨‹çš„éš”ç¦»å®žçŽ°,ä½¿ç”¨äº†è™šæ‹Ÿåœ°å€ç©ºé—´.è¿›ç¨‹ A çš„è™šæ‹Ÿåœ°å€å’Œè¿›ç¨‹ B çš„è™šæ‹Ÿåœ°å€ä¸åŒ,è¿™æ ·å°±é˜²æ­¢è¿›ç¨‹ A å°†æ•°æ®ä¿¡æ¯å†™å…¥è¿›ç¨‹ B,æ€»çš„æ¥è¯´å°±æ˜¯ä¸ºäº†æ•°æ®å®‰å…¨,ä½†ä¹Ÿæœ‰åŠžæ³•å¯ä»¥å®žçŽ°è¿›ç¨‹é—´é€šä¿¡,ç¨åŽå†è°ˆ. çˆ¶å­è¿›ç¨‹æ‰§è¡Œé¡ºåºä¸Ž join æ–¹æ³•åœ¨ä¸Šé¢çš„ä»£ç ä¸­å®žä¾‹ä¸€ä¸ªè¿›ç¨‹å¯¹è±¡ç„¶åŽæ‰§è¡Œ start æ–¹æ³•,ä¼šåˆ›å»ºå‡ºä¸€ä¸ªå­è¿›ç¨‹ç„¶åŽåŽ»æ‰§è¡Œä»»åŠ¡,å…¶å®ž python åªæ˜¯è°ƒç”¨äº†æ“ä½œç³»ç»Ÿæä¾›çš„æŽ¥å£,åœ¨ä¸Šä¸€ç¯‡åšå®¢è¯´åˆ°,ç±» Unix æ˜¯è°ƒç”¨äº†æ“ä½œç³»ç»Ÿçš„ fork å‡½æ•°, windows æ˜¯ CreateProcess å‡½æ•°,æ‰€ä»¥æ˜¯é€šè¿‡æ“ä½œç³»ç»Ÿæ¥è°ƒç”¨å¹¶åˆ›å»ºä¸€ä¸ªè¿›ç¨‹çš„,è€Œåˆ›å»ºè¿›ç¨‹éœ€è¦ä¸€äº›å¿…è¦çš„èµ„æº,é‚£ä¹ˆåœ¨æ“ä½œç³»ç»Ÿåˆ†é…è¿™äº›èµ„æºçš„è¿‡ç¨‹ä¸­,ä¸»è¿›ç¨‹ä»£ç çš„æ‰§è¡Œåº”è¯¥è¿›è¡Œå®Œæˆäº†,æ‰€ä»¥è¿è¡Œç»“æžœä¼šå…ˆå‡ºçŽ°ä¸»è¿›ç¨‹ä»£ç æ‰§è¡Œå®Œ,åŽå­è¿›ç¨‹çš„ä»£ç æ‰§è¡Œå®Œ. åˆ›å»ºè¿›ç¨‹çš„å…·ä½“æ—¶é—´ 123456789101112131415161718from multiprocessing import Processimport timedef task(): start_time = time.time() print('å­è¿›ç¨‹è¿è¡Œæ—¶é—´') print(time.time() - start_time)if __name__ == '__main__': start_time = time.time() p = Process(target=task) p.start() print('åˆ›å»ºå­è¿›ç¨‹', time.time() - start_time) print('ä¸»', time.time() - start_time) è¿è¡Œç»“æžœ: å¯ä»¥å¾—å‡ºåˆ›å»ºå­è¿›ç¨‹å‡ ä¹ŽèŠ±äº†æ€»ç¨‹åºè¿è¡Œæ—¶é—´çš„90%ä»¥ä¸Š,æ‰€ä»¥ä¸»è¿›ç¨‹å…ˆè¿è¡Œç»“æŸå°±å¾ˆæ­£å¸¸äº†. join æ–¹æ³• é‚£ä¹ˆå¦‚ä½•å¯ä»¥è®©ä¸»è¿›ç¨‹ç­‰å¾…å­è¿›ç¨‹è¿è¡Œç»“æŸä¸»è¿›ç¨‹æ‰ç»“æŸå‘¢? 12345678910111213141516171819from multiprocessing import Processimport timedef task(): start_time = time.time() print('å­è¿›ç¨‹è¿è¡Œæ—¶é—´') print(time.time() - start_time)if __name__ == '__main__': start_time = time.time() p = Process(target=task) p.start() print('åˆ›å»ºå­è¿›ç¨‹', time.time() - start_time) p.join() print('ä¸»', time.time() - start_time) è¿è¡Œç»“æžœ: è¿™æ ·ä¸»è¿›ç¨‹å°±ä¼šç­‰å¾…å­è¿›ç¨‹è¿è¡Œç»“æŸæ‰ä¼šç»“æŸ. join æ–¹æ³•:ä¸»è¿›ç¨‹ç­‰å¾…å­è¿›ç¨‹è¿è¡Œå®Œæ¯•,å³ä¸»è¿›ç¨‹åœ¨åŽŸåœ°é˜»å¡žè€Œä¸å½±å“å­è¿›ç¨‹çš„è¿è¡Œ. è¿›ç¨‹å¯¹è±¡ç›¸å…³å±žæ€§å’Œæ–¹æ³•12345678910111213141516171819from multiprocessing import Processimport os,timedef task(name): print('start', name) time.sleep(5) print('stop', name) if __name__ == '__main__': p = Process(target=task, args=('musibii',), name='musibii_Process') p.start() print(p.name) # èŽ·å–è¿›ç¨‹å,å¯ä»¥è‡ªå®šä¹‰ print(p.pid) # èŽ·å–è¿›ç¨‹ pid p.terminate() # ç»“æŸå­è¿›ç¨‹ print(p.is_alive()) # åˆ¤æ–­è¿›ç¨‹æ˜¯å¦å­˜æ´»,å¸ƒå°”å€¼ print(os.getpid()) # å½“å‰ä¸»è¿›ç¨‹ pid print(os.getppid()) # æ‰§è¡Œ py æ–‡ä»¶çš„è¿›ç¨‹,å½“å‰ä¸º pycharm è¿›ç¨‹pid è¿è¡Œç»“æžœ: ä¸ºä»€ä¹ˆåœ¨ terminate ä¹‹åŽåˆ¤æ–­å­è¿›ç¨‹æ˜¯å¦å­˜æ´»,ç»“æžœä¸º True å‘¢? å› ä¸ºåœ¨æ‰§è¡Œç»ˆç»“å­è¿›ç¨‹å‘½ä»¤åŽéœ€è¦æ“ä½œç³»ç»Ÿæ¥ç»“æŸå­è¿›ç¨‹,è€Œå®Œå…¨ç»ˆç»“å­è¿›ç¨‹éœ€è¦ä¸€å®šçš„æ—¶é—´,è€Œä»£ç æ‰§è¡Œé€Ÿåº¦å¾ˆå¿«,æ‰€ä»¥ä¼šæ˜¯ True. åƒµå°¸è¿›ç¨‹ä¸Žå­¤å„¿è¿›ç¨‹ä»¥åŠå®ˆæŠ¤è¿›ç¨‹åƒµå°¸è¿›ç¨‹åœ¨ç±» Unix ç³»ç»Ÿä¸­,åƒµå°¸è¿›ç¨‹æ˜¯æŒ‡å®Œæˆæ‰§è¡Œ(é€šè¿‡ exit ç³»ç»Ÿè°ƒç”¨,æˆ–è¿è¡Œæ—¶å‘ç”Ÿè‡´å‘½é”™è¯¯æˆ–æ”¶åˆ°ç»ˆæ­¢ä¿¡å·æ‰€è‡´)ä½†åœ¨æ“ä½œç³»ç»Ÿçš„è¿›ç¨‹è¡¨ä¸­ä»ç„¶æœ‰ä¸€ä¸ªè¡¨é¡¹(è¿›ç¨‹æŽ§åˆ¶å— PCB),å¤„äºŽâ€™ç»ˆæ­¢çŠ¶æ€â€™çš„è¿›ç¨‹. å­¤å„¿è¿›ç¨‹åœ¨æ“ä½œç³»ç»Ÿä¸­,å­¤å„¿è¿›ç¨‹æŒ‡çš„æ˜¯åœ¨å…¶çˆ¶è¿›ç¨‹æ‰§è¡Œå®Œæˆæˆ–è¢«ç»ˆæ­¢åŽä»ç»§ç»­è¿è¡Œçš„ä¸€ç±»è¿›ç¨‹,è¿™ç±»è¿›ç¨‹ç”±æ“ä½œç³»ç»Ÿè¿›è¡Œç®¡ç†å’Œå›žæ”¶. å®ˆæŠ¤è¿›ç¨‹åœ¨ä¸€ä¸ªå¤šå·¥çš„ç”µè„‘ä½œä¸šç³»ç»Ÿä¸­,å®ˆæŠ¤è¿›ç¨‹æ˜¯ä¸€ç§åœ¨åŽå°æ‰§è¡Œçš„ç”µè„‘ç¨‹åº.æ­¤ç±»ç¨‹åºä¼šè¢«ä»¥è¿›ç¨‹çš„å½¢å¼åˆå§‹åŒ–.å®ˆæŠ¤è¿›ç¨‹ç¨‹åºçš„åç§°é€šå¸¸ä»¥â€™ dâ€™ç»“å°¾:ä¾‹å¦‚ syslogd å°±æ˜¯æŒ‡ç®¡ç†ç³»ç»Ÿæ—¥å¿—çš„å®ˆæŠ¤è¿›ç¨‹. è¯¦è§£: ä¸€èˆ¬æƒ…å†µä¸‹,å­è¿›ç¨‹æ˜¯ç”±çˆ¶è¿›ç¨‹åˆ›å»ºçš„,è€Œå­è¿›ç¨‹å’Œçˆ¶è¿›ç¨‹çš„é€€å‡ºæ˜¯æ— é¡ºåºçš„,ä¸¤è€…ä¹‹é—´éƒ½ä¸çŸ¥é“è°å…ˆé€€å‡º.æ­£å¸¸æƒ…å†µä¸‹çˆ¶è¿›ç¨‹å…ˆç»“æŸåˆ™ä¼šè°ƒç”¨ wait æˆ–è€… waitpid å‡½æ•°ç­‰å¾…å­è¿›ç¨‹å®Œæˆå†é€€å‡º,è€Œä¸€æ—¦çˆ¶è¿›ç¨‹ä¸ç­‰å¾…ç›´æŽ¥é€€å‡º,åˆ™å‰©ä¸‹çš„å­è¿›ç¨‹ä¼šè¢« init(pid=1)è¿›ç¨‹æŽ¥æ”¶,æˆè¢«å­¤å„¿è¿›ç¨‹.(è¿›ç¨‹æ ‘ç§é™¤äº† init éƒ½ä¼šæœ‰çˆ¶è¿›ç¨‹) å¦‚æžœå­è¿›ç¨‹å…ˆé€€å‡º,çˆ¶è¿›ç¨‹è¿˜æœªç»“æŸå¹¶ä¸”æ²¡æœ‰è°ƒç”¨ wait æˆ–è€… waitpid å‡½æ•°èŽ·å–å­è¿›ç¨‹çš„çŠ¶æ€ä¿¡æ¯,åˆ™å­è¿›ç¨‹æ®‹ç•™çš„çŠ¶æ€ä¿¡æ¯(task_struct ç»“æž„å’Œå°‘é‡ç³»ç»Ÿèµ„æºä¿¡æ¯)ä¼šå˜æˆåƒµå°¸è¿›ç¨‹. å®ˆæŠ¤è¿›ç¨‹æ˜¯æŒ‡åœ¨åŽå°è¿è¡Œ,æ²¡æœ‰æŽ§åˆ¶ç»ˆç«¯ä¸Žä¹‹ç›¸è¿žçš„è¿›ç¨‹.å®ƒç‹¬ç«‹äºŽæŽ§åˆ¶ç»ˆç«¯,é€šå¸¸å‘¨æœŸæ€§çš„æ‰§è¡ŒæŸç§ä»»åŠ¡.(ç‰¹åˆ«çš„,å®ˆæŠ¤è¿›ç¨‹ä¸èƒ½æœ‰å­è¿›ç¨‹)å®ˆæŠ¤è¿›ç¨‹è„±ç¦»äºŽç»ˆç«¯æ˜¯ä¸ºäº†é¿å…è¿›ç¨‹åœ¨æ‰§è¡Œè¿‡ç¨‹ä¸­çš„ä¿¡æ¯åœ¨ä»»ä½•ç»ˆç«¯ä¸Šæ˜¾ç¤ºå¹¶ä¸”è¿›ç¨‹ä¹Ÿä¸ä¼šè¢«ä»»ä½•ç»ˆç«¯æ‰€äº§ç”Ÿçš„ç»ˆç«¯ä¿¡æ¯æ‰€æ‰“æ–­. äº§ç”Ÿçš„å±å®³ å­¤å„¿è¿›ç¨‹ç»“æŸåŽä¼šè¢« init è¿›ç¨‹ç®¡ç†å¹¶å¤„ç†åŽäº‹,å¹¶æ²¡æœ‰å±å®³,è€Œåƒµå°¸è¿›ç¨‹åˆ™ä¼šä¸€ç›´å ç€è¿›ç¨‹å·,æ“ä½œç³»ç»Ÿçš„è¿›ç¨‹æ•°é‡æœ‰é™åˆ™ä¼šå—å½±å“. è§£å†³åŠžæ³•: ä¸€èˆ¬åƒµå°¸è¿›ç¨‹çš„äº§ç”Ÿéƒ½æ˜¯å› ä¸ºçˆ¶è¿›ç¨‹çš„åŽŸå› ,åˆ™å¯ä»¥é€šè¿‡kill çˆ¶è¿›ç¨‹è§£å†³,è¿™æ—¶å€™åƒµå°¸è¿›ç¨‹å°±å˜æˆäº†å­¤å„¿è¿›ç¨‹,è¢« init è¿›ç¨‹ç®¡ç†.]]></content>
      <categories>
        <category>å¹¶å‘ç¼–ç¨‹</category>
      </categories>
  </entry>
  <entry>
    <title><![CDATA[å¹¶å‘ç¼–ç¨‹ï¼ˆäºŒï¼‰]]></title>
    <url>%2F2018%2F11%2F16%2F%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B-%E4%BA%8C%2F</url>
    <content type="text"><![CDATA[å‰è¨€åœ¨ç¬¬ä¸‰ä»£è®¡ç®—æœºçš„å‘å±•ä¸­å› ä¸ºå‡ºçŽ°äº†å¤šé“æŠ€æœ¯ä½¿å¾—åŒä¸€æ—¶åˆ»å¯ä»¥åœ¨å†…å­˜ä¸­åŒæ—¶è¿è¡Œå¤šä¸ªç¨‹åº,é‚£ä¹ˆè¿™æ ·å°±äº§ç”Ÿäº†è¿›ç¨‹çš„æ¦‚å¿µ. åœ¨æœ¬ç¯‡åšå®¢ä¸­å°†ä»‹ç»è¿›ç¨‹ç›¸å…³çš„ç†è®ºçŸ¥è¯†,å¯¹æ“ä½œç³»ç»Ÿè¿›ä¸€æ­¥çš„è®¤è¯†. è¿›ç¨‹ä»€ä¹ˆæ˜¯è¿›ç¨‹è¿›ç¨‹( process),æ˜¯æŒ‡è®¡ç®—æœºä¸­å·²è¿è¡Œçš„ç¨‹åº.è¿›ç¨‹æ›¾ç»æ˜¯åˆ†æ—¶ç³»ç»Ÿçš„åŸºæœ¬è¿è¡Œå•ä½.åœ¨é¢å‘è¿›ç¨‹è®¾è®¡çš„ç³»ç»Ÿ(å¦‚æ—©æœŸçš„ UNIX,Linux2.4åŠæ›´æ—©çš„ç‰ˆæœ¬)ä¸­,è¿›ç¨‹æ˜¯ç¨‹åºçš„åŸºæœ¬æ‰§è¡Œå®žä½“,æ˜¯æ“ä½œç³»ç»Ÿçš„èµ„æºå•ä½;åœ¨é¢å‘çº¿ç¨‹è®¾è®¡çš„ç³»ç»Ÿ(å¦‚å½“ä»£å¤šæ•°æ“ä½œç³»ç»Ÿ, Linux2.6åŠæ›´æ–°çš„ç‰ˆæœ¬)ä¸­,è¿›ç¨‹æœ¬èº«ä¸æ˜¯åŸºæœ¬è¿è¡Œå•ä½,è¿è¡Œå•ä½å˜ä¸ºçº¿ç¨‹,è¿›ç¨‹æ˜¯çº¿ç¨‹çš„å®¹å™¨.ç¨‹åºæœ¬èº«åªæ˜¯æŒ‡ä»¤,æ•°æ®åŠå…¶ç»„ç»‡å½¢å¼çš„æè¿°,è¿›ç¨‹æ‰æ˜¯(æŒ‡ä»¤å’Œæ•°æ®)çš„çœŸæ­£è¿è¡Œå®žä¾‹.è‹¥å¹²è¿›ç¨‹æœ‰å¯èƒ½ä¸ŽåŒä¸€ä¸ªç¨‹åºç›¸å…³ç³»,ä¸”æ¯ä¸ªè¿›ç¨‹çš†å¯ä»¥åŒæ­¥(å¾ªåº)æˆ–å¼‚æ­¥(å¹³è¡Œ)çš„æ–¹å¼ç‹¬ç«‹è¿è¡Œ.çŽ°ä»£è®¡ç®—æœºç³»ç»Ÿå› ä¸ºç©ºé—´å…±äº«(ç©ºé—´å¤ç”¨)å¯åœ¨åŒä¸€æ®µæ—¶é—´å†…ä»¥è¿›ç¨‹çš„å½¢å¼å°†å¤šä¸ªç¨‹åºåŠ è½½åˆ°å­˜å‚¨å™¨ä¸­,å¹¶å€Ÿç”±æ—¶é—´å…±äº«(æ—¶é—´å¤ç”¨),ä»¥åœ¨ä¸€ä¸ªå¤„ç†å™¨ä¸Šè¡¨çŽ°å‡ºå¼‚æ­¥(å¹³è¡Œ)è¿è¡Œçš„æ„Ÿè§‰. ###å¼€å¯è¿›ç¨‹éœ€è¦çš„èµ„æº ç”¨æˆ·ä¸‹è¾¾è¿è¡Œç¨‹åºçš„å‘½ä»¤åŽ,å°±ä¼šäº§ç”Ÿè¿›ç¨‹.åŒä¸€ç¨‹åºå¯äº§ç”Ÿå¤šä¸ªè¿›ç¨‹(ä¸€å¯¹å¤šçš„å…³ç³»),ä»¥å…è®¸åŒæ—¶åˆå¤šä½ç”¨æˆ·è¿è¡ŒåŒä¸€ç¨‹åº,å´ä¸ä¼šäº§ç”Ÿå†²çª. å¼€å¯è¿›ç¨‹éœ€è¦ä¸€äº›å¿…è¦çš„èµ„æºæ‰èƒ½å®Œæˆå·¥ä½œ,å¦‚ CPU ä½¿ç”¨æ—¶é—´,å­˜å‚¨å™¨,æ–‡ä»¶ä»¥åŠ I/O è®¾å¤‡,ä¸”ä¸ºä¾åºé€ä¸€è¿›è¡Œ,ä¹Ÿå°±æ˜¯æ¯ä¸ª CPU å†…æ ¸ä»»ä½•æ—¶é—´å†…ä»…èƒ½è¿è¡Œä¸€é¡¹è¿›ç¨‹. ###è¿›ç¨‹åŒ…å«çš„èµ„æº ä¸€ä¸ªè®¡ç®—æœºç³»ç»Ÿé›†æˆåŒ…æ‹¬(æˆ–è€…è¯´æ‹¥æœ‰)ä¸‹åˆ—èµ„æº: é‚£ä¸ªç¨‹åºçš„å¯æ‰§è¡Œæœºå™¨ä»£ç çš„ä¸€ä¸ªåœ¨å­˜å‚¨å™¨çš„æ˜ åƒ; åˆ†é…åˆ°çš„å­˜å‚¨å™¨(é€šå¸¸æ˜¯è™šæ‹Ÿçš„ä¸€ä¸ªå­˜å‚¨å™¨åŒºåŸŸ).å­˜å‚¨å™¨çš„å†…å®¹åŒ…æ‹¬å¯æ‰§è¡Œä»£ç ,ç‰¹å®šäºŽè¿›ç¨‹çš„æ•°æ®(è¾“å…¥æˆ–è¾“å‡º),è°ƒç”¨å †æ ˆ(ç”¨äºŽä¿å­˜è¿è¡Œæ—¶è¿è¾“ä¸­é€”äº§ç”Ÿçš„æ•°æ®); åˆ†é…ç»™è¯¥è¿›ç¨‹çš„èµ„æºçš„æ“ä½œç³»ç»Ÿæè¿°ç¬¦,è¯¸å¦‚æ–‡ä»¶æè¿°ç¬¦( UNIX æœ¯è¯­)æˆ–æ–‡ä»¶å¥æŸ„( Windows),æ•°æ®æºå’Œæ•°æ®ç»ˆç«¯; å®‰å…¨ç‰¹æ€§,è¯¸å¦‚è¿›ç¨‹æ‹¥æœ‰è€…å’Œè¿›ç¨‹çš„æƒé™é›†(å¯ä»¥å®¹è®¸çš„æ“ä½œ); å¤„ç†å™¨çŠ¶æ€,è¯¸å¦‚å¯„å­˜å™¨å†…å®¹,ç‰©ç†å­˜å‚¨å™¨å®šå€ç­‰.å½“è¿›ç¨‹æ­£åœ¨è¿è¡Œæ—¶,çŠ¶æ€é€šå¸¸ä¿å­˜åœ¨å¯„å­˜å™¨,å…¶ä»–æ•°æ®ä¿å­˜åœ¨å­˜å‚¨å™¨. ###è¿›ç¨‹çš„çŠ¶æ€ è¿›ç¨‹åœ¨è¿è¡Œä¸­,çŠ¶æ€ä¼šéšæ—¶å‘ç”Ÿæ”¹å˜.æ‰€è°“çŠ¶æ€,å°±æ˜¯æŒ‡è¿›ç¨‹ç›®å‰çš„åŠ¨ä½œ: æ–°ç”Ÿ( new):è¿›ç¨‹æ–°äº§ç”Ÿé‡; è¿è¡Œ(running):æ­£åœ¨è¿è¡Œ; ç­‰å¾…( waiting):ç­‰å¾…æŸäº‹å‘ç”Ÿ,ä¾‹å¦‚ç­‰å¾…ç”¨æˆ·è¾“å…¥å®Œæˆ.ä¹Ÿç§°ä¹‹ä¸ºé˜»å¡ž; å°±ç»ª( ready):ç­‰å¾… CPU; ç»“æŸ( terminated):å®Œæˆè¿è¡Œ. å„çŠ¶æ€åç§°å¯èƒ½è™½ä¸åŒçš„æ“ä½œèƒ½å¤Ÿç³»ç»Ÿè€Œä¸åŒ,å¯¹äºŽå•æ ¸ç³»ç»Ÿ( UP),ä»»ä½•æ—¶é—´å¯èƒ½æœ‰å¤šä¸ªè¿›ç¨‹ä¸ºç­‰å¾…,å°±ç»ª,ä½†å¿…å®šä»…æœ‰ä¸€ä¸ªè¿›ç¨‹åœ¨è¿è¡Œ. ###è¿›ç¨‹è¡¨ å¯¹äºŽä¸€ä¸ªè¿›ç¨‹æ¥è¯´,æ“ä½œç³»ç»Ÿä¸ºäº†èƒ½å¤Ÿåœ¨CPUç¦»å¼€åŽç»§ç»­æ‰§è¡Œè¯¥è¿›ç¨‹,ä¼šæŠŠæ­¤æ—¶è¿›ç¨‹è¿è¡Œçš„æ‰€æœ‰çŠ¶æ€ä¿å­˜ä¸‹æ¥,ä¸ºæ­¤,æ“ä½œç³»ç»Ÿå’Œä¼šç»´æŠ¤ä¸€å¼ è¡¨æ ¼,å³è¿›ç¨‹è¡¨( process table),æ¯ä¸ªè¿›ç¨‹å ç”¨ä¸€ä¸ªè¿›ç¨‹è¡¨é¡¹(ä¹Ÿç§°ä¹‹ä¸ºè¿›ç¨‹æŽ§åˆ¶å—). å¯¹äºŽä¸Šå›¾ä¸­é‡è¦é¡¹çš„è§£é‡Šå¦‚ä¸‹: å¯„å­˜å™¨:å¦‚ç´¯åŠ å™¨,å˜å€å¯„å­˜å™¨,å †æ ˆæŒ‡é’ˆä»¥åŠä¸€èˆ¬ç”¨é€”å¯„å­˜å™¨,çŠ¶å†µä»£ç ç­‰,ä¸»è¦ç”¨é€”åœ¨äºŽä¸­æ–­ è¿›ç¨‹æ—¶æš‚æ—¶å­˜å‚¨æ•°æ®,ä»¥ä¾¿ç¨åŽç»§ç»­åˆ©ç”¨;å…¶æ•°é‡åŠç±»åˆ«å› è®¡ç®—æœºä½“ç³»ç»“æž„æœ‰æ‰€å·®å¼‚; ç¨‹åºè®¡æ•°å™¨:æŽ¥ä¸‹æ¥è¦è¿è¡Œçš„æŒ‡ä»¤åœ°å€; è¿›ç¨‹çŠ¶æ€:å¯ä»¥æ˜¯ new,ready,running,waiting,blockedæˆ– terminated; ä¼˜å…ˆçº§( CPU æŽ’ç­æ³•):ä¼˜å…ˆçº§,æŽ’ç­é˜Ÿåˆ—ç­‰æŒ‡é’ˆä»¥åŠå…¶ä»–å‚æ•°; å­˜å‚¨ç®¡ç†:å¦‚æ ‡ç­¾é¡µè¡¨,æ­£æ–‡æ®µæŒ‡é’ˆ,æ•°æ®æ®µæŒ‡é’ˆä»¥åŠå †æ ˆæŒ‡é’ˆç­‰; ä¼šè®¡ä¿¡æ¯:å¦‚ CPU é‡å®žé™…æ—¶é—´å€¼ä½¿ç”¨æ•°é‡,æ—¶é™,è´¦å·,å·¥ä½œæˆ–è¿›ç¨‹å·; è¾“å…¥è¾“å‡ºçŠ¶æ€:é…ç½®è¿›ç¨‹ä½¿ç”¨ I/O è®¾å¤‡,å¦‚ç£å¸¦æœº. Unixè¿›ç¨‹ç±» Unix ç³»ç»Ÿè¿›ç¨‹æ¦‚å¿µUnixè¿›ç¨‹PIDåœ¨ç±» Unix ç³»ç»Ÿä¸­å¯ä»¥ä½¿ç”¨ ps å‘½ä»¤æŸ¥è¯¢æ­£åœ¨è¿è¡Œçš„è¿›ç¨‹,æ¯”å¦‚ ps -eo pid,comm,cmd,ä¸‹å›¾ä¸ºæ‰§è¡Œç»“æžœ:(-e è¡¨ç¤ºåˆ—å‡ºå…¨éƒ¨è¿›ç¨‹, -o pis,comm,cmd è¡¨ç¤ºæˆ‘ä»¬éœ€è¦ PID,COMMAND,CMD ä¿¡æ¯) æ¯ä¸€è¡Œä»£è¡¨ä¸€ä¸ªè¿›ç¨‹.æ¯ä¸€è¡Œåˆ†ä¸ºä¸‰åˆ—.ç¬¬ä¸€åˆ—ä¸º PID(Process IDentity)æ˜¯ä¸€ä¸ªæ•´æ•°,æ¯ä¸€ä¸ªè¿›ç¨‹éƒ½æœ‰ä¸€ä¸ªå”¯ä¸€çš„ PID æ¥è¡¨ç¤ºè‡ªå·±çš„èº«ä»½,è¿›ç¨‹ä¹Ÿå¯ä»¥æ ¹æ® PID æ¥è¯†åˆ«å…¶ä»–çš„è¿›ç¨‹.ç¬¬äºŒåˆ— COMMAND æ˜¯è¯¥è¿›ç¨‹çš„ç®€ç§°.ç¬¬ä¸‰åˆ— CMD æ˜¯è¿›ç¨‹æ‰€å¯¹åº”çš„ç¨‹åºä»¥åŠè¿è¡Œæ—¶æ‰€å¸¦çš„å‚æ•°.(ç¬¬ä¸‰åˆ—æœ‰ä¸€äº›ç”±[]æ‹¬èµ·æ¥çš„,å®ƒä»¬æ˜¯å†…æ ¸çš„ä¸€éƒ¨åˆ†åŠŸèƒ½) åœ¨ç¬¬ä¸€è¡Œçš„ PID ä¸º1,åå­—ä¸º systemd(18.04,ç‰ˆæœ¬ä¸º16.04è¯¥åå­—ä¸º init).è¿™ä¸ªè¿›ç¨‹æ˜¯æ‰§è¡Œ/sbin/init è¿™ä¸€æ–‡ä»¶(ç¨‹åº)äº§ç”Ÿçš„(ä¸çŸ¥é“æˆ‘çš„ä¸ºä»€ä¹ˆä¸æ˜¯,æŸ¥çœ‹äº†æœ‹å‹çš„æ˜¯/sbin/initðŸ˜­).å½“ Linux å¯åŠ¨çš„æ—¶å€™, systemd æ˜¯ç³»ç»Ÿåˆ›å»ºçš„ç¬¬ä¸€ä¸ªè¿›ç¨‹,è¿™ä¸€è¿›ç¨‹ä¼šä¸€ç›´å­˜åœ¨,ç›´åˆ°å…³é—­è®¡ç®—æœº. å®žé™…ä¸Š,å½“è®¡ç®—æœºå¼€æœºæ—¶,å†…æ ¸( kernel)åªå»ºç«‹äº†ä¸€ä¸ªsystemd è¿›ç¨‹. Linux å†…æ ¸å¹¶ä¸æä¾›ç›´æŽ¥å»ºç«‹æ–°è¿›ç¨‹çš„ç³»ç»Ÿè°ƒç”¨.å‰©ä¸‹çš„æ‰€æœ‰è¿›ç¨‹éƒ½æ˜¯ systemd è¿›ç¨‹é€šè¿‡fork æœºåˆ¶å»ºç«‹çš„.æ–°çš„è¿›ç¨‹è¦é€šè¿‡è€çš„è¿›ç¨‹å¤åˆ¶è‡ªèº«å¾—åˆ°,è¿™å°±æ˜¯fork.fork æ˜¯ä¸€ä¸ªç³»ç»Ÿè°ƒç”¨.è¿›ç¨‹å­˜æ´»äºŽå†…å­˜ä¸­.æ¯ä¸ªè¿›ç¨‹éƒ½åœ¨å†…å­˜ä¸­åˆ†é…æœ‰å±žäºŽè‡ªå·±çš„ä¸€ç‰‡ç©ºé—´(address space).å½“è¿›ç¨‹fork çš„æ—¶å€™, Linux åœ¨å†…å­˜ä¸­å¼€è¾Ÿå‡ºä¸€ç‰‡æ–°çš„å†…å­˜ç©ºé—´ç»™æ–°çš„è¿›ç¨‹,å¹¶å°†è€çš„è¿›ç¨‹ç©ºé—´ä¸­çš„å†…å®¹å¤åˆ¶åˆ°æ–°çš„ç©ºé—´ä¸­,æ­¤åŽä¸¤ä¸ªè¿›ç¨‹åŒæ—¶è¿è¡Œ. è€è¿›ç¨‹æˆä¸ºæ–°è¿›ç¨‹çš„çˆ¶è¿›ç¨‹(parent process),è€Œç›¸åº”çš„,æ–°è¿›ç¨‹å°±æ˜¯è€è¿›ç¨‹çš„å­è¿›ç¨‹(child process).ä¸€ä¸ªè¿›ç¨‹é™¤äº†æœ‰ä¸€ä¸ª PID ä¹‹å¤–,è¿˜ä¼šæœ‰ä¸€ä¸ª PPID(parent PID)æ¥å­˜å‚¨çˆ¶è¿›ç¨‹çš„ PID. å¦‚æžœæˆ‘ä»¬å¾ªç€ PPID ä¸æ–­å‘ä¸Šè¿½æº¯çš„è¯,æ€»ä¼šå‘çŽ°å…¶æºå¤´æ˜¯ systemd è¿›ç¨‹.æ‰€ä»¥è¯´,æ‰€æœ‰çš„è¿›ç¨‹ä¹Ÿæž„æˆä¸€ä¸ªä»¥ systemd ä¸ºæ ¹çš„æ ‘çŠ¶ç»“æž„. è¿›ç¨‹æ ‘ä½¿ç”¨ pstreeå‘½ä»¤æŸ¥çœ‹è¿›ç¨‹æ ‘: å¯ä»¥çœ‹åˆ° systemd è¿›ç¨‹æ˜¯æ•´ä¸ªè¿›ç¨‹æ ‘çš„æ ¹. fork é€šå¸¸ä½œä¸ºä¸€ä¸ªå‡½æ•°è°ƒç”¨,è¿™ä¸ªå‡½æ•°ä¼šæœ‰ä¸¤æ¬¡è¿”å›ž,å°†å­è¿›ç¨‹çš„ PID è¿”å›žç»™çˆ¶è¿›ç¨‹,0è¿”å›žç»™å­è¿›ç¨‹.å®žé™…ä¸Š,å­è¿›ç¨‹æ€»å¯ä»¥æŸ¥è¯¢è‡ªå·±çš„ PPID æ¥çŸ¥é“è‡ªå·±çš„çˆ¶è¿›ç¨‹æ˜¯è°,è¿™æ ·,ä¸€å¯¹çˆ¶å­è¿›ç¨‹å°±å¯ä»¥éšæ—¶æŸ¥è¯¢å¯¹æ–¹.åœ¨è°ƒç”¨fork å‡½æ•°åŽ,ç¨‹åºä¼šè®¾è®¡ä¸€ä¸ª if é€‰æ‹©ç»“æž„.å½“ PID ç­‰äºŽ0æ—¶,è¯´æ˜Žè¯¥è¿›ç¨‹ä¸ºå­è¿›ç¨‹,é‚£ä¹ˆè®©å®ƒæ‰§è¡ŒæŸäº›æŒ‡ä»¤;è€Œå½“ PID ä¸ºä¸€ä¸ªæ­£æ•´æ•°æ—¶,è¯´æ˜Žä¸ºçˆ¶è¿›ç¨‹,åˆ™æ‰§è¡Œå¦å¤–ä¸€äº›æŒ‡ä»¤.ç”±æ­¤,å°±å¯ä»¥åœ¨å­è¿›ç¨‹å»ºç«‹ä¹‹åŽ,è®©å®ƒæ‰§è¡Œä¸Žçˆ¶è¿›ç¨‹ä¸åŒçš„åŠŸèƒ½. å­è¿›ç¨‹çš„ç»ˆç»“å½“å­è¿›ç¨‹ç»ˆç»“æ—¶,å®ƒä¼šé€šçŸ¥çˆ¶è¿›ç¨‹,æ¸…ç©ºè‡ªå·±æ‰€å æ®çš„å†…å­˜,å¹¶åœ¨å†…æ ¸é‡Œç•™ä¸‹è‡ªå·±çš„é€€å‡ºä¿¡æ¯( exit code, å¦‚æžœé¡ºåˆ©è¿è¡Œ,è¿”å›ž0;å¦‚æžœæœ‰é”™è¯¯æˆ–å¼‚å¸¸çŠ¶å†µ,ä¸º&gt;0çš„æ•´æ•°).åœ¨è¿™ä¸ªä¿¡æ¯é‡Œ,ä¼šè§£é‡Šè¯¥è¿›ç¨‹ä¸ºä»€ä¹ˆé€€å‡º.çˆ¶è¿›ç¨‹åœ¨å¾—çŸ¥å­è¿›ç¨‹ç»ˆç»“æ—¶,æœ‰è´£ä»»å¯¹è¯¥å­è¿›ç¨‹ä½¿ç”¨ wait ç³»ç»Ÿè°ƒç”¨.è¿™ä¸ª wait å‡½æ•°èƒ½ä»Žå†…æ ¸ä¸­å–å‡ºå­è¿›ç¨‹çš„é€€å‡ºä¿¡æ¯,æ¸…ç©ºè¯¥ä¿¡æ¯åœ¨å†…æ ¸ä¸­æ‰€å æ®çš„ç©ºé—´.ä½†æ˜¯,å¦‚æžœçˆ¶è¿›ç¨‹æ—©äºŽå­è¿›ç¨‹ç»ˆç»“,å­è¿›ç¨‹å°±ä¼šæˆä¸ºä¸€ä¸ªå­¤å„¿(orphand)è¿›ç¨‹.å­¤å„¿è¿›ç¨‹ä¼šè¿‡ç»§ç»™ systemd è¿›ç¨‹, systemd è¿›ç¨‹ä¹Ÿå°±æˆäº†è¯¥è¿›ç¨‹çš„çˆ¶è¿›ç¨‹. systemd è¿›ç¨‹è´Ÿè´£è¯¥å­è¿›ç¨‹ç»ˆç»“æ—¶è°ƒç”¨ wait å‡½æ•°, ä¸€ä¸ªç³Ÿç³•çš„ç¨‹åºä¹Ÿå®Œå…¨å¯èƒ½é€ æˆå­è¿›ç¨‹çš„é€€å‡ºä¿¡æ¯æ»žç•™åœ¨å†…æ ¸ä¸­çš„çŠ¶å†µ(çˆ¶è¿›ç¨‹ä¸å¯¹å­è¿›ç¨‹è°ƒç”¨ wait å‡½æ•°),è¿™æ ·çš„æƒ…å†µä¸‹,å­è¿›ç¨‹æˆä¸ºåƒµå°¸( zombie)è¿›ç¨‹.å½“å¤§é‡åƒµå°¸è¿›ç¨‹ç§¯ç´¯æ—¶,å†…å­˜ç©ºé—´ä¼šè¢«æŒ¤å . ç±» UNIX ç³»ç»Ÿè¿›ç¨‹å’Œçº¿ç¨‹çš„åŒºåˆ«å°½ç®¡åœ¨ UNIX ä¸­,è¿›ç¨‹ä¸Žçº¿ç¨‹æ˜¯æœ‰è”ç³»ä½†ä¸åŒçš„ä¸¤ä¸ªä¸œè¥¿,ä½†åœ¨ Linux ä¸­,çº¿ç¨‹åªæ˜¯ä¸€ç§ç‰¹æ®Šçš„è¿›ç¨‹.å¤šä¸ªçº¿ç¨‹ä¹‹é—´å¯ä»¥å…±äº«å†…å­˜ç©ºé—´å’Œ IO æŽ¥å£.æ‰€ä»¥,è¿›ç¨‹æ˜¯ Linux ç¨‹åºçš„å”¯ä¸€å®žçŽ°æ–¹å¼. Linuxåˆ›å»ºè¿›ç¨‹ä»Žç³»ç»Ÿè°ƒç”¨fork ä¸­è¿”å›žæ—¶,ä¸¤ä¸ªè¿›ç¨‹é™¤äº†è¿”å›žå€¼ PID ä¸åŒå¤–,å…·æœ‰å®Œå…¨ä¸€æ ·çš„ç”¨æˆ·çº§ä¸Šä¸‹æ–‡.åœ¨å­è¿›ç¨‹ä¸­, PIDçš„å€¼ä¸º0.åœ¨ç³»ç»Ÿå¯åŠ¨æ—¶æœ‰å†…æ ¸åˆ›å»ºçš„è¿›ç¨‹1æ˜¯å”¯ä¸€ä¸é€šè¿‡ç³»ç»Ÿè°ƒç”¨fork è€Œåˆ›å»ºçš„è¿›ç¨‹.ä¹Ÿå°±æ˜¯ä¸Šå›¾çš„ systemdè¿›ç¨‹. å†…æ ¸ä¸ºç³»ç»Ÿè°ƒç”¨fork å®Œæˆä¸‹åˆ—æ“ä½œ: ä¸ºæ–°è¿›ç¨‹åœ¨è¿›ç¨‹è¡¨ä¸­åˆ†é…ä¸€ä¸ªç©ºé¡¹; ä¸ºå­è¿›ç¨‹èµ‹ä¸€ä¸ªæƒŸä¸€çš„è¿›ç¨‹æ ‡è¯†å· PID; åšä¸€ä¸ªçˆ¶è¿›ç¨‹ä¸Šä¸‹æ–‡çš„é€»è¾‘å‰¯æœ¬.ç”±äºŽè¿›ç¨‹çš„æŸäº›éƒ¨åˆ†,å¦‚æ­£æ–‡åŒº,å¯èƒ½è¢«å‡ ä¸ªè¿›ç¨‹æ‰€å…±äº«,æ‰€ä»¥å†…æ ¸æœ‰æ—¶åªè¦å¢žåŠ æŸä¸ªåŒºçš„å¼•ç”¨æ•°å³å¯,è€Œä¸æ˜¯çœŸçš„å°†è¯¥åŒºæ‹·è´åˆ°ä¸€ä¸ªæ–°çš„å†…å­˜ç‰©ç†åŒº; å¢žåŠ ä¸Žè¯¥è¿›ç¨‹ç›¸å…³è”çš„æ–‡ä»¶è¡¨å’Œç´¢å¼•èŠ‚ç‚¹è¡¨çš„å¼•ç”¨æ•°; å¯¹çˆ¶è¿›ç¨‹è¿”å›žå­è¿›ç¨‹çš„è¿›ç¨‹å·,å¯¹å­è¿›ç¨‹è¿”å›žé›¶. ä¸‹é¢æ˜¯ç³»ç»Ÿè°ƒç”¨fork çš„ç®—æ³•.å†…æ ¸é¦–å…ˆç¡®ä¿¡æœ‰è¶³å¤Ÿçš„èµ„æºæ¥å®Œæˆfork. å¦‚æžœèµ„æºä¸æ»¡è¶³è¦æ±‚,åˆ™ç³»ç»Ÿè°ƒç”¨fork å¤±è´¥.å¦‚æžœèµ„æºæ»¡è¶³è¦æ±‚,å†…æ ¸åœ¨è¿›ç¨‹è¡¨ä¸­æ‰¾ä¸€ä¸ªç©ºé¡¹,å¹¶å¼€å§‹æž„é€ å­è¿›ç¨‹çš„ä¸Šä¸‹æ–‡. 12345678910111213141516171819202122232425262728293031323334353637383940414243444546è¾“å…¥:æ— è¾“å‡º:å¯¹çˆ¶è¿›ç¨‹æ˜¯å­è¿›ç¨‹çš„ PID, å¯¹å­è¿›ç¨‹æ˜¯0&#123; æ£€æŸ¥å¯ç”¨çš„å†…æ ¸èµ„æº å–ä¸€ä¸ªç©ºé—²çš„è¿›ç¨‹è¡¨é¡¹å’Œå”¯ä¸€çš„ PID å· æ£€æŸ¥ç”¨æˆ·æ²¡æœ‰è¿‡å¤šçš„è¿è¡Œè¿›ç¨‹ å°†å­è¿›ç¨‹çš„çŠ¶æ€è®¾ç½®ä¸º'åˆ›å»º'çŠ¶æ€ å°†çˆ¶è¿›ç¨‹çš„è¿›ç¨‹è¡¨ä¸­çš„æ•°æ®æ‹·è´åˆ°å­è¿›ç¨‹è¡¨ä¸­ å½“å‰ç›®å½•çš„ç´¢å¼•èŠ‚ç‚¹å’Œæ”¹å˜çš„æ ¹ç›®å½•(å¦‚æžœå¯ä»¥)çš„å¼•ç”¨æ•°åŠ 1 æ–‡ä»¶è¡¨ä¸­çš„æ‰“å¼€æ–‡ä»¶çš„å¼•ç”¨æ•°åŠ 1 åœ¨å†…å­˜ä¸­åšçˆ¶è¿›ç¨‹ä¸Šä¸‹æ–‡çš„æ‹·è´ åœ¨å­è¿›ç¨‹çš„ç³»ç»Ÿçº§ä¸Šä¸‹æ–‡ä¸­åŽ‹å…¥è™šè®¾ç³»ç»Ÿçº§ä¸Šä¸‹æ–‡å±‚ /* è™šè®¾ä¸Šä¸‹æ–‡å±‚ä¸­å«æœ‰ä½¿å­è¿›ç¨‹èƒ½ /* è¯†åˆ«è‡ªå·±çš„æ•°æ®,ä½¿å­è¿›ç¨‹è¢«è°ƒåº¦æ—¶ /* ä»Žè¿™é‡Œå¼€å§‹è¿è¡Œif (æ­£åœ¨æ‰§è¡Œçš„è¿›ç¨‹æ˜¯çˆ¶è¿›ç¨‹)&#123; å°†å­è¿›ç¨‹çš„çŠ¶æ€è®¾ç½®ä¸º'å°±ç»ª'çŠ¶æ€ return (å­è¿›ç¨‹çš„ PID) //ä»Žç³»ç»Ÿåˆ°ç”¨æˆ· &#125; else &#123; åˆå§‹åŒ–è®¡æ—¶åŒº return 0; &#125;&#125; æ¥çœ‹ä¸‹é¢çš„ä¾‹å­.è¯¥ç¨‹åºè¯´æ˜Žçš„æ˜¯ç»è¿‡ç³»ç»Ÿè°ƒç”¨fork ä¹‹åŽ,å¯¹æ–‡ä»¶çš„å…±äº«å­˜å–.ç”¨æˆ·è°ƒç”¨æ”¹ç¨‹åºæ—¶åº”æœ‰ä¸¤ä¸ªå‚æ•°,ä¸€ä¸ªæ˜¯å·²ç»æœ‰çš„æ–‡ä»¶å;å¦ä¸€ä¸ªæ˜¯è¦åˆ›å»ºçš„æ–°æ–‡ä»¶å.è¯¥è¿›ç¨‹æ‰“å¼€å·²æœ‰çš„æ–‡ä»¶,åˆ›å»ºä¸€ä¸ªæ–°æ–‡ä»¶,ç„¶åŽå‡å®šæ²¡æœ‰é‡è§é”™è¯¯,å®ƒè°ƒç”¨fork æ¥åˆ›å»ºä¸€ä¸ªå­è¿›ç¨‹.å­è¿›ç¨‹å¯ä»¥é€šè¿‡ä½¿ç”¨ç›¸åŒçš„æ–‡ä»¶æè¿°ç¬¦æ¥ç»§æ‰¿çš„å­˜å–çˆ¶è¿›ç¨‹çš„æ–‡ä»¶(å³çˆ¶è¿›ç¨‹å·²ç»æ‰“å¼€å’Œåˆ›å»ºçš„æ–‡ä»¶). å½“ç„¶,çˆ¶è¿›ç¨‹å’Œå­è¿›ç¨‹è¦åˆ†åˆ«ç‹¬ç«‹çš„è°ƒç”¨rdwrt å‡½æ•°å¹¶æ‰§è¡Œä¸€ä¸ªå¾ªçŽ¯,å³ä»Žæºæ–‡ä»¶ä¸­è¯»ä¸€ä¸ªå­—èŠ‚,ç„¶åŽå†™ä¸€ä¸ªå­—èŠ‚åˆ°ç›®æ ‡æ–‡ä»¶ä¸­åŽ».å½“ç³»ç»Ÿè°ƒç”¨ read é‡è§æ–‡ä»¶å°¾æ—¶,å‡½æ•°rdwrt ç«‹å³è¿”å›ž. 1234567891011121314151617181920212223242526272829303132#include &lt;fcntl.h&gt;int fdrd, fdwt;char c;main(int argc, char *argv[])&#123; if (argc != 3) &#123; exit(1); &#125; if ((fdrd = open(argv[1], O_RDONLY)) == -1) &#123; exit(1); &#125; if ((fdwt = creat(argv[2], 0666)) == -1) &#123; exit(1); &#125; fork(); // ä¸¤ä¸ªè¿›ç¨‹æ‰§è¡ŒåŒæ ·çš„ä»£ç  rdwrt(); exit(0);&#125;rdwrt()&#123; for (;;) &#123; if (read(fdrd, &amp;c, 1) != 1) &#123; return ; &#125; write(fdwt, &amp;c, 1); &#125;&#125; åœ¨è¿™ä¸ªä¾‹å­ä¸­,ä¸¤ä¸ªè¿›ç¨‹çš„æ–‡ä»¶æè¿°ç¬¦éƒ½æŒ‡å‘ç›¸åŒçš„æ–‡ä»¶è¡¨é¡¹.è¿™ä¸¤ä¸ªè¿›ç¨‹æ°¸è¿œä¸ä¼šè¯»æˆ–å†™åˆ°ç›¸åŒçš„æ–‡ä»¶åç§»é‡,å› ä¸ºå†…æ ¸åœ¨æ¯æ¬¡ read å’Œ write è°ƒç”¨åŽ,éƒ½è¦å¢žåŠ æ–‡ä»¶çš„åç§»é‡.å°½ç®¡ä¸¤ä¸ªè¿›ç¨‹ä¼¼ä¹Žæ˜¯å°†æºæ–‡ä»¶æ‹·è´äº†ä¸¤æ¬¡,ä½†å› ä¸ºå®ƒä»¬åˆ†æ‹…äº†å·¥ä½œä»»åŠ¡,å› æ­¤,ç›®æ ‡æ–‡ä»¶çš„å†…å®¹ä¾èµ–äºŽå†…æ ¸è°ƒåº¦ä¸¤ä¸ªè¿›ç¨‹çš„æ¬¡åº.å¦‚æžœå†…æ ¸è¿™æ ·è°ƒåº¦ä¸¤ä¸ªè¿›ç¨‹:æ˜¯å®ƒä»¬äº¤æ›¿çš„æ‰§è¡Œå®ƒä»¬çš„ç³»ç»Ÿè°ƒç”¨,ç”šè‡³ä½¿å®ƒä»¬äº¤æ›¿çš„æ‰§è¡Œæ¯å¯¹ read å’Œ write è°ƒç”¨,åˆ™ç›®æ ‡æ–‡ä»¶çš„å†…å®¹å’Œæºæ–‡ä»¶çš„å†…å®¹å®Œå…¨ä¸€è‡´.ä½†è€ƒè™‘è¿™æ ·çš„æƒ…å†µ:ä¸¤ä¸ªè¿›ç¨‹æ­£è¦è¯»æºæ–‡ä»¶ä¸­çš„è¿žç»­çš„å­—ç¬¦â€™abâ€™.å‡å®šçˆ¶è¿›ç¨‹è¯»äº†å­—ç¬¦â€™aâ€™,è¿™æ—¶,å†…æ ¸åœ¨çˆ¶è¿›ç¨‹write ä¹‹å‰,åšäº†ä¸Šä¸‹æ–‡åˆ‡æ¢æ¥æ‰§è¡Œå­è¿›ç¨‹ã€‚å¦‚æžœå­è¿›ç¨‹ è¯»åˆ°å­—ç¬¦ â€œbâ€ï¼Œå¹¶åœ¨çˆ¶è¿›ç¨‹è¢«è°ƒåº¦å‰ï¼Œå°†å®ƒå†™åˆ°ç›®æ ‡æ–‡ä»¶ï¼Œé‚£ä¹ˆç›®æ ‡æ–‡ä»¶å°†ä¸å†å«æœ‰ å­—ç¬¦ä¸² â€œabâ€ï¼Œè€Œæ˜¯å«æœ‰ â€œbaâ€äº†ã€‚å†…æ ¸å¹¶ä¸ä¿è¯è¿›ç¨‹æ‰§è¡Œçš„ç›¸å¯¹é€ŸçŽ‡ã€‚ å¦ä¸€ä¸ªä¾‹å­: 123456789101112131415161718192021222324252627282930313233343536373839404142434445#include &lt;string.h&gt;char string[] = "Hello, world";main()&#123; int count, i; int to_par[2], to_chil[2]; // åˆ°çˆ¶ã€å­è¿›ç¨‹çš„ç®¡é“ char buf[256]; pipe(to_par); pipe(to_chil); if (fork() == 0) &#123; // å­è¿›ç¨‹åœ¨æ­¤æ‰§è¡Œ close(0); // å…³é—­è€çš„æ ‡å‡†è¾“å…¥ dup(to_child[0]); // å°†ç®¡é“çš„è¯»å¤åˆ¶åˆ°æ ‡å‡†è¾“å…¥ close(1); // å…³é—­è€çš„æ ‡å‡†è¾“å‡º dup(to_par[1]); // å°†ç®¡é“çš„å†™å¤åˆ¶åˆ°æ ‡å‡†è¾“å‡º close(to_par[1]); // å…³é—­ä¸å¿…è¦çš„ç®¡é“æè¿°ç¬¦ close(to_chil[0]); close(to_par[0]); close(to_chil[1]); for (;;) &#123; if ((count = read(0, buf, sizeof(buf)) == 0) exit(); write(1, buf, count); &#125; &#125; // çˆ¶è¿›ç¨‹åœ¨æ­¤æ‰§è¡Œ close(1); // é‡æ–°è®¾ç½®æ ‡å‡†è¾“å…¥ã€è¾“å‡º dup(to_chil[1]); close(0); dup(to_par[0]); close(to_chil[1]); close(to_par[0]); close(to_chil[0]); close(to_par[1]); for (i = 0; i &lt; 15; i++) &#123; write(1, string, strlen(string)); read(0, buf, sizeof(buf)); &#125;&#125; å­è¿›ç¨‹ä»Žçˆ¶è¿›ç¨‹ç»§æ‰¿äº†æ–‡ä»¶æè¿°ç¬¦0å’Œ1(æ ‡å‡†è¾“å…¥å’Œæ ‡å‡†è¾“å‡º)ã€‚ä¸¤æ¬¡æ‰§è¡Œç³»ç»Ÿè°ƒç”¨ pipe åˆ†åˆ«åœ¨æ•°ç»„ to_par å’Œ to_chil ä¸­åˆ†é…äº†ä¸¤ä¸ªæ–‡ä»¶æè¿°ç¬¦ã€‚ç„¶åŽè¯¥è¿›ç¨‹ æ‰§è¡Œç³»ç»Ÿè°ƒç”¨ forkï¼Œå¹¶å¤åˆ¶è¿›ç¨‹ä¸Šä¸‹æ–‡ï¼šè±¡å‰ä¸€ä¸ªä¾‹å­ä¸€æ ·ï¼Œæ¯ä¸ªè¿›ç¨‹å­˜å– è‡ªå·±çš„ç§æœ‰æ•°æ®ã€‚çˆ¶è¿›ç¨‹å…³é—­ä»–çš„æ ‡å‡†è¾“å‡ºæ–‡ä»¶(æ–‡ä»¶æè¿°ç¬¦1)ï¼Œå¹¶å¤åˆ¶(dup)ä»Žç®¡é“ çº¿ to_chil è¿”å›žçš„å†™æ–‡ä»¶æè¿°ç¬¦ã€‚å› ä¸ºåœ¨çˆ¶è¿›ç¨‹æ–‡ä»¶æè¿°ç¬¦è¡¨ä¸­çš„ç¬¬ä¸€ä¸ªç©ºæ§½æ˜¯åˆšåˆš ç”±å…³é—­è…¾å‡ºæ¥çš„ï¼Œæ‰€ä»¥å†…æ ¸å°†ç®¡é“çº¿å†™æ–‡ä»¶æè¿°ç¬¦å¤åˆ¶åˆ°äº†æ–‡ä»¶æè¿°ç¬¦è¡¨ä¸­çš„ç¬¬ä¸€ é¡¹ä¸­ï¼Œè¿™æ ·ï¼Œæ ‡å‡†è¾“å‡ºæ–‡ä»¶æè¿°ç¬¦å˜æˆäº†ç®¡é“çº¿ to_chil çš„å†™æ–‡ä»¶æè¿°ç¬¦ã€‚ çˆ¶è¿›ç¨‹ä»¥ç±»ä¼¼çš„æ“ä½œå°†æ ‡å‡†è¾“å…¥æ–‡ä»¶æè¿°ç¬¦æ›¿æ¢ä¸ºç®¡é“çº¿ to_par çš„è¯»æ–‡ä»¶ æè¿°ç¬¦ã€‚ä¸Žæ­¤ç±»ä¼¼ï¼Œå­è¿›ç¨‹å…³é—­ä»–çš„æ ‡å‡†è¾“å…¥æ–‡ä»¶(æ–‡ä»¶æè¿°ç¬¦0)ï¼Œç„¶åŽå¤åˆ¶ (dup) ç®¡é“ çº¿ to_chil çš„è¯»æ–‡ä»¶æè¿°ç¬¦ã€‚ç”±äºŽæ–‡ä»¶æè¿°ç¬¦è¡¨çš„ç¬¬ä¸€ä¸ªç©ºé¡¹æ˜¯åŽŸå…ˆçš„æ ‡å‡† è¾“å…¥é¡¹ï¼Œæ‰€ä»¥å­è¿›ç¨‹çš„æ ‡å‡†è¾“å…¥å˜æˆäº†ç®¡é“çº¿ to_chil çš„è¯»æ–‡ä»¶æè¿°ç¬¦ã€‚ å­è¿›ç¨‹åšä¸€ç»„ç±»ä¼¼çš„æ“ä½œä½¿ä»–çš„æ ‡å‡†è¾“å‡ºå˜æˆç®¡é“çº¿ to_par çš„å†™æ–‡ä»¶æè¿° ç¬¦ã€‚ç„¶åŽä¸¤ä¸ªè¿›ç¨‹å…³é—­ä»Ž pipe è¿”å›žçš„æ–‡ä»¶æè¿°ç¬¦ã€‚ä¸Šè¿°æ“ä½œçš„ç»“æžœæ˜¯ï¼šå½“ çˆ¶è¿›ç¨‹å‘æ ‡å‡†è¾“å‡ºå†™ä¸œè¥¿çš„æ—¶å€™ï¼Œä»–å®žé™…ä¸Šæ˜¯å†™å‘ to_chilâ€“å‘å­è¿›ç¨‹å‘é€ æ•°æ®ï¼Œè€Œå­è¿›ç¨‹åˆ™ä»Žä»–çš„æ ‡å‡†è¾“å…¥è¯»ç®¡é“çº¿ã€‚å½“å­è¿›ç¨‹å‘ä»–çš„æ ‡å‡†è¾“å‡ºå†™çš„æ—¶å€™ï¼Œ ä»–å®žé™…ä¸Šæ˜¯å†™å…¥ to_parâ€“å‘çˆ¶è¿›ç¨‹å‘é€æ•°æ®ï¼Œè€Œçˆ¶è¿›ç¨‹åˆ™ä»Žä»–çš„æ ‡å‡†è¾“å…¥ æŽ¥æ”¶æ¥è‡ªç®¡é“çº¿çš„æ•°æ®ã€‚ä¸¤ä¸ªè¿›ç¨‹é€šè¿‡ä¸¤æ¡ç®¡é“çº¿äº¤æ¢æ¶ˆæ¯ã€‚ æ— è®ºä¸¤ä¸ªè¿›ç¨‹æ‰§è¡Œçš„é¡ºåºå¦‚ä½•ï¼Œè¿™ä¸ªç¨‹åºæ‰§è¡Œçš„ç»“æžœæ˜¯ä¸å˜çš„ã€‚ä»–ä»¬å¯èƒ½åŽ»æ‰§è¡Œç¡çœ  å’Œå”¤é†’æ¥ç­‰å¾…å¯¹æ–¹ã€‚çˆ¶è¿›ç¨‹åœ¨15æ¬¡å¾ªçŽ¯åŽé€€å‡ºã€‚ç„¶åŽå­è¿›ç¨‹å› ç®¡é“çº¿æ²¡æœ‰å†™è¿›ç¨‹è€Œè¯» åˆ°â€œæ–‡ä»¶å°¾â€æ ‡å¿—ï¼Œå¹¶é€€å‡ºã€‚ Windowsè¿›ç¨‹è¿›ç¨‹ PIDwindows ä¹Ÿæ˜¯ä½¿ç”¨ PID æ¥å”¯ä¸€æ ‡è¯†ä¸€ä¸ªè¿›ç¨‹. åœ¨ä¸€ä¸ªè¿›ç¨‹å†…éƒ¨,ä½¿ç”¨è¿›ç¨‹å¥æŸ„æ¥æ ‡è¯†å…³æ³¨çš„æ¯ä¸ªè¿›ç¨‹.ä½¿ç”¨ Windows API ä»Žè¿›ç¨‹ PID èŽ·å–è¿›ç¨‹å¥æŸ„: 1OpenProcess(PROCESS_ALL_ACCESS, TRUE, procId); //æˆ–è€…PROCESS_QUERY_INFORMATION ä½¿ç”¨ API å‡½æ•°: GETModuleFileNameEx æˆ– GetProcessImageFileName æˆ–QUeryFullProcessImageName æŸ¥è¯¢è¿›ç¨‹çš„ exe æ–‡ä»¶å,ä½¿ç”¨ API å‡½æ•° GetCurrentProcesså¯ä»¥èŽ·å–æœ¬è¿›ç¨‹çš„ä¼ªå¥æŸ„(å€¼ä¸º-1),åªèƒ½ç”¨äºŽæœ¬è¿›ç¨‹çš„ API å‡½æ•°è°ƒç”¨;ä¸èƒ½è¢«å…¶ä»–è¿›ç¨‹ç»§æ‰¿æˆ–å¤åˆ¶.å¯ç”¨ API å‡½æ•° DuplicateHandle èŽ·å¾—è¿›ç¨‹çš„çœŸå¥æŸ„. Windowsåˆ›å»ºè¿›ç¨‹Windows ç³»ç»Ÿä½¿ç”¨ CreateProcess åˆ›å»ºè¿›ç¨‹, WaitForSingleObject å¯ç­‰å¾…å­è¿›ç¨‹çš„ç»“æŸ.ä¾‹å¦‚: 12345678910111213141516171819202122232425262728293031#include &lt;windows.h&gt;#include &lt;stdio.h&gt;#include &lt;tchar.h&gt;void main() &#123; STARTUPINFO si; PROCESS_INFORMATION pi; ZeroMemory(&amp;si, sizeof(si)); si.cb = sizeof(si); ZeroMemory(&amp;pi, sizeof(pi)); // Start the child process. if (!CreateProcess(NULL, // No module name (use command line) "demo.exe arg1", // Command line NULL, // Process handle not inheritable NULL, // Thread handle not inheritable FALSE, // Set handle inheritance to FALSE 0, // No creation flags NULL, // Use parent's environment block NULL, // Use parent's starting directory &amp;si, // Pointer to STARTUPINFO structure &amp;pi) // Pointer to PROCESS_INFORMATION structure,ç”¨äºŽç»™å‡ºå­è¿›ç¨‹ä¸»çª—å£çš„å±žæ€§ ) &#123; printf("CreateProcess failed (%d).\n", GetLastError()); return; &#125; // Wait until child process exits. WaitForSingleObject(pi.hProcess, INFINITE); // Close process and thread handles. CloseHandle(pi.hProcess); CloseHandle(pi.hThread);&#125; çˆ¶å­è¿›ç¨‹å…³ç³»åˆ›å»ºçš„å­è¿›ç¨‹å¯ä»¥ç»§æ‰¿çˆ¶è¿›ç¨‹çš„: CreateFile è¿”å›žçš„æ‰“å¼€å¥æŸ„,åŒ…æ‹¬æ–‡ä»¶,æŽ§åˆ¶å°è¾“å…¥ç¼“å†²åŒº,æŽ§åˆ¶å°å±å¹•ç¼“å†²åŒº,å‘½åç®¡é“,ä¸²å£é€šä¿¡è®¾å¤‡,é‚®æ§½; æ‰“å¼€çš„å¥æŸ„,åŒ…æ‹¬:è¿›ç¨‹,çº¿ç¨‹,äº’æ–¥é”,äº‹ä»¶å¯¹è±¡,ä¿¡å·é‡,å‘½åç®¡é“,åŒ¿åç®¡é“,æ–‡ä»¶æ˜ å°„å¯¹è±¡; çŽ¯å¢ƒå˜é‡; å½“å‰ç›®å½•; æŽ§åˆ¶å°,é™¤éžè¿›ç¨‹è„±ç¦»( detach)æˆ–åˆ›å»ºäº†æ–°çš„æŽ§åˆ¶å°; é”™è¯¯æ¨¡å¼,ä½¿ç”¨ API å‡½æ•° SetErrorMode è®¾ç½®; è¿›ç¨‹äº²å’ŒæŽ©ç ( affinity mask),ç”¨ä»¥æŒ‡ç¤ºæœŸæœ›ä½¿ç”¨ CPU çš„å“ªäº›æ ¸; åœ¨å“ªä¸ªä»»åŠ¡ä¸­. å­è¿›ç¨‹ä¸èƒ½ç»§æ‰¿: ä¼˜å…ˆçº§ç±»åˆ« Priority class; å¥æŸ„,æœ‰ LocalAlloc,GlobalAlloc,HeapCreate,HeapAlloc è¿”å›ž; ä¼ªå¥æŸ„,æœ‰ GetCurrentProcessæˆ– GetCurrentThread è¿”å›ž; DLL æ¨¡å—å¥æŸ„,ç”± LoadLibrary è¿”å›ž; GDI å¯¹è±¡å¥æŸ„æˆ– USER å¯¹è±¡å¥æŸ„,å¦‚ HBITMAP æˆ– HMENU. ä¸ºç»§æ‰¿å¥æŸ„,çˆ¶è¿›ç¨‹åœ¨åˆ›å»º(æˆ–è€…ä»£å¼€,å¤åˆ¶)å„ç§å¯ç»§æ‰¿å¯¹è±¡å¥æŸ„æ—¶,åœ¨ SECURITY_ATTRIBUTES ç»“æž„çš„ blnheritHandle æˆå‘˜ä¸º TRUE. åœ¨ CreateProcess çš„blnheritHandles å‚æ•°ä¸º TRUE; å¦‚æžœè¦ç»§æ‰¿æ ‡å‡†è¾“å…¥,æ ‡å‡†è¾“å‡º,æ ‡å‡†é”™è¯¯çš„å¥æŸ„, STARTUPINFO ç»“æž„çš„ dwFlags æˆå‘˜åŒ…å« STARTF_USESTDHANDLES æ ‡å¿—ä½. èŽ·å–è¿›ç¨‹ä¿¡æ¯çš„ç›¸å…³å‡½æ•° GetCommandLineï¼šå½“å‰è¿›ç¨‹çš„å‘½ä»¤è¡Œå­—ç¬¦ä¸² GetStartupInfoï¼šå½“å‰è¿›ç¨‹è¢«åˆ›å»ºæ—¶çš„STARTUPINFOç»“æž„ GetProcessVersionï¼šèŽ·å–å¯æ‰§è¡Œå¤´çš„ç‰ˆæœ¬ä¿¡æ¯ GetModuleFileNameï¼šèŽ·å–åŒ…å«äº†è¿›ç¨‹ä»£ç çš„å¯æ‰§è¡Œæ–‡ä»¶çš„å…¨è·¯å¾„ä¸Žæ–‡ä»¶å GetGuiResourcesï¼šèŽ·å–ä½¿ç”¨ä¸­çš„GUIå¯¹è±¡çš„å¥æŸ„æ•°é‡ IsDebuggerPresentï¼šç¡®å®šè¿›ç¨‹æ˜¯å¦è¢«è°ƒè¯• GetProcessIoCountersï¼šèŽ·å–è¿›ç¨‹æ‰§è¡Œçš„æ‰€æœ‰I/Oæ“ä½œçš„è–„è®°ä¿¡æ¯ã€‚ GetProcessMemoryInfoï¼šèŽ·å–è¿›ç¨‹çš„å·¥ä½œé›†å†…å­˜çš„ä¿¡æ¯ GetProcessWorkingSetSizeï¼šèŽ·å–è¿›ç¨‹çš„å·¥ä½œé›†å†…å­˜è¢«å…è®¸çš„ä¸‹é™ä¸Žä¸Šé™ SetProcessWorkingSetSizeï¼šè®¾ç½®è¿›ç¨‹çš„å·¥ä½œé›†å†…å­˜çš„ä¸‹é™ä¸Žä¸Šé™ è¿›ç¨‹ç»ˆç»“å­è¿›ç¨‹ç»ˆæ­¢æ—¶,æ‰€æœ‰æ‰“å¼€çš„å¥æŸ„è¢«å…³é—­,è¿›ç¨‹å¯¹è±¡è¢«å¤„ç½š( signaled).è¿›ç¨‹çš„é€€å‡ºç ( exit code)æˆ–è€… ExitProcess,TerminateProcess å‡½æ•°ä¸­æŒ‡å‡º,æˆ–è€…æ˜¯ main,WinMain å‡½æ•°è¿”å›žå€¼.å¦‚æžœè¿›ç¨‹ç”±äºŽä¸€ä¸ªè‡´å‘½å¼‚å¸¸(fatal exception)è€Œç»ˆæ­¢,é€€å‡ºç æ˜¯è¿™ä¸ªå¼‚å¸¸å€¼,åŒæ—¶è¿›ç¨‹çš„æ‰€æœ‰æ‰§è¡Œä¸­çš„çº¿ç¨‹çš„é€€å‡ºç ä¹Ÿæ˜¯è¿™ä¸ªå¼‚å¸¸å€¼. ä¼˜é›…çš„å…³é—­å…¶ä»–è¿›ç¨‹çš„æ–¹æ³•ä½¿ç”¨RegisterWindowMessage ç™»è®°ç§æœ‰æ¶ˆæ¯,ç”¨ BroadcastSystemMessage æ’­æ”¾æ¶ˆæ¯,æ”¶åˆ°æ¶ˆæ¯çš„è¿›ç¨‹ç”¨ExitProcesså…³é—­. èŽ·å–ç‰¹å®šåå­—çš„è¿›ç¨‹ PIDå¦‚æžœæƒ³è¦èŽ·å–ç‰¹å®šåå­—çš„è¿›ç¨‹çš„IDï¼Œéœ€è¦æžšä¸¾æ‰€æœ‰è¿›ç¨‹ã€‚ä¼ ç»ŸåŠžæ³•æ˜¯CreateToolhelp32Snapshotã€Process32Firstã€Process32Nextå‡½æ•°ï¼›ä¹Ÿå¯ä»¥ä½¿ç”¨EnumProcessesã€EnumProcessModuleså‡½æ•°æ¥èŽ·å–æ‰€æœ‰çš„è¿›ç¨‹IDï¼Œä¸€ä¸ªè¿›ç¨‹çš„æ‰€æœ‰æ¨¡å—çš„å¥æŸ„ã€‚ç¤ºä¾‹å¦‚ä¸‹: 1234567891011121314151617181920212223242526272829303132333435363738394041424344PROCESSENTRY32 pe32;HANDLE hSnaphot;HANDLE hApp;DWORD dProcess;hSnaphot = CreateToolhelp32Snapshot(TH32CS_SNAPPROCESS, 0); // èŽ·å–è¿›ç¨‹å¿«ç…§Process32First(hSnaphot, &amp;pe32); // æžšä¸¾ç¬¬ä¸€ä¸ªè¿›ç¨‹do &#123; if (lstrcmpi(pe32.szExeFile, _T("NotePad.exe")) == 0) &#123; // æŸ¥æ‰¾è¿›ç¨‹åç§°ä¸º NotePad.exe dProcess = pe32.th32ProcessID; break; &#125;&#125; while (Process32Next(hSnaphot, &amp;pe32)); // ä¸æ–­å¾ªçŽ¯ç›´åˆ°æžšä¸¾ä¸åˆ°è¿›ç¨‹hApp = OpenProcess(PROCESS_VM_OPERATION | SYNCHRONIZE, FALSE, dProcess); // æ ¹æ®è¿›ç¨‹ ID èŽ·å–ç¨‹åºçš„å¥æŸ„if (!WaitForSingleObject(hApp, INFINITE)) // ç­‰å¾…è¿›ç¨‹å…³é—­ AfxMessageBox(" è®°äº‹æœ¬å·²ç»å…³é—­ï¼");// å¦ä¸€ç§æ–¹æ³•DWORD aProcId[1024], dwProcCnt, dwModCnt;HMODULE hMod[1000];TCHAR szPath[MAX_PATH];// æžšä¸¾å‡ºæ‰€æœ‰è¿›ç¨‹IDif (!EnumProcesses(aProcId, sizeof(aProcId), &amp;dwProcCnt)) &#123; //cout &lt;&lt; "EnumProcesses error: " &lt;&lt; GetLastError() &lt;&lt; endl; return 0;&#125;// éä¾‹æ‰€æœ‰è¿›ç¨‹for (DWORD i = 0; i &lt; dwProcCnt; ++i) &#123; // æ‰“å¼€è¿›ç¨‹ï¼Œå¦‚æžœæ²¡æœ‰æƒé™æ‰“å¼€åˆ™è·³è¿‡ HANDLE hProc = OpenProcess(PROCESS_ALL_ACCESS, FALSE, aProcId[i]); if (NULL != hProc) &#123; // æ‰“å¼€è¿›ç¨‹çš„ç¬¬1ä¸ªModuleï¼Œå¹¶æ£€æŸ¥å…¶åç§°æ˜¯å¦ä¸Žç›®æ ‡ç›¸ç¬¦ if (EnumProcessModules(hProc, &amp;hMod, 1000, &amp;dwModCnt)) &#123; GetModuleBaseName(hProc, hMod, szPath, MAX_PATH); if (0 == lstrcmpi(szPath, lpName)) &#123; CloseHandle(hProc); return aProcId[i]; &#125; &#125; CloseHandle(hProc); &#125;&#125;return 0;]]></content>
      <categories>
        <category>å¹¶å‘ç¼–ç¨‹</category>
      </categories>
  </entry>
  <entry>
    <title><![CDATA[ç½‘ç»œç¼–ç¨‹ï¼ˆå…­ï¼‰]]></title>
    <url>%2F2018%2F11%2F11%2F%E7%BD%91%E7%BB%9C%E7%BC%96%E7%A8%8B-%E5%85%AD%2F</url>
    <content type="text"><![CDATA[å‰è¨€åœ¨ä¸Šç¯‡æ–‡ç« è§£å†³äº† TCP å’Œ UDP å¹¶å‘çš„é—®é¢˜,æ˜¯é€šè¿‡ä¸€ä¸ª socketserveræ¨¡å—å®žçŽ°çš„,é‚£ä¹ˆè¿™ä¸ªæ¨¡å—åˆ°åº•åšäº†ä»€ä¹ˆå¯ä»¥å®žçŽ°å¹¶å‘çš„æ•ˆæžœå‘¢? socketserver æºç åˆ†æžè¿›å…¥ socketserver ä¸­æŸ¥çœ‹æ³¨é‡Š: ç¿»è¯‘å¦‚ä¸‹: é€šç”¨å¥—æŽ¥å­—æœåŠ¡ç±» è¯¥æ¨¡å—è¯•å›¾æ•èŽ·å®šä¹‰æœåŠ¡å™¨çš„å„ä¸ªæ–¹é¢ åŸºäºŽå¥—æŽ¥å­—çš„æœåŠ¡å™¨ åŸºäºŽè¯·æ±‚çš„æœåŠ¡å™¨ åœ¨è¿›ä¸€æ­¥æŸ¥çœ‹è¯·æ±‚ä¹‹å‰è¿›è¡Œå®¢æˆ·åœ°å€éªŒè¯,(è¿™å®žé™…ä¸Šæ˜¯ä¸€ä¸ªé’©å­,ç”¨äºŽä»»ä½•éœ€è¦åœ¨è¿›è¡Œå…¶ä»–æ“ä½œä¹‹å‰æŸ¥çœ‹è¯·æ±‚çš„å¤„ç†) å¦‚ä½•å¤„ç†å¤šä¸ªè¯·æ±‚: â€‹ åŒæ­¥(ä¸€æ¬¡å¤„ç†ä¸€ä¸ªè¯·æ±‚) â€‹ åˆ†å‰(æ¯ä¸ªè¯·æ±‚ç”±ä¸€ä¸ªæ–°è¿›ç¨‹å¤„ç†) â€‹ çº¿ç¨‹åŒ–(æ¯ä¸ªè¯·æ±‚ç”±ä¸€ä¸ªæ–°çº¿ç¨‹å¤„ç†) è¿™ä¸ªæ¨¡å—çš„ç±»å–œæ¬¢ç¼–å†™æœ€ç®€å•çš„æœåŠ¡å™¨ç±»åž‹:ä¸€ä¸ªåŒæ­¥çš„ TCP/IP æœåŠ¡å™¨.è¿™æ˜¯ç³Ÿç³•çš„è®¾è®¡,ä½†æ˜¯èŠ‚çœäº†ä¸€äº›è¾“å…¥.(è¿˜æœ‰ä¸€ä¸ªé—®é¢˜æ˜¯,æ·±åº¦ç±»å±‚æ¬¡ç»“æž„ä¼šå‡æ…¢æ–¹æ³•æŸ¥æ‰¾çš„é€Ÿåº¦) åœ¨ç»§æ‰¿å…³ç³»å›¾ä¸­æœ‰äº”ä¸ªç±»,å…¶ä¸­å››ä¸ªè¡¨ç¤ºå››ç§ç±»åž‹çš„åŒæ­¥æœåŠ¡å™¨: æ³¨æ„UnixDatagramServer ç»§æ‰¿äºŽ UDPServer, è€Œä¸æ˜¯ UnixStreamServerâ€“IP å’Œ Unix æœåŠ¡å™¨ä¹‹é—´çš„å”¯ä¸€åŒºåˆ«æ˜¯åœ°å€æ—,è¿™åœ¨ä¸¤ä¸ª Unix æœåŠ¡å™¨ç±»ä¸­éƒ½æ˜¯é‡å¤çš„. å¯ä»¥ä½¿ç”¨FrokingMixIn å’ŒThreadingMixIn æ··åˆç±»åˆ›å»ºæ¯ç§ç±»åž‹æœåŠ¡å™¨çš„è¿›ç¨‹å’Œçº¿ç¨‹ç‰ˆæœ¬.ä¾‹å¦‚,åˆ›å»ºä¸€ä¸ªçº¿ç¨‹ UDP æœåŠ¡å™¨å¦‚ä¸‹æ‰€ç¤º: 12class ThreadingUDPServer(ThreadingMixIn, UDPServer): pass æ··åˆç±»å¿…é¡»é¦–å…ˆå‡ºçŽ°,å› ä¸ºå®ƒè¦†ç›–äº† UDPServer ä¸­å®šä¹‰çš„æ–¹æ³•,è®¾ç½®å„ç§æˆå‘˜å˜é‡è¿˜ä¼šæ”¹å˜åº•å±‚æœåŠ¡å™¨æœºåˆ¶çš„è¡Œä¸º. è¦å®žçŽ°æœåŠ¡,å¿…é¡»ä»Ž BaseRequestHandler æ´¾ç”Ÿä¸€ä¸ªç±»,å¹¶é‡æ–°å®šä¹‰å®ƒçš„ handle() æ–¹æ³•.ç„¶åŽ,ä½ å¯ä»¥é€šè¿‡å°†ä¸€ä¸ªæœåŠ¡å™¨ç±»ä¸Žè¯·æ±‚å¤„ç†ç¨‹åºç±»ç»„åˆåœ¨ä¸€èµ·æ¥è¿è¡ŒæœåŠ¡çš„ä¸åŒç‰ˆæœ¬. å¯¹äºŽæ•°æ®æŠ¥æˆ–æµå¼æœåŠ¡å™¨,è¯·æ±‚å¤„ç†ç¨‹åºç±»å¿…é¡»æ˜¯ä¸åŒçš„.è¿™å¯ä»¥é€šè¿‡ä½¿ç”¨è¯·æ±‚å¤„ç†ç¨‹åºå­ç±» StreamRequestHandler æˆ– DatagramRequestHandler ç±»æ¥éšè—. å½“ç„¶,ä½ è¿˜å¾—åŠ¨åŠ¨è„‘å­. ä¾‹å¦‚,å¦‚æžœæœåŠ¡åœ¨å†…å­˜ä¸­åŒ…å«å¯ä»¥ç”±è¯·æ±‚ä¿®æ”¹çš„çŠ¶æ€,é‚£ä¹ˆä½¿ç”¨è¿›ç¨‹æœåŠ¡å™¨æ˜¯æ²¡æœ‰æ„ä¹‰çš„(å› ä¸ºå­è¿›ç¨‹ä¸­çš„ä¿®æ”¹æ°¸è¿œä¸ä¼šè¾¾åˆ°çˆ¶è¿›ç¨‹ä¸­ä¿ç•™å¹¶ä¼ é€’ç»™æ¯ä¸ªå­è¿›ç¨‹çš„åˆå§‹çŠ¶æ€).åœ¨è¿™ç§æƒ…å†µä¸‹,ä½ å¯ä»¥ä½¿ç”¨çº¿ç¨‹åŒ–æœåŠ¡å™¨,ä½†æ˜¯ä½ å¯èƒ½å¿…é¡»ä½¿ç”¨é”æ¥é¿å…å‡ ä¹ŽåŒæ—¶å‡ºçŽ°çš„ä¸¤ä¸ªè¯·æ±‚,ä»¥å¯¹æœåŠ¡å™¨çŠ¶æ€åº”ç”¨å†²çªæ›´æ”¹. å¦ä¸€æ–¹é¢,å¦‚æžœä½ æ­£åœ¨æž„å»ºä¸€ä¸ª HTTP æœåŠ¡å™¨,å…¶ä¸­æ‰€æœ‰æ•°æ®éƒ½å­˜å‚¨åœ¨å¤–éƒ¨(ä¾‹å¦‚æ–‡ä»¶ç³»ç»Ÿä¸­),åŒæ­¥ç±»æœ¬è´¨ä¸Šæ˜¯åœ¨å¤„ç†ä¸€ä¸ªè¯·æ±‚æ—¶ä½¿æœåŠ¡â€™å¬ä¸è§â€™,å¦‚æžœå®¢æˆ·ç«¯è¯»å–å…¶è¯·æ±‚çš„æ‰€æœ‰æ•°æ®å¾ˆæ…¢,é‚£ä¹ˆè¿™ç§æƒ…å†µå¯èƒ½ä¼šæŒç»­å¾ˆé•¿æ—¶é—´,åœ¨è¿™é‡Œ,çº¿ç¨‹æˆ–è¿›ç¨‹æœåŠ¡å™¨æ˜¯åˆé€‚çš„. åœ¨æŸäº›æƒ…å†µä¸‹,åŒæ­¥çš„å¤„ç†è¯·æ±‚çš„ä¸€éƒ¨åˆ†å¯èƒ½æ˜¯åˆé€‚çš„,ä½†æ ¹æ®è¯·æ±‚æ•°æ®åœ¨è¿›ç¨‹å­èŠ‚ç‚¹ä¸­å®Œæˆå¤„ç†å¯èƒ½æ˜¯åˆé€‚çš„.è¿™å¯ä»¥é€šè¿‡ä½¿ç”¨åŒæ­¥æœåŠ¡å™¨å’Œåœ¨è¯·æ±‚å¤„ç†ç¨‹åºç±» handle() æ–¹æ³•ä¸­æ‰§è¡Œæ˜¾å¼è¿›åŸŽæ¥å®žçŽ°. å¤„ç†å¤šä¸ªåŒæ—¶è¯·æ±‚çš„å¦ä¸€ç§æ–¹æ³•æ—¢ä¸æ”¯æŒçº¿ç¨‹ä¹Ÿä¸æ”¯æŒè¿›ç¨‹çš„çŽ¯å¢ƒ(è¿™äº›çŽ¯å¢ƒå¤ªæ˜‚è´µæˆ–ä¸é€‚åˆæœåŠ¡)æ˜¯ç»´æŒä¸€ä¸ªéƒ¨åˆ†å®Œæˆçš„è¯·æ±‚çš„æ˜¾å¼è¡¨å’Œä½¿ç”¨é€‰æ‹©å™¨å†³å®šä¸‹ä¸€ä¸ªè¦å¤„ç†çš„è¯·æ±‚(æˆ–è€…æ˜¯å¦å¤„ç†æ–°çš„è¯·æ±‚)å¯¹å¯¹æµæœåŠ¡å°¤ä¸ºé‡è¦.æ¯ä¸ªå®¢æˆ·ç«¯å¯èƒ½é•¿æ—¶é—´è¿žæŽ¥çš„åœ°æ–¹.(å¦‚æžœçº¿ç¨‹æˆ–å­çº¿ç¨‹ä¸èƒ½ä½¿ç”¨) æœªæ¥çš„å·¥ä½œ: â€‹ Sun RPC çš„æ ‡å‡†ç±»(ä½¿ç”¨ TCP æˆ– UDP) â€‹ æ ‡å‡†æ··åˆç±»å®žçŽ°å„ç§èº«ä»½éªŒè¯ æ€»ç»“: ä¸Šé¢çš„ç¿»è¯‘æ˜¯ socketserver çš„æ³¨é‡Šç¿»è¯‘,èƒ½å¤Ÿæ˜¯æˆ‘ä»¬å¤§è‡´äº†è§£è¯¥æ¨¡å—çš„å·¥ä½œæµç¨‹.é‚£ä¹ˆå½“æˆ‘ä»¬è‡ªå®šä¹‰è‡ªå·±çš„ç±»æ˜¯å¦‚ä½•è¿›è¡Œå®žä¾‹åŒ–å¾—å‘¢? ç»“åˆæºç æŸ¥çœ‹è‡ªå®šä¹‰ç±»çš„æ­¥éª¤è¯¥æ¨¡å—åˆ†ä¸ºä¸¤å¤§ç±»: server ç±»(è§£å†³è¿žæŽ¥é—®é¢˜)å’Œ request ç±»(è§£å†³é€šä¿¡é—®é¢˜) server ç±»ç»§æ‰¿å…³ç³»: request ç±»ç»§æ‰¿å…³ç³»: æ€»ç»“ç»§æ‰¿å…³ç³»: ä»¥ä¸‹è¿°ä»£ç ä¸ºä¾‹,åˆ†æž socketserver æºç : æœåŠ¡ç«¯ 12345678910111213141516171819202122232425262728293031323334353637383940414243import socketserverimport jsonimport structimport osclass FtpServer(socketserver.BaseRequestHandler): coding = 'utf-8' server_dir = 'file_upload' max_packet_size = 1024 BASE_DIR = os.path.dirname(os.path.abspath(__file__)) def handle(self): print(self.request) while True: data = self.request.recv(4) data_len = struct.unpack('i', data)[0] head_json = self.request.recv(data_len).decode(self.coding) head_dic = json.loads(head_json) cmd = head_dic['cmd'] if hasattr(self, cmd): func = getattr(self, cmd) func(head_dic) def put(self, args): file_path = os.path.normpath(os.paht.join( self.BASE_DIR, self.server_dir, args['filename'])) filesize = args['filesize'] recv_size = 0 print('----&gt;', file_path) with open(file_path, 'wb') as f: while recv_size &lt; filesize: recv_data = self.request.recv(self.max_packet_size) f.write(recv_data) recv_size += len(recv_size) print('recvsize: %s filessize: %s' % (recv_size, filesize))ftpserver = socketserver.ThreadingTCPServer(('', 8080), FtpServer)ftpserver.serve_forever() å®¢æˆ·ç«¯ 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667686970import socketimport structimport jsonimport osclass MyTCPClient: address_family = socket.AF_INET socket_type = socket.SOCK_STREAM allow_reuse_address = False max_packet_size = 8192 coding = 'utf-8' request_queue_size = 5 def __init__(self, server_address, connect=True): self.server_address = server_address self.socket = socket.socket(self.address_family, self.socket_type) if connect: try: self.client_connect() except: self.client_close() raise def client_connect(self): self.socket.connect(self.server_address) def client_close(self): self.socket.close() def run(self): while True: inp = input('&gt;&gt;&gt;:').strip() if not inp: continue l = inp.split() cmd = l[0] if hasattr(self, cmd): func = getattr(self, cmd) func(l) def put(self, args): cmd = args[0] filename = args[1] if not os.path.isfile(filename): print('file: %s is not exist' % filenam) return else: filesize = os.path.getsize(filename) head_dic = &#123;'cmd': cmd, 'filename': os.path.basename(filename), 'filesize': filesize&#125; print(head_dic) head_json = json.dumps(head_dic) head_json_bytes = bytes(head_json, encoding=self.coding) head_struct = struct.pack('i', len(head_json_bytes)) self.scoket.send(head_struct) self.socket.send(head_json_bytes) send_size = 0 with open(filename, 'rb') as f: for line im f: self.socket.send(line) send_size += len(line) print(send_size) else: print('upload successful') client = MyTCPClient(('', 8080))client.run() ä»¥ä¸Šè¿°ä»£ç ä¸ºä¾‹,åˆ†æž socketserveræºç : 12ftpserver = socketserver.ThreadingTCPServer(('', 8080))ftpserver.serve_forever() æŸ¥æ‰¾å±žæ€§çš„é¡ºåºå¯ä»¥ä»Žä¸Šé¢ç¬¬ä¸‰ä¸ªç»§æ‰¿å›¾å¾—åˆ°ç­”æ¡ˆ: 1ThreadingTCPServer-&gt;ThreadingMixIn-&gt;TCPServer-&gt;BaseServer å®žä¾‹åŒ–å¾—åˆ° ftpserver, å…ˆæŸ¥æ‰¾ ThreadingTCPServer çš„åˆå§‹åŒ–æ–¹æ³•,å‘çŽ°å·¦ç»§æ‰¿çš„ ThreadingMixIn æ²¡æœ‰åˆå§‹åŒ–æ–¹æ³•,äºŽæ˜¯åœ¨ TCPServer ä¸­æ‰¾åˆ°,ç„¶åŽæ‰§è¡Œself.server_bindå’Œ self.server_activate æ–¹æ³•; åˆå§‹åŒ–æˆåŠŸåŽæ‰§è¡Œftpserver.serve_forever,å‘çŽ°åœ¨ ThreadingMixInå’Œ TCPServer ä¸­éƒ½æ²¡æœ‰,äºŽæ˜¯åªå¥½åŽ» BaseServer ä¸­æ‰¾åˆ°å¹¶æ‰§è¡Œ serve_forever,è¿›è€Œæ‰§è¡Œ self._handle_request_noblock(),è¯¥æ–¹æ³•åŒæ ·åœ¨ BaseServer ä¸­ æ‰§è¡Œself_handle_request_noblock()è¿›è€Œæ‰§è¡Œ request,client_address = self.get_request(),åœ¨è¿™é‡Œå‘çŽ°åœ¨ TCPServer ä¸­æœ‰è¯¥æ–¹æ³•,äºŽæ˜¯æ‰§è¡Œè¿™ä¸ªæ–¹æ³• æ‰§è¡Œ self.socket.accept(),å‘çŽ°è¯¥æ–¹æ³•åœ¨ socket ä¸­,ç„¶åŽæ‰§è¡Œ self.process_address(request, client_address) åœ¨ ThreadingMixIn ä¸­æ‰¾åˆ°process_request, å¼€å¯å¤šçº¿ç¨‹åº”å¯¹å¹¶å‘,è¿›è€Œæ‰§è¡Œprocess_request_thread,æ‰§è¡Œ self.finish_request(request, client_address) ä¸Šè¿°å››éƒ¨åˆ†å®Œæˆäº†è¿žæŽ¥å¾ªçŽ¯,æŽ¥ä¸‹æ¥è¿›å…¥å¤„ç†é€šä¿¡éƒ¨åˆ†,åœ¨ BaseServer ä¸­æ‰¾åˆ° finish_request,è§¦å‘æˆ‘ä»¬å®šä¹‰çš„ç±»çš„å®žä¾‹åŒ–å¹¶åˆå§‹åŒ–ä¸€ä¸ªå¯¹è±¡,å› ä¸ºè‡ªå·±å®šä¹‰çš„ç±»ä¸­ä¸­æ²¡æœ‰è¯¥æ–¹æ³•,åˆ™ä¾æ®ç»§æ‰¿å…³ç³»è®¡ç®—å‡ºçš„ MRO åˆ—è¡¨æŸ¥æ‰¾å±žæ€§ æºç åˆ†æžæ€»ç»“: åŸºäºŽ TCP çš„ socketserver å®šä¹‰å‡ºçš„ç±»: self.server å³å¥—æŽ¥å­—å¯¹è±¡; self.request å³ä¸€ä¸ªè¿žæŽ¥; self.client_addresså³å®¢æˆ·ç«¯åœ°å€ åŸºäºŽ UDP çš„ socketserver å®šä¹‰å‡ºçš„ç±»: self.request æ˜¯ä¸€ä¸ªå…ƒç¥–(ç¬¬ä¸€ä¸ªå…ƒç´ æ˜¯å®¢æˆ·ç«¯å‘æ¥çš„æ•°æ®,ç¬¬äºŒéƒ¨åˆ†æ˜¯æœåŠ¡ç«¯çš„ udp å¥—æŽ¥å­—å¯¹è±¡),å¦‚(bâ€™musibiiâ€™, &lt;socket.socket fd=200, family=AddressFamily.AF_INET, type=SocketKind.SOCK_DGRAM, proto=0, laddr=(â€˜127.0.0.1â€™, 8080)&gt;); self.client_address å³å®¢æˆ·ç«¯åœ°å€. æ€»ç»“æœ¬æ–‡æŸ¥çœ‹äº†ä¸€ä¸‹ socketserver æ¨¡å—çš„æºç ,å¤§è‡´çš„å®žä¾‹åŒ–å¯¹è±¡çš„æ­¥éª¤å’Œä¸»è¦è¿è¡Œæµç¨‹å·®ä¸å¤šæžæ¸…æ¥šäº†,ä½†æ˜¯æœ‰äº›åœ°æ–¹è¿˜æ˜¯éœ€è¦ä»”ç»†ç¢ç£¨çš„,æ¯”å¦‚ç¬¬äº”æ­¥æ€Žä¹ˆä¸€ä¸‹å°±åˆ°å¼€å¯å¤šçº¿ç¨‹å®žçŽ°å¹¶å‘äº†. æ€»çš„æ¥è¯´,æŸ¥çœ‹æºç è¿˜æ˜¯æœ‰ç‚¹ç”¨çš„,è€Œä¸”è¯¥æ¨¡å—çš„ç»§æ‰¿ä¹Ÿå¯¹ä¹‹å‰å­¦ä¹ çš„ç»§æ‰¿çŸ¥è¯†è¿›è¡Œäº†è¡¥å……,ç‰¹åˆ«æ˜¯æ ¹æ®ç»§æ‰¿è§£æžå‡ºæ¥çš„( MRO)åˆ—è¡¨,è¿™ä¸ªåˆ—è¡¨æ˜¯ç±»ä¸­å±žæ€§çš„æŸ¥æ‰¾é¡ºåºè¡¨,å’Œæ˜¯å¦ç›´æŽ¥ç»§æ‰¿æ²¡æœ‰å…³ç³».]]></content>
      <categories>
        <category>socketserveræºç æŽ¢æž</category>
      </categories>
  </entry>
  <entry>
    <title><![CDATA[å¹¶å‘ç¼–ç¨‹ï¼ˆä¸€ï¼‰]]></title>
    <url>%2F2018%2F11%2F11%2F%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B-%E4%B8%80%2F</url>
    <content type="text"><![CDATA[å‰è¨€è¯¥ç³»åˆ—ä¸ºå¹¶å‘ç¼–ç¨‹,åœ¨å‡ ä¹Žæ‰€æœ‰çš„ç¼–ç¨‹è¯­è¨€ä¸­,å¹¶å‘å§‹ç»ˆæ˜¯ç»•ä¸å¼€çš„åŽ,å¯ä»¥è¯´å­¦ä¹ ä¸€é—¨ç¼–ç¨‹è¯­è¨€,å­¦å¥½äº†å¹¶å‘å°±è¯´æ˜Žè¿™é—¨è¯­è¨€ä½ å­¦çš„è¿˜å¯ä»¥.æ‰€ä»¥æŽ¥ä¸‹æ¥å°±è®©æˆ‘ä»¬å¥½å¥½çœ‹çœ‹ python çš„å¹¶å‘æ˜¯æ€Žä¹ˆå®žçŽ°çš„å§. åœ¨å­¦ä¹ å¹¶å‘ä¹‹å‰,æœ‰å¿…è¦å­¦ä¹ ä¸€ä¸‹è®¡ç®—æœºæ“ä½œç³»ç»Ÿå‘å±•å²,å› ä¸ºå¯ä»¥å®žçŽ°å¹¶å‘å¯æ“ä½œç³»ç»Ÿçš„å‘å±•æ˜¯åˆ†ä¸å¼€çš„. æ“ä½œç³»ç»Ÿå‘å±•å²æ“ä½œç³»ç»Ÿçš„å‘å±•å²åœ¨æŸç§æ„ä¹‰ä¸Šæ¥è¯´ä¹Ÿæ˜¯è®¡ç®—æœºçš„å‘å±•å².æ“ä½œç³»ç»Ÿæä¾›å¯¹ç¡¬ä»¶æŽ§åˆ¶çš„è°ƒç”¨å’Œåº”ç”¨ç¨‹åºæ‰€å¿…éœ€çš„åŠŸèƒ½. èƒŒæ™¯æ—©æœŸçš„è®¡ç®—æœºæ²¡æœ‰æ“ä½œç³»ç»Ÿ.åªæœ‰å•ç‹¬çš„æœºå™¨,æ“ä½œè€…ä¼šå¸¦ç€è®°å½•æœ‰ç¨‹åºå’Œæ•°æ®çš„å¡ç‰‡æˆ–è¾ƒåŽæœŸçš„æ‰“å­”çº¸å¸¦åŽ»æ“ä½œæœºå™¨.ç¨‹åºè¯»å…¥æœºå™¨åŽ,æœºå™¨å°±å¼€å§‹å·¥ä½œç›´åˆ°ç¨‹åºåœæ­¢.ç”±äºŽç¨‹åºéš¾å…æœ‰è¯¯,æ‰€ä»¥æœºå™¨é€šå¸¸éƒ½ä¼šä¸­é€”å´©æºƒ.ç¨‹åºä¸€èˆ¬é€šè¿‡æŽ§åˆ¶æ¿çš„å¼€å…³å’ŒçŠ¶æ€ç¯æ¥è°ƒè¯•. åŽæ¥,æœºå™¨å¼•å…¥å¸®åŠ©ç¨‹åºè¾“å…¥è¾“å‡ºç­‰å·¥ä½œçš„ä»£ç åº“.è¿™æ˜¯çŽ°ä»£æ“ä½œç³»ç»Ÿçš„èµ·æº.ç„¶è€Œ,æœºå™¨æ¯æ¬¡åªèƒ½æ‰§è¡Œä¸€ä¸ªä»»åŠ¡.åœ¨è‹±å›½å‰‘æ¡¥å¤§å­¦,è¿™äº›ä»»åŠ¡çš„ç£ä»Žå‰æ˜¯æŽ’æˆä¸€æŽ’æŒ‚åœ¨è¡£é’©ä¸Šçš„,è¡£é’©çš„é¢œè‰²ä»£è¡¨ä»»åŠ¡çš„ä¼˜å…ˆçº§. æ¦‚å¿µæ„ä¹‰ä¸Šçš„æ“ä½œç³»ç»Ÿå’Œé€šä¿—æ„ä¹‰ä¸Šçš„æ“ä½œç³»ç»Ÿå·®è·è¶Šæ¥è¶Šå¤§.é€šä¿—æ„ä¹‰ä¸Šçš„æ“ä½œç³»ç»Ÿä¸ºäº†æ–¹ä¾¿è€ŒæŠŠæœ€æ™®é€šçš„åŒ…å’Œåº”ç”¨ç¨‹åºçš„é›†åˆåŒ…æ‹¬åœ¨æ“ä½œç³»ç»Ÿå†….éšç€æ“ä½œç³»ç»Ÿçš„å‘å±•,ä¸€äº›åŠŸèƒ½æ›´å¼ºçš„â€™ç¬¬äºŒç±»â€™æ“ä½œç³»ç»Ÿè½¯ä»¶ä¹Ÿè¢«åŒ…æ‹¬è¿›åŽ».åœ¨ä»Šå¤©,æ²¡æœ‰å›¾å½¢ç•Œé¢å’Œå„ç§æ–‡ä»¶æµè§ˆå™¨å·²ç»ä¸èƒ½ç§°ä¹‹ä¸ºä¸€ä¸ªçœŸæ­£çš„é€šä¿—æ„ä¹‰ä¸Šçš„æ“ä½œç³»ç»Ÿ,ä½†äº‹å®žä¸Š,è¿è¡Œåœ¨æ•°æ®ä¸­å¿ƒå’ŒæœåŠ¡å™¨ç­‰é¢†åŸŸçš„æ“ä½œç³»ç»Ÿå¾€å¾€æ˜¯æ²¡æœ‰å›¾å½¢ç•Œé¢çš„. ç¬¬ä¸€ä»£è®¡ç®—æœº(1940~1955):çœŸç©ºç®¡å’Œç©¿å­”å¡ç‰‡ç¬¬ä¸€ä»£ä¹‹å‰äººç±»æ˜¯æƒ³ç”¨æœºæ¢°å–ä»£äººåŠ›ï¼Œç¬¬ä¸€ä»£è®¡ç®—æœºçš„äº§ç”Ÿæ˜¯è®¡ç®—æœºç”±æœºæ¢°æ—¶ä»£è¿›å…¥ç”µå­æ—¶ä»£çš„æ ‡å¿—ï¼Œä»ŽBabbageå¤±è´¥ä¹‹åŽä¸€ç›´åˆ°ç¬¬äºŒæ¬¡ä¸–ç•Œå¤§æˆ˜ï¼Œæ•°å­—è®¡ç®—æœºçš„å»ºé€ å‡ ä¹Žæ²¡æœ‰ä»€ä¹ˆè¿›å±•ï¼Œç¬¬äºŒæ¬¡ä¸–ç•Œå¤§æˆ˜åˆºæ¿€äº†æœ‰å…³è®¡ç®—æœºç ”ç©¶çš„çˆ†ç‚¸æ€§è¿›å±•ã€‚ lowaå·žç«‹å¤§å­¦çš„john Atanasoffæ•™æŽˆå’Œä»–çš„å­¦ç”ŸClifford Berryå»ºé€ äº†æ®è®¤ä¸ºæ˜¯ç¬¬ä¸€å°å¯å·¥ä½œçš„æ•°å­—è®¡ç®—æœºã€‚è¯¥æœºå™¨ä½¿ç”¨300ä¸ªçœŸç©ºç®¡ã€‚å¤§çº¦åœ¨åŒæ—¶ï¼ŒKonrad Zuseåœ¨æŸæž—ç”¨ç»§ç”µå™¨æž„å»ºäº†Z3è®¡ç®—æœºï¼Œè‹±æ ¼å…°å¸ƒèŽ±åˆ‡åˆ©å›­çš„ä¸€ä¸ªå°ç»„åœ¨1944å¹´æž„å»ºäº†Colossusï¼ŒHoward Aikenåœ¨å“ˆä½›å¤§å­¦å»ºé€ äº†Mark 1ï¼Œå®¾å¤•æ³•å°¼äºšå¤§å­¦çš„William Mauchleyå’Œä»–çš„å­¦ç”ŸJ.Presper Eckertå»ºé€ äº†ENIACã€‚è¿™äº›æœºå™¨æœ‰çš„æ˜¯äºŒè¿›åˆ¶çš„ï¼Œæœ‰çš„ä½¿ç”¨çœŸç©ºç®¡ï¼Œæœ‰çš„æ˜¯å¯ç¼–ç¨‹çš„ï¼Œä½†éƒ½éžå¸¸åŽŸå§‹ï¼Œè®¾ç½®éœ€è¦èŠ±è´¹æ•°ç§’é’Ÿæ—¶é—´æ‰èƒ½å®Œæˆæœ€ç®€å•çš„è¿ç®—ã€‚ åœ¨è¿™ä¸ªæ—¶æœŸï¼ŒåŒä¸€ä¸ªå°ç»„é‡Œçš„å·¥ç¨‹å¸ˆä»¬ï¼Œè®¾è®¡ã€å»ºé€ ã€ç¼–ç¨‹ã€æ“ä½œåŠç»´æŠ¤åŒä¸€å°æœºå™¨ï¼Œæ‰€æœ‰çš„ç¨‹åºè®¾è®¡æ˜¯ç”¨çº¯ç²¹çš„æœºå™¨è¯­è¨€ç¼–å†™çš„ï¼Œç”šè‡³æ›´ç³Ÿç³•ï¼Œéœ€è¦é€šè¿‡æˆåƒä¸Šä¸‡æ ¹ç”µç¼†æŽ¥åˆ°æ’ä»¶æ¿ä¸Šè¿žæˆç”µè·¯æ¥æŽ§åˆ¶æœºå™¨çš„åŸºæœ¬åŠŸèƒ½ã€‚æ²¡æœ‰ç¨‹åºè®¾è®¡è¯­è¨€ï¼ˆæ±‡ç¼–ä¹Ÿæ²¡æœ‰ï¼‰ï¼Œæ“ä½œç³»ç»Ÿåˆ™æ˜¯ä»Žæ¥éƒ½æ²¡å¬è¯´è¿‡ã€‚ ç¬¬äºŒä»£è®¡ç®—æœº(1955~1965):æ™¶ä½“ç®¡å’Œæ‰¹å¤„ç†ç³»ç»Ÿç”±äºŽå½“æ—¶çš„è®¡ç®—æœºéžå¸¸æ˜‚è´µ,è‡ªè®¤å¾ˆè‡ªç„¶çš„æƒ³åŠžæ³•å‡å°‘è®¡ç®—æœºè¿è¡Œæ—¶é—´çš„æµªè´¹.é€šå¸¸é‡‡ç”¨çš„å°±æ˜¯æ‰¹å¤„ç†ç³»ç»Ÿ. ç‰¹ç‚¹:è®¾è®¡äººå‘˜ã€ç”Ÿäº§äººå‘˜ã€æ“ä½œäººå‘˜ã€ç¨‹åºäººå‘˜å’Œç»´æŠ¤äººå‘˜ç›´æŽ¥æœ‰äº†æ˜Žç¡®çš„åˆ†å·¥ï¼Œè®¡ç®—æœºè¢«é”åœ¨ä¸“ç”¨ç©ºè°ƒæˆ¿é—´ä¸­ï¼Œç”±ä¸“ä¸šæ“ä½œäººå‘˜è¿è¡Œï¼Œè¿™ä¾¿æ˜¯â€˜å¤§åž‹æœºâ€™,æœ‰äº†æ“ä½œç³»ç»Ÿçš„æ¦‚å¿µ. æœ‰äº†ç¨‹åºè®¾è®¡è¯­è¨€ï¼šFORTRANè¯­è¨€æˆ–æ±‡ç¼–è¯­è¨€ï¼Œå†™åˆ°çº¸ä¸Šï¼Œç„¶åŽç©¿å­”æ‰“æˆå¡ç‰‡ï¼Œå†è®²å¡ç‰‡ç›’å¸¦åˆ°è¾“å…¥å®¤ï¼Œäº¤ç»™æ“ä½œå‘˜ï¼Œç„¶åŽå–ç€å’–å•¡ç­‰å¾…è¾“å‡ºæŽ¥å£. å·¥ä½œè¿‡ç¨‹: ç¬¬äºŒä»£è®¡ç®—æœºè§£å†³äº†ç¬¬ä¸€ä»£è®¡ç®—æœºçš„ä¸€äº›é—®é¢˜: æŠŠä¸€ä¸ªäººçš„è¾“å…¥æ”¹ä¸ºæ‰¹é‡è¾“å…¥; ç„¶åŽé¡ºåºè®¡ç®—(è¿™ä¸ªä»ç„¶æœ‰é—®é¢˜); æŠŠä¸€ä¸ªäººçš„è¾“å‡ºæ”¹ä¸ºæ‰¹é‡è¾“å‡º. ä¼˜ç‚¹:å› ä¸ºæ˜¯æ‰¹å¤„ç†ç³»ç»Ÿ,èŠ‚çœäº†è®¡ç®—æœºçš„ä½¿ç”¨æ—¶é—´,å¢žåŠ çš„è®¡ç®—æœºçš„ä½¿ç”¨æ•ˆçŽ‡; ç¼ºç‚¹: æ•´ä¸ªæµç¨‹éœ€è¦äººå‚ä¸ŽæŽ§åˆ¶,å°†ç£å¸¦æ¬æ¥æ¬åŽ»; è®¡ç®—çš„è¿‡ç¨‹ä»ç„¶æ˜¯é¡ºåºè®¡ç®—-&gt;ä¸²è¡Œ; ç¨‹åºå‘˜åŽŸæ¥ç‹¬äº«ä¸€æ®µæ—¶é—´çš„è®¡ç®—æœº,çŽ°åœ¨å¿…é¡»è¢«ç»Ÿä¸€è§„åˆ’åˆ°ä¸€æ‰¹ä½œä¸šä¸­,ç­‰å¾…ç»“æžœå’Œé‡æ–°è°ƒè¯•çš„è¿‡ç¨‹éƒ½éœ€è¦ç­‰åŒæ‰¹æ¬¡çš„å…¶ä»–ç¨‹åºéƒ½è¿è¡Œå®Œæ‰å¯ä»¥æŽ¥ç€ä½¿ç”¨. ç¬¬ä¸‰ä»£è®¡ç®—æœº(1965~1980):é›†æˆç”µè·¯èŠ¯ç‰‡å’Œå¤šé“ç¨‹åºè®¾è®¡åœ¨ç¬¬ä¸‰é“è®¡ç®—æœºçš„æ“ä½œç³»ç»Ÿå¹¿æ³›çš„åº”ç”¨äº†ç¬¬äºŒä»£è®¡ç®—æœºçš„æ“ä½œç³»ç»Ÿæ²¡æœ‰çš„å…³é”®æŠ€æœ¯:å¤šé“æŠ€æœ¯. å¤šé“ç¨‹åºè®¾è®¡æŠ€æœ¯å°±æ˜¯æŒ‡å…è®¸å¤šä¸ªç¨‹åºåŒæ—¶è¿›å…¥å†…å­˜å¹¶è¿è¡Œ.å³åŒæ—¶æŠŠå¤šä¸ªç¨‹åºæ”¾å…¥å†…å­˜,å¹¶å…è®¸ä»–ä»¬äº¤æ›¿åœ¨ CPU ä¸­è¿è¡Œ,å®ƒä»¬å…±äº«ç³»ç»Ÿä¸­çš„å„ç§ç¡¬,è½¯ä»¶èµ„æº.å½“ä¸€é“ç¨‹åºå›  I/O è¯·æ±‚è€Œæš‚åœè¿è¡Œæ—¶, CPU ä¾¿ç«‹å³è½¬åŽ»è¿è¡Œå¦ä¸€é“ç¨‹åº. å¤šé“æŠ€æœ¯: â€‹ å¤šé“æŠ€æœ¯ä¸­çš„å¤šé“æŒ‡çš„æ˜¯å¤šä¸ªç¨‹åº,å¤šé“æŠ€æœ¯çš„å®žçŽ°æ˜¯ä¸ºäº†è§£å†³å¤šä¸ªç¨‹åºç«žäº‰æˆ–è€…è¯´å…±äº«åŒä¸€ä¸ªèµ„æº(æ¯”å¦‚ CPU)çš„æœ‰åºè°ƒåº¦é—®é¢˜,è§£å†³æ–¹å¼å³å¤šè·¯å¤ç”¨,å¤šè·¯å¤ç”¨åˆ†ä¸ºæ—¶é—´å’Œç©ºé—´çš„å¤ç”¨. ç©ºé—´å¤ç”¨: â€‹ å°†å†…å­˜åˆ†ä¸ºå‡ éƒ¨åˆ†,æ¯ä¸ªéƒ¨åˆ†æ”¾å…¥ä¸€ä¸ªç¨‹åº,è¿™æ ·,åŒä¸€æ—¶é—´å†…å†…å­˜ä¸­å°±æœ‰äº†å¤šé“ç¨‹åº. æ—¶é—´å¤ç”¨: â€‹ å½“ä¸€ä¸ªç¨‹åºåœ¨ç­‰å¾… I/O æ—¶,å¦ä¸€ä¸ªç¨‹åºå¯ä»¥ä½¿ç”¨ CPU, å¦‚æžœå†…å­˜ä¸­å¯ä»¥åŒæ—¶å­˜æ”¾è¶³å¤Ÿå¤šçš„ä»»åŠ¡,åˆ™ CPU çš„åˆ©ç”¨çŽ‡å¯ä»¥æŽ¥è¿‘100%.æ“ä½œç³»ç»Ÿé‡‡ç”¨äº†å¤šé“æŠ€æœ¯åŽ,å¯ä»¥æŽ§åˆ¶è¿›ç¨‹çš„åˆ‡æ¢,æˆ–è€…è¯´è¿›ç¨‹ä¹‹é—´åŽ»äº‰æŠ¢CPU çš„æ‰§è¡Œæƒé™.è¿™ç§åˆ‡æ¢ä¸ä»…ä¼šåœ¨ä¸€ä¸ªè¿›ç¨‹é‡åˆ° I/O æ—¶è¿›è¡Œ,ä¸€ä¸ªè¿›ç¨‹å ç”¨ CPU æ—¶é—´è¿‡é•¿ä¹Ÿä¼šåˆ‡æ¢,æˆ–è€…è¯´è¢«æ“ä½œç³»ç»Ÿå¤ºèµ° CPU çš„æ‰§è¡Œæƒé™. è¯¦è§£: â€‹ çŽ°ä»£è®¡ç®—æœºæˆ–è€…ç½‘ç»œéƒ½æ˜¯æ”¯æŒå¤šç”¨æˆ·ç™»å½•çš„,å¤šä¸ªç”¨æˆ·ä¸ä»…å…±äº«ç¡¬ä»¶,è€Œä¸”å…±äº«æ–‡ä»¶,æ•°æ®åº“ç­‰ä¿¡æ¯,å…±äº«æ„å‘³ç€ä¼šå‘ç”Ÿå†²çªå’Œè¿è¡Œæ— åº. æ“ä½œç³»ç»Ÿçš„ä¸»è¦ä½œç”¨ä¸º: è®°å½•å“ªä¸ªç¨‹åºä½¿ç”¨ä»€ä¹ˆèµ„æº; å¯¹èµ„æºè¯·æ±‚è¿›è¡Œåˆ†é…; ä¸ºä¸åŒçš„ç¨‹åºå’Œç”¨æˆ·è°ƒè§£äº’ç›¸å†²çªçš„èµ„æºè¯·æ±‚. æˆ‘ä»¬å°†ä¸Šè¿°æ“ä½œç³»ç»Ÿçš„åŠŸèƒ½æ€»ç»“ä¸º:å¤„ç†æ¥è‡ªå¤šä¸ªç¨‹åºå‘èµ·çš„å¤šä¸ª(å¤šä¸ªå³å¤šè·¯)å…±äº«(å…±äº«å³å¤ç”¨)èµ„æºçš„è¯·æ±‚,ç®€ç§°å¤šè·¯å¤ç”¨. åœ¨ç©ºé—´å¤ç”¨ä¸Šçš„é—®é¢˜ä¸º:ç¨‹åºä¹‹é—´çš„å†…å­˜å¿…é¡»éš”ç¦»,è¿™ç§éš”ç¦»éœ€è¦åœ¨ç¡¬ä»¶å±‚é¢ä¸Šå®žçŽ°,ç”±æ“ä½œç³»ç»ŸæŽ§åˆ¶.å¦‚æžœå†…å­˜å½¼æ­¤ä¸åˆ†å‰²,åˆ™ä¸€ä¸ªç¨‹åºå¯ä»¥è®¿é—®å¦å¤–ä¸€ä¸ªç¨‹åºçš„å†…å­˜,è¿™æ ·ä¸€æ¥å°±ä¼šäº§ç”Ÿåº”ç”¨ç¨‹åºçš„æ•°æ®ä¸å®‰å…¨,æ¯”å¦‚ä½ çš„ qq ç¨‹åºå¯ä»¥è®¿é—®æ“ä½œç³»ç»Ÿçš„å†…å­˜,è¿™æ„å‘³ç€ qq å¯ä»¥æ‹¿åˆ°æ“ä½œç³»ç»Ÿçš„æ‰€æœ‰æƒé™.å…¶æ¬¡ä¸§å¤±çš„æ˜¯ç¨³å®šæ€§,æŸä¸ªç¨‹åºå´©æºƒæ—¶æœ‰å¯èƒ½æŠŠå…¶ä»–çš„ç¨‹åºçš„å†…å­˜ä¸€èµ·å›žæ”¶äº†,æ¯”å¦‚è¯´æŠŠæ“ä½œç³»ç»Ÿçš„å†…å­˜å›žæ”¶,åˆ™æ“ä½œç³»ç»Ÿå´©æºƒ. ç¬¬å››ä»£è®¡ç®—æœº(1980~):ä¸ªäººè®¡ç®—æœºæ—¶ä»£å¾®åž‹å¤„ç†å™¨çš„å‘å±•ä½¿è®¡ç®—æœºçš„åº”ç”¨æ™®åŠè‡³ä¸­å°ä¼ä¸šåŠä¸ªäººçˆ±å¥½è€…ã€‚è€Œè®¡ç®—æœºçš„æ™®åŠåˆæŽ¨åŠ¨äº†ç¡¬ä»¶ç»„ä»¶å…¬å…±æŽ¥å£çš„å‘å±•ï¼ˆå¦‚S-100,SS-50,Apple II,ISAå’ŒPCIæ€»çº¿ï¼‰ï¼Œå¹¶é€æ¸åœ°è¦æ±‚æœ‰ä¸€ç§â€œæ ‡å‡†â€çš„æ“ä½œç³»ç»ŸåŽ»æŽ§åˆ¶å®ƒä»¬ã€‚åœ¨è¿™äº›æ—©æœŸçš„è®¡ç®—æœºä¸­ï¼Œä¸»è¦çš„æ“ä½œç³»ç»Ÿæ˜¯8080/8085/Z-80 CPUç”¨çš„CP/M-80ï¼Œå®ƒåˆ›å»ºåœ¨æ•°å­—ç ”ç©¶å…¬å¸(Digital Research)å…ˆå‰å‡ ä¸ªé’ˆå¯¹PDP-11æž¶æž„çš„æ“ä½œç³»ç»Ÿçš„åŸºç¡€ä¸Šã€‚åœ¨æ­¤åŸºç¡€ä¸Šåˆäº§ç”Ÿäº†MS-DOSï¼ˆæˆ–IBMå…¬å¸çš„PC-DOSï¼‰ã€‚è¿™äº›è®¡ç®—æœºåœ¨ROMï¼ˆåªè¯»å­˜å‚¨å™¨ï¼‰éƒ½æœ‰ä¸€ä¸ªå°å°çš„å¯åŠ¨ç¨‹åºï¼Œå¯ä»¥æŠŠæ“ä½œç³»ç»Ÿä»Žç£ç›˜è£…è½½åˆ°å†…å­˜ã€‚IBM-PCç³»åˆ—çš„BIOSæ˜¯è¿™ä¸€æ€æƒ³çš„å»¶ä¼¸ã€‚è‡ª1981å¹´ç¬¬ä¸€å°IBM-PCè¯žç”Ÿä»¥æ¥ï¼ŒBIOSçš„åŠŸèƒ½å¾—åˆ°ä¸æ–­åœ°å¢žå¼ºã€‚ éšç€æ˜¾ç¤ºè®¾å¤‡å’Œå¤„ç†å™¨æˆæœ¬çš„é™ä½Žï¼Œå¾ˆå¤šæ“ä½œç³»ç»Ÿéƒ½å¼€å§‹æä¾›å›¾å½¢ç”¨æˆ·ç•Œé¢ã€‚å¦‚ï¼šè®¸å¤šUNIXæä¾›çš„X Windowä¸€ç±»çš„ç³»ç»Ÿã€å¾®è½¯çš„Windowsç³»ç»Ÿã€è‹¹æžœå…¬å¸çš„Mac OSå’ŒIBMå…¬å¸çš„OS/2ç­‰ã€‚æœ€åˆçš„å›¾å½¢ç”¨æˆ·ç•Œé¢æ˜¯ç”±Xerox Palo Altoç ”ç©¶ä¸­å¿ƒ70å¹´ä»£åˆæœŸç ”å‘å‡ºæ¥çš„ï¼Œä¹‹åŽè¢«è®¸å¤šå…¬å¸æ¨¡ä»¿ï¼Œç»§æ‰¿å‘å±•ã€‚ æ“ä½œç³»ç»Ÿçš„ä½œç”¨ éšè—äº†å¤æ‚çš„ç¡¬ä»¶è°ƒç”¨æŽ¥å£,ä¸ºåº”ç”¨ç¨‹åºå‘˜è°ƒç”¨ç¡¬ä»¶èµ„æºæä¾›æ›´å¥½,æ›´ç®€å•,æ›´æ¸…æ™°çš„æ¨¡åž‹.åº”ç”¨ç¨‹åºå‘˜æœ‰äº†è¿™äº›æŽ¥å£åŽ,å°±å¯ä»¥ä¸ç”¨è€ƒè™‘æ“ä½œç¡¬ä»¶çš„ç»†èŠ‚,ä¸“å¿ƒå†™ä»£ç å³å¯; å°†åº”ç”¨ç¨‹åºå¯¹ç¡¬ä»¶èµ„æºçš„ç«žäº‰è¯·æ±‚å˜å¾—æœ‰åº. å¤šé“æŠ€æœ¯åœ¨ä¹‹å‰ç¬¬ä¸‰ä»£è®¡ç®—æœºçš„æ—¶å€™äº§ç”Ÿäº†å¤šé“æŠ€æœ¯,å¯ä»¥æ›´é«˜æ•ˆçŽ‡çš„ä½¿ç”¨è®¡ç®—æœºçš„èµ„æº.äº§ç”ŸèƒŒæ™¯ä¸º:é‚£æ—¶å€™çš„è®¡ç®—æœºéƒ½æ˜¯å•æ ¸,ä¸ºäº†èƒ½å¤ŸåŒä¸€æ—¶é—´è¿è¡Œå¤šä¸ªç¨‹åºäº§ç”Ÿäº†å¤šé“æŠ€æœ¯. å¤šé“æŠ€æœ¯çš„äº§ç”Ÿç›´æŽ¥å½±å“äº†è®¡ç®—æœºçš„å‘å±•æ–¹å‘,å¤šé“æŠ€æœ¯å‡ºçŽ°åŽ,å•æ ¸å¯ä»¥å®žçŽ°å¹¶å‘å·¥ä½œäº†.]]></content>
      <categories>
        <category>å¹¶å‘ç¼–ç¨‹</category>
      </categories>
  </entry>
  <entry>
    <title><![CDATA[ç½‘ç»œç¼–ç¨‹ï¼ˆäº”ï¼‰]]></title>
    <url>%2F2018%2F11%2F10%2F%E7%BD%91%E7%BB%9C%E7%BC%96%E7%A8%8B-%E4%BA%94%2F</url>
    <content type="text"><![CDATA[å‰è¨€åœ¨ä¸Šä¸€ç¯‡æ–‡ç« ä¸­æˆ‘ä»¬å­¦ä¹ äº† åŸºäºŽ TCP å¥—æŽ¥å­—çš„æœåŠ¡ç«¯å’Œå®¢æˆ·ç«¯é€šä¿¡,å¹¶è§£å†³äº†ç²˜åŒ…çš„é—®é¢˜,è§£å†³ç²˜åŒ…é—®é¢˜çš„æ€è·¯å¾ˆç®€å•,å°±æ˜¯ç¡®ä¿æŽ¥å—æ–¹èƒ½å¤ŸæŠŠæ•°æ®æ”¶å–å¹²å‡€,å‘å¤šå°‘,å°±æ”¶å¤šå°‘. å‡ºçŽ°ç²˜åŒ…çš„é—®é¢˜:åŽŸå› æœ‰ä¸¤ä¸ª,ä¸€ä¸ªæ˜¯æŽ¥æ”¶æ•°æ®é‡å°‘äºŽå‘é€æ•°æ®é‡;ä¸€ä¸ªæ˜¯å› ä¸ºä¸ºäº†ä¼˜åŒ– TCP çš„ä¼ è¾“æ•ˆçŽ‡,ä½¿ç”¨äº† Nagleç®—æ³•,å½“å®¢æˆ·ç«¯è¿žç»­å‘é€æ—¶é—´é—´éš”å¾ˆçŸ­çš„ä¸¤ä¸ªæ•°æ®åŒ…æ—¶,åœ¨æœªç¡®è®¤æ•°æ®å‘é€çš„æ—¶å€™è®©å‘é€å™¨æŠŠæ•°æ®é€åˆ°ç³»ç»Ÿç¼“å­˜é‡Œ.ä»»ä½•æ•°æ®éšåŽç»§ç»­ç›´åˆ°å¾—åˆ°æ˜Žæ˜¾çš„æ•°æ®ç¡®è®¤æˆ–è€…ç›´åˆ°æ”’åˆ°äº†ä¸€å®šæ•°é‡çš„æ•°æ®äº†å†å‘åŒ…. è¿™æ˜¯ä¸å¯é¿å…çš„,ä¸ºäº†ä¼˜åŒ–ä¼ è¾“æ•ˆçŽ‡,å°½é‡å‘é€å¤§å—æ•°æ®,é¿å…ç½‘ç»œä¸­å……æ–¥çš„è®¸å¤šå°æ•°æ®å—.çŸ¥é“äº†è§£å†³æ–¹æ³•,é‚£ä¹ˆé¿å…ç²˜åŒ…å°±å¾ˆç®€å•äº†,åªéœ€è¦åœ¨æ¯æ¬¡å‘é€æ•°æ®ä¹‹å‰å…ˆå‘é€çœŸå®žæ•°æ®çš„é•¿åº¦,ç„¶åŽæŽ¥æ”¶æ–¹å¯ä»¥æ ¹æ®æ”¶åˆ°çš„çœŸå®žé•¿åº¦æ”¶å–æ•°æ®äº†. SOCKETä½¿ç”¨SOCKET AF_INETå¥—æŽ¥å­—ä¸»è¦æœ‰ä¸¤ç§åè®®,çŽ°åœ¨æ¥çœ‹ UDP åè®®æ˜¯å¦‚ä½•è¿›è¡Œç½‘ç»œé€šä¿¡çš„. åŸºäºŽ UDP è¿žæŽ¥çš„å¥—æŽ¥å­—tcp æ˜¯æ— è¿žæŽ¥,ä¸ç¨³ç‚¹çš„å¥—æŽ¥å­—,ä½†æ˜¯ä¼ è¾“æ•ˆçŽ‡è¾ƒé«˜,æ‰€ä»¥åœ¨æŸäº›åº”ç”¨ä¸Šå¦‚å®žæ—¶ç›´æ’­,æ¸¸æˆ, DNS æœåŠ¡å™¨,DHCP æœåŠ¡å™¨ç­‰ç­‰. æœåŠ¡ç«¯ 12345678910from socket import *serverSock = socket(AF_INET, SOCK_DGRAM)serverSock.bind(('', 8080))while True: data, client_addr = serverSock.recvfrom(1024) print(data) serverSock.sendto(data.upper, client_addr)serverSock.close() å®¢æˆ·ç«¯ 123456789from socket import *clientSock = socket(AF_INET, SOCK_DGRAM)while True: msg = input('&gt;&gt;&gt;').strip() clientSock.sendto(msg.encode('utf-8'), ('', 8080)) data, server_addr = clientSock.recvfrom(1024) print(data) å½“æˆ‘ä»¬è¿žç»­å¼€å¤šä¸ªå®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯é€šä¿¡çš„æ—¶å€™,æ²¡æœ‰å‡ºçŽ°é˜»å¡žçš„æƒ…å†µ,å‘å‡ºåŽ»çš„æ¶ˆæ¯éƒ½å¯ä»¥æ”¶å›žæ¥,è¿™æ˜¯å› ä¸º udp æ˜¯æ— è¿žæŽ¥çš„å¥—æŽ¥å­—,ä¸ç”¨å…³æ³¨ä¸€ä¸ªè¿žæŽ¥,åªè¦ä½ ç»™æˆ‘å‘æ¶ˆæ¯æ‹¿åˆ°äº†å‘é€æ–¹çš„ ip å’Œç«¯å£,é‚£ä¹ˆå°±å¯ä»¥ç›´æŽ¥å’Œä½ é€šä¿¡,è€Œä¸”ä¸åƒ TCP é‚£æ ·å¿…é¡»å…ˆå¯åŠ¨æœåŠ¡ç«¯æ‰å¯ä»¥, udp åœ¨å‘é€æ•°æ®çš„æ—¶å€™,æœåŠ¡ç«¯æ²¡æœ‰å¯åŠ¨ä¹Ÿå¯ä»¥å‘é€è¿‡åŽ»,åªä¸è¿‡æ˜¯å‘åˆ°äº†å¯¹æ–¹çš„ç³»ç»Ÿç¼“å­˜ä¸­. é‚£ä¹ˆ udp å¯ä»¥å®žçŽ°å¤šä¸ªå®¢æˆ·ç«¯åŒæ—¶å’Œå®¢æˆ·ç«¯é€šä¿¡å—? ä¹‹å‰å‡ ä¸ªå®¢æˆ·ç«¯å¯ä»¥åŒæ—¶å’ŒæœåŠ¡ç«¯é€šä¿¡æ˜¯å› ä¸ºæœåŠ¡ç«¯çš„å¤„ç†èƒ½åŠ›å¾ˆå¤§,çœ‹èµ·æ¥æ˜¯åŒæ—¶é€šä¿¡ä¸€æ ·,ä½†æ˜¯å¦‚æžœæŠŠå®¢æˆ·ç«¯åŠ åˆ° 1w, ç”šè‡³æ›´å¤šå°±ä¼šæ„Ÿè§‰åˆ°æ˜Žæ˜¾çš„æ—¶é—´å·®äº†. é‚£ä¹ˆå¦‚ä½•å¯ä»¥å®žçŽ°çœŸæ­£çš„å¹¶å‘å‘¢?å…³é”®ç‚¹å°±åœ¨ä¸€ä¸ªé€šä¿¡å¾ªçŽ¯å’Œè¿žæŽ¥å¾ªçŽ¯äº’ç›¸ä¸å¹²æ‰°,ä¸ç”¨å› ä¸º i/o å µå¡žè€Œè€½æå¦ä¸€ä¸ªå¾ªçŽ¯è¦åšçš„äº‹. Socketserver æ¨¡å—å®žçŽ°å¹¶å‘åœ¨è¿™é‡Œ python æœ‰ä¸€ä¸ªæ¨¡å—ä¸º socketserver å¯ä»¥å®žçŽ°çœŸæ­£çš„å¹¶å‘. åŸºäºŽ TCP åè®®çš„å¹¶å‘æœåŠ¡ç«¯ 123456789101112131415161718import sockerserverclass MyTCPhandler(socketserver.BaseRequestHandler): def handler(self): while True: try: data = self.request.recv(1024) if len(data) == 0: break print('--&gt;æ”¶åˆ°å®¢æˆ·ç«¯çš„æ¶ˆæ¯:', data) self.request.send(data.upper()) except ConnectResetError: break self.request.close() if __name__ == '__main__': serverSock = socketserver.ThreadingTCPServer(('127.0.0.1', 8081), MyTCPhandler) serverSock.serve_forever() # å’Œå®¢æˆ·ç«¯è¿›è¡Œè¿žæŽ¥ å®¢æˆ·ç«¯ 123456789101112from socket import *clientSock = socket(AF_INET, SOCK_STREAM)clientSock.connect(('127.0.0.1', 8081))# é€šä¿¡å¾ªçŽ¯while True: clientSock.send(b'hello') data = clientSock.recv(1024) print(data) clientSock.close() è¿™æ ·å°±è§£å†³äº† TCP ä¸èƒ½å®žçŽ°å¹¶å‘çš„é—®é¢˜äº†. åŸºäºŽ UDP åè®®çš„å¹¶å‘æœåŠ¡ç«¯ 12345678910import socketserverclass MyUDPhandler(socketserver.BaseRequestHandler): def handler(self): data, serverSock = self.request serverSock.sendto(data.upper(), self.client_address) if __name__ == '__main__': server = socketserver.ThreadingUDPServer(('127.0.0.1', 8081), MyUDPhandler) server.serve_forever() å®¢æˆ·ç«¯ 12345678from socket import *clientSock = socket(AF_INET, SOCK_DGRAM)while True: clientSock.sendto(b'hello', ('127.0.0.1', 8081)) data, server_addr = client.recvfrom(1024) print(data) è¿™å°±æ˜¯ UDP å®žçŽ°å¹¶å‘çš„æ¨¡æ¿. æ€»ç»“åˆ°æ­¤,ç½‘ç»œç¼–ç¨‹ç»ˆäºŽå‘Šä¸€æ®µè½äº†,å…¶å®žæˆ‘å†™çš„æ˜¯ç½‘ç»œç¼–ç¨‹é‡Œé¢æžå°‘çš„ä¹Ÿæ˜¯è¾ƒä¸ºé‡è¦çš„ä¸€éƒ¨åˆ†,è¿˜æœ‰å¾ˆå¤šåº•å±‚åè®®æ²¡äº†è§£,åƒ ping æœåŠ¡å™¨æ—¶å‘é€çš„ ICMP åŒ…,è¿˜æœ‰å¾ˆå¤š,ä¸è¿‡æˆ‘è§‰å¾—äº†è§£äº†è¿™äº›å…¶å®žä¹Ÿå°±äº†è§£äº†äº’è”ç½‘å·¥ä½œçš„åŸºæœ¬æ–¹å¼,å…¶ä½™çš„å¾…æœ‰æ—¶é—´äº†å†æ¥å­¦ä¹ . å¦‚æœ‰ä¸å¯¹çš„åœ°æ–¹,æ¬¢è¿ŽæŒ‡æ­£.]]></content>
      <categories>
        <category>ç½‘ç»œç¼–ç¨‹</category>
      </categories>
  </entry>
  <entry>
    <title><![CDATA[ç½‘ç»œç¼–ç¨‹ï¼ˆå››ï¼‰]]></title>
    <url>%2F2018%2F11%2F09%2F%E7%BD%91%E7%BB%9C%E7%BC%96%E7%A8%8B-%E5%9B%9B%2F</url>
    <content type="text"><![CDATA[å‰è¨€ç»è¿‡ä¹‹å‰ä¸‰ç¯‡æ–‡ç« çš„å­¦ä¹ æˆ‘ä»¬å¤§è‡´äº†è§£äº†äº’è”ç½‘æ˜¯å¦‚ä½•åŸºäºŽäº”å±‚åè®®è¿›è¡Œé€šä¿¡äº†,ç”±åº”ç”¨å±‚äº§ç”Ÿæ•°æ®,ç„¶åŽè¿›è¡Œå°è£…,ä¾æ¬¡ç»è¿‡ä¼ è¾“å±‚,ç½‘ç»œå±‚,æ•°æ®é“¾è·¯å±‚çš„å°è£…æœ€åŽç”±ç‰©ç†å±‚å‘é€ç”µä¿¡å·è¿›è¡Œæ•°æ®çš„ä¼ è¾“,åœ¨æŽ¥æ”¶ç«¯é¦–å…ˆç”±ç‰©ç†å±‚æŽ¥æ”¶åˆ°å­—èŠ‚åž‹çš„æ•°æ®,ç„¶åŽæ‹†åŒ…,éªŒè¯ MAC åœ°å€, IP åœ°å€å’Œç«¯å£,æœ€åŽç”±ç›®æ ‡åº”ç”¨èŽ·å–æ•°æ®å¹¶è§£ç å‡ºæ¥. é‚£ä¹ˆä¸ºäº†ä½¿ç”¨ TCP åè®®å»ºç«‹è¿žæŽ¥,ä¸ç”¨åŽ»ç®¡ä»€ä¹ˆä¸‰æ¬¡æ¡æ‰‹å››æ¬¡æŒ¥æ‰‹ä»¥åŠæ•°æ®åˆ°åº•æ˜¯æ€Žä¹ˆåœ¨äº’è”ç½‘ä¸­ä¼ è¾“çš„,åœ¨åº”ç”¨å±‚å’Œä¼ è¾“å±‚è™šæ‹Ÿå‡ºä¸€ä¸ªæŠ½è±¡å±‚,å« socket( å¥—æŽ¥å­—)å±‚,è¿™æ˜¯ä¸€ä¸ªæ¨¡å—ä¸ºæˆ‘ä»¬å°è£…å¥½äº†å¾ˆå¤šåº•å±‚çš„åè®®,ä»¥ä¾¿äºŽæˆ‘ä»¬åªå…³æ³¨ä¸Žå®žé™…çš„æ•°æ®ä¼ è¾“,è€Œä¸ç”¨å…³ç³»åº•å±‚çš„å®žçŽ°. æ‰€ä»¥æˆ‘ä»¬å°±ç›´æŽ¥ä½¿ç”¨å¥—æŽ¥å­—å’Œç½‘ç»œé€šä¿¡è¿›è¡Œäº¤äº’. socketsocketæ˜¯ä»€ä¹ˆsocketæ˜¯åº”ç”¨å±‚ä¸Ž TCP/IPåè®®æ—é€šä¿¡çš„ä¸­é—´è½¯ä»¶æŠ½è±¡å±‚,å®ƒæ˜¯ä¸€ç»„æŽ¥å£.åœ¨è®¾è®¡æ¨¡å¼ä¸­, socket å°±æ˜¯ä¸€ä¸ªæ¨¡å—,å®ƒæŠŠå¤æ‚çš„ TCP/IP åè®®æ—éšè—åœ¨ socket æŽ¥å£åŽé¢,å¯¹ç”¨æˆ·æ¥è¯´,ä¸€ç»„ç®€å•çš„æŽ¥å£å°±æ˜¯å…¨éƒ¨,è®© socket åŽ»ç»„ç»‡æ•°æ®,ä»¥ç¬¦åˆæŒ‡å®šçš„åè®®. ä¹Ÿæœ‰äººè¯´, socket å…¶å®žå°±æ˜¯ ip å’Œ port çš„ç»„åˆ, ip ç”¨æ¥æ ‡è¯†äº’è”ç½‘ä¸­çš„ä¸€å°ä¸»æœºçš„ä½ç½®,è€Œ port æ˜¯ç”¨æ¥æ ‡è¯†è¿™å°æœºå™¨ä¸Šçš„ä¸€ä¸ªåº”ç”¨ç¨‹åº, ip åœ°å€æ˜¯é…ç½®åˆ°ç½‘å¡çš„,è€Œ port æ˜¯åº”ç”¨ç¨‹åºå¼€å¯çš„,è¿™æ · ip å’Œ port å°±æ ‡è¯†äº†äº’è”ç½‘ä¸­ç‹¬ä¸€æ— äºŒçš„ä¸€ä¸ªåº”ç”¨ç¨‹åº. å¥—æŽ¥å­—å‘å±•å²å³åˆ†ç±»å¥—æŽ¥å­—èµ·æºäºŽ20ä¸–çºª70å¹´ä»£åŠ åˆ©ç¦å°¼äºšå¤§å­¦ä¼¯å…‹åˆ©åˆ†æ ¡ç‰ˆæœ¬çš„ Unix, å³ BSD Unix. å› æ­¤,æœ‰æ—¶äººä»¬ä¹ŸæŠŠå¥—æŽ¥å­—ç§°ä¸ºâ€™ä¼¯å…‹åˆ©å¥—æŽ¥å­—â€™æˆ–â€™ BSD å¥—æŽ¥å­—â€™.ä¸€å¼€å§‹,å¥—æŽ¥å­—è¢«è®¾è®¡ç”¨åœ¨åŒä¸€å°ä¸»æœºä¸Šçš„å¤šä¸ªåº”ç”¨ç¨‹åºä¹‹é—´çš„é€šä¿¡.è¿™ä¹Ÿè¢«ç§°ä¹‹ä¸ºè¿›ç¨‹é—´é€šä¿¡æˆ– IPC(inter-process communication).å¥—æŽ¥å­—æœ‰ä¸¤å¤§å®¶æ—,åˆ†åˆ«æ˜¯åŸºäºŽæ–‡ä»¶åž‹å’ŒåŸºäºŽç½‘ç»œåž‹.æˆ‘ä»¬ä¸»è¦å­¦ä¹ åŸºäºŽç½‘ç»œåž‹çš„å¥—æŽ¥å­—. åŸºäºŽæ–‡ä»¶ç±»åž‹çš„å¥—æŽ¥å­—å®¶æ—: å¥—æŽ¥å­—å®¶æ—åå­—: AF_UNIX UNIX å“²å­¦ä¸ºä¸€åˆ‡çš†æ–‡ä»¶(å…¶å®žä¹Ÿä¸æ˜¯æ‰€æœ‰çš„),åŸºäºŽæ–‡ä»¶çš„å¥—æŽ¥å­—è°ƒç”¨çš„å°±æ˜¯åº•å±‚çš„æ–‡ä»¶ç³»ç»Ÿæ¥å–æ•°æ®,ä¸¤ä¸ªå¥—æŽ¥å­—è¿›ç¨‹è¿è¡Œåœ¨åŒä¸€æœºå™¨,å¯ä»¥é€šè¿‡è®¿é—®åŒä¸€ä¸ªæ–‡ä»¶ç³»ç»Ÿé—´æŽ¥å®Œæˆé€šä¿¡. åŸºäºŽç½‘ç»œç±»åž‹çš„å¥—æŽ¥å­—å®¶æ—: å¥—æŽ¥å­—å®¶æ—åå­—: AF_INET åŸºäºŽç½‘ç»œä¹Ÿå°±æ˜¯ OSI åè®®è¿›è¡Œæ•°æ®é€šä¿¡ å¥—æŽ¥å­—å·¥ä½œæµç¨‹å…¶å®žå°±è·Ÿæ‰“ç”µè¯å¾ˆåƒ,æœ‰æ‹¨å·,æŽ¥ç”µè¯,é€šä¿¡,æŒ‚ç”µè¯ é¦–å…ˆç”±æœåŠ¡ç«¯åˆå§‹åŒ–ä¸€ä¸ªå¥—æŽ¥å­—å¯¹è±¡,ç„¶åŽä¸Žæœ¬æœºçš„æŸä¸ªå¤§äºŽ1023çš„ç«¯å£ç»‘å®š( bind),æŽ¥ç€å¯¹è¯¥ç«¯å£è¿›è¡Œç›‘å¬(listen),è°ƒç”¨ accept æŽ¥å£é˜»å¡žç­‰å¾…å®¢æˆ·ç«¯çš„è¿žæŽ¥.å¦‚æžœåœ¨è¿™æ—¶å®¢æˆ·ç«¯åˆå§‹åŒ–ä¸€ä¸ªå¥—æŽ¥å­—å¯¹è±¡,ç„¶åŽè¿žæŽ¥(connect)æœåŠ¡ç«¯çš„ ip å’Œport,å¦‚æžœè¿žæŽ¥æˆåŠŸ,è¿™æ—¶å®¢æˆ·ç«¯ä¸ŽæœåŠ¡ç«¯çš„è¿žæŽ¥å°±å»ºç«‹æˆåŠŸäº†. è¿™æ—¶å€™å¯èƒ½æœ‰äººå†é—®äº†,ä¸‰æ¬¡æ¡æ‰‹å‘¢? å½“å®¢æˆ·ç«¯ connect æœåŠ¡ç«¯çš„æ—¶å€™å°±è¯´æ˜Žä¸‰æ¬¡æ¡æ‰‹å¼€å§‹äº†,å¦‚æžœæœåŠ¡ç«¯ accept æœ‰è¿”å›žå€¼,é‚£ä¹ˆå°±è¯´æ˜Žä¸‰æ¬¡æ¡æ‰‹æˆåŠŸ.(å¯ä»¥ä½¿ç”¨ wireshark è¿›è¡ŒæŠ“åŒ…åˆ†æž)wireshark æ•™ç¨‹ TCP è¿žæŽ¥å»ºç«‹æˆåŠŸåŽå®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯å°±å¯ä»¥è¿›è¡Œæ•°æ®äº¤äº’äº†.å®¢æˆ·ç«¯å‘é€æ•°æ®è¯·æ±‚,æœåŠ¡ç«¯æŽ¥æ”¶è¯·æ±‚å¹¶å¤„ç†è¯·æ±‚,ç„¶åŽæŠŠå›žåº”æ•°æ®å‘é€ç»™å®¢æˆ·ç«¯,å®¢æˆ·ç«¯è¯»å–æ•°æ®,æœ€åŽå…³é—­è¿žæŽ¥,ä¸€æ¬¡é€šä¿¡ç»“æŸ. SOCKETä½¿ç”¨å¥—æŽ¥å­—æœåŠ¡ç«¯é€šç”¨ä½¿ç”¨æ–¹æ³•from socket import * sct = socket(socket_family, socket_type, protocal=0) socket_family å¯ä»¥ä¸ºAF_UNIX æˆ– AF_INET,socket_type å¯ä»¥æ˜¯ SOCK_STREAM æˆ– SOCK_DGRAM.protocol ä¸€èˆ¬ä¸å¡«,ç¼ºçœå€¼ä¸º0. èŽ·å– tcp/ip å¥—æŽ¥å­— tcpSock = socket(AF_INET, SOCK_STREAM) ç»‘å®š ip port tcpSock.bind((&#39;&#39;, 8080)) å¼€å§‹ç›‘å¬ tcpSock.listen(5) è¢«åŠ¨æŽ¥å— TCP å®¢æˆ·ç«¯è¿žæŽ¥(é˜»å¡žå¼) tcpSock.accept() èŽ·å– udp/ip å¥—æŽ¥å­— udpSock = socket(AF_UNIX, SOCK_DGRAM) ç»‘å®š ip port udpSock.bind((&#39;&#39;, 8081)) å¥—æŽ¥å­—å®¢æˆ·ç«¯é€šç”¨æ–¹æ³•è¿žæŽ¥æœåŠ¡ç«¯ä¸»åŠ¨åˆå§‹åŒ– TCP æœåŠ¡å™¨è¿žæŽ¥ tcpSock.connect((&#39;&#39;, 8080)) å…¬å…±ç”¨é€”çš„å¥—æŽ¥å­—å‡½æ•°sock.recv() æŽ¥æ”¶ TCP æ•°æ® sock.send() å‘é€ TCP æ•°æ®( send åœ¨å¾…å‘é€æ•°æ®é‡å¤§äºŽå·²ç«¯ç¼“å­˜åŒºå‰©ä½™ç©ºé—´æ—¶,æ•°æ®å°†ä¼šä¸¢å¤±) sock.sendall() å‘é€å®Œæ•´çš„ TCP æ•°æ®(æœ¬è´¨å°±æ˜¯å¾ªçŽ¯è°ƒç”¨ send,sendall åœ¨å¾…å‘é€æ•°æ®é‡å¤§äºŽå·²ç«¯ç¼“å­˜åŒºå‰©ä½™ç©ºé—´æ—¶,æ•°æ®ä¸ä¸¢å¤±,å¾ªçŽ¯è°ƒç”¨ send çŸ¥é“å‘å®Œ) sock.recvfrom() æŽ¥æ”¶ UDP æ•°æ® sock.sendto() å‘é€ UDP æ•°æ® sock.getpeername() è¿žæŽ¥åˆ°å½“å‰å¥—æŽ¥å­—çš„è¿œç«¯åœ°å€ sock.getsockname() èŽ·å–å½“å‰å¥—æŽ¥å­—çš„åœ°å€ sock.getsockopt() è¿”å›žæŒ‡å®šå¥—æŽ¥å­—çš„å‚æ•° sock.setsockopt() è®¾ç½®æŒ‡å®šå¥—æŽ¥å­—çš„å‚æ•° sock.close() å…³é—­å¥—æŽ¥å­— åŸºäºŽ TCP è¿žæŽ¥çš„å¥—æŽ¥å­—tcp æ˜¯åŸºäºŽè¿žæŽ¥çš„,å¿…é¡»å…ˆå¯åŠ¨æœåŠ¡ç«¯,ç„¶åŽå†å¯åŠ¨å®¢æˆ·ç«¯åŽ»è¿žæŽ¥æœåŠ¡ç«¯ tcp æœåŠ¡ç«¯ 12345678910111213141516171819from socket import *# åˆ›å»ºtcpå¥—æŽ¥å­—å¯¹è±¡serverSock = socket(AF_INET, SOCK_STREAM)# ç»‘å®š ip å’Œç«¯å£serverSock.bind(('', 8080))# ç›‘å¬è¿žæŽ¥serverSock.listen(5)# è¢«åŠ¨ç­‰å¾…å®¢æˆ·ç«¯çš„è¿žæŽ¥,å¦‚æžœæœ‰å®¢æˆ·ç«¯è¿žæŽ¥ä¼šè¿”å›žä¸€ä¸ªç”¨äºŽå’Œå®¢æˆ·ç«¯é€šä¿¡çš„å¥—æŽ¥å­—ä»¥åŠå®¢æˆ·ç«¯çš„åœ°å€conn, addr = serverSock.accept()# æŽ¥æ”¶å®¢æˆ·ç«¯çš„æ•°æ®data = conn.recv(1024)# ç»™å®¢æˆ·ç«¯è¿”å›žæ•°æ®conn.send(data2) tcp å®¢æˆ·ç«¯ 123456789101112131415161718from socket import *# åˆ›å»ºå®¢æˆ·ç«¯å¥—æŽ¥å­—å¯¹è±¡clientSock = socket(AF_INET, SOCK_STREAM)# è¿žæŽ¥æœåŠ¡å™¨clientSock.connect(('', 8080))# å‘é€æ•°æ®åˆ°æœåŠ¡ç«¯data = input('&gt;&gt;&gt;').strip()clientSock.send(data.encode('utf-8'))# æŽ¥æ”¶æœåŠ¡ç«¯çš„æ•°æ®data = clientSock.recv(1024)print(data.decode('utf-8'))# å…³é—­å®¢æˆ·ç«¯å¥—æŽ¥å­—clientSock.close() åŸºäºŽ TCP çš„é€šä¿¡å¾ªçŽ¯å¥—æŽ¥å­—åœ¨ä¸Šä¸ªç‰ˆæœ¬ä¸­,æœåŠ¡ç«¯å’Œå®¢æˆ·ç«¯è¿›è¡Œäº†ä¸€æ¬¡é€šä¿¡å°±å…³é—­äº†,å¾ˆæ˜Žæ˜¾å’Œå®žé™…åº”ç”¨ä¸ç¬¦åˆ,æ‰€ä»¥åŠ ä¸Šé€šä¿¡å¾ªçŽ¯,ä½¿å¾—å®¢æˆ·ç«¯å¯ä»¥å’ŒæœåŠ¡ç«¯è¿›è¡Œå¤šæ¬¡é€šä¿¡. æœåŠ¡ç«¯å¿…é¡»æ»¡è¶³ä¸‰ç‚¹è¦æ±‚: ç»‘å®šä¸€ä¸ªå›ºå®šçš„ ip å’Œ port ä¸€ç›´å¯¹å¤–æä¾›ç¨³å®šçš„æœåŠ¡ èƒ½å¤Ÿæ”¯æŒå¹¶å‘(å­¦äº†å¤šè¿›ç¨‹å¤šçº¿ç¨‹å¯ä»¥æ”¯æŒ) æœåŠ¡ç«¯ 1234567891011121314151617181920212223from socket import *serverSock = socket(AF_INET, SOCK_STREAM)serverSock.bind(('', 8081))serverSock.listen(5)conn, addr = serverSock.accept()# é€šä¿¡å¾ªçŽ¯while True: try: data = conn.recv(1024) if len(data) == 0:break # é’ˆå¯¹ linux ç³»ç»Ÿ print('--&gt;æ”¶åˆ°å®¢æˆ·ç«¯æ¶ˆæ¯:', data) conn.send(data.upper()) except ConnectionResetError: breakconn.close()serverSock.close()# åŠ ä¸Šå¼‚å¸¸å¤„ç†æ˜¯å› ä¸ºå½“å®¢æˆ·ç«¯å¼‚å¸¸æ–­å¼€è¿žæŽ¥æ—¶,æœåŠ¡ç«¯ä¼šæŠ¥é”™ å®¢æˆ·ç«¯ 12345678910111213from socket import *clientSock = socket(AF_INET, SOCK_STREAM)client.connect(('', 8081))# é€šä¿¡å¾ªçŽ¯while True: msg = input('&gt;&gt;&gt;:').stript() clientSock.send(msg.encode('utf-8')) data = clientSock.recv(1024) print(data)clientSock.close() åŸºäºŽ TCP çš„è¿žæŽ¥å¾ªçŽ¯é€šä¿¡å¾ªçŽ¯å¥—æŽ¥å­—åœ¨ä¸Šä¸€ä¸ªç‰ˆæœ¬ä¸­è§£å†³äº†å®¢æˆ·ç«¯é‡å¤å‘æ¶ˆæ¯çš„é—®é¢˜,ä½†æ˜¯ä½œä¸ºä¸€ä¸ªæœåŠ¡ç«¯ä¸å¯èƒ½åªä¸ºä¸€ä¸ªå®¢æˆ·æä¾›æœåŠ¡,æ‰€ä»¥æœåŠ¡ç«¯å¿…é¡»å¯ä»¥æŽ¥æ”¶å¤šä¸ªè¿žæŽ¥(å¹¶å‘),è¿™é‡Œå®žçŽ°çš„æ˜¯ä¼ªå¹¶å‘. æœåŠ¡ç«¯ 12345678910111213141516171819202122from socket import *serverSock = socket(AF_INET, SOCK_STREAM)serverSock.bind(('', 8082))serverSock.listen(5)# è¿žæŽ¥å¾ªçŽ¯while True: conn, addr = serverSock.accept() print(conn) # é€šä¿¡å¾ªçŽ¯ while True: try: data = conn.recv(1024) if len(data) == 0: break print('--&gt;æ”¶åˆ°å®¢æˆ·ç«¯çš„æ¶ˆæ¯:', data) conn.send(data.upper()) except ConnectionResetError: break conn.close()serverSock.close() å®¢æˆ·ç«¯ 12345678910111213from socket import *clientSock = socket(AF_INET, SOCK_STREAM)client.connect(('', 8081))# é€šä¿¡å¾ªçŽ¯while True: msg = input('&gt;&gt;&gt;:').stript() clientSock.send(msg.encode('utf-8')) data = clientSock.recv(1024) print(data)clientSock.close() è‡³æ­¤ä¸€ä¸ªå¯ä»¥æŽ¥å—å¤šä¸ªå®¢æˆ·ç«¯è¿žæŽ¥çš„ C/S é€šä¿¡ç¨‹åºå°±å®Œæˆäº†,ä¸è¿‡æœåŠ¡ç«¯è¿žæŽ¥äº†ä¸€ä¸ªå®¢æˆ·ç«¯,é‚£ä¹ˆåªèƒ½ä¸ºè¿™ä¸ªå®¢æˆ·ç«¯æœåŠ¡,åªæœ‰ç­‰è¿™ä¸ªå®¢æˆ·ç«¯æ–­å¼€è¿žæŽ¥æ‰å¯ä»¥è¿žæŽ¥å…¶ä»–çš„å®¢æˆ·ç«¯. TCP å¥—æŽ¥å­—çš„å‚æ•°ç†è§£åœ¨å†™æœåŠ¡ç«¯ä»£ç çš„æ—¶å€™,å‘çŽ°ç»‘å®šçš„åœ°æ–¹çš„ ip æˆ‘ç”¨äº†ç©ºçš„å­—ç¬¦ä¸²,è¿™è¡¨ç¤ºæ˜¯ç»‘å®šåˆ°æœ¬æœºçš„,ä¹Ÿå¯ä»¥ç”¨127.0.0.1æ¥ä»£æ›¿,ç„¶åŽè¿˜æœ‰ä¸€ä¸ªå‚æ•°ä¸º listen, é‡Œé¢å¡«çš„5. åœ¨å¯åŠ¨ä¸€ä¸ªæœåŠ¡ç«¯æ—¶,æœåŠ¡ç«¯å°±ä¼šè¿›å…¥ LISTEN çŠ¶æ€,è¡¨ç¤ºç›‘å¬å®¢æˆ·ç«¯çš„è¿žæŽ¥,é‚£ä¹ˆè¿™ä¸ª5å°±è¡¨ç¤ºå¯ä»¥ç›‘å¬5ä¸ªè¿žæŽ¥,åœ¨å¥—æŽ¥å­—é‡Œé¢æœ‰ä¸ªåè¯å«åŠè¿žæŽ¥æ± ,å°±æ˜¯è¯´å¯åŠ¨æœåŠ¡ç«¯æ—¶,å°±è‡ªåŠ¨å¼€å¯ä¸€ä¸ªåŠè¿žæŽ¥æ± ,å½“å®¢æˆ·ç«¯è¿žæŽ¥æœåŠ¡ç«¯çš„æ—¶å€™,è¡¨ç¤ºä¸€ä¸ªåŠè¿žæŽ¥è¿›å…¥åŠè¿žæŽ¥æ± äº†,ç„¶åŽæ“ä½œç³»ç»Ÿå°±ä»ŽåŠè¿žæŽ¥æ± å–å‡ºè¿™ä¸ªè¿žæŽ¥,å¼€å§‹å¤„ç†è¿™ä¸ªè¿žæŽ¥,é‚£ä¹ˆåŽæ¥çš„è¿žæŽ¥ä¹Ÿæ˜¯æ”¾è¿›è¿™ä¸ªåŠè¿žæŽ¥æ± é‡Œ,å› ä¸ºå¡«çš„5,æ‰€ä»¥åŠ ä¸ŠæœåŠ¡ç«¯å¤„ç†çš„é‚£ä¸ª,ä¸€å…±å¯ä»¥è¿žæŽ¥6ä¸ª(å¤„ç†ä¸€ä¸ª),é‚£ä¹ˆä¹‹åŽçš„å®¢æˆ·ç«¯è¿žæŽ¥éƒ½ä¼šè¢«æœåŠ¡ç«¯æ‹’ç»è¿žæŽ¥,åªæœ‰ç­‰ä¹‹å‰å¤„ç†çš„æˆ–è€…æ˜¯åŠè¿žæŽ¥æ± é‡Œçš„å°‘äº†ä¸€ä¸ªæ‰å¯ä»¥è¿žæŽ¥ä¸ŠæœåŠ¡ç«¯. é‚£ä¹ˆè¿™ä¸ªåŠè¿žæŽ¥å‘ç”Ÿåœ¨ TCP ä¸‰æ¬¡æ¡æ‰‹çš„ç¬¬å‡ æ¬¡æ¡æ‰‹å‘¢?å‘ç”Ÿåœ¨å®¢æˆ·ç«¯ connect çš„æ—¶å€™,ä¹Ÿå°±æ˜¯ç¬¬ä¸€æ¬¡æ¡æ‰‹çš„æ—¶å€™,ç¬¬ä¸€æ¬¡æ¡æ‰‹æˆåŠŸ,å®¢æˆ·ç«¯è¿žæŽ¥å°±è¿›å…¥äº†åŠè¿žæŽ¥æ± ,é‚£ä¹ˆç­‰æœåŠ¡ç«¯ accept çš„æ—¶å€™,å°±è¯´æ˜Žä¸‰æ¬¡æ¡æ‰‹è¿žæŽ¥æˆåŠŸ. ç›®å‰æˆ‘ä»¬å®žçŽ°äº†ä¸€ä¸ªä¸å¤ªå®Œç¾Žçš„ C/S ç¨‹åº,é‚£ä¹ˆæœ‰ä»€ä¹ˆåŠžæ³•å¯ä»¥è®©æœåŠ¡ç«¯æ—¢å¯ä»¥è¿žæŽ¥å¤šä¸ªå®¢æˆ·ç«¯,åˆå¯ä»¥åŒæ—¶ä¸ºå®ƒä»¬æœåŠ¡å‘¢?ç­”æ¡ˆæ˜¯è®©è¿žæŽ¥å¾ªçŽ¯å’Œé€šä¿¡å¾ªçŽ¯æ”¾åœ¨ä¸¤ä¸ª py æ–‡ä»¶é‡Œé¢. æ¨¡æ‹Ÿ SSH å®žçŽ°è¿œç¨‹æ‰§è¡Œå‘½ä»¤ç»“åˆä¹‹å‰å­¦ä¹ çš„æ¨¡å— subprocess, å¯ä»¥æ‰§è¡Œä¼ è¿‡æ¥çš„å‘½ä»¤å‚æ•°,åœ¨å‘½ä»¤è¡Œä¸­.é‚£ä¹ˆæˆ‘ä»¬ä½¿ç”¨å®¢æˆ·ç«¯ä¼ é€å‘½ä»¤,åœ¨æœåŠ¡ç«¯è¿è¡Œ subprocess æ‰§è¡Œå‘½ä»¤,å¹¶æŠŠå¾—åˆ°çš„ç»“æžœä¼ è¿‡åŽ». æœåŠ¡ç«¯ 1234567891011121314151617181920212223242526from socket import *import subprocessserverSock = socket(AF_INET, SOCK_STREAM)serverSock.bind(('', 8085))server.listen(5)while True: conn, addr = serverSock.accept() while True: try: cmd = conn.recv(1024) if len(cmd): break obj = subprocess.Popen(cmd.decode('utf-8'), shell=True, stdout=subprocess.PIPE, stderr=subprocess.PIPE) stdout = obj.stdout.read() stderr = obj.stderr.read() print(len(stdout) + len(stderr)) conn.send(stdout+stderr) except ConnectionResetError: break conn.close()serverSock.close() å®¢æˆ·ç«¯ 123456789101112131415from socket import *clientSock = socket(AF_INET, SOCK_STREAM)clientSock.connect(('', 8085))while True: cmd = input('&gt;&gt;&gt;').strip() if len(cmd) == 0: continue client.send(cmd.encode('utf-8')) client.send(cdm.encode(;utf-8)) cmd_res = clientSock.recv(1024) print(cmd_res.decode('utf-8'))clientSock.close() ç»“æžœè¡¨æ˜Žå½“æœåŠ¡ç«¯å‘é€çš„æ•°æ®å¤§äºŽ1024æ—¶,å®¢æˆ·ç«¯ä¸€æ¬¡æ”¶å–æ•°æ®é‡ä¼šæ”¶ä¸å®Œæ•´,é‚£ä¹ˆå½“ä½ ä¸‹æ¬¡å‘é€å‘½ä»¤çš„æ—¶å€™,æœåŠ¡ç«¯å›žè¿‡æ¥çš„æ•°æ®ä¼šå’Œä¸Šæ¬¡æœªæ”¶å®Œçš„æ•°æ®ç²˜åœ¨ä¸€èµ·,è¿™æ˜¯ä¸€ç§ç²˜åŒ…æƒ…å†µ. æœ‰æ—¶å€™å‘½åå…³é—­æœåŠ¡ç«¯äº†,é‡å¯æœåŠ¡ç«¯æ˜¯ä¼šå‡ºçŽ°è¿™ç§é—®é¢˜æ˜¯å› ä¸ºå½“TCPä¸»åŠ¨å…³é—­è¿žæŽ¥ä¸€æ–¹å°†ç»§ç»­ç­‰å¾…ä¸€å®šæ—¶é—´,è¿™æ˜¯ TCP è¿žæŽ¥çŠ¶æ€ä¸­çš„ TIME_WAIT çŠ¶æ€,è¯¥çŠ¶æ€çš„ä½œç”¨æ˜¯ç”¨æ¥é‡å‘å¯èƒ½ä¸¢å¤±çš„ ACK æŠ¥æ–‡,å…¶äºŒå½“ä¸€ä¸ªæœåŠ¡å™¨æ–­å¼€è¿žæŽ¥æ—¶,è¯¥ç«¯å£å¯èƒ½è¿˜ä¼šé‡å¤ä½¿ç”¨,é‚£ä¹ˆè¯¥ç«¯å£å°±ä¸èƒ½è¢«å…¶ä»–çš„åº”ç”¨ä½¿ç”¨. Nagle ç®—æ³•1 Nagle ç®—æ³•è§„åˆ™ å½“å®¢æˆ·ç«¯è¿žç»­å‘é€æ—¶é—´é—´éš”å¾ˆçŸ­çš„ä¸¤ä¸ªæ•°æ®åŒ…æ—¶,å› ä¸º TCP åè®®ä¸ºäº†ä¼˜åŒ–ä¼ è¾“æ•ˆçŽ‡å’Œè¾ƒå°‘èµ„æºæµªè´¹,å†…éƒ¨ä½¿ç”¨ä¸€ç§Nagle çš„ç®—æ³•.Nagle ç®—æ³•é€šå¸¸ä¼šåœ¨ TCP ç¨‹åºé‡Œæ·»åŠ ä¸¤è¡Œä»£ç ,åœ¨æœªç¡®è®¤æ•°æ®å‘é€çš„æ—¶å€™è®©å‘é€å™¨æŠŠæ•°æ®é€åˆ°ç³»ç»Ÿç¼“å­˜é‡Œ.ä»»ä½•æ•°æ®éšåŽç»§ç»­ç›´åˆ°å¾—åˆ°æ˜Žæ˜¾çš„æ•°æ®ç¡®è®¤æˆ–è€…ç›´åˆ°æ”’åˆ°äº†ä¸€å®šæ•°é‡çš„æ•°æ®äº†å†å‘åŒ…. TCP/IP åè®®ä¸­,æ— è®ºå‘é€å¤šå°‘æ•°æ®,æ€»æ˜¯è¦åœ¨æ•°æ®å‰é¢åŠ ä¸Šåè®®å¤´,åŒæ—¶,å¯¹æ–¹æ”¶åˆ°æ•°æ®,ä¹Ÿéœ€è¦å‘é€ ACK è¡¨ç¤ºç¡®è®¤.ä¸ºäº†å°½å¯èƒ½çš„åˆ©ç”¨ç½‘ç»œå¸¦å®½, TCP æ€»æ˜¯å¸Œæœ›å°½å¯èƒ½çš„å‘é€è¶³å¤Ÿå¤§çš„æ•°æ®.(ä¸€ä¸ªè¿žæŽ¥ä¼šè®¾ç½® MSS å‚æ•°,å› æ­¤, TCP/IP å¸Œæœ›æ¯æ¬¡éƒ½èƒ½ä»¥ MSS å°ºå¯¸çš„æ•°æ®å—æ¥å‘é€æ•°æ®).Nagle ç®—æ³•å°±æ˜¯ä¸ºäº†å°½å¯èƒ½å‘é€å¤§å—æ•°æ®,é¿å…ç½‘ç»œä¸­å……æ–¥ç€è®¸å¤šå°æ•°æ®å—. Nagle ç®—æ³•çš„åŸºæœ¬å®šä¹‰æ—¶ä»»æ„æ—¶åˆ»,æœ€å¤šåªèƒ½æœ‰ä¸€ä¸ªæœªè¢«ç¡®è®¤çš„å°æ®µ.æ‰€è°“å°æ®µ,æŒ‡çš„æ˜¯å°äºŽ MSS å°ºå¯¸çš„æ•°æ®å—,æ‰€è°“æœªè¢«ç¡®è®¤,æ˜¯æŒ‡ä¸€ä¸ªæ•°æ®å—å‘å‡ºåŽ,æ²¡æœ‰æ”¶åˆ°å¯¹æ–¹çš„ ACK ç¡®è®¤æ•°æ®å·²è¢«æ”¶åˆ°. Nagle ç®—æ³•çš„è§„åˆ™: å¦‚æžœåŒ…é•¿åº¦è¾¾åˆ° MSS, åˆ™å…è®¸å‘é€; å¦‚æžœè¯¥åŒ…å«æœ‰ FIN, åˆ™å…è®¸å‘é€; è®¾ç½®äº† TCP_NODELAY é€‰é¡¹,åˆ™å…è®¸å‘é€; æœªè®¾ç½® TCP_CORK é€‰é¡¹æ—¶,å¦‚æ‰€æœ‰å‘å‡ºåŽ»çš„å°æ•°æ®åŒ…(åŒ…é•¿åº¦å°äºŽ MSS)å‡è¢«ç¡®è®¤,åˆ™å…è®¸å‘é€; ä¸Šè¿°æ¡ä»¶éƒ½æœªæ»¡è¶³,ä½†å‘ç”Ÿäº†è¶…æ—¶(ä¸€èˆ¬ä¸º200ms),åˆ™ç«‹å³å‘é€. Nagle ç®—æ³•åªå…è®¸ä¸€ä¸ªæœªè¢« ACKç¡®è®¤çš„åŒ…å­˜åœ¨äºŽç½‘ç»œ,å®ƒå¹¶ä¸ç®¡åŒ…çš„å¤§å°,å› æ­¤å®ƒäº‹å®žä¸Šå°±æ˜¯ä¸€ä¸ªæ‰©å±•çš„åœ-ç­‰åè®®,åªä¸è¿‡å®ƒæ˜¯åŸºäºŽåŒ…åœ-ç­‰çš„,è€Œä¸æ˜¯åŸºäºŽå­—èŠ‚åœ-ç­‰çš„. Nagle ç®—æ³•å®Œå…¨ç”± TCP åè®®çš„ ACK æœºåˆ¶å†³å®š,è¿™ä¼šå¸¦æ¥ä¸€äº›é—®é¢˜,æ¯”å¦‚å¦‚æžœå¯¹ç«¯ ACK å›žå¤å¾ˆå¿«çš„è¯, Nagle äº‹å®žä¸Šä¸ä¼šæ‹¼æŽ¥å¤ªå¤šçš„æ•°æ®åŒ…,è™½ç„¶é¿å…äº†ç½‘ç»œæ‹¥å¡ž,ç½‘ç»œæ€»ä½“çš„åˆ©ç”¨çŽ‡ä¾ç„¶å¾ˆä½Ž. Nagle ç®—æ³•æ˜¯ silly window syndrome(SWS)é¢„é˜²ç®—æ³•çš„ä¸€ä¸ªåŠé›†.SWS ç®—æ³•é¢„é˜²å‘é€å°‘é‡çš„æ•°æ®, Nagle ç®—æ³•æ˜¯å…¶åœ¨å‘é€æ–¹çš„å®žçŽ°,è€ŒæŽ¥æ”¶æ–¹è¦åšçš„æ˜¯ä¸è¦é€šå‘Šç¼“å†²ç©ºé—´çš„å¾ˆå°å¢žé•¿,ä¸é€šçŸ¥å°çª—å£,é™¤éžç¼“å†²åŒºç©ºé—´æœ‰æ˜¾è‘—åœ°å¢žé•¿.è¿™é‡Œæ˜¾è‘—åœ°å¢žé•¿å®šä¹‰ä¸ºå®Œå…¨å¤§å°çš„æ®µ( MSS)æˆ–å¢žé•¿åˆ°å¤§äºŽæœ€å¤§çª—å£çš„ä¸€åŠ. æ³¨æ„ï¼šBSDçš„å®žçŽ°æ˜¯å…è®¸åœ¨ç©ºé—²é“¾æŽ¥ä¸Šå‘é€å¤§çš„å†™æ“ä½œå‰©ä¸‹çš„æœ€åŽçš„å°æ®µï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œå½“è¶…è¿‡1ä¸ªMSSæ•°æ®å‘é€æ—¶ï¼Œå†…æ ¸å…ˆä¾æ¬¡å‘é€å®Œnä¸ªMSSçš„æ•°æ®åŒ…ï¼Œç„¶åŽå†å‘é€å°¾éƒ¨çš„å°æ•°æ®åŒ…ï¼Œå…¶é—´ä¸å†å»¶æ—¶ç­‰å¾…ã€‚ï¼ˆå‡è®¾ç½‘ç»œä¸é˜»å¡žä¸”æŽ¥æ”¶çª—å£è¶³å¤Ÿå¤§ï¼‰ ä¸¾ä¸ªä¾‹å­ï¼Œclientç«¯è°ƒç”¨socketçš„writeæ“ä½œå°†ä¸€ä¸ªintåž‹æ•°æ®ï¼ˆç§°ä¸ºAå—ï¼‰å†™å…¥åˆ°ç½‘ç»œä¸­ï¼Œç”±äºŽæ­¤æ—¶è¿žæŽ¥æ˜¯ç©ºé—²çš„ï¼ˆä¹Ÿå°±æ˜¯è¯´è¿˜æ²¡æœ‰æœªè¢«ç¡®è®¤çš„å°æ®µï¼‰ï¼Œå› æ­¤è¿™ä¸ªintåž‹æ•°æ®ä¼šè¢«é©¬ä¸Šå‘é€åˆ°serverç«¯ï¼ŒæŽ¥ç€ï¼Œclientç«¯åˆè°ƒç”¨writeæ“ä½œå†™å…¥â€˜\r\nâ€™ï¼ˆç®€ç§°Bå—ï¼‰ï¼Œè¿™ä¸ªæ—¶å€™ï¼ŒAå—çš„ACKæ²¡æœ‰è¿”å›žï¼Œæ‰€ä»¥å¯ä»¥è®¤ä¸ºå·²ç»å­˜åœ¨äº†ä¸€ä¸ªæœªè¢«ç¡®è®¤çš„å°æ®µï¼Œæ‰€ä»¥Bå—æ²¡æœ‰ç«‹å³è¢«å‘é€ï¼Œä¸€ç›´ç­‰å¾…Aå—çš„ACKæ”¶åˆ°ï¼ˆå¤§æ¦‚40msä¹‹åŽï¼‰ï¼ŒBå—æ‰è¢«å‘é€ã€‚ è¿™é‡Œè¿˜éšè—äº†ä¸€ä¸ªé—®é¢˜ï¼Œå°±æ˜¯Aå—æ•°æ®çš„ACKä¸ºä»€ä¹ˆ40msä¹‹åŽæ‰æ”¶åˆ°ï¼Ÿè¿™æ˜¯å› ä¸ºTCP/IPä¸­ä¸ä»…ä»…æœ‰nagleç®—æ³•ï¼Œè¿˜æœ‰ä¸€ä¸ªTCPç¡®è®¤å»¶è¿Ÿæœºåˆ¶ ã€‚å½“Serverç«¯æ”¶åˆ°æ•°æ®ä¹‹åŽï¼Œå®ƒå¹¶ä¸ä¼šé©¬ä¸Šå‘clientç«¯å‘é€ACKï¼Œè€Œæ˜¯ä¼šå°†ACKçš„å‘é€å»¶è¿Ÿä¸€æ®µæ—¶é—´ï¼ˆå‡è®¾ä¸ºtï¼‰ï¼Œå®ƒå¸Œæœ›åœ¨tæ—¶é—´å†…serverç«¯ä¼šå‘clientç«¯å‘é€åº”ç­”æ•°æ®ï¼Œè¿™æ ·ACKå°±èƒ½å¤Ÿå’Œåº”ç­”æ•°æ®ä¸€èµ·å‘é€ï¼Œå°±åƒæ˜¯åº”ç­”æ•°æ®æŽå¸¦ç€ACKè¿‡åŽ»ã€‚åœ¨æˆ‘ä¹‹å‰çš„æ—¶é—´ä¸­ï¼Œtå¤§æ¦‚å°±æ˜¯40msã€‚è¿™å°±è§£é‡Šäº†ä¸ºä»€ä¹ˆâ€™\r\nâ€™ï¼ˆBå—ï¼‰æ€»æ˜¯åœ¨Aå—ä¹‹åŽ40msæ‰å‘å‡ºã€‚ å½“ç„¶ï¼ŒTCPç¡®è®¤å»¶è¿Ÿ40mså¹¶ä¸æ˜¯ä¸€ç›´ä¸å˜çš„ï¼ŒTCPè¿žæŽ¥çš„å»¶è¿Ÿç¡®è®¤æ—¶é—´ä¸€èˆ¬åˆå§‹åŒ–ä¸ºæœ€å°å€¼40msï¼ŒéšåŽæ ¹æ®è¿žæŽ¥çš„é‡ä¼ è¶…æ—¶æ—¶é—´ï¼ˆRTOï¼‰ã€ä¸Šæ¬¡æ”¶åˆ°æ•°æ®åŒ…ä¸Žæœ¬æ¬¡æŽ¥æ”¶æ•°æ®åŒ…çš„æ—¶é—´é—´éš”ç­‰å‚æ•°è¿›è¡Œä¸æ–­è°ƒæ•´ã€‚å¦å¤–å¯ä»¥é€šè¿‡è®¾ç½®TCP_QUICKACKé€‰é¡¹æ¥å–æ¶ˆç¡®è®¤å»¶è¿Ÿã€‚ 2. TCP_NODELAY é€‰é¡¹ é»˜è®¤æƒ…å†µä¸‹ï¼Œå‘é€æ•°æ®é‡‡ç”¨Nagle ç®—æ³•ã€‚è¿™æ ·è™½ç„¶æé«˜äº†ç½‘ç»œåžåé‡ï¼Œä½†æ˜¯å®žæ—¶æ€§å´é™ä½Žäº†ï¼Œåœ¨ä¸€äº›äº¤äº’æ€§å¾ˆå¼ºçš„åº”ç”¨ç¨‹åºæ¥è¯´æ˜¯ä¸å…è®¸çš„ï¼Œä½¿ç”¨TCP_NODELAYé€‰é¡¹å¯ä»¥ç¦æ­¢Nagle ç®—æ³•ã€‚ æ­¤æ—¶ï¼Œåº”ç”¨ç¨‹åºå‘å†…æ ¸é€’äº¤çš„æ¯ä¸ªæ•°æ®åŒ…éƒ½ä¼šç«‹å³å‘é€å‡ºåŽ»ã€‚éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œè™½ç„¶ç¦æ­¢äº†Nagle ç®—æ³•ï¼Œä½†ç½‘ç»œçš„ä¼ è¾“ä»ç„¶å—åˆ°TCPç¡®è®¤å»¶è¿Ÿæœºåˆ¶çš„å½±å“ã€‚ 3. TCP_CORK é€‰é¡¹ æ‰€è°“çš„CORKå°±æ˜¯å¡žå­çš„æ„æ€ï¼Œå½¢è±¡åœ°ç†è§£å°±æ˜¯ç”¨CORKå°†è¿žæŽ¥å¡žä½ï¼Œä½¿å¾—æ•°æ®å…ˆä¸å‘å‡ºåŽ»ï¼Œç­‰åˆ°æ‹”åŽ»å¡žå­åŽå†å‘å‡ºåŽ»ã€‚è®¾ç½®è¯¥é€‰é¡¹åŽï¼Œå†…æ ¸ä¼šå°½åŠ›æŠŠå°æ•°æ®åŒ…æ‹¼æŽ¥æˆä¸€ä¸ªå¤§çš„æ•°æ®åŒ…ï¼ˆä¸€ä¸ªMTUï¼‰å†å‘é€å‡ºåŽ»ï¼Œå½“ç„¶è‹¥ä¸€å®šæ—¶é—´åŽï¼ˆä¸€èˆ¬ä¸º200msï¼Œè¯¥å€¼å°šå¾…ç¡®è®¤ï¼‰ï¼Œå†…æ ¸ä»ç„¶æ²¡æœ‰ç»„åˆæˆä¸€ä¸ªMTUæ—¶ä¹Ÿå¿…é¡»å‘é€çŽ°æœ‰çš„æ•°æ®ï¼ˆä¸å¯èƒ½è®©æ•°æ®ä¸€ç›´ç­‰å¾…å§ï¼‰ã€‚ ç„¶è€Œï¼ŒTCP_CORKçš„å®žçŽ°å¯èƒ½å¹¶ä¸åƒä½ æƒ³è±¡çš„é‚£ä¹ˆå®Œç¾Žï¼ŒCORKå¹¶ä¸ä¼šå°†è¿žæŽ¥å®Œå…¨å¡žä½ã€‚å†…æ ¸å…¶å®žå¹¶ä¸çŸ¥é“åº”ç”¨å±‚åˆ°åº•ä»€ä¹ˆæ—¶å€™ä¼šå‘é€ç¬¬äºŒæ‰¹æ•°æ®ç”¨äºŽå’Œç¬¬ä¸€æ‰¹æ•°æ®æ‹¼æŽ¥ä»¥è¾¾åˆ°MTUçš„å¤§å°ï¼Œå› æ­¤å†…æ ¸ä¼šç»™å‡ºä¸€ä¸ªæ—¶é—´é™åˆ¶ï¼Œåœ¨è¯¥æ—¶é—´å†…æ²¡æœ‰æ‹¼æŽ¥æˆä¸€ä¸ªå¤§åŒ…ï¼ˆåŠªåŠ›æŽ¥è¿‘MTUï¼‰çš„è¯ï¼Œå†…æ ¸å°±ä¼šæ— æ¡ä»¶å‘é€ã€‚ä¹Ÿå°±æ˜¯è¯´è‹¥åº”ç”¨å±‚ç¨‹åºå‘é€å°åŒ…æ•°æ®çš„é—´éš”ä¸å¤ŸçŸ­æ—¶ï¼ŒTCP_CORKå°±æ²¡æœ‰ä¸€ç‚¹ä½œç”¨ï¼Œåè€Œå¤±åŽ»äº†æ•°æ®çš„å®žæ—¶æ€§ï¼ˆæ¯ä¸ªå°åŒ…æ•°æ®éƒ½ä¼šå»¶æ—¶ä¸€å®šæ—¶é—´å†å‘é€ï¼‰ã€‚ 4. Nagleç®—æ³•ä¸Ž CORKç®—æ³•åŒºåˆ« Nagleç®—æ³•å’ŒCORKç®—æ³•éžå¸¸ç±»ä¼¼ï¼Œä½†æ˜¯å®ƒä»¬çš„ç€çœ¼ç‚¹ä¸ä¸€æ ·ï¼ŒNagleç®—æ³•ä¸»è¦é¿å…ç½‘ç»œå› ä¸ºå¤ªå¤šçš„å°åŒ…ï¼ˆåè®®å¤´çš„æ¯”ä¾‹éžå¸¸ä¹‹å¤§ï¼‰è€Œæ‹¥å¡žï¼Œè€ŒCORKç®—æ³•åˆ™æ˜¯ä¸ºäº†æé«˜ç½‘ç»œçš„åˆ©ç”¨çŽ‡ï¼Œä½¿å¾—æ€»ä½“ä¸Šåè®®å¤´å ç”¨çš„æ¯”ä¾‹å°½å¯èƒ½çš„å°ã€‚å¦‚æ­¤çœ‹æ¥è¿™äºŒè€…åœ¨é¿å…å‘é€å°åŒ…ä¸Šæ˜¯ä¸€è‡´çš„ï¼Œåœ¨ç”¨æˆ·æŽ§åˆ¶çš„å±‚é¢ä¸Šï¼ŒNagleç®—æ³•å®Œå…¨ä¸å—ç”¨æˆ·socketçš„æŽ§åˆ¶ï¼Œä½ åªèƒ½ç®€å•çš„è®¾ç½®TCP_NODELAYè€Œç¦ç”¨å®ƒï¼ŒCORKç®—æ³•åŒæ ·ä¹Ÿæ˜¯é€šè¿‡è®¾ç½®æˆ–è€…æ¸…é™¤TCP_CORKä½¿èƒ½æˆ–è€…ç¦ç”¨ä¹‹ï¼Œç„¶è€ŒNagleç®—æ³•å…³å¿ƒçš„æ˜¯ç½‘ç»œæ‹¥å¡žé—®é¢˜ï¼Œåªè¦æ‰€æœ‰çš„ACKå›žæ¥åˆ™å‘åŒ…ï¼Œè€ŒCORKç®—æ³•å´å¯ä»¥å…³å¿ƒå†…å®¹ï¼Œåœ¨å‰åŽæ•°æ®åŒ…å‘é€é—´éš”å¾ˆçŸ­çš„å‰æä¸‹ï¼ˆå¾ˆé‡è¦ï¼Œå¦åˆ™å†…æ ¸ä¼šå¸®ä½ å°†åˆ†æ•£çš„åŒ…å‘å‡ºï¼‰ï¼Œå³ä½¿ä½ æ˜¯åˆ†æ•£å‘é€å¤šä¸ªå°æ•°æ®åŒ…ï¼Œä½ ä¹Ÿå¯ä»¥é€šè¿‡ä½¿èƒ½CORKç®—æ³•å°†è¿™äº›å†…å®¹æ‹¼æŽ¥åœ¨ä¸€ä¸ªåŒ…å†…ï¼Œå¦‚æžœæ­¤æ—¶ç”¨Nagleç®—æ³•çš„è¯ï¼Œåˆ™å¯èƒ½åšä¸åˆ°è¿™ä¸€ç‚¹ã€‚ TCP ç²˜åŒ…é—®é¢˜åœ¨ä¸Šé¢çš„ TCP æœåŠ¡ç«¯å’Œå®¢æˆ·ç«¯æ”¶æ•°æ®çš„æ—¶å€™å¡«çš„éƒ½æ˜¯1024å­—èŠ‚,è¡¨ç¤ºä¸€æ¬¡ä»Žæ“ä½œç³»ç»Ÿçš„ç¼“å­˜åŒºåŸŸæ”¶å–æœ€å¤§1024å­—èŠ‚çš„æ•°æ®,å½“ä¸€æ¬¡å‘é€æ•°æ®é‡å°äºŽ1924å­—èŠ‚çš„æ—¶å€™æ¯æ¬¡éƒ½å¯ä»¥æŠŠæ•°æ®æ”¶å–å¹²å‡€,è¿™å½“ç„¶æ˜¯æ²¡é—®é¢˜çš„,ä½†æ˜¯å¦‚æžœæ•°æ®é‡å¤§äºŽ1024å‘¢?ä¼šå‘ç”Ÿä»€ä¹ˆçŽ°è±¡.ä¼šå‘ç”Ÿç²˜åŒ…, ä¸Šè¿°ä»£ç æ˜¾ç¤ºäº†ç¬¬ä¸€ä¸­ç²˜åŒ…æƒ…å†µ,å°±æ˜¯ä¸€æ–¹æ”¶å–çš„æ•°æ®é‡å°äºŽç¼“å­˜ä¸­çš„æ•°æ®é‡,é€ æˆç²˜åŒ…,å¦å¤–ä¸€ç§æ˜¯ç”±äºŽ Nagleç®—æ³•å¯¼è‡´çš„,å½“å®¢æˆ·ç«¯è¿žç»­å‘é€ä¸¤ä¸ªæ•°æ®é‡è¾ƒå°çš„åŒ…æ—¶,ç®—æ³•ä¼šå°†è¿™ä¸¤ä¸ªä¸€èµ·å‘é€é€ æˆç²˜åŒ…. ç¬¬äºŒç§ç²˜åŒ…ä¾‹å­: 1234567891011121314151617181920212223# æœåŠ¡ç«¯from socket import *import subprocessserverSock = socket(AF_INET, SOCK_STREAM)serverSock.bind(('', 8086))serverSock.listen(5)conn, addr = serverSock.accept()data1 = conn.recv(5)print('ç¬¬ä¸€æ¬¡æ”¶:', data1)data2 = conn.recv(5)print('ç¬¬äºŒæ¬¡æ”¶:', data2)data3 = conn.recv(10)print('ç¬¬ä¸‰æ¬¡æ”¶:', data3)data4 = conn.recv(5)print('ç¬¬å››æ¬¡æ”¶:', data4)# ç²˜åŒ…é—®é¢˜æ˜¯ tcp åè®®æµå¼ä¼ è¾“æ•°æ®çš„æ–¹å¼å¯¼è‡´çš„# å¦‚ä½•è§£å†³ç²˜åŒ…é—®é¢˜:æŽ¥æ”¶ç«¯èƒ½å¤Ÿç²¾ç¡®åœ°æ”¶å¹²å‡€æ¯ä¸ªæ•°æ®åŒ…æ²¡æœ‰ä»»ä½•æ®‹ç•™ 1234567891011# å®¢æˆ·ç«¯from socket import *clientSock = socket(AF_INET, SOCK_STREAM)clientSock.connect(('', 8086))# tcp åè®®ä¼šå°†æ•°æ®é‡è¾ƒå°ä¸”å‘é€æ—¶é—´é—´éš”çš„æ•°æ®åˆå¹¶æˆä¸€ä¸ªåŒ…å‘é€clientSock.send(b'hello')clientSock.send(b'world')clientSock.send(b'musibii')clientSock.send(b'1') 12345# è¿è¡Œç»“æžœç¬¬ä¸€æ¬¡æ”¶: b'hello'ç¬¬äºŒæ¬¡æ”¶: b'world'ç¬¬ä¸‰æ¬¡æ”¶: b'musibii1'ç¬¬å››æ¬¡æ”¶: b'' å¯ä»¥çœ‹å‡ºå½“ä¸¤æ¬¡å‘åŒ…é—´éš”æ—¶é—´è¾ƒçŸ­ä¸”æ•°æ®é‡è¾ƒå°‘æ—¶,ä¼šå½“æˆä¸€ä¸ªåŒ…å‘é€å‡ºåŽ». é‚£ä¹ˆæ€Žä¹ˆè§£å†³ç²˜åŒ…é—®é¢˜å‘¢? ä¸€æ˜¯å› ä¸ºæ•°æ®é‡å¤ªå¤§æ”¶å–ä¸å®Œå…¨å¯¼è‡´çš„,äºŒæ˜¯å› ä¸ºä¸¤æ¬¡å‘åŒ…é—´éš”æ—¶é—´è¾ƒçŸ­ä¸”æ•°æ®é‡è¾ƒå°å¯¼è‡´çš„,å¯¼è‡´æ”¶å–çš„ä¸€æ–¹å°†ä¸¤æ¬¡æ•°æ®ä¸€æ¬¡æ€§æ”¶å–å®Œæˆ. è§£å†³åŠžæ³•ä¸€è¿˜æ˜¯ä»¥æ¨¡æ‹Ÿ ssh è¿œç¨‹æ‰§è¡Œå‘½ä»¤çš„ä»£ç ä½œä¸ºä¾‹å­: é¦–å…ˆæ ¹æœ¬åŽŸå› æ˜¯æ”¶å–çš„ä¸€æ–¹ä¸çŸ¥é“åˆ°åº•åº”è¯¥æ”¶å–å¤šå°‘æ•°æ®é‡å¯¼è‡´çš„,é‚£ä¹ˆæˆ‘ä»¬åœ¨æ¯æ¬¡å‘åŒ…ä¹‹å‰å°†æ•°æ®çš„é•¿åº¦å‘è¿‡åŽ»,ç„¶åŽåœ¨å‘é€çœŸå®žæ•°æ®,æŽ¥æ”¶ç«¯å…ˆæŽ¥æ”¶åˆ°çœŸå®žæ•°æ®çš„é•¿åº¦å¤§å°,ç„¶åŽä¾æ®çœŸå®žæ•°æ®é•¿åº¦å¤§å°æ¥æ”¶åŒ…ä¸å°±å®Œç¾Žè§£å†³äº†å—. çœ‹å®žä¾‹: æœåŠ¡ç«¯ 123456789101112131415161718192021222324252627282930313233from socket import *import subprocessimport struct # è¯¥æ¨¡å—ä¸“é—¨ç”¨æ¥å¤„ç†å­—èŠ‚çš„æ•°æ®ç±»åž‹serverSock = socket(AF_INET, SOCK_STREAM)serverSock.bind(('', 8088))serverSock.listen(5)while True: conn, addr = serverSock.accept() while True: try: cmd = conn.recv(1024) if len(cmd) == 0: break obj = subprocess.Popen(cmd.decode('utf-8'), shell=True, stdout=subprocess.PIPE, stderr=subprocess.PIPE) stdout = obj.stdout.read() stderr = obj.stderr.read() print(len(stdout) + len(stderr)) data_len = len(stdout) + len(stderr) # 1. å…ˆåˆ¶ä½œå›ºå®šé•¿åº¦çš„æŠ¥å¤´ header = struct.pack('i', data_len) # iè¡¨ç¤ºè½¬ int åž‹ # 2. å‘é€æŠ¥å¤´ conn.send(header) # 3. å‘é€çœŸå®žæ•°æ® conn.send(stdout) conn.send(stderr) except ConnectionResetError: break conn.close()serverSock.close() å®¢æˆ·ç«¯ 1234567891011121314151617181920212223from socket import *import structclientSock = socket(AF_INET, SOCK_STREAM)clientSock.connect(('', 8088))while True: cmd = input('&gt;&gt;&gt;').strip() if len(cmd) == 0: continue clientSock.send(cmd.encode('utf-8')) # 1. å…ˆæ”¶æŠ¥å¤´,ä»ŽæŠ¥å¤´é‡Œè§£å‡ºçœŸå®žæ•°æ®é•¿åº¦ header = clientSock.recv(1024) total_size = struct.unpack('i', header)[0] # 2. æŽ¥æ”¶çœŸå®žæ•°æ® cmd_res = b'' recv_size = 0 while recv_size &lt; total_size: data = clientSock.recv(1024) recv_size += len(data) cmd_res += data print(cmd_res.decode('utf-8'))clientSock.close() å¯ä»¥çœ‹å‡ºæ¥,æ•°æ®å¯ä»¥æ”¶å¹²å‡€äº†,æ‰€ä»¥ç›®å‰æ¥è®²æ˜¯ä¸å­˜åœ¨ç²˜åŒ…é—®é¢˜çš„,ä½†æ˜¯é—®é¢˜åˆæ¥äº†,åœ¨å®žé™…åº”ç”¨ä¸­,æƒ³è¦ä¼ è¾“çš„æ•°æ®å¦‚æžœå¾ˆå¤§æ€Žä¹ˆåŠž?è¿™ç§åŠžæ³•ä¹Ÿå¯ä»¥è¡Œå¾—é€šå—? å½“æˆ‘æŠŠè¦ä¼ è¾“çš„æ•°æ®å¤§å°è°ƒå¤§æ—¶: 123# demoimport structdata_len = struct.pack('1', 1111111111111111111) è¿è¡Œç»“æžœ è¿™è¯´æ˜Ž struct è½¬åŒ– int ç±»åž‹çš„æ—¶å€™æ˜¯æœ‰å¤§å°é™åˆ¶çš„,æ•°å­—å¤ªå¤§çš„è½¬ä¸äº†,é‚£ä¹ˆ struct è¿˜æœ‰ä¸€ä¸ªç±»åž‹è¡¨ç¤ºé•¿æ•´å½¢çš„ä¸º q, æ¥è¯•è¯•çœ‹. 123# demoimport structdata_len = struct.pack('q', 11111111111) è¿è¡Œç»“æžœ å¯ä»¥çœ‹å‡ºæ¥æ˜¯å¯ä»¥è½¬çš„,è½¬æˆäº†8ä¸ªå­—èŠ‚,é‚£ä¹ˆå¦‚æžœæ•°å­—åœ¨å¤§ä¸€ç‚¹å‘¢,æ€»å½’æœ‰ä¸€ä¸ªä¸èƒ½è½¬çš„æ•°å­—,é‚£ä¹ˆè¿™å°±ä¸æ˜¯æœ€å¥½çš„è§£å†³åŠžæ³•. è§£å†³åŠžæ³•äºŒæˆ‘ä»¬åªæƒ³æŽ¥æ”¶ç«¯æŽ¥æ”¶åˆ°çœŸå®žçš„æ•°æ®é•¿åº¦å°±å¯ä»¥äº†,é‚£ä¹ˆå¯ä¸å¯ä»¥ç”¨ä¸€ä¸ªå®¹å™¨æŠŠçœŸå®žæ•°æ®é•¿åº¦ä¿å­˜ç„¶åŽé€šè¿‡è½¬åŒ–ä¼ è¾“å‡ºåŽ»å‘¢. è¿™å°±æ˜¯åœ¨è‡ªå·±å¼€å‘ä¸€æ¬¾ C/S ç¨‹åºæ—¶éœ€è¦è€ƒè™‘çš„é—®é¢˜äº†,æ¶‰åŠåˆ°æ•°æ®ä¼ è¾“çš„è¯å°±éœ€è¦è‡ªå®šä¹‰æŠ¥å¤´äº†.æŠ¥å¤´å°±æ˜¯å¯ä»¥å°†çœŸå®žæ•°æ®çš„ä¸€äº›ä¿¡æ¯ä¿å­˜èµ·æ¥,å…ˆäºŽçœŸå®žæ•°æ®å‘é€å‡ºåŽ» è‡ªå®šä¹‰æŠ¥å¤´ 123456789101112131415import structimport jsonheader_dic = &#123; 'filename': 'musibii.jpg', 'md5': '165069c8f668edb6b48f208f7a5c6a00', 'total_size': 11111111111111111111111111111111111111&#125;header_json = json.dumps(header_dic)header_bytes = header_json.encode('utf-8')print(len(header_bytes), header_bytes)data_bytes_len = struct.pack('i', len(header_bytes))print(data_bytes_len,len(data_bytes_len)) è¿è¡Œç»“æžœ å¯ä»¥çœ‹å‡ºæ¥,é€šè¿‡è¿™ç§æ–¹æ³•å¯ä»¥æŠŠæ•°æ®é‡å¾ˆå¤§çš„ä¸œè¥¿å‘é€ç»™å®¢æˆ·ç«¯. å…·ä½“è§£å†³åŠžæ³• æœåŠ¡ç«¯ 123456789101112131415161718192021222324252627282930313233343536373839404142434445from socket import *import json,structserverSock = socket(AF_INET, SOCK_STREAM)serverSock.bind(('', 9090))serverSock.listen(5)while True: conn, addr = serverSock.accept() while True: try: data = conn.recv(1024) if len(data) == 0: break obj = subprocess.Popen(data.decode('utf-8'), shell=True, stdout=subprocess.PIPE, stderr=subprocess.PIPE) stdout = obj.stdout.read() stderr = obj.stderr.read() data_bytes_len = len(stdout) + len(stderr) # 1. å…ˆåˆ¶ä½œæŠ¥å¤´ header_dic = &#123; 'filename': 'musibii.jpg', 'md5': '165069c8f668edb6b48f208f7a5c6a00', 'total_size': data_bytes_len &#125; header_json = json.dumps(header_dic) header_bytes = header_json.encode('utf-8') # 2. å…ˆå‘é€4ä¸ª bytes çš„å­—å…¸è½¬åŒ–åŽçš„å­—èŠ‚ conn.send(struct.pack('i', len(header_bytes))) # 3. å‘é€å®Œæ•´æŠ¥å¤´ conn.send(header_bytes) # 4. å‘é€çœŸå®žæ•°æ® conn.send(stdout) conn.send(stderr) except ConnectionResetError as e: print(e) break conn.close()serverSock.close() å®¢æˆ·ç«¯ 12345678910111213141516171819202122232425262728293031323334from socket import *import struct,jsonclientSock = socket(AF_INET, SOCK_STREAM)clientSock.connect(('', 9090))while True: cmd = input('&gt;&gt;&gt;').strip() if len(cmd) == 0: continue clientSock.send(cmd.encode('utf-8')) # 1. å…ˆæ”¶4bytes çš„æœåŠ¡ç«¯å‘è¿‡æ¥çš„è½¬åŒ–æŠ¥å¤´ header_size = struct.unpack('i', clientSock.recv(4))[0] # 2. æŽ¥æ”¶å®Œæ•´çš„æŠ¥å¤´,å°±æ˜¯ header_dic header_bytes = clientSock.recv(header_size) # 3. è½¬åŒ–å¾—åˆ°å®Œæ•´çš„æŠ¥å¤´å­—å…¸ header_json = header_bytes.decode('utf-8') header_dic = json.loads(header_json) # 4. æ ¹æ® key å¾—åˆ°çœŸå®žæ•°æ®é•¿åº¦ total_size = header_dic['total_size'] # 5. æŽ¥å—çœŸæ­£çš„æ•°æ® cmd_res = b'' recv_size = 0 while recv_size &lt; total_size: data = clientSock.recv(1024) recv_size += len(data) cmd_res += data print(cmd_res.decode('utf-8'))clientSock.close() è¿™ä¸ªç¨‹åºå°±åŠ äº†ä¸¤ä¸ªæ­¥éª¤,åœ¨å‘é€çœŸå®žæ•°æ®ä¹‹å‰å‘é€äº†4ä¸ªå­—èŠ‚çš„æŠ¥å¤´,ç„¶åŽå‘é€äº†çœŸæ˜¯çš„æŠ¥å¤´æ•°æ®. é¦–å…ˆåœ¨æœåŠ¡ç«¯å®šä¹‰æŠ¥å¤´(å­—å…¸ç±»åž‹),ç”±å­—å…¸è½¬ä¸º json æ ¼å¼,ç”± json æ ¼å¼è½¬ä¸ºäºŒè¿›åˆ¶,ç”± struct è½¬æˆå››ä¸ªå­—èŠ‚çš„æ•°æ®,å®¢æˆ·ç«¯æ”¶åˆ°4ä¸ªå­—èŠ‚struct è½¬åŒ–çš„æ•°æ®, unpack æˆäºŒè¿›åˆ¶, decode ä¸º json æ ¼å¼çš„æ•°æ®ç±»åž‹,ç„¶åŽååºåˆ—åŒ–æˆ python å­—å…¸ç±»åž‹,å¾—åˆ°é‡Œé¢çš„çœŸå®žæ•°æ®é•¿åº¦.ç„¶åŽæœåŠ¡ç«¯å‘é€çœŸå®žæ•°æ®,å®¢æˆ·ç«¯å¾ªçŽ¯æŽ¥æ”¶çœŸå®žæ•°æ®. åˆ°æ­¤,å°±å®Œç¾Žçš„è§£å†³äº†ç²˜åŒ…çš„é—®é¢˜.å¦‚æœ‰ä¸å¯¹çš„åœ°æ–¹,æ¬¢è¿ŽæŒ‡æ­£.]]></content>
      <categories>
        <category>ç½‘ç»œç¼–ç¨‹</category>
      </categories>
  </entry>
  <entry>
    <title><![CDATA[ç½‘ç»œç¼–ç¨‹ï¼ˆä¸‰ï¼‰]]></title>
    <url>%2F2018%2F11%2F07%2F%E7%BD%91%E7%BB%9C%E7%BC%96%E7%A8%8B-%E4%B8%89%2F</url>
    <content type="text"><![CDATA[åœ¨ä¹‹å‰ä¸¤ç¯‡æ–‡ç« æˆ‘ä»¬å·²ç»å¤§æ¦‚äº†è§£äº†äº’è”ç½‘çš„å·¥ä½œåŽŸç†,çŸ¥é“äº†ä¸€ä¸ªæ•°æ®åŒ…çš„è¯žç”Ÿä¸Žç»“æŸä¸­é—´ç»åŽ†çš„è¿‡ç¨‹,é‚£ä¹ˆåœ¨è¿™ç¯‡åšå®¢æˆ‘ä»¬å°†äº†è§£ä¸€ä¸ªç¨³å®šå¯é åœ° TCP è¿žæŽ¥æ˜¯æ€Žä¹ˆäº§ç”Ÿçš„,å®ƒçš„æ•°æ®ä¼ é€æœ‰ä»€ä¹ˆä¼˜ç‚¹å’Œç¼ºç‚¹? è¯¥åšå®¢å°†é‡ç‚¹ä»‹ç» ä¼ è¾“å±‚çš„ TCP åè®®å»ºç«‹è¿žæŽ¥å’Œæ–­å¼€è¿žæŽ¥çš„è¿‡ç¨‹. UDP å› ä¸ºä¸æ˜¯å¯é çš„è¿žæŽ¥æ‰€ä»¥å°±ä¸é‡ç‚¹ä»‹ç»äº†. ä»‹ç»åœ¨ä¼ è¾“å±‚é€šå¸¸éµå¾ªçš„åè®®ä¸º TCP å’Œ UDPåè®®,å¹¶ä¸”æ˜¯åŸºäºŽç«¯å£è¿è¡Œçš„,ä½†æ˜¯ä¸¤è€…ä¸ºåº”ç”¨å±‚æä¾›ä¸åŒçš„æœåŠ¡. TCP æä¾›çš„æ˜¯ä¸€ç§ç¨³å®š,å¯é åœ°å­—èŠ‚æµæœåŠ¡. é¢å‘è¿žæŽ¥æ„å‘³ç€ä¸¤ä¸ªä½¿ç”¨ TCP çš„åº”ç”¨åœ¨æ•°æ®ä¼ é€ä¹‹å‰éœ€è¦å»ºç«‹ TCP è¿žæŽ¥.è¿™ä¸€è¿‡ç¨‹å¯ä»¥ç†è§£ä¸ºæ‰“ç”µè¯,å…ˆæ‹¨å·,ç­‰å¾…æŽ¥é€š,ç„¶åŽç¨³å®šçš„é€šä¿¡. é‚£ä¹ˆ UDP æ˜¯æ— è¿žæŽ¥,ä¸å¯é çš„æ•°æ®åŒ…æœåŠ¡,å› ä¸ºæ— è¿žæŽ¥,æ‰€ä»¥å¯èƒ½ä¼šäº§ç”Ÿä¸¢åŒ…,ä½†æ˜¯æ•ˆçŽ‡å´è¾ƒé«˜,å› ä¸ºä¸ç”¨å¯¹æ–¹å‘é€ç¡®è®¤åŒ…,æ‰€ä»¥ UDP å¹¿æ³›åº”ç”¨ä¸Žæ¸¸æˆ,ç›´æ’­ç­‰è½¯ä»¶. TCP æŠ¥æ–‡æ ¼å¼åœ¨ç½‘ç»œç¼–ç¨‹(äºŒ)ä¸­å·²ç»çŸ¥é“ TCPæ˜¯åŸºäºŽç«¯å£å‘é€æ•°æ®åŒ…çš„,æ‰€ä»¥ä¼šè®°å½•æœ¬æœºç«¯å£å·å’Œç›®çš„ç«¯å£å·,å…·ä½“æ ¼å¼å¦‚ä¸‹: ä¸Šå›¾æœ‰å‡ ä¸ªé‡è¦çš„å­—æ®µéœ€è¦äº†è§£: åº åˆ—å·: seq åºå·,å 32ä½,ç”¨æ¥æ ‡è¯†ä»Ž TCP æºç«¯å‘ç›®çš„ç«¯å‘é€çš„å­—èŠ‚æµ,å‘é€æ–¹çš„å‘é€æ•°æ®æ—¶å¯¹æ¯”è¿›è¡Œæ ‡è®°; ç¡®è®¤å·: ACK åºå·,å 32ä½,åªæœ‰ ACK æ ‡å¿—ä½ä½1æ—¶,ç¡®è®¤å·å­—æ®µæ‰æœ‰æ•ˆ, ack=seq+1; æ ‡å¿—ä½:å…±6ä¸ª,å³ URG,ACK,PSH,RST,SYN,FIN ç­‰,å…·ä½“å«ä¹‰å¦‚ä¸‹: URG: ç´§æ€¥æŒ‡é’ˆæœ‰æ•ˆ; ACK: ç¡®è®¤åºå·æœ‰æ•ˆ; PSH: æŽ¥æ”¶æ–¹åº”è¯¥å°½å¿«å°†æŠ¥æ–‡äº¤ç»™åº”ç”¨å±‚; RST: é‡ç½®è¿žæŽ¥; SYN: å‘èµ·ä¸€ä¸ªæ–°è¿žæŽ¥ FIN: é‡Šæ”¾ä¸€ä¸ªè¿žæŽ¥. ä¸¤ä¸ªå·ç  Sequene number: é¡ºåºå·ç  Acknowledge number: ç¡®è®¤å·ç  æ³¨æ„: ä¸è¦å°†ç¡®è®¤åºå· Ack ä¸Žæ ‡å¿—ä½ä¸­çš„ ACK æžæ··äº†; ç¡®è®¤æ–¹ ack=seq+1(ä¸è®ºå“ªæ–¹å‘é€),ä¸¤ç«¯æ‰å»ºç«‹è¿žæŽ¥. ä¸‰æ¬¡æ¡æ‰‹è¯¦è§£æ‰€è°“çš„ä¸‰æ¬¡æ¡æ‰‹( Three-Way Handshake)å³å»ºç«‹ TCP è¿žæŽ¥,å°±æ˜¯æŒ‡å»ºç«‹ä¸€ä¸ª TCP è¿žæŽ¥æ—¶,éœ€è¦å®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯å‘é€ä¸‰ä¸ªåŒ…ç”¨æ¥ç¡®è®¤è¿žæŽ¥çš„å»ºç«‹.åœ¨å¥—æŽ¥å­—ç¼–ç¨‹ä¸­,è¿™ä¸€è¿‡ç¨‹ç”±å®¢æˆ·ç«¯æ‰§è¡Œ connect æ¥ä¸»åŠ¨è§¦å‘,æ•´ä¸ªæµç¨‹å¦‚ä¸‹: ä¸‰æ¬¡æ¡æ‰‹ ç¬¬ä¸€æ¬¡æ¡æ‰‹: å®¢æˆ·ç«¯å‘é€ SYN åŒ…( seq=x)çš„æ•°æ®åŒ…åˆ°æœåŠ¡å™¨,å¹¶è¿›å…¥ SYN_SEND çŠ¶æ€,ç­‰å¾…æœåŠ¡å™¨ç¡®è®¤; ç¬¬äºŒæ¬¡æ¡æ‰‹: æœåŠ¡å™¨æ”¶åˆ° SYN åŒ…,å¿…é¡»ç¡®è®¤å®¢æˆ·ç«¯çš„ SYN(ACK=x+1),åŒæ—¶è‡ªå·±ä¹Ÿå‘é€ä¸€ä¸ª SYN åŒ…(seq=y),å³ SYN+ACK åŒ…,æ­¤æ—¶æœåŠ¡å™¨è¿›å…¥ SYN_RCVD çŠ¶æ€; ç¬¬ä¸‰æ¬¡æ¡æ‰‹: å®¢æˆ·ç«¯æ”¶åˆ°æœåŠ¡å™¨çš„ SYN+ACK åŒ…,å‘æœåŠ¡å™¨å‘é€ç¡®è®¤åŒ… ACK(ACK=y+1),æ­¤åŒ…å‘é€å®Œæ¯•,å®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯éƒ½è¿›å…¥ ESTABLISHED çŠ¶æ€,å®Œæˆä¸‰æ¬¡æ¡æ‰‹. æ³¨æ„ æ¡æ‰‹è¿‡ç¨‹ä¼ é€çš„åŒ…ä¸åŒ…å«ä»»ä½•æ•°æ®,ä¸‰æ¬¡æ¡æ‰‹å®Œæ¯•åŽ,å®¢æˆ·ç«¯ä¸ŽæœåŠ¡å™¨æ‰æ­£å¼å¼€å§‹ä¼ é€æ•°æ®.ç†æƒ³çŠ¶æ€ä¸‹, TCP è¿žæŽ¥å»ºç«‹.åœ¨é€šä¿¡åŒæ–¹ä¸­çš„ä»»ä½•ä¸€æ–¹ä¸»åŠ¨å…³é—­è¿žæŽ¥ä¹‹å‰, TCP è¿žæŽ¥éƒ½å°†è¢«ä¸€ç›´ä¿æŒä¸‹åŽ».(åŒæ–¹éƒ½å¯ä»¥ä¸»åŠ¨æ–­å¼€è¿žæŽ¥) å››æ¬¡æŒ¥æ‰‹è¯¦è§£åœ¨å»ºç«‹ TCP è¿žæŽ¥ä¹‹åŽ,å®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯å¼€å§‹ä¼ è¾“æ•°æ®,å› ä¸ºè¿™æ˜¯åŒå‘è¿žæŽ¥,æ‰€ä»¥ä»»ä¸€æ–¹éƒ½å¯ä»¥ä¸»åŠ¨æ–­å¼€è¿žæŽ¥. å››æ¬¡æŒ¥æ‰‹ ç¬¬ä¸€æ¬¡æŒ¥æ‰‹: ä¸»åŠ¨å…³é—­æ–¹å‘é€ä¸€ä¸ª FIN, ç”¨æ¥å…³é—­ä¸»åŠ¨æ–¹åˆ°è¢«åŠ¨æ–¹çš„æ•°æ®ä¼ é€,ä¹Ÿå°±æ˜¯ä¸»åŠ¨å…³é—­æ–¹å‘Šè¯‰è¢«åŠ¨å…³é—­æ–¹:æˆ‘çš„æ•°æ®ä¼ è¾“å·²ç»å®Œæˆäº†,ä¸ä¼šå†ç»™ä½ å‘é€æ•°æ®äº†(å½“ç„¶,åœ¨ FIN åŒ…ä¹‹å‰å‘é€å‡ºåŽ»çš„æ•°æ®,å¦‚æžœæ²¡æœ‰æ”¶åˆ°å¯¹åº”çš„ ACK ç¡®è®¤æŠ¥æ–‡,ä¸»åŠ¨å…³é—­æ–¹ä¾ç„¶ä¼šé‡å‘è¿™äº›æ•°æ®),ä½†æ˜¯æ­¤æ—¶ä¸»åŠ¨å…³é—­æ–¹è¿˜å¯ä»¥æŽ¥æ”¶æ•°æ®. ç¬¬äºŒæ¬¡æŒ¥æ‰‹: è¢«åŠ¨å…³é—­æ–¹æ”¶åˆ° FIN åŒ…åŽ,å‘é€ä¸€ä¸ª ACK ç»™å¯¹æ–¹,ç¡®è®¤åºå·ä¸ºæ”¶åˆ°åºå·+1(ä¸Ž SYN ç›¸åŒ,ä¸€ä¸ª FIN å ç”¨ä¸€ä¸ªåºå·). ç¬¬ä¸‰æ¬¡æŒ¥æ‰‹: è¢«åŠ¨å…³é—­æ–¹å‘é€ä¸€ä¸ª FIN, ç”¨æ¥å…³é—­è¢«åŠ¨å…³é—­æ–¹åˆ°ä¸»åŠ¨å…³é—­æ–¹çš„æ•°æ®ä¼ é€,ä¹Ÿå°±æ˜¯å‘Šè¯‰ä¸»åŠ¨å…³é—­æ–¹,æˆ‘çš„æ•°æ®ä¹Ÿå‘é€å®Œæˆ,ä¸ä¼šå†ç»™ä½ å‘é€æ•°æ®äº†(ä½†æ˜¯åœ¨ FIN å‘é€ä¹‹å‰å‘é€çš„æ•°æ®ä»ç„¶éœ€è¦ä¸»åŠ¨å…³é—­æ–¹å‘é€ç¡®è®¤åŒ…). ç¬¬å››æ¬¡æŒ¥æ‰‹: ä¸»åŠ¨å…³é—­æ–¹æ”¶åˆ° FIn åŽ,å‘é€ä¸€ä¸ª ACK ç»™è¢«åŠ¨å…³é—­æ–¹,ç¡®è®¤åºå·ä¸ºæ”¶åˆ°åºå·+1,è‡³æ­¤,å®Œæˆå››æ¬¡æŒ¥æ‰‹. TCP çŠ¶æ€è½¬æ¢å›¾ CLOSED: è¡¨ç¤ºåˆå§‹çŠ¶æ€ LISTEN(æœåŠ¡å™¨): è¡¨ç¤ºæœåŠ¡å™¨çš„æŸä¸ªå¥—æŽ¥å­—å¤„äºŽåšæŒºçŠ¶æ€,å¯ä»¥æŽ¥å—å®¢æˆ·ç«¯çš„è¿žæŽ¥ YN_RCVD(æœåŠ¡å™¨): è¿™ä¸ªçŠ¶æ€è¡¨ç¤ºæœåŠ¡å™¨æŽ¥æ”¶åˆ°äº†å®¢æˆ·ç«¯çš„ SYN æŠ¥æ–‡,åœ¨æ­£å¸¸æƒ…å†µä¸‹,è¿™ä¸ªçŠ¶æ€æ˜¯æœåŠ¡ç«¯çš„ SOCKET åœ¨å»ºç«‹ TCP è¿žæŽ¥æ—¶çš„ä¸‰æ¬¡æ¡æ‰‹ä¼šè¯è¿‡ç¨‹ä¸­çš„ä¸€ä¸ªä¸­é—´çŠ¶æ€,å¾ˆçŸ­æš‚,åŸºæœ¬ä¸Šç”¨ netstat æ˜¯å¾ˆéš¾çœ‹åˆ°è¿™ç§çŠ¶æ€çš„,å› æ­¤è¿™ç§çŠ¶æ€æ—¶,å½“æ”¶åˆ°å®¢æˆ·ç«¯çš„ ACK æŠ¥æ–‡åŽ,ä»–ä¼šè¿›å…¥ ESTABLISHED çŠ¶æ€ SYN_SENT: è¿™ä¸ªçŠ¶æ€ä¸Ž SYN_RCVD ç›¸å¯¹åº”,å½“å®¢æˆ·ç«¯SOCKET æ‰§è¡Œ CONNECT è¿žæŽ¥æ—¶,å®ƒé¦–å…ˆå‘é€ SYN æŠ¥æ–‡,å› æ­¤ä¹Ÿéšæœºä¼šè¿›å…¥ SYN_SENT, å¹¶ç­‰å¾…æœåŠ¡ç«¯å‘é€ä¸‰æ¬¡è¿žæŽ¥ä¸­çš„ç¬¬äºŒä¸ªæŠ¥æ–‡. SYN_SENT è¡¨ç¤ºå®¢æˆ·ç«¯å·²å‘é€ SYN è¯·æ±‚è¿žæŽ¥æŠ¥æ–‡. ESTABLISHED: è¡¨ç¤ºè¿žæŽ¥å·²ç»å»ºç«‹ FIN_WAIT_1: å…¶å®ž FIN_WAIT_1å’Œ FIN_WAIT_1çŠ¶æ€çš„çœŸæ­£å«ä¹‰éƒ½æ˜¯è¡¨ç¤ºç­‰å¾…å¯¹æ–¹çš„ FIN æŠ¥æ–‡.è€Œè¿™ä¸¤ç§çŠ¶æ€çš„åŒºåˆ«æ˜¯: FIN_WAIT_1çŠ¶æ€å®žé™…ä¸Šæ˜¯å½“SOCKET åœ¨ ESTABLISHED çŠ¶æ€æ—¶,å®ƒæƒ³ä¸»åŠ¨å…³é—­è¿žæŽ¥,å‘å¯¹æ–¹å‘é€äº† FIN æŠ¥æ–‡,æ­¤æ—¶è¯¥ SOCKET å³è¿›å…¥åˆ° FIN_WAIT_1çŠ¶æ€.è€Œå½“å¯¹æ–¹å›žåº”ACK æŠ¥æ–‡åŽ,åˆ™è¿›å…¥åˆ° FIN_WAIT_2çŠ¶æ€,å½“ç„¶åœ¨å®žé™…çš„æ­£å¸¸æƒ…å†µä¸‹,æ— è®ºå¯¹æ–¹åœ¨ä½•ç§æƒ…å†µ,éƒ½åº”è¯¥å›žåº” ACK æŠ¥æ–‡,æ‰€ä»¥ FIN_WAIT_1çŠ¶æ€ä¸€èˆ¬æ˜¯ä¸å®¹æ˜“è§åˆ°çš„,è€Œ FIN_WAIT_2å¯ä»¥ç”¨ netstat çœ‹åˆ° FIN_WAIT_2: å®žé™…ä¸Š FIN_WAIT_2çŠ¶æ€ä¸‹çš„ SOCKET, è¡¨ç¤ºåŠè¿žæŽ¥,ä¹Ÿå³æœ‰ä¸€æ–¹è¦æ±‚ CLOSE è¿žæŽ¥,ä½†å¦å¤–è¿˜å‘Šè¯‰å¯¹æ–¹,æˆ‘æš‚æ—¶è¿˜æœ‰ç‚¹æ•°æ®éœ€è¦ä¼ é€,ç­‰ä¼šå†å…³é—­è¿žæŽ¥ TIME_WAIT: è¡¨ç¤ºæ”¶åˆ°äº†å¯¹æ–¹çš„ FIN æŠ¥æ–‡,å¹¶å‘é€äº† ACK æŠ¥æ–‡,å°±ç­‰2MSL åŽå³å¯å›žåˆ° CLOSED å¯ç”¨çŠ¶æ€äº†(åˆå§‹çŠ¶æ€).å¦‚æžœ FIN_WAIT_1çŠ¶æ€ä¸‹,æ”¶åˆ°äº†å¯¹æ–¹åŒæ—¶å¸¦ FINæ ‡å¿—å’Œ ACK æ ‡å¿—çš„æŠ¥æ–‡æ—¶,å¯ä»¥ç›´æŽ¥è¿›å…¥åˆ° TIME_WAIT çŠ¶æ€,è€Œæ— éœ€ç»è¿‡ FIN_WAIT_2çŠ¶æ€ æ³¨æ„: MSL( æœ€å¤§åˆ†æ®µç”Ÿå­˜æœŸ)æŒ‡æ˜Ž TCP æŠ¥æ–‡åœ¨ internet ä¸Šæœ€é•¿ç”Ÿå­˜æ—¶é—´,æ¯ä¸ªå…·ä½“çš„ TCP å®žçŽ°éƒ½å¿…é¡»é€‰æ‹©ä¸€ä¸ªç¡®å®šçš„ MSL å€¼. RFC1122å»ºè®®ä¸º2åˆ†é’Ÿ,ä½† BSD ä¼ ç»Ÿå®žçŽ°äº†é‡‡ç”¨30ç§’. TIME_WAIT çŠ¶æ€æœ€å¤§ä¿æŒæ—¶é—´æ˜¯2*MSL, ä¹Ÿå°±æ˜¯1-4åˆ†é’Ÿ. ç»“è®º: åœ¨ TIME_WAIT ä¸‹ç­‰å¾…2MSL, åªæ˜¯ä¸ºäº†å°½æœ€å¤§åŠªåŠ›ä¿è¯å››æ¬¡æ¡æ‰‹æ­£å¸¸å…³é—­.ç¡®ä¿è€çš„æŠ¥æ–‡æ®µåœ¨ç½‘ç»œä¸­æ¶ˆå¤±,ä¸ä¼šå½±å“æ–°å»ºç«‹çš„è¿žæŽ¥. CLOSING: è¿™ç§çŠ¶æ€æ¯”è¾ƒç‰¹æ®Š,å®žé™…æƒ…å†µä¸­å¾ˆå°‘è§.æ­£å¸¸æƒ…å†µä¸‹,å½“ä½ å‘é€ FIN æŠ¥æ–‡åŽ,æŒ‰ç†æ¥è¯´åº”è¯¥å…ˆæ”¶åˆ°(æˆ–åŒæ—¶å—åˆ°)å¯¹æ–¹çš„ ACK æŠ¥æ–‡,å†æ”¶åˆ°å¯¹æ–¹çš„ FIN æŠ¥æ–‡.ä½†æ˜¯ CLOSING çŠ¶æ€è¡¨ç¤ºä½ å‘é€ FIN æŠ¥æ–‡åŽ,å¹¶æ²¡æœ‰æ”¶åˆ°å¯¹æ–¹çš„ ACKæŠ¥æ–‡,åè€Œæ”¶åˆ°äº†å¯¹æ–¹çš„ FIN æŠ¥æ–‡.é‚£ä¹ˆä»€ä¹ˆæƒ…å†µä¸‹ä¼šå‡ºçŽ°è¿™ç§æƒ…å†µ.é‚£å°±æ˜¯åŒæ–¹å‡ ä¹Žåœ¨åŒæ—¶ close ä¸€ä¸ª SOCKET çš„æ—¶å€™,é‚£ä¹ˆä¹…å‡ºçŽ°äº†åŒæ–¹åŒæ—¶å‘é€ FIN æŠ¥æ–‡çš„æƒ…å†µ,ä¹Ÿå³ä¼šå‡ºçŽ° CLOSING çŠ¶æ€,è¡¨ç¤ºåŒæ–¹éƒ½æ­£åœ¨å…³é—­ SOCKET è¿žæŽ¥. CLOSE_WAIT: è¿™ç§çŠ¶æ€çš„å«ä¹‰å…¶å®žæ˜¯åœ¨è¡¨ç¤ºç­‰å¾…å…³é—­.å½“å¯¹æ–¹ close ä¸€ä¸ª SOCKET åŽå‘é€ FIN æŠ¥æ–‡ç»™è‡ªå·±,ç³»ç»Ÿæ¯«æ— ç–‘é—®ä¼šå›žåº”ä¸€ä¸ª ACK æŠ¥æ–‡ç»™å¯¹æ–¹,æ­¤æ—¶åˆ™è¿›å…¥ CLOSE_WAIT çŠ¶æ€.æŽ¥ä¸‹æ¥å°±éœ€è¦è€ƒè™‘æ˜¯å¦è¿˜æœ‰æ•°æ®éœ€è¦å‘é€ç»™å¯¹æ–¹,å¦‚æžœæ²¡æœ‰çš„è¯,é‚£ä¹ˆå°±å¯ä»¥ close è¿™ä¸ª SOCKET, å‘é€ FIN æŠ¥æ–‡ç»™å¯¹æ–¹,ä¹Ÿå³å…³é—­è¿žæŽ¥.æ‰€ä»¥åœ¨ CLOSE_WAIT çŠ¶æ€ä¸‹,éœ€è¦ç­‰å¾…ä½ åŽ»å…³é—­è¿žæŽ¥ LAST_ACK: å®ƒæ˜¯è¢«åŠ¨å…³é—­ä¸€æ–¹åœ¨å‘é€ FIN æŠ¥æ–‡åŽ,æœ€åŽç­‰å¾…å¯¹æ–¹çš„ ACK æŠ¥æ–‡.å½“æ”¶åˆ° ACK æŠ¥æ–‡åŽ,ä¹Ÿå³å¯ä»¥è¿›å…¥åˆ° CLOSEDå¯ç”¨çŠ¶æ€.( åˆå§‹çŠ¶æ€) è¡¥å……: é»˜è®¤æƒ…å†µä¸‹,å½“è°ƒç”¨ close æ—¶,å¦‚æžœå‘é€ç¼“å†²ä¸­è¿˜æœ‰æ•°æ®, TCP ä¼šç»§ç»­æŠŠæ•°æ®å‘é€å®Œ; å‘é€äº† FIN åªæ˜¯è¡¨ç¤ºè¿™ç«¯ä¸èƒ½ç»§ç»­å‘é€æ•°æ®(åº”ç”¨å±‚ä¸èƒ½è°ƒç”¨ send å‘é€),ä½†æ˜¯ä»ç„¶å¯ä»¥æŽ¥æ”¶æ•°æ®; åº”ç”¨å±‚å¦‚ä½•çŸ¥é“å¯¹ç«¯å…³é—­?é€šå¸¸,åœ¨æœ€ç®€å•çš„é˜»å¡žæ¨¡åž‹ä¸­,å½“ä½ è°ƒç”¨ recv æ—¶,å¦‚æžœè¿”å›ž0,åˆ™è¡¨ç¤ºå¯¹ç«¯å…³é—­.åœ¨è¿™ä¸ªæ—¶å€™é€šå¸¸çš„åšæ³•å°±æ˜¯ä¹Ÿè°ƒç”¨close, é‚£ä¹ˆä¼šå‘é€ FIN, å®Œæˆå››æ¬¡æ¡æ‰‹.å¦‚æžœä¸è°ƒç”¨ close, é‚£ä¹ˆå¯¹ç«¯å°±ä¼šå¤„äºŽ FIN_WAIT_2çŠ¶æ€,è€Œæœ¬ç«¯åˆ™ä¼šå¤„äºŽ CLOSE_WAITçŠ¶æ€. å¾ˆå¤šæ—¶å€™, TCP è¿žæŽ¥çš„æ–­å¼€éƒ½æ˜¯æœ‰ TCP å±‚è‡ªåŠ¨è¿›è¡Œ,ä¾‹å¦‚ä½¿ç”¨ CTRL_C ç»ˆæ­¢ç¨‹åº, TCP è¿žæŽ¥ä¾ç„¶ä¼šæ­£å¸¸å…³é—­. é—®é¢˜: ä¸ºä»€ä¹ˆå»ºç«‹è¿žæŽ¥åè®®æ˜¯ä¸‰æ¬¡æ¡æ‰‹,è€Œå…³é—­è¿žæŽ¥æ˜¯å››æ¬¡æŒ¥æ‰‹å‘¢? è¿™æ˜¯å› ä¸ºæœåŠ¡ç«¯çš„ LISTEN çŠ¶æ€ä¸‹çš„ SOCKET æ”¶åˆ° SYN çš„è¯·æ±‚è¿žæŽ¥æ—¶,å¯ä»¥æŠŠ ACKå’Œ SYN(ACKèµ·åº”ç­”ä½œç”¨,è€Œ SYN èµ·åŒæ­¥ä½œç”¨)æ”¾åœ¨ä¸€ä¸ªæŠ¥æ–‡é‡Œä¸€èµ·å‘é€.ä½†æ˜¯å…³é—­è¿žæŽ¥æ—¶,å½“æ”¶åˆ°å¯¹æ–¹çš„ FIN æŠ¥æ–‡é€šçŸ¥æ—¶,å®ƒä»…ä»…è¡¨ç¤ºå¯¹æ–¹æ²¡æœ‰æ•°æ®å‘é€äº†,ä½†æ˜¯å¦ä¸€æ–¹æœªå¿…æ‰€æœ‰çš„æ•°æ® éƒ½å…¨éƒ¨å‘é€å®Œå…¨äº†,æ‰€ä»¥å¯èƒ½ä¸ä¼šç«‹é©¬å…³é—­ SOCKET, ä¹Ÿå³ä½ å¯èƒ½è¿˜éœ€è¦å‘é€ä¸€äº›æ•°æ®ç»™å¯¹æ–¹ä¹‹åŽ,å†å‘é€ FIN æŠ¥æ–‡ç»™å¯¹æ–¹è¡¨ç¤ºä½ åŒæ„çŽ°åœ¨å…³é—­è¿žæŽ¥äº†,æ‰€ä»¥è¿™é‡Œçš„ ACK æŠ¥æ–‡å’Œ FIN æŠ¥æ–‡æ˜¯åˆ†å¼€å‘é€çš„. ä¸ºä»€ä¹ˆä¸èƒ½ç”¨ä¸¤æ¬¡æ¡æ‰‹è¿›è¡Œè¿žæŽ¥? åœ¨ä¸‰æ¬¡æ¡æ‰‹ä¸­,æ€»å…±éœ€è¦å®Œæˆä¸¤ä¸ªé‡è¦çš„åŠŸèƒ½,æ—¢è¦åŒæ–¹åšå¥½å‘é€æ•°æ®çš„å‡†å¤‡å·¥ä½œ(åŒæ–¹éƒ½çŸ¥é“å½¼æ­¤å·²ç»å‡†å¤‡å¥½),ä¹Ÿè¦å…è®¸åŒæ–¹å°±åˆå§‹åºåˆ—å·è¿›è¡Œåå•†,è¿™ä¸ªåºåˆ—å·åœ¨æ¡æ‰‹è¿‡ç¨‹ä¸­è¢«å‘é€å’Œç¡®è®¤. çŽ°åœ¨æŠŠä¸‰æ¬¡æ¡æ‰‹æ”¹æˆä»…éœ€è¦ä¸¤æ¬¡æ¡æ‰‹,æ˜¯å¯èƒ½ä¼šå‘ç”Ÿæ­»é”çš„.è€ƒè™‘è®¡ç®—æœºå®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯ä¹‹é—´çš„é€šä¿¡,å‡å®šå®¢æˆ·ç«¯ç»™æœåŠ¡ç«¯å‘é€ä¸€ä¸ªè¿žæŽ¥è¯·æ±‚åˆ†ç»„,æœåŠ¡ç«¯æ”¶åˆ°äº†è¿™ä¸ªåˆ†ç»„,å¹¶å‘é€äº†ç¡®è®¤åº”ç­”åˆ†ç»„.æŒ‰ç…§ä¸¤æ¬¡æ¡æ‰‹çš„åå®š,æœåŠ¡ç«¯è®¤ä¸ºé“¾æŽ¥å·²ç»æˆåŠŸçš„å»ºç«‹äº†,å¯ä»¥å¼€å§‹å‘é€æ•°æ®åˆ†ç»„.å¯æ˜¯,å®¢æˆ·ç«¯åœ¨æœåŠ¡ç«¯çš„åº”ç­”åˆ†ç»„åœ¨ä¼ è¾“ä¸­è¢«ä¸¢å¤±çš„æƒ…å†µä¸‹,å°†ä¸ä¼šçŸ¥é“æœåŠ¡ç«¯æ˜¯å¦å·²å‡†å¤‡å¥½,ä¸çŸ¥é“æœåŠ¡ç«¯å»ºç«‹ä»€ä¹ˆæ ·çš„åºåˆ—å·,å®¢æˆ·ç«¯ç”šè‡³ä¼šæ€€ç–‘æœåŠ¡ç«¯æ˜¯å¦æ”¶åˆ°è‡ªå·±çš„è¿žæŽ¥è¯·æ±‚åˆ†ç»„.åœ¨è¿™ç§æƒ…å†µä¸‹,å®¢æˆ·ç«¯è®¤ä¸ºè¿žæŽ¥è¿˜æœªå»ºç«‹æˆåŠŸ,å°†å¿½ç•¥æœåŠ¡ç«¯å‘æ¥çš„ä»»ä½•æ•°æ®åˆ†ç»„,åªç­‰å¾…è¿žæŽ¥ç¡®è®¤åº”ç­”åˆ†ç»„.è€ŒæœåŠ¡ç«¯åœ¨å‘å‡ºçš„æ•°æ®åˆ†ç»„è¶…æ—¶åŽ,é‡å¤å‘é€åŒæ ·çš„æ•°æ®åˆ†ç»„,å°±å½¢æˆäº†æ­»é”. ä¸ºä»€ä¹ˆ TIME_WAIT çŠ¶æ€éœ€è¦ç­‰2MSL åŽæ‰èƒ½è¿”å›žåˆ° CLOSED çŠ¶æ€? ä»€ä¹ˆæ˜¯ MSL? MSL å³Maximum Segment Lifetime, ä¹Ÿå°±æ˜¯æŠ¥æ–‡æœ€å¤§ç”Ÿå­˜æ—¶é—´.â€™MSL æ˜¯ä»»ä½•æŠ¥æ–‡æ®µè¢«ä¸¢å¼ƒå‰åœ¨ç½‘ç»œå†…çš„æœ€é•¿æ—¶é—´.â€™é‚£ä¹ˆ,2MSL ä¹Ÿå°±æ˜¯è¿™ä¸ªæ—¶é—´çš„ä¸¤å€,å½“ TCP è¿žæŽ¥å®Œæˆå››ä¸ªæŠ¥æ–‡æ®µçš„äº¤æ¢æ—¶,ä¸»åŠ¨å…³é—­çš„ä¸€æ–¹å°†ç»§ç»­ç­‰å¾…ä¸€å®šæ—¶é—´(2-4)åˆ†é’Ÿ,å³ä½¿ä¸¤ç«¯çš„åº”ç”¨ç¨‹åºç»“æŸ. ä¸ºä»€ä¹ˆéœ€è¦2MSL å‘¢. ç¬¬ä¸€,è™½ç„¶åŒæ–¹éƒ½åŒæ„å…³é—­è¿žæŽ¥äº†,è€Œä¸”æ¡æ‰‹çš„å››ä¸ªæŠ¥æ–‡ä¹Ÿéƒ½åè°ƒå’Œå‘é€å®Œæ¯•,æŒ‰ç†å¯ä»¥ç›´æŽ¥å›žåˆ° CLOSED çŠ¶æ€(å°±å¥½æ¯”ä»Ž SYN_SEND çŠ¶æ€åˆ° ESTABLISH çŠ¶æ€é‚£æ ·);ä½†æ˜¯å› ä¸ºå¯¹æ–¹å¤„äºŽ LAST_ACK çŠ¶æ€ä¸‹çš„ SOCKET å¯èƒ½ä¼šå› ä¸ºè¶…æ—¶æœªæ”¶åˆ° ACK æŠ¥æ–‡,è€Œé‡å‘ FIN æŠ¥æ–‡,æ‰€ä»¥è¿™ä¸ª TIME_WAIT çŠ¶æ€çš„ä½œç”¨å°±æ˜¯ç”¨æ¥é‡å‘å¯èƒ½ä¸¢å¤±çš„ ACK æŠ¥æ–‡. ç¬¬äºŒ,æŠ¥æ–‡å¯èƒ½ä¼šè¢«æ··æ·†,æ„æ€æ˜¯è¯´å…¶ä»–æ—¶å€™çš„è¿žæŽ¥å¯èƒ½ä¼šè¢«å½“åšæœ¬æ¬¡çš„è¿žæŽ¥. å½“æŸä¸ªè¿žæŽ¥çš„ä¸€ç«¯å¤„äºŽ TIME_WAIT çŠ¶æ€æ—¶,è¯¥è¿žæŽ¥å°†ä¸èƒ½å†è¢«ä½¿ç”¨.äº‹å®žä¸Š,å¯¹äºŽæˆ‘ä»¬æ¯”è¾ƒæœ‰çŽ°å®žæ„ä¹‰çš„æ˜¯,è¿™ä¸ªç«¯å£å°†ä¸èƒ½å†è¢«ä½¿ç”¨.æŸä¸ªç«¯å£å¤„äºŽ TIME_WAIT(å…¶å®žåº”è¯¥æ˜¯è¿™ä¸ªè¿žæŽ¥) çŠ¶æ€æ—¶,è¿™æ„å‘³ç€è¿™ä¸ª TCP è¿žæŽ¥å¹¶æ²¡æœ‰æ–­å¼€(å®Œå…¨æ–­å¼€),é‚£ä¹ˆ.å¦‚æžœä½  bind è¿™ä¸ªç«¯å£,å°±ä¼šå¤±è´¥.å¯¹äºŽæœåŠ¡å™¨è€Œè¨€,å¦‚æžœæœåŠ¡å™¨çªç„¶ crash æŽ‰äº†,é‚£ä¹ˆä»–å°†æ— æ³•åœ¨2MSL å†…é‡æ–°å¯åŠ¨,å› ä¸º bind ä¼šå¤±è´¥.è§£å†³è¿™ä¸ªé—®é¢˜çš„ä¸€ä¸ªæ–¹æ³•å°±æ˜¯è®¾ç½® SOCKET çš„ SO_REUSEADDR é€‰é¡¹.è¿™ä¸ªé€‰é¡¹æ„å‘³ç€å¯ä»¥é‡ç”¨ä¸€ä¸ªåœ°å€. å½“å»ºç«‹ä¸€ä¸ª TCP è¿žæŽ¥æ—¶,æœåŠ¡ç«¯ä¼šç»§ç»­ç”¨åŽŸæœ‰ç«¯å£ç›‘å¬,åŒæ—¶ç”¨è¿™ä¸ªç«¯å£ä¸Žå®¢æˆ·ç«¯é€šä¿¡.è€Œå®¢æˆ·ç«¯é»˜è®¤æƒ…å†µä¸‹ä¼šä½¿ç”¨ä¸€ä¸ªéšæœºç«¯å£ä¸ŽæœåŠ¡ç«¯çš„ç›‘å¬ç«¯å£é€šä¿¡.æœ‰æ—¶å€™,ä¸ºäº†æœåŠ¡ç«¯çš„å®‰å…¨æ€§,æˆ‘ä»¬éœ€è¦å¯¹å®¢æˆ·ç«¯è¿›è¡ŒéªŒè¯,å³é™å®šæŸä¸ª IP çš„æŸä¸ªç‰¹å®šç«¯å£çš„å®¢æˆ·ç«¯.å®¢æˆ·ç«¯å¯ä»¥ä½¿ç”¨ bind æ¥ä½¿ç”¨ç‰¹å®šçš„ç«¯å£.å¯¹äºŽæœåŠ¡ç«¯,å½“è®¾ç½®äº† SO_REUSEADDR é€‰é¡¹æ—¶,å®ƒå¯ä»¥åœ¨2MSL å†…å¯åŠ¨å¹¶ listenæˆåŠŸ.ä½†æ˜¯å¯¹äºŽå®¢æˆ·ç«¯,å½“ä½¿ç”¨ bind å¹¶è®¾ç½® SO_REUSEADDR æ—¶,å¦‚æžœåœ¨2MSL å†…å¯åŠ¨,è™½ç„¶ bind ä¼šæˆåŠŸ,ä½†æ˜¯åœ¨ windows å¹³å°ä¸Š connect ä¼šå¤±è´¥.è€Œåœ¨ linux æ˜¯å“ªä¸ªä¸å­˜åœ¨è¿™ä¸ªé—®é¢˜. è¦è§£å†³ windows å¹³å°çš„é—®é¢˜,å¯ä»¥è®¾ç½® SO_LISTEN é€‰é¡¹. SO_LINGER é€‰é¡¹å†³å®šè°ƒç”¨ close æ—¶ TCP çš„è¡Œä¸º. SO_LINGER æ¶‰åŠåˆ° linger ç»“æž„ä½“,å¦‚æžœè®¾ç½®ç»“æž„ä½“ä¸­ l_onoff ä¸ºéž0,l_linger ä¸º0,é‚£ä¹ˆè°ƒç”¨ close æ—¶ TCP è¿žæŽ¥ä¼šç«‹åˆ»æ–­å¼€, TCP ä¸ä¼šå°†å‘é€ç¼“å†²ä¸­æœªå‘é€çš„æ•°æ®å‘é€,è€Œæ˜¯ç«‹å³å‘é€ä¸€ä¸ª RST æŠ¥æ–‡ç»™å¯¹æ–¹,è¿™ä¸ªæ—¶å€™ TCP è¿žæŽ¥(å…³é—­æ—¶)å°±ä¸ä¼šè¿›å…¥ TIME_WAIT çŠ¶æ€.è¿™æ ·åšè™½ç„¶è§£å†³äº†é—®é¢˜,ä½†æ˜¯å¹¶ä¸å®‰å…¨.é€šè¿‡ä»¥ä¸Šæ–¹å¼è®¾ç½® SO_LINGER çŠ¶æ€,ç­‰åŒäºŽè®¾ç½® SO_DONTLINGER çŠ¶æ€. å½“ TCP è¿žæŽ¥å‘ç”Ÿä¸€äº›ç‰©ç†ä¸Šçš„æ„å¤–æƒ…å†µæ—¶,ä¾‹å¦‚ç½‘çº¿æ–­å¼€, linux ä¸Šçš„ TCP å®žçŽ°ä¼šä¾ç„¶è®¤ä¸ºè¯¥è¿žæŽ¥æœ‰æ•ˆ,è€Œ windows åˆ™ä¼šåœ¨ä¸€å®šæ—¶é—´åŽè¿”å›žé”™è¯¯ä¿¡æ¯.]]></content>
      <categories>
        <category>ç½‘ç»œç¼–ç¨‹</category>
      </categories>
  </entry>
  <entry>
    <title><![CDATA[ç½‘ç»œç¼–ç¨‹ï¼ˆäºŒï¼‰]]></title>
    <url>%2F2018%2F11%2F06%2F%E7%BD%91%E7%BB%9C%E7%BC%96%E7%A8%8B-%E4%BA%8C%2F</url>
    <content type="text"><![CDATA[å…­ ç½‘ç»œç¼–ç¨‹(ä¸€)æ€»ç»“é¦–å…ˆå¯¹ç½‘ç»œç¼–ç¨‹(ä¸€)åšä¸ªæ€»ç»“:æˆ‘ä»¬çŽ°åœ¨çŸ¥é“äº’è”ç½‘é€šä¿¡å…¶å®žå°±æ˜¯å‘é€æ•°æ®åŒ…ä¸ŽæŽ¥æ”¶æ•°æ®åŒ….ç”µè„‘ A å‘ç”µè„‘ B å‘é€ä¸€ä¸ªæ•°æ®åŒ…, B æ”¶åˆ°ç„¶åŽå›žå¤ä¸€ä¸ªæ•°æ®åŒ…,æ‰å®žçŽ°äº†ç”µè„‘ä¹‹é—´çš„é€šä¿¡.æ•°æ®åŒ…çš„ç»“æž„,åŸºæœ¬æ˜¯ä¸‹å›¾çš„å½¢å¼: æƒ³è¦å‘é€è¿™ä¸ªæ•°æ®åŒ…éœ€è¦çŸ¥é“ä¸¤ä¸ªåœ°å€: å¯¹æ–¹çš„ MAC åœ°å€ å¯¹æ–¹çš„ IP åœ°å€ åªæœ‰å‘é€æ–¹çŸ¥é“è¿™ä¸¤ä¸ªåœ°å€,æ•°æ®åŒ…æ‰å¯ä»¥å‡†ç¡®çš„å‘é€åˆ°æŽ¥æ”¶æ–¹.ä¹‹å‰å·²ç»äº†è§£,å•çº¯çš„ MAC åœ°å€æ˜¯æœ‰å±€é™æ€§çš„,å°±æ˜¯åªèƒ½åœ¨ä¸€ä¸ªå±€åŸŸç½‘å†…é€šè¿‡MAC åœ°å€é€šä¿¡,å¦‚æžœä¸¤å°è®¡ç®—æœºä¸åœ¨ä¸€ä¸ªå±€åŸŸç½‘,é‚£ä¹ˆåªèƒ½å‘é€ç»™ç½‘å…³( gateway),ç”±ç½‘å…³èµ°è·¯ç”±åè®®å‘é€ç»™å¯¹æ–¹. ä¸Šå›¾ä¸­,1å·ç‹„ç”µè„‘æƒ³è¦ä¸ª4å·ç”µè„‘é€šä¿¡.é¦–å…ˆéœ€è¦çŸ¥é“å¯¹æ–¹ç”µè„‘çš„ IP å’Œå­ç½‘æŽ©ç ,ç„¶åŽé€šè¿‡ ARP åè®®è®¡ç®—å‡ºè‡ªå·±å’Œå¯¹æ–¹çš„ç½‘ç»œå·,ç„¶åŽåˆ¤æ–­æ˜¯å¦å¤„äºŽåŒä¸€ä¸ªå±€åŸŸç½‘,ä¸æ˜¯çš„è¯,1å·ç”µè„‘å°†æ•°æ®åŒ…å‘ç»™ç½‘å…³ A. ç½‘å…³ A é€šè¿‡è·¯ç”±åè®®,å‘çŽ°4å·ç”µè„‘ä½äºŽç½‘ç»œ B, åˆæŠŠæ•°æ®åŒ…å‘ç»™ç½‘å…³ B, ç½‘å…³ B å†è½¬å‘ç»™4å·ç”µè„‘. 1å·ç”µè„‘æƒ³è¦æŠŠæ•°æ®åŒ…å‘ç»™ç½‘å…³ A, é¦–å…ˆå¿…é¡»çŸ¥é“ç½‘å…³ A çš„ MAC åœ°å€.æ‰€ä»¥,æ•°æ®åŒ…çš„ç›®æ ‡åœ°å€,å®žé™…ä¸Šåˆ†ä¸ºä¸¤ç§æƒ…å†µ: åœºæ™¯ æ•°æ®æŠ¥åœ°å€ åŒä¸€ä¸ªå±€åŸŸç½‘ å¯¹æ–¹çš„ MAC åœ°å€,å¯¹æ–¹çš„ IP åœ°å€ éžåŒä¸€ä¸ªå±€åŸŸç½‘ ç½‘å…³çš„ MAC åœ°å€,å¯¹æ–¹çš„ IP åœ°å€ å‘é€æ•°æ®åŒ…ä¹‹å‰,ç”µè„‘å¿…é¡»åˆ¤æ–­å¯¹æ–¹ä¸Žè‡ªå·±æ˜¯å¦å¤„äºŽåŒä¸€ä¸ªå±€åŸŸç½‘,ç„¶åŽé€‰æ‹©ç›¸åº”çš„å¤„ç†æ–¹å¼æ¥å‘é€æ•°æ®åŒ…. å›› é¦–æ¬¡è”ç½‘ç›¸å…³è®¾ç½®ä¸€ é™æ€IP è®¾ç½®å½“æˆ‘ä»¬è´­ä¹°äº†ä¸€å°æ–°ç”µè„‘æ—¶,æ’ä¸Šç½‘çº¿,å¼€æœº,è¿™æ—¶å€™ç”µè„‘èƒ½å¤Ÿä¸Šç½‘å—?è¯´åˆ°è¿™æƒ³åˆ°æˆ‘å¤§äºŒå¹²çš„ä¸€ä»¶è ¢äº‹,é‚£æ—¶å€™ä¸çŸ¥é“è·¯ç”±å™¨çš„å·¥ä½œåŽŸç†,ä»¥ä¸ºä¹°äº†è·¯ç”±å™¨å°±å¯ä»¥è¿žæ— çº¿ç½‘ä¸Šç½‘äº†,ç„¶åŽå…´å†²å†²åœ¨ç½‘ä¸Šä¹°äº†ä¸€ä¸ªè·¯ç”±å™¨,æ”¶åˆ°è´§ä¹‹åŽæ’ä¸Šç”µ,æ’ä¸Šç½‘çº¿,å‘çŽ° WiFi å€’æ˜¯å‡ºçŽ°äº†,å¯æ˜¯è¿žä¸Šå´æ²¡æœ‰ååº”,ç„¶åŽæˆ‘å°±æƒ³å•Š,ä¸å¯¹å•Šæ€Žä¹ˆè¿žä¸ä¸Šç½‘?ä¹‹åŽæˆ‘æƒ³æ˜Žç™½äº†,æˆ‘ TM çš„æ ¹æœ¬å°±æ²¡è£…å®½å¸¦,å“ªæ¥çš„ç½‘.å¥½åœ¨é‚£ä¸ªè·¯ç”±å™¨ä¹Ÿæ²¡é—²ç€,ç»ˆäºŽåœ¨åŽ»å¹´æœå½¹äº†â€¦ å½“è´­ä¹°çš„æ–°ç”µè„‘è¿žä¸Šç½‘çº¿æ—¶,é€šå¸¸éœ€è¦åšä¸€äº›è®¾ç½®,ä¸€èˆ¬çŽ°åœ¨éƒ½ä¼šè‡ªåŠ¨è®¾ç½® IP, å­ç½‘æŽ©ç  DNS æœåŠ¡å™¨å•¦,ä½†æ˜¯ä¹Ÿæœ‰æœ‰æ‰‹åŠ¨è®¾ç½®çš„,ä¸€èˆ¬ä¼šè®¾ç½®å››ä¸ªå‚æ•°: æœ¬æœº IP åœ°å€ å­ç½‘æŽ©ç  ç½‘å…³ IP åœ°å€ DNS IP åœ°å€ çœ‹çœ‹ linux ç³»ç»Ÿçš„è®¾ç½® è¿™å››ä¸ªå‚æ•°ç¼ºä¸€ä¸å¯,ç”±äºŽè¿™æ˜¯ç»™å®šçš„,è®¡ç®—æœºæ¯æ¬¡å¼€æœºéƒ½ä¼šåˆ†åˆ°åŒæ ·çš„ IP åœ°å€,æ‰€ä»¥è¿™ç§æƒ…å†µç§°ä¸ºé™æ€ IP åœ°å€ä¸Šç½‘. ä½†æ˜¯è¿™æ ·çš„è®¾ç½®æ¯”è¾ƒä¸“ä¸š,è€Œä¸”ä¸å¤Ÿçµæ´».æ‰€ä»¥å¤§å¤šæ•°ç”¨æˆ·ä½¿ç”¨åŠ¨æ€ IP åœ°å€ä¸Šç½‘. äºŒ åŠ¨æ€ IP åœ°å€ä¸Šç½‘æ‰€è°“åŠ¨æ€ IP åœ°å€,å€¼å¾—æ˜¯è®¡ç®—æœºå¼€æœºåŽ,ä¼šç”±æœåŠ¡å™¨è‡ªåŠ¨åˆ†é…ä¸€ä¸ª IP åœ°å€,ä¸éœ€è¦äººä¸ºè®¾ç½®.ä½¿ç”¨çš„åè®®ä¸º åŠ¨æ€ä¸»æœºè®¾ç½®åè®®(Dynamic Host Configuration Protocolï¼ŒDHCP) åè®®,æ˜¯ä¸€ä¸ªå±€åŸŸç½‘çš„ç½‘ç»œåè®®,ä½¿ç”¨ UDPåè®®å·¥ä½œ,ä¸»è¦æœ‰ä¸¤ä¸ªç”¨é€”: ç”¨äºŽå†…éƒ¨ç½‘æˆ–ç½‘ç»œæœåŠ¡ä¾›åº”å•†è‡ªåŠ¨åˆ†é… IP åœ°å€ç»™ç”¨æˆ·; ç”¨äºŽå†…éƒ¨ç½‘ç®¡ç†å‘˜ä½œä¸ºå¯¹æ‰€æœ‰è®¡ç®—æœºä½œä¸­å¤®ç®¡ç†çš„æ‰‹æ®µ. è¿™ä¸ªåè®®è§„å®š,æ¯ä¸€ä¸ªå±€åŸŸç½‘ä¸­,æœ‰ä¸€å°è®¡ç®—æœºè´Ÿè´£ç®¡ç†æœ¬ç½‘ç»œçš„æ‰€æœ‰ IP åœ°å€,å®ƒå«åšDHCP æœåŠ¡å™¨.æ–°çš„è®¡ç®—æœºåŠ å…¥ç½‘ç»œ,é¦–å…ˆå¿…é¡»å‘ DHCP æœåŠ¡å™¨å‘é€ä¸€ä¸ª DHCP è¯·æ±‚æ•°æ®åŒ…,ç”³è¯· IP åœ°å€å’Œç›¸å…³çš„ç½‘ç»œå‚æ•°. å‰é¢è¯´è¿‡,å¦‚æžœä¸¤å°è®¡ç®—æœºåœ¨åŒä¸€ä¸ªå±€åŸŸç½‘,å¿…é¡»çŸ¥é“å¯¹æ–¹çš„ MAC åœ°å€å’Œ IP åœ°å€,æ‰èƒ½å‘é€æ•°æ®åŒ….ä½†æ˜¯æ–°åŠ å…¥çš„è®¡ç®—æœºå¹¶ä¸çŸ¥é“è¿™ä¸¤ä¸ªåœ°å€,æ€Žä¹ˆå‘é€æ•°æ®åŒ…å‘¢?è¿™å°±æ˜¯ DHCP çš„åŠŸåŠ³äº†. ä¸‰ DHCP åè®®é¦–å…ˆ, DHCP æ˜¯åº”ç”¨å±‚åè®®,å»ºç«‹åœ¨ UDP ä¹‹ä¸Šçš„,æ•°æ®åŒ…æ˜¯è¿™æ ·çš„: æœ€å‰é¢çš„ä»¥å¤ªç½‘æ ‡å¤´,è®¾ç½®å‘é€æ–¹(æœ¬æœº)çš„ MAC åœ°å€å’ŒæŽ¥æ”¶æ–¹( DHCP)çš„ MAC åœ°å€.å‰ç€å°±æ˜¯æœ¬æœºç½‘å¡çš„ MAC åœ°å€,åŽè€…è¿™æ—¶å€™å¹¶ä¸çŸ¥é“,å°±å¡«å…¥ä¸€ä¸ªå¹¿æ’­åœ°å€:FF-FF-FF-FF-FF-FF.è¿™ä¸ªåœ°å€æ˜¯å…·æœ‰ç‰¹æ®Šæ„ä¹‰çš„MAC åœ°å€. åŽé¢çš„ IP æ ‡å¤´,è®¾ç½®å‘é€æ–¹çš„ IP åœ°å€å’ŒæŽ¥æ”¶æ–¹çš„ IPåœ°å€.è¿™æ—¶å€™,å¯¹äºŽè¿™ä¸¤è€…,æœ¬æœºéƒ½ä¸çŸ¥é“.äºŽæ˜¯å‘é€æ–¹çš„ IP åœ°å€å°±è®¾ä¸º0.0.0.0,æŽ¥æ”¶æ–¹å¾— IP åœ°å€è®¾ä¸º255.255.255.255. æœ€åŽçš„ UDP æ ‡å¤´,è®¾ç½®å‘é€æ–¹çš„ç«¯å£å’ŒæŽ¥æ”¶æ–¹çš„ç«¯å£.è¿™ä¸€éƒ¨åˆ†æ˜¯ DHCP åè®®è§„å®šå¥½çš„,å‘é€æ–¹ä¸º68ç«¯å£,æŽ¥æ”¶æ–¹ä¸º67ç«¯å£. æ•°æ®åŒ…å†…å®¹æž„é€ å®ŒæˆåŽ,å°±å¯ä»¥å‘åŒ…äº†.ä»¥å¤ªç½‘æ˜¯åŸºäºŽå¹¿æ’­æ–¹å¼å‘é€çš„,åŒä¸€ä¸ªå±€åŸŸç½‘çš„æ¯ä¸ªè®¡ç®—æœºéƒ½ä¼šæ”¶åˆ°è¿™ä¸ªæ•°æ®åŒ….å› ä¸ºæŽ¥æ”¶æ–¹çš„ MAC åœ°å€æ˜¯FF-FF-FF-FF-FF-FF,çœ‹ä¸å‡ºæ˜¯å‘ç»™è°çš„,æ‰€ä»¥æ¯å°è®¡ç®—æœºæ”¶åˆ°æ•°æ®åŒ…åŽéƒ½ä¼šè¿›è¡Œæ‹†åŒ…æ‰èƒ½ç¡®å®šæ˜¯ä¸æ˜¯å‘ç»™è‡ªå·±çš„.å½“çœ‹åˆ°å‘é€æ–¹ IP åœ°å€ä¸º0.0.0.0,æŽ¥æ”¶æ–¹æ˜¯255.255.255.255æ—¶, DHCP æœåŠ¡å™¨çŸ¥é“,å“¦,åŽŸæ¥è¿™ä¸ªåŒ…æ˜¯å‘ç»™æˆ‘çš„,æ‰€ä»¥å…¶ä»–çš„è®¡ç®—æœºå°±å¯ä»¥ä¸¢å¼ƒè¿™ä¸ªåŒ…äº†. äºŽæ˜¯ DHCP æœåŠ¡å™¨è¯»å–æ•°æ®åŒ…å†…å®¹,åˆ†é…å¥½ IP åœ°å€,å‘é€ä¸€ä¸ª DHCP å“åº”æ•°æ®åŒ….è¿™ä¸ªæ˜¯æ•°æ®åŒ…çš„ç»“æž„å’Œä¸Šé¢æ˜¯ç±»ä¼¼çš„,ä»¥å¤ªç½‘æ ‡å¤´çš„ MAC åœ°å€æ˜¯åŒæ–¹çš„ç½‘å¡åœ°å€, IP æ ‡å¤´çš„ IP åœ°å€æ˜¯ DHCP å‰¯æ­¦å™¨çš„ IP åœ°å€(å‘é€æ–¹)å’Œ255.255.255.255(æŽ¥æ”¶æ–¹),UDP æ ‡å¤´çš„ç«¯å£æ˜¯67(å‘é€æ–¹)å’Œ68(æŽ¥æ”¶æ–¹),åˆ†é…ç»™è¯·æ±‚ç«¯çš„ IP åœ°å€å’Œæœ¬ç½‘ç»œçš„å…·ä½“å‚æ•°åˆ™åŒ…å«åœ¨ Data éƒ¨åˆ†. æ–°åŠ å…¥çš„è®¡ç®—æœºæ”¶åˆ°è¿™ä¸ªå“åº”åŒ…,äºŽæ˜¯å°±çŸ¥é“äº†è‡ªå·±çš„ IP åœ°å€,å­ç½‘æŽ©ç ,ç½‘å…³åœ°å€å’ŒDNS æœåŠ¡å™¨åœ°å€. å›› å°ç»“è¿™æ˜¯è”ç½‘çš„ç¬¬ä¸€æ­¥,ä¸ç®¡æ˜¯é™æ€ IP åœ°å€è¿˜æ˜¯åŠ¨æ€ IP åœ°å€,æƒ³è¦è¿žä¸Šäº’è”ç½‘,éœ€è¦ç¡®å®šè¿™å››ä¸ªå‚æ•°: æœ¬æœº IP åœ°å€ å­ç½‘æŽ©ç  ç½‘å…³ IP åœ°å€ DNS IP åœ°å€ åªæœ‰è¿™å››ä¸ªå‚æ•°ç¡®å®šäº†,æ‰å¯ä»¥æ„‰å¿«çš„è¿›è¡Œç½‘ç»œå†²æµª.é‚£ä¹ˆå½“æˆ‘ä»¬è®¿é—®ç½‘é¡µçš„æ—¶å€™,äº’è”ç½‘åè®®æ˜¯å¦‚ä½•å·¥ä½œçš„å‘¢? äº” è®¿é—®ç½‘é¡µä¸€ æœ¬æœºå‚æ•°å‡å®šç»è¿‡ä¸Šä¸€èŠ‚çš„æ­¥éª¤,ç”¨æˆ·è®¾ç½®å¥½äº†è‡ªå·±çš„ç½‘ç»œå‚æ•°: IP åœ°å€:192.168.2.238 å­ç½‘æŽ©ç :255.255.255.0 è·¯ç”±å™¨(ç½‘å…³åœ°å€):192.168.2.1 DNS æœåŠ¡å™¨:192.168.2.1 æ‰“å¼€æµè§ˆå™¨è®¿é—®è°·æ­Œ,åœ¨åœ°å€æ è¾“å…¥ www.google.com,è¿™æ„å‘³ç€,æµè§ˆå™¨å‘ google å‘é€ä¸€ä¸ªç½‘é¡µè¯·æ±‚çš„æ•°æ®åŒ…. äºŒ DNS åè®®æˆ‘ä»¬çŸ¥é“,å‘è°·æ­Œå‘é€ä¸€ä¸ªæ•°æ®åŒ…,å¿…é¡»è¦çŸ¥é“å¯¹æ–¹çš„ IP åœ°å€.ä½†æ˜¯çŽ°åœ¨åªçŸ¥é“ä¸€ä¸ªç½‘å€,å¹¶ä¸çŸ¥é“å®ƒçš„ IP åœ°å€. DNS åè®®å¯ä»¥å¸®åŠ©æˆ‘ä»¬,å°†è¿™ä¸ªç½‘å€è½¬æ¢æˆ IP åœ°å€,å·²ç»çŸ¥é“æˆ‘ä»¬çš„ DNX æœåŠ¡å™¨ä¸º192.168.2.1,äºŽæ˜¯å‘è¿™ä¸ªåœ°å€å‘é€ä¸€ä¸ª DNS æ•°æ®åŒ…(53ç«¯å£). ç„¶åŽ, DNS æœåŠ¡å™¨ä½œå‡ºç›¸åº”,å‘Šè¯‰æˆ‘ä»¬è°·æ­Œçš„åœ°å€æ˜¯174.36.196.242.äºŽæ˜¯æˆ‘ä»¬çŸ¥é“äº†å¯¹æ–¹çš„ IP åœ°å€. ä¸‰ å­ç½‘æŽ©ç æŽ¥ä¸‹æ¥éœ€è¦åˆ¤æ–­è¯¥ IPåœ°å€å’Œæœ¬æœºæ˜¯å¦å¤„äºŽåŒä¸€ä¸ªå±€åŸŸç½‘,è¿™å°±éœ€è¦å­ç½‘æŽ©ç æ¥è¿›è¡Œ AND ä½è¿ç®—. å·²çŸ¥å­ç½‘æŽ©ç æ˜¯255.255.255.0,æœ¬æœºç”¨å­ç½‘æŽ©ç å’Œè‡ªå·±çš„ IPåœ°å€192.168.2.238,åšä¸€ä¸ªäºŒè¿›åˆ¶çš„ AND è¿ç®—,è®¡ç®—ç»“æžœä¸º192.168.2.0,ç„¶åŽå¯¹è°·æ­Œçš„ IP åœ°å€ä¹Ÿåšä¸€ä¸ª AND è¿ç®—,è®¡ç®—ç»“æžœä¸º174.36.196.0.ä¸¤ä¸ªç»“æžœä¸ç›¸ç­‰,æ‰€ä»¥ç»“è®ºæ˜¯è°·æ­Œä¸Žæœ¬æœºä¸åœ¨ä¸€ä¸ªå±€åŸŸç½‘. å› æ­¤æˆ‘ä»¬æƒ³è¦å’Œè°·æ­Œé€šä¿¡çš„è¯éœ€è¦é€šè¿‡ç½‘å…³è½¬å‘,ç½‘å…³åœ°å€ä¸º192.168.2.1,ä¹Ÿå°±æ˜¯æ‰€æŽ¥æ”¶æ–¹å¾— MAC åœ°å€æ˜¯ç½‘å…³çš„ MAC åœ°å€. å›› åº”ç”¨å±‚åè®®æµè§ˆç½‘é¡µç”¨çš„æ˜¯ HTTP/HTTPS åè®®,è¿™ä¸¤ç§åè®®çš„æ•°æ®æž„é€ å·®ä¸å¤š: HTTPéƒ¨åˆ†çš„å†…å®¹,ç±»ä¼¼ä¸‹é¢è¿™æ ·: å‡å®šè¿™ä¸ªéƒ¨åˆ†çš„é•¿åº¦ä¸º4960å­—èŠ‚,å®ƒä¼šè¢«åµŒåœ¨ TCP æ•°æ®åŒ…ä¸­. äº” TCP åè®®TCP æ•°æ®åŒ…éœ€è¦è®¾ç½®ç«¯å£,æŽ¥æ”¶æ–¹( Google)çš„ HTTPSé»˜è®¤æ˜¯443,å‘é€æ–¹(æœ¬æœº)çš„ç«¯å£æ˜¯ä¸€ä¸ªéšæœºç”Ÿæˆçš„1024-65535ä¹‹é—´çš„æ•´æ•°,å‡å®šä¸º51775. TCP æ•°æ®åŒ…çš„æ ‡å¤´é•¿åº¦ä¸º20å­—èŠ‚,åŠ ä¸ŠåµŒå…¥ HTTPS çš„æ•°æ®åŒ…,æ€»é•¿åº¦ä¸º4980å­—èŠ‚. å…­ IP åè®®ç„¶åŽ, TCP æ•°æ®åŒ…å†åµŒå…¥ IP æ•°æ®åŒ….IP æ•°æ®åŒ…éœ€è¦è®¾ç½®åŒæ–¹çš„ IPåœ°å€,è¿™æ˜¯å·²çŸ¥çš„,å‘é€æ–¹æ˜¯192.168.2.238(æœ¬æœº),æŽ¥æ”¶æ–¹ä¸º174.36.196.242( Google). IP æ•°æ®åŒ…çš„æ ‡å¤´é•¿åº¦ä¸º20å­—èŠ‚,åŠ ä¸ŠåµŒå…¥çš„ TCP æ•°æ®åŒ…,æ€»é•¿åº¦å˜ä¸º5000å­—èŠ‚. ä¸ƒ ä»¥å¤ªç½‘åè®®æœ€åŽ, IPåœ°å€æ•°æ®åŒ…åµŒå…¥ä»¥å¤ªç½‘æ•°æ®åŒ….ä»¥å¤ªç½‘æ•°æ®åŒ…éœ€è¦è®¾ç½®åŒæ–¹çš„ MAC åœ°å€,å‘é€æ–¹ä¸ºæœ¬æœºçš„ç½‘å¡ MAC åœ°å€,æŽ¥æ”¶æ–¹ä¸ºç½‘å…³192.168.2.1çš„ MAC åœ°å€(é€šè¿‡ ARP åè®®èŽ·å¾—) æœ¬æœºçš„ MAC åœ°å€: ç½‘å…³çš„ MAC åœ°å€: ä»¥å¤ªç½‘æ•°æ®åŒ…çš„æ•°æ®éƒ¨åˆ†,æœ€å¤§é•¿åº¦ä¸º1500å­—èŠ‚,è€ŒçŽ°åœ¨çš„ IP æ•°æ®åŒ…é•¿åº¦ä¸º5000å­—èŠ‚.å› æ­¤, IP æ•°æ®åŒ…å¿…é¡»åˆ†å‰²æˆå››ä¸ªåŒ….å› ä¸ºæ¯ä¸ªåŒ…éƒ½æœ‰è‡ªå·±çš„æ ‡å¤´(20å­—èŠ‚),æ‰€ä»¥å››ä¸ªåŒ…çš„ IP æ•°æ®åŒ…çš„é•¿åº¦åˆ†åˆ«ä¸º1500,1500,1500,560. å…« æœåŠ¡ç«¯å“åº”ç»è¿‡å¤šä¸ªç½‘å…³çš„è½¬å‘, google æœåŠ¡å™¨æ”¶åˆ°äº†å››ä¸ªä»¥å¤ªç½‘æ•°æ®åŒ…. æ ¹æ® IP æ ‡å¤´çš„åºå·, google å°†å››ä¸ªåŒ…æ‹¼èµ·æ¥,å–å‡ºå®Œæ•´çš„ TCP æ•°æ®åŒ…,ç„¶åŽè¯»å–é‡Œé¢çš„ HTTPS è¯·æ±‚,æŽ¥ç€åšå‡º HTTPS å“åº”,å†ç”¨ TCP åè®®å›žå¤ä¸€ä¸ªæ•°æ®åŒ…. æœ¬æœºæ”¶åˆ° HTTPS å“åº”ä»¥åŽ,å°±å¯ä»¥å°†ç½‘é¡µæ˜¾ç¤ºå‡ºæ¥,å®Œæˆä»¥ä¸€æ¬¡ç½‘ç»œé€šä¿¡.]]></content>
      <categories>
        <category>ç½‘ç»œç¼–ç¨‹</category>
      </categories>
  </entry>
  <entry>
    <title><![CDATA[ç½‘ç»œç¼–ç¨‹ï¼ˆä¸€ï¼‰]]></title>
    <url>%2F2018%2F11%2F02%2F%E7%BD%91%E7%BB%9C%E7%BC%96%E7%A8%8B-%E4%B8%80%2F</url>
    <content type="text"><![CDATA[ä¸€ å®¢æˆ·ç«¯/æœåŠ¡ç«¯æž¶æž„ ç¡¬ä»¶ C/S æž¶æž„ è½¯ä»¶ C/S æž¶æž„ äº’è”ç½‘å¤„å¤„æ˜¯ C/S æž¶æž„çš„ å¦‚ä¸€ä¸ªç½‘ç«™å°±æ˜¯æœåŠ¡ç«¯,æµè§ˆå™¨æ˜¯å®¢æˆ·ç«¯( B/S æž¶æž„) æœåŠ¡ç«¯éœ€è¦éµå¾ªçš„åŽŸåˆ™: æœåŠ¡ç«¯ä¸Žå®¢æˆ·ç«¯éƒ½éœ€è¦æœ‰æƒŸä¸€çš„åœ°å€,ä½†æ˜¯æœåŠ¡ç«¯çš„åœ°å€å¿…é¡»å›ºå®š/ç»‘å®š å¯¹å¤–ä¸€ç›´æä¾›æœåŠ¡,éœ€è¦ç¨³å®šè¿è¡Œ æœåŠ¡ç«¯éœ€è¦æ”¯æŒå¹¶å‘ ç½‘ç»œ ç½‘ç»œå»ºç«‹çš„ç›®çš„æ˜¯ä¸ºäº†æ•°æ®äº¤äº’(é€šä¿¡) å¦‚ä½•å®žçŽ°é€šä¿¡: 1. å»ºç«‹å¥½åº•å±‚çš„ç‰©ç†è¿žæŽ¥ä»‹è´¨ 2. æœ‰ä¸€å¥—ç»Ÿä¸€çš„é€šä¿¡æ ‡å‡†,ç§°ä¹‹ä¸ºäº’è”ç½‘åè®® äº’è”ç½‘åè®®:å°±æ˜¯è®¡ç®—æœºç•Œçš„æ ‡å‡†è¯­è¨€ äºŒ ä¸ƒå±‚æ¨¡åž‹æ€»è§ˆäº’è”ç½‘çš„å®žçŽ°,æ€»å…±å¯ä»¥åˆ†ä¸ºä¸ƒå±‚.æ¯ä¸€å±‚éƒ½é ä¸‹ä¸€å±‚çš„æ”¯æŒ.ç”¨æˆ·æŽ¥è§¦çš„æ˜¯ç¬¬ä¸ƒå±‚,ä¹Ÿå°±æ˜¯åº”ç”¨å±‚.æƒ³è¦ç†è§£äº’è”ç½‘åè®®,å¿…é¡»ä»Žæœ€ä¸‹å±‚å¼€å§‹,è‡ªä¸‹è€Œä¸Šç†è§£æ¯ä¸€å±‚çš„åŠŸèƒ½. OSI æ¨¡åž‹å¯ä»¥åˆ†ä¸ºä¸ƒå±‚,äº”å±‚,å››å±‚,å…¶å®žéƒ½æ˜¯ä¸€ä¸ªé“ç†,åªä¸è¿‡åˆå¹¶äº†å‡ å±‚è€Œå·².ä»Žä¸‹è€Œä¸Šåˆ†åˆ«ä¸º:ç‰©ç†å±‚,æ•°æ®é“¾è·¯å±‚,ç½‘ç»œå±‚,ä¼ è¾“å±‚,ä¼šè¯å±‚,è¡¨ç¤ºå±‚,åº”ç”¨å±‚. æ¯å±‚è¿è¡Œå¸¸è§çš„ç‰©ç†è®¾å¤‡: ä¸‰ tcp/IP äº”å±‚æ¨¡åž‹ç†è§£ä¸€èˆ¬è®²åº”ç”¨å±‚,è¡¨ç¤ºå±‚,ä¼šè¯å±‚å¹¶åšåº”ç”¨å±‚,ä»Ž tcp/IP äº”å±‚åè®®çš„è§’åº¦æ¥é˜è¿°æ¯å±‚çš„ç”±æ¥å’ŒåŠŸèƒ½,æžæ¸…æ¥šäº†æ¯å±‚çš„ä¸»è¦åè®®ä¹Ÿå°±ç†è§£äº†äº’è”ç½‘é€šä¿¡çš„åŽŸç†. æ¯å±‚éƒ½è¿è¡Œç‰¹å®šçš„åè®®,è¶Šå¾€ä¸Šè¶Šé è¿‘ç”¨æˆ·,è¶Šå¾€ä¸‹è¶Šé è¿‘ç¡¬ä»¶. ä¸€ ç‰©ç†å±‚ç‰©ç†å±‚ä¹Ÿå¯ä»¥ç§°ä¹‹ä¸ºå®žä½“å±‚.ç”µè„‘æƒ³è¦äº’ç›¸é€šä¿¡,ç¬¬ä¸€ä»¶äº‹å…ˆè¦æŠŠç”µè„‘è¿žèµ·æ¥,å¯ä»¥ç”¨å…‰ç¼†,ç”µç¼†ç­‰æ–¹å¼å®žçŽ°é€šä¿¡.è¿™å°±å«å®žä½“å±‚,å®ƒå°±æ˜¯æŠŠç”µè„‘è¿žæŽ¥èµ·æ¥çš„ç‰©ç†æ‰‹æ®µ.å®ƒä¸»è¦è§„å®šäº†ç½‘ç»œçš„ä¸€äº›ç”µå™¨ç‰¹æ€§.å®ƒçš„åŠŸèƒ½å®¤åŸºäºŽç”µå™¨ç‰¹æ€§å‘é€é«˜ä½Žç”µåŽ‹(ç”µä¿¡å·),é«˜ç”µåŽ‹å¯¹åº”æ•°å­—1,ä½Žç”µåŽ‹å¯¹åº”æ•°å­—0. äºŒ æ•°æ®é“¾è·¯å±‚ç‰©ç†å±‚å•çº¯çš„ä¼ è¾“ç”µä¿¡å·0å’Œ1æ²¡æœ‰ä»»ä½•æ„ä¹‰,å¿…é¡»è§„å®šç”µä¿¡å·å¤šå°‘ä½ä¸€ç»„,æ¯ç»„ä»€ä¹ˆæ„æ€. æ•°æ®é“¾è·¯å±‚çš„åŠŸèƒ½:å®šä¹‰äº†ç”µä¿¡å·çš„åˆ†ç»„æ–¹å¼,è¿™å°±æ˜¯æ•°æ®é“¾è·¯å±‚çš„åŠŸèƒ½,å®ƒåœ¨ç‰©ç†å±‚çš„ä¸Šæ–¹,ç¡®å®šäº†0å’Œ1çš„åˆ†ç»„æ–¹å¼. 1 ä»¥å¤ªç½‘åè®®æ—©æœŸçš„æ—¶å€™å„ä¸ªå…¬å¸éƒ½æœ‰è‡ªå·±çš„åˆ†ç»„æ–¹å¼,åŽæ¥å½¢æˆäº†ç»Ÿä¸€çš„æ ‡å‡†,å³ä»¥å¤ªç½‘åè®® Ethernet. Ethernet è§„å®š ä¸€ç»„ç”µä¿¡å·æž„æˆä¸€ä¸ªæ•°æ®åŒ…,ä¹Ÿå«æ•°æ®å¸§ æ¯ä¸€ç»„æ•°æ®å¸§åˆ†æˆ:æŠ¥å¤´ head å’Œæ•°æ® data ä¸¤éƒ¨åˆ† æŠ¥å¤´åŒ…å«æ•°æ®åŒ…çš„ä¸€äº›è¯´æ˜Žé¡¹,æ¯”å¦‚å‘é€è€…çš„æºåœ°å€,æŽ¥å—è€…çš„æºåœ°å€ä»¥åŠæ•°æ®ç±»åž‹ç­‰ç­‰. å‘é€è€…/æºåœ°å€: 6ä¸ªå­—èŠ‚ æŽ¥å—è€…/ç›®æ ‡åœ°å€: 6ä¸ªå­—èŠ‚ æ•°æ®ç±»åž‹: 6ä¸ªå­—èŠ‚ æ•°æ®åˆ™æ˜¯æ•°æ®åŒ…çš„å…·ä½“å†…å®¹ æ•°æ®åŒ…æœ€çŸ­ä¸º46å­—èŠ‚,æœ€é•¿ä¸º1500å­—èŠ‚ æ‰€ä»¥ä¸€ä¸ªæ•°æ®å¸§çš„é•¿åº¦æœ€çŸ­ä¸º64å­—èŠ‚,æœ€é•¿1518å­—èŠ‚,è¶…è¿‡æœ€å¤§é™åˆ¶å°±åˆ†ç‰‡å‘é€. 2 mac åœ°å€head ä¸­åŒ…å«çš„æºåœ°å€å’Œç›®æ ‡åœ°å€çš„ç”±æ¥: Ethernet è§„å®šæŽ¥å…¥ Internet çš„è®¾å¤‡éƒ½å¿…é¡»å…·å¤‡ç½‘å¡,å‘é€ç«¯å’ŒæŽ¥æ”¶ç«¯çš„åœ°å€ä¾¿æ˜¯æŒ‡ç½‘å¡çš„åœ°å€,å³MAC åœ°å€. mac åœ°å€:æ¯å—ç½‘å¡å‡ºåŽ‚æ—¶éƒ½è¢«çƒ§åˆ¶ä¸Šä¸–ç•Œä¸Šä¸€ä¸ªæƒŸä¸€çš„MAC åœ°å€,é•¿åº¦ä¸º48ä½2è¿›åˆ¶,é€šå¸¸ç”±12ä½16è¿›åˆ¶æ•°è¡¨ç¤º(å‰å…­ä½æ˜¯åŽ‚å•†ç¼–å·,åŽå…­ä½æ˜¯æµæ°´çº¿å·) è£…äº†å¥½å¤šæ¬¡è™šæ‹Ÿæœº,æˆ‘çŽ°åœ¨ä¹Ÿä¸çŸ¥é“é‚£ä¸ªæ˜¯æˆ‘çš„äº†â€¦ 3 å¹¿æ’­å®šä¹‰MAC åœ°å€åªæ˜¯ç¬¬ä¸€æ­¥,åœ¨ä¸€éƒ¨ç”µè„‘ç¬¬ä¸€æ¬¡æŽ¥å…¥å±€åŸŸç½‘çš„æ—¶å€™,æ˜¯æ€Žä¹ˆçŸ¥é“å®ƒçš„MAC åœ°å€çš„å‘¢.åœ¨å±€åŸŸç½‘å†…é€šä¿¡éƒ½æ˜¯é€šè¿‡MAC åœ°å€æ¥å‘åŒ…æ”¶åŒ…çš„,åªè¦çŸ¥é“äº†å¯¹æ–¹çš„MAC åœ°å€æ‰å¯ä»¥äº’ç›¸é€šä¿¡.è¿™å°±è¦é ARP(addres resolution protocol) åè®®æ¥èŽ·å–MAC åœ°å€äº†,é‚£ä¹ˆ arp åè®®æ˜¯å¦‚ä½•è§£æžå‡ºå¯¹æ–¹çš„MAC åœ°å€å‘¢? è¿™é‡Œç­‰åˆ°äº†ç½‘ç»œå±‚å†æ¥è§£é‡Š. æ³¨æ„:ä»¥å¤ªç½‘æ•°æ®åŒ…å¿…é¡»çŸ¥é“æŽ¥æ”¶æ–¹çš„MAC åœ°å€,æ‰èƒ½å‘åŒ…. é‚£ä¹ˆåœ¨åŒä¸€ä¸ªå±€åŸŸç½‘å†…,çŸ¥é“äº†å¯¹æ–¹çš„MAC åœ°å€,ç³»ç»Ÿæ€Žæ ·æ‰èƒ½æŠŠæ•°æ®åŒ…å‡†ç¡®é€åˆ°æŽ¥æ”¶æ–¹å‘¢? ä»¥å¤ªç½‘é‡‡ç”¨äº†ä¸€ç§å¾ˆâ€™åŽŸå§‹â€™çš„æ–¹å¼,å®ƒå¹¶ä¸æ˜¯ç›´æŽ¥æŠŠæ•°æ®åŒ…å‘åˆ°æŽ¥æ”¶æ–¹,è€Œæ˜¯å‘å±€åŸŸç½‘å†…æ‰€æœ‰çš„è®¡ç®—æœºå‘é€,è®©æ¯å°è®¡ç®—æœºè‡ªå·±æ‹†åŒ…åŽåˆ¤æ–­è‡ªå·±æ˜¯å¦ä¸ºæŽ¥æ”¶æ–¹(å‰æçŸ¥é“å¯¹æ–¹MAC åœ°å€) ä¸Šå›¾ä¸­,1å·è®¡ç®—æœºå‘2å·è®¡ç®—æœºå‘é€ä¸€ä¸ªæ•°æ®åŒ…,å±€åŸŸç½‘å†…å…¶ä»–çš„è®¡ç®—æœºéƒ½ä¼šæ”¶åˆ°è¿™ä¸ªåŒ….ä»–ä»¬è¯»å–æ•°æ®åŒ…çš„æŠ¥å¤´,æ‰¾åˆ°æŽ¥æ”¶æ–¹å¾—MAC åœ°å€,ç„¶åŽä¸Žè‡ªèº«çš„MAC åœ°å€ç›¸æ¯”è¾ƒ,å¦‚æžœä¸¤è€…ç›¸åŒ,å°±æŽ¥æ”¶è¿™ä¸ªåŒ…,åšè¿›ä¸€æ­¥çš„å¤„ç†,ä¸ç›¸åŒçš„è¯å°±ä¸¢å¼ƒè¿™ä¸ªæ•°æ®åŒ….è¿™ç§å‘é€æ–¹å¼å«â€™å¹¿æ’­â€™. æœ‰äº†æ•°æ®åŒ…çš„å®šä¹‰,ç½‘å¡çš„MAC åœ°å€,å¹¿æ’­çš„å‘é€æ–¹å¼,æ•°æ®é“¾è·¯å±‚å°±å¯ä»¥åœ¨åŒä¸€å±€åŸŸç½‘å†…çš„è®¡ç®—æœºä¹‹é—´ä¼ é€æ•°æ®äº†. ä¸‰ ç½‘ç»œå±‚1 ç½‘ç»œå±‚çš„ç”±æ¥ä»¥å¤ªç½‘åè®®,ä¾é MAC åœ°å€å‘é€æ•°æ®,ä½†è¿™ä»…ä»…åªèƒ½åœ¨åŒä¸€ä¸ªå±€åŸŸç½‘å†…å‘é€æ•°æ®.ç†è®ºä¸Š,ä¾é MAC åœ°å€,æ˜¯å¯ä»¥å’Œå…¨çƒä»»ä½•ä¸€ä¸ªMAC åœ°å€å‘é€æ•°æ®çš„,å› ä¸ºMAC åœ°å€æ˜¯æƒŸä¸€çš„.ä½†æ˜¯è¿™æ ·åšæœ‰ä¸€ä¸ªè‡´å‘½çš„ç¼ºé™·. ä»¥å¤ªç½‘ä¾é å¹¿æ’­æ–¹å¼å‘é€æ•°æ®åŒ…,è€Œå¹¿æ’­å°±æ„å‘³ç€æ¯ä¸ªäººéƒ½è¦å‘é€ä¸€ä»½,é‚£ä¹ˆå…¨çƒè¿™ä¹ˆå¤šçš„è®¡ç®—æœº,åœ¨æ‰¾åˆ°å¯¹æ–¹çš„MAC åœ°å€ä¹‹å‰éƒ½è¦å‘ä¸€ä»½æ— ç–‘ä¼šé€ æˆå·¨å¤§çš„æµªè´¹,è€Œä¸”æ•ˆçŽ‡æžä½Ž,è€Œä¸”å±€é™åœ¨å‘é€è€…çš„å±€åŸŸç½‘.ä¹Ÿå°±æ˜¯è¯´,å¦‚æžœä¸¤å°è®¡ç®—æœºä¸åœ¨åŒä¸€ä¸ªå±€åŸŸç½‘,å¹¿æ’­æ˜¯ä¼ ä¸è¿‡åŽ»çš„.è¿™ç§è®¾è®¡æ˜¯åˆç†çš„,å¦åˆ™çš„è¯äº’è”ç½‘ä¸Šæ¯ä¸€å°è®¡ç®—æœºéƒ½ä¼šæ”¶åˆ°æ‰€æœ‰åŒ…,é‚£ä¼šå¼•èµ·ç¾éš¾. äº’è”ç½‘å¯ä»¥æƒ³è±¡æˆç”±æ— æ•°ä¸ªå±€åŸŸç½‘ç»„æˆçš„ä¸€ä¸ªå·¨åž‹ç½‘ç»œ,å¦‚æžœæƒ³è¦è·¨å±€åŸŸç½‘é€šä¿¡å¿…é¡»æ‰¾åˆ°å¦ä¸€ç§æ–¹å¼,èƒ½å¤ŸåŒºåˆ†å“ªäº›MAC åœ°å€å±žäºŽåŒä¸€ä¸ªå±€åŸŸç½‘,å“ªäº›ä¸å±žäºŽåŒä¸€ä¸ªå±€åŸŸç½‘.å¦‚æžœæ˜¯åŒä¸€ä¸ªå±€åŸŸç½‘çš„è¯,å°±é‡‡ç”¨å¹¿æ’­å‘é€(å¦‚ä½•çŸ¥é“å¯¹æ–¹çš„MAC åœ°å€),å¦åˆ™å°±é‡‡ç”¨â€™è·¯ç”±â€™çš„æ–¹å¼å‘é€.(â€˜è·¯ç”±â€™çš„æ„æ€,å°±æ˜¯æŒ‡å¦‚ä½•å‘ä¸åŒå±€åŸŸç½‘å‘é€æ•°æ®åŒ…) è¿™å°±å¯¼è‡´äº†â€™ç½‘ç»œå±‚â€™çš„è¯žç”Ÿ.å®ƒçš„ä½œç”¨æ˜¯å¼•è¿›ä¸€å¥—æ–°çš„åœ°å€,ä½¿å¾—æˆ‘ä»¬èƒ½å¤ŸåŒºåˆ†ä¸åŒçš„è®¡ç®—æœºæ˜¯å¦å±žäºŽåŒä¸€ä¸ªå±€åŸŸç½‘.è¿™å¥—åœ°å€å«åšâ€™ç½‘ç»œåœ°å€â€™,ç®€ç§°â€™ç½‘å€â€™. äºŽæ˜¯,ç½‘ç»œå±‚å‡ºçŽ°ä»¥åŽ,æ¯å°è®¡ç®—æœºæœ‰äº†ä¸¤ç§åœ°å€,ä¸€ç§æ˜¯MAC åœ°å€,å¦ä¸€ç§æ˜¯ç½‘ç»œåœ°å€.ä¸¤ç§åœ°å€ä¹‹é—´æ²¡æœ‰ä»»ä½•è”ç³»,MAC åœ°å€æ˜¯ç»‘å®šåˆ°ç½‘å¡ä¸Šçš„,ç½‘ç»œåœ°å€åˆ™æ˜¯ç”±MAC æœåŠ¡å™¨åˆ†é…çš„,å½“ä¸€å°è®¡ç®—æœºç¬¬ä¸€æ¬¡è”ç½‘æ—¶,ä¼šå‘MAC æœåŠ¡å™¨å‘é€ä¸€ä¸ªåŒ…,ç„¶åŽMAC æœåŠ¡å™¨ä¼šåˆ†é…å¥½ç½‘ç»œåœ°å€. ç½‘ç»œåœ°å€å¸®åŠ©æˆ‘ä»¬ç¡®å®šè®¡ç®—æœºæ‰€åœ¨çš„å±€åŸŸç½‘,MAC åœ°å€åˆ™å°†æ•°æ®åŒ…å‘é€åˆ°è¯¥å±€åŸŸç½‘ä¸­çš„ç›®æ ‡MAC åœ°å€.å› æ­¤ä»Žé€»è¾‘ä¸Šåˆ¤æ–­,å¿…å®šæ˜¯å…ˆå¤„ç†ç½‘ç»œåœ°å€,ç„¶åŽå¤„ç†MAC åœ°å€. å¯ä»¥è¿™æ ·ç†è§£,äº’è”ç½‘ä¸­çš„é€šä¿¡éƒ½æ˜¯MAC åœ°å€äº’ç›¸å‘é€æ•°æ®åŒ…,è€Œç½‘ç»œåœ°å€æ˜¯ä¸ºäº†å¸®æˆ‘ä»¬ç¡®è®¤éœ€è¦å¾€å“ªä¸ªå±€åŸŸç½‘é‡Œé¢çš„ç›®æ ‡MAC åœ°å€å‘é€æ•°æ®åŒ…,ä¸¤è€…ç¼ºä¸€ä¸å¯. 2 IP åè®®è§„å®šç½‘ç»œåœ°å€çš„åè®®,å«åš IP åè®®.å®ƒå®šä¹‰çš„åœ°å€,ç§°ä¸º IP åœ°å€. ç›®å‰,å¹¿æ³›é‡‡ç”¨çš„æ˜¯ IP åè®®ç¬¬å››ç‰ˆ,ç®€ç§° IPV4.è¿™ä¸ªç‰ˆæœ¬è§„å®š,ç½‘ç»œåœ°å€ç”±32ä¸ªäºŒè¿›åˆ¶ä½ç»„æˆ. å¯ä»¥çœ‹å‡ºæˆ‘çš„ IP åœ°å€ä¸º192.168.11.95,ä¹ æƒ¯ä¸Š,ç”¨å››æ®µçš„åè¿›åˆ¶æ•°è¡¨ç¤º IP åœ°å€,ä»Ž0.0.0.0åˆ°255.255.255.255. IP åœ°å€ä¸€èˆ¬åˆ†ä¸º5ç±»:A,B,C,D,E ç±», D å’ŒE ç±»ä¸ºå…¶ä»–ç”¨é€”çš„. å¯ä»¥çœ‹ç²—æ¥ IP åœ°å€æ˜¯æœ‰é™çš„,è€Œä¸”çŽ°åœ¨çš„ IPV4 åœ°å€å·²ç»åˆ†å®Œäº†,ä»¥åŽä½¿ç”¨çš„å°±æ˜¯ IPV6äº†,æ®è¯´ä¸–ç•Œä¸Šçš„æ¯ä¸€ç²’æ²™å­éƒ½æœ‰ä¸€ä¸ªæƒŸä¸€çš„ IP åœ°å€. äº’è”ç½‘ä¸Šçš„æ¯ä¸€å°è®¡ç®—æœº,éƒ½ä¼šåˆ†é…åˆ°ä¸€ä¸ª IP åœ°å€.è¿™ä¸ªåœ°å€åˆ†ä¸ºä¸¤éƒ¨åˆ†,å‰ä¸€éƒ¨åˆ†ä»£è¡¨ç½‘ç»œ,åŽä¸€éƒ¨åˆ†ä»£è¡¨ä¸»æœº.æ¯”å¦‚, æˆ‘çš„ IP åœ°å€192.168.11.95,è¿™æ˜¯ä¸€ä¸ª32ä½çš„åœ°å€,æˆ‘çš„ç½‘ç»œéƒ¨åˆ†æ˜¯å‰é¢24ä½192.168.11,é‚£ä¹ˆä¸»æœºå·å°±æ˜¯åŽ8ä½.å¤„äºŽåŒä¸€ä¸ªå±€åŸŸç½‘çš„ç”µè„‘,å®ƒä»¬ IP åœ°å€çš„ç½‘ç»œéƒ¨åˆ†å¿…å®šæ˜¯ç›¸é€šçš„,ä¹Ÿå°±æ˜¯è¯´192.168.11.95ä¸Ž192.168.11.49å¤„äºŽåŒä¸€ä¸ªå±€åŸŸç½‘. ä½†æ˜¯æˆ‘ä»¬å•çº¯ä»Ž IP åœ°å€æ˜¯æ— æ³•åˆ¤æ–­ç½‘ç»œéƒ¨åˆ†çš„,æˆ‘ä¸ºä»€ä¹ˆçŸ¥é“æˆ‘çš„ IP åœ°å€çš„ç½‘ç»œå·?å…¶å®žæ²¡æœ‰å¦å¤–ä¸€ä¸ªåœ°å€çš„è¯æˆ‘ä¹Ÿä¸çŸ¥é“çš„. é‚£ä¹ˆæ€Žæ ·ä»Ž IP åœ°å€æ¥åˆ¤æ–­è®¡ç®—æœºæ˜¯å¦å¤„äºŽåŒä¸€ä¸ªå±€åŸŸç½‘å‘¢?è¿™å°±æ˜¯å¦å¤–ä¸€ä¸ªåœ°å€çš„ä½œç”¨äº†,ä¹Ÿå°±æ˜¯å­ç½‘æŽ©ç . æ‰€è°“å­ç½‘æŽ©ç ,å°±æ˜¯è¡¨ç¤ºå­ç½‘ç»œç‰¹å¾çš„ä¸€ä¸ªå‚æ•°.å®ƒåœ¨å½¢å¼ä¸Šç­‰åŒäºŽ IP åœ°å€,ä¹Ÿæ˜¯ä¸€ä¸ª32ä½äºŒè¿›åˆ¶æ•°å­—,å®ƒçš„ç½‘ç»œéƒ¨åˆ†å…¨ä¸º1,ä¸»æœºéƒ¨åˆ†å…¨éƒ¨ä¸º0.æ¯”å¦‚æˆ‘çš„ IP192.168.11.95,å› ä¸ºæˆ‘çš„ç½‘ç»œéƒ¨åˆ†ä¸ºå‰24ä½,é‚£ä¹ˆæˆ‘çš„å­ç½‘æŽ©ç å°±æ˜¯255.255.255.0. çŸ¥é“äº†å­ç½‘æŽ©ç ,å°±å¯ä»¥åˆ¤æ–­,ä»»æ„ä¸¤ä¸ª IP åœ°å€æ˜¯å¦å¤„äºŽåŒä¸€ä¸ªå±€åŸŸç½‘.æ–¹æ³•æ˜¯å°†ä¸¤ä¸ª IP åœ°å€ä¸Žå­ç½‘æŽ©ç åˆ†åˆ«è¿›è¡Œ AND è¿ç®—(ä¸¤ä¸ªæ•°ä½éƒ½ä¸º1,åˆ™ä¸º1,å¦åˆ™ä¸º0),ç„¶åŽæ¯”è¾ƒç»“æžœæ˜¯æˆ–å¦ç›¸åŒ,å¦‚æžœç›¸åŒ,å°±è¡¨æ˜Žå¤„åœ¨åŒä¸€ä¸ªå±€åŸŸç½‘,å¦åˆ™å°±ä¸æ˜¯,å°±éœ€è¦é€šè¿‡è·¯ç”±åè®®å‘é€æ•°æ®åŒ…. IP åè®®çš„ä½œç”¨ä¸»è¦æœ‰ä¸¤ä¸ª:ä¸€ä¸ªæ˜¯ä¸ºæ¯ä¸€å°è®¡ç®—æœºåˆ†é… IP åœ°å€,å¦ä¸€ä¸ªæ˜¯å’Œå­ç½‘æŽ©ç ç»“åˆç¡®å®šå…ƒ IP ä¸Žç›®æ ‡ IP æ˜¯å¦å¤„äºŽåŒä¸€ä¸ªå±€åŸŸç½‘. 3 IP æ•°æ®åŒ…æ ¹æ® IP åè®®å‘é€çš„æ•°æ®,å«åš IP æ•°æ®åŒ…,ä¸éš¾æƒ³è±¡,å…¶ä¸­å¿…å®šåŒ…æ‹¬ IP åœ°å€ä¿¡æ¯. ä½†æ˜¯å‰é¢è¯´è¿‡.ä»¥å¤ªç½‘æ•°æ®åŒ…åªåŒ…å«MAC åœ°å€,å¹¶æ²¡æœ‰ IP åœ°å€çš„ä½ç½®.é‚£ä¹ˆæ˜¯å¦éœ€è¦ä¿®æ”¹æ•°æ®å®šä¹‰åœ¨æ·»åŠ ä¸€ä¸ªä½ç½®å‘¢? æˆ‘ä»¬å¯ä»¥ç›´æŽ¥æŠŠ IP æ•°æ®åŒ…æ”¾è¿›ä»¥å¤ªç½‘æ•°æ®åŒ…çš„æ•°æ®éƒ¨åˆ†,å› æ­¤å®Œå…¨ä¸ç”¨ä¿®æ”¹ä»¥å¤ªç½‘çš„è§„æ ¼.è¿™å°±æ˜¯äº’è”ç½‘åˆ†å±‚ç»“æž„çš„å¥½å¤„:ä¸Šå±‚çš„å˜åŠ¨å®Œå…¨ä¸æ¶‰åŠä¸‹å±‚çš„ç»“æž„. å…·ä½“æ¥è¯´, IP æ•°æ®åŒ…ä¹Ÿåˆ†ä¸ºæŠ¥å¤´å’Œæ•°æ®ä¸¤ä¸ªéƒ¨åˆ† æŠ¥å¤´éƒ¨åˆ†ä¸»è¦åŒ…æ‹¬ç‰ˆæœ¬,é•¿åº¦, IP åœ°å€ç­‰ä¿¡æ¯,æ•°æ®éƒ¨åˆ†åˆ™æ˜¯ IP æ•°æ®åŒ…çš„å…·ä½“å†…å®¹.å®ƒæ”¾è¿›ä»¥å¤ªç½‘æ•°æ®åŒ…åŽ,ä»¥å¤ªç½‘æ•°æ®åŒ…å°±æ‹¥æœ‰äº†ä¸¤ä¸ªæŠ¥å¤´. IP æ•°æ®åŒ…çš„æŠ¥å¤´éƒ¨åˆ†çš„é•¿åº¦ä¸º20åˆ°60ä¸ªå­—èŠ‚,æ•´ä¸ªæ•°æ®åŒ…çš„æ€»é•¿åº¦æœ€å¤§ä¸º65535å­—èŠ‚.å› æ­¤,ç†è®ºä¸Š,ä¸€ä¸ª IP æ•°æ®åŒ…çš„æ•°æ®éƒ¨åˆ†,æœ€é•¿ä¸º65515å­—èŠ‚,å‰é¢è¯´è¿‡,ä»¥å¤ªç½‘æ•°æ®åŒ…çš„æ•°æ®éƒ¨åˆ†,æœ€é•¿ä¸º1500å­—èŠ‚.å› æ­¤,å¦‚æžœ IP æ•°æ®åŒ…è¶…è¿‡äº†1500å­—èŠ‚,å®ƒå°±éœ€è¦åˆ†å‰²æˆå‡ ä¸ªä»¥å¤ªç½‘æ•°æ®åŒ…,åˆ†å¼€å‘é€. 4 ARP åè®®ä»Žæ•°æ®é“¾è·¯å±‚å’Œç½‘ç»œå±‚æˆ‘ä»¬çŸ¥é“,æƒ³è¦å‘é€ä¸€ä¸ªæ•°æ®åŒ…,å¿…é¡»çŸ¥é“ä¸¤ä¸ªåœ°å€,ä¸€ä¸ªæ˜¯å¯¹æ–¹çš„ MAC åœ°å€,å¦ä¸€ä¸ªæ˜¯å¯¹æ–¹çš„ IP åœ°å€.é€šå¸¸æƒ…å†µä¸‹,å¯¹æ–¹çš„ IP åœ°å€æ˜¯å·²çŸ¥çš„,ä½†æ˜¯ä¸çŸ¥é“å¯¹æ–¹çš„ MAC åœ°å€. æ‰€ä»¥éœ€è¦ä¸€ç§æœºåˆ¶èƒ½å¤Ÿä»Ž IP åœ°å€å¾—åˆ° MAC åœ°å€. è¿™é‡Œå¯ä»¥åˆ†ä¸ºä¸¤ç§æƒ…å†µ:ç¬¬ä¸€ç§æƒ…å†µ,å¦‚æžœä¸¤å°ä¸»æœºä¸åœ¨åŒä¸€ä¸ªå±€åŸŸç½‘,é‚£ä¹ˆäº‹å®žä¸Šæ²¡åŠžæ³•å¾—åˆ°å¯¹æ–¹çš„ MAC åœ°å€,åªèƒ½æŠŠæ•°æ®åŒ…ä¼ é€åˆ°ä¸¤ä¸ªå±€åŸŸç½‘è¿žæŽ¥å¤„çš„ç½‘å…³â€™ gatewayâ€™,è®©ç½‘å…³åŽ»å¤„ç†. ç¬¬äºŒç§æƒ…å†µ,å¦‚æžœä¸¤å°ä¸»æœºåœ¨åŒä¸€ä¸ªå±€åŸŸç½‘,é‚£ä¹ˆå¯ä»¥ä½¿ç”¨ ARP åè®®,å¾—åˆ°å¯¹æ–¹çš„ MAC åœ°å€. ARP åè®®ä¹Ÿæ˜¯å‘é€ä¸€ä¸ªæ•°æ®åŒ…(åŒ…å«åœ¨ä»¥å¤ªç½‘æ•°æ®åŒ…ä¸­),å…¶ä¸­åŒ…å«å®ƒç´¢è¦æŸ¥è¯¢ä¸»æœºçš„IP åœ°å€,åœ¨å¯¹æ–¹ MAC åœ°å€è¿™ä¸ªä½ç½®,å¡«çš„æ˜¯ FF:FF:FF:FF:FF:FF,è¡¨ç¤ºè¿™æ˜¯ä¸€ä¸ªå¹¿æ’­åœ°å€.å®ƒæ‰€åœ¨å±€åŸŸç½‘çš„æ¯ä¸€å°è®¡ç®—æœºéƒ½ä¼šæ”¶åˆ°è¿™ä¸ªæ•°æ®åŒ…,ä»Žä¸­å–å‡ºIPåœ°å€ï¼Œä¸Žè‡ªèº«çš„IPåœ°å€è¿›è¡Œæ¯”è¾ƒã€‚å¦‚æžœä¸¤è€…ç›¸åŒï¼Œéƒ½åšå‡ºå›žå¤ï¼Œå‘å¯¹æ–¹æŠ¥å‘Šè‡ªå·±çš„MACåœ°å€ï¼Œå¦åˆ™å°±ä¸¢å¼ƒè¿™ä¸ªåŒ…ã€‚ æ€»ä¹‹ï¼Œæœ‰äº†ARPåè®®ä¹‹åŽï¼Œæˆ‘ä»¬å°±å¯ä»¥å¾—åˆ°åŒä¸€ä¸ªå­ç½‘ç»œå†…çš„ä¸»æœºMACåœ°å€ï¼Œå¯ä»¥æŠŠæ•°æ®åŒ…å‘é€åˆ°ä»»æ„ä¸€å°ä¸»æœºä¹‹ä¸Šäº†ã€‚ å›› ä¼ è¾“å±‚1 ä¼ è¾“å±‚çš„ç”±æ¥æœ‰äº†MACåœ°å€å’ŒIPåœ°å€ï¼Œæˆ‘ä»¬å·²ç»å¯ä»¥åœ¨äº’è”ç½‘ä¸Šä»»æ„ä¸¤å°ä¸»æœºä¸Šå»ºç«‹é€šä¿¡ã€‚ æŽ¥ä¸‹æ¥çš„é—®é¢˜æ˜¯ï¼ŒåŒä¸€å°ä¸»æœºä¸Šæœ‰è®¸å¤šç¨‹åºéƒ½éœ€è¦ç”¨åˆ°ç½‘ç»œï¼Œæ¯”å¦‚ï¼Œä½ ä¸€è¾¹æµè§ˆç½‘é¡µï¼Œä¸€è¾¹ä¸Žæœ‹å‹åœ¨çº¿èŠå¤©ã€‚å½“ä¸€ä¸ªæ•°æ®åŒ…ä»Žäº’è”ç½‘ä¸Šå‘æ¥çš„æ—¶å€™ï¼Œä½ æ€Žä¹ˆçŸ¥é“ï¼Œå®ƒæ˜¯è¡¨ç¤ºç½‘é¡µçš„å†…å®¹ï¼Œè¿˜æ˜¯è¡¨ç¤ºåœ¨çº¿èŠå¤©çš„å†…å®¹ï¼Ÿ ä¹Ÿå°±æ˜¯è¯´ï¼Œæˆ‘ä»¬è¿˜éœ€è¦ä¸€ä¸ªå‚æ•°ï¼Œè¡¨ç¤ºè¿™ä¸ªæ•°æ®åŒ…åˆ°åº•ä¾›å“ªä¸ªç¨‹åºï¼ˆè¿›ç¨‹ï¼‰ä½¿ç”¨ã€‚è¿™ä¸ªå‚æ•°å°±å«åšâ€ç«¯å£â€ï¼ˆportï¼‰ï¼Œå®ƒå…¶å®žæ˜¯æ¯ä¸€ä¸ªä½¿ç”¨ç½‘å¡çš„ç¨‹åºçš„ç¼–å·ã€‚æ¯ä¸ªæ•°æ®åŒ…éƒ½å‘åˆ°ä¸»æœºçš„ç‰¹å®šç«¯å£ï¼Œæ‰€ä»¥ä¸åŒçš„ç¨‹åºå°±èƒ½å–åˆ°è‡ªå·±æ‰€éœ€è¦çš„æ•°æ®ã€‚ â€œç«¯å£â€æ˜¯0åˆ°65535ä¹‹é—´çš„ä¸€ä¸ªæ•´æ•°ï¼Œæ­£å¥½16ä¸ªäºŒè¿›åˆ¶ä½ã€‚0åˆ°1023çš„ç«¯å£è¢«ç³»ç»Ÿå ç”¨ï¼Œç”¨æˆ·åªèƒ½é€‰ç”¨å¤§äºŽ1023çš„ç«¯å£ã€‚ä¸ç®¡æ˜¯æµè§ˆç½‘é¡µè¿˜æ˜¯åœ¨çº¿èŠå¤©ï¼Œåº”ç”¨ç¨‹åºä¼šéšæœºé€‰ç”¨ä¸€ä¸ªç«¯å£ï¼Œç„¶åŽä¸ŽæœåŠ¡å™¨çš„ç›¸åº”ç«¯å£è”ç³»ã€‚ â€œä¼ è¾“å±‚â€çš„åŠŸèƒ½ï¼Œå°±æ˜¯å»ºç«‹â€ç«¯å£åˆ°ç«¯å£â€çš„é€šä¿¡ã€‚ç›¸æ¯”ä¹‹ä¸‹ï¼Œâ€ç½‘ç»œå±‚â€çš„åŠŸèƒ½æ˜¯å»ºç«‹â€ä¸»æœºåˆ°ä¸»æœºâ€çš„é€šä¿¡ã€‚åªè¦ç¡®å®šä¸»æœºå’Œç«¯å£ï¼Œæˆ‘ä»¬å°±èƒ½å®žçŽ°ç¨‹åºä¹‹é—´çš„äº¤æµã€‚å› æ­¤ï¼ŒUnixç³»ç»Ÿå°±æŠŠä¸»æœº+ç«¯å£ï¼Œå«åšâ€å¥—æŽ¥å­—â€ï¼ˆsocketï¼‰ã€‚æœ‰äº†å®ƒï¼Œå°±å¯ä»¥è¿›è¡Œç½‘ç»œåº”ç”¨ç¨‹åºå¼€å‘äº†ã€‚ 2 UDP åè®®çŽ°åœ¨ï¼Œæˆ‘ä»¬å¿…é¡»åœ¨æ•°æ®åŒ…ä¸­åŠ å…¥ç«¯å£ä¿¡æ¯ï¼Œè¿™å°±éœ€è¦æ–°çš„åè®®ã€‚æœ€ç®€å•çš„å®žçŽ°å«åšUDPåè®®ï¼Œå®ƒçš„æ ¼å¼å‡ ä¹Žå°±æ˜¯åœ¨æ•°æ®å‰é¢ï¼ŒåŠ ä¸Šç«¯å£å·ã€‚ UDPæ•°æ®åŒ…ï¼Œä¹Ÿæ˜¯ç”±â€æŠ¥å¤´â€å’Œâ€æ•°æ®â€ä¸¤éƒ¨åˆ†ç»„æˆã€‚ â€œæŠ¥å¤´â€éƒ¨åˆ†ä¸»è¦å®šä¹‰äº†å‘å‡ºç«¯å£å’ŒæŽ¥æ”¶ç«¯å£ï¼Œâ€æ•°æ®â€éƒ¨åˆ†å°±æ˜¯å…·ä½“çš„å†…å®¹ã€‚ç„¶åŽï¼ŒæŠŠæ•´ä¸ªUDPæ•°æ®åŒ…æ”¾å…¥IPæ•°æ®åŒ…çš„â€æ•°æ®â€éƒ¨åˆ†ï¼Œè€Œå‰é¢è¯´è¿‡ï¼ŒIPæ•°æ®åŒ…åˆæ˜¯æ”¾åœ¨ä»¥å¤ªç½‘æ•°æ®åŒ…ä¹‹ä¸­çš„ï¼Œæ‰€ä»¥æ•´ä¸ªä»¥å¤ªç½‘æ•°æ®åŒ…çŽ°åœ¨å˜æˆäº†ä¸‹é¢è¿™æ ·ï¼š 3 TCP åè®®UDPåè®®çš„ä¼˜ç‚¹æ˜¯æ¯”è¾ƒç®€å•ï¼Œå®¹æ˜“å®žçŽ°ï¼Œä½†æ˜¯ç¼ºç‚¹æ˜¯å¯é æ€§è¾ƒå·®ï¼Œä¸€æ—¦æ•°æ®åŒ…å‘å‡ºï¼Œæ— æ³•çŸ¥é“å¯¹æ–¹æ˜¯å¦æ”¶åˆ°ã€‚ ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œæé«˜ç½‘ç»œå¯é æ€§ï¼ŒTCPåè®®å°±è¯žç”Ÿäº†ã€‚è¿™ä¸ªåè®®éžå¸¸å¤æ‚ï¼Œä½†å¯ä»¥è¿‘ä¼¼è®¤ä¸ºï¼Œå®ƒå°±æ˜¯æœ‰ç¡®è®¤æœºåˆ¶çš„UDPåè®®ï¼Œæ¯å‘å‡ºä¸€ä¸ªæ•°æ®åŒ…éƒ½è¦æ±‚ç¡®è®¤ã€‚å¦‚æžœæœ‰ä¸€ä¸ªæ•°æ®åŒ…é—å¤±ï¼Œå°±æ”¶ä¸åˆ°ç¡®è®¤ï¼Œå‘å‡ºæ–¹å°±çŸ¥é“æœ‰å¿…è¦é‡å‘è¿™ä¸ªæ•°æ®åŒ…äº†ã€‚ å› æ­¤ï¼ŒTCPåè®®èƒ½å¤Ÿç¡®ä¿æ•°æ®ä¸ä¼šé—å¤±ã€‚å®ƒçš„ç¼ºç‚¹æ˜¯è¿‡ç¨‹å¤æ‚ã€å®žçŽ°å›°éš¾ã€æ¶ˆè€—è¾ƒå¤šçš„èµ„æºã€‚ TCPæ•°æ®åŒ…å’ŒUDPæ•°æ®åŒ…ä¸€æ ·ï¼Œéƒ½æ˜¯å†…åµŒåœ¨IPæ•°æ®åŒ…çš„â€æ•°æ®â€éƒ¨åˆ†ã€‚TCPæ•°æ®åŒ…æ²¡æœ‰é•¿åº¦é™åˆ¶ï¼Œç†è®ºä¸Šå¯ä»¥æ— é™é•¿ï¼Œä½†æ˜¯ä¸ºäº†ä¿è¯ç½‘ç»œçš„æ•ˆçŽ‡ï¼Œé€šå¸¸TCPæ•°æ®åŒ…çš„é•¿åº¦ä¸ä¼šè¶…è¿‡IPæ•°æ®åŒ…çš„é•¿åº¦ï¼Œä»¥ç¡®ä¿å•ä¸ªTCPæ•°æ®åŒ…ä¸å¿…å†åˆ†å‰²ã€‚ äº” åº”ç”¨å±‚åº”ç”¨ç¨‹åºæ”¶åˆ°â€ä¼ è¾“å±‚â€çš„æ•°æ®ï¼ŒæŽ¥ä¸‹æ¥å°±è¦è¿›è¡Œè§£è¯»ã€‚ç”±äºŽäº’è”ç½‘æ˜¯å¼€æ”¾æž¶æž„ï¼Œæ•°æ®æ¥æºäº”èŠ±å…«é—¨ï¼Œå¿…é¡»äº‹å…ˆè§„å®šå¥½æ ¼å¼ï¼Œå¦åˆ™æ ¹æœ¬æ— æ³•è§£è¯»ã€‚ â€œåº”ç”¨å±‚â€çš„ä½œç”¨ï¼Œå°±æ˜¯è§„å®šåº”ç”¨ç¨‹åºçš„æ•°æ®æ ¼å¼ã€‚ ä¸¾ä¾‹æ¥è¯´ï¼ŒTCPåè®®å¯ä»¥ä¸ºå„ç§å„æ ·çš„ç¨‹åºä¼ é€’æ•°æ®ï¼Œæ¯”å¦‚Emailã€WWWã€FTPç­‰ç­‰ã€‚é‚£ä¹ˆï¼Œå¿…é¡»æœ‰ä¸åŒåè®®è§„å®šç”µå­é‚®ä»¶ã€ç½‘é¡µã€FTPæ•°æ®çš„æ ¼å¼ï¼Œè¿™äº›åº”ç”¨ç¨‹åºåè®®å°±æž„æˆäº†â€åº”ç”¨å±‚â€ã€‚ è¿™æ˜¯æœ€é«˜çš„ä¸€å±‚ï¼Œç›´æŽ¥é¢å¯¹ç”¨æˆ·ã€‚å®ƒçš„æ•°æ®å°±æ”¾åœ¨TCPæ•°æ®åŒ…çš„â€æ•°æ®â€éƒ¨åˆ†ã€‚å› æ­¤ï¼ŒçŽ°åœ¨çš„ä»¥å¤ªç½‘çš„æ•°æ®åŒ…å°±å˜æˆä¸‹é¢è¿™æ ·ã€‚ è‡³æ­¤ï¼Œæ•´ä¸ªäº’è”ç½‘çš„äº”å±‚ç»“æž„ï¼Œè‡ªä¸‹è€Œä¸Šå…¨éƒ¨è®²å®Œäº†ã€‚è¿™æ˜¯ä»Žç³»ç»Ÿçš„è§’åº¦ï¼Œè§£é‡Šäº’è”ç½‘æ˜¯å¦‚ä½•æž„æˆçš„.]]></content>
      <categories>
        <category>ç½‘ç»œç¼–ç¨‹</category>
      </categories>
  </entry>
  <entry>
    <title><![CDATA[å¼‚å¸¸å¤„ç†]]></title>
    <url>%2F2018%2F11%2F01%2F%E5%BC%82%E5%B8%B8%E5%A4%84%E7%90%86%2F</url>
    <content type="text"><![CDATA[å¼‚å¸¸ä¹‹é—® ä»€ä¹ˆæ˜¯å¼‚å¸¸? å¼‚å¸¸å°±æ˜¯ç¨‹åºè¿è¡Œæ—¶å‘ç”Ÿé”™è¯¯çš„ä¿¡å·(åœ¨ç¨‹åºå‡ºçŽ°é”™è¯¯æ—¶,åˆ™ä¼šäº§ç”Ÿä¸€ä¸ªå¼‚å¸¸,è‹¥ç¨‹åºæ²¡æœ‰å¤„ç†å®ƒ,åˆ™ä¼šæŠ›å‡ºè¯¥å¼‚å¸¸,ç¨‹åºçš„è¿è¡Œä¹Ÿéšä¹‹ç»ˆæ­¢)åœ¨Python ä¸­,é”™è¯¯è§¦å‘çš„å¼‚å¸¸å¦‚ä¸‹: Traceback ä¸ºå¼‚å¸¸çš„è¿½è¸ªä¿¡æ¯ NameError ä¸ºå¼‚å¸¸çš„ç±»åž‹ name â€˜aâ€™ is not defined ä¸ºå¼‚å¸¸å€¼ åœ¨ Python ä¸­çš„é”™è¯¯åˆ†ä¸ºä¸¤ç§: è¯­æ³•é”™è¯¯:è¿™ç§é”™è¯¯,é€šè¿‡ä¸äº† python çš„è¯­æ³•æ£€æµ‹,è¿™ç§é”™è¯¯ä¹Ÿæ•æ‰ä¸äº†,å¿…é¡»åœ¨ç¨‹åºæ‰§è¡Œå‰æ”¹æ­£. é€»è¾‘å¼‚å¸¸:è¯­æ³•æ²¡é—®é¢˜,é€šè¿‡äº† Pythonçš„è¯­æ³•æ£€æµ‹,ä½†å› ä¸ºå¯¹ python æ•°æ®ç±»åž‹çš„é”™è¯¯ä½¿ç”¨å¯¼è‡´å‡ºé”™. å¼‚å¸¸çš„ç§ç±» åœ¨ Python ä¸­ä¸åŒçš„å¼‚å¸¸å¯ä»¥ç”¨ä¸åŒçš„ç±»åž‹( python ä¸­ç»Ÿä¸€äº†ç±»ä¸Žç±»åž‹,ç±»åž‹å³ç±»)åŽ»æ ‡è¯†,ä¸€ä¸ªå¼‚å¸¸æ ‡è¯†ä¸€ç§é”™è¯¯. å¸¸ç”¨å¼‚å¸¸: AttributeError è¯•å›¾è®¿é—®ä¸€ä¸ªå¯¹è±¡æ²¡æœ‰çš„å±žæ€§ IOError è¾“å…¥/è¾“å‡ºå¼‚å¸¸;é€šå¸¸ä¸ºæ— æ³•æ‰“å¼€æ–‡ä»¶ ImportError æ— æ³•å¼•å…¥æ¨¡å—æˆ–åŒ…;åŸºæœ¬ä¸Šæ˜¯è·¯å¾„é—®é¢˜æˆ–åç§°é”™è¯¯ IndentationError è¯­æ³•é”™è¯¯çš„å­ç±»;ä»£ç æ²¡æœ‰æ­£ç¡®å¯¹å…¶ IndexError ä¸‹æ ‡ç´¢å¼•è¶…å‡ºåºåˆ—è¾¹ç•Œ KeyError è¯•å›¾è®¿é—®å­—å…¸ä¸­ä¸å­˜åœ¨çš„é”® KeyboardInterrupt é”®ç›˜ç»ˆæ­¢,é€šå¸¸ä¸º Ctrl+C åŒæ—¶è¢«æŒ‰ä¸‹ NameError ä½¿ç”¨ä¸€ä¸ªè¿˜æœªè¢«èµ‹äºˆå¯¹è±¡çš„å˜é‡ SyntaxError python ä»£ç éžæ³•,ä»£ç ä¸èƒ½ç¼–è¯‘ TypeError ä¼ å…¥å¯¹è±¡ç±»åž‹ä¸Žè¦æ±‚çš„ä¸ç¬¦åˆ UnboundLocalError è¯•å›¾è®¿é—®ä¸€ä¸ªè¿˜æœªè¢«èµ‹å€¼çš„å±€éƒ¨å˜é‡,åŸºæœ¬æ˜¯ç”±äºŽå¦æœ‰ä¸€ä¸ªåŒåçš„å…¨å±€å˜é‡,å¯¼è‡´ä½ ä»¥ä¸ºæ­£åœ¨è®¿é—®å®ƒ ValueError ä¼ å…¥ä¸€ä¸ªè°ƒç”¨è€…ä¸æœŸæœ›çš„å€¼,å³ä½¿å€¼å¾—ç±»åž‹æ˜¯æ­£ç¡®çš„ æ›´å¤šå¼‚å¸¸: 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748ArithmeticErrorAssertionErrorAttributeErrorBaseExceptionBufferErrorBytesWarningDeprecationWarningEnvironmentErrorEOFErrorExceptionFloatingPointErrorFutureWarningGeneratorExitImportErrorImportWarningIndentationErrorIndexErrorIOErrorKeyboardInterruptKeyErrorLookupErrorMemoryErrorNameErrorNotImplementedErrorOSErrorOverflowErrorPendingDeprecationWarningReferenceErrorRuntimeErrorRuntimeWarningStandardErrorStopIterationSyntaxErrorSyntaxWarningSystemErrorSystemExitTabErrorTypeErrorUnboundLocalErrorUnicodeDecodeErrorUnicodeEncodeErrorUnicodeErrorUnicodeTranslateErrorUnicodeWarningUserWarningValueErrorWarningZeroDivisionError å¼‚å¸¸å¤„ç† ä¸ºäº†ä¿è¯ç¨‹åºçš„å¥å£®æ€§ä¸Žå®¹é”™æ€§,å³åœ¨é‡åˆ°é”™è¯¯æ—¶ç¨‹åºä¸ä¼šå´©æºƒ,æˆ‘ä»¬éœ€è¦å¯¹å¼‚å¸¸è¿›è¡Œå¤„ç†.å¦‚æžœé”™è¯¯å‘ç”Ÿçš„æ¡ä»¶æ˜¯å¯é¢„çŸ¥çš„,éœ€è¦ç”¨ if è¿›è¡Œå¤„ç†:åœ¨é”™è¯¯å‘ç”Ÿä¹‹å‰è¿›è¡Œé¢„é˜²;å¦‚æžœé”™è¯¯çš„å‘ç”Ÿæ¡ä»¶ä¸å¯é¢„çŸ¥,åˆ™éœ€è¦ç”¨ tryâ€¦except: åœ¨é”™è¯¯å‘ç”Ÿä¹‹åŽè¿›è¡Œå¤„ç†. 12345# åŸºæœ¬è¯­æ³•try: è¢«æ£€æµ‹çš„ä»£ç å—except å¼‚å¸¸ç±»åž‹: try ä¸­ä¸€æ—¦æ£€æµ‹åˆ°å¼‚å¸¸,å°±æ‰§è¡Œè¿™ä¸ªä½ç½®çš„é€»è¾‘ å‡ ä¸ªæ —å­: 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667686970717273747576777879808182838485# å¼‚å¸¸ç±»åªèƒ½ç”¨æ¥å¤„ç†æŒ‡å®šçš„å¼‚å¸¸æƒ…å†µ,å¦‚æžœéžæŒ‡å®šå¼‚å¸¸åˆ™æ— æ³•å¤„ç†s1 = 'hello'try: int(s1)except IndexError as e: # æ•èŽ·å¼‚å¸¸å¤±è´¥,æŠ¥é”™ print(e) # å¤šåˆ†æ”¯s1 = 'hello'try: int(s1)except IndexError as e: print(e)except KeyError as e: print(e)except ValueError as e: print(e)# ä¸‡èƒ½å¼‚å¸¸ Exceptions1 = 'hello'try: int(s1)except Exception as e: print(e) # å¤šåˆ†æ”¯å¼‚å¸¸ä¸Žä¸‡èƒ½å¼‚å¸¸# å¦‚æžœæƒ³è¦çš„æ•ˆæžœæ˜¯:æ— è®ºå‡ºçŽ°ä»€ä¹ˆå¼‚å¸¸,æˆ‘ä»¬ç»Ÿä¸€ä¸¢å¼ƒ,æˆ–è€…ä½¿ç”¨åŒä¸€æ®µä»£ç é€»è¾‘åŽ»å¤„ç†å®ƒä»¬,é‚£ä¹ˆä¸€ä¸ª Exception å°±å¤Ÿäº†.# å¦‚æžœæƒ³è¦å¯¹ä¸åŒçš„å¼‚å¸¸ä½¿ç”¨ä¸åŒçš„å¤„ç†é€»è¾‘,é‚£ä¹ˆå°±éœ€è¦ç”¨åˆ°å¤šåˆ†æ”¯å¼‚å¸¸.# ä¸ºäº†é˜²æ­¢å¯¹å¼‚å¸¸ç±»åž‹åˆ¤æ–­é”™è¯¯,å¯ä»¥åœ¨å¤šåˆ†æ”¯åŽé¢è·Ÿä¸Š Exceptions1 = 'hello'try: int(s1)except IndexError as e: print(e)except KeyError as e: print(e)except ValueError as e: print(e)except Exception as e: print(e) # å¼‚å¸¸çš„å…¶ä»–ç»“æž„s1 = 'hello'try: int(s1)except IndexError as e: print(e)except KeyError as e: print(e)except ValueError as e: print(e)else: print('æ²¡æœ‰äº§ç”Ÿå¼‚å¸¸åˆ™æ‰§è¡Œ')finally: print('æ— è®ºå¼‚å¸¸ä¸Žå¦,éƒ½ä¼šæ‰§è¡Œè¯¥ä»£ç ') # ä¸»åŠ¨è§¦å‘å¼‚å¸¸try: raise TypeError('ç±»åž‹é”™è¯¯')except Exception as e: print(e)# è‡ªå®šä¹‰å¼‚å¸¸class ExceptionMusibii(BaseException): def __init__(self, msg): self.msg = msg def __str__(self): return self.msg try: raise ExceptionMusibii('ç±»åž‹é”™è¯¯')except ExceptionMusibii as e: print(e)# æ–­è¨€: assert æ¡ä»¶assert 1 == 1assert 2 == 2# æ€»ç»“:try...except# 1. æŠŠé”™è¯¯å¤„ç†å’ŒçœŸæ­£çš„å·¥ä½œåˆ†å¼€æ¥;# 2. ä»£ç æ›´æ˜“ç»„ç»‡,æ›´æ¸…æ™°,å¤æ‚çš„å·¥ä½œä»»åŠ¡æ›´å®¹æ˜“å®žçŽ°;# 3. ä»£ç æ›´åŠ å¥å£®,ä¸æ˜“å´©æºƒ. ä»€ä¹ˆæ—¶å€™ç”¨å¼‚å¸¸å¤„ç† åªæœ‰åœ¨é”™è¯¯å‘ç”Ÿçš„æ¡ä»¶æ— æ³•é¢„çŸ¥çš„æƒ…å†µä¸‹æ‰åº”è¯¥åŠ ä¸Š tryâ€¦except]]></content>
      <categories>
        <category>Python</category>
      </categories>
  </entry>
  <entry>
    <title><![CDATA[çƒ­æ²³]]></title>
    <url>%2F2018%2F10%2F31%2F%E7%83%AD%E6%B2%B3%2F</url>
    <content type="text"><![CDATA[ã€Šçƒ­æ²³ã€‹ ä½œè¯ï¼šæŽå¿— ä½œæ›²ï¼šæŽå¿— çƒ­æ²³è·¯å°±åƒå…«åå¹´ä»£çš„é‡‘å›åŽ¿ æ¢§æ¡ åžƒåœ¾ ç°å°˜ å’Œå„å¼å„æ ·çš„æ‚è´§åº— äººä»¬æ€»æ˜¯æ—©æ—©çš„ç¦»å¼€ æ‹‰ä¸Šå·å¸˜é—¨ åœ¨å¤©é»‘å‰ç©¿ä¸Šæ¯›è¡£ ç‚¹ä¸€æ ¹çƒŸ çƒ­æ²³è·¯æœ‰ä¸€å®¶ å¼€äº†å¥½å¤šå¹´çš„ç†å‘åº— ä¸ç®¡å‰ªä»€ä¹ˆæ ·çš„å‘åž‹ ä½ åªè¦ä»˜äº”å—é’± è€æ¿å’Œä»–çš„å¦¹å¦¹ååœ¨æ¤…å­ä¸Š å¯¹ç€é•œå­ä¸€è¨€ä¸å‘ ä»–ä»¬çš„è€å®¶ åœ¨èº«åŽ åœ¨å²¸è¾¹ åœ¨å®‰å¾½å…¨æ¤’åŽ¿ æ²¡æœ‰äººåœ¨çƒ­æ²³è·¯è°ˆæ‹çˆ± æ€»æœ‰äººåœ¨å¤©äº®æ—¶ä¼¤æ„Ÿ å¦‚æžœå¹´è½»æ—¶ä½ æ²¡æ¥è¿‡çƒ­æ²³è·¯ é‚£ä½ çŽ°åœ¨çš„ç”Ÿæ´»æ˜¯ä¸æ˜¯å¾ˆå¹¸ç¦ çºªå¿µç¢‘æ— æœ‰ä¸€å®¶ç ´æ—§çš„ç”µå½±é™¢ å¾€åŒ—èµ°äº”ç™¾ç±³ å°±æ˜¯å—äº¬ç«è½¦è¥¿ç«™ æ¯å¤©éƒ½æœ‰å¤–åœ°äºº åœ¨ç›´çº¿å’Œæ›²çº¿ä¹‹é—´è¿·è·¯ æ°”å–˜å˜˜å˜˜çœ¼æ³ªæ¨¡ç³Š å¥”è·‘ è·Œå€’ å¥”è·‘ ç§‹æž—é¾™è™¾æ¢äº†æ–°çš„åœ°æ–¹ 32è·¯è¿˜æ˜¯ç©¿è¿‡æŒ¹æ±Ÿé—¨ é«˜æž¶æ¡¥æ‹†äº†ä¿®äº†æ–°çš„éš§é“ èµ°æ¥èµ°åŽ»èµ°ä¸å‡ºæˆ‘çš„ç›ä»“æ¡¥ æ¥åˆ°åŸŽå¸‚å·²ç»å…«ç™¾ä¹åå…­å¤© çƒ­æ²³è·¯ä¸€ç›´æ˜¯ç›¸åŒçš„å®¹é¢œ å¶å°”æœ‰å¹²å‡€çš„æ½˜è¥¿è·¯è¿‡ å¥¹ä¸ä¼šè¯´ ä½ å¥½å†è§ æ²¡æœ‰äººåœ¨çƒ­æ²³è·¯è°ˆæ‹çˆ± æ€»æœ‰äººåœ¨å¤©é»‘æ—¶ä¼¤æ„Ÿ å¦‚æžœå¹´è½»æ—¶ä½ æ¥è¿‡çƒ­æ²³è·¯ é‚£ä½ çŽ°åœ¨æ˜¯ä¸æ˜¯å·²ç»è¢«ä»–ä»¬æ·¹æ²¡ æ²¡æœ‰æ–°çš„è¡£æœèƒ½è®©ä½ çˆ±æ‹ æ€»æœ‰ä¸€ç§å¤©æ°”è®©æˆ‘æ€€å¿µ é†’æ¥æˆ–è€…åƒé¥±åˆæ˜¯ä¸€å¹´ ç›¸é‡ç„¶åŽåˆ†åˆ«å°±åœ¨ä¸€å¤© æ²¡æœ‰äººåœ¨çƒ­æ²³è·¯è°ˆæ‹çˆ± æ€»æœ‰äººåœ¨å¤©é»‘æ—¶ä¼¤æ„Ÿ å¦‚æžœå¹´è½»æ—¶ä½ æ¥è¿‡çƒ­æ²³è·¯ é‚£ä½ çŽ°åœ¨æ˜¯ä¸æ˜¯å·²ç»è¢«ä»–ä»¬æ·¹æ²¡ æ²¡æœ‰æ–°çš„è¡£æœèƒ½è®©æˆ‘çˆ±æ‹ æ€»æœ‰ä¸€ç§å¤©æ°”è®©æˆ‘æ€€å¿µ é†’æ¥æˆ–è€…åƒé¥±åˆæ˜¯ä¸€å¹´ ç›¸é‡ç„¶åŽåˆ†åˆ«å°±åœ¨ä¸€å¤©]]></content>
      <categories>
        <category>Music</category>
      </categories>
      <tags>
        <tag>æŽå¿—</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[æ²§æµ·ä¸€å£°ç¬‘]]></title>
    <url>%2F2018%2F10%2F30%2F%E6%B2%A7%E6%B5%B7%E4%B8%80%E5%A3%B0%E7%AC%91%2F</url>
    <content type="text"><![CDATA[ã€Šæ²§æµ·ä¸€å£°ç¬‘ã€‹ ä½œè¯ï¼šé»„éœ‘ ä½œæ›²ï¼šé»„éœ‘ æ²§æµ·ç¬‘æ»”æ»”ä¸¤å²¸æ½® æµ®æ²‰éšæµªè®°ä»Šæœ è‹å¤©ç¬‘çº·çº·ä¸–ä¸Šæ½® è°è´Ÿè°èƒœå‡ºå¤©çŸ¥æ™“ æ±Ÿå±±ç¬‘çƒŸé›¨é¥ æ¶›æµªæ·˜å°½çº¢å°˜ä¿—äº‹çŸ¥å¤šå°‘ æ¸…é£Žç¬‘ç«Ÿæƒ¹å¯‚å¯¥ è±ªæƒ…è¿˜å‰©äº†ä¸€è¥Ÿæ™šç…§ è‹ç”Ÿç¬‘ä¸å†å¯‚å¯¥ è±ªæƒ…ä»åœ¨ç—´ç—´ç¬‘ç¬‘ å•¦â€¦å•¦â€¦å•¦â€¦ â€‹ è®°é‡‘åº¸å¤§ä¾ ï¼ˆæŸ¥è‰¯é•›ï¼‰ â€‹ ä¸Žå¤æ¢¦åŒä¸€å¤©å½’è¥¿ â€‹ 2018å¹´10æœˆ30æ—¥]]></content>
      <categories>
        <category>Music</category>
      </categories>
      <tags>
        <tag>None</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[python æ¨¡å—ä¸ŽåŒ…çš„å¯¼å…¥é—®é¢˜]]></title>
    <url>%2F2018%2F10%2F27%2Fpython-%E6%A8%A1%E5%9D%97%E4%B8%8E%E5%8C%85%E7%9A%84%E5%AF%BC%E5%85%A5%E9%97%AE%E9%A2%98%2F</url>
    <content type="text"></content>
  </entry>
  <entry>
    <title><![CDATA[ç±»çš„å†…ç½®æ–¹æ³•]]></title>
    <url>%2F2018%2F10%2F25%2F%E7%B1%BB%E7%9A%84%E5%86%85%E7%BD%AE%E6%96%B9%E6%B3%95%2F</url>
    <content type="text"><![CDATA[ç±»çš„å†…ç½®æ–¹æ³•éƒ½æ˜¯ç»§æ‰¿objectåŸºç±»çš„,å†…ç½®æ–¹æ³•é€šå¸¸ä¸ºåŒä¸‹åˆ’çº¿çš„æ–¹æ³•,æ¯”å¦‚__init__æ–¹æ³•,è€Œç±»çš„å†…ç½®æ–¹æ³•ä¹Ÿå«åšé­”æœ¯æ–¹æ³•,å› ä¸ºå¤ªå¼ºå¤§äº†. åœ¨ä»‹ç»é­”æœ¯æ–¹æ³•ä¹‹å‰å…ˆçœ‹ä¸€äº›åˆ¤æ–­å¯¹è±¡å’Œç±»çš„ç»§æ‰¿å…³ç³»çš„æ–¹æ³•: isinstance(obj, A_tuple):åˆ¤æ–­æŸä¸ªå¯¹è±¡æ˜¯å¦å±žäºŽæŸä¸€ä¸ªé›†åˆç±»çš„å¯¹è±¡ issubclass(x, A_tuple): åˆ¤æ–­æŸä¸ªç±»æ˜¯å¦æ˜¯æŸä¸€ä¸ªé›†åˆç±»çš„å­ç±» 1 __str__æ–¹æ³•ä¼šåœ¨å¯¹è±¡è¢«æ‰“å°çš„æ—¶å€™è‡ªåŠ¨è§¦å‘,ç„¶åŽå°†è¿”å›žå€¼å½“åšæ‰“å°çš„ç»“æžœ ä½¿ç”¨ä¾‹å­: 123456789101112class People: de __init__(self, name, age): self.name = name self.age = age def __str__(self): return '&lt;%s : %s&gt;' % (self.name, self.age) peo = People('musibii', 18)print(peo) # print(peo.__str__())# è¿è¡Œç»“æžœ&lt;musibii : 18&gt; 2 __del__æ–¹æ³•ä¼šåœ¨å¯¹è±¡è¢«åˆ é™¤æ—¶è‡ªåŠ¨è§¦å‘æ‰§è¡Œ,ç”¨æ¥åœ¨å¯¹è±¡è¢«åˆ é™¤å‰å›žæ”¶èµ„æº ä½¿ç”¨ä¾‹å­: 123456789101112class Bar: def __init__(self, x, y, filepath): self.x = x self.y = y self.f = open(filepath, 'r', encoding='utf-8') def __del__(self): # å†™å›žæ”¶ç³»ç»Ÿèµ„æºç›¸å…³çš„ä»£ç  self.f.close() obj = Bar(10, 20)del obj æœªå®Œå¾…ç»­]]></content>
      <categories>
        <category>Python</category>
      </categories>
      <tags>
        <tag>é¢å‘å¯¹è±¡</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[é€šè¿‡å­—ç¬¦ä¸²æ¥æ“ä½œç±»æˆ–å¯¹è±¡çš„å±žæ€§]]></title>
    <url>%2F2018%2F10%2F25%2F%E9%80%9A%E8%BF%87%E5%AD%97%E7%AC%A6%E4%B8%B2%E6%9D%A5%E6%93%8D%E4%BD%9C%E7%B1%BB%E6%88%96%E5%AF%B9%E8%B1%A1%E7%9A%84%E5%B1%9E%E6%80%A7%2F</url>
    <content type="text"><![CDATA[é€šè¿‡å­—ç¬¦ä¸²æ¥æŸ¥çœ‹èŽ·å–ä¿®æ”¹åˆ é™¤ç±»æˆ–å¯¹è±¡çš„å±žæ€§çš„ä½¿ç”¨åœºæ™¯ä¸ºèŽ·å–ç”¨æˆ·çš„è¾“å…¥,å› ä¸ºå¾—åˆ°çš„å€¼éƒ½æ˜¯å­—ç¬¦ä¸²ç±»åž‹,é‚£ä¹ˆå°±å¯ä»¥ç›´æŽ¥é€šè¿‡å­—ç¬¦ä¸²æ¥æ“ä½œå±žæ€§è€Œä¸ç”¨æŠŠå­—ç¬¦ä¸²ä¿®æ”¹ä¸ºå¯ä»¥é€šè¿‡å¥ç‚¹æ³•è®¿é—®çš„å½¢å¼äº†. é‚£ä¹ˆæœ‰å››ä¸ªæ–¹æ³•å¯ä»¥é€šè¿‡å­—ç¬¦ä¸²æ¥æ“ä½œå±žæ€§: hasattr:æ˜¯å¦å…·æœ‰è¯¥å±žæ€§,è¿”å›žå¸ƒå°”å€¼ getattr:èŽ·å–å±žæ€§å€¼,æ²¡æœ‰è¯¥å±žæ€§çš„è¯ä¼šæŠ¥é”™,è®¾ç½®ä¸€ä¸ªé»˜è®¤å€¼ None setattr:ä¿®æ”¹å±žæ€§å€¼, æœ‰å°±ä¿®æ”¹,æ²¡æœ‰å°±æ·»åŠ  delattr:åˆ é™¤å±žæ€§,æœ‰å°±åˆ é™¤,æ²¡æœ‰ä¼šæŠ¥é”™,åº”è¯¥åŠ ä¸ªåˆ¤æ–­ ä¸€ hasattræ–¹æ³•æŸ¥çœ‹æºç å¯çŸ¥: 1234567def hasattr(*args, **kwargs): # real signature unknown """ Return whether the object has an attribute with the given name. This is done by calling getattr(obj, name) and catching AttributeError. """ pass ç¿»è¯‘è¿‡æ¥å°±æ˜¯:è¿”å›žå¯¹è±¡æ˜¯å¦å…·æœ‰ç»™å®šåç§°çš„å±žæ€§ã€‚è¿™æ˜¯é€šè¿‡è°ƒç”¨getattrå‡½æ•°å’Œæ•èŽ·AttributeErroré”™è¯¯æ¥å®Œæˆçš„. ä½¿ç”¨ä¾‹å­ 1234567class Foo: def __init__(self, name, age): self.name = name self.age = age def tell_info(self): print('%s : %s' % (self.name, self.age)) 123456789# hasattrobj = Foo('musibii', 18)print(hasattr(obj, 'name'))print(hasattr(obj, 'age'))print(hasattr(obj, 'gender'))# è¿è¡Œç»“æžœTrueTrueFalse äºŒ getattræ–¹æ³•æŸ¥çœ‹æºç å¯çŸ¥: 123456789def getattr(object, name, default=None): # known special case of getattr """ getattr(object, name[, default]) -&gt; value Get a named attribute from an object; getattr(x, 'y') is equivalent to x.y. When a default argument is given, it is returned when the attribute doesn't exist; without it, an exception is raised in that case. """ pass å®žé™…è¯¥æ–¹æ³•æ˜¯è°ƒç”¨çš„ä¼ å…¥å¯¹è±¡çš„é­”æœ¯æ–¹æ³•__getattribute__,æŸ¥çœ‹objectçš„æºç ,ä»Žé­”æœ¯æ–¹æ³•__getattribute__çš„æ³¨é‡Šå‘çŽ°â€™â€™â€™return getattr(self, name)â€™â€™â€™,å½“å¯¹å¯¹è±¡è°ƒç”¨getattræ–¹æ³•æ˜¯,å°±ä¼šè§¦å‘__getattribute__æ–¹æ³•.åªæœ‰å¯¹è±¡å…·æœ‰__getattribute__é­”æœ¯æ–¹æ³•,æ‰å¯ä»¥ä½¿ç”¨getattræ–¹æ³•,ä¸€èˆ¬æ¥è¯´é™¤éžå®šä¹‰ç±»çš„æ—¶å€™æ”¹å†™äº†è¯¥æ–¹æ³•,æœ‰ä¸åŒçš„ç»“æžœ. ä½¿ç”¨ä¾‹å­ 12345678# getattrprint(getattr(obj, 'name'))print(getattr(obj, 'age'))print(getattr(obj, 'gender', None)) # å¦‚æžœæ²¡æœ‰è¦èŽ·å–çš„å±žæ€§çš„è¯,åº”è¯¥å®šä¹‰é»˜è®¤å€¼,å¦åˆ™ä¼šæŠ¥é”™# è¿è¡Œç»“æžœmusibii18None ä¸‰ setattræ–¹æ³•æŸ¥çœ‹æºç å¯çŸ¥: 1234567def setattr(x, y, v): # real signature unknown; restored from __doc__ """ Sets the named attribute on the given object to the specified value. setattr(x, 'y', v) is equivalent to ``x.y = v'' """ pass è®¾ç½®æ‰€ç»™å¯¹è±¡çš„å±žæ€§ä¸€ä¸ªç»™å®šçš„å€¼. å’Œgetatträ¸€æ ·,è¯¥æ–¹æ³•ä¼ å…¥çš„å¯¹è±¡éœ€è¦æœ‰__setattr__é­”æœ¯æ–¹æ³•æ‰å¯ä»¥è°ƒç”¨getattræ–¹æ³•. ä½¿ç”¨ä¾‹å­: 1234567891011# setattrprint(obj.__dict__)setattr(obj, 'name', 'maffia')print(obj.__dict__)setattr(obj, 'gender', 'male')print(obj,__dict__)# è¿è¡Œç»“æžœ&#123;'name': 'musibii', 'age': 18&#125;&#123;'name': 'maffia', 'age': 18&#125;&#123;'name': 'maffia', 'age': 18, 'gender': 'male'&#125;# å¦‚æžœè®¾ç½®çš„å±žæ€§å¯¹è±¡é‡Œé¢æ²¡æœ‰çš„è¯ä¼šæ–°å¢žå±žæ€§ å›› delattræ–¹æ³•æŸ¥çœ‹æºç å¯çŸ¥: 1234567def delattr(x, y): # real signature unknown; restored from __doc__ """ Deletes the named attribute from the given object. delattr(x, 'y') is equivalent to ``del x.y'' """ pass ä»Žæ‰€ç»™å¯¹è±¡åˆ é™¤å±žæ€§. å’Œgetatträ¸€æ ·,è¯¥æ–¹æ³•ä¼ å…¥çš„å¯¹è±¡éœ€è¦æœ‰__delattr__é­”æœ¯æ–¹æ³•æ‰å¯ä»¥è°ƒç”¨delattræ–¹æ³•. ä½¿ç”¨ä¾‹å­: 12345# delattr# åˆ é™¤å±žæ€§çš„æ—¶å€™,å¦‚æžœæ²¡æœ‰æ‰€ç»™çš„å±žæ€§å,é‚£ä¹ˆä¼šæŠ¥é”™,æ‰€ä»¥åœ¨ä½¿ç”¨delattrçš„æ—¶å€™åŠ ä¸Šifåˆ¤æ–­delattr(obj, 'gender')if hasattr(obj, 'xxx'): delattr(obj, 'xxx')]]></content>
      <categories>
        <category>Python</category>
      </categories>
      <tags>
        <tag>é¢å‘å¯¹è±¡</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ç±»æ–¹æ³•ä¹‹ç»‘å®šæ–¹æ³•å’Œéžç»‘å®šæ–¹æ³•]]></title>
    <url>%2F2018%2F10%2F25%2F%E7%B1%BB%E6%96%B9%E6%B3%95%E4%B9%8B%E7%BB%91%E5%AE%9A%E6%96%B9%E6%B3%95%E5%92%8C%E9%9D%9E%E7%BB%91%E5%AE%9A%E6%96%B9%E6%B3%95%2F</url>
    <content type="text"><![CDATA[åœ¨ç±»ä¸­å®šä¹‰çš„å‡½æ•°æ€»å…±å¯ä»¥åˆ†ä¸ºä¸¤å¤§ç±»: ç»‘å®šæ–¹æ³• ç»‘å®šæ–¹æ³• ç‰¹æ®Šä¹‹å¤„:ç»‘å®šç»™è°å°±åº”è¯¥ç”±è°æ¥è°ƒç”¨,è°æ¥è°ƒç”¨å°±ä¼šå°†è°å½“åšç¬¬ä¸€ä¸ªå‚æ•°è‡ªåŠ¨ä¼ å…¥ ç»‘å®šç»™å¯¹è±¡çš„æ–¹æ³•:åœ¨ç±»ä¸­å®šä¹‰å‡½æ•°æ²¡æœ‰è¢«ä»»ä½•è£…é¥°å™¨è£…é¥°çš„æƒ…å†µä¸‹,é»˜è®¤å°±æ˜¯ç»‘å®šå¯¹è±¡çš„. ç»‘å®šç»™ç±»çš„æ–¹æ³•:ä¸ºç±»ä¸­å®šä¹‰å‡½æ•°æ·»åŠ ä¸€ä¸ªclassmethodè£…é¥°å™¨,å°±æ˜¯ç»‘å®šç»™ç±»çš„. éžç»‘å®šæ–¹æ³• ç‰¹æ®Šä¹‹å¤„:éžç»‘å®šæ–¹æ³•å°±æ˜¯ä¸€ä¸ªæ™®é€šå‡½æ•°,æ—¢ä¸ä¸Žç±»ç»‘å®šåˆä¸ä¸Žå¯¹è±¡ç»‘å®š,æ„å‘³ç€ç±»å’Œå¯¹è±¡éƒ½å¯ä»¥è°ƒç”¨,ä½†æ˜¯æ— è®ºè°æ¥è°ƒç”¨éƒ½æ˜¯ä¸€ä¸ªæ™®é€šå‡½æ•°,æ²¡æœ‰è‡ªåŠ¨ä¼ å€¼çš„æ•ˆæžœ. éžç»‘å®šæ–¹æ³•:ä¸ºç±»ä¸­å®šä¹‰å‡½æ•°æ·»åŠ ä¸€ä¸ªstaticmethodè£…é¥°å™¨,å°±æ˜¯éžç»‘å®šæ–¹æ³•. ç±»ä¸­çš„ç»‘å®šæ–¹æ³•é€šå¸¸æ¥è¯´æ˜¯é»˜è®¤ç»™å¯¹è±¡æ˜¯ç”¨çš„,åŠ äº†classmethodè£…é¥°å™¨æ‰æ˜¯ç»™ç±»ä½¿ç”¨çš„,é‚£ä¹ˆè¿™ä¸‰ç§æ–¹æ³•çš„ä½¿ç”¨åœºæ™¯æ˜¯ä»€ä¹ˆå‘¢? é»˜è®¤ç»‘å®šç»™å¯¹è±¡çš„æ²¡ä»€ä¹ˆå¥½è¯´çš„, ç»‘å®šç»™ç±»çš„æ–¹æ³•:ä¸€èˆ¬ç”¨æ¥è‡ªåŠ¨å®žä¾‹åŒ–å¯¹è±¡(ä¼ å…¥æŸäº›ç‰¹æ®Šçš„é…ç½®æ–‡ä»¶å¯¹è±¡), éžç»‘å®šæ–¹æ³•:éžç»‘å®šæ–¹æ³•ä¸ç”¨ä¼ å…¥å¯¹è±¡,ä¹Ÿä¸ç”¨ä¼ å…¥ç±»,ç”¨åœ¨å•çº¯çš„è¿”å›žæˆ–å¾—åˆ°æŸäº›å€¼. 123456789101112131415161718192021222324252627282930313233343536373839404142class Foo: def func1(self): print('func1', self) @classmethod def func2(cls): print('func2', cls) @staticmethod def func3(x, y): print('func3', x, y) obj = Foo()# ç»‘å®šç»™å¯¹è±¡çš„æ–¹æ³•# ç»‘å®šç»™å¯¹è±¡çš„,åº”è¯¥ç”±å¯¹è±¡æ¥è°ƒç”¨obj.func1()print(obj)# è¿è¡Œç»“æžœfunc1 &lt;__main__.Foo object at 0x107e8c6d8&gt;&lt;__main__.Foo object at 0x107e8c6d8&gt;# ç»‘å®šç»™ç±»çš„æ–¹æ³•# ç»‘å®šç»™ç±»çš„æ–¹æ³•åº”è¯¥ç”±ç±»æ¥è°ƒç”¨print(Foo.func2)print(obj.func2) # ç”±å¯¹è±¡æ¥è°ƒç”¨çš„ç»“æžœä¸€æ ·# è¿è¡Œç»“æžœ&lt;bound method Foo.func2 of &lt;class '__main__.Foo'&gt;&gt;&lt;bound method Foo.func2 of &lt;class '__main__.Foo'&gt;&gt;# éžç»‘å®šæ–¹æ³•print(obj.func3)print(Foo.func3)obj.func3(1, 2)obj.func3(1, 2)# è¿è¡Œç»“æžœ&lt;function Foo.func3 at 0x1063e3bf8&gt;&lt;function Foo.func3 at 0x1063e3bf8&gt;func3 1 2func3 1 2 å®žé™…ä½¿ç”¨çš„ä¾‹å­:ä¸»è¦æ˜¯ç»‘å®šç»™ç±»çš„ä½¿ç”¨åœºæ™¯; 123# settings.pyIP='1.1.2.2'PORT=3306 1234567891011121314151617181920212223242526272829303132333435# main.pyimport settingsclass MySQL: def __init__(self, ip, port): self.id = self.creat_id() self.ip = ip self.port = port def tell_info(self): print('&lt;%s : %s : %s' % (self.id, self.ip, self.port)) @staticmethod def creat_id(self): import uuid return uuid.uuid4() @classmethod def from_conf(cls): return cls(settings.IP, settings.PORT) obj = MySQL('1.1.1.1', 3306)obj.tell_info()# è¿è¡Œç»“æžœ&lt;86044651-cea8-4d93-99dc-46a02e169d6d : 1.1.1.1 : 3306&gt;a = obj.from_conf() # äº§ç”Ÿä¸€ä¸ªæ–°çš„å¯¹è±¡a.tell_info()# è¿è¡Œç»“æžœ&lt;efec5e5f-4bfc-4534-8e60-940824532506 : 1.1.1.2 : 3306&gt;obj1 = MySQL.from_conf()obj1.tell_info()# è¿è¡Œç»“æžœ&lt;9463911a-ebcf-416a-9332-54282f3f3cba : 1.1.1.2 : 3306&gt;]]></content>
      <categories>
        <category>Python</category>
      </categories>
      <tags>
        <tag>é¢å‘å¯¹è±¡</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[è£…é¥°å™¨çš„è¿›ä¸€æ­¥å­¦ä¹ ]]></title>
    <url>%2F2018%2F10%2F24%2F%E8%A3%85%E9%A5%B0%E5%99%A8%E7%9A%84%E8%BF%9B%E4%B8%80%E6%AD%A5%E5%AD%A6%E4%B9%A0%2F</url>
    <content type="text"><![CDATA[ä»Šå¤©åœ¨è°ƒç”¨è¢«è£…é¥°å™¨è£…é¥°çš„å‡½æ•°çš„æ—¶å€™å®žé™…è°ƒç”¨å‡½æ•°è¿”å›žçš„å€¼å’Œè‡ªå·±é¢„æƒ³çš„ä¸ä¸€æ ·,ç»è¿‡æœ‹å‹çš„æŒ‡ç‚¹å‘çŽ°é—®é¢˜åœ¨è¿”å›žè¢«è£…é¥°å™¨è£…é¥°çš„å‡½æ•°çš„è¿è¡Œç»“æžœä¸Š. 12345678910111213141516def auth_login(func): def wrapper(*args, **kwargs): func(*args, **kwargs) return wrapper@auth_logindef paymoney(total): if total &gt; 0: return True else: return False if paymoney(10): print('æ•°é¢å……è¶³')else: print('æ•°é¢ä¸è¶³') è¿™ä¸ªç®€å•çš„è£…é¥°å™¨åº”è¯¥å¾ˆå®¹æ˜“åˆ†æžå‡ºç»“æžœ,é¢„æƒ³ä¸­çš„ç»“æžœåº”è¯¥æ˜¯æ‰“å°:æ•°é¢å……è¶³,ç„¶è€Œç»“æžœå´æ˜¯ä»€ä¹ˆéƒ½æ²¡æ‰“å°,å…¶å®žæ˜¯å› ä¸ºè£…é¥°å™¨æœ‰é—®é¢˜,å› ä¸ºå¹¶æ²¡æœ‰æŠŠè¢«è£…é¥°çš„å‡½æ•°è¿è¡Œç»“æžœè¿”å›ž,é‚£ä¹ˆè£…é¥°å™¨çš„è¿è¡Œç»“æžœå°±ä¸ºNone,è‡ªç„¶ä»€ä¹ˆéƒ½ä¸ä¼šæ‰“å°. æ­£ç¡®çš„è£…é¥°å™¨å¦‚ä¸‹: 12345def auth_login(func): def wrapper(*args, **kwargs): res = func(*args, **kwargs) return res return wrapper]]></content>
      <categories>
        <category>Python</category>
      </categories>
      <tags>
        <tag>å‘çŽ°</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ç±»çš„ä¸‰å¤§ç‰¹æ€§ä¹‹å¤šæ€]]></title>
    <url>%2F2018%2F10%2F24%2F%E7%B1%BB%E7%9A%84%E4%B8%89%E5%A4%A7%E7%89%B9%E6%80%A7%E4%B9%8B%E5%A4%9A%E6%80%81%2F</url>
    <content type="text"><![CDATA[å¤šæ€ä¸‰é—® ä»€ä¹ˆæ˜¯å¤šæ€? å¤šæ€æŒ‡çš„æ˜¯åŒä¸€ç§äº‹ç‰©çš„å¤šç§å½¢æ€,ä¸¾ä¸ªä¾‹å­:æ¯ä¸ªäººéƒ½ä¼šç¡è§‰,ä½†æ˜¯æ¯ä¸ªäººçš„ç¡è§‰å§¿åŠ¿,ç¡çœ è´¨é‡éƒ½ä¸ä¸€æ ·,å†è¯´,æ¯ä¸ªäººçš„ç¥–å®—éƒ½æ˜¯çŒ¿ç±»,ä½†æ˜¯çŽ°åœ¨å‡ ä¹Žæ²¡æœ‰ä¸€æ¨¡ä¸€æ ·çš„ä¸¤ä¸ªäºº,æœ‰å¥è¯è¯´ä¸–ç•Œä¸Šæ²¡æœ‰ä¸¤ç‰‡ç›¸åŒçš„å¶å­,è¿™å°±æ˜¯å¤šæ€,è¿™ä¹Ÿæ˜¯ä¸ºä»€ä¹ˆè¿™ä¸ªä¸–ç•Œå¤šå§¿å¤šå½©,å› ä¸ºæˆ‘ä»¬ä¸€æ ·,æˆ‘ä»¬ä¹Ÿä¸ä¸€æ ·. ä¸ºä½•è¦ç”¨å¤šæ€? æˆ‘è§‰å¾—ä¸æ˜¯ç”¨ä¸ç”¨å¤šæ€çš„é—®é¢˜,pythonçš„å“²å­¦æ˜¯ä¸€åˆ‡çš†å¯¹è±¡,é‚£ä¹ˆå¯¹è±¡å…¶å®žå¯ä»¥æƒ³è±¡æˆçŽ°å®žç”Ÿæ´»ä¸­çš„ä¸ªä½“,è¿™å°±è‡ªç„¶è€Œç„¶æœ‰äº†å¤šæ€çš„æ¦‚å¿µäº†,å¤šä¸ªå¯¹è±¡çš„æŸä¸€ä¸ªç›¸åŒçš„æ–¹æ³•,å´æœ‰ä¸ä¸€æ ·çš„è¡¨çŽ°å½¢å¼.é‚£ä¹ˆåœ¨Pythonä¸­æ€Žä¹ˆå®šä¹‰å¤šæ€å‘¢? 123456789101112131415import abcclass Animal(metaclass=abc.ABCMeta): @abc.abstractmethod def speak(self): pass # Animal() çˆ¶ç±»ä¸èƒ½å®žä¾‹åŒ–,å› ä¸ºçˆ¶ç±»æœ¬èº«å°±æ˜¯ç”¨æ¥åˆ¶å®šæ ‡å‡†çš„# speakæ–¹æ³•è¢«ä¸€ä¸ªè£…é¥°è£…é¥°äº†,æ„å‘³ç€åªè¦æ˜¯ç»§æ‰¿Animalç±»çš„å­ç±»éƒ½å¿…é¡»å®žçŽ°speakæ–¹æ³•,å¼ºåˆ¶å®žè¡Œçš„class People(Animal): def speak(self): pass #åªæœ‰è¿™æ ·,æ‰å¯ä»¥ç»§æ‰¿Animalç±» pythonæ˜¯ä¸€é—¨è‡ªç”±åº¦å¾ˆé«˜çš„è¯­è¨€,å‡ ä¹Žæ²¡æœ‰ä»€ä¹ˆå¼ºåˆ¶è¦åšçš„äº‹æƒ…,è¿™æœ‰å¥½å¤„ä¹Ÿæœ‰åå¤„.å¥½å¤„æ˜¯ä¸€é—¨è¯­è¨€è¶Šè‡ªç”±é‚£ä¹ˆå¼€å‘è€…çš„åˆ›æ–°æ€§å°±è¶Šå¼º,æ‰€ä»¥æ‰æœ‰äº†è¶Šæ¥è¶Šå¤šçš„ç¬¬ä¸‰æ–¹åº“,ä½¿å¾—pythonçš„ç”Ÿæ€çŽ¯å¢ƒæ„ˆå‘å®Œå–„,åƒè‘—åçš„requestsåº“,å”¯ä¸€çš„ä¸€ä¸ªéžè½¬åŸºå› çš„python HTTPåº“,äººç±»å¯ä»¥å®‰å…¨äº«ç”¨.(æ‰¯è¿œäº†â€¦),è¶Šæ¥è¶Šå¤šçš„å¼€å‘è€…ä½¿ç”¨python,å¼€å‘æ–°çš„ç‰¹æ€§å’Œæ–°çš„åº“,é‚£ä¹ˆåå¤„å°±æ˜¯pythonå¾ˆè‡ªç”±,æ‰€ä»¥æ²¡æœ‰ä»€ä¹ˆæ ‡å‡†,ä½ å¯ä»¥æœ‰ä½ çš„æ ‡å‡†,æˆ‘å¯ä»¥æœ‰æˆ‘çš„æ ‡å‡†,æŒ‰ç†è¯´pythonæ˜¯ä¸ç¦æ­¢çš„,é‚£ä¹ˆæ€Žä¹ˆè§£å†³è¿™ä¸ªé—®é¢˜å‘¢? pythonçš„å¼€å‘è€…éƒ½çº¦å®šæˆä¿—çš„æ‰§è¡Œä¸€äº›äº‹æƒ…,æ¯”å¦‚å¸¸é‡å…¨å¤§å†™,å‡½æ•°åå°å†™æˆ–è€…åŠ ä¸‹åˆ’çº¿,ç±»å‘¢,å°±ä½¿ç”¨é©¼å³°æ³•å‘½å,é‚£ä¹ˆæˆ‘ä»¬ä¸€çœ‹åˆ°å˜é‡åå°±å¯ä»¥çŸ¥é“è¿™æ˜¯ä¸ªä»€ä¹ˆç±»åž‹çš„å˜é‡äº†,åŒç†,åœ¨pythonçš„ç±»ä¸­,ä¹Ÿçº¦å®šæˆä¿—äº†ç”¨åŒæ ·çš„åå­—æ”¹å†™è‡ªå·±çš„æ–¹æ³•,æŸ¥çœ‹åŸºç±»objectçš„æºç å¯çŸ¥: 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110class object: """ The most base type """ def __delattr__(self, *args, **kwargs): # real signature unknown """ Implement delattr(self, name). """ pass def __dir__(self): # real signature unknown; restored from __doc__ """ __dir__() -&gt; list default dir() implementation """ return [] def __eq__(self, *args, **kwargs): # real signature unknown """ Return self==value. """ pass def __format__(self, *args, **kwargs): # real signature unknown """ default object formatter """ pass def __getattribute__(self, *args, **kwargs): # real signature unknown """ Return getattr(self, name). """ pass def __ge__(self, *args, **kwargs): # real signature unknown """ Return self&gt;=value. """ pass def __gt__(self, *args, **kwargs): # real signature unknown """ Return self&gt;value. """ pass def __hash__(self, *args, **kwargs): # real signature unknown """ Return hash(self). """ pass def __init_subclass__(self, *args, **kwargs): # real signature unknown """ This method is called when a class is subclassed. The default implementation does nothing. It may be overridden to extend subclasses. """ pass def __init__(self): # known special case of object.__init__ """ Initialize self. See help(type(self)) for accurate signature. """ pass def __le__(self, *args, **kwargs): # real signature unknown """ Return self&lt;=value. """ pass def __lt__(self, *args, **kwargs): # real signature unknown """ Return self&lt;value. """ pass @staticmethod # known case of __new__ def __new__(cls, *more): # known special case of object.__new__ """ Create and return a new object. See help(type) for accurate signature. """ pass def __ne__(self, *args, **kwargs): # real signature unknown """ Return self!=value. """ pass def __reduce_ex__(self, *args, **kwargs): # real signature unknown """ helper for pickle """ pass def __reduce__(self, *args, **kwargs): # real signature unknown """ helper for pickle """ pass def __repr__(self, *args, **kwargs): # real signature unknown """ Return repr(self). """ pass def __setattr__(self, *args, **kwargs): # real signature unknown """ Implement setattr(self, name, value). """ pass def __sizeof__(self): # real signature unknown; restored from __doc__ """ __sizeof__() -&gt; int size of object in memory, in bytes """ return 0 def __str__(self, *args, **kwargs): # real signature unknown """ Return str(self). """ pass @classmethod # known case def __subclasshook__(cls, subclass): # known special case of object.__subclasshook__ """ Abstract classes can override this to customize issubclass(). This is invoked early on by abc.ABCMeta.__subclasscheck__(). It should return True, False or NotImplemented. If it returns NotImplemented, the normal algorithm is used. Otherwise, it overrides the normal algorithm (and the outcome is cached). """ pass __class__ = None # (!) forward: type, real value is '' __dict__ = &#123;&#125; __doc__ = '' __module__ = '' è¿™é‡Œé¢çš„åŒä¸‹åˆ’çº¿çš„æ–¹æ³•,æ˜¯åŸºç±»å·²ç»å®šä¹‰å¥½äº†çš„æ–¹æ³•,é‚£ä¹ˆç»§æ‰¿åŸºç±»çš„ç±»,å¦‚æžœæ²¡æœ‰å°±ç”¨æˆ‘çš„,å¦‚æžœæœ‰çš„è¯,ä½ ä¹Ÿç”¨ç›¸åŒçš„åå­—,è¿™æ ·çš„è¯ä¸ç®¡ä»€ä¹ˆå¯¹è±¡,éƒ½æœ‰åŒæ ·çš„æ–¹æ³•æ‰§è¡Œç±»ä¼¼çš„äº‹æƒ…,è¿™å°±æ˜¯å¤šæ€,è¿™ä¹Ÿæ˜¯pythonè¯­è¨€çš„é­…åŠ›. å…·ä½“ç‚¹æ¥è¯´,åƒlinuxçš„å“²å­¦æ˜¯ä¸€åˆ‡çš†æ–‡ä»¶,é‚£ä¹ˆé€šå¸¸æ¥è¯´æ–‡ä»¶åªæœ‰ä¸¤ä¸ªå±žæ€§,è¯»å’Œå†™,é‚£ä¹ˆlinuxå·²ç»æŠŠå„ç§å¤æ‚çš„æ–¹æ³•å°è£…ä¸ºäº†è¯»å’Œå†™ä¸¤ä¸ªæ–¹æ³•,é‚£ä¹ˆå°±ç®—æˆ‘ä»¬ä¸äº†è§£linuxé‡Œé¢çš„æŸäº›ç¡¬ä»¶,æˆ‘ä»¬ä¹Ÿå¯ä»¥ä½¿ç”¨åŒæ ·çš„æ–¹æ³•æ¥æ“ä½œç¡¬ä»¶.]]></content>
      <categories>
        <category>Python</category>
      </categories>
      <tags>
        <tag>é¢å‘å¯¹è±¡</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ç±»çš„ä¸‰å¤§ç‰¹æ€§ä¹‹å°è£…]]></title>
    <url>%2F2018%2F10%2F24%2F%E7%B1%BB%E7%9A%84%E4%B8%89%E5%A4%A7%E7%89%B9%E6%80%A7%E4%B9%8B%E5%B0%81%E8%A3%85%2F</url>
    <content type="text"><![CDATA[å°è£…ä¸‰é—® ä»€ä¹ˆæ˜¯å°è£…? è£…æŒ‡çš„æ˜¯æŠŠå±žæ€§è£…è¿›ä¸€ä¸ªå®¹å™¨ å°æŒ‡çš„æ˜¯éšè—çš„æ„æ€,ä½†æ˜¯è¿™ç§éšè—æ˜¯å¯¹å¤–ä¸å¯¹å†…çš„ ä¸ºä»€ä¹ˆè¦å°è£…? å°è£…ä¸æ˜¯å•çº¯æ„ä¹‰çš„éšè—; â€‹ å°è£…æ•°æ®çš„ç›®çš„:å°†æ•°æ®å±žæ€§å°è£…èµ·æ¥,ç±»å¤–éƒ¨çš„ä½¿ç”¨å°±æ— æ³•ç›´æŽ¥æ“ä½œè¯¥æ•°æ®å±žæ€§ â€‹ æƒ³è¦åœ¨å†…éƒ¨æ“ä½œå±žæ€§çš„è¯éœ€è¦åœ¨ç±»å†…éƒ¨æä¾›ä¸€ä¸ªæŽ¥å£ç»™ä½¿ç”¨è€…,ç±»çš„è®¾è®¡è€…å¯ä»¥åœ¨æŽ¥å£ä¹‹ä¸Šé™„åŠ ä»»æ„é€»è¾‘,ä»Žè€Œä¸¥æ ¼æŽ§åˆ¶ä½¿ç”¨è€…å¯¹å±žæ€§çš„æ“ä½œ â€‹ å°è£…å‡½æ•°å±žæ€§çš„ç›®çš„:éš”ç¦»å¤æ‚åº¦ å¦‚ä½•å°è£…? åªéœ€è¦åœ¨å±žæ€§å‰åŠ ä¸Š__å¼€å¤´,è¯¥å±žæ€§å°±ä¼šè¢«éšè—èµ·æ¥,è¯¥éšè—å…·å¤‡çš„ç‰¹ç‚¹: 1. åªæ˜¯ä¸€ç§è¯­æ³•æ„ä¹‰ä¸Šçš„å˜å½¢,å³__å¼€å¤´çš„å±žæ€§ä¼šåœ¨æ£€æµ‹è¯­æ³•æ—¶å‘ç”Ÿå˜å½¢,å˜ä¸º\_ç±»å\_\_å±žæ€§å; 2. è¿™ç§éšè—æ˜¯å¯¹å¤–ä¸å¯¹å†…çš„,å› ä¸ºåœ¨ç±»å†…éƒ¨æ£€æµ‹è¯­æ³•æ—¶æ‰€æœ‰çš„ä»£ç ç»Ÿä¸€éƒ½å‘ç”Ÿå˜å½¢; 3. è¿™ç§å˜å½¢åªåœ¨æ£€æµ‹è¯­æ³•æ—¶å‘ç”Ÿä¸€æ¬¡,åœ¨ç±»å®šä¹‰ä¹‹åŽæ–°å¢žçš„__å¼€å¤´çš„å±žæ€§å¹¶ä¸ä¼šå‘ç”Ÿå˜å½¢; 4. å¦‚æžœçˆ¶ç±»ä¸æƒ³è®©å­ç±»è¦†ç›–è‡ªå·±çš„å±žæ€§,å¯ä»¥åœ¨å±žæ€§å‰åŠ ä¸Š__å¼€å¤´. ä¸€ å°è£…çš„æ„å›¾ä¸€ å°è£…æ•°æ®å±žæ€§çš„çœŸå®žæ„å›¾123456789101112131415161718192021222324252627282930313233343536# coding: utf-8# @Time : 2018/10/24 6:39 PM# @Author : MUSIBII# @Email : shaozuanzuan@gmail.com# @File : å°è£…æ•°æ®å±žæ€§çš„çœŸå®žæ„å›¾.pyclass People: def __init__(self, name, age): self.__name = name self.__age = age def tell_info(self): print('name: %s age:%s' % (self.__name, self.__age)) def set_info(self, new_name, new_age): if type(new_name) is not str: print('åå­—å¿…é¡»æ˜¯strç±»åž‹') return if type(new_age) is not int: print('å¹´é¾„å¿…é¡»æ˜¯intç±»åž‹') return self.__name = new_name self.__age = new_age def clear_info(self): del self.__name del self.__ageobj = People('musibii', 18)obj.tell_info()obj.set_info('maffia', 23) äºŒ å°è£…å‡½æ•°å±žæ€§çš„çœŸå®žæ„å›¾123456789101112131415161718192021222324252627282930313233# coding: utf-8# @Time : 2018/10/24 6:53 PM# @Author : MUSIBII# @Email : shaozuanzuan@gmail.com# @File : å°è£…å‡½æ•°å±žæ€§çš„çœŸå®žæ„å›¾.pyclass ATM: def __card(self): print('æ’å¡') def __auth(self): print('ç”¨æˆ·è®¤è¯') def __input(self): print('è¾“å…¥æå–é‡‘é¢') def __print_bill(self): print('æ‰“å°è´¦å•') def __take_money(self): print('å–æ¬¾') def withdraw(self): self.__card() self.__auth() self.__input() self.__print_bill() self.__take_money()a = ATM()a.withdraw() æˆ‘ä»¬è‡ªå·±è®¾ç½®çš„ç§æœ‰å±žæ€§å¹¶ä¸æ˜¯ä¸è®©ç”¨,è€Œæ˜¯ä¸ºäº†å‡å°‘å¤æ‚åº¦ä»¥åŠä¿æŠ¤æ•°æ®,åœ¨ç±»é‡Œé¢å®šä¹‰çš„ç§æœ‰å±žæ€§åº”è¯¥æ€Žä¹ˆè®¿é—®å‘¢? 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647# coding: utf-8# @Time : 2018/10/24 6:39 PM# @Author : MUSIBII# @Email : shaozuanzuan@gmail.com# @File : å°è£…æ•°æ®å±žæ€§çš„çœŸå®žæ„å›¾.pyclass People: def __init__(self, name, age, x): self.__name = name self.__age = age self.x = x def tell_info(self): print('name: %s age:%s' % (self.__name, self.__age)) def set_info(self, new_name, new_age): if type(new_name) is not str: print('åå­—å¿…é¡»æ˜¯strç±»åž‹') return if type(new_age) is not int: print('å¹´é¾„å¿…é¡»æ˜¯intç±»åž‹') return self.__name = new_name self.__age = new_age def clear_info(self): del self.__name del self.__ageobj = People('musibii', 18, 13)obj.tell_info()obj.set_info('maffia', 23)print(obj.x)print(obj.__dict__)print(obj._People__name)# è¿è¡Œç»“æžœname: musibii age:1813&#123;'_People__name': 'maffia', '_People__age': 23, 'x': 13&#125;maffia è™½ç„¶é€šè¿‡ç›´æŽ¥è®¿é—®æ²¡ç”¨,æŸ¥çœ‹å¯¹è±¡çš„åç§°ç©ºé—´å¯ä»¥çœ‹åˆ°,åŽŸæœ¬çš„__nameå˜å½¢ä¸ºäº†_People__name,é‚£ä¹ˆå¯ä»¥é€šè¿‡è¿™ä¸ªåå­—è®¿é—®åˆ°å¯¹è±¡ä¸­çš„ç§æœ‰å±žæ€§,åŒç†å‡½æ•°ä¹Ÿæ˜¯ä¸€æ ·çš„æ–¹æ³•è®¿é—®. è¿™ç§å˜å½¢éœ€è¦æ³¨æ„çš„é—®é¢˜æ˜¯: è¿™ç§æœºåˆ¶å¹¶æ²¡æœ‰çœŸæ­£æ„ä¹‰ä¸Šé™åˆ¶æˆ‘ä»¬ä»Žå¤–éƒ¨ç›´æŽ¥è®¿é—®å±žæ€§,çŸ¥é“äº†ç±»åå’Œå±žæ€§åå°±å¯ä»¥æ‹¼å‡ºåå­—:_ç±»å__å±žæ€§,ç„¶åŽå°±å¯ä»¥è®¿é—®äº†,å¦‚a._A__N,å³è¿™ç§æ“ä½œå¹¶ä¸æ˜¯ä¸¥æ ¼æ„ä¹‰ä¸Šçš„é™åˆ¶å¤–éƒ¨è®¿é—®,ä»…ä»…åªæ˜¯ä¸€ç§è¯­æ³•æ„ä¹‰ä¸Šçš„å˜å½¢,ä¸»è¦ç”¨æ¥é™åˆ¶å¤–éƒ¨çš„ç›´æŽ¥è®¿é—®; å˜å½¢è¿‡ç¨‹åªåœ¨ç±»çš„å®šä¹‰æ—¶å‘ç”Ÿä¸€æ¬¡,åœ¨å®šä¹‰åŽçš„èµ‹å€¼æ“ä½œ,ä¸ä¼šå˜å½¢. åœ¨ç»§æ‰¿ä¸­,çˆ¶ç±»å¦‚æžœä¸æƒ³è®©å­ç±»è¦†ç›–è‡ªå·±çš„æ–¹æ³•,å¯ä»¥å°†æ–¹æ³•å®šä¹‰ä¸ºç§æœ‰å±žæ€§. 1234567891011121314151617181920212223242526272829303132# å­ç±»ç»§æ‰¿çˆ¶ç±»çš„éžç§æœ‰å±žæ€§class A: def fa(self): print('from A') def test(self): self.fa()class B(A): def fa(self): print('from B')b=B()b.test()# è¿è¡Œç»“æžœfrom B# å­ç±»å’Œçˆ¶ç±»å…·æœ‰åŒåçš„ç§æœ‰å±žæ€§,é‚£ä¹ˆåœ¨çˆ¶ç±»è°ƒç”¨ç§æœ‰å±žæ€§çš„è¯å°±ä»¥çˆ¶ç±»çš„ä¸ºå‡†class A: def __fa(self): #åœ¨å®šä¹‰æ—¶å°±å˜å½¢ä¸º_A__fa print('from A') def test(self): self.__fa() #åªä¼šä¸Žè‡ªå·±æ‰€åœ¨çš„ç±»ä¸ºå‡†,å³è°ƒç”¨_A__faclass B(A): def __fa(self): print('from B')b = B()b.test()# è¿è¡Œç»“æžœfrom A äºŒ å°è£…ä¸æ˜¯å•çº¯æ„ä¹‰çš„éšè—å°è£…çš„çœŸè°›åœ¨äºŽæ˜Žç¡®çš„åŒºåˆ†å†…å¤–,å°è£…çš„å±žæ€§å¯ä»¥åœ¨å†…éƒ¨ç›´æŽ¥ä½¿ç”¨,è€Œä¸èƒ½è¢«å¤–éƒ¨ç›´æŽ¥ä½¿ç”¨,ç„¶è€Œå®šä¹‰çš„å±žæ€§çš„ç›®çš„ç»ˆå½’æ˜¯è¦ä½¿ç”¨çš„,å¤–éƒ¨è¦æƒ³ç”¨ç±»éšè—çš„å±žæ€§,éœ€è¦å†…éƒ¨æä¾›æŽ¥å£,è®©å¤–éƒ¨èƒ½å¤Ÿé—´æŽ¥åœ°ç”¨åˆ°æˆ‘ä»¬éšè—èµ·æ¥çš„å±žæ€§,é‚£è¿™ä¹ˆåšçš„æ„ä¹‰ä½•åœ¨? å°è£…æ•°æ®: å°†æ•°æ®éšè—èµ·æ¥ä¸æ˜¯ç›®çš„.éšè—èµ·æ¥ç„¶åŽå¯¹å¤–æä¾›æ“ä½œè¯¥æ•°æ®çš„æŽ¥å£,ç„¶åŽæˆ‘ä»¬å¯ä»¥åœ¨æŽ¥å£é™„åŠ ä¸Šå¯¹è¯¥æ•°æ®æ“ä½œçš„é™åˆ¶,ä»¥æ­¤å®Œæˆå¯¹æ•°æ®å±žæ€§æ“ä½œçš„ä¸¥æ ¼æŽ§åˆ¶. å°è£…æ–¹æ³•: å°è£…æ–¹æ³•çš„ç›®çš„æ˜¯éš”ç¦»å¤æ‚åº¦,åœ¨ç¼–ç¨‹è¯­è¨€é‡Œ,å¯¹å¤–æä¾›çš„æŽ¥å£(æŽ¥å£å¯ä»¥ç†è§£ä¸ºä¸€ä¸ªå…¥å£),å¯ä»¥æ˜¯å‡½æ•°,æˆä¸ºæŽ¥å£å‡½æ•°,è¿™ä¸ŽæŽ¥å£çš„æ¦‚å¿µä¸ä¸€æ ·,æŽ¥å£ä»£è¡¨ä¸€ç»„æŽ¥å£å‡½æ•°çš„é›†åˆä½“. äº†è§£ pythonå¹¶ä¸ä¼šçœŸçš„é˜»æ­¢ä½ è®¿é—®ç§æœ‰å±žæ€§,æ¨¡å—ä¹Ÿéµå¾ªè¿™ç§çº¦å®š,å¦‚æžœæ¨¡å—åä»¥å•ä¸‹åˆ’çº¿å¼€å¤´,é‚£ä¹ˆfrom import æ—¶ä¸èƒ½è¢«å¯¼å…¥,ä½†æ˜¯ä½ from module import _private_moduleä¾ç„¶å¯ä»¥å¯¼å…¥. ä¸‰ ç‰¹æ€§å±žæ€§ä»€ä¹ˆæ˜¯ç‰¹æ€§? propertyæ˜¯ä¸€ç§ç‰¹æ®Šçš„å±žæ€§,è®¿é—®å®ƒæ—¶ä¼šæ‰§è¡Œä¸€æ®µåŠŸèƒ½(å‡½æ•°)ç„¶åŽè¿”å›žå€¼.ç±»ä¸­å¯èƒ½ä¼šæœ‰æŸäº›å‡½æ•°è¿è¡ŒåŽçš„å€¼æ˜¯ç‰¹å®šçš„æˆ–è€…å°±å•çº¯çš„è®¡ç®—å‡ºæŸç§ç‰¹å®šçš„å€¼,é‚£ä¹ˆè¿™ç§æƒ…å†µä¸‹,å¯ä»¥æŠŠè¯¥å‡½æ•°å˜ä¸ºç‰¹æ€§. ä¸ºä»€ä¹ˆè¦ç”¨property? å°†ä¸€ä¸ªç±»çš„å‡½æ•°å®šä¹‰ä¸ºç‰¹æ€§åŽ,å¯¹è±¡å†åŽ»ä½¿ç”¨çš„æ—¶å€™,å¯ä»¥æ˜¯è®¿é—®æ•°æ®å±žæ€§ä¸€æ ·è®¿é—®,å°±å¥½åƒè£…é¥°å™¨ä¸€æ ·,å…¶å®žä½ æ ¹æœ¬ä¸çŸ¥é“å¤–é¢åšäº†ä»€ä¹ˆæ“ä½œ,è€Œpropertyä¹Ÿæ˜¯ä¸€ä¸ªè£…é¥°å™¨. 123456789101112131415161718class People: def __init__(self, name, weight, height): self.name = name self.weight = weight self.height = height # @property def bmi(self): return self.weight / (self.height ** 2) obj = People('musibii', 60, 1.73)obj.weight = 65print(obj.bmi())# è¿è¡Œç»“æžœ21.71806608974573# æŠŠæ³¨é‡ŠåŽ»æŽ‰åŽ,è°ƒç”¨æ–¹æ³•bmi()å°±å¯ä»¥åƒè®¿é—®å±žæ€§ä¸€æ ·è¿›è¡Œè®¿é—®äº†.print(obj.bmi) å¦å¤–ä¸€ç§æ–¹æ³•ä¹Ÿå¯ä»¥å®žçŽ°è¿™ç§æ–¹æ³•: 12345678910111213141516171819202122class People: def __init__(self, name): self.__name = name def yyy_name(self, new_name): if type(new_name) is not str: print('åå­—å¿…é¡»æ˜¯strç±»åž‹') return self.__name = new_name def zzz_name(self): del self.__name def xxx_name(self): return '&lt;name:%s&gt;' % self.__name name = property(xxx_name, yyy_name, zzz_name)obj = People('musibii')print(obj.name) è¿™ç§æ–¹æ³•ç¨æ˜¾å¥‡æ€ª,å…¶å®žä½œç”¨æ˜¯ä¸€æ ·çš„,ä½†æ˜¯è¿™ç§æ–¹æ³•æœ‰ä¸€ä¸ªéœ€è¦æ³¨æ„çš„åœ°æ–¹,é‚£å°±æ˜¯propertyç±»çš„__init__æ–¹æ³•çš„å‚æ•°æ˜¯ä½ç½®å‚æ•°,æ‰€ä»¥ä¸¥æ ¼æŒ‰ç…§æ¯ä¸ªæ–¹æ³•çš„ä½ç½®ä¼ å€¼.æŸ¥çœ‹__init__æºç å¯å¾—: æƒ³è¦å¯¹è¯¥æ–¹æ³•æ“ä½œçš„æ•°æ®å±žæ€§å®žçŽ°åˆ é™¤,ä¿®æ”¹,æŸ¥çœ‹æ˜¯å’Œpropertyè£…é¥°å™¨ç»“åˆèµ·æ¥ä½¿ç”¨çš„: 123456789101112131415161718192021222324252627class People: def __init__(self,name): self.__name=name @property def name(self): return '&lt;name:%s&gt;' %self.__name @name.setter def name(self,new_name): if type(new_name) is not str: print('åå­—å¿…é¡»æ˜¯strç±»åž‹') return self.__name=new_name @name.deleter def name(self): del self.__nameobj=People('musibii')print(obj.name)# obj.name=123# print(obj.name)del obj.nameprint(obj.__dict__) è¿™æ ·æ‰çœŸæ­£å®žçŽ°äº†åœ¨ä¸æ”¹å˜æ“ä½œæ•°æ®å½¢å¼çš„åŸºç¡€ä¸Šä¿®æ”¹äº†æ•°æ®å±žæ€§çš„å€¼. ç»è¿‡æœ¬ç¯‡åšå®¢å¯çŸ¥:å°è£…å…¶å®žæ˜¯æ›´é«˜å±‚æ¬¡çš„ä¸€ä¸ªå‡½æ•°å½¢å¼,æˆ‘è§‰å¾—ç±»åŒç†,å¼€è¾Ÿè‡ªå·±çš„åç§°ç©ºé—´,å‡å°‘ä»£ç çš„è€¦åˆæ€§,æ›´ä¸€æ­¥è¯´,æ“ä½œæ•°æ®å°±æ˜¯æ“ä½œå†…å­˜ä¸­çš„æ•°æ®,å…¶å®žåœ¨å†…å­˜ä¸­æœ‰ä»€ä¹ˆå‡½æ•°,ç±»å’Œå¯¹è±¡å—?ä»¥æˆ‘çŽ°åœ¨çš„çŸ¥è¯†è§‰å¾—åº”è¯¥æ²¡æœ‰,å†…å­˜ä¸­å°±æ˜¯ä¸€å †å†·å†°å†°çš„æ•°æ®,é‚£ä¹ˆé™¤äº†äº§ç”Ÿæ–°çš„å¯¹è±¡(å¯å˜ä¸å¯å˜),å…¶å®žå†…å­˜ä¸­çš„å€¼å¾—å†…å­˜åœ°å€éƒ½æ²¡æœ‰å˜,åªæ˜¯ä¸€ä¸€ä¸ªæŒ‡å‘å¼•ç”¨å…³ç³»,å…¶å®žpythonä¸­ä¹Ÿæœ‰æŒ‡é’ˆæ¦‚å¿µçš„,åªæ˜¯æ²¡æœ‰cé‚£æ ·éœ€è¦è‡ªå·±ç»´æŠ¤ç½¢äº†,pythonçš„å˜é‡åå’Œå˜é‡åæŒ‡å‘çš„å¯¹è±¡çš„å…³ç³»å°±æ˜¯æˆ¿å­å’Œé—¨ç‰Œå·çš„å…³ç³»,æœ‰åå­—ä¾¿äºŽæ‰¾åˆ°æˆ¿å­,é‚£ä¹ˆæ²¡æœ‰åå­—çš„æˆ¿å­ä¸åƒçŽ°å®žç”Ÿæ´»ä¸­è¿˜å¯ä»¥å­˜åœ¨,æ²¡æœ‰åå­—å¯¹è¯¥æˆ¿å­çš„å¼•ç”¨,é‚£ä¹ˆpythonçš„å†…å­˜ç®¡ç†æœºåˆ¶å°±ä¼šæŠŠè¯¥æˆ¿å­æ‘§æ¯ä»¥ä¾¿å»ºä¸‹ä¸€ä¸ªæˆ¿å­. åœ¨pythonä¸­çš„ç±»å’Œè¯¥ç±»äº§ç”Ÿçš„å¯¹è±¡æ˜¯å¦‚ä½•ä¿å­˜çš„å‘¢? ç±»ä»¥åŠç±»ä¸­çš„æ–¹æ³•åœ¨å†…å­˜ä¸­åªæœ‰ä¸€ä»½,è€Œé€šè¿‡ç±»åˆ›å»ºçš„æ¯ä¸€ä¸ªå¯¹è±¡éƒ½éœ€è¦åœ¨å†…å­˜ä¸­ä¿å­˜ä¸€ä»½,é‚£ä¹ˆå¯¹è±¡ä¿å­˜çš„æ˜¯ä»€ä¹ˆå‘¢?å…¶å®žå°±åªä¿å­˜äº†æˆ¿å­çš„åœ°å€(ä¹Ÿå°±æ˜¯ç±»å¯¹è±¡æŒ‡é’ˆ),è¯¥å€¼æŒ‡å‘å½“å‰å¯¹è±¡çš„ç±». å½“é€šè¿‡å¯¹è±¡æ‰§è¡Œæ–¹æ³•æ—¶,è¿‡ç¨‹å¦‚ä¸‹: æ ¹æ®å½“å‰å¯¹è±¡ä¸­çš„ç±»å¯¹è±¡æŒ‡é’ˆ,æ‰¾åˆ°ç±»ä¸­çš„æ–¹æ³•; å°†å¯¹è±¡å½“åšå‚æ•°ä¼ ç»™æ–¹æ³•çš„ç¬¬ä¸€ä¸ªå‚æ•°(self),è¿™ä¸ªselfå°±æ˜¯é«˜åº¦å°è£…çš„ä¸€ä¸ªå¯¹è±¡(å’Œç±»çš„ç‰¹æ€§å°è£…ä¸ä¸€æ ·),ä¸€ä¸ªselféª‘å£«å¯ä»¥å®¹çº³ä¸‡ç‰©,åªè¦å†…å­˜å¯ä»¥è£…å¾—ä¸‹. pythonçš„é¢å‘å¯¹è±¡é‡Œé¢çš„å°è£…æ€æƒ³å¤ªåŽ‰å®³äº†.]]></content>
      <categories>
        <category>Python</category>
      </categories>
      <tags>
        <tag>é¢å‘å¯¹è±¡</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[pythonçš„åç§°ç©ºé—´]]></title>
    <url>%2F2018%2F10%2F23%2Fpython%E7%9A%84%E5%91%BD%E5%90%8D%E7%A9%BA%E9%97%B4%2F</url>
    <content type="text"><![CDATA[æœ€å¼€å§‹å¯¹åç§°ç©ºé—´çš„äº†è§£æ˜¯åœ¨å­¦ä¹ å‡½æ•°çš„æ—¶å€™,é‚£æ—¶å€™çŸ¥é“äº†ä½œç”¨åŸŸçš„æŸ¥æ‰¾é¡ºåº,ä»¥åŠå…¨å±€åç§°ç©ºé—´å’Œå±€éƒ¨åç§°ç©ºé—´,äº§ç”Ÿç–‘æƒ‘çš„æ—¶å€™ä¸ºå­¦é€’å½’çš„æ—¶å€™,é‚£æ—¶å€™è¿˜æ²¡æœ‰åç§°ç©ºé—´è¿™ä¸ªæ¦‚å¿µ,åªçŸ¥é“é€’å½’æœ‰ä¸ªæœ€å¤§æ·±åº¦,é‚£æ—¶å€™ä»¥åŽé€’å½’äº§ç”Ÿçš„åç§°ç©ºé—´æ˜¯ä¸€å±‚å¥—ä¸€å±‚çš„,ä»¥åŠç±»é‡Œé¢çš„åç§°ç©ºé—´,æ‰€ä»¥äº§ç”Ÿäº†æ·±ç©¶åç§°ç©ºé—´çš„æƒ³æ³•,è¿™æ‰è¯žç”Ÿäº†è¿™ç¯‡åšå®¢,æœ¬ç¯‡åšå®¢å€Ÿé‰´äº†pythonçš„å‘½åç©ºé—´çš„å†…å®¹,æœ¬äººå¯¹é‡Œé¢çš„ä¾‹å­éƒ½è¯•éªŒäº†å¹¶å‘çŽ°äº†ä¸€ä¸ªé”™è¯¯,åœ¨ç±»ä¸­å®šä¹‰çš„åˆ—è¡¨ç”Ÿæˆå¼äº§ç”Ÿçš„å‘½åç©ºé—´ä¹Ÿå¯ä»¥è®¿é—®åˆ°ç±»å±žæ€§. ä¾‹å­12345678910111213141516171819# a.pylis = ['musibii', 'thales']print('lis1', id(name))class A: def __init__(self): pass def func(self): global lis lis.append('maffia') print('lis', id(lis)) return lis print('lis2', lis)# b.pyfrom a import Aprint('b', A) æ‰§è¡Œ b æ–‡ä»¶çš„ç»“æžœä¸º: 123lis1 4421146632lis2 ['musibii', 'thales']b &lt;class 'a.A'&gt; å¯ä»¥å‘çŽ°,è™½ç„¶ b åªæ˜¯å¯¼å…¥äº† a ä¸­çš„ class A, ä½†å¯¼å…¥è¿™ä¸ªè¿‡ç¨‹æ‰§è¡Œäº†æ•´ä¸ª a æ–‡ä»¶,é‚£ä¹ˆæ˜¯å¦èƒ½å¤Ÿåœ¨ b ä¸­è®¿é—® a ä¸­çš„å…¨å±€å˜é‡ lis å‘¢? ä½¿ç”¨ from a import A çš„å½¢å¼åªæ˜¯æŠŠ A äº§ç”Ÿçš„åç§°ç©ºé—´å¤åˆ¶äº†ä¸€ä»½åˆ° b äº§ç”Ÿçš„åç§°ç©ºé—´ä¸­. Pythonçš„ä¸€äº›åŸºæœ¬æ¦‚å¿µå¯¹è±¡åœ¨Python ä¸­ä¸€åˆ‡çš†å¯¹è±¡,é‚£ä¹ˆå¯¹è±¡åˆ°åº•ä»£è¡¨ä»€ä¹ˆå‘¢?æˆ‘çš„ç†è§£æ˜¯åœ¨æ‰§è¡Œ py æ–‡ä»¶æ—¶äº§ç”Ÿçš„ä¸€åˆ‡å˜é‡éƒ½ç§°ä¸ºå¯¹è±¡,å¦‚æžœæŠŠå†…å­˜æ¯”ä½œä¸€åº§è¶…å¤§çš„æˆ¿å­çš„è¯,é‚£ä¹ˆå¯¹è±¡å°±æ˜¯è¿™åº§æˆ¿å­é‡Œçš„ç§Ÿå®¢,é‚£ä¹ˆè¿™ä¸ªç§Ÿå®¢éšèº«æºå¸¦çš„ä¸œè¥¿å°±æ˜¯è¿™ä¸ªå¯¹è±¡çš„ä¸€åˆ‡äº†,å¯¹è±¡éƒ½å…·æœ‰å”¯ä¸€çš„ id( å†…å­˜åœ°å€),ç±»åž‹( python3ä¸­ç»Ÿä¸€äº†ç±»å’Œç±»åž‹çš„æ¦‚å¿µ),ä»¥åŠå¯¹è±¡çš„å€¼,å¯¹è±¡ä¸€æ—¦å»ºç«‹, id ä¾¿ä¸ä¼šæ”¹å˜, id å°±æ˜¯å¯¹è±¡åœ¨å†…å­˜ä¸­çš„åœ°å€. ç”¨å¸¸è§çš„å¯¹è±¡æ¥ç±»æ¯”ä¸€ä¸‹è¿™ä¸‰ä¸ªæ¦‚å¿µ: å¸¸é‡ 123456789NAME = 'musibii'print(id(NAME))print(type(NAME))print(globals()) # æŸ¥çœ‹å…¨å±€åç§°ç©ºé—´# è¿è¡Œç»“æžœ4374978776&lt;class 'str'&gt;&#123;'__name__': '__main__', '__doc__': None, '__package__': None, '__loader__': &lt;_frozen_importlib_external.SourceFileLoader object at 0x104c45fd0&gt;, '__spec__': None, '__annotations__': &#123;&#125;, '__builtins__': &lt;module 'builtins' (built-in)&gt;, '__file__': '/Users/jingxing/PycharmProjects/pythonå…¨æ ˆ/ä½œä¸š/day27/duixiang.py', '__cached__': None, 'NAME': 'musibii'&#125; å‡ºæ¥çš„ç»“æžœåˆ†åˆ«æ˜¯ id,ç±»åž‹ä»¥åŠå­—å…¸é‡Œé¢æœ€åŽä¸€ä¸ªé”®å€¼å¯¹å¯¹åº”çš„å°±æ˜¯ NAME çš„å€¼. å‡½æ•° 1234567891011121314151617def func(): name = 'musibii' def inner(): age = 18 print('age', age) inner() print(locals()) # æƒ³è¦æŸ¥çœ‹å‡½æ•°é‡Œé¢çš„å€¼,å¿…é¡»åœ¨å‡½æ•°å†…éƒ¨æŸ¥çœ‹,å› ä¸ºå‡½æ•°æ‰§è¡Œå®Œæˆä¼šé‡Šæ”¾å†…å­˜èµ„æºprint(id(func))print(type(func))func()# è¿è¡Œç»“æžœ4529634840&lt;class 'function'&gt;age 18&#123;'inner': &lt;function func.&lt;locals&gt;.inner at 0x10e1cac80&gt;, 'name': 'musibii'&#125; id å’Œç±»åž‹ä¸å¿…å¤šè¯´,å‡½æ•°å¯¹åº”çš„å±žæ€§å€¼é‡Œé¢ä¸åŒ…æ‹¬åµŒå¥—å‡½æ•°é‡Œé¢çš„å±žæ€§(è¯´æ˜Ž:åç§°ç©ºé—´æ˜¯ç›¸äº’ç‹¬ç«‹çš„) ç±» 123456789101112131415161718class Cls: school = 'hashangda' def __init__(self, name, age): self.name = name self.age = age def tell_info(self): print('%s : %s' % (self.name, self.age))print(id(Cls))print(type(Cls))print(Cla.__dict__)# è¿è¡Œç»“æžœ140390381504248&lt;class 'type'&gt;&#123;'__module__': '__main__', 'school': 'hashangda', '__init__': &lt;function Cls.__init__ at 0x10648eae8&gt;, 'tell_info': &lt;function Cls.tell_info at 0x10648ebf8&gt;, '__dict__': &lt;attribute '__dict__' of 'Cls' objects&gt;, '__weakref__': &lt;attribute '__weakref__' of 'Cls' objects&gt;, '__doc__': None&#125; ç±»çš„ id ä¸ºå†…å­˜åœ°å€,ç±»åž‹ä¸ºtypeç±»åž‹,åœ¨ type é‡Œé¢ type å°±æ˜¯ç±»åž‹çš„æ„æ€,æ‰€ä»¥è¯´ python é‡Œæ‰€æœ‰çš„ç±»çš„ç±»åž‹éƒ½æ˜¯ç±»åž‹,è€Œç±»é‡Œé¢çš„å±žæ€§å°±æ˜¯ç±»çš„å€¼äº†. python é‡Œé¢æ‰€æœ‰çš„å¯¹è±¡éƒ½å…·æœ‰çš„å¹¶ä¸”æ ¹ç¡®å®šèº«ä»½æœ‰å…³çš„å€¼ä¸º id, ç±»åž‹å’Œå€¼äº†.åç§°ä¸æ˜¯å¯¹è±¡çš„å±žæ€§,åç§°åªæ˜¯æŒ‡å‘å¯¹è±¡,å› ä¸ºå¯ä»¥å¤šä¸ªåç§°æŒ‡å‘åŒä¸€ä¸ªå¯¹è±¡. æ ‡è¯†ç¬¦åœ¨å¯¹è±¡é‡ŒæŠŠå˜é‡åå«ä¸ºåç§°å…¶å®žæ˜¯ä¸å‡†ç¡®çš„,è¿™äº›åç§°éƒ½æœ‰ä¸€ä¸ªå…±åŒçš„åå­—: identifier(å’Œ id æ˜¯ä¸¤ä¸ªæ„æ€),ä¸­æ–‡åä¸ºâ€™æ ‡è¯†ç¬¦â€™. æ ‡è¯†ç¬¦:åœ¨ Pythonä¸­,å„ç±»å¯¹è±¡çš„åç§°,æ¯”å¦‚å‡½æ•°å,æ–¹æ³•å,ç±»å,å˜é‡å.å¸¸é‡åéƒ½ç§°ä¸ºæ ‡è¯†ç¬¦. åœ¨ Python ä¸­èµ‹å€¼å¹¶ä¸ä¼šç›´æŽ¥å¤åˆ¶æ•°æ®,è€Œåªæ˜¯å°†åç§°ç»‘å®šåˆ°å¯¹è±¡,å¯¹è±¡æœ¬èº«ä¸éœ€è¦çŸ¥é“å’Œå…³å¿ƒè‡ªå·±çš„æ ‡è¯†ç¬¦å«ä»€ä¹ˆ,ä¸€ä¸ªå¯¹è±¡ç”šè‡³å¯ä»¥æŒ‡å‘ä¸åŒçš„æ ‡è¯†ç¬¦.çœŸæ­£ç®¡ç†è¿™äº›æ ‡è¯†ç¬¦çš„äº‹ç‰©æ˜¯â€™åç§°ç©ºé—´â€™. åç§°ç©ºé—´åç§°ç©ºé—´(NameSpace):åå­—(æ ‡è¯†ç¬¦)åˆ°å¯¹è±¡çš„æ˜ å°„. ç®€å•æ¥è¯´,åç§°ç©ºé—´å¯ä»¥ç†è§£ä¸ºè®°å½•å¯¹è±¡å’Œå¯¹è±¡åå­—å¯¹åº”å…³ç³»çš„ç©ºé—´,åœ¨å¯¹è±¡é‚£é‡ŒæŸ¥çœ‹çš„å¯¹è±¡çš„å€¼å°±æ˜¯åç§°ç©ºé—´,è¿™æ˜¯ä¸€ä¸ªå­—å…¸,ä¸€ä¸ªå‘½åç©ºé—´å°±æ˜¯åå­—åˆ°å¯¹è±¡çš„æ˜ å°„,æ ‡è¯†ç¬¦æ˜¯é”®,å¯¹è±¡åˆ™æ˜¯å€¼. ä½œç”¨åŸŸä¸Žåç§°ç©ºé—´ç›¸å¯¹çš„ä¸€ä¸ªæ¦‚å¿µå°±æ˜¯â€™ä½œç”¨åŸŸâ€™,ä½œç”¨åŸŸæœ¬è´¨æ˜¯ä¸€å—æ–‡æœ¬åŒºåŸŸ, Python é€šè¿‡è¯¥æ–‡æœ¬åŒºåŸŸå¯ä»¥ç›´æŽ¥è®¿é—®ç›¸åº”çš„åç§°ç©ºé—´. Python ä¸­ä¸åŠ  . çš„è®¿é—®ä¸ºç›´æŽ¥è®¿é—®,åä¹‹ä¸ºå±žæ€§è®¿é—®. å› æ­¤å¯ä»¥ç®€å•çš„å°†ä½œç”¨åŸŸç†è§£ä¸ºç›´æŽ¥è®¿é—®åç§°ç©ºé—´çš„ä¸€ç§å®žçŽ°,å…·ä½“è€Œè¨€: ä½œç”¨åŸŸå†…ç›¸åº”çš„åç§°ç©ºé—´å¯ä»¥è¢«ç›´æŽ¥è®¿é—®; åªæœ‰ä½œç”¨åŸŸå†…çš„åç§°ç©ºé—´æ‰å¯ä»¥è¢«ç›´æŽ¥è®¿é—®(å› æ­¤å¹¶ä¸æ˜¯æ‰€æœ‰çš„åç§°ç©ºé—´éƒ½å¯ä»¥è¢«ç›´æŽ¥è®¿é—®). LEGBLEGB åç§°ç©ºé—´è¿™å››ç±»åç§°ç©ºé—´å¯ä»¥ç®€è®°ä¸º LEGB: å±€éƒ¨åç§°ç©ºé—´( local): æŒ‡çš„æ˜¯ä¸€ä¸ªå‡½æ•°æˆ–è€…ä¸€ä¸ªç±»æ‰€å®šä¹‰çš„åç§°ç©ºé—´:åŒ…æ‹¬å‡½æ•°çš„å‚æ•°,å±€éƒ¨å˜é‡,ç±»çš„å±žæ€§ç­‰; é—­åŒ…åç§°ç©ºé—´(enclosing function):é—­åŒ…å‡½æ•°çš„åç§°ç©ºé—´( python3å¼•å…¥); å…¨å±€åç§°ç©ºé—´( global):è¯»å…¥ä¸€ä¸ªæ¨¡å—(ä¹Ÿå³ä¸€ä¸ª. py æ–‡ä»¶)åŽäº§ç”Ÿçš„åç§°ç©ºé—´; å†…å»ºåç§°ç©ºé—´(builtin):Python è§£é‡Šå™¨å¯åŠ¨æ—¶è‡ªåŠ¨è½½å…¥__builtin__ æ¨¡å—åŽå½¢æˆçš„åç§°ç©ºé—´;åƒ str/list/dictâ€¦ ç­‰å†…ç½®å¯¹è±¡çš„åç§°å°±å¤„äºŽè¿™é‡Œ. ä¸¾ä¾‹: 123456789# test.pyv1 = 'global var'def func(v1): v2 = 'local var' def inner(): v3 = v2 + v return v3 return inner å†…å»ºçš„åæ­£æ¯æ¬¡éƒ½ä¸€æ ·,åœ¨è¿™é‡Œçš„ä¸‰ä¸ªåç§°ç©ºé—´é‡Œé¢çš„åç§°ä¸º: â€˜v1â€™ ä¸ºå…¨å±€å˜é‡ v1 çš„åå­—,å…¶æ‰€å¤„çš„åç§°ç©ºé—´ä¸ºå…¨å±€åç§°ç©ºé—´;éœ€è¦æ³¨æ„çš„æ˜¯å…¨å±€åç§°ç©ºé—´åŒ…æ‹¬ â€˜funcâ€™ ä½†ä¸åŒ…æ‹¬ func çš„å‚æ•°å’Œå†…éƒ¨å˜é‡; func åŒ…æ‹¬ â€˜vâ€™, â€˜v2â€™, å’Œ â€˜innerâ€™åç§°çš„å±€éƒ¨åç§°ç©ºé—´; æ‰§è¡Œ func åŽ, func çš„ä½œç”¨åŸŸé‡Šæ”¾,å¹¶è¿”å›žç»‘å®šäº† v å’Œ v2å˜é‡çš„é—­åŒ…å‡½æ•° inner, æ­¤æ—¶é—­åŒ…å‡½æ•°çš„åç§°ç©ºé—´å³ä¸ºé—­åŒ…åç§°ç©ºé—´,å› æ­¤å±€éƒ¨åç§°ç©ºé—´å’Œé—­åŒ…åç§°ç©ºé—´æ˜¯ç›¸å¯¹è€Œè¨€çš„,å¯¹äºŽçˆ¶å‡½æ•° func è€Œè¨€,ä¸¤è€…å…·æœ‰äº§ç”Ÿæ—¶é—´ä¸Šçš„å·®å¼‚. LEGB è®¿é—®è§„åˆ™é€šè¿‡ä¸Šé¢çš„ä¾‹å­,å‘çŽ° LEGB å››ç±»åç§°ç©ºé—´æœ¬èº«å…·æœ‰æ˜Žæ˜¾çš„å†…å¤–å±‚çº§æ¦‚å¿µ,è€Œè¿™ç§å±‚çº§æ¦‚å¿µæ­£æ˜¯æž„å»ºä½œç”¨åŸŸçš„å‰æ:ä½œç”¨åŸŸä¾æ®è¿™ç§å±‚çº§æ¦‚å¿µå°†ä¸åŒç±»åž‹çš„åç§°ç©ºé—´ç»„ç»‡èµ·æ¥å¹¶åˆ’å½’åˆ°ä¸åŒå±‚çº§çš„ä½œç”¨åŸŸ,ç„¶åŽå®šä¹‰å¥½ä¸åŒå±‚çº§ä½œç”¨åŸŸä¹‹é—´çš„è®¿é—®è§„åˆ™,ä»Žè€Œå®žçŽ°åç§°ç©ºé—´çš„ç›´æŽ¥è®¿é—®. LEGB çš„è®¿é—®è§„åˆ™:**åŒæ ·çš„æ ‡è¯†ç¬¦åœ¨å„å±‚åç§°ç©ºé—´å¯ä»¥è¢«é‡å¤ä½¿ç”¨è€Œä¸ä¼šå‘ç”Ÿå†²çª,ä½† Python å¯»æ‰¾ä¸€ä¸ªæ ‡è¯†ç¬¦çš„è¿‡ç¨‹æ€»æ˜¯ä»Žå½“å‰å±‚å¼€å§‹é€å±‚ç½‘ä¸Šæ‰¾,ç›´åˆ°é¦–æ¬¡æ‰¾åˆ°è¿™ä¸ªæ ‡è¯†ç¬¦ä¸ºæ­¢. 123456789101112131415# main.pyv1 = 1v2 = 3def func(): v1 = 2 print(v1) print(v2) func()print(v1)# è¿è¡Œç»“æžœ231 å…¨å±€å˜é‡å’Œå‡½æ•° func éƒ½å®šä¹‰äº†å˜é‡ v1,åœ¨å‡½æ•°å†…éƒ¨ä¼šä¼˜å…ˆé€‰æ‹©è‡ªå·±å±€éƒ¨åç§°ç©ºé—´å†…çš„å˜é‡ v1,å¯¹äºŽ func ä¸­æœªå®šä¹‰çš„å˜é‡ v2,Python ä¼šå‘ä¸ŠæŸ¥æ‰¾å…¨å±€åç§°ç©ºé—´,è¯»å–å…¨å±€å˜é‡åŽæ‰“å°è¾“å‡º. global å’Œ nonlocal è¯­å¥global å’Œ nonlocal çš„ä½œç”¨å¯¹äºŽä¸Šå±‚åç§°ç©ºé—´é‡Œçš„å˜é‡, python å…è®¸ç›´æŽ¥è¯»å–,ä½†æ˜¯ä¸å¯ä»¥åœ¨å†…å±‚ä½œç”¨åŸŸç›´æŽ¥æ”¹å†™ä¸Šå±‚å˜é‡,åœ¨è¿™æ–¹é¢å¾ˆæ˜Žæ˜¾çš„åŒºåˆ«å°±æ˜¯åœ¨é—­åŒ…å‡½æ•°é‡Œ. 1234567891011# e.pygv = ['a', 'global', 'var']def func(v): gv = ['gv'] + gv lv = [] def inner(): lv = lv + [v] gv.insert(1, lv[0]) return return inner å®žé™…è°ƒç”¨ func å‡½æ•°åŽ,ä¸Šé¢ä¸¤å¤„å¯¹ gv å’Œ lv è¿›è¡Œèµ‹å€¼çš„æ“ä½œéƒ½ä¼šå‘ç”ŸUnboundLocalError:å› ä¸º python åœ¨æ‰§è¡Œå‡½æ•°å‰,ä¼šé¦–å…ˆç”Ÿæˆå„å±‚åç§°ç©ºé—´å’Œä½œç”¨åŸŸ,å› æ­¤ python ä¼šåœ¨æ‰§è¡Œèµ‹å€¼å‰å°† func å†…çš„ gv å’Œ lv å†™å…¥å±€éƒ¨åç§°ç©ºé—´å’Œé—­åŒ…åç§°ç©ºé—´,å½“ python æ‰§è¡Œèµ‹å€¼è¯­å¥çš„æ—¶å€™,ä¼šå‘çŽ°åœ¨å±€éƒ¨ä½œç”¨åŸŸ,é—­åŒ…ä½œç”¨åŸŸå†…å‘çŽ°å±€éƒ¨åç§°ç©ºé—´å’Œé—­åŒ…åç§°ç©ºé—´å†…å·²ç»å…·æœ‰ gv å’Œ lv æ ‡è¯†ç¬¦,ä½†æ˜¯è¿™ä¸¤ä¸ªéžå…¨å±€æ ‡è¯†ç¬¦åœ¨èµ‹å€¼è¯­å¥æ‰§è¡Œä¹‹å‰å¹¶æ²¡æœ‰è¢«èµ‹å€¼,ä¹Ÿå³æ²¡æœ‰å¯¹è±¡ä¸Žæ ‡è¯†ç¬¦å…³è”,å› æ­¤æ— æ³•å‚ä¸Žèµ‹å€¼è¿ç®—,ä»Žè€Œè§¦å‘åœ¨å¼•ç”¨ä¹‹å‰æœªèµ‹å€¼çš„é”™è¯¯;ä½†è¿™æ®µç¨‹åºçš„æœ¬æ„æ˜¯ä¸ºäº†è®©å…¨å±€å˜é‡ gv å’Œå±€éƒ¨å˜é‡ lv å‚ä¸Žè¿ç®—,ä¸ºäº†é¿å…ç±»ä¼¼çš„æƒ…å†µå‘ç”Ÿ,Python å¼•å…¥äº†globalå’Œnonlocalè¯­å¥æ¥è¯´æ˜Žå±€éƒ¨åç§°ç©ºé—´å’Œé—­åŒ…åç§°ç©ºé—´ä½¿ç”¨çš„æ ‡è¯†ç¬¦åˆ†åˆ«æ¥è‡ªå…¨å±€åç§°ç©ºé—´å’Œå±€éƒ¨åç§°ç©ºé—´,å£°æ˜Žä¹‹åŽå°±å¯ä»¥åœ¨ func å’Œ inner åç§°ç©ºé—´é‡Œç›´æŽ¥æ”¹å†™ä¸Šå±‚åç§°ç©ºé—´å†…çš„gvå’Œlvçš„å€¼äº†. 123456789101112131415# f.pygv = ['a', 'global', 'var']def func(v): global gv gv = ['gv'] + gv lv = [] print(id(lv)) def inner(): nonlocal lv lv = lv + [v] print(id(lv)) gv.insert(1, lv[0]) return return inner è¿™æ ·å°±å¯ä»¥æ­£å¸¸ä¿®æ”¹äº†.åŽŸåšå®¢è¯´ lv çš„ id éƒ½æ˜¯ä¸€æ ·çš„,åœ¨ mac ä¸Šç‰ˆæœ¬ä¸º3..6.6æµ‹è¯•å‘çŽ°ä¸æ˜¯ä¸€æ ·çš„. 1234# è¿è¡Œç»“æžœ44166001364416615624# ç¡®å®žæ˜¯ä½¿ç”¨äº†ä¸Šå±‚åç§°ç©ºé—´çš„å˜é‡,ä½†æ˜¯é‡æ–°èµ‹å€¼åŽ, gv å’Œä¸Šå±‚çš„ gv å·²ç»ä¸æ˜¯åŒä¸€ä¸ªäº†, lv ä¹Ÿä¸€æ ·,æ‰€ä»¥å†…å­˜åœ°å€éƒ½å‘ç”Ÿå˜åŒ–äº†. å€Ÿå£³é‚£ä¹ˆä¸ç”¨ global å’Œnonlocal å¯ä»¥è¾¾åˆ°ä¸Šé¢çš„ç›®çš„å—? 12345678910111213# g.pygv = ['a', 'global', 'var']def func(v): gv.insert(0, 'gv') lv = [] print(id(lv)) def inner(): lv.append(v) print(id(lv)) gv.insert(1, lv[0]) return gv return inner çœ‹ä½œè€…çš„è¿™ä¸ªè§£é‡Šä¸ºå€Ÿå£³,æ„Ÿè§‰å¾ˆå½¢è±¡,è¿™ä¸ªåŽŸå› åº”è¯¥ç”¨åˆ—è¡¨å¼å¯å˜ç±»åž‹æ¥è§£é‡Šæ¯”è¾ƒå¥½, insert å’Œ append çš„æ“ä½œå¹¶æ²¡æœ‰å¯¹åˆ—è¡¨è¿›è¡Œèµ‹å€¼æ“ä½œ,è€Œæ˜¯å¯¹åˆ—è¡¨è¿™ä¸ªå®¹å™¨é‡Œé¢çš„ä¸œè¥¿ä¿®æ”¹äº†å¹¶ä¸æ˜¯ä¿®æ”¹åˆ—è¡¨,æˆ‘ä»¬éƒ½çŸ¥é“ç”µè„‘å†…çš„å†…å­˜æ°¸è¿œéƒ½ä¸ä¼šæ”¹å˜,ä»–å°±æ˜¯ä¸ªè¶…å¤§çš„å®¹å™¨,ç”¨æ¥è£…ä¸œè¥¿çš„,å‡å¦‚çŽ°åœ¨æœ‰ä¸ªåˆ—è¡¨,å®ƒçš„å®¹é‡å’Œå†…å­˜ä¸€æ ·å¤§,é‚£ä¹ˆæ˜¯ä¸æ˜¯å¥½ç†è§£ç‚¹,æˆ‘ä»¬åœ¨å’Œå†…å­˜ä¸€æ ·çš„åˆ—è¡¨é‡Œæ“ä½œä¼šæ”¹å˜è¿™ä¸ªåˆ—è¡¨å—?ä¸ä¼š. åœ¨ global å’Œ nonlocal çš„ä½œç”¨å°±æ˜¯æŠŠä¸Šå±‚æœ‰çš„æ ‡è¯†ç¬¦å’Œå¯¹è±¡å¤åˆ¶ä¸€ä»½åˆ°ä¸‹å±‚åç§°ç©ºé—´ ä¸ºä»€ä¹ˆåœ¨ä¸‹å±‚ä½œç”¨åŸŸå¯ä»¥ä½¿ç”¨è¯»å–ä¸Šå±‚ä½œç”¨åŸŸçš„å€¼è€Œä¸å¯ä»¥ä½¿ç”¨å®ƒçš„å€¼å‘¢? è¿™æ˜¯å› ä¸º python çš„ä¸¤ä¸ªæ¦‚å¿µä¸åŒçš„åŽŸå› ,ä½œç”¨åŸŸå’Œåç§°ç©ºé—´çš„åŒºåˆ«å¯¼è‡´çš„.æ ‡è¯†ç¬¦çš„æŸ¥æ‰¾é¡ºåºæ˜¯ä»Žå½“å‰å±‚ä¸€å±‚å±‚å‘å¤–æŸ¥æ‰¾çš„,è¿™æ˜¯æ ¹æ®ä½œç”¨åŸŸæ¥æŸ¥æ‰¾çš„,é‚£ä¹ˆåç§°ç©ºé—´å‘¢?ä½œç”¨åŸŸå’Œåç§°ç©ºé—´çš„åœ¨æ‰§è¡Œ py æ–‡ä»¶å°±å·²ç»äº§ç”Ÿäº†,å…¶å®žå¯ä»¥ç†è§£è¿™æ˜¯ä¸€ä¸ªä¸œè¥¿,å…¶å®žé‡Œé¢ä¿å­˜çš„ä¿¡æ¯(é™¤äº†æŸäº›å¯èƒ½æœ‰ç‰¹æ®Šå«ä¹‰çš„å€¼ä¸ä¸€æ ·å¤–)éƒ½ä¸€æ ·,ä¸ä¸€æ ·çš„æ˜¯ä½œç”¨äºŽé‡Œé¢åªä¿å­˜äº†æ ‡è¯†ç¬¦,è€Œåç§°ç©ºé—´é‡Œä¸ä»…ä¿å­˜äº†æ ‡è¯†ç¬¦è¿˜ä¿å­˜äº†æ ‡è¯†ç¬¦å¯¹åº”çš„å¯¹è±¡.æŸ¥æ‰¾å€¼çš„é¡ºåºæ˜¯æ ¹æ®ä½œç”¨åŸŸæ¥çš„,ä½¿ç”¨å€¼å°±åªèƒ½ä½¿ç”¨è‡ªå·±åç§°ç©ºé—´é‡Œçš„å€¼,åç§°ç©ºé—´é‡Œä¿å­˜çš„æ˜¯æ ‡è¯†ç¬¦å’Œæ ‡è¯†ç¬¦å¯¹åº”çš„å¯¹è±¡,åªæœ‰æœ¬å±‚åç§°ç©ºé—´é‡Œæœ‰è¿™ä¸ªæ ‡è¯†ç¬¦å’Œæ ‡è¯†ç¬¦å¯¹åº”çš„å¯¹è±¡æ‰å¯ä»¥ä½¿ç”¨(è¯»,ä½¿ç”¨). é‚£ä¹ˆçŽ°åœ¨å¾ˆæ˜Žç™½ä¸ºä»€ä¹ˆä¸èƒ½ç›´æŽ¥åœ¨ä¸‹å±‚åç§°ç©ºé—´ç›´æŽ¥ä½¿ç”¨ä¸Šå±‚åç§°ç©ºé—´é‡Œçš„åç§°äº†. global å’Œ nonlocal è¯­å¥å¯¹æ ‡è¯†ç¬¦åˆ›å»ºçš„ä¸åŒå½±å“éœ€è¦æ³¨æ„çš„æ˜¯: global è¯­å¥åªæ˜¯å£°æ˜Žè¯¥æ ‡è¯†ç¬¦å¼•ç”¨çš„å˜é‡æ¥è‡ªäºŽå…¨å±€å˜é‡,ä½†å¹¶ä¸èƒ½ç›´æŽ¥åœ¨å½“å‰å±‚åˆ›å»ºè¯¥æ ‡è¯†ç¬¦;nonlocal è¯­å¥åˆ™ä¼šåœ¨å­å‡½æ•°åç§°ç©ºé—´åˆ›å»ºä¸Žçˆ¶å‡½æ•°å˜é‡åŒåçš„æ ‡è¯†ç¬¦. 123456789101112131415# j.pygv = ['a global var']def func(): global lv = 'a local var' print(locals()) def inner(): nonlocal lv global gv print(locals()) return inner# è¿è¡Œç»“æžœ&#123;'lv': 'a local var'&#125;&#123;'lv': 'a local var'&#125; è¿è¡Œ func å‡½æ•°åŽ global è¯­å¥å¹¶æœªå°† â€˜ gv â€˜å˜é‡å¼•å…¥å±€éƒ¨åç§°ç©ºé—´,æ‰§è¡Œé—­åŒ…å‡½æ•°åŽ,â€™ localâ€™è¯­å¥å°†çˆ¶å‡½æ•°å˜é‡â€™lvâ€™å¼•å…¥é—­åŒ…åç§°ç©ºé—´. ä¹‹æ‰€ä»¥ nonlocal å’Œ global è¯­å¥çš„å¤„ç½®ä¸åŒ,åœ¨äºŽå…¨å±€å˜é‡çš„ä½œç”¨åŸŸç”Ÿå­˜æœŸå¾ˆé•¿,åœ¨æ¨¡å—å†…éšæ—¶éƒ½å¯ä»¥è®¿é—®,è€Œçˆ¶ç±»å‡½æ•°çš„å±€éƒ¨ä½œç”¨åŸŸåœ¨çˆ¶å‡½æ•°æ‰§è¡Œå®Œæ¯•åŽä¾¿ä¼šç›´æŽ¥é‡Šæ”¾,å› æ­¤ nonlocal è¯­å¥å¿…é¡»å°†çˆ¶å‡½æ•°å˜é‡çš„æ ‡è¯†ç¬¦å†™å…¥é—­åŒ…åç§°ç©ºé—´. åç§°ç©ºé—´çš„ç”Ÿå‘½å‘¨æœŸåˆ›å»ºè§„åˆ™è¿˜æœ‰ä¸€ä¸ªé‡è¦çš„é—®é¢˜æ²¡æœ‰è§£å†³:â€™æ ‡è¯†ç¬¦ä¸æ˜¯ä¸€å¼€å§‹å°±å­˜åœ¨åç§°ç©ºé—´çš„,åç§°ç©ºé—´ä¹Ÿä¸æ˜¯å¹³ç™½æ— æ•…äº§ç”Ÿçš„,é‚£ä¹ˆåç§°ç©ºé—´æ˜¯åœ¨ä»€ä¹ˆæ—¶å€™è¢«åˆ›å»º?åˆæ˜¯ä»€ä¹ˆæ—¶å€™è¢«åˆ é™¤çš„å‘¢?â€™ åç§°ç©ºé—´äº§ç”Ÿé¡ºåº: å†…å»ºåç§°ç©ºé—´åœ¨ Python è§£é‡Šå™¨å¯åŠ¨æ—¶åˆ›å»º,ä¹‹åŽä¼šä¸€ç›´å­˜åœ¨; æ¨¡å—çš„å…¨å±€åç§°ç©ºé—´åœ¨æ¨¡å—å®šä¹‰æ—¶è¢«è¯»å…¥åˆ›å»º,é€šå¸¸æ¨¡å—åç§°ç©ºé—´ä¹Ÿä¼šä¿æŒåˆ°è§£é‡Šå™¨é€€å‡º; å‡½æ•°è°ƒç”¨æ—¶äº§ç”Ÿæ–°çš„å±€éƒ¨åç§°ç©ºé—´,å‡½æ•°è¿”å›žç»“æžœ,æŠ›å‡ºå¼‚å¸¸æ—¶é‡Šæ”¾åç§°ç©ºé—´,æ¯ä¸€æ¬¡é€’å½’éƒ½äº§ç”Ÿä¸€ä¸ªåç§°ç©ºé—´; æ ‡è¯†ç¬¦äº§ç”Ÿåœ°ç‚¹å†³å®šæ ‡è¯†ç¬¦æ‰€å¤„çš„åç§°ç©ºé—´. ç±»çš„åç§°ç©ºé—´é¦–æ¬¡,å‡½æ•°å’Œç±»æ‰§è¡Œæ—¶éƒ½ä¼šäº§ç”Ÿå±€éƒ¨åç§°ç©ºé—´,ä½†ç±»çš„æ‰§è¡Œæœºåˆ¶ä¸åŒäºŽå‡½æ•°; 123456789101112131415# i.pydef a(): print('function')class A(): print(1) class B(): print(2) class C(): print(3) # è¿è¡Œç»“æžœ123 å¦‚ä¸Š,ç±»å°±æ˜¯ä¸€ä¸ªå¯æ‰§è¡Œçš„ä»£ç å—,åªè¦è¯¥ç±»è¢«åŠ è½½,å°±ä¼šè¢«æ‰§è¡Œ,è¿™ä¸€ç‚¹ä¸åŒäºŽå‡½æ•°. ç±»ä¹‹æ‰€ä»¥è¿™æ ·è®¾è®¡çš„åŽŸå› åœ¨äºŽ:ç±»æ˜¯åˆ›å»ºå…¶ä»–å®žä¾‹(å£°ç§°å…¶ä»–çš„ç±»æˆ–è€…å…·ä½“çš„å¯¹è±¡)çš„å¯¹è±¡,å› æ­¤å¿…é¡»åœ¨å®žä¾‹ä¹‹å‰è¢«åˆ›å»º,è€Œç±»åˆå¯èƒ½æ¶‰åŠåˆ°ä¸Žå…¶ä»–ç±»çš„ç»§æ‰¿,é‡è½½ç­‰ä¸€ç³»åˆ—é—®é¢˜,æ•…åœ¨ä»£ç åŠ è½½æ—¶å°±è¢«åˆ›å»ºåˆ©äºŽæé«˜æ•ˆçŽ‡å’Œé™ä½Žé€»è¾‘å¤æ‚åº¦. å…¶æ¬¡,ä¸Žå‡½æ•°ä¸åŒçš„æ˜¯,ç±»çš„å±€éƒ¨åç§°ç©ºé—´å¹¶éžä½œç”¨äºŽ; 123456class A(): a = 1 b = [a + i for i in range(3)] # è¿è¡Œç»“æžœNameError: name 'a' is not defined æ‰§è¡Œä¸Šæ®µä»£ç ,å¯ä»¥å‘çŽ°ç±» A å†…åˆ—è¡¨æŽ¨å¯¼å¼æ— æ³•è°ƒå– a çš„å€¼,ä½†å‡½æ•°å¯ä»¥. 123456def func(): a = 1 b = [a + i for i in range(3)] print(b)func() #[1, 2, 3] å› æ­¤, A ä¸­çš„ a ä¸åŒäºŽ func ä¸­çš„ a åœ¨å±€éƒ¨åç§°ç©ºé—´å¯ä»¥è¢«ä»»æ„è¯»å–,ä¹‹æ‰€ä»¥è¯´æ˜¯â€™ä¸å¯ä»¥è¢«ä»»æ„â€™è¯»å–è€Œä¸æ˜¯â€™ä¸å¯è¢«è¯»å–â€™,åŽŸå› åœ¨äºŽåœ¨ç±» A çš„å±€éƒ¨åç§°ç©ºé—´å†…, a å…¶å®žåœ¨ä¸€å®šç¨‹åº¦ä¸Šå¯ä»¥è¢«è¯»å–çš„: 123456class A(): a = 1 c = a + 2# è¿è¡Œç»“æžœ3 è€Œä¸Šä¾‹ä¸­ b çš„èµ‹å€¼æ“ä½œä¸èƒ½è¢«æ‰§è¡Œ,åŽŸå› åœ¨äºŽåˆ—è¡¨æŽ¨å¯¼å¼ä¼šåˆ›å»ºè‡ªå·±çš„å±€éƒ¨åç§°ç©ºé—´,å› æ­¤éš¾ä»¥è®¿é—®åˆ° a??????? ä¸ºä»€ä¹ˆè®¿é—®ä¸åˆ° a??? ç¼–è¯‘ä¸Žå±€éƒ¨åç§°ç©ºé—´Python æ˜¯åŠ¨æ€è¯­è¨€,å¾ˆå¤šè¡Œä¸ºæ˜¯åŠ¨æ€å‘ç”Ÿçš„,ä½† Python è‡ªèº«ä¹Ÿåœ¨ä¸æ–­è¿›æ­¥,æ¯”å¦‚ä¸ºäº†æé«˜æ•ˆçŽ‡,æœ‰äº›è¡Œä¸ºä¼šåœ¨ç¼–è¯‘æ—¶å€™å®Œæˆ,å±€éƒ¨å˜é‡çš„åˆ›å»ºå°±æ˜¯å¦‚æ­¤. 123456def func(): a = 1 def inner(): print(a) # error a = 2 # error inner() ä¸Šæ®µç¨‹åºè¿˜æœªæ‰§è¡Œ,å°±æç¤ºå­˜åœ¨è¯­æ³•é”™è¯¯,åŽŸå› åœ¨äºŽ Python è§£é‡Šå™¨å‘çŽ° inner å†…å­˜åœ¨è‡ªèº«çš„ a å˜é‡,ä½†åœ¨å£°æ˜Žä¹‹å‰å°±è¢« print äº†. æ€»ç»“1ã€ä¸ºä»€ä¹ˆ b.py åªæ˜¯å¯¼å…¥ a.py ä¸­çš„ class A,å´æ‰§è¡Œäº†æ•´ä¸ª a.py æ–‡ä»¶?ç­”ï¼šå› ä¸º Python å¹¶ä¸çŸ¥é“ class A åœ¨ a.py æ–‡æ¡£çš„ä½•å¤„ï¼Œä¸ºäº†èƒ½å¤Ÿæ‰¾åˆ° class Aï¼ŒPython éœ€è¦æ‰§è¡Œæ•´ä¸ªæ–‡æ¡£ã€‚2ã€ä¸ºä»€ä¹ˆ b.py çš„å¯¼å…¥æ‰§è¡Œäº†æ•´ä¸ª a.py æ–‡æ¡£ï¼Œå´åœ¨ b ä¸­éš¾ä»¥è°ƒç”¨ a çš„å…¨å±€å˜é‡ vaï¼Ÿç­”ï¼šPython çš„å…¨å±€å˜é‡æŒ‡çš„æ˜¯æ¨¡å—å…¨å±€ï¼Œå› æ­¤ä¸å¯ä»¥è·¨æ–‡æ¡£ï¼Œå› æ­¤ global è¯­å¥ä¹Ÿæ˜¯ä¸å¯ä»¥è·¨æ–‡æ¡£çš„ã€‚å¦å¤–ï¼Œ b åªæ˜¯å¯¼å…¥äº† a çš„ class Aï¼Œå› æ­¤å¹¶ä¸ä¼šå¯¼å…¥ a ä¸­æ‰€æœ‰çš„æ ‡è¯†ç¬¦ï¼Œæ‰€ä»¥ ç±»ä¼¼a.va è¿™æ ·çš„è°ƒç”¨ä¹Ÿæ˜¯ä¸èµ·ä½œç”¨çš„ã€‚ å…³äºŽå‘½åç©ºé—´ï¼š1ã€èµ‹å€¼ã€å®šä¹‰ç±»å’Œå‡½æ•°éƒ½ä¼šäº§ç”Ÿæ–°çš„æ ‡è¯†ç¬¦ï¼›2ã€å…¨å±€å˜é‡çš„æ ‡è¯†ç¬¦ä¸èƒ½è·¨æ–‡æ¡£ï¼›3ã€å„çº§å‘½åç©ºé—´ç›¸äº’ç‹¬ç«‹äº’ä¸å½±å“ï¼›4ã€Python æ€»æ˜¯ä»Žå½“å‰å±‚é€æ¸å‘ä¸Šå¯»æ‰¾æ ‡è¯†ç¬¦ï¼›5ã€å†…å±‚ä½œç”¨åŸŸè‹¥æƒ³ç›´æŽ¥ä¿®æ”¹ä¸Šå±‚å˜é‡ï¼Œéœ€è¦é€šè¿‡ global nonlocal è¯­å¥å…ˆå£°æ˜Žï¼›6ã€å•çº¯çš„ global è¯­å¥å¹¶ä¸èƒ½ä¸ºæ‰€åœ¨å±‚çº§åˆ›å»ºç›¸åº”æ ‡è¯†ç¬¦ï¼Œä½† nonlocal è¯­å¥å¯ä»¥åœ¨é—­åŒ…ç©ºé—´ä¸­åˆ›å»ºç›¸åº”æ ‡è¯†ç¬¦ï¼›7ã€ç±»çš„å±€éƒ¨å‘½åç©ºé—´ä¸æ˜¯ä½œç”¨åŸŸã€‚]]></content>
      <categories>
        <category>Python</category>
      </categories>
      <tags>
        <tag>NameSpace</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ç±»çš„ä¸‰å¤§ç‰¹æ€§ä¹‹ç»§æ‰¿]]></title>
    <url>%2F2018%2F10%2F23%2F%E7%B1%BB%E7%9A%84%E4%B8%89%E5%A4%A7%E7%89%B9%E6%80%A7%E4%B9%8B%E7%BB%A7%E6%89%BF%2F</url>
    <content type="text"><![CDATA[ä¸€ åˆè¯†ç»§æ‰¿ä¸€ ä»€ä¹ˆæ˜¯ç»§æ‰¿?ç»§æ‰¿æ˜¯ä¸€ç§åˆ›å»ºæ–°ç±»çš„æ–¹å¼,æ–°å»ºçš„ç±»å¯ä»¥ç»§æ‰¿ä¸€ä¸ªæˆ–å¤šä¸ªçˆ¶ç±»(pythonæ”¯æŒå¤šç»§æ‰¿),çˆ¶ç±»åˆå¯æˆä¸ºåŸºç±»æˆ–è¶…ç±»,æ–°å»ºçš„ç±»ç§°ä¸ºæ´¾ç”Ÿç±»æˆ–å­ç±». å­ç±»ä¼šç»§æ‰¿çˆ¶ç±»çš„å±žæ€§,ä»Žè€Œè§£å†³ä»£ç é‡ç”¨é—®é¢˜. pythonä¸­ç±»çš„ç»§æ‰¿åˆ†ä¸º:å•ç»§æ‰¿å’Œå¤šç»§æ‰¿ 1234567891011class Parent1: passclass Parent2: passclass Sub1(Parent1): # å•ç»§æ‰¿,åŸºç±»æ˜¯Parent1,æ´¾ç”Ÿç±»æ˜¯Sub passclass Sub2(Parent1,Parent2): # å¤šç»§æ‰¿,ç”¨é€—å·åˆ†éš”å¼€å¤šä¸ªç»§æ‰¿çš„ç±» pass æŸ¥çœ‹ç»§æ‰¿ 1print(sub2.__bases__) # __base__åªæŸ¥çœ‹ç»§æ‰¿çš„ç¬¬ä¸€ä¸ªå­ç±»,__bases__åˆ™æ˜¯æŸ¥çœ‹æ‰€æœ‰ç»§æ‰¿çš„çˆ¶ç±» ç»å…¸ç±»ä¸Žæ–°å¼ç±» åªæœ‰åœ¨python2ä¸­æ‰åˆ†æ–°å¼ç±»å’Œç»å…¸ç±»,python3ç»Ÿä¸€éƒ½æ˜¯æ–°å¼ç±» åœ¨python2ä¸­,æ²¡æœ‰æ˜¾å¼çš„ç»§æ‰¿objectç±»çš„ç±»,ç±»ä¸Žè¯¥ç±»çš„å­ç±»,éƒ½æ˜¯ç»å…¸ç±» åœ¨python2ä¸­,æ˜¾å¼çš„å£°æ˜Žç»§æ‰¿objectçš„ç±»,ç±»ä¸Žè¯¥ç±»çš„å­ç±»,éƒ½æ˜¯æ–°å¼ç±» åœ¨python3ä¸­,æ— è®ºæ˜¯å¦ç»§æ‰¿object,éƒ½é»˜è®¤ç»§æ‰¿object,å³python3ä¸­æ‰€æœ‰çš„ç±»å‡ä¸ºæ–°å¼ç±» python3ä¸­å¦‚æžœæ²¡æœ‰æŒ‡å®šåŸºç±»,pythonçš„ç±»ä¼šé»˜è®¤ç»§æ‰¿objectç±»,objectç±»æ˜¯æ‰€æœ‰pythonç±»çš„åŸºç±»,å®ƒå†…ç½®äº†ä¸€äº›æ–¹æ³•. äºŒ ç»§æ‰¿ä¸ŽæŠ½è±¡ç»§æ‰¿æè¿°çš„æ˜¯å­ç±»ä¸Žçˆ¶ç±»çš„ç»§æ‰¿å…³ç³»,æƒ³è¦æ‰¾å‡ºè¿™ç§å…³ç³»,å¿…é¡»å…ˆæŠ½è±¡å†ç»§æ‰¿. æŠ½è±¡:å³æŠ½å–ç±»ä¼¼æˆ–è€…ç›¸ä¼¼çš„éƒ¨åˆ† ç»§æ‰¿:æ˜¯åŸºäºŽæŠ½è±¡çš„ç»“æžœ,é€šè¿‡ç¼–ç¨‹è¯­è¨€åŽ»å®žçŽ°å®ƒ,è‚¯å®šæ˜¯å…ˆç»åŽ†æŠ½è±¡è¿™ä¸ªè¿‡ç¨‹,æ‰èƒ½é€šè¿‡ç»§æ‰¿çš„æ–¹å¼åŽ»è¡¨è¾¾å‡ºæŠ½è±¡çš„ç»“æž„ äºŒ ç»§æ‰¿çš„ä½¿ç”¨åœºæ™¯ä¸‰ ç»§æ‰¿ä¸Žé‡ç”¨æ€§åœ¨å¼€å‘ç¨‹åºçš„è¿‡ç¨‹ä¸­,å¦‚æžœæˆ‘ä»¬é¦–å…ˆå®šä¹‰äº†ä¸€ä¸ªAç±»,ç„¶åŽåˆæƒ³æ–°å»ºä¸€ä¸ªBç±»,ä½†æ˜¯Bç±»çš„å¤§éƒ¨åˆ†å†…å®¹ä¸ŽAç±»ä»£ç ç›¸åŒæ—¶,å¯ä»¥é€šè¿‡ç»§æ‰¿çš„æ–¹æ³•æ¥å®žçŽ°ä»£ç é‡ç”¨. Bç»§æ‰¿Aä¼šèŽ·å¾—Açš„æ‰€æœ‰å±žæ€§(æ•°æ®å±žæ€§ä¸Žå‡½æ•°å±žæ€§),æ‰€ä»¥Bä¸­æ²¡æœ‰è€ŒAä¸­å…·æœ‰çš„å±žæ€§å¯ä»¥è¢«Bç”¨æ¥ä½¿ç”¨,è€ŒBä¸­æœ‰çš„å°±ä½¿ç”¨è‡ªå·±çš„: 12345678910111213141516171819202122232425class A: a = 123 print(a) def func1(self): print('A, func1') def func2(self): print('A, func2') self.func1() class B(A): a = 134 def func1(self): print('B, func1') b = B()print(b.a)b.func2()# è¿è¡Œç»“æžœ123 # Aä¸ºBçš„çˆ¶ç±»,åœ¨ç»§æ‰¿çš„æ—¶å€™ä¼šé¦–å…ˆæ‰§è¡ŒAç±»ä¸­çš„ä»£ç 134A, func2B, func1 å›› æ´¾ç”Ÿç±»è™½ç„¶å­ç±»æ˜¯ç»§æ‰¿äº†çˆ¶ç±»çš„çš„å±žæ€§,ä½†æ˜¯å­ç±»ä¹Ÿå¯ä»¥æ·»åŠ è‡ªå·±æ–°çš„å±žæ€§æˆ–è€…å¯¹å­ç±»ç”Ÿæˆçš„å¯¹è±¡å®šä¹‰è‡ªå·±çš„å±žæ€§(ä¸ä¼šå½±å“åˆ°çˆ¶ç±»),éœ€è¦æ³¨æ„çš„æ˜¯,ä¸€æ—¦é‡æ–°å®šä¹‰äº†è‡ªå·±çš„å±žæ€§ä¸”ä¸Žçˆ¶ç±»åŒåæ—¶,é‚£ä¹ˆè°ƒç”¨æ–°çš„å±žæ€§æ—¶ä»¥å­ç±»çš„ä¸ºå‡†. 123456789101112131415161718class A: a = 123 print(a) def func1(self): print('A, func1') def func2(self): print('A, func2') self.func1() class B(A): a = 134 def func1(self): print('B, func1') def func3(self): print('B, func3') Bå®šä¹‰äº†è‡ªå·±æ–°çš„å±žæ€§func3,è€Œä¸”è¯¥å‡½æ•°å’ŒAç±»æ²¡æœ‰å…³ç³». äº” ç»„åˆä¸Žé‡ç”¨æ€§è½¯ä»¶é‡ç”¨çš„é‡è¦æ–¹å¼é™¤äº†ç»§æ‰¿ä¹‹å¤–è¿˜æœ‰å¦å¤–ä¸€ç§æ–¹å¼,å³:ç»„åˆ ç»„åˆæŒ‡çš„æ˜¯,åœ¨ä¸€ä¸ªç±»ä¸­ä»¥å¦å¤–ä¸€ä¸ªç±»çš„å¯¹è±¡ä½œä¸ºæ•°æ®å±žæ€§,ç§°ä¸ºç±»çš„ç»„åˆ 12345678910111213class Equip: #æ­¦å™¨è£…å¤‡ç±» def fire(self): print('release Fire skill') class Riven: #è‹±é›„Rivençš„ç±»,ä¸€ä¸ªè‹±é›„éœ€è¦æœ‰è£…å¤‡,å› è€Œéœ€è¦ç»„åˆEquipç±» camp='Noxus' def __init__(self,nickname): self.nickname=nickname self.equip=Equip() #ç”¨Equipç±»äº§ç”Ÿä¸€ä¸ªè£…å¤‡,èµ‹å€¼ç»™å®žä¾‹çš„equipå±žæ€§ r1=Riven('é”é›¯é›¯')r1.equip.fire() #å¯ä»¥ä½¿ç”¨ç»„åˆçš„ç±»äº§ç”Ÿçš„å¯¹è±¡æ‰€æŒæœ‰çš„æ–¹æ³•# è¿è¡Œç»“æžœrelease Fire skill ç»„åˆä¸Žç»§æ‰¿éƒ½æ˜¯æœ‰æ•ˆçš„åˆ©ç”¨å·²æœ‰ç±»çš„èµ„æºçš„é‡è¦æ–¹å¼.ä½†æ˜¯äºŒè€…çš„æ¦‚å¿µå’Œä½¿ç”¨åœºæ™¯çš†ä¸åŒ. ç»§æ‰¿çš„æ–¹å¼ é€šè¿‡ç»§æ‰¿å»ºç«‹äº†æ´¾ç”Ÿç±»å’Œçˆ¶ç±»ä¹‹é—´çš„å…³ç³»,å®ƒæ˜¯ä¸€ç§ä»Žå±žå…³ç³». å½“ç±»ä¹‹é—´æœ‰å¾ˆå¤šç›¸åŒçš„åŠŸèƒ½,æå–è¿™äº›å…±åŒçš„åŠŸèƒ½åšæˆåŸºç±»,ç”¨ç»§æ‰¿æ¯”è¾ƒå¥½ ç»„åˆçš„æ–¹å¼ ç”¨ç»„åˆçš„æ–¹å¼å»ºç«‹äº†ç±»ä¸Žç»„åˆçš„ç±»ä¹‹é—´çš„å…³ç³»,å®ƒæ˜¯ä¸€ç§é™„å¸¦å…³ç³». å…­ æŠ½è±¡ç±» ä»€ä¹ˆæ˜¯æŠ½è±¡ç±»? ä¸Žjavaä¸€æ ·,pythonä¹Ÿæœ‰æŠ½è±¡ç±»çš„æ¦‚å¿µä½†æ˜¯åŒæ ·éœ€è¦å€ŸåŠ©æ¨¡å—å®žçŽ°,æŠ½è±¡ç±»æ˜¯ä¸€ä¸ªç‰¹æ®Šçš„ç±»,å®ƒçš„ç‰¹æ®Šä¹‹å¤„åœ¨äºŽåªèƒ½è¢«ç»§æ‰¿,ä¸èƒ½è¢«å®žä¾‹åŒ–. ä¸ºä»€ä¹ˆè¦æœ‰æŠ½è±¡ç±»? å¦‚æžœè¯´ç±»æ˜¯ä»Žä¸€å †å¯¹è±¡ä¸­æŠ½å–ç›¸åŒçš„å†…å®¹å¾—æ¥çš„,é‚£ä¹ˆæŠ½è±¡ç±»å°±æ˜¯ä»Žä¸€å †ç±»ä¸­æŠ½å–ç›¸åŒçš„å†…å®¹è€Œæ¥çš„,å†…å®¹åŒ…æ‹¬æ•°æ®å±žæ€§å’Œå‡½æ•°å±žæ€§. ä»Žè®¾è®¡è§’åº¦çœ‹,æŠ½è±¡ç±»ä¸Žæ™®é€šç±»çš„ä¸åŒä¹‹å¤„åœ¨äºŽ:æŠ½è±¡ç±»ä¸­åªèƒ½æŠ½è±¡æ–¹æ³•(æ²¡æœ‰å®žçŽ°åŠŸèƒ½),è¯¥ç±»ä¸èƒ½è¢«å®žä¾‹åŒ–,åªèƒ½è¢«ç»§æ‰¿,ä¸”å­ç±»å¿…é¡»å®žçŽ°æŠ½è±¡æ–¹æ³•. ä¸‰ ç»§æ‰¿å®žçŽ°çš„åŽŸç†ä¸€ ç»§æ‰¿é¡ºåºåœ¨pythonä¸­å¯ä»¥åŒæ—¶ç»§æ‰¿å¤šä¸ªçˆ¶ç±»,å¦‚A(B,C,D) å¦‚æžœç»§æ‰¿å…³ç³»ä¸ºéžè±å½¢ç»“æž„,åˆ™ä¼šæŒ‰ç…§å…ˆæ‰¾Bè¿™ä¸€æ¡åˆ†æ”¯,ç„¶åŽå†æ‰¾Cè¿™ä¸€æ¡åˆ†æ”¯,æœ€åŽæ‰¾Dè¿™ä¸€æ¡åˆ†æ”¯çš„é¡ºåºç›´åˆ°æ‰¾åˆ°è¦æ‰¾çš„å±žæ€§,æ‰¾å®Œäº†è¿˜æ²¡æœ‰çš„è¯ä¼šæŠ¥å±žæ€§ä¸å­˜åœ¨çš„é”™è¯¯. å¦‚æžœç»§æ‰¿å…³ç³»ä¸ºè±å½¢ç»“æž„,é‚£ä¹ˆå±žæ€§çš„æŸ¥æ‰¾æ–¹å¼æœ‰ä¸¤ç§,åˆ†åˆ«æ˜¯:æ·±åº¦ä¼˜å…ˆå’Œå¹¿åº¦ä¼˜å…ˆ. 12345678910111213141516171819202122232425262728293031class A(object): def test(self): print('from A')class B(A): def test(self): print('from B')class C(A): def test(self): print('from C')class D(B): def test(self): print('from D')class E(C): def test(self): print('from E')class F(D,E): # def test(self): # print('from F') passf1=F()f1.test()print(F.__mro__) #åªæœ‰æ–°å¼æ‰æœ‰è¿™ä¸ªå±žæ€§å¯ä»¥æŸ¥çœ‹çº¿æ€§åˆ—è¡¨ï¼Œç»å…¸ç±»æ²¡æœ‰è¿™ä¸ªå±žæ€§#æ–°å¼ç±»ç»§æ‰¿é¡ºåº:F-&gt;D-&gt;B-&gt;E-&gt;C-&gt;A#ç»å…¸ç±»ç»§æ‰¿é¡ºåº:F-&gt;D-&gt;B-&gt;A-&gt;E-&gt;C#python3ä¸­ç»Ÿä¸€éƒ½æ˜¯æ–°å¼ç±»#pyhon2ä¸­æ‰åˆ†æ–°å¼ç±»ä¸Žç»å…¸ç±» äºŒ ç»§æ‰¿åŽŸç†pythonæ˜¯å¦‚ä½•å®žçŽ°ç»§æ‰¿å¹¶æŸ¥æ‰¾å±žæ€§çš„,å¯¹äºŽä½ å®šä¹‰çš„æ¯ä¸€ä¸ªç±»,pythonä¼šè®¡ç®—å‡ºä¸€ä¸ªæ–¹æ³•è§£æžé¡ºåº(MRO)åˆ—è¡¨,è¿™ä¸ªMROåˆ—è¡¨å°±æ˜¯ä¸€ä¸ªç®€å•çš„æ‰€æœ‰åŸºç±»çš„çº¿æ€§é¡ºåºåˆ—è¡¨. ä¸ºäº†å®žçŽ°ç»§æ‰¿,pythonä¼šåœ¨MROåˆ—è¡¨ä¸­ä»Žå·¦åˆ°å³å¼€å§‹æŸ¥æ‰¾åŸºç±»,ç›´åˆ°æ‰¾åˆ°ç¬¬ä¸€ä¸ªåŒ¹é…è¿™ä¸ªå±žæ€§çš„ç±»ä¸ºæ­¢.è€Œè¿™ä¸ªMROåˆ—è¡¨çš„æž„é€ æ˜¯é€šè¿‡ä¸€ä¸ªC3çº¿æ€§åŒ–ç®—æ³•æ¥å®žçŽ°çš„.å®ƒå®žé™…ä¸Šå°±æ˜¯åˆå¹¶æ‰€æœ‰çˆ¶ç±»çš„MROåˆ—è¡¨å¹¶éµå¾ªå¦‚ä¸‹ä¸‰æ¡å‡†åˆ™: å­ç±»ä¼šå…ˆäºŽçˆ¶ç±»è¢«æ£€æŸ¥ å¤šä¸ªçˆ¶ç±»ä¼šæ ¹æ®å®ƒä»¬åœ¨åˆ—è¡¨ä¸­çš„é¡ºåºè¢«æ£€æŸ¥ å¦‚æžœå¯¹ä¸‹ä¸€ä¸ªç±»å­˜åœ¨ä¸¤ä¸ªåˆæ³•çš„é€‰æ‹©,é€‰æ‹©ç¬¬ä¸€ä¸ªçˆ¶ç±» æŸ¥æ‰¾å±žæ€§æ—¶,å³ä½¿æ²¡æœ‰ç›´æŽ¥ç»§æ‰¿å…³ç³»,ä¹Ÿä¼šæŒ‰ç…§MROåˆ—è¡¨ç»§ç»­å¾€åŽæŸ¥æ‰¾,å½“ä½¿ç”¨super()å‡½æ•°æ—¶,pythonä¼šåœ¨MROåˆ—è¡¨ä¸Šç»§ç»­æœç´¢ä¸‹ä¸€ä¸ªç±».åªè¦æ¯ä¸ªé‡å®šä¹‰çš„æ–¹æ³•ç»Ÿä¸€ä½¿ç”¨super()å¹¶åªè°ƒç”¨å®ƒä¸€æ¬¡,é‚£ä¹ˆæŽ§åˆ¶æµæœ€ç»ˆä¼šéåŽ†å®Œæ•´ä¸ªMROåˆ—è¡¨,æ¯ä¸ªæ–¹æ³•ä¹Ÿåªä¼šè¢«è°ƒç”¨ä¸€æ¬¡ æ³¨æ„:ä½¿ç”¨superè°ƒç”¨çš„æ‰€æœ‰å±žæ€§,éƒ½æ˜¯ä»ŽMROåˆ—è¡¨å½“å‰çš„ä½ç½®å¾€åŽæ‰¾,ä¸è¦åœ¨æ„ç»§æ‰¿å…³ç³»,çœ‹MROåˆ—è¡¨å°±å¥½ ä¸‰ superçš„ä½¿ç”¨BaseTherç±»çš„åˆ›å»º 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455# coding: utf-8# @Time : 2018/10/23 11:40 PM# @Author : MUSIBII# @Email : shaozuanzuan@gmail.com# @File : father_type.pyimport os, sysimport pickleimport hashlibsys.path.append(os.path.dirname(os.path.dirname(__file__)))import db_file''' 11ã€æŠ½è±¡è€å¸ˆç±»ä¸Žå­¦ç”Ÿç±»å¾—åˆ°çˆ¶ç±»ï¼Œç”¨ç»§æ‰¿çš„æ–¹å¼å‡å°‘ä»£ç å†—ä½™'''import timeclass BaseTher: def __init__(self, name, age, gender): self.name = name self.age = age self.gender = gender self.time = time.time() # self.id_hash = self.create_id() # åˆ›å»ºå”¯ä¸€çš„id def create_id(self): # timenow = str(time.time()).split('.')[0] key = self.name + str(self.age) + self.gender + str(self.time) m = hashlib.md5(key.encode('utf-8')) self.id_hash = m.hexdigest() # print(m.hexdigest()) # return m.hexdigest() def tell_info(self): data = self.get_obj_by_id() for item in data: print('%-10s: %-20s' % (item, data[item])) # print(data) # å°†ä¿¡æ¯åºåˆ—åŒ–åŽä¿å­˜åˆ°æ–‡ä»¶ def save(self): user_data = &#123;'name': self.name, 'age': self.age, 'gender': self.gender, 'id_hash': self.id_hash&#125; with open('db_file/%s' % self.id_hash, 'wb') as f: pickle.dump(user_data, f) # é€šè¿‡idååºåˆ—åŒ–ä¿¡æ¯ def get_obj_by_id(self): with open('db_file/%s' % self.id_hash, 'rb') as f: return pickle.load(f) å­ç±»é€šè¿‡super().init(*args)ä½¿ç”¨çˆ¶ç±»çš„initæ–¹æ³• 1234567891011121314151617181920212223242526272829303132class Teacher(BaseTher): def __init__(self, name, age, gender, level, salary): super().__init__(name, age, gender) self.level = level self.salary = salary # self.id_hash = self.create_id() # åˆ›å»ºå”¯ä¸€çš„id def create_id(self): # timenow = str(time.time()).split('.')[0] key = self.name + str(self.age) + self.gender + str(self.level) + str(self.salary) m = hashlib.md5(key.encode('utf-8')) self.id_hash = m.hexdigest() # print(m.hexdigest()) # return m.hexdigest() # def tell_info(self): # data = self.get_obj_by_id() # for item in data: # print('%-10s: %-20s' % (item, data[item])) # # print(data) # å°†è€å¸ˆä¿¡æ¯åºåˆ—åŒ–åŽä¿å­˜åˆ°æ–‡ä»¶ def save(self): user_data = &#123;'name': self.name, 'age': self.age, 'gender': self.gender, 'level': self.level, 'salary': self.salary, 'id_hash': self.id_hash&#125; with open('db_file/%s'%self.id_hash, 'wb') as f: pickle.dump(user_data, f) # # é€šè¿‡idååºåˆ—åŒ–è€å¸ˆä¿¡æ¯ # def get_obj_by_id(self): # with open('db_file/%s'%self.id_hash, 'rb') as f: # return pickle.load(f) åœ¨Python3ä¸­,super()æ‹¬å·é‡Œé¢å¯ä»¥ä¸ºç©º,ä¸è¿‡ä¹Ÿå¯ä»¥å†™æˆsuper(æœ¬ç±»çš„åå­—,self) åƒä¸Šé¢çš„super().init(name, age, gender), å¯ä»¥å†™æˆsuper(Teacher,self).init(name, age, gender) å›› ç»„åˆçš„ä½¿ç”¨ ä»€ä¹ˆæ˜¯ç»„åˆ? ä¸€ä¸ªå¯¹è±¡çš„å±žæ€§æ˜¯æ¥è‡ªå¦å¤–ä¸€ä¸ªç±»çš„å¯¹è±¡,ç§°ä¹‹ä¸ºç»„åˆ ä¸ºä½•ç”¨ç»„åˆ? ç»„åˆä¹Ÿæ˜¯ç”¨æ¥è§£å†³ç±»ä¸Žç±»ä»£ç å†—ä½™çš„é—®é¢˜ ç»„åˆçš„ç”¨æ³•å¦‚ä¸‹ä»£ç : 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051# coding: utf-8# @Time : 2018/10/24 10:27 AM# @Author : MUSIBII# @Email : shaozuanzuan@gmail.com# @File : zuhe.pyclass OldboyPeople: school = 'Oldboy' def __init__(self, name, age, gender): self.name = name self.age = age self.gender = genderclass OldboyStudent(OldboyPeople): def __init__(self, name, age, gender): super().__init__(name, age, gender) def choose_course(self): print('%s is choosing course' % self.name)class OldboyTeacher(OldboyPeople): def __init__(self, name, age, gender, level, salary): OldboyPeople.__init__(self, name, age, gender) self.level = level self.salary = salary def score(self, stu, num): stu.num = num print('è€å¸ˆ%sç»™å­¦ç”Ÿ%sæ‰“åˆ†%s' % (self.name, stu.name, num))class Course: def __init__(self, course_name, course_price, course_period): self.course_name = course_name self.course_price = course_price self.course_period = course_period def tell_course(self): print('è¯¾ç¨‹å:&lt;%s&gt; ä»·é’±:[%s] å‘¨æœŸ:[%s]' % (self.course_name, self.course_price, self.course_period))course = Course('python', 3000, '5months')stu1 = OldboyStudent('musibii', 18, 'male')stu1.course = courseprint(stu1)]]></content>
      <categories>
        <category>Python</category>
      </categories>
      <tags>
        <tag>é¢å‘å¯¹è±¡</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[pythonæ•°æ®ç±»åž‹ä¸Žç±»çš„æ€»ç»“]]></title>
    <url>%2F2018%2F10%2F23%2Fpython%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B%E4%B8%8E%E7%B1%BB%E7%9A%84%E6%80%BB%E7%BB%93%2F</url>
    <content type="text"></content>
      <categories>
        <category>Python</category>
      </categories>
      <tags>
        <tag>é¢å‘å¯¹è±¡</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[é¢å‘å¯¹è±¡ç¼–ç¨‹]]></title>
    <url>%2F2018%2F10%2F22%2F%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1%E7%BC%96%E7%A8%8B%2F</url>
    <content type="text"><![CDATA[ä¸€ é¢å‘å¯¹è±¡ç¼–ç¨‹ä¸Žé¢å‘è¿‡ç¨‹ç¼–ç¨‹1 é¢å‘è¿‡ç¨‹ç¼–ç¨‹æ€æƒ³è¯¥æ€æƒ³æ ¸å¿ƒæ˜¯è¿‡ç¨‹ï¼ŒæŒ‡çš„æ˜¯è§£å†³é—®é¢˜çš„æ­¥éª¤ï¼Œå³å…ˆå¹²ä»€ä¹ˆç„¶åŽå¹²ä»€ä¹ˆï¼Œå°±åƒæµæ°´çº¿ä¸€æ ·ï¼Œå¿…é¡»ä¸€æ­¥ä¸€æ­¥æ¥ï¼ŒåŸºäºŽé¢å‘è¿‡ç¨‹ç¼–ç¨‹çš„æ˜¯ä¸€ç§æœºæ¢°åŒ–çš„æ€ç»´æ–¹å¼ã€‚ ä¼˜ç‚¹ï¼š å¤æ‚é—®é¢˜æµç¨‹åŒ–ï¼Œç®€å•åŒ–ï¼› ç¼ºç‚¹ï¼šå¯æ‰©å±•æ€§è¾ƒå·®ã€‚ åº”ç”¨åœºæ™¯ï¼šä¸€æ—¦å®Œæˆå‡ ä¹Žä¸ä¼šæ”¹å˜ï¼ŒåƒLinuxå†…æ ¸ã€gitä»¥åŠApache HTTP Serverç­‰ 2 é¢å‘å¯¹è±¡ç¼–ç¨‹æ€æƒ³éšç€ç¡¬ä»¶çš„å¿«é€Ÿå‘å±•ï¼Œä¸šåŠ¡éœ€æ±‚è¶Šæ¥è¶Šå¤æ‚ï¼Œä»¥åŠç¼–ç¨‹åº”ç”¨é¢†åŸŸè¶Šæ¥è¶Šå¹¿æ³›ï¼Œé¢å‘è¿‡ç¨‹ç¼–ç¨‹å·²ç»ä¸èƒ½æ»¡è¶³éœ€æ±‚äº†ï¼ŒäºŽæ˜¯å¦ä¸€ç§ç¼–ç¨‹æ€æƒ³å¼€å§‹å…´èµ·ï¼Œå°±æ˜¯é¢å‘å¯¹è±¡ç¼–ç¨‹ã€‚ è¯¥æ€æƒ³æ ¸å¿ƒæ˜¯å¯¹è±¡ï¼Œå¯¹è±¡æ˜¯ç‰¹å¾ä¸ŽæŠ€èƒ½çš„ç»“åˆä½“ï¼ŒåŸºäºŽé¢å‘å¯¹è±¡è®¾è®¡ç¨‹åºå°±å¥½æ¯”è‡ªå·±æ˜¯é€ ç‰©ä¸»ä¸€æ ·ï¼Œæƒ³è¦åˆ›é€ ä»€ä¹ˆå°±åˆ›é€ ä»€ä¹ˆï¼Œä¸Žé¢å‘è¿‡ç¨‹æœºæ¢°å¼çš„æ€ç»´æ–¹å¼å½¢æˆé²œæ˜Žå¯¹æ¯”ï¼Œé¢å‘å¯¹è±¡æ›´åŠ æ³¨é‡å¯¹çŽ°å®žä¸–ç•Œçš„æŠ½è±¡åŒ–ã€‚ ä¼˜ç‚¹ï¼šè§£å†³äº†ç¨‹åºçš„æ‰©å±•æ€§ã€‚å¯¹æŸä¸€ä¸ªå¯¹è±¡å•ç‹¬ä¿®æ”¹ï¼Œä¼šç«‹åˆ»ååº”åˆ°æ•´ä¸ªä½“ç³»ä¸­ã€‚ ç¼ºç‚¹ï¼š1. ç¼–ç¨‹çš„å¤æ‚åº¦é«˜äºŽé¢å‘è¿‡ç¨‹ç¼–ç¨‹ï¼Œä¸äº†è§£é¢å‘å¯¹è±¡è€Œç«‹å³ä¸Šæ‰‹åŸºäºŽå¯¹è±¡è®¾è®¡ç¨‹åºï¼Œå®¹æ˜“å‡ºçŽ°è¿‡åº¦è®¾è®¡çš„é—®é¢˜ã€‚ä¸€äº›æ‰©å±•æ€§è¦æ±‚ä½Žçš„åœºæ™¯ä½¿ç”¨é¢å‘å¯¹è±¡ä¼šå¢žåŠ ç¼–ç¨‹éš¾åº¦ã€‚ æ— æ³•å‘é¢å‘è¿‡ç¨‹çš„ç¨‹åºè®¾è®¡æµæ°´å¼çš„å¯ä»¥å¾ˆç²¾å‡†çš„é¢„æµ‹é—®é¢˜çš„å¤„ç†æµç¨‹ä¸Žç»“æžœï¼Œé¢å‘å¯¹è±¡çš„ç¨‹åºä¸€æ—¦å¼€å§‹å°±ç”±å¯¹è±¡ä¹‹é—´çš„äº¤äº’è§£å†³é—®é¢˜ã€‚ åº”ç”¨åœºæ™¯ï¼šéœ€æ±‚ç»å¸¸å˜åŒ–çš„è½¯ä»¶ï¼Œä¸€èˆ¬éœ€æ±‚çš„å˜åŒ–éƒ½é›†ä¸­åœ¨ç”¨æˆ·å±‚ï¼Œäº’è”ç½‘åº”ç”¨ï¼Œä¼ä¸šå†…éƒ¨è½¯ä»¶ï¼Œæ¸¸æˆç­‰ é¢å‘å¯¹è±¡çš„ç¨‹åºè®¾è®¡å¹¶ä¸æ˜¯å…¨éƒ¨ã€‚å¯¹äºŽä¸€ä¸ªè½¯ä»¶è´¨é‡æ¥è¯´ï¼Œé¢å‘å¯¹è±¡çš„ç¨‹åºè®¾è®¡åªæ˜¯ç”¨æ¥è§£å†³æ‰©å±•æ€§ã€‚ ä¸€ä¸ªå¥½çš„åº”ç”¨è½¯ä»¶åº”åŒ…æ‹¬çš„ç‰¹æ€§ï¼š äºŒ ç±»ä¸Žå¯¹è±¡ä¸€ ç±»çš„å®šä¹‰ç±»å³ç±»åˆ«ã€ç§ç±»ï¼Œæ˜¯é¢å‘å¯¹è±¡è®¾è®¡æœ€é‡è¦çš„æ¦‚å¿µï¼Œå¯¹è±¡æ˜¯ç‰¹å¾ä¸ŽæŠ€èƒ½çš„ç»“åˆä½“ï¼Œè€Œç±»åˆ™æ˜¯ä¸€ç³»åˆ—å…·æœ‰ç›¸ä¼¼ç‰¹å¾ä¸ŽæŠ€èƒ½çš„æŠ½è±¡æ¦‚å¿µã€‚ åœ¨çŽ°å®žä¸­æ˜¯å…ˆå‡ºçŽ°å¯¹è±¡ï¼Œç„¶åŽæ ¹æ®ä¸€ç³»åˆ—å…·æœ‰ç›¸åŒç‰¹å¾çš„å¯¹è±¡å®šä¹‰ä¸åŒçš„ç±»ï¼Œå¯¹è±¡æ˜¯å…·ä½“çš„å­˜åœ¨ï¼Œè€Œç±»ä»…ä»…åªæ˜¯ä¸€ä¸ªæ¦‚å¿µï¼Œå¹¶ä¸çœŸå®žå­˜åœ¨ã€‚ åœ¨ç¨‹åºä¸­æ˜¯å…ˆå®šä¹‰ç±»ï¼Œç„¶åŽæ ¹æ®ç±»äº§ç”Ÿå¯¹è±¡ï¼Œè¿™ä¸Žå‡½æ•°çš„ä½¿ç”¨æ˜¯ç±»ä¼¼çš„ï¼Œå…ˆå®šä¹‰å‡½æ•°ï¼Œç±»åŒç†ï¼Œåœ¨ç¨‹åºä¸­éœ€è¦å…ˆå®šä¹‰ç±»ï¼ŒåŽè°ƒç”¨ç±»ï¼Œä¸Žå‡½æ•°ä¸ä¸€æ ·çš„æ˜¯ï¼Œè°ƒç”¨å‡½æ•°ä¼šæ‰§è¡Œå‡½æ•°ä½“ä»£ç è¿”å›žçš„æ˜¯å‡½æ•°çš„æ‰§è¡Œç»“æžœï¼Œè€Œè°ƒç”¨ç±»ä¼šäº§ç”Ÿå¹¶è¿”å›žä¸€ä¸ªå¯¹è±¡ã€‚ åœ¨ç¨‹åºä¸­ï¼ŒåŠ¡å¿…ä¿è¯ï¼Œå…ˆå®šä¹‰ç±»ï¼ŒåŽä½¿ç”¨å¯¹è±¡ã€‚ åœ¨ç¨‹åºä¸­ç‰¹å¾ä½¿ç”¨å˜é‡æ ‡è¯†ï¼ŒæŠ€èƒ½ä½¿ç”¨å‡½æ•°æ ‡è¯†ã€‚ å› è€Œç±»ä¸­æœ€å¸¸è§çš„æ˜¯ï¼šå˜é‡å’Œå‡½æ•°çš„å®šä¹‰ã€‚ 1234567891011# å®šä¹‰ä¸€ä¸ªç±»class something: school = 'hashangda' def learn(self): print('something is learning') def eat(self): print('something is eating') def sleep(self): print('something is sleeping') æ³¨æ„: ç±»ä¸­å¯ä»¥ä¸ºä»»æ„pythonä»£ç ,è¿™äº›ä»£ç åœ¨ç±»å®šä¹‰é˜¶æ®µä¾¿ä¼šæ‰§è¡Œ; å› è€Œä¼šäº§ç”Ÿæ–°çš„åç§°ç©ºé—´,ç”¨æ¥å­˜æ”¾ç±»çš„å˜é‡åä¸Žå‡½æ•°å,å¯ä»¥é€šè¿‡something.dictæŸ¥çœ‹; å¯¹äºŽç»å…¸ç±»æ¥è¯´å¯ä»¥é€šè¿‡è¯¥å­—å…¸æ“ä½œç±»åç§°ç©ºé—´çš„åå­—(æ–°å¼ç±»æœ‰é™åˆ¶),ä½†pythonä¸ºæˆ‘ä»¬æä¾›äº†ä¸“é—¨çš„è¯­æ³•è¿›è¡Œè®¿é—®; ç‚¹äº‹è®¿é—®å±žæ€§çš„è¯­æ³•,ç±»ä¸­å®šä¹‰çš„åå­—,éƒ½æ˜¯ç±»çš„å±žæ€§(å˜é‡å’Œå‡½æ•°). äºŒ ç¨‹åºä¸­ç±»çš„ç”¨æ³•åœ¨ç¨‹åºä¸­ç”¨.æ¥è®¿é—®ç±»çš„å±žæ€§,æœ¬è´¨æ“ä½œä¸ºdict 1234something.school # ç­‰äºŽç»å…¸ç±» something.__dict__['school']something.school = 'oldboy' # ç­‰äºŽç»å…¸ç±» something.__dict__['school'] = 'oldboy'something.name = 'musibii' # ç­‰äºŽç»å…¸ç±» something.__dict__['name'] = 'musibii'del something.name # ç­‰äºŽç»å…¸ç±» something.__dict__.pop('name') åœ¨ç¨‹åºä¸­è°ƒç”¨ç±»(å®žä¾‹åŒ–å¯¹è±¡),äº§ç”Ÿå¹¶è¿”å›žä¸€ä¸ªå¯¹è±¡,äº§ç”Ÿçš„å¯¹è±¡ä¼šå…·æœ‰ç±»é‡Œé¢çš„å±žæ€§,å¹¶ä¸”å¯ä»¥é€šè¿‡å¥ç‚¹æ³•è¿›è¡Œè®¿é—®. æ€»ç»“: ç±»æœ¬è´¨æ˜¯ä¸€ä¸ªåç§°ç©ºé—´,æˆ–è€…è¯´æ˜¯ä¸€ä¸ªç”¨æ¥å­˜æ”¾å˜é‡ä¸Žå‡½æ•°çš„å®¹å™¨; ç±»çš„ç”¨é€”ä¹‹ä¸€å°±æ˜¯å½“åšåç§°ç©ºé—´ä»Žå…¶å†…éƒ¨å–å‡ºåå­—æ¥ä½¿ç”¨; ç±»çš„ä¸»è¦ç”¨é€”æ˜¯è°ƒç”¨ç±»äº§ç”Ÿå¯¹è±¡. ä¸‰ å¯¹è±¡çš„ä½¿ç”¨é€šè¿‡è°ƒç”¨ç±»äº§ç”Ÿçš„å¯¹è±¡æˆä¸ºç±»çš„å®žä¾‹åŒ–,è°ƒç”¨ç±»çš„è¿”å›žå€¼ç§°ä¹‹ä¸ºç±»çš„ä¸€ä¸ªå¯¹è±¡/å®žä¾‹. 123some = something() # äº§ç”Ÿä¸€ä¸ªå®žä¾‹å¯¹è±¡,å¯¹è±¡å¯ä»¥é€šè¿‡å¥ç‚¹æ³•è®¿é—®ç±»ä¸­çš„å±žæ€§()print(some.school)# ç»“æžœ hashangda ç±»ä¸­å®šä¹‰çš„å±žæ€§æ˜¯ç”±è¯¥ç±»äº§ç”Ÿçš„æ‰€æœ‰å¯¹è±¡å…±æœ‰çš„å±žæ€§,é‚£ä¹ˆæ¯ä¸ªå¯¹è±¡è‡ªå·±ç‰¹æœ‰çš„å±žæ€§åº”è¯¥æ€Žä¹ˆå®šä¹‰çš„? 1234567class something: school = 'hashangda' def __init__(self, name, age, gender): self.name = name self.age = age self.gender = gender ç±»ä¸­çš„initæ–¹æ³•æ˜¯ç”¨æ¥åˆå§‹åŒ–ä¸€ä¸ªå®žä¾‹å¯¹è±¡çš„,å¹¶ä¸”ä¼šæ‰§è¡Œä¸‹é¢çš„ä»£ç ,æ‰€ä»¥è¿™æ—¶å€™è¦å®žä¾‹åŒ–å¯¹è±¡æ˜¯éœ€è¦ä¼ å…¥åŽé¢çš„å‚æ•°. 123some1 = something('musibii', 18, 'male')some2 = something('thales', 20, 'female')some3 = something('maffia', 22, 'male') è¿™æ ·å®žä¾‹åŒ–å‡ºæ¥çš„å¯¹è±¡é™¤äº†schoolå±žæ€§å€¼ä¸€æ ·,å…¶ä»–éƒ½æ˜¯è‡ªå·±ç‹¬æœ‰çš„å±žæ€§å€¼. è°ƒç”¨ç±»äº§ç”Ÿäº† å…ˆäº§ç”Ÿä¸€ä¸ªç©ºå¯¹è±¡some1,ç„¶åŽè¿”å›ž; è§¦å‘ç±»ä¸­å‡½æ•°initçš„æ‰§è¡Œ,å°†å¯¹è±¡è”é€šè°ƒç”¨ç±»æ‹¬å·å†…æŒ‡å®šçš„å‚æ•°ä¸€åŒä¼ å…¥init. æ€»ç»“:initçš„åŠŸèƒ½,åœ¨å®žä¾‹åŒ–æ—¶ä¸ºå¯¹è±¡åˆå§‹åŒ–è‡ªå·±ç‹¬æœ‰çš„ç‰¹å¾(ä¸èƒ½æœ‰è¿”å›žå€¼) å›› å±žæ€§æŸ¥æ‰¾å±žæ€§æŸ¥æ‰¾å’Œä¹‹å‰å­¦çš„åç§°ç©ºé—´æŸ¥æ‰¾é¡ºåºé€»è¾‘ä¸€æ ·,é¦–å…ˆåœ¨å¯¹è±¡çš„åç§°ç©ºé—´é‡Œé¢æŸ¥æ‰¾,æ²¡æœ‰çš„è¯åŽ»ç±»åç§°ç©ºé—´æŸ¥æ‰¾,ä½†æ˜¯ä¸ä¼šåŽ»å…¨å±€åç§°ç©ºé—´æŸ¥æ‰¾å¯¹è±¡çš„å±žæ€§. ç±»ä¸­å®šä¹‰çš„å˜é‡æ˜¯æ‰€æœ‰å¯¹è±¡å…±äº«çš„,å¯¹è±¡å¯ä»¥ä½¿ç”¨,ç±»ä¹Ÿå¯ä»¥ä½¿ç”¨,ç±»ä¸€æ—¦æ”¹å˜è‡ªå·±çš„å±žæ€§çš„å€¼,æ‰€æœ‰çš„å¯¹è±¡ä¹Ÿä¼šéšä¹‹æ”¹å˜. äº” ç»‘å®šæ–¹æ³•ç±»ä¸­å®šä¹‰çš„å˜é‡æ˜¯ç±»çš„æ•°æ®å±žæ€§,ç±»å’Œå¯¹è±¡éƒ½å¯ä»¥ä½¿ç”¨,å¹¶ä¸”å±žæ€§çš„å€¼éƒ½æŒ‡å‘ä¸€ä¸ªå†…å­˜åœ°å€; ç±»ä¸­å®šä¹‰çš„å‡½æ•°æ˜¯ç±»çš„å‡½æ•°å±žæ€§,ç±»å’Œå¯¹è±¡éƒ½å¯ä»¥è°ƒç”¨,ç±»æ¥è°ƒç”¨çš„å°±æ˜¯ä¸€ä¸ªæ™®é€šçš„å‡½æ•°,ä½†ç±»ä¸­å®šä¹‰çš„å‡½æ•°éƒ½æ˜¯ç”¨æ¥ç»™å¯¹è±¡ç”¨çš„,è€Œä¸”æ˜¯ç»‘å®šç»™å¯¹è±¡çš„. ç±»çš„å‡½æ•°:è¯¥ä¼ å‡ ä¸ªå‚æ•°å°±ä¼ å‡ ä¸ª ç»‘å®šæ–¹æ³•,æŒ‡å‘ç±»çš„å‡½æ•°:ç‰¹æ®Šä¹‹å¤„æ˜¯ç»‘å®šç»™å“ªä¸ªå¯¹è±¡å°±åº”è¯¥ç”±å“ªä¸ªå¯¹è±¡æ¥è°ƒç”¨,è°ƒç”¨çš„æ—¶å€™å°±ä¼šæŠŠå¯¹è±¡æœ¬èº«å½“åšç¬¬ä¸€ä¸ªå‚æ•°è‡ªåŠ¨ä¼ å…¥. å…­ ä¸€åˆ‡çš†å¯¹è±¡åœ¨python3ä¸­ç»Ÿä¸€äº†ç±»å’Œç±»åž‹çš„æ¦‚å¿µ,å°±æ˜¯è¯´ä¸€ä¸ªç±»ç­‰äºŽä¸€ç§ç±»åž‹,æ¯”å¦‚pythonä¸­çš„æ•°æ®ç±»åž‹,æˆ‘ä»¬ä¹Ÿå¯ä»¥å®šä¹‰å±žäºŽè‡ªå·±çš„ç±» 12345class muSibii: passmusibii = muSibii()print(type(musibii))# ç»“æžœ &lt;class '__main__.muSibii'&gt;]]></content>
      <categories>
        <category>Python</category>
      </categories>
      <tags>
        <tag>é¢å‘å¯¹è±¡</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ä¸€é¦–æ²‰ä¸‹æ¥ç‰¹åˆ«å¥½å¬çš„æ­Œ]]></title>
    <url>%2F2018%2F10%2F19%2F%E4%B8%80%E9%A6%96%E6%B2%89%E4%B8%8B%E6%9D%A5%E7%89%B9%E5%88%AB%E5%A5%BD%E5%90%AC%E7%9A%84%E6%AD%8C%2F</url>
    <content type="text"><![CDATA[æœ€è¿‘ä¸€ç›´åœ¨å•æ›²å¾ªçŽ¯ è…°ä¹é˜Ÿçš„ã€Šä¸€ä¸ªçŸ­ç¯‡ã€‹ ã€Šä¸€ä¸ªçŸ­ç¯‡ã€‹ ä½œè¯ï¼šåˆ˜å¼¢ ä½œæ›²ï¼šæ¨ç»æ˜† æ—‹è½¬ è·³è·ƒå–” ä»–æ„Ÿåˆ°æ¯æ¡è·¯éƒ½åœ¨å¤´ç—› æ–°é²œçš„å¸•ç‰¹é‡Œå…‹æ»¡è„‘å­ éƒ½æ˜¯å¼€æ‹“çš„è‡ªæ…°å™¨ é‚£äº›ç”·äººçˆ±çš„ç”·äººçˆ±å¸‚æ”¿ å¸‚æ”¿çˆ±å¸‚æ°‘ å¸‚æ°‘çˆ±æµè¿ž æ—‹è½¬ è·³è·ƒå–” ä»–æ„Ÿåˆ°é£žé¸Ÿä»¬ä¹Ÿåœ¨å¤´ç—› å†’ç‰Œçš„å¸•ç‰¹é‡Œå…‹æ»¡è„‘å­ éƒ½æ˜¯ç¨³å¦¥çš„ç‹¬è§’æˆ é‚£äº›ç”·å­©çˆ±çš„ç”·äººçˆ±æœºå™¨ æœºå™¨çˆ±æ³•å¾‹ æ³•å¾‹æ˜¯ä½  æ·±å¤œé‡Œè¾›è’‚è•¾æ‹‰ä»¬å€’ä¸‹çš„åœ°æ–¹ ä¿ƒæˆæ•´ç‰‡è¡€çº¢çš„é«˜æ¥¼ åœ¨æžä¸Žä¸æžä¹‹é—´æ³›èµ·æ·¡æ·¡çš„å“€ä¼¤ ä»–çš„æ¥å¤´å·²ç»è…æœ½ åˆ«æ‹…å¿ƒæ²¡æœ‰å“ªä¸€é¦–æ­Œèƒ½å¤Ÿ æŠŠè¿™ä¸ªçŽ°å®žå”±åˆ°åœ°ç‹±åŽ» å½“ä½ è¿˜èƒ½äº«æœ‰è¿™ç§é™é»˜æˆ‘çš„è€çˆ· è¿™çƒ‚æ‘Šå°±ä¸ä¼šæ”¶åœº æ—‹è½¬ è·³è·ƒå§ ä»–æ„Ÿåˆ°è¿žæ™šé£Žä¹Ÿåœ¨å¤´ç—› ç‹—å¨˜å…»çš„å¸•ç‰¹é‡Œå…‹æ»¡è„‘å­ å…³äºŽä½“æ€çš„æ»‘ç¿”æœº ä»–è¯´è¿‡é‚£äº›å¥³äººçˆ±çš„ç”·äººçˆ±èèŽ‰ èèŽ‰çˆ±åŒ…åŒ… åŒ…åŒ…çˆ±è´§å¸ ä»–åœ¨é«˜çº§å ¡åž’çš„æ–¹é’ˆé‡Œèµ°å‡º å¸¦æ¥å¤§ä¼šçš„æ¶ˆæ¯ åœ¨å¹¼çŠ¬å’Œåœ°çš®å•†çš„å¾ç¨‹é‡Œ ä»–æ˜¯å‘è¾¾çš„è‚¯å®šå¥ ç­‰ä»–å’Œä»–ä»¬ ä»–ä»¬å’Œæ‰€æœ‰äººä¹‹é—´ éƒ½æžä¸æ¥ä¿¡ä»»çš„æ—¶å€™ åªè¦å†¬å’Œå¥¹çš„å§¨å¦ˆ ä»Žæ²¡æœ‰ç†„ç¯çš„çª—å£ æ— å£°çœºæœ› è¿™å¤œæ´¾å¯¹ å°±è¦æ•£åœº è¿™å¤œæ´¾å¯¹ å°±è¦æ•£åœº è¿™å¤œæ´¾å¯¹ å°±è¦æ•£åœº è¿™å¤œæ´¾å¯¹ å°±è¦æ•£åœº å¹½æš—çš„æœ€é«˜é¢‘é“è¿˜åœ¨ ä¸ºå…¨åŸŽé®ç›–ä¸‹ä¸€ç™¾å¹´çš„æ˜‚è´µè°œåº• ä»–å€šé åœ¨ä»¤äººå®³ç¾žçš„ç¤¼å“å †é‡Œ å†‰å†‰ç¡åŽ» å¹½æš—çš„æœ€é«˜é¢‘é“è¿˜åœ¨ ä¸ºå…¨åŸŽé®ç›–ä¸‹ä¸€ç™¾å¹´çš„æ˜‚è´µè°œåº• ä»–ä¾é åœ¨ä»¤äººå®³ç¾žçš„ç¤¼å“å †é‡Œ å†‰å†‰ç¡åŽ» å¹½æš—çš„æœ€é«˜é¢‘é“è¿˜åœ¨ ä¸ºå…¨åŸŽé®ç›–ä¸‹ä¸€ç™¾å¹´çš„æ˜‚è´µè°œåº• ä»–ä¾é åœ¨ä»¤äººå®³ç¾žçš„ç¤¼å“å †é‡Œ å†‰å†‰ç¡åŽ»]]></content>
      <categories>
        <category>Music</category>
      </categories>
      <tags>
        <tag>å‘å–Š</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[è®¡ç®—æœºç¡¬ä»¶åŸºç¡€]]></title>
    <url>%2F2018%2F10%2F19%2F%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%A1%AC%E4%BB%B6%E5%9F%BA%E7%A1%80%2F</url>
    <content type="text"><![CDATA[ä¸€ è®¡ç®—æœºåŸºæœ¬ç»„æˆç›®å‰å¸‚é¢ä¸Šçš„è®¡ç®—æœºå‡ ä¹Žéƒ½æ˜¯å†¯è¯ºä¾æ›¼ä½“ç³»è®¡ç®—æœºï¼Œå†¯Â·è¯ºä¾æ›¼è®¡ç®—æœºä½¿ç”¨å†¯è¯ºä¾æ›¼ä½“ç³»æœºæž„çš„ç”µå­æ•°å­—è®¡ç®—æœºã€‚1945å¹´6æœˆï¼Œå†¯Â·è¯ºä¾æ›¼æå‡ºäº†åœ¨æ•°å­—è®¡ç®—æœºå†…éƒ¨çš„å­˜å‚¨å™¨ä¸­å­˜æ”¾ç¨‹åºçš„æ¦‚å¿µï¼Œè¿™æ˜¯æ‰€æœ‰çŽ°ä»£ç”µå­è®¡ç®—æœºçš„æœ«ç­ï¼Œè¢«ç§°ä¸ºâ€œå†¯Â·è¯ºä¾æ›¼ç»“æž„â€ï¼ŒæŒ‰ç…§è¿™ç§ç»“æž„æž„é€ çš„ç”µè„‘ç§°ä¸ºå­˜å‚¨ç¨‹åºè®¡ç®—æœºï¼Œåˆç§°ä¸ºé€šç”¨è®¡ç®—æœºã€‚ å†¯Â·è¯ºä¾æ›¼ä½“ç³»çš„è®¡ç®—æœºçš„ç‰¹ç‚¹æ˜¯ï¼šç¨‹åºä»¥äºŒè¿›åˆ¶ä»£ç çš„å½¢å¼å­˜æ”¾åœ¨å­˜å‚¨å™¨ä¸­ï¼›æ‰€æœ‰çš„æŒ‡ä»¤éƒ½æ˜¯ç”±æ“ä½œç å’Œåœ°å€ç ç»„æˆï¼›æŒ‡ä»¤åœ¨å…¶å­˜å‚¨è¿‡ç¨‹ä¸­æŒ‰ç…§æ‰§è¡Œçš„é¡ºåºè¿›è¡Œå­˜å‚¨ï¼›ä»¥è¿ç®—å™¨å’ŒæŽ§åˆ¶å™¨ä½œä¸ºè®¡ç®—æœºç»“æž„çš„ä¸­å¿ƒç­‰ã€‚å†¯è¯ºä¾æ›¼è®¡ç®—æœºå¹¿æ³›åº”ç”¨äºŽæ•°æ®çš„å¤„ç†å’ŒæŽ§åˆ¶æ–¹é¢ã€‚ å†¯è¯ºä¾æ›¼ç†è®ºçš„è¦ç‚¹æ˜¯ï¼šæ•°å­—è®¡ç®—æœºçš„æ•°åˆ¶é‡‡ç”¨äºŒè¿›åˆ¶ï¼›è®¡ç®—æœºåº”è¯¥æŒ‰ç…§ç¨‹åºé¡ºåºæ‰§è¡Œã€‚ æ ¹æ®å†¯è¯ºä¾æ›¼ä½“ç³»ç»“æž„ç»„æˆçš„è®¡ç®—æœºï¼Œå¿…é¡»å…·æœ‰å¦‚ä¸‹åŠŸèƒ½ï¼š æŠŠéœ€è¦çš„ç¨‹åºå’Œæ•°æ®é€è‡³è®¡ç®—æœºä¸­ã€‚ å¿…é¡»å…·æœ‰é•¿æœŸè®°å¿†ç¨‹åºã€æ•°æ®ã€ä¸­é—´ç»“æžœåŠæœ€ç»ˆè¿ç®—ç»“æžœçš„èƒ½åŠ›ã€‚ èƒ½å¤Ÿå®Œæˆå„ç§ç®—æœ¯ã€é€»è¾‘è¿ç®—å’Œæ•°æ®ä¼ é€ç­‰æ•°æ®åŠ å·¥å¤„ç†çš„èƒ½åŠ›ã€‚ èƒ½å¤Ÿæ ¹æ®éœ€è¦æŽ§åˆ¶ç¨‹åºèµ°å‘ï¼Œå¹¶èƒ½æ ¹æ®æŒ‡ä»¤æŽ§åˆ¶æœºå™¨çš„å„éƒ¨ä»¶åè°ƒæ“ä½œã€‚ èƒ½å¤ŸæŒ‰ç…§è¦æ±‚å°†å¤„ç†ç»“æžœè¾“å‡ºç»™ç”¨æˆ·ã€‚ ä¸ºäº†å®Œæˆä»¥ä¸ŠåŠŸèƒ½ï¼Œè®¡ç®—æœºå¿…é¡»å…·å¤‡ä»¥ä¸‹äº”å¤§åŸºæœ¬ç»„æˆéƒ¨ä»¶ï¼š æŽ§åˆ¶å™¨ï¼šè®¡ç®—æœºçš„æŒ‡æŒ¥ç³»ç»Ÿã€‚æŽ§åˆ¶å™¨é€šè¿‡æ•°æ®åœ°å€æ¥è®¿é—®å­˜å‚¨å™¨ï¼Œä»Žå­˜å‚¨å™¨ä¸­å–å‡ºæŒ‡ä»¤ï¼Œç»è¿‡ç¼–è¯‘å™¨ç¼–è¯‘æˆ–è§£é‡Šå™¨è§£é‡ŠåŽï¼Œæ ¹æ®ç»“æžœå¾—å‡ºç›¸åº”çš„æ“ä½œä¿¡å·å¹¶ä½œç”¨äºŽå…¶ä»–éƒ¨ä»¶ï¼Œä½¿å¾—å„éƒ¨ä»¶åœ¨æŽ§åˆ¶å™¨çš„ä¸¥æ ¼æŽ§åˆ¶ä¸‹äº’ç›¸åè°ƒçš„å·¥ä½œã€‚ è¿ç®—å™¨ï¼šå®žçŽ°ç®—æœ¯è¿ç®—å’Œé€»è¾‘è¿ç®—çš„éƒ¨ä»¶ã€‚ å­˜å‚¨å™¨ï¼šè®¡ç®—æœºç”¨æ¥å­˜å‚¨æ‰€æœ‰æ•°æ®å’Œç¨‹åºçš„è®°å¿†éƒ¨ä»¶ã€‚å®ƒçš„åŸºæœ¬åŠŸèƒ½æ˜¯æŒ‰ç…§æŒ‡å®šçš„å­˜å‚¨åœ°å€å­˜ï¼ˆå†™ï¼‰å…¥æˆ–å–ï¼ˆè¯»ï¼‰å‡ºæ•°æ®ã€‚ è¾“å…¥è®¾å¤‡ï¼šæ˜¯å‘è®¡ç®—æœºä¸­è¾“å…¥ä¿¡æ¯ï¼ˆç¨‹åºã€æ•°æ®ã€å£°éŸ³ã€æ–‡å­—ã€å›¾å½¢ã€å›¾åƒç­‰ï¼‰çš„è®¾å¤‡ã€‚å¸¸è§çš„è¾“å…¥è®¾å¤‡æœ‰ï¼šé”®ç›˜ã€é¼ æ ‡ã€å›¾å½¢æ‰«æä»ªã€è§¦æ‘¸å±ç­‰ã€‚ è¾“å‡ºè®¾å¤‡ï¼šä¸»è¦æœ‰æ˜¾ç¤ºå™¨ã€æ‰“å°æœºå’Œç»˜å›¾ä»ªç­‰ã€‚ çŽ°ä»£è®¡ç®—æœºå°†ä¸Šè¿°äº”å¤§éƒ¨åˆ†åˆ†ä¸ºä¸‰å¤§æ ¸å¿ƒéƒ¨ä»¶ï¼š CPUï¼ˆæŽ§åˆ¶å•å…ƒ+ç®—æ•°é€»è¾‘å•å…ƒï¼‰ ä¸»å­˜å‚¨å™¨ è¾“å…¥è¾“å‡ºè®¾å¤‡ è¿™å‡ ä¸ªéƒ¨ä»¶çš„ç›¸å…³æ€§å¦‚ä¸‹ï¼š äºŒ ç¼–ç¨‹ä¸Žè®¡ç®—æœºç¡¬ä»¶çš„å…³ç³»ä¸ºäº†ä½¿è®¡ç®—æœºèƒ½å¤Ÿç†è§£äººçš„æ„å›¾ï¼Œäººç±»å°±å¿…é¡»å°†éœ€è¦è§£å†³çš„é—®é¢˜çš„æ€è·¯ã€æ–¹æ³•å’Œæ‰‹æ®µé€šè¿‡è®¡ç®—æœºèƒ½å¤Ÿç†è§£çš„å½¢å¼å‘Šè¯‰è®¡ç®—æœºï¼Œä½¿å¾—è®¡ç®—æœºèƒ½å¤Ÿæ ¹æ®äººçš„æŒ‡ä»¤ä¸€æ­¥ä¸€æ­¥åŽ»å·¥ä½œï¼Œå®ŒæˆæŸç§ç‰¹å®šçš„ä»»åŠ¡ã€‚è¿™ç§äººä¸Žè®¡ç®—æœºä½“ç³»ä¹‹é—´äº¤æµçš„è¿‡ç¨‹å°±æ˜¯ç¼–ç¨‹ã€‚ ç¼–å†™çš„ç¨‹åºç»è¿‡è¯‘ç å™¨åˆ†æžåŽå¾—åˆ°çš„æ˜¯ä¸€å¤§å †çš„äºŒè¿›åˆ¶æŒ‡ä»¤ï¼Œè¿™äº›æŒ‡ä»¤é€šè¿‡CPUè¯»å–ä»Žè€Œäº§ç”Ÿç›¸åº”çš„æ“ä½œæŽ§åˆ¶ä¿¡å·ä½œç”¨äºŽå…¶ä»–çš„ç¡¬ä»¶ä¸Šï¼Œä»Žè€Œå®Œæˆç›¸åº”çš„åŠŸèƒ½ã€‚ ä¸‰ å†…å­˜å®¹é‡å•ä½çš„æ¢ç®—1Byte=8bit 1KB=1024Bytes 1MB=1024KB 1GB=1024MB æœ‰çš„ç”Ÿäº§åŽ‚å®¶çš„æ¢ç®—å•ä½ä¸º1000ã€‚ å›› CPUä½æ•°å…³ç³»çŽ°åœ¨å¸‚é¢ä¸Šçš„è®¡ç®—æœºä¸»è¦åˆ†ä¸º32ä½å’Œ64ä½ä¸¤ç§è§„æ ¼ï¼Œä»–ä»¬ä¹‹é—´çš„åŒºåˆ«ä¸»è¦ä¸ºä»¥ä¸‹å››ç‚¹ï¼š å¤„ç†æ•°æ®èƒ½åŠ›ä¸åŒ æ”¯æŒçš„å†…å­˜ä¸åŒï¼ˆå¯»å€ä¸åŒï¼‰ æž¶æž„ä¸åŒ å¯¹é…ç½®çš„è¦æ±‚ä¸åŒ äº” æ“ä½œç³»ç»ŸåŸºç¡€ æ“ä½œç³»ç»Ÿæ˜¯ä»€ä¹ˆï¼Ÿ æ“ä½œç³»ç»Ÿï¼ˆOperating Systemï¼Œç®€ç§°OSï¼‰æ˜¯ç®¡ç†å’ŒæŽ§åˆ¶è®¡ç®—æœºç¡¬ä»¶ä¸Žè½¯ä»¶èµ„æºçš„è®¡ç®—æœºç¨‹åºï¼Œæ˜¯ç›´æŽ¥è¿è¡Œåœ¨â€˜è£¸æœºâ€™ä¸Šçš„æœ€åŸºæœ¬çš„ç³»ç»Ÿè½¯ä»¶ï¼Œä»»ä½•å…¶ä»–è½¯ä»¶éƒ½å¿…é¡»åœ¨æ“ä½œç³»ç»Ÿçš„æ”¯æŒä¸‹æ‰èƒ½è¿è¡Œã€‚æ“ä½œç³»ç»Ÿæ˜¯ä¸€ä¸ªåè°ƒ\ç®¡ç†\æŽ§åˆ¶è®¡ç®—æœºç¡¬ä»¶èµ„æºä¸Žè½¯ä»¶èµ„æºçš„ä¸€ä¸ªæŽ§åˆ¶ç¨‹åºã€‚ ä¸ºä»€ä¹ˆè¦æœ‰æ“ä½œç³»ç»Ÿï¼Ÿ æ“ä½œç³»ç»Ÿæ˜¯ç”¨æˆ·å’Œè®¡ç®—æœºç¡¬ä»¶çš„æŽ¥å£ï¼ŒåŒæ—¶ä¹Ÿæ˜¯è®¡ç®—æœºç¡¬ä»¶å’Œå…¶ä»–è½¯ä»¶çš„æŽ¥å£ã€‚æ“ä½œç³»ç»Ÿçš„åŠŸèƒ½åŒ…æ‹¬ç®¡ç†è®¡ç®—æœºç³»ç»Ÿçš„ç¡¬ä»¶ã€è½¯ä»¶åŠæ•°æ®èµ„æºï¼ŒæŽ§åˆ¶ç¨‹åºè¿è¡Œï¼Œæ”¹å–„äººæœºç•Œé¢ï¼Œä¸ºå…¶ä»–åº”ç”¨è½¯ä»¶æä¾›æ”¯æŒï¼Œè®©è®¡ç®—æœºç³»ç»Ÿæ‰€æœ‰èµ„æºæœ€å¤§é™åº¦çš„å‘æŒ¥ä½œç”¨ï¼Œæä¾›å„ç§å½¢å¼çš„ç”¨æˆ·ç•Œé¢ï¼Œä½¿ç”¨æˆ·æœ‰ä¸€ä¸ªå¥½çš„å·¥ä½œçŽ¯å¢ƒï¼Œä¸ºå…¶ä»–è½¯ä»¶çš„å¼€å‘æä¾›å¿…è¦çš„æœåŠ¡å’Œç›¸åº”çš„æŽ¥å£ç­‰ã€‚å®žé™…ä¸Šï¼Œç”¨æˆ·æ˜¯ä¸ç”¨æŽ¥è§¦æ“ä½œç³»ç»Ÿçš„ï¼Œæ“ä½œç³»ç»Ÿç®¡ç†ç€è®¡ç®—æœºçš„ç¡¬ä»¶èµ„æºï¼ŒåŒæ—¶æŒ‰ç…§åº”ç”¨ç¨‹åºçš„èµ„æºè¯·æ±‚æ¥åˆ†é…èµ„æºï¼Œå¦‚ï¼šåˆ’åˆ†CPUæ—¶é—´ã€å†…å­˜ç©ºé—´çš„å¼€è¾Ÿã€è°ƒç”¨æ‰“å°æœºç­‰ã€‚ æ“ä½œç³»ç»Ÿå°±æ˜¯ä¸ºäº†è®©ä½¿ç”¨è€…æ›´åŠ æ–¹ä¾¿çš„ä½¿ç”¨è®¡ç®—æœºç¡¬ä»¶èµ„æºå’Œè½¯ä»¶èµ„æºçš„ä¸€ä¸ªå·¥å…·ã€‚]]></content>
      <categories>
        <category>Computer Basics</category>
      </categories>
  </entry>
  <entry>
    <title><![CDATA[pythonæ¨¡å—ä¹‹re]]></title>
    <url>%2F2018%2F10%2F19%2Fpython%E6%A8%A1%E5%9D%97%E4%B9%8Bre%2F</url>
    <content type="text"><![CDATA[re æ¨¡å—åœ¨ Python ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨å†…ç½®çš„ re æ¨¡å—æ¥ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼ã€‚ æœ‰ä¸€ç‚¹éœ€è¦ç‰¹åˆ«æ³¨æ„çš„æ˜¯ï¼Œæ­£åˆ™è¡¨è¾¾å¼ä½¿ç”¨ \ å¯¹ç‰¹æ®Šå­—ç¬¦è¿›è¡Œè½¬ä¹‰ï¼Œæ¯”å¦‚ï¼Œä¸ºäº†åŒ¹é…å­—ç¬¦ä¸² â€˜python.orgâ€™ï¼Œæˆ‘ä»¬éœ€è¦ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼ &#39;python\.org&#39;ï¼Œè€Œ Python çš„å­—ç¬¦ä¸²æœ¬èº«ä¹Ÿç”¨ \ è½¬ä¹‰ï¼Œæ‰€ä»¥ä¸Šé¢çš„æ­£åˆ™è¡¨è¾¾å¼åœ¨ Python ä¸­åº”è¯¥å†™æˆ &#39;python\\.org&#39;ï¼Œè¿™ä¼šå¾ˆå®¹æ˜“é™·å…¥ \ çš„å›°æ‰°ä¸­ï¼Œå› æ­¤ï¼Œæˆ‘ä»¬å»ºè®®ä½¿ç”¨ Python çš„åŽŸå§‹å­—ç¬¦ä¸²ï¼Œåªéœ€åŠ ä¸€ä¸ª r å‰ç¼€ï¼Œä¸Šé¢çš„æ­£åˆ™è¡¨è¾¾å¼å¯ä»¥å†™æˆï¼š 1r&apos;python\.org&apos; re æ¨¡å—æä¾›äº†ä¸å°‘æœ‰ç”¨çš„å‡½æ•°ï¼Œç”¨ä»¥åŒ¹é…å­—ç¬¦ä¸²ï¼Œæ¯”å¦‚ï¼š compile å‡½æ•° match å‡½æ•° search å‡½æ•° findall å‡½æ•° finditer å‡½æ•° split å‡½æ•° sub å‡½æ•° subn å‡½æ•° re æ¨¡å—çš„ä¸€èˆ¬ä½¿ç”¨æ­¥éª¤å¦‚ä¸‹ï¼š ä½¿ç”¨ compile å‡½æ•°å°†æ­£åˆ™è¡¨è¾¾å¼çš„å­—ç¬¦ä¸²å½¢å¼ç¼–è¯‘ä¸ºä¸€ä¸ª Pattern å¯¹è±¡ é€šè¿‡ Pattern å¯¹è±¡æä¾›çš„ä¸€ç³»åˆ—æ–¹æ³•å¯¹æ–‡æœ¬è¿›è¡ŒåŒ¹é…æŸ¥æ‰¾ï¼ŒèŽ·å¾—åŒ¹é…ç»“æžœï¼ˆä¸€ä¸ª Match å¯¹è±¡ï¼‰ æœ€åŽä½¿ç”¨ Match å¯¹è±¡æä¾›çš„å±žæ€§å’Œæ–¹æ³•èŽ·å¾—ä¿¡æ¯ï¼Œæ ¹æ®éœ€è¦è¿›è¡Œå…¶ä»–çš„æ“ä½œ compile å‡½æ•°compile å‡½æ•°ç”¨äºŽç¼–è¯‘æ­£åˆ™è¡¨è¾¾å¼ï¼Œç”Ÿæˆä¸€ä¸ª Pattern å¯¹è±¡ï¼Œå®ƒçš„ä¸€èˆ¬ä½¿ç”¨å½¢å¼å¦‚ä¸‹ï¼š 1re.compile(pattern[, flag]) å…¶ä¸­ï¼Œpattern æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²å½¢å¼çš„æ­£åˆ™è¡¨è¾¾å¼ï¼Œflag æ˜¯ä¸€ä¸ªå¯é€‰å‚æ•°ï¼Œè¡¨ç¤ºåŒ¹é…æ¨¡å¼ï¼Œæ¯”å¦‚å¿½ç•¥å¤§å°å†™ï¼Œå¤šè¡Œæ¨¡å¼ç­‰ã€‚ ä¸‹é¢ï¼Œè®©æˆ‘ä»¬çœ‹çœ‹ä¾‹å­ã€‚ 1234import re# å°†æ­£åˆ™è¡¨è¾¾å¼ç¼–è¯‘æˆ Pattern å¯¹è±¡ pattern = re.compile(r'\d+') åœ¨ä¸Šé¢ï¼Œæˆ‘ä»¬å·²å°†ä¸€ä¸ªæ­£åˆ™è¡¨è¾¾å¼ç¼–è¯‘æˆ Pattern å¯¹è±¡ï¼ŒæŽ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å°±å¯ä»¥åˆ©ç”¨ pattern çš„ä¸€ç³»åˆ—æ–¹æ³•å¯¹æ–‡æœ¬è¿›è¡ŒåŒ¹é…æŸ¥æ‰¾äº†ã€‚Pattern å¯¹è±¡çš„ä¸€äº›å¸¸ç”¨æ–¹æ³•ä¸»è¦æœ‰ï¼š match æ–¹æ³• search æ–¹æ³• findall æ–¹æ³• finditer æ–¹æ³• split æ–¹æ³• sub æ–¹æ³• subn æ–¹æ³• match æ–¹æ³•match æ–¹æ³•ç”¨äºŽæŸ¥æ‰¾å­—ç¬¦ä¸²çš„å¤´éƒ¨ï¼ˆä¹Ÿå¯ä»¥æŒ‡å®šèµ·å§‹ä½ç½®ï¼‰ï¼Œå®ƒæ˜¯ä¸€æ¬¡åŒ¹é…ï¼Œåªè¦æ‰¾åˆ°äº†ä¸€ä¸ªåŒ¹é…çš„ç»“æžœå°±è¿”å›žï¼Œè€Œä¸æ˜¯æŸ¥æ‰¾æ‰€æœ‰åŒ¹é…çš„ç»“æžœã€‚å®ƒçš„ä¸€èˆ¬ä½¿ç”¨å½¢å¼å¦‚ä¸‹ï¼š 1match(string[, pos[, endpos]]) å…¶ä¸­ï¼Œstring æ˜¯å¾…åŒ¹é…çš„å­—ç¬¦ä¸²ï¼Œpos å’Œ endpos æ˜¯å¯é€‰å‚æ•°ï¼ŒæŒ‡å®šå­—ç¬¦ä¸²çš„èµ·å§‹å’Œç»ˆç‚¹ä½ç½®ï¼Œé»˜è®¤å€¼åˆ†åˆ«æ˜¯ 0 å’Œ len (å­—ç¬¦ä¸²é•¿åº¦)ã€‚å› æ­¤ï¼Œå½“ä½ ä¸æŒ‡å®š pos å’Œ endpos æ—¶ï¼Œmatch æ–¹æ³•é»˜è®¤åŒ¹é…å­—ç¬¦ä¸²çš„å¤´éƒ¨ã€‚ å½“åŒ¹é…æˆåŠŸæ—¶ï¼Œè¿”å›žä¸€ä¸ª Match å¯¹è±¡ï¼Œå¦‚æžœæ²¡æœ‰åŒ¹é…ä¸Šï¼Œåˆ™è¿”å›ž Noneã€‚ çœ‹çœ‹ä¾‹å­ã€‚ 12345678910111213141516171819&gt;&gt;&gt; import re&gt;&gt;&gt; pattern = re.compile(r'\d+') # ç”¨äºŽåŒ¹é…è‡³å°‘ä¸€ä¸ªæ•°å­—&gt;&gt;&gt; m = pattern.match('one12twothree34four') # æŸ¥æ‰¾å¤´éƒ¨ï¼Œæ²¡æœ‰åŒ¹é…&gt;&gt;&gt; print mNone&gt;&gt;&gt; m = pattern.match('one12twothree34four', 2, 10) # ä»Ž'e'çš„ä½ç½®å¼€å§‹åŒ¹é…ï¼Œæ²¡æœ‰åŒ¹é…&gt;&gt;&gt; print mNone&gt;&gt;&gt; m = pattern.match('one12twothree34four', 3, 10) # ä»Ž'1'çš„ä½ç½®å¼€å§‹åŒ¹é…ï¼Œæ­£å¥½åŒ¹é…&gt;&gt;&gt; print m # è¿”å›žä¸€ä¸ª Match å¯¹è±¡&lt;_sre.SRE_Match object at 0x10a42aac0&gt;&gt;&gt;&gt; m.group(0) # å¯çœç•¥ 0'12'&gt;&gt;&gt; m.start(0) # å¯çœç•¥ 03&gt;&gt;&gt; m.end(0) # å¯çœç•¥ 05&gt;&gt;&gt; m.span(0) # å¯çœç•¥ 0(3, 5) åœ¨ä¸Šé¢ï¼Œå½“åŒ¹é…æˆåŠŸæ—¶è¿”å›žä¸€ä¸ª Match å¯¹è±¡ï¼Œå…¶ä¸­ï¼š group([group1, â€¦]) æ–¹æ³•ç”¨äºŽèŽ·å¾—ä¸€ä¸ªæˆ–å¤šä¸ªåˆ†ç»„åŒ¹é…çš„å­—ç¬¦ä¸²ï¼Œå½“è¦èŽ·å¾—æ•´ä¸ªåŒ¹é…çš„å­ä¸²æ—¶ï¼Œå¯ç›´æŽ¥ä½¿ç”¨ group() æˆ– group(0)ï¼› start([group]) æ–¹æ³•ç”¨äºŽèŽ·å–åˆ†ç»„åŒ¹é…çš„å­ä¸²åœ¨æ•´ä¸ªå­—ç¬¦ä¸²ä¸­çš„èµ·å§‹ä½ç½®ï¼ˆå­ä¸²ç¬¬ä¸€ä¸ªå­—ç¬¦çš„ç´¢å¼•ï¼‰ï¼Œå‚æ•°é»˜è®¤å€¼ä¸º 0ï¼› end([group]) æ–¹æ³•ç”¨äºŽèŽ·å–åˆ†ç»„åŒ¹é…çš„å­ä¸²åœ¨æ•´ä¸ªå­—ç¬¦ä¸²ä¸­çš„ç»“æŸä½ç½®ï¼ˆå­ä¸²æœ€åŽä¸€ä¸ªå­—ç¬¦çš„ç´¢å¼•+1ï¼‰ï¼Œå‚æ•°é»˜è®¤å€¼ä¸º 0ï¼› span([group]) æ–¹æ³•è¿”å›ž (start(group), end(group))ã€‚ å†çœ‹çœ‹ä¸€ä¸ªä¾‹å­ï¼š 1234567891011121314151617181920212223&gt;&gt;&gt; import re&gt;&gt;&gt; pattern = re.compile(r'([a-z]+) ([a-z]+)', re.I) # re.I è¡¨ç¤ºå¿½ç•¥å¤§å°å†™&gt;&gt;&gt; m = pattern.match('Hello World Wide Web')&gt;&gt;&gt; print m # åŒ¹é…æˆåŠŸï¼Œè¿”å›žä¸€ä¸ª Match å¯¹è±¡&lt;_sre.SRE_Match object at 0x10bea83e8&gt;&gt;&gt;&gt; m.group(0) # è¿”å›žåŒ¹é…æˆåŠŸçš„æ•´ä¸ªå­ä¸²'Hello World'&gt;&gt;&gt; m.span(0) # è¿”å›žåŒ¹é…æˆåŠŸçš„æ•´ä¸ªå­ä¸²çš„ç´¢å¼•(0, 11)&gt;&gt;&gt; m.group(1) # è¿”å›žç¬¬ä¸€ä¸ªåˆ†ç»„åŒ¹é…æˆåŠŸçš„å­ä¸²'Hello'&gt;&gt;&gt; m.span(1) # è¿”å›žç¬¬ä¸€ä¸ªåˆ†ç»„åŒ¹é…æˆåŠŸçš„å­ä¸²çš„ç´¢å¼•(0, 5)&gt;&gt;&gt; m.group(2) # è¿”å›žç¬¬äºŒä¸ªåˆ†ç»„åŒ¹é…æˆåŠŸçš„å­ä¸²'World'&gt;&gt;&gt; m.span(2) # è¿”å›žç¬¬äºŒä¸ªåˆ†ç»„åŒ¹é…æˆåŠŸçš„å­ä¸²(6, 11)&gt;&gt;&gt; m.groups() # ç­‰ä»·äºŽ (m.group(1), m.group(2), ...)('Hello', 'World')&gt;&gt;&gt; m.group(3) # ä¸å­˜åœ¨ç¬¬ä¸‰ä¸ªåˆ†ç»„Traceback (most recent call last): File "&lt;stdin&gt;", line 1, in &lt;module&gt;IndexError: no such group search æ–¹æ³•search æ–¹æ³•ç”¨äºŽæŸ¥æ‰¾å­—ç¬¦ä¸²çš„ä»»ä½•ä½ç½®ï¼Œå®ƒä¹Ÿæ˜¯ä¸€æ¬¡åŒ¹é…ï¼Œåªè¦æ‰¾åˆ°äº†ä¸€ä¸ªåŒ¹é…çš„ç»“æžœå°±è¿”å›žï¼Œè€Œä¸æ˜¯æŸ¥æ‰¾æ‰€æœ‰åŒ¹é…çš„ç»“æžœï¼Œå®ƒçš„ä¸€èˆ¬ä½¿ç”¨å½¢å¼å¦‚ä¸‹ï¼š 1search(string[, pos[, endpos]]) å…¶ä¸­ï¼Œstring æ˜¯å¾…åŒ¹é…çš„å­—ç¬¦ä¸²ï¼Œpos å’Œ endpos æ˜¯å¯é€‰å‚æ•°ï¼ŒæŒ‡å®šå­—ç¬¦ä¸²çš„èµ·å§‹å’Œç»ˆç‚¹ä½ç½®ï¼Œé»˜è®¤å€¼åˆ†åˆ«æ˜¯ 0 å’Œ len (å­—ç¬¦ä¸²é•¿åº¦)ã€‚ å½“åŒ¹é…æˆåŠŸæ—¶ï¼Œè¿”å›žä¸€ä¸ª Match å¯¹è±¡ï¼Œå¦‚æžœæ²¡æœ‰åŒ¹é…ä¸Šï¼Œåˆ™è¿”å›ž Noneã€‚ è®©æˆ‘ä»¬çœ‹çœ‹ä¾‹å­ï¼š 1234567891011121314&gt;&gt;&gt; import re&gt;&gt;&gt; pattern = re.compile('\d+')&gt;&gt;&gt; m = pattern.search('one12twothree34four') # è¿™é‡Œå¦‚æžœä½¿ç”¨ match æ–¹æ³•åˆ™ä¸åŒ¹é…&gt;&gt;&gt; m&lt;_sre.SRE_Match object at 0x10cc03ac0&gt;&gt;&gt;&gt; m.group()'12'&gt;&gt;&gt; m = pattern.search('one12twothree34four', 10, 30) # æŒ‡å®šå­—ç¬¦ä¸²åŒºé—´&gt;&gt;&gt; m&lt;_sre.SRE_Match object at 0x10cc03b28&gt;&gt;&gt;&gt; m.group()'34'&gt;&gt;&gt; m.span()(13, 15) å†æ¥çœ‹ä¸€ä¸ªä¾‹å­ï¼š 123456789101112131415# -*- coding: utf-8 -*-import re# å°†æ­£åˆ™è¡¨è¾¾å¼ç¼–è¯‘æˆ Pattern å¯¹è±¡pattern = re.compile(r'\d+') # ä½¿ç”¨ search() æŸ¥æ‰¾åŒ¹é…çš„å­ä¸²ï¼Œä¸å­˜åœ¨åŒ¹é…çš„å­ä¸²æ—¶å°†è¿”å›ž None # è¿™é‡Œä½¿ç”¨ match() æ— æ³•æˆåŠŸåŒ¹é… m = pattern.search('hello 123456 789') if m: # ä½¿ç”¨ Match èŽ·å¾—åˆ†ç»„ä¿¡æ¯ print 'matching string:',m.group() print 'position:',m.span() æ‰§è¡Œç»“æžœï¼š 12matching string: 123456position: (6, 12) findall æ–¹æ³•ä¸Šé¢çš„ match å’Œ search æ–¹æ³•éƒ½æ˜¯ä¸€æ¬¡åŒ¹é…ï¼Œåªè¦æ‰¾åˆ°äº†ä¸€ä¸ªåŒ¹é…çš„ç»“æžœå°±è¿”å›žã€‚ç„¶è€Œï¼Œåœ¨å¤§å¤šæ•°æ—¶å€™ï¼Œæˆ‘ä»¬éœ€è¦æœç´¢æ•´ä¸ªå­—ç¬¦ä¸²ï¼ŒèŽ·å¾—æ‰€æœ‰åŒ¹é…çš„ç»“æžœã€‚ findall æ–¹æ³•çš„ä½¿ç”¨å½¢å¼å¦‚ä¸‹ï¼š 1findall(string[, pos[, endpos]]) å…¶ä¸­ï¼Œstring æ˜¯å¾…åŒ¹é…çš„å­—ç¬¦ä¸²ï¼Œpos å’Œ endpos æ˜¯å¯é€‰å‚æ•°ï¼ŒæŒ‡å®šå­—ç¬¦ä¸²çš„èµ·å§‹å’Œç»ˆç‚¹ä½ç½®ï¼Œé»˜è®¤å€¼åˆ†åˆ«æ˜¯ 0 å’Œ len (å­—ç¬¦ä¸²é•¿åº¦)ã€‚ findall ä»¥åˆ—è¡¨å½¢å¼è¿”å›žå…¨éƒ¨èƒ½åŒ¹é…çš„å­ä¸²ï¼Œå¦‚æžœæ²¡æœ‰åŒ¹é…ï¼Œåˆ™è¿”å›žä¸€ä¸ªç©ºåˆ—è¡¨ã€‚ çœ‹çœ‹ä¾‹å­ï¼š 12345678import repattern = re.compile(r'\d+') # æŸ¥æ‰¾æ•°å­—result1 = pattern.findall('hello 123456 789')result2 = pattern.findall('one1two2three3four4', 0, 10)print result1print result2 æ‰§è¡Œç»“æžœï¼š 12[&apos;123456&apos;, &apos;789&apos;][&apos;1&apos;, &apos;2&apos;] finditer æ–¹æ³•finditer æ–¹æ³•çš„è¡Œä¸ºè·Ÿ findall çš„è¡Œä¸ºç±»ä¼¼ï¼Œä¹Ÿæ˜¯æœç´¢æ•´ä¸ªå­—ç¬¦ä¸²ï¼ŒèŽ·å¾—æ‰€æœ‰åŒ¹é…çš„ç»“æžœã€‚ä½†å®ƒè¿”å›žä¸€ä¸ªé¡ºåºè®¿é—®æ¯ä¸€ä¸ªåŒ¹é…ç»“æžœï¼ˆMatch å¯¹è±¡ï¼‰çš„è¿­ä»£å™¨ã€‚ çœ‹çœ‹ä¾‹å­ï¼š 12345678910111213141516171819# -*- coding: utf-8 -*-import repattern = re.compile(r'\d+')result_iter1 = pattern.finditer('hello 123456 789')result_iter2 = pattern.finditer('one1two2three3four4', 0, 10)print type(result_iter1)print type(result_iter2)print 'result1...'for m1 in result_iter1: # m1 æ˜¯ Match å¯¹è±¡ print 'matching string: &#123;&#125;, position: &#123;&#125;'.format(m1.group(), m1.span())print 'result2...'for m2 in result_iter2: print 'matching string: &#123;&#125;, position: &#123;&#125;'.format(m2.group(), m2.span()) æ‰§è¡Œç»“æžœï¼š 12345678&lt;type &apos;callable-iterator&apos;&gt;&lt;type &apos;callable-iterator&apos;&gt;result1...matching string: 123456, position: (6, 12)matching string: 789, position: (13, 16)result2...matching string: 1, position: (3, 4)matching string: 2, position: (7, 8) split æ–¹æ³•split æ–¹æ³•æŒ‰ç…§èƒ½å¤ŸåŒ¹é…çš„å­ä¸²å°†å­—ç¬¦ä¸²åˆ†å‰²åŽè¿”å›žåˆ—è¡¨ï¼Œå®ƒçš„ä½¿ç”¨å½¢å¼å¦‚ä¸‹ï¼š 1split(string[, maxsplit]) å…¶ä¸­ï¼Œmaxsplit ç”¨äºŽæŒ‡å®šæœ€å¤§åˆ†å‰²æ¬¡æ•°ï¼Œä¸æŒ‡å®šå°†å…¨éƒ¨åˆ†å‰²ã€‚ çœ‹çœ‹ä¾‹å­ï¼š 1234import rep = re.compile(r'[\s\,\;]+')print p.split('a,b;; c d') æ‰§è¡Œç»“æžœï¼š 1[&apos;a&apos;, &apos;b&apos;, &apos;c&apos;, &apos;d&apos;] sub æ–¹æ³•sub æ–¹æ³•ç”¨äºŽæ›¿æ¢ã€‚å®ƒçš„ä½¿ç”¨å½¢å¼å¦‚ä¸‹ï¼š 1sub(repl, string[, count]) å…¶ä¸­ï¼Œrepl å¯ä»¥æ˜¯å­—ç¬¦ä¸²ä¹Ÿå¯ä»¥æ˜¯ä¸€ä¸ªå‡½æ•°ï¼š å¦‚æžœ repl æ˜¯å­—ç¬¦ä¸²ï¼Œåˆ™ä¼šä½¿ç”¨ repl åŽ»æ›¿æ¢å­—ç¬¦ä¸²æ¯ä¸€ä¸ªåŒ¹é…çš„å­ä¸²ï¼Œå¹¶è¿”å›žæ›¿æ¢åŽçš„å­—ç¬¦ä¸²ï¼Œå¦å¤–ï¼Œrepl è¿˜å¯ä»¥ä½¿ç”¨ \id çš„å½¢å¼æ¥å¼•ç”¨åˆ†ç»„ï¼Œä½†ä¸èƒ½ä½¿ç”¨ç¼–å· 0ï¼› å¦‚æžœ repl æ˜¯å‡½æ•°ï¼Œè¿™ä¸ªæ–¹æ³•åº”å½“åªæŽ¥å—ä¸€ä¸ªå‚æ•°ï¼ˆMatch å¯¹è±¡ï¼‰ï¼Œå¹¶è¿”å›žä¸€ä¸ªå­—ç¬¦ä¸²ç”¨äºŽæ›¿æ¢ï¼ˆè¿”å›žçš„å­—ç¬¦ä¸²ä¸­ä¸èƒ½å†å¼•ç”¨åˆ†ç»„ï¼‰ã€‚ count ç”¨äºŽæŒ‡å®šæœ€å¤šæ›¿æ¢æ¬¡æ•°ï¼Œä¸æŒ‡å®šæ—¶å…¨éƒ¨æ›¿æ¢ã€‚ çœ‹çœ‹ä¾‹å­ï¼š 123456789101112import rep = re.compile(r'(\w+) (\w+)')s = 'hello 123, hello 456'def func(m): return 'hi' + ' ' + m.group(2)print p.sub(r'hello world', s) # ä½¿ç”¨ 'hello world' æ›¿æ¢ 'hello 123' å’Œ 'hello 456'print p.sub(r'\2 \1', s) # å¼•ç”¨åˆ†ç»„print p.sub(func, s)print p.sub(func, s, 1) # æœ€å¤šæ›¿æ¢ä¸€æ¬¡ æ‰§è¡Œç»“æžœï¼š 1234hello world, hello world123 hello, 456 hellohi 123, hi 456hi 123, hello 456 subn æ–¹æ³•subn æ–¹æ³•è·Ÿ sub æ–¹æ³•çš„è¡Œä¸ºç±»ä¼¼ï¼Œä¹Ÿç”¨äºŽæ›¿æ¢ã€‚å®ƒçš„ä½¿ç”¨å½¢å¼å¦‚ä¸‹ï¼š 1subn(repl, string[, count]) å®ƒè¿”å›žä¸€ä¸ªå…ƒç»„ï¼š 1(sub(repl, string[, count]), æ›¿æ¢æ¬¡æ•°) å…ƒç»„æœ‰ä¸¤ä¸ªå…ƒç´ ï¼Œç¬¬ä¸€ä¸ªå…ƒç´ æ˜¯ä½¿ç”¨ sub æ–¹æ³•çš„ç»“æžœï¼Œç¬¬äºŒä¸ªå…ƒç´ è¿”å›žåŽŸå­—ç¬¦ä¸²è¢«æ›¿æ¢çš„æ¬¡æ•°ã€‚ çœ‹çœ‹ä¾‹å­ï¼š 123456789101112import rep = re.compile(r&apos;(\w+) (\w+)&apos;)s = &apos;hello 123, hello 456&apos;def func(m): return &apos;hi&apos; + &apos; &apos; + m.group(2)print p.subn(r&apos;hello world&apos;, s)print p.subn(r&apos;\2 \1&apos;, s)print p.subn(func, s)print p.subn(func, s, 1) æ‰§è¡Œç»“æžœï¼š 1234(&apos;hello world, hello world&apos;, 2)(&apos;123 hello, 456 hello&apos;, 2)(&apos;hi 123, hi 456&apos;, 2)(&apos;hi 123, hello 456&apos;, 1) å…¶ä»–å‡½æ•°äº‹å®žä¸Šï¼Œä½¿ç”¨ compile å‡½æ•°ç”Ÿæˆçš„ Pattern å¯¹è±¡çš„ä¸€ç³»åˆ—æ–¹æ³•è·Ÿ re æ¨¡å—çš„å¤šæ•°å‡½æ•°æ˜¯å¯¹åº”çš„ï¼Œä½†åœ¨ä½¿ç”¨ä¸Šæœ‰ç»†å¾®å·®åˆ«ã€‚ match å‡½æ•°match å‡½æ•°çš„ä½¿ç”¨å½¢å¼å¦‚ä¸‹ï¼š 1re.match(pattern, string[, flags]): å…¶ä¸­ï¼Œpattern æ˜¯æ­£åˆ™è¡¨è¾¾å¼çš„å­—ç¬¦ä¸²å½¢å¼ï¼Œæ¯”å¦‚ \d+, [a-z]+ã€‚ è€Œ Pattern å¯¹è±¡çš„ match æ–¹æ³•ä½¿ç”¨å½¢å¼æ˜¯ï¼š 1match(string[, pos[, endpos]]) å¯ä»¥çœ‹åˆ°ï¼Œmatch å‡½æ•°ä¸èƒ½æŒ‡å®šå­—ç¬¦ä¸²çš„åŒºé—´ï¼Œå®ƒåªèƒ½æœç´¢å¤´éƒ¨ï¼Œçœ‹çœ‹ä¾‹å­ï¼š 12345678910111213import rem1 = re.match(r'\d+', 'One12twothree34four')if m1: print 'matching string:',m1.group()else: print 'm1 is:',m1m2 = re.match(r'\d+', '12twothree34four')if m2: print 'matching string:', m2.group()else: print 'm2 is:',m2 æ‰§è¡Œç»“æžœï¼š 12m1 is: Nonematching string: 12 search å‡½æ•°search å‡½æ•°çš„ä½¿ç”¨å½¢å¼å¦‚ä¸‹ï¼š 1re.search(pattern, string[, flags]) search å‡½æ•°ä¸èƒ½æŒ‡å®šå­—ç¬¦ä¸²çš„æœç´¢åŒºé—´ï¼Œç”¨æ³•è·Ÿ Pattern å¯¹è±¡çš„ search æ–¹æ³•ç±»ä¼¼ã€‚ findall å‡½æ•°findall å‡½æ•°çš„ä½¿ç”¨å½¢å¼å¦‚ä¸‹ï¼š 1re.findall(pattern, string[, flags]) findall å‡½æ•°ä¸èƒ½æŒ‡å®šå­—ç¬¦ä¸²çš„æœç´¢åŒºé—´ï¼Œç”¨æ³•è·Ÿ Pattern å¯¹è±¡çš„ findall æ–¹æ³•ç±»ä¼¼ã€‚ çœ‹çœ‹ä¾‹å­ï¼š 123456import reprint re.findall(r'\d+', 'hello 12345 789')# è¾“å‡º['12345', '789'] finditer å‡½æ•°finditer å‡½æ•°çš„ä½¿ç”¨æ–¹æ³•è·Ÿ Pattern çš„ finditer æ–¹æ³•ç±»ä¼¼ï¼Œå½¢å¼å¦‚ä¸‹ï¼š 1re.finditer(pattern, string[, flags]) split å‡½æ•°split å‡½æ•°çš„ä½¿ç”¨å½¢å¼å¦‚ä¸‹ï¼š 1re.split(pattern, string[, maxsplit]) sub å‡½æ•°sub å‡½æ•°çš„ä½¿ç”¨å½¢å¼å¦‚ä¸‹ï¼š 1re.sub(pattern, repl, string[, count]) subn å‡½æ•°subn å‡½æ•°çš„ä½¿ç”¨å½¢å¼å¦‚ä¸‹ï¼š 1re.subn(pattern, repl, string[, count]) åˆ°åº•ç”¨å“ªç§æ–¹å¼ä»Žä¸Šæ–‡å¯ä»¥çœ‹åˆ°ï¼Œä½¿ç”¨ re æ¨¡å—æœ‰ä¸¤ç§æ–¹å¼ï¼š ä½¿ç”¨ re.compile å‡½æ•°ç”Ÿæˆä¸€ä¸ª Pattern å¯¹è±¡ï¼Œç„¶åŽä½¿ç”¨ Pattern å¯¹è±¡çš„ä¸€ç³»åˆ—æ–¹æ³•å¯¹æ–‡æœ¬è¿›è¡ŒåŒ¹é…æŸ¥æ‰¾ï¼› ç›´æŽ¥ä½¿ç”¨ re.match, re.search å’Œ re.findall ç­‰å‡½æ•°ç›´æŽ¥å¯¹æ–‡æœ¬åŒ¹é…æŸ¥æ‰¾ï¼› ä¸‹é¢ï¼Œæˆ‘ä»¬ç”¨ä¸€ä¸ªä¾‹å­å±•ç¤ºè¿™ä¸¤ç§æ–¹æ³•ã€‚ å…ˆçœ‹ç¬¬ 1 ç§ç”¨æ³•ï¼š 12345678import re# å°†æ­£åˆ™è¡¨è¾¾å¼å…ˆç¼–è¯‘æˆ Pattern å¯¹è±¡pattern = re.compile(r'\d+')print pattern.match('123, 123')print pattern.search('234, 234')print pattern.findall('345, 345') å†çœ‹ç¬¬ 2 ç§ç”¨æ³•ï¼š 12345import reprint re.match(r'\d+', '123, 123')print re.search(r'\d+', '234, 234')print re.findall(r'\d+', '345, 345') å¦‚æžœä¸€ä¸ªæ­£åˆ™è¡¨è¾¾å¼éœ€è¦ç”¨åˆ°å¤šæ¬¡ï¼ˆæ¯”å¦‚ä¸Šé¢çš„ \d+ï¼‰ï¼Œåœ¨å¤šç§åœºåˆç»å¸¸éœ€è¦è¢«ç”¨åˆ°ï¼Œå‡ºäºŽæ•ˆçŽ‡çš„è€ƒè™‘ï¼Œæˆ‘ä»¬åº”è¯¥é¢„å…ˆç¼–è¯‘è¯¥æ­£åˆ™è¡¨è¾¾å¼ï¼Œç”Ÿæˆä¸€ä¸ª Pattern å¯¹è±¡ï¼Œå†ä½¿ç”¨è¯¥å¯¹è±¡çš„ä¸€ç³»åˆ—æ–¹æ³•å¯¹éœ€è¦åŒ¹é…çš„æ–‡ä»¶è¿›è¡ŒåŒ¹é…ï¼›è€Œå¦‚æžœç›´æŽ¥ä½¿ç”¨ re.match, re.search ç­‰å‡½æ•°ï¼Œæ¯æ¬¡ä¼ å…¥ä¸€ä¸ªæ­£åˆ™è¡¨è¾¾å¼ï¼Œå®ƒéƒ½ä¼šè¢«ç¼–è¯‘ä¸€æ¬¡ï¼Œæ•ˆçŽ‡å°±ä¼šå¤§æ‰“æŠ˜æ‰£ã€‚ å› æ­¤ï¼Œæˆ‘ä»¬æŽ¨èä½¿ç”¨ç¬¬ 1 ç§ç”¨æ³•ã€‚ åŒ¹é…ä¸­æ–‡åœ¨æŸäº›æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬æƒ³åŒ¹é…æ–‡æœ¬ä¸­çš„æ±‰å­—ï¼Œæœ‰ä¸€ç‚¹éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œä¸­æ–‡çš„ unicode ç¼–ç èŒƒå›´ ä¸»è¦åœ¨ [\u4e00-\u9fa5]ï¼Œè¿™é‡Œè¯´ä¸»è¦æ˜¯å› ä¸ºè¿™ä¸ªèŒƒå›´å¹¶ä¸å®Œæ•´ï¼Œæ¯”å¦‚æ²¡æœ‰åŒ…æ‹¬å…¨è§’ï¼ˆä¸­æ–‡ï¼‰æ ‡ç‚¹ï¼Œä¸è¿‡ï¼Œåœ¨å¤§éƒ¨åˆ†æƒ…å†µä¸‹ï¼Œåº”è¯¥æ˜¯å¤Ÿç”¨çš„ã€‚ å‡è®¾çŽ°åœ¨æƒ³æŠŠå­—ç¬¦ä¸² title = u&#39;ä½ å¥½ï¼Œhelloï¼Œä¸–ç•Œ&#39; ä¸­çš„ä¸­æ–‡æå–å‡ºæ¥ï¼Œå¯ä»¥è¿™ä¹ˆåšï¼š 123456789# -*- coding: utf-8 -*-import retitle = u'ä½ å¥½ï¼Œhelloï¼Œä¸–ç•Œ'pattern = re.compile(ur'[\u4e00-\u9fa5]+')result = pattern.findall(title)print result æ³¨æ„åˆ°ï¼Œæˆ‘ä»¬åœ¨æ­£åˆ™è¡¨è¾¾å¼å‰é¢åŠ ä¸Šäº†ä¸¤ä¸ªå‰ç¼€ urï¼Œå…¶ä¸­ r è¡¨ç¤ºä½¿ç”¨åŽŸå§‹å­—ç¬¦ä¸²ï¼Œu è¡¨ç¤ºæ˜¯ unicode å­—ç¬¦ä¸²ã€‚ æ‰§è¡Œç»“æžœ: 1[u&apos;\u4f60\u597d&apos;, u&apos;\u4e16\u754c&apos;] è´ªå©ªåŒ¹é…åœ¨ Python ä¸­ï¼Œæ­£åˆ™åŒ¹é…é»˜è®¤æ˜¯è´ªå©ªåŒ¹é…ï¼ˆåœ¨å°‘æ•°è¯­è¨€ä¸­å¯èƒ½æ˜¯éžè´ªå©ªï¼‰ï¼Œä¹Ÿå°±æ˜¯åŒ¹é…å°½å¯èƒ½å¤šçš„å­—ç¬¦ã€‚ æ¯”å¦‚ï¼Œæˆ‘ä»¬æƒ³æ‰¾å‡ºå­—ç¬¦ä¸²ä¸­çš„æ‰€æœ‰ div å—ï¼š 1234567import recontent = 'aa&lt;div&gt;test1&lt;/div&gt;bb&lt;div&gt;test2&lt;/div&gt;cc'pattern = re.compile(r'&lt;div&gt;.*&lt;/div&gt;')result = pattern.findall(content)print result æ‰§è¡Œç»“æžœï¼š 1[&apos;&lt;div&gt;test1&lt;/div&gt;bb&lt;div&gt;test2&lt;/div&gt;&apos;] ç”±äºŽæ­£åˆ™åŒ¹é…æ˜¯è´ªå©ªåŒ¹é…ï¼Œä¹Ÿå°±æ˜¯å°½å¯èƒ½å¤šçš„åŒ¹é…ï¼Œå› æ­¤ï¼Œåœ¨æˆåŠŸåŒ¹é…åˆ°ç¬¬ä¸€ä¸ª &lt;/div&gt; æ—¶ï¼Œå®ƒè¿˜ä¼šå‘å³å°è¯•åŒ¹é…ï¼ŒæŸ¥çœ‹æ˜¯å¦è¿˜æœ‰æ›´é•¿çš„å¯ä»¥æˆåŠŸåŒ¹é…çš„å­ä¸²ã€‚ å¦‚æžœæˆ‘ä»¬æƒ³éžè´ªå©ªåŒ¹é…ï¼Œå¯ä»¥åŠ ä¸€ä¸ª ?ï¼Œå¦‚ä¸‹ï¼š 1234567import recontent = 'aa&lt;div&gt;test1&lt;/div&gt;bb&lt;div&gt;test2&lt;/div&gt;cc'pattern = re.compile(r'&lt;div&gt;.*?&lt;/div&gt;') # åŠ ä¸Š ?result = pattern.findall(content)print result ç»“æžœï¼š 1[&apos;&lt;div&gt;test1&lt;/div&gt;&apos;, &apos;&lt;div&gt;test2&lt;/div&gt;&apos;] å°ç»“ re æ¨¡å—çš„ä¸€èˆ¬ä½¿ç”¨æ­¥éª¤å¦‚ä¸‹ï¼š ä½¿ç”¨ compile å‡½æ•°å°†æ­£åˆ™è¡¨è¾¾å¼çš„å­—ç¬¦ä¸²å½¢å¼ç¼–è¯‘ä¸ºä¸€ä¸ª Pattern å¯¹è±¡ï¼› é€šè¿‡ Pattern å¯¹è±¡æä¾›çš„ä¸€ç³»åˆ—æ–¹æ³•å¯¹æ–‡æœ¬è¿›è¡ŒåŒ¹é…æŸ¥æ‰¾ï¼ŒèŽ·å¾—åŒ¹é…ç»“æžœï¼ˆä¸€ä¸ª Match å¯¹è±¡ï¼‰ï¼› æœ€åŽä½¿ç”¨ Match å¯¹è±¡æä¾›çš„å±žæ€§å’Œæ–¹æ³•èŽ·å¾—ä¿¡æ¯ï¼Œæ ¹æ®éœ€è¦è¿›è¡Œå…¶ä»–çš„æ“ä½œï¼› Python çš„æ­£åˆ™åŒ¹é…é»˜è®¤æ˜¯è´ªå©ªåŒ¹é…ã€‚ å‚è€ƒèµ„æ–™ reæ¨¡å—]]></content>
      <categories>
        <category>Python</category>
      </categories>
      <tags>
        <tag>æ¨¡å—</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[pythonæ¨¡å—ä¹‹hashlib]]></title>
    <url>%2F2018%2F10%2F19%2Fpython%E6%A8%A1%E5%9D%97%E4%B9%8Bhashlib%2F</url>
    <content type="text"><![CDATA[ä¸€ ä»€ä¹ˆæ˜¯hashlibæ¨¡å—ï¼Ÿhashlibæ¨¡å—æ˜¯pythonç”¨æ¥åŠ å¯†çš„ä¸€ä¸ªæ¨¡å—ï¼Œhashæ˜¯ä¸€ç§ç®—æ³•ï¼Œå¯ä»¥æä¾›SHA1ã€SHA224ã€SHA256ã€SHA384ã€SHA512ã€MD%ç®—æ³•ï¼Œè¯¥ç®—æ³•æŽ¥æ”¶ä¼ å…¥çš„å†…å®¹ï¼Œç»è¿‡è¿ç®—å¾—åˆ°ä¸€ä¸²hashå€¼ã€‚ hashæ˜¯ä¸€ç§ç®—æ³•ï¼Œæ˜¯å°†ä¸€ä¸ªä»»æ„é•¿åº¦çš„æ•°æ®ï¼Œæ ¹æ®è®¡ç®—ï¼Œå¾—åˆ°ä¸€ä¸ªå›ºå®šé•¿åº¦çš„hashå€¼ã€‚ ç»è¿‡hashç®—æ³•ä¼šå¾—åˆ°ä¸€ä¸²hashå€¼ï¼Œhashå€¼å¾—ç‰¹ç‚¹å¦‚ä¸‹ï¼š åªè¦ä¼ å…¥çš„å†…å®¹ä¸€æ ·ï¼Œå¾—åˆ°çš„hashå€¼å¿…ç„¶ä¸€æ · â€”ã€‹ã€‹è¦ç”¨æ˜Žæ–‡ä¼ è¾“å¯†ç æ–‡ä»¶å®Œæ•´æ€§æ ¡éªŒ æŒ‰ç†æ¥è¯´ä¸èƒ½æœ‰hashå€¼è¿”è§£å›žåŽŸå†…å®¹ï¼Œä½†æ˜¯ç ´è§£md5ä½¿ç”¨æ’žåº“åŽŸç†ä¹Ÿå˜å¾—ä¸å®‰å…¨èµ·æ¥ åªè¦ä½¿ç”¨çš„hashç®—æ³•ä¸å˜ï¼Œæ— è®ºæ ¡éªŒçš„å†…å®¹æœ‰å¤šå¤§ï¼Œå¾—åˆ°çš„hashå€¼é•¿åº¦æ˜¯å›ºå®šçš„ hashç®—æ³•å°±åƒä¸€åº§å·¥åŽ‚ï¼Œå·¥åŽ‚æŽ¥æ”¶ä½ é€æ¥çš„åŽŸææ–™ï¼Œï¼ˆå¯ä»¥ä½¿ç”¨m.update()ä¸ºå·¥åŽ‚å¢žåŠ ææ–™ï¼‰ï¼Œç»è¿‡åŠ å·¥è¿”å›žçš„äº§å“å°±æ˜¯hashå€¼ã€‚ äºŒ ä½¿ç”¨åœºæ™¯ å¯†ç éªŒè¯ æ ¡éªŒæ•°æ®åŒ… æå‡å¯†ç çš„å¤æ‚åº¦ ä¸‰ hashlibæ¨¡å—çš„ä½¿ç”¨ md5ä½¿ç”¨ 123import hashlibm = hashlib.md5('musibii'.encode('utf-8'))print(m.hexdigest()) 12# è¿è¡Œç»“æžœ02797a3eebd7ef3054cd5c0e3a8c3199 å…¶ä»–å‡ ç§åŠ å¯† 12345678910import hashlibh1 = hashlib.sha512("musibii".encode("utf-8"))h2 = hashlib.sha3_512("musibii".encode("utf-8"))# print(len(h.hexdigest()))print(h1.hexdigest())print(h2.hexdigest())# è¿è¡Œç»“æžœ458c46307cbe022bcd948462b2160c33f0821ea7c1d4ad0a9eb473a6448a850879c23075d6898f86f0093531ee33bde7565f0321ad516894071b73a5dc77626abfb5d77e45e99c5280bc1167113fe1e3666e350c6eac9475e66edb91c247e56fb014475c92f8140e601c2238f165a5cc14d5192ae5147acee4185476b65f613e åŠ ç› 123456import hashlibm = hashlib.md5('musibii'.encode('utf-8'))m.update('thales'.encode('utf-8'))print(m.hexdigest())# è¿è¡Œç»“æžœb2bb467965df30aaa14f677c3b3358d1 hmacåŠ å¯† å’ŒMD5ç­‰ç®—æ³•æ²¡ä»€ä¹ˆåŒºåˆ«,ä¸»è¦çš„åŒºåˆ«æ˜¯å¿…é¡»åŠ ç›. 123456import hmach = hmac.new('musibii'.encode('utf-8'))h.update('thales'.encode('utf-8'))print(h.hexdigest())# è¿è¡Œç»“æžœe26b77208fb858f7f8f78965f8ea4f47]]></content>
      <categories>
        <category>Python</category>
      </categories>
      <tags>
        <tag>æ¨¡å—</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[pythonæ¨¡å—ä¹‹logging]]></title>
    <url>%2F2018%2F10%2F19%2Fpython%E6%A8%A1%E5%9D%97%E4%B9%8Blogging%2F</url>
    <content type="text"><![CDATA[ä¸€ æ—¥å¿—è®°å½•çš„é‡è¦æ€§â€‹ åœ¨å¼€å‘è¿‡ç¨‹ä¸­ï¼Œå¦‚æžœç¨‹åºè¿è¡Œå‡ºçŽ°äº†é—®é¢˜ï¼Œé€šå¸¸å¯ä»¥ç»è¿‡debugæ¥æ£€æµ‹åˆ°åº•æ˜¯å“ªä¸€æ­¥å‡ºçŽ°äº†é—®é¢˜ï¼Œå¦‚æžœå‡ºçŽ°äº†é—®é¢˜çš„è¯ï¼Œæ˜¯æ¯”è¾ƒå®¹æ˜“æŽ’æŸ¥å‡ºé—®é¢˜çš„ã€‚ä½†æ˜¯ç¨‹åºå¼€å‘å®Œæˆä¹‹åŽï¼Œéƒ¨ç½²åˆ°ç”Ÿäº§çŽ¯å¢ƒä¸­åŽ»ï¼Œè¿™æ—¶å€™ä»£ç ç›¸å½“äºŽæ˜¯åœ¨ä¸€ä¸ªé»‘ç›’çŽ¯å¢ƒä¸‹è¿è¡Œçš„ï¼Œæˆ‘ä»¬åªèƒ½çœ‹åˆ°å…¶è¿è¡Œçš„æ•ˆæžœï¼Œæ˜¯ä¸èƒ½ç›´æŽ¥çœ‹åˆ°ä»£ç è¿è¡Œè¿‡ç¨‹ä¸­çš„æ¯ä¸€æ­¥çŠ¶æ€çš„ã€‚åœ¨ç”Ÿäº§çŽ¯å¢ƒæ—¢ä¸èƒ½é€šè¿‡debugæ¥æŽ’æŸ¥é—®é¢˜ï¼Œæ›´ä¸èƒ½å°†ç”Ÿäº§çŽ¯å¢ƒä¸‹çº¿æ¥æŽ’æŸ¥é—®é¢˜ï¼Œæ‰€ä»¥è¿™æ—¶å€™è®°å½•æ—¥å¿—å°±å¾ˆé‡è¦äº†ã€‚ â€‹ å¦‚æžœæˆ‘ä»¬çŽ°åœ¨åªèƒ½å¾—çŸ¥å½“å‰é—®é¢˜çš„çŽ°è±¡ï¼Œè€Œæ²¡æœ‰å…¶ä»–ä»»ä½•ä¿¡æ¯çš„è¯ï¼Œå¦‚æžœæƒ³è¦è§£å†³æŽ‰è¿™ä¸ªé—®é¢˜çš„è¯ï¼Œåªèƒ½é€šè¿‡é—®é¢˜å‡ºçŽ°çš„å½¢å¼æ¥å°è¯•é‡çŽ°bugï¼Œç„¶åŽåœ¨ä¸€æ­¥ä¸€æ­¥çš„è°ƒè¯•ï¼Œè¿™ææ€•æ˜¯éš¾çš„ï¼Œè¿™æ ·å¾ˆå¤§çš„æ¦‚çŽ‡æ˜¯æ— æ³•ç²¾å‡†çš„å¤çŽ°è¿™ä¸ªé—®é¢˜çš„ï¼Œè€Œä¸”debugçš„è¿‡ç¨‹ä¸­ä¹Ÿä¼šè€—è´¹å·¨å¤šçš„æ—¶é—´ï¼Œè¿™æ ·å¦‚æžœåœ¨ç”Ÿäº§çŽ¯å¢ƒä¸Šå‡ºçŽ°äº†é—®é¢˜çš„è¯ï¼Œä¿®å¤bugå°±ä¼šå˜å¾—éžå¸¸æ£˜æ‰‹ã€‚ä½†æ˜¯å¦‚æžœæœ‰æ—¥å¿—è®°å½•çš„è¯ï¼Œä¸è®ºæ˜¯æ­£å¸¸è¿è¡Œè¿˜æ˜¯æŠ¥é”™ï¼Œéƒ½æœ‰ç›¸å…³çš„æ—¶é—´è®°å½•ã€çŠ¶æ€è®°å½•ã€é”™è¯¯è®°å½•ç­‰ï¼Œé‚£ä¹ˆè¿™æ ·æˆ‘ä»¬å°±å¯ä»¥æ–¹ä¾¿çš„è¿½è¸ªåˆ°åœ¨å½“æ—¶çš„è¿è¡Œè¿‡ç¨‹ä¸­å‡ºçŽ°äº†æ€Žæ ·çš„çŠ¶å†µï¼Œä»Žè€Œå¯ä»¥å¿«é€Ÿçš„æŽ’æŸ¥é—®é¢˜ã€‚ â€‹ å› æ­¤ï¼Œä½œä¸ºå¼€å‘è€…è®°å½•ç”Ÿäº§çŽ¯å¢ƒä¸­ä»£ç è¿è¡Œçš„æ—¥å¿—æ˜¯å¾ˆæœ‰å¿…è¦çš„ï¼Œå› æ­¤å­¦å¥½æ€Žä¹ˆè®°å½•æ—¥å¿—è¿‡ç¨‹æ˜¯ä¸€é—¨å¿…ä¿®è¯¾ã€‚ äºŒ æ—¥å¿—è®°å½•çš„æµç¨‹æ¡†æž¶åœ¨pythonä¸­ï¼Œæ€Žæ ·æ‰èƒ½ç®—åšä¸€ä¸ªæ¯”è¾ƒæ ‡å‡†çš„æ—¥å¿—è®°å½•å‘¢ï¼Ÿåƒæˆ‘ä¹‹å‰éƒ½æ˜¯ä½¿ç”¨æŽ§åˆ¶å°æŸ¥çœ‹ç»“æžœæˆ–è€…debugæŸ¥çœ‹è¿è¡ŒçŠ¶æ€çš„ï¼Œå¯¹äºŽä¸€ä¸ªå°é¡¹ç›®æ¥è¯´ï¼Œdebugå·²ç»è¶³å¤Ÿäº†ï¼Œä½†æ˜¯å¯¹äºŽä¸€ä¸ªå¤§é¡¹ç›®æ¥è¯´ä¸€æ­¥ä¸€æ­¥è°ƒè¯•è´¹æ—¶è´¹åŠ›ï¼Œè€Œä¸”å¾—åˆ°çš„æ¶ˆæ¯ä¹Ÿä¸ä¸€å®šå…¨é¢ï¼Œå¦‚æžœè‡ªå·±å¯ä»¥å®šä¹‰è¾“å‡ºçš„è°ƒè¯•ä¿¡æ¯é‚£ä¹ˆå¯¹äºŽè°ƒè¯•æ¥è®²æ˜¯ä»¶å¾ˆèŠ‚çœæ—¶é—´çš„äº‹ã€‚ åœ¨pythonä¸­ä¸“é—¨æœ‰ä¸€ä¸ªç”¨æ¥è®°å½•æ—¥å¿—çš„æ¨¡å—loggingï¼Œå¯ä»¥ç”¨å®ƒæ¥è¿›è¡Œæ ‡æ³¨çš„æ—¥å¿—è®°å½•ï¼Œåˆ©ç”¨å®ƒæˆ‘ä»¬å¯ä»¥æ›´æ–¹ä¾¿çš„è¿›è¡Œæ—¥å¿—è®°å½•ï¼ŒåŒæ—¶è¿˜å¯ä»¥åšæ›´æ–¹ä¾¿çš„çº§åˆ«åŒºåˆ†ä»¥åŠä¸€äº›é¢å¤–çš„æ—¥å¿—ä¿¡æ¯çš„è®°å½•ï¼Œå¦‚æ—¶é—´ã€è¿è¡Œæ¨¡å—ä¿¡æ¯ç­‰ã€‚ é‚£ä¹ˆå®Œæ•´çš„æ—¥å¿—è®°å½•æµç¨‹æ¡†æž¶æ˜¯ä»€ä¹ˆæ ·å‘¢ï¼Ÿ å¦‚å›¾æ‰€ç¤ºï¼Œæ•´ä¸ªæ—¥å¿—è®°å½•çš„æ¡†æž¶å¯ä»¥åˆ†ä¸ºè¿™ä¹ˆå‡ ä¸ªéƒ¨åˆ†ï¼š Loggerï¼šå³Logger Main Classï¼Œæ˜¯æˆ‘ä»¬è¿›è¡Œæ—¥å¿—è®°å½•æ˜¯åˆ›å»ºçš„å¯¹è±¡ï¼Œå¯ä»¥è°ƒç”¨Loggerçš„æ–¹æ³•ä¼ å…¥æ—¥å¿—æ¨¡æ¿å’Œä¿¡æ¯ï¼Œæ¥ç”Ÿæˆä¸€æ¡æ¡æ—¥å¿—è®°å½•ï¼Œç§°ä½œLog Recordã€‚ Log Recordï¼šå°±ä»£æŒ‡ç”Ÿæˆçš„ä¸€æ¡æ¡æ—¥å¿—è®°å½•ã€‚ Handlerï¼šå³ç”¨æ¥å¤„ç†æ—¥å¿—è®°å½•çš„ç±»ï¼Œå®ƒå¯ä»¥å°†Log Recordè¾“å‡ºåˆ°æˆ‘ä»¬æŒ‡å®šçš„æ—¥å¿—ä½ç½®å’Œå­˜å‚¨å½¢å¼ç­‰ï¼Œå¦‚æˆ‘ä»¬å¯ä»¥æŒ‡å®šè¾“å…¥åˆ°å…·ä½“çš„æ–‡ä»¶ã€æˆ–è€…å¯ä»¥æŒ‡å®šå°†æ—¥å¿—é€šè¿‡FTPåè®®è®°å½•åˆ°è¿œç¨‹çš„æœåŠ¡å™¨ä¸Šï¼ŒHandlerå°±ä¼šå¸®æˆ‘ä»¬å®Œæˆè¿™äº›äº‹æƒ…ã€‚ Formatterï¼šå®žé™…ä¸Šç”Ÿæˆçš„Log Recordä¹Ÿæ˜¯ä¸€ä¸ªä¸ªå¯¹è±¡ï¼Œé‚£ä¹ˆæˆ‘ä»¬æƒ³è¦æŠŠå®ƒä»¬ä¿å­˜æˆä¸€æ¡æ¡æˆ‘ä»¬æƒ³è¦çš„æ—¥å¿—æ–‡æœ¬çš„è¯ï¼Œå°±éœ€è¦æœ‰ä¸€ä¸ªæ ¼å¼åŒ–çš„è¿‡ç¨‹ï¼Œé‚£ä¹ˆè¿™ä¸ªè¿‡ç¨‹å°±æœ‰Formatteræ¥å®Œæˆï¼Œè¿”å›žçš„å°±æ˜¯æ—¥å¿—å­—ç¬¦ä¸²ï¼Œç„¶åŽä¼ å›žç»™Handleræ¥å¤„ç†ã€‚ Filterï¼šå¦å¤–ä¿å­˜æ—¥å¿—çš„æ—¶å€™æˆ‘ä»¬å¯èƒ½ä¸éœ€è¦å…¨éƒ¨ä¿å­˜ï¼Œåªéœ€è¦ä¿å­˜æˆ‘ä»¬æƒ³è¦çš„éƒ¨åˆ†å°±å¯ä»¥äº†ï¼Œæ‰€ä»¥åœ¨ä¿å­˜çš„æ—¶å€™éœ€è¦è¿›ä¸€æ­¥è¿‡æ»¤ï¼Œç•™ä¸‹æƒ³è¦çš„æ—¥å¿—ä¿¡æ¯ï¼Œå¦‚åªä¿å­˜æŸä¸ªçº§åˆ«çš„æ—¥å¿—ï¼Œé‚£ä¹ˆè¿™ä¸ªè¿‡æ»¤è¿‡ç¨‹å°±å¯ä»¥äº¤ç»™Filteræ¥å®Œæˆã€‚ Parent Handlerï¼šHandlerä¹‹é—´å¯ä»¥å­˜åœ¨åˆ†å±‚å…³ç³»ï¼Œä»¥ä½¿å¾—ä¸åŒHandlerä¹‹é—´å…±äº«æƒ³é€šåŠŸèƒ½çš„ä»£ç ã€‚ è¿™äº›å°±æ˜¯æ•´ä¸ªloggingæ¨¡å—çš„åŸºæœ¬æž¶æž„å’Œå¯¹è±¡åŠŸèƒ½ã€‚ ä¸‰ æ—¥å¿—è®°å½•çš„ç›¸å…³ç”¨æ³•loggingæ¨¡å—æœ‰å¦‚ä¸‹å‡ ä¸ªä¼˜ç‚¹ï¼š å¯ä»¥åœ¨loggingæ¨¡å—ä¸­è®¾ç½®æ—¥å¿—ç­‰çº§ï¼Œåœ¨ä¸åŒçš„ç‰ˆæœ¬ï¼ˆå¦‚å¼€å‘çŽ¯å¢ƒã€ç”Ÿäº§çŽ¯å¢ƒï¼‰ä¸Šé€šè¿‡è®¾ç½®ä¸åŒçš„è¾“å‡ºç­‰çº§æ¥è®°å½•ç›¸åº”çš„æ—¥å¿—ã€‚ loggingæ¨¡å—ä¸ä»…å¯ä»¥æŠŠè¾“å‡ºä¿¡æ¯è¾“å‡ºåˆ°æŽ§åˆ¶å°ï¼Œè¿˜å¯ä»¥è®¾ç½®è¾“å‡ºåˆ°ä»»æ„ä½ç½®ï¼Œå¦‚å†™å…¥æ–‡ä»¶ã€å†™å…¥è¿œç¨‹æœåŠ¡å™¨ç­‰ã€‚ loggingæ¨¡å—å…·æœ‰çµæ´»çš„é…ç½®å’Œæ ¼å¼åŒ–åŠŸèƒ½ï¼Œå¦‚é…ç½®è¾“å‡ºå½“å‰æ¨¡å—ä¿¡æ¯ã€è¿è¡Œæ—¶é—´ç­‰ï¼Œç›¸æ¯”printçš„å­—ç¬¦ä¸²æ ¼å¼åŒ–æ›´åŠ æ–¹ä¾¿æ˜“ç”¨ã€‚ å›› æ—¥å¿—è®°å½•çš„ç›¸å…³ç”¨æ³•ä¸€ æ—¥å¿—çº§åˆ«æ—¥å¿—çº§åˆ«åˆ†ä¸ºäº”ä¸ªçº§åˆ«ï¼š ç­‰çº§ æ•°å€¼ CRITICAL 50 FATAL 50 ERROR 40 WARNING 30 WARN 30 INFO 20 DEBUG 10 NOTSET 0 è¿™é‡Œæœ€é«˜çš„ç­‰çº§æ˜¯ CRITICAL å’Œ FATALï¼Œä¸¤ä¸ªå¯¹åº”çš„æ•°å€¼éƒ½æ˜¯ 50ï¼Œå¦å¤–å¯¹äºŽ WARNING è¿˜æä¾›äº†ç®€å†™å½¢å¼ WARNï¼Œä¸¤ä¸ªå¯¹åº”çš„æ•°å€¼éƒ½æ˜¯ 30ã€‚ æˆ‘ä»¬è®¾ç½®äº†è¾“å‡º levelï¼Œç³»ç»Ÿä¾¿åªä¼šè¾“å‡º level æ•°å€¼å¤§äºŽæˆ–ç­‰äºŽè¯¥ level çš„çš„æ—¥å¿—ç»“æžœï¼Œä¾‹å¦‚æˆ‘ä»¬è®¾ç½®äº†è¾“å‡ºæ—¥å¿— level ä¸º INFOï¼Œé‚£ä¹ˆè¾“å‡ºçº§åˆ«å¤§äºŽç­‰äºŽ INFO çš„æ—¥å¿—ï¼Œå¦‚ WARNINGã€ERROR ç­‰ï¼ŒDEBUG å’Œ NOSET çº§åˆ«çš„ä¸ä¼šè¾“å‡ºã€‚ åœ¨loggingæ¨¡å—ä¸­æœ‰å¯¹åº”çš„å¸¸é‡ç”¨æ¥æ ‡è¯†çº§åˆ«ï¼Œé»˜è®¤æƒ…å†µä¸‹ï¼Œé»˜è®¤çš„logçº§åˆ«æ˜¯warningï¼ˆ30ï¼‰ï¼Œé»˜è®¤è¾“å‡ºåˆ°æŽ§åˆ¶å°ã€‚ äºŒ è‡ªå®šä¹‰æ—¥å¿—çš„é…ç½®12345678# test.pyimport logginglogging.basicConfig(level=logging.INFO, format='%(asctime)s - %(name)s - %(levelname)s - %(message)s')logger = logging.getLogger(__name__)logger.info('log info')logger.debug('log debug')logger.warning('log warning')logger.critical('log critical') åœ¨è¿™é‡Œé¦–å…ˆå¯¼å…¥loggingæ¨¡å—ï¼Œç„¶åŽè¿›è¡Œäº†ä¸€ä¸‹åŸºæœ¬çš„é…ç½®ï¼Œé€šè¿‡basicConfigé…ç½®äº†levelçº§åˆ«å’Œformatæ ¼å¼åŒ–ä¿¡æ¯ï¼Œlevelé…ç½®ä¸ºINFOçº§åˆ«ï¼Œåªè¾“å‡ºå¤§äºŽç­‰äºŽINFOçº§åˆ«çš„ä¿¡æ¯ï¼Œformatæ ¼å¼çš„å­—ç¬¦ä¸²ï¼ŒåŒ…æ‹¬asctimeã€nameã€levelnameã€messageå››ä¸ªå†…å®¹ï¼Œåˆ†åˆ«ä»£è¡¨è¿è¡Œæ—¶é—´ã€æ¨¡å—åç§°ã€æ—¥å¿—çº§åˆ«ã€æ—¥å¿—å†…å®¹ï¼Œè¿™æ ·è¾“å‡ºå†…å®¹ä¾¿ä¸ºè¿™å››ä¸ªå†…å®¹çš„ä¿¡æ¯äº†ï¼Œè¿™å°±æ˜¯loggingå…¨å±€é…ç½®ã€‚ æŽ¥ä¸‹æ¥å£°æ˜Žäº†ä¸€ä¸ªLoggerå¯¹è±¡ï¼Œæ˜¯æ—¥å¿—è¾“å‡ºçš„ä¸»ç±»ï¼Œè°ƒç”¨å¯¹è±¡çš„info()æ–¹æ³•å¯ä»¥è¾“å‡ºINFOçº§åˆ«çš„æ—¥å¿—ä¿¡æ¯ï¼Œè°ƒç”¨debug()æ–¹æ³•å°±å¯ä»¥è¾“å‡ºDEBUGçº§åˆ«çš„æ—¥å¿—ä¿¡æ¯ï¼Œå…¶ä»–çº§åˆ«çš„æ—¥å¿—ä¿¡æ¯åŒç†å¯ä»¥è¾“å‡ºã€‚åˆå§‹åŒ–loggeræ—¶ä¼ å…¥äº†nameæ¥ä»£æ›¿ä¼ å…¥æ¨¡å—çš„åç§°ï¼Œå¦‚æžœç›´æŽ¥è¿è¡Œè¯¥è„šæœ¬åˆ™å€¼ä¸ºmain,å¦‚æžœä½œä¸ºæ¨¡å—è¢«importçš„è¯ï¼Œåˆ™å°±æ˜¯è¢«å¯¼å…¥æ¨¡å—çš„åç§°ä¸ºtest.pyï¼Œå› ä¸ºåœ¨ä¸åŒçš„æ¨¡å—ä¸­è¯¥å€¼ä¸åŒï¼Œæ‰€ä»¥ç›´æŽ¥ä½¿ç”¨nameä»£æ›¿ï¼Œç„¶åŽè¾“å‡ºäº†å››æ¡æ—¥å¿—ä¿¡æ¯ï¼Œå…¶ä¸­æœ‰ä¸€æ¡INFOä¿¡æ¯ï¼Œä¸€æ¡DEBUGä¿¡æ¯ï¼Œä¸€æ¡WARNINGä¿¡æ¯ï¼Œä¸€æ¡CRITICALä¿¡æ¯ï¼Œå› ä¸ºè®¾ç½®çš„levelä¸ºINFOï¼Œæ‰€ä»¥ä½ŽäºŽINFOçš„çº§åˆ«æ—¥å¿—ä¼šè¢«è¿‡æ»¤ï¼Œæ‰€ä»¥DEBUGæ—¥å¿—ä¿¡æ¯ä¼šè¢«è¿‡æ»¤ã€‚ ä¸‰ basicConfigçš„å…·ä½“å‚æ•°basicConfigæ˜¯ç”¨ä½œå…¨å±€çš„æ—¥å¿—é…ç½®ï¼ŒbasicConfigçš„å‚æ•°æœ‰ï¼š filenameï¼šæ—¥å¿—è¾“å‡ºçš„æ–‡ä»¶åï¼Œå¦‚æžœæŒ‡å®šäº†è¿™ä¸ªä¿¡æ¯ä¹‹åŽï¼Œä¸ä¼šä½¿ç”¨é»˜è®¤çš„StreamHandlerï¼Œä¼šä½¿ç”¨FileHandleræ¥å°†æ—¥å¿—ä¿¡æ¯è¾“å…¥åˆ°æŒ‡å®šçš„æ–‡ä»¶ä¸­ã€‚ filemodeï¼šè¯¥å‚æ•°ä¸ºæŒ‡å®šæ—¥å¿—æ–‡ä»¶çš„å†™å…¥æ–¹å¼ï¼Œæœ‰ä¸¤ç§å½¢å¼ï¼Œä¸€ç§ä¸ºwï¼Œä¸€ç§ä¸ºaï¼Œåˆ†åˆ«ä»£è¡¨è¦†ç›–å†™å…¥å’Œè¿½åŠ å†™å…¥ã€‚ formatï¼šæŒ‡å®šæ—¥å¿—ä¿¡æ¯çš„è¾“å‡ºæ ¼å¼ï¼Œå³ä¸Šæ–‡ç¤ºä¾‹æ‰€ç¤ºçš„å‚æ•°ï¼Œéƒ¨åˆ†å‚æ•°å¦‚ä¸‹ï¼š %(levelno)sï¼šæ‰“å°æ—¥å¿—çº§åˆ«çš„å€¼ï¼› %(levelname)sï¼šæ‰“å°æ—¥å¿—çº§åˆ«çš„åç§°ï¼› %(pathname)sï¼šæ‰“å°å½“å‰æ‰§è¡Œç¨‹åºçš„è·¯å¾„ï¼Œå…¶å®žå°±æ˜¯sys.argv[0]ï¼› %(filenam)sï¼šæ‰“å°å½“å‰æ‰§è¡Œç¨‹åºåï¼› %(funcName)sï¼šæ‰“å°æ—¥å¿—çš„å½“å‰å‡½æ•°ï¼› %(lineno)sï¼šæ‰“å°æ—¥å¿—çš„å½“å‰è¡Œå·ï¼› %(asctime)sï¼šæ‰“å°æ—¥å¿—çš„æ—¶é—´ï¼› %(thread)sï¼šæ‰“å°çº¿ç¨‹idï¼› %(threadName)sï¼šæ‰“å°çº¿ç¨‹åç§°ï¼› %(process)sï¼šæ‰“å°è¿›ç¨‹idï¼› %(processName)sï¼šæ‰“å°è¿›ç¨‹åç§°ï¼› %(module)sï¼šæ‰“å°æ¨¡å—åç§°ï¼› %(message)sï¼šæ‰“å°æ—¥å¿—ä¿¡æ¯ã€‚ datefmtï¼šæŒ‡å®šæ—¶é—´çš„è¾“å‡ºæ ¼å¼ã€‚ styleï¼šå¦‚æžœformatå‚æ•°åˆ¶å®šäº†ï¼Œè¿™ä¸ªå‚æ•°å°±å¯ä»¥æŒ‡å®šæ ¼å¼åŒ–æ—¶çš„å ä½ç¬¦é£Žæ ¼ï¼Œå¦‚%ã€{ã€$ç­‰ã€‚ levelï¼šæŒ‡å®šæ—¥å¿—è¾“å‡ºçš„ç±»åˆ«ï¼Œç¨‹åºä¼šè¾“å‡ºå¤§äºŽç­‰äºŽæ­¤çº§åˆ«çš„ä¿¡æ¯ã€‚ streamï¼šåœ¨æ²¡æœ‰æŒ‡å®šfilenameçš„æ—¶å€™ä¼šé»˜è®¤ä½¿ç”¨StreamHandlerï¼Œè¿™æ—¶streamå¯ä»¥æŒ‡å®šåˆå§‹åŒ–çš„æ–‡ä»¶æµã€‚ handlersï¼šå¯ä»¥æŒ‡å®šæ—¥å¿—å¤„ç†æ—¶æ‰€ä½¿ç”¨çš„Handlersï¼Œå¿…é¡»æ˜¯å¯è¿­ä»£çš„ã€‚ å›› Formatteré…ç½®åœ¨è¿›è¡Œæ—¥å¿—æ ¼å¼åŒ–è¾“å‡ºçš„æ—¶å€™ï¼Œæˆ‘ä»¬å¯ä»¥ä¸å€ŸåŠ©äºŽbasicConfigæ¥å…¨å±€é…ç½®æ ¼å¼åŒ–è¾“å‡ºå†…å®¹ï¼Œå¯ä»¥å€ŸåŠ©Formatteræ¥å®Œæˆ Formatterç”¨æ³•ï¼š 123456789101112131415import logginglogger = logging.getLogger(__name__)logger.setLevel(level=logging.WARN)formatter = logging.Formatter(fmt='%(asctime)s - %(name)s - %(levelname)s - %(message)s', datefmt='%Y/%m/%d %H:%M:%S')handler = logging.StreamHandler()handler.setFormatter(formatter)logger.addHandler(handler)#loglogger.debug('debug')logger.critical('critical')logger.error('error')logger.warning('warning')logger.info('info') åœ¨è¿™é‡ŒæŒ‡å®šäº†ä¸€ä¸ªFormatterï¼Œå¹¶ä¼ å…¥fmtå’Œdatefmtå‚æ•°ï¼Œè¿™æ ·å°±æŒ‡å®šäº†æ—¥å¿—ç»“æžœçš„è¾“å‡ºæ ¼å¼å’Œæ—¶é—´æ ¼å¼ï¼Œç„¶åŽHandleré€šè¿‡setFormatter()æ–¹æ³•è®¾ç½®æ­¤Formatterå¯¹è±¡å³å¯ï¼Œè¾“å‡ºç»“æžœå¦‚ä¸‹ï¼š 1232018/10/20 00:26:25 - __main__ - CRITICAL - critical2018/10/20 00:26:25 - __main__ - ERROR - error2018/10/20 00:26:25 - __main__ - WARNING - warning è¿™æ ·å¯ä»¥ä¸ºæ¯ä¸ªHandlerå•ç‹¬é…ç½®è¾“å‡ºçš„æ ¼å¼ã€‚ äº” æ•èŽ·Tracbackå¼‚å¸¸ä¿¡æ¯é‡åˆ°é”™è¯¯çš„æ—¶å€™ï¼Œå¸Œæœ›æŠ¥é”™æ—¶å‡ºçŽ°è¯¦ç»†çš„Tracbackä¿¡æ¯ï¼Œä¾¿äºŽæˆ‘ä»¬è°ƒè¯•ï¼Œåˆ©ç”¨loggingæ¨¡å—å¯ä»¥éžå¸¸æ–¹ä¾¿çš„å®žçŽ°è¿™ç§éœ€æ±‚ã€‚ 1234567891011121314151617181920212223import logginglogger = logging.getLogger(__name__)logger.serLevel(level=logging.DEBUG)formatter = logging.Formatter('%(asctime)s - %(name)s - %(levelname)s - %(message)s')file_handler = logging.FileHandler('test.log')file_handler.setFormatter(formatter)logger.addHandler(file_handler)stream_handler = logging.StreamHandler()stream_handler.setFormatter(formatter)logger.addHandler(stream_handler)logger.info('INFO')logger.warning('WARNING')try: num = 1/0except Exception: logger.error('something wrong', exc_info=True) logger.info('end') è¿™é‡Œåœ¨error()æ–¹æ³•ä¸­æ·»åŠ äº†ä¸€ä¸ªå‚æ•°ï¼Œå°†exc_infoè®¾ç½®ä¸ºTrueï¼Œè¿™æ ·å°±å¯ä»¥è¾“å‡ºæ‰§è¡Œè¿‡ç¨‹ä¸­çš„ä¿¡æ¯äº†ï¼Œå³å¯ä»¥è¾“å‡ºå®Œæ•´çš„Tracbackä¿¡æ¯ã€‚ è¿è¡Œç»“æžœå¦‚ä¸‹ï¼š 123456782018-10-20 00:36:38,007 - __main__ - INFO - INFO2018-10-20 00:36:38,007 - __main__ - WARNING - WARNING2018-10-20 00:36:38,007 - __main__ - ERROR - something wrongTraceback (most recent call last): File "/Users/jingxing/PycharmProjects/pythonå…¨æ ˆ/day22/log_test.py", line 58, in &lt;module&gt; num = 1 / 0ZeroDivisionError: division by zero2018-10-20 00:36:38,007 - __main__ - INFO - end è¿™æ ·å¯ä»¥è¯¦ç»†çš„è®°å½•æŠ¥é”™çš„ä¿¡æ¯ï¼Œä¸€æ—¦å‡ºçŽ°äº†é”™è¯¯ï¼Œå¯ä»¥åŠæ—¶çš„å®šä½åˆ°å‡ºçŽ°é—®é¢˜çš„ä»£ç ã€‚ å…­ é…ç½®å…±äº«åœ¨å†™é¡¹ç›®çš„æ—¶å€™ï¼Œè‚¯å®šä¼šæœ‰è®¸å¤šçš„é…ç½®ä¿¡æ¯ï¼Œå¦‚æžœæ¯ä¸ªæ–‡ä»¶éƒ½æ¥é…ç½®loggingçš„è¯éžå¸¸éº»çƒ¦ï¼Œè€Œä¸”å‡ ä¹Žå¾ˆå¤šåœ°æ–¹çš„é…ç½®å‡ ä¹Žå·®ä¸å¤šçš„ï¼Œå› ä¸ºæ­¤åŽŸå› ï¼Œloggingæ¨¡å—æä¾›äº†çˆ¶å­æ¨¡å—å…±äº«é…ç½®çš„æœºåˆ¶ï¼Œä¼šæ ¹æ®Loggerçš„åç§°æ¥è‡ªåŠ¨åŠ è½½çˆ¶æ¨¡å—çš„é…ç½®ã€‚ å®šä¹‰ä¸€ä¸ªmain.pyæ–‡ä»¶ï¼š 12345678910111213141516# main.pyimport loggingimport corelogger = logging.getLogger('main')logger.setLevel(level=logging.DEBUG)handler = logging.FileHandler('test.log')handler.setLevel(logging.INFO)formatter = logging.Formatter('%(asctime)s - %(name)s - %(levelname)s - % (message)s')handler.setFormatter(formatter)logger.addHandler(handler)logging.info('main info')logging.debug('main debug')logging.error('main error')core.run() åœ¨æ‰§è¡Œæ–‡ä»¶é…ç½®äº†æ—¥å¿—çš„è¾“å‡ºæ ¼å¼å’Œæ–‡ä»¶è·¯å¾„ï¼ŒåŒæ—¶å®šä¹‰äº†Loggerçš„åç§°ä¸ºmainï¼Œç„¶åŽå¼•å…¥äº†å¦å¤–ä¸€ä¸ªæ¨¡å—coreï¼Œæœ€åŽè°ƒç”¨äº†coreçš„run()æ–¹æ³•ã€‚ æŽ¥ä¸‹æ¥å®šä¹‰core.pyï¼Œå†…å®¹å¦‚ä¸‹ï¼š 12345678import logginglogger = logging.getLogger('main.core')def run(): logger.info('core info') logger.debug('core debug') logger.error('core error') åœ¨core.pyæ–‡ä»¶é‡Œå®šä¹‰äº†Loggerçš„åç§°ä¸ºmain.coreï¼Œå› ä¸ºä¹‹å‰åœ¨main.pyæ–‡ä»¶é‡Œå®šä¹‰çš„Loggeråç§°ä¸ºmainï¼Œæ‰€ä»¥core.pyé‡Œé¢çš„Loggerå°±ä¼šå¤ç”¨main.pyé‡Œé¢çš„Loggeré…ç½®ï¼Œè€Œä¸ç”¨é‡æ–°ä¸ºcoreé…ç½®æ—¥å¿—äº†ã€‚ è¿è¡Œä¹‹åŽtest.logç»“æžœå¦‚ä¸‹ï¼š 1234562018-10-20 10:15:37,575 - main - INFO 2018-10-20 10:15:37,575 - main - DEBUG 2018-10-20 10:15:37,575 - main - ERROR 2018-10-20 10:15:37,575 - main.core - INFO 2018-10-20 10:15:37,575 - main.core - DEBUG 2018-10-20 10:15:37,575 - main.core - ERROR å¯ä»¥çœ‹å‡ºmainå’Œcoreæ¨¡å—éƒ½æ˜¯ç”¨äº†åŒæ ·çš„è¾“å‡ºé…ç½®ã€‚æ‰€ä»¥åªè¦åœ¨å…¥å£æ–‡ä»¶é‡Œå®šä¹‰å¥½loggingæ¨¡å—çš„è¾“å‡ºé…ç½®ï¼Œå­æ¨¡å—åªéœ€è¦åœ¨å®šä¹‰Loggerå¯¹è±¡æ—¶ä½¿ç”¨çˆ¶æ¨¡å—çš„åç§°å¼€å¤´å°±å¯ä»¥å…±äº«é…ç½®ï¼Œå®žé™…ä¸Šç›´æŽ¥ä½¿ç”¨çˆ¶æ¨¡å—çš„åå­—å°±å¯ä»¥ï¼Œä½†æ˜¯ä¸ºäº†å¢žåŠ è¾¨è¯†åº¦ï¼Œå¯ä»¥åœ¨çˆ¶æ¨¡å—åå­—åŽåŠ ä¸ŠåŽç¼€ã€‚ æŸ¥çœ‹getLoggeræºç å¯å¾—ï¼ŒåŽé¢çš„åå­—å¯ä»¥è‡ªå®šä¹‰ï¼Œç„¶åŽgetLoggeré‡Œé¢ä¼šè‡ªåŠ¨å¸®ä½ åˆ›å»ºä»¥è¯¥åå­—å‘½åçš„æ—¥å¿—ç”Ÿæˆå™¨ï¼Œå…·ä½“è§£é‡Šå¦‚ä¸‹ï¼š 1èŽ·å–å…·æœ‰æŒ‡å®šåç§°ï¼ˆé€šé“åç§°ï¼‰çš„è®°å½•å™¨ï¼Œå¦‚æžœå®ƒå°šä¸å­˜åœ¨åˆ™åˆ›å»ºå®ƒã€‚ æ­¤åç§°æ˜¯ä»¥ç‚¹åˆ†éš”çš„åˆ†å±‚åç§°ï¼Œä¾‹å¦‚â€œaâ€ï¼Œâ€œa.bâ€ï¼Œâ€œa.b.câ€æˆ–ç±»ä¼¼åç§°ã€‚å¦‚æžœæŒ‡å®šåç§°å­˜åœ¨PlaceHolder [å³ loggerdidä¸å­˜åœ¨ï¼Œä½†å®ƒçš„å­èŠ‚ç‚¹å·²ç»å­˜åœ¨]ï¼Œç”¨createdloggeræ›¿æ¢å®ƒï¼Œå¹¶ä¿®å¤æŒ‡å‘å ä½ç¬¦çš„çˆ¶/å­å¼•ç”¨ï¼ŒçŽ°åœ¨æŒ‡å‘è®°å½•å™¨ã€‚ ä¸ƒ æ–‡ä»¶é…ç½®è™½ç„¶å¯ä»¥å†å…¥å£æ–‡ä»¶ä¸­å®šä¹‰å¥½é…ç½®ä¿¡æ¯ï¼Œç„¶åŽå­æ¨¡å—ä¹Ÿå¯ä»¥ä½¿ç”¨å¾ˆæ–¹ä¾¿ï¼Œä½†æ˜¯å› ä¸ºé…ç½®æ–‡ä»¶å¤§éƒ¨åˆ†éƒ½æ˜¯ä¸éœ€è¦æ›´æ”¹çš„ï¼Œåªæ˜¯æŸäº›éœ€è¦æ›´æ”¹ï¼Œåƒè¿™ç§ä¿¡æ¯å¯ä»¥æŠŠé…ç½®å†™å…¥é…ç½®æ–‡ä»¶é‡Œï¼Œç„¶åŽè¿è¡Œæ—¶è¯»å–é…ç½®æ–‡ä»¶é‡Œé¢çš„é…ç½®ï¼Œè¿™æ ·æ›´æ˜“ç»´æŠ¤å’Œä½¿ç”¨ã€‚ é¡¹ç›®ç»“æž„å¦‚ä¸‹ï¼š 123456789# bin/start.pyimport os,syssys.path.append(os.path.dirname(os.path.dirname(__file__)))import core.shopdef run(): print("welcome to here") core.shop.shopping()run() 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647# conf/settingsstandard_format = "%(name)s %(asctime)s %(levelname)s %(module)s %(funcName)s %(lineno)s %(message)s"simple_format = "%(name)s %(asctime)s %(module)s %(message)s"complete_format = "%(asctime)s %(levelname)s %(funcName)s %(lineno)s %(thread)s %(process)s %(message)s"logfile_path = r"/Users/jingxing/PycharmProjects/pythonå…¨æ ˆ/day23/log/d.log"LOGGING_DIC = &#123; 'version': 1, 'formatters': &#123; 'standard': &#123; 'format': standard_format &#125;, 'simple': &#123; 'format': simple_format &#125;, "complete":&#123; "format": complete_format &#125; &#125;, 'filters': &#123;&#125;, 'handlers': &#123; 'console': &#123; 'level': 'DEBUG', 'class': 'logging.StreamHandler', 'formatter': 'simple' &#125;, 'default': &#123; 'level': 'DEBUG', 'class': 'logging.handlers.RotatingFileHandler', 'formatter': 'standard', 'filename': logfile_path, # 'maxBytes': 1024 * 1024 * 5, # æ—¥å¿—æ–‡ä»¶çš„æœ€å¤§å¤§å°ä¸º5M è¶…å‡ºåŽ æ¢æ–‡ä»¶ 'backupCount': 5, # æœ€å¤šç•™äº”ä¸ªæ—¥å¿—æ–‡ä»¶ 'encoding': 'utf-8', &#125;, &#125;, 'loggers': &#123; # åœ¨getLoggerçš„æ—¶å€™ å¦‚æžœæŒ‡å®šçš„åç§° ä¸å­˜åœ¨ æˆ–è€…ä¸ç»™åç§° ç”¨çš„å°±æ˜¯é»˜è®¤çš„ # åœ¨è¿™é‡Œå¦‚æžœkeyä¸ºç©º å®ƒå°±æ˜¯é»˜è®¤çš„ # ä½ å¯ä»¥è‡ªå·±å®šä¹‰ç”Ÿæˆå™¨çš„åç§° å¹¶ä¸”ä»–ä»¬è¿˜èƒ½ä½¿ç”¨ç›¸åŒçš„é»˜è®¤é…ç½® '': &#123; 'handlers': ['default', 'console'], 'level': 'DEBUG', 'propagate': False, &#125;, &#125;,&#125; 1234567# core/shop.pyimport lib.commonlogger = lib.common.get_logger()def shopping(): print("å¼€å§‹è´­ç‰©") logger.debug("è´­ç‰©æˆåŠŸ") 1234567# lib/common.pyimport conf.settingsimport logging.configdef get_logger(): logging.config.dictConfig(conf.settings.LOGGING_DIC) return logging.getLogger("main") åœ¨ä»£ç è¿è¡ŒåŽï¼Œåœ¨shop.pyæ¨¡å—ä¸­å¯¼å…¥äº†lib.commonæ¨¡å—ï¼Œåœ¨common.pyæ¨¡å—ä¸­å¯¼å…¥äº†conf.settingsæ¨¡å—ï¼Œæ¥èŽ·å–å…·ä½“çš„æ—¥å¿—é…ç½®ï¼Œå› ä¸ºgetLogger(â€˜mainâ€™)é‡Œé¢çš„mainåœ¨settingsé‡Œé¢æ²¡æœ‰ï¼Œæ‰€ä»¥ä½¿ç”¨é»˜è®¤çš„æ—¥å¿—é…ç½®ï¼Œå¦‚ä¸‹ï¼š 123456789'loggers': &#123; # åœ¨getLoggerçš„æ—¶å€™ å¦‚æžœæŒ‡å®šçš„åç§° ä¸å­˜åœ¨ æˆ–è€…ä¸ç»™åç§° ç”¨çš„å°±æ˜¯é»˜è®¤çš„ # åœ¨è¿™é‡Œå¦‚æžœkeyä¸ºç©º å®ƒå°±æ˜¯é»˜è®¤çš„ # ä½ å¯ä»¥è‡ªå·±å®šä¹‰ç”Ÿæˆå™¨çš„åç§° å¹¶ä¸”ä»–ä»¬è¿˜èƒ½ä½¿ç”¨ç›¸åŒçš„é»˜è®¤é…ç½® '': &#123; 'handlers': ['default', 'console'], 'level': 'DEBUG', 'propagate': False, &#125; ç„¶åŽé¦–å…ˆè¿›è¡Œlevel=â€™DEBUGâ€™çš„è¿‡æ»¤ï¼Œå› ä¸ºshoppingä¸­çš„æ—¥å¿—ä¿¡æ¯çº§åˆ«ä¸ºdebugï¼Œæ‰€ä»¥ä¼šé€šè¿‡è¿›å…¥handlersé‡Œé¢è¿›è¡Œç¬¬äºŒæ¬¡è¿‡æ»¤ï¼Œåœ¨handlersé‡Œé¢æœ‰ä¸¤ä¸ªé…ç½®ï¼Œä¸€ä¸ªä¸ºdefaulté…ç½®ï¼Œä¸€ä¸ªå‘³consoleé…ç½®ï¼Œåœ¨defaulté…ç½®ä¸­ï¼Œå…·ä½“é…ç½®å¦‚ä¸‹ï¼š 123456789'default': &#123; 'level': 'DEBUG', 'class': 'logging.handlers.RotatingFileHandler', 'formatter': 'standard', 'filename': logfile_path, # 'maxBytes': 1024 * 1024 * 5, # æ—¥å¿—æ–‡ä»¶çš„æœ€å¤§å¤§å°ä¸º5M è¶…å‡ºåŽ æ¢æ–‡ä»¶ 'backupCount': 5, # æœ€å¤šç•™äº”ä¸ªæ—¥å¿—æ–‡ä»¶ 'encoding': 'utf-8', &#125; å‘çŽ°æ—¥å¿—çº§åˆ«ä¸ºDEBUGï¼Œæ‰€ä»¥ä»ç„¶ä¸ä¼šè¿‡æ»¤ï¼ŒæŽ¥ä¸‹æ¥å°±æ˜¯æ ¼å¼åŒ–è¾“å‡ºåˆ°æŒ‡å®šæ–‡ä»¶äº†ï¼Œformatterä¸ºstandardæ¨¡å¼ï¼Œfilenameä¹‹å‰éƒ½å·²ç»å®šä¹‰å¥½äº†ï¼ŒåŒç†consoleåŒç†è¾“å‡ºåˆ°æŽ§åˆ¶å°ã€‚]]></content>
      <categories>
        <category>Python</category>
      </categories>
      <tags>
        <tag>æ¨¡å—</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[pythonæ¨¡å—ä¹‹xml]]></title>
    <url>%2F2018%2F10%2F18%2Fpython%E6%A8%A1%E5%9D%97%E4%B9%8Bxml%2F</url>
    <content type="text"><![CDATA[xmlæ¨¡å— xmlç»“æž„ xmlæ˜¯ç§å®žçŽ°ä¸åŒè¯­è¨€æˆ–ç¨‹åºä¹‹é—´è¿›è¡Œæ•°æ®äº¤æ¢çš„åè®®ï¼Œè·Ÿjsonå·®ä¸å¤šï¼Œä½†æ²¡jsonä½¿ç”¨ç®€å•ã€‚ä½†æ˜¯å› ä¸ºåŽ†å²é—ç•™é—®é¢˜ï¼Œè‡³ä»Šå¾ˆå¤šè¡Œä¸šä¾ç„¶ä½¿ç”¨xmlè¿™ç§æ•°æ®æ ¼å¼ã€‚ xmlçš„æ ¼å¼å¦‚ä¸‹ï¼Œæ˜¯é€šè¿‡&lt;&gt;èŠ‚ç‚¹æ¥åŒºåˆ«æ•°æ®ç»“æž„çš„ã€‚ 12345678910111213141516171819&lt;?xml version="1.0" encoding="utf-8"?&gt;&lt;friendsinfo&gt; &lt;frd age="22" name="ä»»ç›¼æ™¨"&gt; &lt;info qq="1114893928" wechat="Dmgwood" /&gt; &lt;/frd&gt; &lt;frd age="22" name="è¢é–"&gt; &lt;info qq="2410152779" wechat="wxid_2vykc0sjoiie21" /&gt; &lt;/frd&gt; &lt;frd age="22" name="å«ä¸€å¸†"&gt; &lt;info qq="97280940" wechat="oOC" /&gt; &lt;/frd&gt; &lt;frd age="22" name="èƒ¡æ–‡æ¶›"&gt; &lt;info qq="2522864970" wechat="hu2522864970" /&gt; &lt;/frd&gt;&lt;/friendsinfo&gt; è¯­æ³•ç»“æž„ ä»»ä½•çš„èµ·å§‹æ ‡ç­¾éƒ½å¿…é¡»æœ‰ä¸€ä¸ªç»“æŸæ ‡ç­¾ã€‚ &lt;&gt; &lt;/&gt; å¯ä»¥é‡‡ç”¨å¦ä¸€ç§ç®€åŒ–è¯­æ³•ï¼Œå¯ä»¥åœ¨ä¸€ä¸ªæ ‡ç­¾ä¸­åŒæ—¶è¡¨ç¤ºèµ·å§‹å’Œç»“æŸæ ‡ç­¾ã€‚è¿™ç§è¯­æ³•æ˜¯åœ¨å¤§äºŽå·ä¹‹å‰ç´§è·Ÿä¸€ä¸ªæ–œæ (/)ï¼Œä¾‹å¦‚ï¼Œè§£æžå™¨ä¼šå°†å…¶ç¿»è¯‘æˆ æ ‡ç­¾å¿…é¡»æŒ‰åˆé€‚çš„é¡ºåºè¿›è¡ŒåµŒå¥—ï¼Œæ‰€ä»¥ç»“æŸæ ‡ç­¾å¿…é¡»æŒ‰é•œåƒé¡ºåºåŒ¹é…èµ·å§‹æ ‡ç­¾ã€‚è¿™å¥½æ¯”å°†èµ·å§‹å’Œç»“æŸæ ‡ç­¾çœ‹ä½œæ˜¯æ•°å­¦ä¸­çš„å·¦å³ç½—æµ©ï¼šåœ¨æ²¡æœ‰å…³é—­æ‰€æœ‰çš„å†…éƒ¨æ‹¬å·ä¹‹å‰ï¼Œæ˜¯ä¸èƒ½å…³é—­å¤–é¢æ‹¬å·çš„ã€‚ æ‰€æœ‰çš„ç‰¹æ€§éƒ½å¿…é¡»æœ‰å€¼ã€‚ æ‰€æœ‰çš„ç‰¹æ€§éƒ½å¿…é¡»åœ¨å€¼å¾—å‘¨å›´åŠ ä¸ŠåŒå¼•å·ã€‚ ä¸€ä¸ªæ ‡ç­¾çš„ç»„æˆéƒ¨åˆ†åŒ…æ‹¬ï¼šæ ‡ç­¾åã€å±žæ€§åä»¥åŠå±žæ€§å€¼ã€è¿˜æœ‰æ–‡æœ¬å†…å®¹ï¼ˆå¯ä»¥æ²¡æœ‰ï¼‰ åŒæ ‡ç­¾çš„å†™æ³•ï¼š 1&lt;tagename 'å±žæ€§åç§°'="å±žæ€§å€¼"&gt;æ–‡æœ¬å†…å®¹&lt;/tagname&gt; å•æ ‡ç­¾çš„å†™æ³•ï¼š 1&lt;tagename å±žæ€§åç§°="å±žæ€§å€¼"/&gt; æ€»ç»“ï¼šxmlä¹Ÿæ˜¯ä¸€ç§ä¸­é—´æ ¼å¼ï¼Œä¹Ÿå±žäºŽåºåˆ—åŒ–æ–¹å¼ä¹‹ä¸€ï¼Œä¸Žjsonæ¯”è¾ƒï¼ŒåŒæ ·çš„æ•°æ®jsonä¼šæ›´å°ï¼Œæ•ˆçŽ‡æ›´é«˜ï¼›xmléœ€è¦æ ¹æ®æ–‡æ¡£ç»“æž„æ‰‹åŠ¨è§£æžï¼Œè€Œjsonç›´æŽ¥å¯ä»¥è½¬ä¸ºpythonæ•°æ®å¯¹è±¡ã€‚ xmlæ¨¡å—ç”¨æ³• 1234567891011121314151617181920212223# d.xml&lt;?xml version="1.0" encoding="utf-8"?&gt;&lt;studentinfo&gt; &lt;stu age="20" name="å¼ ä¸‰"&gt; &lt;girlfriend age="19" name="å¼ ä¸‰çš„å¥³æœ‹å‹" /&gt; &lt;/stu&gt; &lt;stu age="20" name="æŽå››"&gt; &lt;girlfriend age="19" name="æŽå››çš„å¥³æœ‹å‹" /&gt; &lt;/stu&gt; &lt;age num="1"&gt; &lt;age num="2"&gt; &lt;age num="3"&gt; &lt;/age&gt; &lt;/age&gt; &lt;/age&gt; &lt;age&gt; &lt;/age&gt;&lt;/studentinfo&gt; 1234567891011121314151617181920212223242526import xml.etree.ElementTree as ElementTreetree = ElementTree.parse('d.xml')rootTree = tree.getroot()# ä¸‰ç§èŽ·å–æ ‡ç­¾çš„æ–¹å¼# 1. èŽ·å–æ‰€æœ‰äººçš„å¹´é¾„ï¼Œiterç”¨äºŽåœ¨å…¨æ–‡èŒƒå›´èŽ·å–æ ‡ç­¾for item in rootTree.iter('age'): # ä¸€ä¸ªæ ‡ç­¾ä¸‰ä¸ªç»„æˆéƒ¨åˆ† print(item.tag) # æ ‡ç­¾åç§° print(item.attrib) # æ ‡ç­¾çš„å±žæ€§ print(item.text) # æ–‡æœ¬å†…å®¹# 2. ä»Žå½“å‰æ ‡ç­¾çš„å­æ ‡ç­¾ä¸­æ‰¾åˆ°ä¸€ä¸ªåç§°ä¸ºageçš„æ ‡ç­¾ï¼Œå¦‚æžœæœ‰å¤šä¸ªï¼Œæ‰¾åˆ°çš„æ˜¯ç¬¬ä¸€ä¸ªprint(rootTree.find('age').attrib)# 3. ä»Žå½“å‰æ ‡ç­¾çš„å­æ ‡ç­¾ä¸­æ‰¾åˆ°æ‰€æœ‰åç§°ä¸ºageçš„æ ‡ç­¾print(rootTree.findall('age'))# èŽ·å–å•ä¸ªå±žæ€§stu = rootTree.find('stu')print(stu.get("age"))print(stu.get("name"))# åˆ é™¤å­æ ‡ç­¾rootTree.remove(stu)# æ·»åŠ å­æ ‡ç­¾newTag = ElementTree.Element('è¿™æ˜¯æ–°æ ‡ç­¾', &#123;'ä¸€ä¸ªå±žæ€§': 'å€¼'&#125;)rootTree.append(newTag)# å†™å…¥æ–‡ä»¶tree.write('f.xml', encoding='utf-8')]]></content>
      <categories>
        <category>Python</category>
      </categories>
      <tags>
        <tag>æ¨¡å—</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[pythonæ¨¡å—ä¹‹configparseræ¨¡å—]]></title>
    <url>%2F2018%2F10%2F18%2Fpython%E4%B9%8Bconfigparser%E6%A8%A1%E5%9D%97%2F</url>
    <content type="text"><![CDATA[ä¸€ ä»€ä¹ˆæ˜¯configparserï¼Ÿconfigparseræ˜¯ç”¨äºŽè§£æžé…ç½®æ–‡ä»¶çš„æ¨¡å—ã€‚ä»€ä¹ˆæ˜¯é…ç½®æ–‡ä»¶å‘¢ï¼ŸåŒ…å«é…ç½®ç¨‹åºä¿¡æ¯çš„æ–‡ä»¶å°±ç§°ä¸ºé…ç½®æ–‡ä»¶ã€‚ä»€ä¹ˆæ ·çš„æ•°æ®åº”è¯¥ä½œä¸ºé…ç½®ä¿¡æ¯å‘¢ï¼Ÿéœ€è¦ä¿®æ”¹ä½†æ˜¯ä¸ç»å¸¸æ”¹çš„ä¿¡æ¯å°±å¯ä»¥ä½œä¸ºé…ç½®ä¿¡æ¯ï¼Œæ¯”å¦‚æ•°æ®æ–‡ä»¶çš„è·¯å¾„ã€‚ äºŒ ä»€ä¹ˆæ˜¯é…ç½®æ–‡ä»¶ï¼Ÿé…ç½®æ–‡ä»¶ä¸­åªæœ‰ä¸¤ç§å†…å®¹ï¼š sectionï¼Œåˆ†åŒº optionï¼Œé€‰é¡¹ï¼Œæ˜¯é”®å€¼å¯¹çš„å½¢å¼ ä¸‰ configparserçš„ä½¿ç”¨wiki12345678910# useinfo.cfg[user]name1 = musibiiname2 = thalesname3 = ddd[password]password1 = woshinibabapassword2 = 123456password3 = 123 1234567891011121314151617181920212223242526import configparser# åˆ›å»ºä¸€ä¸ªè§£æžå™¨config = configparser.ConfigParser()# è¯»å–å¹¶è§£æžcfgæ–‡ä»¶config.read('useinfo.cfg', encoding='utf-8')# èŽ·å–æ‰€æœ‰sectionprint(config.sections())# èŽ·å–æŸä¸ªåˆ†åŒºä¸‹æ‰€æœ‰optionprint(config.options('user'))# èŽ·å–æŸä¸ªé€‰é¡¹å…·ä½“çš„å€¼print(config.get('user', 'name1'))# getè¿”å›žçš„éƒ½æ˜¯å­—ç¬¦ä¸²ç±»åž‹ï¼Œå¦‚æžœéœ€è¦è½¬æ¢ç±»åž‹ï¼Œç›´æŽ¥ä½¿ç”¨get+å¯¹åº”çš„ç±»åž‹(boolï¼Œintï¼Œfloat)print(config.getint('password', 'password1'))# æ˜¯å¦æœ‰æŸä¸ªé€‰é¡¹ï¼Œè¿”å›žå¸ƒå°”å€¼config.has_option()# æ˜¯å¦æœ‰æŸä¸ªåˆ†åŒºconfig.has_section()# ä¸å¸¸ç”¨çš„ä¸€äº›æ–¹æ³•# æ·»åŠ åˆ†åŒº(å¿…é¡»å…ˆæ·»åŠ åˆ†åŒºæ‰å¯ä»¥ä¿®æ”¹åˆ†åŒºä¸‹é¢çš„å€¼)config.add_section('server')config.set('server', 'usr', '192.168.1.1')# åˆ é™¤é€‰é¡¹config.remove_option('user', 'name1')# å†™å…¥æ–‡ä»¶with open('useinfo.cfg', 'wt', encoding='ust-8') as f: config.write(f) ä½¿ç”¨ä¾‹å­: 1234# admin.cfg[admin]name=maffiapassword=woshinibaba 1234567891011121314# test.pyimport configparserconfig = configparser.ConfigParser()# èŽ·å–è´¦å·å’Œå¯†ç ä¿¡æ¯def load_admin(): admin_info = [] config.read(admin.cfg, encoding='utf-8') sections = config.sections() for item in sections: user_dic = &#123;'name': config.get(item, 'name'), 'password': config.get(item, 'password')&#125; admin_info.append(user_dic) return admin_info]]></content>
      <categories>
        <category>Python</category>
      </categories>
      <tags>
        <tag>æ¨¡å—</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[pythonæ¨¡å—ä¹‹pickleã€shelveã€json]]></title>
    <url>%2F2018%2F10%2F17%2Fpython%E5%BA%8F%E5%88%97%E5%8C%96%E6%95%B0%E6%8D%AE%E6%A8%A1%E5%9D%97%2F</url>
    <content type="text"><![CDATA[ä¸€ ä»€ä¹ˆæ˜¯åºåˆ—åŒ–åºåˆ—åŒ–æŒ‡çš„æ˜¯å°†å†…å­˜ä¸­çš„æ•°æ®ç»“æž„è½¬åŒ–ä¸ºä¸€ç§ä¸­é—´æ ¼å¼ï¼Œå¹¶å­˜å‚¨åˆ°ç¡¬ç›˜ä¸Šã€‚ ï¼ˆååºåˆ—åŒ–ï¼šå°†ç¡¬ç›˜ä¸Šå­˜å‚¨çš„ä¸­é—´æ ¼å¼æ•°æ®å†è¿˜åŽŸä¸ºå†…å­˜ä¸­çš„æ•°æ®ç»“æž„ï¼‰ äºŒ ä¸ºä»€ä¹ˆè¦åºåˆ—åŒ– æŒä¹…ä¿æŒçŠ¶æ€ éœ€çŸ¥ä¸€ä¸ªè½¯ä»¶/ç¨‹åºçš„è¿è¡Œå°±æ˜¯å¤„ç†ä¸€ç³»åˆ—çŠ¶æ€çš„å˜åŒ–ï¼Œåœ¨ç¼–ç¨‹è¯­è¨€ä¸­ï¼Œâ€˜çŠ¶æ€â€˜ä¼šä»¥å„ç§æœ‰ç»“æž„çš„æ•°æ®ç±»åž‹(ä¹Ÿå¯ä»¥ç§°ä¹‹ä¸ºå˜é‡)çš„å½¢å¼ä¿å­˜åœ¨å†…å­˜ä¸­ã€‚ å†…å­˜æ˜¯æ— æ³•æ°¸ä¹…ä¿å­˜æ•°æ®çš„ï¼Œå½“ç¨‹åºè¿è¡Œäº†ä¸€æ®µæ—¶é—´ï¼Œæˆ‘ä»¬æ–­ç”µæˆ–è€…é‡å¯ç¨‹åºï¼Œå†…å­˜ä¸­å…³äºŽè¿™ä¸ªç¨‹åºä¹‹å‰ä¸€æ®µæ—¶é—´çš„æ•°æ®éƒ½ä¼šè¢«æ¸…ç©ºã€‚ åœ¨æ–­ç”µæˆ–é‡å¯ç¨‹åºä¹‹å‰å°†ç¨‹åºå½“å‰è¿è¡Œçš„æ•°æ®ä¿å­˜ä¸‹æ¥ï¼Œä¾¿äºŽä¸‹æ¬¡ç¨‹åºæ‰§è¡Œèƒ½å¤Ÿä»Žæ–‡ä»¶ä¸­è½½å…¥ä¹‹å‰çš„æ•°æ®ï¼Œç„¶åŽç»§ç»­æ‰§è¡Œï¼Œè¿™å°±æ˜¯åºåˆ—åŒ–ã€‚ æ•°æ®è·¨å¹³å°äº¤äº’ åºåˆ—åŒ–æ•°æ®ä¹‹åŽï¼Œä¸ä»…å¯ä»¥æŠŠåºåˆ—åŒ–åŽçš„å†…å®¹å†™å…¥ç¡¬ç›˜ï¼Œè¿˜å¯ä»¥é€šè¿‡ç½‘ç»œä¼ è¾“åˆ°åˆ«çš„æœºå™¨ä¸Šï¼Œå¦‚æžœæ”¶å‘çš„åŒæ–¹çº¦å®šéƒ½ä½¿ç”¨ä¸€ç§åºåˆ—åŒ–çš„æ ¼å¼ï¼Œé‚£ä¹ˆä¾¿æ‰“ç ´äº†å¹³å°å’Œè¯­è¨€å¸¦æ¥çš„é™åˆ¶ï¼Œå®žçŽ°äº†è·¨å¹³å°äº¤äº’ã€‚ åè¿‡æ¥ï¼ŒæŠŠå˜é‡å†…ä»Žä»Žåºåˆ—åŒ–çš„å¯¹è±¡é‡æ–°è¯»åˆ°å†…å­˜é‡Œç§°ä¹‹ä¸ºååºåˆ—åŒ–ï¼Œå³unpickingã€‚ ä¸‰ åºåˆ—åŒ–æ•°æ®çš„ä¸‰ä¸ªæ¨¡å—ä¸€ pickleæ¨¡å—pickleæ¨¡å—æ—¶pythonå†…ç½®çš„ç”¨æ¥åºåˆ—åŒ–pythonæ•°æ®æ ¼å¼çš„æ¨¡å—ï¼Œæ”¯æŒåºåˆ—åŒ–pythonä¸­æ‰€æœ‰çš„æ•°æ®ç±»åž‹ï¼Œä¸»è¦æ–¹æ³•æœ‰å››ä¸ªï¼› dumps 12345678import picklename = 'musibii'age = 18height = 1.7user = &#123;'name': name, 'age': age, 'height': height&#125;with open('userinfo.pkl', 'ab') as f: userbytes = pickle.dumps(user) f.write(userbytes) loads 12345import picklewith open('userinfo.pkl', 'rb') as f: userbytes = f.read() user = pickle.loads(userbytes) print(user) ä¸Ždumpså’Œloadså¯¹åº”çš„ä¸¤ä¸ªæ–¹æ³•æ›´ç®€å•ã€‚ dump 123import picklewith open('userinfo.pkl', 'ab') as f: pickle.dump(user, f) load 1234import picklewith open('userinfo.pkl', 'rb') as f: user = pickle.load(f) print(user) äºŒ shelveæ¨¡å—shevlveæ¨¡å—ä¹Ÿç”¨äºŽåºåˆ—åŒ–ï¼Œå®ƒå’Œpickleæ¨¡å—ä¸åŒçš„åœ°æ–¹åœ¨äºŽï¼Œä¸éœ€è¦å…³å¿ƒæ–‡ä»¶æ¨¡å¼ï¼Œç›´æŽ¥æŠŠæ•°æ®å½“æˆå­—å…¸æ¥çœ‹å¾…ã€‚è€Œä¸”shelveæ¨¡å—å¯ä»¥ç›´æŽ¥å¯¹æ•°æ®è¿›è¡Œä¿®æ”¹ï¼Œè€Œä¸ç”¨è¦†ç›–ä¹‹å‰çš„æ•°æ®ï¼Œä½†pickleè¦æƒ³ä¿®æ”¹çš„è¯åªèƒ½ä½¿ç”¨wbæ¨¡å¼è¦†ç›– shelveåªæœ‰ä¸€ä¸ªæ–¹æ³•openï¼Œæ‰€ä»¥ä½¿ç”¨èµ·æ¥ä¹Ÿå¾ˆæ–¹ä¾¿ã€‚åŒæ ·çš„ï¼Œshelveä¹Ÿæ”¯æŒpythonä¸­æ‰€æœ‰çš„æ•°æ®æ ¼å¼ã€‚ 12345import shelveuser = &#123;'name': 'musibii'&#125;s = shelve.open('userdb.shv')s['user'] = users.close() ä¸‰ jsonæ¨¡å—1 jsonæ˜¯ä»€ä¹ˆJSONæ˜¯Java script object notationçš„ç¼©å†™ï¼Œç¿»è¯‘è¿‡æ¥å°±æ˜¯jså¯¹è±¡æ ‡è¯†æ³•ã€‚ å¯¹äºŽå¼€å‘è€…è€Œè¨€ï¼Œjsonæ˜¯ä¸€ç§é€šç”¨çš„æ•°æ®æ ¼å¼ï¼Œä»»ä½•è¯­è¨€éƒ½èƒ½è§£æžï¼Œæ‰€ä»¥æ¯ç§è¯­è¨€éƒ½ä¼šæœ‰å¤„ç†jsonæ ¼å¼æ•°æ®çš„éœ€æ±‚ã€‚ jsonè¯­æ³• js ä¸­çš„æ•°æ®ç±»åž‹ pythonæ•°æ®ç±»åž‹ çš„å¯¹åº”å…³ç³» {} å­—å…¸ [] list string â€œâ€ str int/float int/float true/false True/False null None jsonæ ¼å¼çš„è¯­æ³•è§„èŒƒ æœ€å¤–å±‚é€šå¸¸æ˜¯ä¸€ä¸ªå­—å…¸æˆ–åˆ—è¡¨ {}or[]ï¼Œå¦‚æžœæƒ³å®šä¹‰jsonæ ¼å¼çš„æ•°æ®ï¼Œé‚£ä¹ˆæœ€å¤–å±‚ç›´æŽ¥å†™{}ï¼Œè€Œä¸”jsonä¸­çš„å­—ç¬¦ä¸²å¿…é¡»æ˜¯åŒå¼•å·ï¼Œjsonç†è®ºä¸Šå¯ä»¥åµŒå¥—ä»»æ„å¤šçš„å±‚æ¬¡ã€‚ 2 ä¸ºä»€ä¹ˆç”¨jsonè™½ç„¶ä¹‹å‰çš„pickleå’Œshelveéƒ½å¾ˆå¼ºå¤§ï¼Œè€Œä¸”ä½¿ç”¨ä¹Ÿéžå¸¸æ–¹ä¾¿ï¼Œé‚£ä¹ˆä¸ºä»€ä¹ˆè¿˜å‡ºæ¥jsonå‘¢ï¼Ÿè¿™æ˜¯å› ä¸ºpickleå’Œshevleåºåˆ—åŒ–ä¹‹åŽçš„æ•°æ®åªæœ‰pythonæ‰èƒ½è§£æžå‡ºæ¥ï¼Œè€Œé€šå¸¸åœ¨å®žé™…ç”Ÿäº§å¼€å‘ä¸­ï¼Œéƒ½æ˜¯éœ€è¦æ•°æ®å¯ä»¥è·¨å¹³å°ä½¿ç”¨çš„ã€‚ 3 jsonçš„ä½¿ç”¨jsonæ¨¡å—çš„æ ¸å¿ƒæ–¹æ³• dump dumps load loads ä¸å¸¦sçš„ç›´æŽ¥å°è£…äº†writeå’Œreadæ–¹æ³•ã€‚ dump 1234567891011121314import jsonjsontext = """&#123; "users": [&#123; "name": "musibii", "age": 18 &#125;, &#123; "name": "thales", "age": 23 &#125; ]&#125;"""with open('a.json', 'wt', encoding='utf-8') as f: json.dump(jsontext, f) dumps 1234567891011121314import jsonjsontext = """&#123; "users": [&#123; "name": "musibii", "age": 18 &#125;, &#123; "name": "thales", "age": 23 &#125; ]&#125;"""with open('a.json', 'wt', encoding='utf-8') as f: f.write(json.dumps(jsontext)) load 123import jsonwith open('a.json', 'rt', encoding='utf-8') as f: print(json.load(f)) loads 1234import jsonwith open('a.json', 'rt', encoding='utf-8') as f: res = json.loads(f.read()) print(res)]]></content>
      <categories>
        <category>Python</category>
      </categories>
      <tags>
        <tag>æ¨¡å—</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[pythonæ¨¡å—ä¹‹shutil]]></title>
    <url>%2F2018%2F10%2F17%2Fpython%E6%A8%A1%E5%9D%97%E4%B9%8Bshutil%2F</url>
    <content type="text"><![CDATA[shutilæ˜¯ä¸€ä¸ªç”¨äºŽç®€åŒ–æ–‡ä»¶æ“ä½œçš„æ¨¡å—ã€‚ å¤åˆ¶æ–‡ä»¶ï¼ˆä¼ å…¥æºæ–‡ä»¶å¯¹è±¡å’Œç›®æ ‡æ–‡ä»¶å¯¹è±¡ï¼‰ 1234import shutilf1 = open(r'/Users/jingxing/PycharmProjects/day20/test.py', 'rb')f2 = open(r'/Users/jingxing/PycharmProjects/day20/test_test.py', 'rb')shutil.copyfileobj(f1, f2) åŽ‹ç¼©æ–‡ä»¶ 123import shutilshutil.make_archive('myzip', 'zip', r'/Users/jingxing/PycharmProjects/day20')shutil.make_archive('mytar', 'tar', r'/Users/jingxing/PycharmProjects/day20') è§£åŽ‹æ–‡ä»¶ 123import shutilshutil.unpack_archive(r'/Users/jingxing/PycharmProjects/day20/myzip.zip')shutil.unpack_archive(r'/Users/jingxing/PycharmProjects/day20/mytar.tar') å…¶ä»–ä¸¤ä¸ªç”¨äºŽè§£åŽ‹çš„æ¨¡å— zipfileä»Žåå­—å¯ä»¥çœ‹å‡ºæ¥æ˜¯è§£åŽ‹zipåŽ‹ç¼©æ–‡ä»¶çš„æ¨¡å—ã€‚ è§£åŽ‹ 1234import zipfilez = zipfile.ZipFile(r'/Users/jingxing/PycharmProjects/day20/myzip.zip', 'r')z.extractall(path=r'/Users/jingxing/PycharmProjects/day20')z.close() å¾€åŽ‹ç¼©åŒ…ä¸­æ·»åŠ æ–‡ä»¶ 12345import zipfilez = zipfile.ZipFile(r"/Users/jingxing/PycharmProjects/pythonå…¨æ ˆ/day20/ä»£ç /myåŽ‹ç¼©.tar","w")z.write("1.æ˜¨æ—¥å›žé¡¾")z.write("2.ä»Šæ—¥å†…å®¹")z.close() tarfile è§£åŽ‹ 1234import tarfilet = tarfile.open(r"/Users/jingxing/PycharmProjects/pythonå…¨æ ˆ/day20/ä»£ç /myåŽ‹ç¼©.tar","w")t.extractall(r"/Users/jingxing/PycharmProjects/pythonå…¨æ ˆ/day19")t.close() å¾€åŽ‹ç¼©åŒ…ä¸­æ·»åŠ æ–‡ä»¶ 12345port tarfilet = tarfile.open(r"/Users/jingxing/PycharmProjects/pythonå…¨æ ˆ/day20/ä»£ç /myåŽ‹ç¼©.tar","w")t.add("1.æ˜¨æ—¥å›žé¡¾")t.add("2.ä»Šæ—¥å†…å®¹")t.close()]]></content>
      <categories>
        <category>Python</category>
      </categories>
      <tags>
        <tag>æ¨¡å—</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[pythonæ¨¡å—ä¹‹random]]></title>
    <url>%2F2018%2F10%2F17%2Fpython%E6%A8%A1%E5%9D%97%E4%B9%8Brandom%2F</url>
    <content type="text"><![CDATA[pythonçš„éšæœºæ•°æ¨¡å—ä¸ºrandomæ¨¡å—ï¼Œå¯ä»¥äº§ç”Ÿéšæœºçš„æ•´æ•°æˆ–æµ®ç‚¹æ•°ã€‚ä½†æ˜¯è¿™æ˜¯ä¼ªéšæœºæ•°ï¼Œpythonè§£é‡Šå™¨ä¼šç»´æŠ¤ä¸€äº›ç§å­æ•°ï¼Œç„¶åŽæ ¹æ®ç®—æ³•ç®—å‡ºéšæœºæ•°ã€‚linuxç»´æŠ¤äº†ä¸€ä¸ªç†µæ± ï¼Œè¿™ä¸ªç†µæ± æ”¶é›†å™ªéŸ³çš„ä¿¡æ¯ï¼Œæ›´æŽ¥è¿‘çœŸéšæœºæ•°ã€‚ random éšæœºäº§ç”Ÿ0-1çš„æµ®ç‚¹æ•°ï¼Œä¸åŒ…æ‹¬1 123import randomprint(random.random())# è¿è¡Œç»“æžœ 0.8517652068795716 éšæœºäº§ç”Ÿa-bçš„æ•´æ•°ï¼ŒåŒ…æ‹¬aå’Œb 12345import randoma = 1b = 10print(random.randint(a, b))# è¿è¡Œç»“æžœ 4 éšæœºäº§ç”Ÿa-bï¼Œä¸åŒ…æ‹¬aå’Œbçš„æ•´æ•° 12345import randoma = 1b = 10print(random.randrange(a, b))# è¿è¡Œç»“æžœ 7 æŒ‡å®šä¸€ä¸ªèŒƒå›´å¹¶æŒ‡å®šéœ€è¦äº§ç”Ÿçš„éšæœºä¸ªæ•° 123import randomprint(random.sample(['aa', ['a', 'b'], 3, 4, 5], 2))# è¿è¡Œç»“æžœ [['a', 'b'], 5] æ‰“ä¹±åˆ—è¡¨çš„é¡ºåºï¼ˆè¿”å›žNoneï¼‰ 12345import randomls = [1, 2, 3, 4, 5, 9, 11]random.shuffle(ls)print(ls)# è¿è¡Œç»“æžœ [1, 9, 2, 5, 4, 11, 3] ä»Žç»™å®šçš„åºåˆ—ä¸­éšæœºé€‰ä¸€ä¸ª 123import randomprint(random.choice([1,2,3,4,5,6]))# è¿è¡Œç»“æžœ 2 ä»Žç»™å®šçš„åºåˆ—ä¸­éšæœºé€‰å¤šä¸ªï¼ˆåŒ…æ‹¬1ä¸ªï¼Œè¿”å›žä¸€ä¸ªåˆ—è¡¨ï¼‰ 123import randomprint(random.choices((1,2,3,4,5,6,7), k=3))# è¿è¡Œç»“æžœ [6, 5, 5] åˆ¶ä½œéšæœºéªŒè¯ç  12345678910import randomdef get_verifycode(length): res = '' for i in range(length): a = random.randint(0, 9) b = chr(random.randint(65, 90)) c = chr(random.randint(97, 122)) s = random.choice([a, b, c]) res += s return res]]></content>
      <categories>
        <category>Python</category>
      </categories>
      <tags>
        <tag>æ¨¡å—</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[pythonæ¨¡å—ä¹‹sysä¸Žos]]></title>
    <url>%2F2018%2F10%2F17%2FPython%E5%B8%B8%E7%94%A8%E6%A8%A1%E5%9D%97%E4%B9%8Bsys%E4%B8%8Eos%2F</url>
    <content type="text"><![CDATA[pythonå¸¸ç”¨æ¨¡å—ç³»åˆ—ï¼ˆäºŒï¼‰ï¼šsysæ¨¡å—ä¸Žosæ¨¡å— sysæ¨¡å—æ˜¯pythonè§£é‡Šå™¨å’ŒçŽ¯å¢ƒæœ‰å…³çš„ä¸€ä¸ªæ¨¡å—ï¼› osæ˜¯pythonç”¨æ¥å’Œæ“ä½œç³»ç»Ÿè¿›è¡Œäº¤äº’çš„ä¸€ä¸ªæ¨¡å—ã€‚ ä¸€ sys æŸ¥çœ‹å½“å‰çŽ¯å¢ƒå˜é‡ æŸ¥çœ‹å·²ç»åŠ è½½çš„æ¨¡å— å¯ä»¥çœ‹å‡ºsys.modulesæ˜¯ä¸€ä¸ªå­—å…¸ï¼Œkeyä¸ºåŠ è½½æ¨¡å—çš„åå­—ï¼Œvaluesä¸ºåŠ è½½æ¨¡å—çš„è·¯å¾„ã€‚ èŽ·å–ç»ˆç«¯è°ƒç”¨æ—¶çš„å‚æ•° ç»ˆç«¯è¾“å…¥çš„å‚æ•°ä¸ºargv[1]ï¼Œé»˜è®¤å½“å‰æ–‡ä»¶åä¸ºç¬¬ä¸€ä¸ªå‚æ•°ã€‚ èŽ·å–è§£é‡Šå™¨çš„ç‰ˆæœ¬ä¿¡æ¯ èŽ·å–å½“å‰è¿è¡Œå¹³å°åç§°ï¼ˆwindowsä¸ºntï¼ŒmacOSä¸ºdarwinï¼‰ é€€å‡ºä¿¡å· 123import syssys.exit(0) # æ­£å¸¸é€€å‡ºsys.exit(1) # é”™è¯¯é€€å‡º æŽ¥å£ç‰ˆæœ¬ 123import sysprint(sys.api_version)# è¿è¡Œç»“æžœ 1013 äº†è§£ 123456import sysprint(sys.maxsize)print(sys.maxunicode)# è¿è¡Œç»“æžœ# 9223372036854775807# 1114111 äºŒ os èŽ·å–å½“å‰çš„å·¥ä½œç›®å½• 123import osprint(os.getcwd())# è¿è¡Œç»“æžœ /Users/jingxing/PycharmProjects/pythonå…¨æ ˆ/day20/ä»£ç  åˆ‡æ¢å·¥ä½œç›®å½• 1234import osprint(os.chdir('/Users/jingxing/PycharmProjects/pythonå…¨æ ˆ'))print(os.getcwd())# è¿è¡Œç»“æžœ /Users/jingxing/PycharmProjects/pythonå…¨æ ˆ èŽ·å–å½“å‰ç›®å½• 123import osprint(os.curdir)# è¿è¡Œç»“æžœ . èŽ·å–ä¸Šçº§ç›®å½• 123import os print(os.pardir)# è¿è¡Œç»“æžœ .. èŽ·å–ç³»ç»Ÿçš„çŽ¯å¢ƒå˜é‡ 123import osprint(os.environ)# environ(&#123;'PATH': '/Users/jingxing/.nvm/versions/node/v4.9.1/bin:/Library/Frameworks/Python.framework/Versions/3.6/bin:/python_study/mongodb/bin://Volumes/python_study/mongodb/bin:/Library/Frameworks/Python.framework/Versions/3.6/bin:/usr/local/bin:/usr/bin:/bin:/usr/sbin:/sbin:/Applications/VMware Fusion.app/Contents/Public:/python_study/Applications/mongodb-osx-x86_64-3.6.3/bin::/usr/local/mysql/bin', 'COMMAND_MODE': 'unix2003', 'VERSIONER_PYTHON_VERSION': '2.7', 'LS_OPTIONS': '--color=auto', 'LOGNAME': 'jingxing', 'XPC_SERVICE_NAME': 'com.apple.xpc.launchd.oneshot.0x10000004.pycharm', 'PWD': '/Users/jingxing/PycharmProjects/pythonå…¨æ ˆ/day20/ä»£ç ', 'PYCHARM_HOSTED': '1', 'NODE_PATH': '/Users/jingxing/.nvm/versions/node/v4.9.1/lib/node_modules', 'PYCHARM_MATPLOTLIB_PORT': '49379', 'PYTHONPATH': '/Applications/PyCharm.app/Contents/helpers/pycharm_matplotlib_backend:/Users/jingxing/PycharmProjects/pythonå…¨æ ˆ', 'NVM_CD_FLAGS': '', 'NVM_DIR': '/Users/jingxing/.nvm', 'SHELL': '/bin/bash', 'LSCOLORS': 'CxfxcxdxbxegedabagGxGx', 'PYTHONIOENCODING': 'UTF-8', 'SECURITYSESSIONID': '186a7', 'VERSIONER_PYTHON_PREFER_32_BIT': 'no', 'USER': 'jingxing', 'CLICOLOR': 'Yes', 'TMPDIR': '/var/folders/yl/3drd7wf93f90sfkgpc2zg9cr0000gn/T/', 'SSH_AUTH_SOCK': '/private/tmp/com.apple.launchd.bIB1b2eyOD/Listeners', 'XPC_FLAGS': '0x0', 'PYTHONUNBUFFERED': '1', '__CF_USER_TEXT_ENCODING': '0x1F5:0x19:0x34', 'Apple_PubSub_Socket_Render': '/private/tmp/com.apple.launchd.bHuC64fYdd/Render', 'LC_CTYPE': 'zh_CN.UTF-8', 'NVM_BIN': '/Users/jingxing/.nvm/versions/node/v4.9.1/bin', 'HOME': '/Users/jingxing', '__PYVENV_LAUNCHER__': '/Library/Frameworks/Python.framework/Versions/3.6/bin/python3'&#125;) åˆ›å»ºå¤šçº§ç›®å½• 123import osos.makedirs('a/b/c')# ä¼šåœ¨å½“å‰æ–‡ä»¶è·¯å¾„åˆ›å»ºå¤šçº§ç›®å½• åˆ›å»ºä¸€ä¸ªç›®å½• 123import osos.mkdir('aa')# èƒ½ä¸”ä»…èƒ½åˆ›å»ºä¸€ä¸ªç›®å½• é€’å½’åˆ é™¤ 123import osos.removedirs('a/b/c')# é€’å½’åˆ é™¤ï¼Œåªèƒ½åˆ é™¤ç©ºç›®å½• åˆ é™¤ä¸€ä¸ªç›®å½• 123import osos.rmdir('aa')# åˆ é™¤ä¸€ä¸ªç›®å½• åˆ é™¤æ–‡ä»¶ 123import osos.remove(r'/Users/jingxing/PycharmProjects/pythonå…¨æ ˆ')# åˆ é™¤æ–‡ä»¶ åˆ—å‡ºå½“å‰ç›®å½•æ‰€æœ‰çš„æ–‡ä»¶åŠæ–‡ä»¶å¤¹ 12import osprint(os.listdir(r'/Users/jingxing/PycharmProjects/pythonå…¨æ ˆ')) èŽ·å–å½“å‰å¹³å°è·¯å¾„åˆ†éš”ç¬¦ 123import osprint(os.seq)# è¿è¡Œç»“æžœ / èŽ·å–å½“å‰å¹³å°æ¢è¡Œç¬¦ 12import osprint(os.lineseq, end='') ä¸‰ osä¸‹çš„pathæ¨¡å— è¿”å›žç»å¯¹è·¯å¾„ 123from os import pathprint(path.abspath('a/b/c'))# è¿è¡Œç»“æžœ /Users/jingxing/PycharmProjects/pythonå…¨æ ˆ/day20/ä»£ç /a/b/c å°†è·¯å¾„æ‹†åˆ†ä¸ºæ–‡ä»¶å¤¹è·¯å¾„å’Œæ–‡ä»¶åï¼ˆè¿”å›žå…ƒç¥–ï¼‰ 123from os import pathprint(path.split('/Users/jingxing/PycharmProjects/pythonå…¨æ ˆ/day20/ä»£ç /5.osä¸‹pathæ¨¡å—.py'))# è¿è¡Œç»“æžœ ('/Users/jingxing/PycharmProjects/pythonå…¨æ ˆ/day20/ä»£ç ', '5.osä¸‹pathæ¨¡å—.py') èŽ·å–è·¯å¾„ä¸­çš„ä¸Šä¸€çº§ 123from os import pathprint(path.dirname(__file__))# è¿è¡Œç»“æžœ /Users/jingxing/PycharmProjects/pythonå…¨æ ˆ/day20/ä»£ç  èŽ·å–è·¯å¾„çš„æœ€åŽä¸€çº§åç§° 123from os import pathprint(path.basename(r'/Users/jingxing/PycharmProjects/pythonå…¨æ ˆ/day20/ä»£ç /5.osä¸‹pathæ¨¡å—.py'))# è¿è¡Œç»“æžœ 5.osä¸‹pathæ¨¡å—.py åˆ¤æ–­è·¯å¾„æ˜¯å¦å­˜åœ¨ï¼ˆè¿”å›žå¸ƒå°”å€¼ï¼‰ 123from os import pathprint path.exists(r'/Users/jingxing/PycharmProjects/pythonå…¨æ ˆ/day20/ä»£ç /5.osä¸‹pathæ¨¡å—.py')# è¿è¡Œç»“æžœ True åˆ¤æ–­æ˜¯å¦ä¸ºç»å¯¹è·¯å¾„ï¼ˆè¿”å›žå¸ƒå°”å€¼ï¼‰ 123from os import pathprint(path.isabs(r'/Users/jingxing/PycharmProjects/pythonå…¨æ ˆ/day20/ä»£ç /5.osä¸‹pathæ¨¡å—.py'))# è¿è¡Œç»“æžœ True è·¯å¾„æ‹¼æŽ¥ 123from os import pathprint(path.join('/Users/jingxing/PycharmProjects/', 'day20'))# è¿è¡Œç»“æžœ /Users/jingxing/PycharmProjects/day20 èŽ·å–æ–‡ä»¶çš„å¤§å° 12from os import pathprint(path.getsize(r'/Users/jingxing/PycharmProjects/pythonå…¨æ ˆ')) å¤§å†™å˜å°å†™ï¼Œæ–œæ æ ¹æ®å½“å‰å¹³å°ä¿®æ”¹ 123from os import pathprint(path.normcase(r'a/\b/\c'))# è¿è¡Œç»“æžœ a/\b/\c æ–œæ ä¼šä¿®æ”¹ä¸ºå½“å‰å¹³å°çš„åˆ†éš”ç¬¦ï¼Œæ‰§è¡Œ..æ¥è¿”å›žä¸Šä¸€çº§ 123from os import pathprint(path.normpath('a/b/c/../c'))# è¿è¡Œç»“æžœ a/b/c]]></content>
      <categories>
        <category>Python</category>
      </categories>
      <tags>
        <tag>æ¨¡å—</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Pythonæ¨¡å—ä¹‹timeä¸Ždatetime]]></title>
    <url>%2F2018%2F10%2F16%2FPython%E5%B8%B8%E7%94%A8%E6%A8%A1%E5%9D%97%E4%B9%8Btime%E4%B8%8Edatetime%2F</url>
    <content type="text"><![CDATA[pythonå¸¸ç”¨æ¨¡å—ç³»åˆ—ï¼ˆä¸€ï¼‰ï¼štimeæ¨¡å—ä¸Ždatetime timeæ¨¡å—æ˜¯pythonå†…ç½®æŸ¥çœ‹å½“å‰æ—¶é—´æˆ³çš„ä¸€ä¸ªæ¨¡å—ï¼› datetimeæ¨¡å—æ˜¯ç”¨æ¥å¯¹æ—¥æœŸå’Œæ—¶é—´è¿›è¡Œæ“ä½œçš„ä¸€ä¸ªæ¨¡å—ã€‚ ä¸€ time1 èŽ·å¾—æ—¶é—´æˆ³æ—¶é—´æˆ³ï¼šé€šå¸¸æ¥è¯´ï¼Œæ—¶é—´æˆ³è¡¨ç¤ºçš„æ˜¯ä»Ž1970å¹´1æœˆ1æ—¥00:00:00å¼€å§‹æŒ‰ç§’è®¡ç®—çš„åç§»é‡ã€‚æˆ‘ä»¬è¿è¡Œâ€˜â€™type(time.time())â€˜â€™ï¼Œè¿”å›žçš„æ˜¯floatç±»åž‹ã€‚ 123import timeprint(time.time())# è¿è¡Œç»“æžœ 1539678307.779871 2 ç»“æž„åŒ–æ—¶é—´å­—ç¬¦ä¸²123import timeprint(time.localtime()) # è¿”å›žä¸€ä¸ªå…ƒç¥–å¯¹è±¡ï¼Œé‡Œé¢æ˜¯æ¯ä¸ªæ—¶é—´çš„å€¼(ä¸œå…«åŒº)# è¿è¡Œç»“æžœ time.struct_time(tm_year=2018, tm_mon=10, tm_mday=16, tm_hour=16, tm_min=48, tm_sec=4, tm_wday=1, tm_yday=289, tm_isdst=0) 123import timeprint(time.localtime().tm_year) # å•ç‹¬èŽ·å–æŸä¸ªæ—¶é—´å±žæ€§# è¿è¡Œç»“æžœ 2018 123import timeprint(time.gmtime()) # ä¸–ç•Œç»Ÿä¸€æ—¶é—´ï¼Œæ¯”åŒ—äº¬æ—¶é—´æ™š8å°æ—¶# è¿è¡Œç»“æžœ time.struct_time(tm_year=2018, tm_mon=10, tm_mday=16, tm_hour=8, tm_min=51, tm_sec=16, tm_wday=1, tm_yday=289, tm_isdst=0) 3 æ ¼å¼åŒ–çš„å­—ç¬¦ä¸²æ—¶é—´123456import time print(time.strftime('%Y-%m-%d %H:%M:%S %p'))print(time.strftime('%Y-%m-%d %X %p'))# è¿è¡Œç»“æžœ # 2018-10-16 16:54:56 PM# 2018-10-16 16:54:56 PM 4 ä¸‰ç§æ ¼å¼ä¹‹é—´çš„ç›¸äº’è½¬æ¢ æ—¶é—´æˆ³è½¬ä¸ºç»“æž„åŒ– 123import timeprint(time.localtime(time.time()))# è¿è¡Œç»“æžœ time.struct_time(tm_year=2018, tm_mon=10, tm_mday=16, tm_hour=16, tm_min=57, tm_sec=18, tm_wday=1, tm_yday=289, tm_isdst=0) ç»“æž„åŒ–è½¬å­—ç¬¦ä¸² 123import timeprint(time.strftime("%Y-%m-%d",time.localtime(time.time())))# è¿è¡Œç»“æžœ 2018-10-16 å­—ç¬¦ä¸²è½¬ç»“æž„åŒ– 123import timeprint(time.strftime('2018-10-16', '%Y-%m-%d'))# è¿è¡Œç»“æžœ time.struct_time(tm_year=2018, tm_mon=10, tm_mday=15, tm_hour=0, tm_min=0, tm_sec=0, tm_wday=0, tm_yday=288, tm_isdst=-1) ç»“æž„åŒ–è½¬æ—¶é—´æˆ³ 123import timeprint(time.mktime(time.strptime('2018-10-15', '%Y-%m-%d')))# è¿è¡Œç»“æžœ 1539532800.0 æ ¼æž—å¨æ²»æ—¶é—´ 123456import timeprint(time.asctime(time.localtime()))print(time.ctime())# è¿è¡Œç»“æžœ# Tue Oct 16 17:12:34 2018# Fri Jan 2 08:00:00 1970 äºŒ datetimedatetimeæ˜¯ä¸€ä¸ªåŒ…ï¼Œé‡Œé¢åŒ…å«å¯¹æ—¶é—´çš„å¤„ç†å’Œæ—¥æœŸçš„å¤„ç† èŽ·å–å½“å‰è¯¦ç»†æ—¶é—´ 123import datetimeprint(datetime.datetime.now())# è¿è¡Œç»“æžœ 2018-10-16 17:25:16.186114 èŽ·å–æ—¶é—´çš„æŸä¸€éƒ¨åˆ† 123import datetimeprint(datetime.datetime.now().hour) # åˆ†é’Ÿã€å¹´ä»½ç­‰åŒç†# è¿è¡Œç»“æžœ 17 æ›¿æ¢æ—¶é—´çš„æŸä¸€éƒ¨åˆ† 12345import datetimet1 = date.datetime.now()t1 = t1.replace(year=2019)print(t1)# è¿è¡Œç»“æžœ 2019-10-16 18:36:42.166986 æ—¶é—´å·®å¯¹è±¡ 12345import datetimet2 = datetime.timedelta(weeks=1)t3 = datetime.datetime.now()print(t2 + t3)# è¿è¡Œç»“æžœ 2018-10-23 18:40:10.481854]]></content>
      <categories>
        <category>Python</category>
      </categories>
      <tags>
        <tag>å†…ç½®æ¨¡å—</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[æ–‡ä»¶ç›®å½•è§„èŒƒ]]></title>
    <url>%2F2018%2F10%2F15%2F%E6%96%87%E4%BB%B6%E7%9B%AE%E5%BD%95%E8%A7%84%E8%8C%83%2F</url>
    <content type="text"><![CDATA[éšç€åŠŸèƒ½çš„å¢žå¤šï¼Œä»£ç é€»è¾‘ä¹Ÿä¼šè¶Šæ¥è¶Šå¤šï¼Œå¯¼è‡´ä»£ç é€»è¾‘æ··ä¹±ä¸ä¾¿äºŽç®¡ç†é¡¹ç›®ã€‚ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œå¯ä»¥å°†ç›¸åŒåŠŸèƒ½çš„ä»£ç é›†åˆåœ¨ä¸€ä¸ªæ–‡ä»¶å¤¹ï¼Œè®¾ç½®ä¸€ä¸ªå…¥å£å‡½æ•°ï¼Œä¸€äº›è®¾ç½®æ–‡ä»¶æ”¾åœ¨ä¸€ä¸ªæ–‡ä»¶ï¼Œä¸»è¦é€»è¾‘ä»£ç æ”¾ä¸€ä¸ªæ–‡ä»¶å¤¹ã€‚ã€‚ã€‚ è¿™æ ·å¯¹äºŽæ•´ä¸ªä¸šåŠ¡æœ‰å¾ˆå¥½çš„å¯è¯»æ€§å’Œæ‰©å±•æ€§ã€‚ å¯¹äºŽä¹‹å‰çš„ATM+è´­ç‰©è½¦é¡¹ç›®æœ€å¼€å§‹æ‰€æœ‰çš„é€»è¾‘ä»£ç éƒ½åœ¨ä¸€ä¸ªæ–‡ä»¶ï¼Œå½“æˆ‘ä»¬éœ€è¦ä¿®æ”¹æŸäº›å‡½æ•°æ—¶ï¼Œé‡åˆ°äº†ä¸€ç‚¹å›°éš¾ï¼Œå°±æ˜¯æ•´ä¸ªé¡¹ç›®æœ‰600+è¡Œä»£ç ï¼Œè€Œä¸”ä»€ä¹ˆéƒ½åœ¨é‡Œé¢ï¼Œå¯¹äºŽæƒ³å¿«é€Ÿå…·ä½“çš„æ‰¾åˆ°æƒ³ä¿®æ”¹çš„åœ°æ–¹ç¡®å®žéœ€è¦èŠ±è´¹ä¸€äº›æ—¶é—´ï¼Œæ•ˆçŽ‡ä½Žä¸‹ã€‚æ‰€ä»¥é‡æ–°ä¿®æ”¹åŽï¼Œå°†å…·ä½“åŠŸèƒ½ä»£ç æ”¾åœ¨ä¸€èµ·ï¼Œå¾ˆæ˜Žæ˜¾é€»è¾‘æ¸…æ™°äº†ï¼Œè€Œä¸”çœ‹çš„ä¹Ÿå¾ˆèˆ’æœã€‚ å¦‚ä¸‹ä¸ºæˆ‘çš„é¡¹ç›®ç»“æž„ä¸­çš„binæ–‡ä»¶å¤¹ï¼š binç›®å½•ä¸‹çš„start.pyæ–‡ä»¶ä¸ºå¯åŠ¨å‡½æ•°ï¼Œé¦–å…ˆåœ¨å¯åŠ¨å‡½æ•°é‡Œé¢å¯¼å…¥oså’Œsysæ¨¡å—ï¼Œç›®çš„æ˜¯ä¸ºäº†å°†å½“å‰é¡¹ç›®çš„æ ¹è·¯å¾„åŠ å…¥çŽ¯å¢ƒå˜é‡ï¼ŒæŽ¥ç€å¯¼å…¥ç›¸å…³å‡½æ•°å’Œå˜é‡ã€‚è¯¥pyæ–‡ä»¶ä»…ä»…ä½œä¸ºç¨‹åºçš„å…¥å£ï¼Œé‡Œé¢æ²¡æœ‰é€»è¾‘ä»£ç ã€‚ å¦‚ä¸‹ä¸ºconfæ–‡ä»¶å¤¹ï¼š confæ˜¯configurationçš„ç¼©å†™ï¼Œä¸ºé…ç½®çš„æ„æ€ï¼Œé‡Œé¢åªæœ‰settingsæ–‡ä»¶ï¼Œå¯ä»¥çœ‹å‡ºé‡Œé¢éƒ½æ˜¯å®šä¹‰çš„ä¸€äº›å˜é‡ï¼Œï¼ˆåœ¨è¿™é‡Œçš„å˜é‡å…¶å®žåº”è¯¥ä½¿ç”¨å¤§å†™çš„ï¼‰ æŽ¥ä¸‹æ¥æ˜¯ä¸»è¦ä¸šåŠ¡é€»è¾‘ä»£ç æ–‡ä»¶å¤¹coreï¼ˆæ ¸å¿ƒï¼‰ï¼š é‡Œé¢æœ‰ä¸‰ä¸ªpyæ–‡ä»¶ï¼Œå› ä¸ºé¡¹ç›®æœ‰ä¸‰ä¸ªä¸»è¦åŠŸèƒ½ï¼Œåˆ†åˆ«æ˜¯ATMã€SHOPPã€USERï¼Œæ‰€ä»¥åˆ†äº†ä¸‰ä¸ªï¼Œé‡Œé¢çš„ä»£ç å¤§åŒå°å¼‚ã€‚ æŽ¥ä¸‹æ¥æ˜¯è®°å½•ç”¨æˆ·æ¶ˆè´¹æµæ°´çš„æ–‡ä»¶å¤¹ï¼Œï¼ˆdbï¼‰é‡Œé¢ä¹ŸåŒ…æ‹¬äº†ç”¨æˆ·ä¿¡æ¯ï¼Œæ¯”å¦‚è´¦å·åã€å¯†ç ã€ä½™é¢ã€çŠ¶æ€ç­‰ä¿¡æ¯ã€‚ è¿™äº›ä¿¡æ¯æ–‡ä»¶åœ¨æ¯ä¸€ä¸ªè´¦æˆ·ç™»å½•æ—¶ï¼Œä¼šæ ¹æ®ç™»å½•ååˆ›å»ºä¸€ä¸ªæ–‡ä»¶ï¼Œæ¨¡å¼ä¸ºè¿½åŠ ï¼Œå½“é€€å‡ºæ—¶å°†æ•°æ®åˆ·å…¥æ–‡ä»¶å¹¶å…³é—­æ–‡ä»¶ã€‚ æŽ¥ä¸‹æ¥ä¸ºlibï¼Œlibæ˜¯libraryçš„ç¼©å†™ï¼Œè¡¨ç¤ºåº“çš„æ„æ€ã€‚é‡Œé¢åªæœ‰commonæ–‡ä»¶ï¼ˆé‡Œé¢å¯ä»¥æ”¾å…±ç”¨çš„ä¸€äº›åŠŸèƒ½ä»£ç æˆ–è€…ç¬¬ä¸‰æ–¹åº“ï¼‰ commonæ–‡ä»¶é‡Œé¢æ˜¯å‡ ä¸ªé€šç”¨çš„åŠŸèƒ½å‡½æ•°ï¼Œæ¯”å¦‚æ—¥å¿—è£…é¥°å™¨ã€è¯»å–ç”¨æˆ·æ‰€æœ‰ä¿¡æ¯çš„å‡½æ•°ã€ã€ã€ æŽ¥ä¸‹æ¥ä¸ºlogæ–‡ä»¶å¤¹ï¼Œè®°å½•æ—¥å¿—ï¼Œå“ªä¸ªç”¨æˆ·ç™»é™†äº†ï¼Œåšäº†ä»€ä¹ˆäº‹æƒ…éƒ½ä¼šè®°å½•ä¸‹æ¥ï¼ˆä»”ç»†æƒ³æ¥ï¼Œç”Ÿæ´»ä¸­æˆ‘ä»¬åœ¨æŸäº›åº”ç”¨ä¸­åšçš„äº‹æƒ…æ˜¯ä¸æ˜¯ä¹Ÿä¼šè®°å½•ä¸‹æ¥ï¼Ÿç­”æ¡ˆæ˜¯è‚¯å®šçš„ï¼‰ æœ€åŽä¸€ä¸ªæ˜¯README.mdæ–‡ä»¶ï¼Œé€šå¸¸æ˜¯ç”¨æ¥ç»™ç”¨æˆ·çœ‹çš„ï¼Œè¯´æ˜Žç¨‹åºæ€Žä¹ˆä½¿ç”¨ï¼Œå«åšå¸®åŠ©æ–‡æ¡£ã€‚]]></content>
      <categories>
        <category>Python</category>
      </categories>
      <tags>
        <tag>åŒ…ã€æ–‡ä»¶</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[æ¨¡å—ä¸ŽåŒ…]]></title>
    <url>%2F2018%2F10%2F11%2F%E6%A8%A1%E5%9D%97%E4%B8%8E%E5%8C%85%2F</url>
    <content type="text"><![CDATA[ä¸€ ä»€ä¹ˆæ˜¯æ¨¡å—æ¨¡å—å°±æ˜¯ä¸€ç»„åŠŸèƒ½çš„é›†åˆä½“ï¼Œå¯ä»¥é€šè¿‡å¯¼å…¥æ¨¡å—æ¥å¤ç”¨æ¨¡å—çš„åŠŸèƒ½ã€‚ æ¯”å¦‚æˆ‘åœ¨åŒä¸€ä¸ªæ–‡ä»¶å¤¹å®šä¹‰ä¸¤ä¸ª.pyæ–‡ä»¶ï¼Œåˆ†åˆ«å‘½åä¸ºA.pyå’ŒB.pyï¼Œé‚£ä¹ˆå¯ä»¥é€šè¿‡åœ¨Aæ–‡ä»¶é‡Œé€šè¿‡import Bæ¥ä½¿ç”¨Bæ–‡ä»¶é‡Œçš„åç§°ç©ºé—´ã€‚ pythonä¸­ï¼Œæ¨¡å—çš„ä½¿ç”¨æ–¹å¼éƒ½æ˜¯ä¸€æ ·çš„ï¼Œå¯ä»¥åˆ†ä¸ºå››ä¸ªé€šç”¨ç±»åˆ«ï¼š ä½¿ç”¨pythonç¼–å†™çš„.pyæ–‡ä»¶ å·²è¢«ç¼–è¯‘ä¸ºå…±äº«åº“æˆ–DLLçš„Cæˆ–C++æ‰©å±• æŠŠä¸€ç³»åˆ—æ¨¡å—ç»„ç»‡åˆ°ä¸€èµ·çš„æ–‡ä»¶å¤¹ï¼ˆæ³¨ï¼šæ–‡ä»¶å¤¹ä¸‹æœ‰ä¸€ä¸ªinit.pyæ–‡ä»¶ï¼Œè¯¥æ–‡ä»¶å¤¹ç§°ä¹‹ä¸ºåŒ…ï¼‰ ä½¿ç”¨Cç¼–å†™å¹¶é“¾æŽ¥åˆ°pythonè§£é‡Šå™¨çš„å†…ç½®æ¨¡å— äºŒ ä¸ºä½•è¦ä½¿ç”¨æ¨¡å— ä»Žæ–‡ä»¶çº§åˆ«ç»„ç»‡ç¨‹åºï¼Œä¾¿äºŽç®¡ç† éšç€éœ€æ±‚çš„å¢žå¤šï¼ŒåŠŸèƒ½ä¹Ÿä¼šè¶Šæ¥è¶Šå¤šï¼Œä¸ºäº†æ–¹ä¾¿ç®¡ç†ï¼Œé€šå¸¸å°†ç¨‹åºåˆ†æˆå¤šä¸ªæ–‡ä»¶ï¼Œè¿™æ ·é¡¹ç›®çš„ç»“æž„ä¼šæ›´åŠ æ¸…æ™°ï¼Œæ–¹ä¾¿ç®¡ç†ã€‚è¿™æ—¶ä¸ä»…ä»…å¯ä»¥æŠŠè¿™äº›æ–‡ä»¶å½“åšè„šæœ¬åŽ»æ‰§è¡Œï¼Œè¿˜å¯ä»¥æŠŠä»–ä»¬å½“åšæ¨¡å—æ¥å¯¼å…¥åˆ°å…¶ä»–çš„æ¨¡å—ä¸­ï¼Œå®žçŽ°åŠŸèƒ½å¤ç”¨ã€‚ ä½¿ç”¨åˆ«äººå†™å¥½çš„æ¨¡å—ï¼Œæé«˜å¼€å‘æ•ˆçŽ‡ ä½¿ç”¨åˆ«äººå·²ç»å†™å¥½çš„è½®å­ï¼Œåœ¨è‡ªå·±çš„é¡¹ç›®ä¸­ä½¿ç”¨ï¼Œå¯ä»¥æžå¤§åœ°æé«˜å¼€å‘æ•ˆçŽ‡ã€‚ æ³¨æ„ï¼šå½“é€€å‡ºpythonè§£é‡Šå™¨çš„æ—¶å€™ï¼Œé‡æ–°è¿›å…¥é‚£ä¹ˆä¹‹å‰å®šä¹‰çš„å‡½æ•°å’Œå˜é‡éƒ½ä¼šä¸¢å¤±ï¼Œå› æ­¤é€šå¸¸å°†ç¨‹åºå†™åˆ°æ–‡ä»¶ä¸­ä»¥ä¾¿æ°¸ä¹…ä¿å­˜ï¼Œéœ€è¦æ—¶å¯ä»¥åœ¨å‘½ä»¤è¡Œé€šè¿‡python *.pyæ–¹æ³•æ‰§è¡Œã€‚ 1234567891011121314# test1.pyprint('from test1')money = 10def func1(): print('test1æ¨¡å—:', money) def func2(): print('test1æ¨¡å—') func1() def change(): global money money = 100 123# test2.pyimport test1test1.func1() 123# è¿è¡Œç»“æžœfrom test1test1æ¨¡å—: 10 å½“åœ¨tes2tå¯¼å…¥çš„æ—¶å€™ä¼šæ‰§è¡Œtest1ä¸­çš„ä»£ç ï¼Œæ‰€ä»¥é¦–å…ˆä¼šæ‰“å°from test1æŽ¥ç€æ‰§è¡Œtest1ä¸­çš„func1å‡½æ•°ã€‚ ä¸‰ ä½¿ç”¨æ¨¡å—ä¹‹import1 importçš„ä½¿ç”¨æ¨¡å—å¯ä»¥åŒ…å«å¯æ‰§è¡Œçš„è¯­å¥å’Œå‡½æ•°çš„å®šä¹‰ï¼Œè¿™äº›è¯­å¥çš„ç›®çš„æ˜¯åˆå§‹åŒ–æ¨¡å—ï¼Œå®ƒä»¬åªåœ¨æ¨¡å—åç¬¬ä¸€æ¬¡å¯¼å…¥æ—¶æ‰ä¼šæ‰§è¡Œï¼ˆimportè¯­å¥å¯ä»¥åœ¨ç¨‹åºä¸­çš„ä»»æ„ä½ç½®ä½¿ç”¨çš„ï¼Œä¸”é’ˆå¯¹åŒä¸€ä¸ªæ¨¡å—å¯ä»¥importå¤šæ¬¡ï¼Œpythonä¸ºäº†é˜²æ­¢é‡å¤å¯¼å…¥ï¼Œå½“ç¬¬ä¸€æ¬¡å¯¼å…¥æ¨¡å—æ—¶å°±å°†æ¨¡å—çš„åç§°ç©ºé—´åŠ è½½åˆ°å†…å­˜äº†ï¼ŒåŽç»­çš„importè¯­å¥ä»…æ˜¯å¯¹å·²ç»åŠ è½½åˆ°å†…å­˜ä¸­çš„æ¨¡å—å¯¹è±¡å¢žåŠ äº†ä¸€æ¬¡å¼•ç”¨ï¼Œå¹¶ä¸ä¼šé‡å¤æ‰§è¡Œæ¨¡å—å†…çš„è¯­å¥ï¼‰ 12# test3print('from test3') 12345# test4import test3import test3import test3import test3 12# è¿è¡Œç»“æžœfrom test3 ps:å¯ä»¥å¯¼å…¥sysæ¨¡å—ï¼Œè°ƒç”¨sys.moduleæŸ¥çœ‹å½“å‰åŠ è½½åˆ°å†…å­˜ä¸­çš„æ¨¡å—ï¼Œsys.moduleæ˜¯ä¸€ä¸ªå­—å…¸ï¼Œå†…éƒ¨åŒ…å«æ¨¡å—åå’Œæ¨¡å—åè·¯å¾„çš„å¯¹åº”å…³ç³»ã€‚è¯¥å­—å…¸å†³å®šäº†å¯¼å…¥æ¨¡å—æ—¶æ˜¯å¦éœ€è¦é‡æ–°å¯¼å…¥ã€‚ 2 å¯¼å…¥æ¨¡å—æ—¶å‘ç”Ÿäº†ä»€ä¹ˆè¿è¡Œpyæ–‡ä»¶å¯¼å…¥ä¸€ä¸ªæ¨¡å—æ—¶ï¼Œè§£é‡Šå™¨åšäº†ä¸‰ä»¶äº‹ï¼š åœ¨æ‰§è¡Œæ–‡ä»¶ä¸­ä¸ºè¢«å¯¼å…¥æ–‡ä»¶åˆ›å»ºæ–°çš„åç§°ç©ºé—´ï¼Œåœ¨è¢«å¯¼å…¥æ¨¡å—ä¸­å®šä¹‰çš„å‡½æ•°å’Œæ–¹æ³•è‹¥æ˜¯ä½¿ç”¨åˆ°äº†globalæ—¶è®¿é—®çš„å°±æ˜¯è¿™ä¸ªåç§°ç©ºé—´ã€‚ åœ¨æ–°åˆ›å»ºçš„åç§°ç©ºé—´ä¸­æ‰§è¡Œæ¨¡å—ä¸­çš„åŒ…å«çš„ä»£ç ã€‚å‡½æ•°å®šä¹‰ä¹Ÿæ˜¯â€˜â€™è¢«æ‰§è¡Œâ€˜â€™çš„è¯­å¥ï¼Œæ¨¡å—çº§åˆ«å‡½æ•°å®šä¹‰çš„æ‰§è¡Œå°†å‡½æ•°åæ”¾å…¥æ¨¡å—å…¨å±€åç§°ç©ºé—´è¡¨ï¼Œå¯ä»¥ç”¨globals()å¯ä»¥æŸ¥çœ‹ã€‚ åœ¨æ‰§è¡Œæ–‡ä»¶çš„åç§°ç©ºé—´åˆ›å»ºè¢«å¯¼å…¥æ¨¡å—çš„åç§°æ¥å¼•ç”¨è¯¥åç§°ç©ºé—´ã€‚ è¿™ä¸ªåå­—å’Œå˜é‡åæ²¡ä»€ä¹ˆåŒºåˆ«ï¼Œéƒ½æ˜¯â€˜â€™ç¬¬ä¸€ç±»â€˜â€™çš„ï¼Œä¸”ä½¿ç”¨å¥ç‚¹è¡¨ç¤ºæ³•å¯ä»¥è®¿é—®è¢«å¯¼å…¥æ¨¡å—çš„åç§°ç©ºé—´ï¼Œå¯¼å…¥çš„æ¨¡å—ä¸Žè¢«å¯¼å…¥çš„æ¨¡å—æ˜¯ç‹¬ç«‹çš„ä¸¤ä¸ªåç§°ç©ºé—´ã€‚ 3 è¢«å¯¼å…¥æ¨¡å—æœ‰ç‹¬ç«‹çš„åç§°ç©ºé—´æ¯ä¸ªæ¨¡å—éƒ½æ˜¯ä¸€ä¸ªç‹¬ç«‹çš„åç§°ç©ºé—´ï¼Œå®šä¹‰åœ¨è¿™ä¸ªæ¨¡å—ä¸­çš„å‡½æ•°ï¼ŒæŠŠè¿™ä¸ªæ¨¡å—çš„åç§°ç©ºé—´å½“åšå…¨å±€åç§°ç©ºé—´ï¼Œè¿™æ ·å°±ä¸ç”¨æ‹…å¿ƒå®šä¹‰åœ¨ä¸åŒçš„æ¨¡å—ä¸­å…¨å±€å˜é‡åœ¨å¯¼å…¥æ—¶ä¸Žä½¿ç”¨è€…çš„å…¨å±€å˜é‡å†²çªã€‚ æµ‹è¯•1 1234# test5.pyimport test1money = 100print(test1.money) 123# è¿è¡Œç»“æžœfrom test110 æµ‹è¯•2 123456# test6import test1def func1(): print('from test6 func1')test1.func1()func1() 12345# è¿è¡Œç»“æžœfrom test1test1æ¨¡å—: 10from test6 func1# è¿™è¯´æ˜Ž test6ä¸­çš„å‡½æ•°å’Œtest1ä¸­çš„å‡½æ•°ä¸å†²çª æµ‹è¯•3 12345# test7import test1money = 1test1.change()print(money) 12345# è¿è¡Œç»“æžœfrom test1test1æ¨¡å—: 101# è¿™è¯´æ˜Žtest1ä¸­çš„changeå‡½æ•°åªæ˜¯ä¿®æ”¹äº†test1ä¸­çš„å…¨å±€å˜é‡ï¼Œå¯¹test7ä¸­çš„å˜é‡æ²¡æœ‰æ“ä½œæƒé™ å›› ä½¿ç”¨æ¨¡å—ä¹‹fromâ€¦importâ€¦1 fromâ€¦importâ€¦ä¸Žimport â€¦çš„åŒºåˆ«åŒºåˆ«å°±æ˜¯ï¼šä½¿ç”¨fromâ€¦importâ€¦æ˜¯å°†è¢«å¯¼å…¥æ¨¡å—ä¸­çš„åå­—ç›´æŽ¥å¯¼å…¥åˆ°å½“å‰çš„åç§°ç©ºé—´ä¸­ï¼Œæ‰€ä»¥åœ¨å½“å‰åç§°ç©ºé—´ä¸­ï¼Œç›´æŽ¥ä½¿ç”¨åå­—å°±å¯ä»¥äº†ï¼Œä¸éœ€è¦åœ¨å‰é¢åŠ ä¸Šæ¨¡å—åå‰ç¼€ã€‚ fromâ€¦importâ€¦å¯¼å…¥æ–¹å¼çš„ä¼˜ç¼ºç‚¹ï¼š å¥½å¤„ï¼šä½¿ç”¨æ–¹ä¾¿ åå¤„ï¼šå®¹æ˜“ä¸Žå½“å‰æ‰§è¡Œæ–‡ä»¶çš„åå­—å†²çª 2 éªŒè¯ éªŒè¯1ï¼šå½“å‰ä½ç½®ç›´æŽ¥ä½¿ç”¨test1ä¸­çš„å‡½æ•°åï¼Œæ‰§è¡Œæ—¶ä»ç„¶ä»¥test1.pyæ–‡ä»¶ä¸ºå…¨å±€åç§°ç©ºé—´ 12345# å¯¼å…¥çš„å‡½æ•°func1ï¼Œæ‰§è¡Œæ—¶ä»ç„¶å›žåˆ°test1.pyä¸­å¯»æ‰¾å…¨å±€å˜é‡money# test8from test1 import func1money = 50func1() 123# è¿è¡Œç»“æžœfrom test1test1æ¨¡å—: 10 123456# å¯¼å…¥çš„å‡½æ•°func2ï¼Œæ‰§è¡Œæ—¶éœ€è¦è°ƒç”¨func1ï¼Œä»ç„¶å›žåˆ°test1.pyä¸­æ‰¾func1#test9.pyfrom test1 import func2def func1(): print('-----')func2() 1234# è¿è¡Œç»“æžœfrom test1test1æ¨¡å—test1æ¨¡å—: 10 éªŒè¯2ï¼šå¦‚æžœå½“å‰åç§°ç©ºé—´å’Œè¢«å¯¼å…¥çš„æ¨¡å—ä¸­çš„åå­—é‡åˆï¼Œé‚£ä¹ˆä¼šè¦†ç›–æŽ‰å‰é¢çš„åå­— 123456# å¯¼å…¥çš„å‡½æ•°fun1,è¢«å½“å‰ä½ç½®å®šä¹‰çš„func1è¦†ç›–æŽ‰äº†# test10from test1 import func1def func1(): print('======')func1() 1234# è¿è¡Œç»“æžœfrom test1======# è¿™è¯´æ˜Žfunc1æŠŠè¢«å¯¼å…¥åå­—func1è¦†ç›–æŽ‰äº† 123456# å½“å‰ä½ç½®å®šä¹‰çš„func1å¯¼å…¥func1# test11def func1(): print('======')from test1 import func1func1() 1234# è¿è¡Œç»“æžœfrom test1test1æ¨¡å—: 10# è¿™è¯´æ˜Žåœ¨åŽé¢å¯¼å…¥çš„è¯ä¼šè¦†ç›–æŽ‰å‰é¢çš„ éªŒè¯3ï¼šè¢«å¯¼å…¥çš„æ–¹æ³•æ‰§è¡Œæ—¶ï¼Œå§‹ç»ˆä»¥æºæ–‡ä»¶ä¸ºå‡† 12345# test12from test1 import money,func1money=100 #å°†å½“å‰ä½ç½®çš„åå­—moneyç»‘å®šåˆ°äº†100print(money) #æ‰“å°å½“å‰çš„åå­—func1() #è¯»å–spam.pyä¸­çš„åå­—money,ä»ç„¶ä¸º1000 12345# è¿è¡Œç»“æžœfrom the test100test1æ¨¡å—: 10# å¯ä»¥çœ‹å‡ºè¿è¡Œfunc1çš„æ—¶å€™ä¾ç„¶ä»ŽåŽŸåç§°ç©ºé—´æŸ¥æ‰¾çš„ 3 from â€¦ import *from â€¦ import * æ˜¯æŠŠè¢«å¯¼å…¥æ–‡ä»¶ä¸­æ‰€æœ‰ä¸æ˜¯ä»¥ä¸‹åˆ’çº¿(_)å¼€å¤´çš„åå­—éƒ½å¯¼å…¥åˆ°å½“å‰åç§°ç©ºé—´ã€‚ å¤§éƒ¨åˆ†æƒ…å†µä¸‹ä¸åº”è¯¥ä»¥è¿™ç§å¯¼å…¥æ–¹å¼ï¼Œå› ä¸ºä¸çŸ¥é“è¢«å¯¼å…¥åŒ…ä¸­çš„åå­—æ˜¯å¦ä¼šå’Œå½“å‰åç§°ç©ºé—´ä¸­çš„åå­—é‡åˆé€ æˆåå­—è¦†ç›–ã€‚ è§£å†³æ–¹æ³•æ˜¯åœ¨è¢«å¯¼å…¥æ–‡ä»¶ä¸­ä½¿ç”¨all = []æ¥æŽ§åˆ¶è¢«å¯¼å…¥çš„åå­—ï¼Œåªæœ‰åœ¨allé‡Œé¢çš„æ‰ä¼šè¢«å¯¼å…¥ã€‚ 4 æ¨¡å—å¾ªçŽ¯å¯¼å…¥é—®é¢˜æ¨¡å—å¾ªçŽ¯/åµŒå¥—å¯¼å…¥æŠ›å‡ºå¼‚å¸¸çš„æ ¹æœ¬åŽŸå› æ˜¯ç”±äºŽåœ¨pythonä¸­æ¨¡å—è¢«å¯¼å…¥ä¸€æ¬¡ä¹‹åŽï¼Œå°±ä¸ä¼šé‡æ–°å¯¼å…¥ã€‚ 1234# test1.pyprint('æ­£åœ¨å¯¼å…¥1')from test2 import yx = '1' 1234# test2.pyprint('æ­£åœ¨å¯¼å…¥2')from test1 import xy = '2' 12# run.pyimport test1 1234567891011# è¿è¡Œç»“æžœæ­£åœ¨å¯¼å…¥1æ­£åœ¨å¯¼å…¥2Traceback (most recent call last): File "/Users/jingxing/PycharmProjects/pythonå…¨æ ˆ/day18/pack/run.py", line 6, in &lt;module&gt; import test1 File "/Users/jingxing/PycharmProjects/pythonå…¨æ ˆ/day18/pack/test1.py", line 7, in &lt;module&gt; from test2 import y File "/Users/jingxing/PycharmProjects/pythonå…¨æ ˆ/day18/pack/test2.py", line 8, in &lt;module&gt; from test1 import xImportError: cannot import name 'x' åˆ†æžï¼šåœ¨runæ–‡ä»¶ä¸­æ‰§è¡Œå¯¼å…¥test1ï¼Œè¿è¡Œtest1çš„ä»£ç ï¼Œæ‰“å°å¹¶ä¸”ä»Žtest2ä¸­å¯¼å…¥yï¼Œå›žåˆ°test2ï¼Œæ‰“å°å¹¶ä¸”ä»Žtest1ä¸­å¯¼å…¥ï¼Œå› ä¸ºå·²ç»å¯¼å…¥test1äº†ï¼ˆæ²¡å¯¼å…¥å®Œå…¨ï¼Œå› ä¸ºä»£ç æ²¡æ‰§è¡Œå®Œï¼‰ï¼Œæ‰€ä»¥ç›´æŽ¥æ‰¾â€™xâ€™ï¼Œä½†å› ä¸ºåœ¨test1ä¸­çš„ä»£ç æ‰§è¡Œä¸ä¸‹åŽ»ï¼Œæ‰€ä»¥æŠ¥é”™ã€‚æ‰§è¡Œæ–‡ä»¶ä¸ç­‰äºŽå°±å®Œå…¨å¯¼å…¥æ–‡ä»¶äº†ã€‚ è§£å†³æ–¹æ³•1ï¼šå¯¼å…¥è¯­å¥æ”¾åœ¨æœ€åŽ è§£å†³æ–¹æ³•2ï¼šå¯¼å…¥è¯­å¥æ”¾åœ¨å‡½æ•°ä¸­ï¼ˆå› ä¸ºåœ¨å¯¼å…¥æ¨¡å—æ—¶ï¼Œå‡½æ•°å†…çš„ä»£ç å¹¶ä¸ä¼šæ‰§è¡Œï¼Œåªä¼šåˆ¤æ–­è¯­æ³•é”™è¯¯ï¼Œæ‰€ä»¥è¿™æ—¶å€™å¯¼å…¥æ¨¡å—å¯ä»¥å®Œå…¨å¯¼å…¥ï¼‰ 5 æ¨¡å—çš„é‡è½½è€ƒè™‘åˆ°æ€§èƒ½çš„åŽŸå› ï¼Œæ¯ä¸ªæ¨¡å—åªè¢«å¯¼å…¥ä¸€æ¬¡ï¼Œæ”¾å…¥å­—å…¸sys.moduleä¸­ï¼Œå¦‚æžœä½ æ”¹å˜äº†æ¨¡å—çš„å†…å®¹ï¼Œå¿…é¡»é‡å¯ç¨‹åºï¼ˆpythonä¸æ”¯æŒé‡æ–°åŠ è½½æˆ–å¸è½½ä¹‹å‰å¯¼å…¥çš„æ¨¡å—ï¼‰ å°±ç®—åœ¨ä¿®æ”¹å·²ç»å¯¼å…¥çš„æ¨¡å—é‡Œé¢çš„ä»£ç å¯¹è¿è¡Œç»“æžœä¹Ÿæ²¡å½±å“ã€‚ 6 pyæ–‡ä»¶åŒºåˆ†ä¸¤ç§ç”¨é€”ï¼šæ¨¡å—ä¸Žè„šæœ¬ è„šæœ¬ï¼Œä¸€ä¸ªæ–‡ä»¶å°±æ˜¯æ•´ä¸ªç¨‹åºï¼Œç”¨æ¥è¢«æ‰§è¡Œ æ¨¡å—ï¼Œæ–‡ä»¶ä¸­å­˜æ”¾ç€ä¸€å †åŠŸèƒ½ï¼Œç”¨æ¥è¢«å¯¼å…¥ä½¿ç”¨ pythonå†…ç½®äº†å…¨å±€å˜é‡name, å½“æ–‡ä»¶è¢«å½“åšè„šæœ¬æ‰§è¡Œæ—¶ï¼šnameç­‰äºŽâ€™mainâ€˜ å½“æ–‡ä»¶è¢«å½“åšæ¨¡å—å¯¼å…¥æ—¶ï¼šnameç­‰äºŽæ¨¡å—å ä½œç”¨ï¼šç”¨æ¥æŽ§åˆ¶.pyæ–‡ä»¶åœ¨ä¸åŒçš„åº”ç”¨åœºæ™¯ä¸‹æ‰§è¡Œä¸åŒçš„é€»è¾‘ 12if __name__ == '__main__': pass 7 æ¨¡å—æœç´¢è·¯å¾„æ¨¡å—çš„æŸ¥æ‰¾é¡ºåºæ˜¯ï¼šå†…å­˜ä¸­å·²ç»åŠ è½½çš„æ¨¡å—â€“ã€‹å†…ç½®æ¨¡å—â€“ã€‹sys.pathè·¯å¾„ä¸­åŒ…å«çš„æ¨¡å— è¯¦ç»†ï¼šåœ¨ç¬¬ä¸€æ¬¡å¯¼å…¥æŸä¸ªæ¨¡å—å¼ï¼Œä¼šå…ˆæ£€æŸ¥è¯¥æ¨¡å—æ˜¯å¦å·²ç»è¢«åŠ è½½åˆ°å†…å­˜ä¸­ï¼ˆå½“å‰æ‰§è¡Œæ–‡ä»¶çš„åç§°ç©ºå¯¹åº”çš„å†…å­˜ï¼‰ï¼Œå¦‚æžœæœ‰åˆ™ç›´æŽ¥å¼•ç”¨ï¼› ps:pythonè§£é‡Šå™¨ä¼šåœ¨å¯åŠ¨æ—¶è‡ªåŠ¨åŠ è½½ä¸€äº›æ¨¡å—åˆ°å†…å­˜ä¸­ï¼Œå¯ä»¥ä½¿ç”¨sys.moduleæŸ¥çœ‹ã€‚ å¦‚æžœåœ¨å†…å­˜ä¸­æ²¡æœ‰ï¼Œè§£é‡Šå™¨ä¼šæŸ¥æ‰¾åŒåçš„å†…å»ºæ¨¡å—ï¼› å¦‚æžœè¿˜æ²¡æœ‰åˆ™åŽ»sys.pathç»™å‡ºçš„ç›®å½•åˆ—è¡¨ä¸­æŸ¥æ‰¾ã€‚ äº†è§£ï¼šsys.pathçš„åˆå§‹åŒ–çš„å€¼æ¥è‡ªäºŽï¼š The directory containing the input script (or the current diretory whrn no files is specified). PYTHONPATH (a list of directory names, with the same syntax as the shell variable PATH). The installation-dependent default. åœ¨åˆå§‹åŒ–åŽï¼Œpythonç¨‹åºå¯ä»¥ä¿®æ”¹sys.pathï¼Œè·¯å¾„æ”¾åœ¨å‰é¢çš„ä¼˜äºŽæ ‡å‡†åº“è¢«åŠ è½½ã€‚ æœç´¢æ—¶æŒ‰ç…§sys.pathä¸­ä»Žå·¦åˆ°å³çš„é¡ºåºæŸ¥æ‰¾ï¼Œä½äºŽå‰é¢çš„ä¼˜å…ˆè¢«æŸ¥æ‰¾ï¼Œsys.pathä¸­è¿˜å¯èƒ½åŒ…å«.zipå½’æ¡£æ–‡ä»¶å’Œ.eggæ–‡ä»¶ï¼Œpythonä¼šæŠŠ.zipå½’æ¡£æ–‡ä»¶å½“æˆä¸€ä¸ªç›®å½•åŽ»å¤„ç†ã€‚ .eggæ–‡ä»¶æ˜¯setuptoolsåˆ›å»ºçš„åŒ…ï¼Œè¿™æ˜¯æŒ‰ç…§ç¬¬ä¸‰æ–¹pythonåº“å’Œæ‰©å±•æ—¶ä½¿ç”¨çš„ä¸€ç§å¸¸è§æ ¼å¼ï¼Œ.eggæ–‡ä»¶å®žé™…ä¸Šåªæ˜¯æ·»åŠ äº†é¢å¤–å…ƒæ•°æ®ï¼ˆå¦‚ç‰ˆæœ¬å·ï¼Œä¾èµ–é¡¹ç­‰ï¼‰çš„.zipæ–‡ä»¶ã€‚ åªèƒ½ä»Ž.zipæ–‡ä»¶ä¸­å¯¼å…¥.pyï¼Œ.pycç­‰æ–‡ä»¶ã€‚ä½¿ç”¨Cç¼–å†™çš„å…±äº«åº“å’Œæ‰©å±•å—æ— æ³•ç›´æŽ¥ä»Ž.zipæ–‡ä»¶ä¸­åŠ è½½ï¼ˆæ­¤æ—¶setuptoolsç­‰æ‰“åŒ…ç³»ç»Ÿæœ‰æ—¶èƒ½æä¾›ä¸€ç§è§„é¿æ–¹æ³•ï¼‰ï¼Œä¸”ä»Ž.zipä¸­åŠ è½½æ–‡ä»¶ä¸ä¼šåˆ›å»º.pycæˆ–è€….pyoæ–‡ä»¶ï¼Œå› æ­¤ä¸€å®šè¦äº‹å…ˆåˆ›å»ºä»–ä»¬ï¼Œæ¥é¿å…åŠ è½½æ¨¡å—æ˜¯æ€§èƒ½ä¸‹é™ã€‚ 8 ç¼–è¯‘pythonæ–‡ä»¶ä¸ºäº†æé«˜åŠ è½½æ¨¡å—çš„é€Ÿåº¦ï¼Œå¼ºè°ƒå¼ºè°ƒå¼ºè°ƒï¼šæé«˜çš„æ˜¯åŠ è½½é€Ÿåº¦è€Œç»éžè¿è¡Œé€Ÿåº¦ã€‚pythonè§£é‡Šå™¨ä¼šåœ¨pycacheç›®å½•ä¸­ä¸‹ç¼“å­˜æ¯ä¸ªæ¨¡å—ç¼–è¯‘åŽçš„ç‰ˆæœ¬ï¼Œæ ¼å¼ä¸ºï¼šmodule.version.pycã€‚é€šå¸¸ä¼šåŒ…å«pythonçš„ç‰ˆæœ¬å·ã€‚ä¾‹å¦‚ï¼Œåœ¨CPython3.3ç‰ˆæœ¬ä¸‹ï¼Œspam.pyæ¨¡å—ä¼šè¢«ç¼“å­˜æˆpycache/spam.cpython-33.pycã€‚è¿™ç§å‘½åè§„èŒƒä¿è¯äº†ç¼–è¯‘åŽçš„ç»“æžœå¤šç‰ˆæœ¬å…±å­˜ã€‚ Pythonæ£€æŸ¥æºæ–‡ä»¶çš„ä¿®æ”¹æ—¶é—´ä¸Žç¼–è¯‘çš„ç‰ˆæœ¬è¿›è¡Œå¯¹æ¯”ï¼Œå¦‚æžœè¿‡æœŸå°±éœ€è¦é‡æ–°ç¼–è¯‘ã€‚è¿™æ˜¯å®Œå…¨è‡ªåŠ¨çš„è¿‡ç¨‹ã€‚å¹¶ä¸”ç¼–è¯‘çš„æ¨¡å—æ˜¯å¹³å°ç‹¬ç«‹çš„ï¼Œæ‰€ä»¥ç›¸åŒçš„åº“å¯ä»¥åœ¨ä¸åŒçš„æž¶æž„çš„ç³»ç»Ÿä¹‹é—´å…±äº«ï¼Œå³pycä½¿ä¸€ç§è·¨å¹³å°çš„å­—èŠ‚ç ï¼Œç±»ä¼¼äºŽJAVAç«.NET,æ˜¯ç”±pythonè™šæ‹Ÿæœºæ¥æ‰§è¡Œçš„ï¼Œä½†æ˜¯pycçš„å†…å®¹è·Ÿpythonçš„ç‰ˆæœ¬ç›¸å…³ï¼Œä¸åŒçš„ç‰ˆæœ¬ç¼–è¯‘åŽçš„pycæ–‡ä»¶ä¸åŒï¼Œ2.5ç¼–è¯‘çš„pycæ–‡ä»¶ä¸èƒ½åˆ°3.5ä¸Šæ‰§è¡Œï¼Œå¹¶ä¸”pycæ–‡ä»¶æ˜¯å¯ä»¥åç¼–è¯‘çš„ï¼Œå› è€Œå®ƒçš„å‡ºçŽ°ä»…ä»…æ˜¯ç”¨æ¥æå‡æ¨¡å—çš„åŠ è½½é€Ÿåº¦çš„ï¼Œä¸æ˜¯ç”¨æ¥åŠ å¯†çš„ã€‚ äº” åŒ…1 ä»€ä¹ˆæ˜¯åŒ…ï¼ŸåŒ…æ˜¯ä¸€ç§é€šè¿‡â€™.æ¨¡å—åâ€™æ¥ç»„ç»‡pythonæ¨¡å—åç§°çš„æ–¹å¼ã€‚ å…·ä½“çš„ï¼šåŒ…å°±æ˜¯ä¸€ä¸ªåŒ…å«æœ‰init.pyæ–‡ä»¶çš„æ–‡ä»¶å¤¹ï¼Œæ‰€ä»¥å…¶å®žæˆ‘ä»¬åˆ›å»ºåŒ…çš„ç›®çš„å°±æ˜¯ä¸ºäº†ç”¨æ–‡ä»¶å¤¹å°†æ–‡ä»¶/æ¨¡å—ç»„ç»‡èµ·æ¥ã€‚ 2 ä¸ºä½•ä½¿ç”¨åŒ…ï¼ŸåŒ…çš„æœ¬è´¨å°±æ˜¯ä¸€ä¸ªæ–‡ä»¶å¤¹ï¼Œæ–‡ä»¶å¤¹çš„åŠŸèƒ½å°±æ˜¯å°†åŒç±»åž‹çš„æ–‡ä»¶ç»„ç»‡èµ·æ¥ã€‚ å…¶å®žä½¿ç”¨åŒ…çš„åŽŸå› å’Œä½¿ç”¨æ¨¡å—çš„åŽŸå› æ˜¯ä¸€æ ·çš„ï¼Œéƒ½æ˜¯ä¸ºäº†æé«˜ç¨‹åºçš„ç»“æž„æ€§å’Œå¯ç»´æŠ¤æ€§ã€‚ 3 æ³¨æ„äº‹é¡¹ å…³äºŽåŒ…ç›¸å…³çš„å¯¼å…¥è¯­å¥ä¹Ÿåˆ†ä¸ºimportå’Œfrom â€¦ import â€¦ä¸¤ç§ï¼Œä½†æ˜¯æ— è®ºå“ªç§ï¼Œæ— è®ºåœ¨ä»€ä¹ˆä½ç½®ï¼Œåœ¨å¯¼å…¥æ—¶éƒ½å¿…é¡»éµå¾ªä¸€ä¸ªåŽŸåˆ™ï¼šå‡¡æ˜¯åœ¨å¯¼å…¥æ—¶å¸¦ç‚¹çš„ï¼Œç‚¹çš„å·¦è¾¹éƒ½å¿…é¡»æ˜¯ä¸€ä¸ªåŒ…ï¼Œå¦åˆ™éžæ³•ã€‚å¯ä»¥å¸¦æœ‰ä¸€è¿žä¸²çš„ç‚¹ï¼Œä½†éƒ½å¿…é¡»éµå¾ªè¿™ä¸ªåŽŸåˆ™ã€‚ä½†å¯¹äºŽå¯¼å…¥åŽï¼Œåœ¨ä½¿ç”¨æ—¶å°±æ²¡æœ‰è¿™ç§é™åˆ¶äº†ï¼Œç‚¹çš„å·¦è¾¹å¯ä»¥æ˜¯åŒ…,æ¨¡å—ï¼Œå‡½æ•°ï¼Œç±»(å®ƒä»¬éƒ½å¯ä»¥ç”¨ç‚¹çš„æ–¹å¼è°ƒç”¨è‡ªå·±çš„å±žæ€§)ã€‚ importå¯¼å…¥æ–‡ä»¶æ—¶ï¼Œäº§ç”Ÿåç§°ç©ºé—´ä¸­çš„åå­—æ¥æºäºŽæ–‡ä»¶ï¼Œimport åŒ…ï¼Œäº§ç”Ÿçš„åç§°ç©ºé—´çš„åå­—åŒæ ·æ¥æºäºŽæ–‡ä»¶ï¼Œå³åŒ…ä¸‹çš„init.pyï¼Œå¯¼å…¥åŒ…æœ¬è´¨å°±æ˜¯åœ¨å¯¼å…¥è¯¥æ–‡ä»¶ åŒ…Aå’ŒåŒ…Bä¸‹å¦‚æžœæœ‰åŒåæ¨¡å—ä¹Ÿä¸ä¼šå†²çªï¼Œå› ä¸ºä»–ä»¬çš„åç§°ç©ºé—´æ˜¯ç‹¬ç«‹çš„ã€‚ 4 ç»å¯¹å¯¼å…¥å’Œç›¸å¯¹å¯¼å…¥åŒ…æ˜¯å†™ç»™åˆ«äººç”¨çš„ï¼Œç„¶è€Œåœ¨åŒ…çš„å†…éƒ¨ä¹Ÿä¼šæœ‰å½¼æ­¤ä¹‹é—´äº’ç›¸å¯¼å…¥çš„éœ€æ±‚ï¼Œè¿™æ—¶å€™å°±æœ‰ç»å¯¹å¯¼å…¥å’Œç›¸å¯¹å¯¼å…¥ä¸¤ç§æ–¹å¼ï¼š ç»å¯¹å¯¼å…¥ï¼šä»¥åŒ…ä½œä¸ºèµ·ç‚¹ ç›¸å¯¹å¯¼å…¥ï¼šä»¥.æˆ–..çš„æ–¹å¼ä½œä¸ºèµ·ç‚¹ï¼ˆåªèƒ½åœ¨ä¸€ä¸ªåŒ…ä¸­ä½¿ç”¨ï¼Œä¸èƒ½ç”¨äºŽä¸åŒç›®å½•å†…ï¼‰ **åŒ…ä»¥åŠåŒ…æ‰€åŒ…å«çš„æ¨¡å—éƒ½æ˜¯ç”¨æ¥è¢«å¯¼å…¥çš„ï¼Œè€Œä¸æ˜¯ç›´æŽ¥æ‰§è¡Œçš„ã€‚è€ŒçŽ¯å¢ƒå˜é‡éƒ½æ˜¯ä»¥æ‰§è¡Œæ–‡ä»¶ä¸ºå‡†ã€‚ 5 ç»å¯¹å¯¼å…¥ä¸Žç›¸å¯¹å¯¼å…¥æ€»ç»“12345678910111213ç»å¯¹å¯¼å…¥ä¸Žç›¸å¯¹å¯¼å…¥# ç»å¯¹å¯¼å…¥: ä»¥æ‰§è¡Œæ–‡ä»¶çš„sys.pathä¸ºèµ·å§‹ç‚¹å¼€å§‹å¯¼å…¥,ç§°ä¹‹ä¸ºç»å¯¹å¯¼å…¥# ä¼˜ç‚¹: æ‰§è¡Œæ–‡ä»¶ä¸Žè¢«å¯¼å…¥çš„æ¨¡å—ä¸­éƒ½å¯ä»¥ä½¿ç”¨# ç¼ºç‚¹: æ‰€æœ‰å¯¼å…¥éƒ½æ˜¯ä»¥sys.pathä¸ºèµ·å§‹ç‚¹,å¯¼å…¥éº»çƒ¦# ç›¸å¯¹å¯¼å…¥: å‚ç…§å½“å‰æ‰€åœ¨æ–‡ä»¶çš„æ–‡ä»¶å¤¹ä¸ºèµ·å§‹å¼€å§‹æŸ¥æ‰¾,ç§°ä¹‹ä¸ºç›¸å¯¹å¯¼å…¥# ç¬¦å·: .ä»£è¡¨å½“å‰æ‰€åœ¨æ–‡ä»¶çš„æ–‡ä»¶åŠ ,..ä»£è¡¨ä¸Šä¸€çº§æ–‡ä»¶å¤¹,...ä»£è¡¨ä¸Šä¸€çº§çš„ä¸Šä¸€çº§æ–‡ä»¶å¤¹# ä¼˜ç‚¹: å¯¼å…¥æ›´åŠ ç®€å•# ç¼ºç‚¹: åªèƒ½åœ¨å¯¼å…¥åŒ…ä¸­çš„æ¨¡å—æ—¶æ‰èƒ½ä½¿ç”¨ #æ³¨æ„: 1. ç›¸å¯¹å¯¼å…¥åªèƒ½ç”¨äºŽåŒ…å†…éƒ¨æ¨¡å—ä¹‹é—´çš„ç›¸äº’å¯¼å…¥,å¯¼å…¥è€…ä¸Žè¢«å¯¼å…¥è€…éƒ½å¿…é¡»å­˜åœ¨äºŽä¸€ä¸ªåŒ…å†… 2. attempted relative import beyond top-level package # è¯•å›¾åœ¨é¡¶çº§åŒ…ä¹‹å¤–ä½¿ç”¨ç›¸å¯¹å¯¼å…¥æ˜¯é”™è¯¯çš„,è¨€å¤–ä¹‹æ„,å¿…é¡»åœ¨é¡¶çº§åŒ…å†…ä½¿ç”¨ç›¸å¯¹å¯¼å…¥,æ¯å¢žåŠ ä¸€ä¸ª.ä»£è¡¨è·³åˆ°ä¸Šä¸€çº§æ–‡ä»¶å¤¹,è€Œä¸Šä¸€çº§ä¸åº”è¯¥è¶…å‡ºé¡¶çº§åŒ…]]></content>
      <categories>
        <category>Python</category>
      </categories>
      <tags>
        <tag>python</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[åŒ¿åå‡½æ•°pythonå†…ç½®é«˜é˜¶å‡½æ•°ä»¥åŠé€’å½’]]></title>
    <url>%2F2018%2F10%2F10%2F%E5%8C%BF%E5%90%8D%E5%87%BD%E6%95%B0python%E5%86%85%E7%BD%AE%E9%AB%98%E9%98%B6%E5%87%BD%E6%95%B0%E4%BB%A5%E5%8F%8A%E9%80%92%E5%BD%92%2F</url>
    <content type="text"><![CDATA[åŒ¿åå‡½æ•°pythonå®šä¹‰ä¸€ä¸ªå‡½æ•°é€šå¸¸ä½¿ç”¨defå…³é”®è¯ï¼ŒåŽé¢è·Ÿå‡½æ•°åï¼Œç„¶åŽæ˜¯æ³¨é‡Šã€ä»£ç å—ç­‰ã€‚ 123def func(): '''æ³¨é‡Š''' print('from func') è¿™æ ·å°±åœ¨å…¨å±€å‘½åç©ºé—´å®šä¹‰äº†ä¸€ä¸ªå«funcçš„å‡½æ•°ï¼Œfuncè¡¨ç¤ºå‡½æ•°ä½“çš„å†…å­˜åœ°å€ï¼Œå› ä¸ºfuncæŒ‡å‘å‡½æ•°ä½“å†…å­˜åœ°å€ï¼Œæ‰€ä»¥å¯ä»¥é€šè¿‡funcæ¥è°ƒç”¨å‡½æ•°ã€‚ é‚£ä¹ˆåŒ¿åå‡½æ•°å‘¢ï¼Ÿä»Žåå­—å°±å¯çœ‹å‡ºï¼ŒåŒ¿åã€‚æƒ³æƒ³å°±æœ‰ç‚¹åƒä»¥å‰å°æ—¶å€™çš„ä½šåä¸€æ ·ï¼Œå¸¦ç‚¹è¯´ä¸æ¸…æ¥šçš„ç¥žç§˜è‰²å½©ï¼ŒçŽ°åœ¨æƒ³æ¥ä¹‹æ‰€ä»¥æ„Ÿè§‰ç¥žç§˜å¯èƒ½æ˜¯å› ä¸ºé‚£æ—¶å€™ä¸è®¤è¯†â€˜â€™ä½šâ€˜â€™è¿™ä¸ªå­—ã€‚ã€‚ã€‚ 1234å¼ºè°ƒ: åŒ¿åå‡½æ•°çš„å®šä¹‰å°±ç›¸å½“äºŽåªäº§ç”Ÿä¸€ä¸ªå˜é‡åœ¨å€¼,è€Œæ²¡æœ‰ç»‘å®šä»»ä½•åå­—, æ‰€ä»¥ä¼šåœ¨å®šä¹‰å®Œä¹‹åŽå°±è¢«å›žæ”¶,æ— æ³•é‡å¤ä½¿ç”¨,åªèƒ½åœ¨å®šä¹‰æ—¶ä½¿ç”¨ä¸€æ¬¡åº”ç”¨:å½“æŸä¸€ä¸ªåŠŸèƒ½ä»…ä½¿ç”¨ä¸€æ¬¡å°±æ²¡æœ‰å†é‡å¤ä½¿ç”¨çš„å¿…è¦äº†,å°±åº”è¯¥å®šä¹‰æˆåŒ¿åå‡½æ•° è¨€å½’æ­£ä¼ ï¼ŒåŒ¿åå’Œä½šåä¸€æ ·æ²¡æœ‰åå­—æˆ–è€…ä¸éœ€è¦çŸ¥é“åå­—ï¼Œå¯¹å°±æ˜¯è¿™ä¹ˆé…·ã€‚ å®šä¹‰ä¸€ä¸ªåŒ¿åå‡½æ•°ä½¿ç”¨lambdaå…³é”®è¯ï¼Œå’Œdefæ¯”è¾ƒçš„è¯ä¼šå‘çŽ°å…¶å®žå®šä¹‰é€»è¾‘å¾ˆåƒã€‚ 1lambda x: x**2 å®šä¹‰çš„åŒ¿åå‡½æ•°çš„æ„æ€æ˜¯å‚æ•°ä¸ºxï¼Œè¿”å›žxçš„å¹³æ–¹ï¼Œè¿”å›žï¼Ÿæ€Žä¹ˆæ²¡çœ‹åˆ°returnï¼Ÿå› ä¸ºlambdå¼•å·åŽé¢çš„å€¼é»˜è®¤è¿”å›žï¼Œæ‰€ä»¥æ²¡å¿…è¦åŠ returnäº†ï¼Œä½†æ˜¯æˆ‘ä¸€å®šè¦åŠ å‘¢ï¼Ÿå°±æ˜¯è¿™ä¹ˆä¸è®²é“ç†ã€‚é‚£ä¹ˆè§£é‡Šå™¨åªå¥½æŠ¥é”™äº†ï¼Œå› ä¸ºä½ ä¸è®¤åŒæˆ‘çš„è¯­æ³•ï¼Œé‚£æˆ‘ä¹Ÿæ²¡å¿…è¦æƒ¯ç€ä½ äº†ã€‚å°±æ˜¯è¿™ä¹ˆæ‹½ã€‚ åŒ¿åå‡½æ•°çš„ä½¿ç”¨åœºæ™¯é€šå¸¸ä¸ºä½¿ç”¨ä¸€æ¬¡å°±ç»“æŸäº†ï¼Œä¸ä¼šé¢‘ç¹çš„ä½¿ç”¨ã€‚è€Œä¸”åŒ¿åå‡½æ•°é€šå¸¸å’Œpythoné‡Œé¢è‡ªå¸¦çš„é«˜é˜¶å‡½æ•°ç»“åˆä½¿ç”¨ï¼Œåœ¨æŸäº›åº”ç”¨åœºæ™¯ä¸‹ä¼šè¾¾åˆ°äº‹å€åŠŸåŠçš„æ•ˆæžœå“¦ã€‚ é«˜é˜¶å‡½æ•°mapmapçš„æ„æ€æ˜¯åœ°å›¾çš„æ„æ€ï¼Œç”±æ­¤å¼•ç”³å‡ºæ˜ å°„è¡¨ç¤ºä¸€ä¸€å¯¹åº”ã€‚ ç¿»è¯‘è¿‡æ¥çš„æ„æ€æ˜¯ï¼šåˆ›å»ºä¸€ä¸ªè¿­ä»£å™¨ï¼Œä½¿ç”¨æ¯ä¸ªè¿­ä»£çš„å‚æ•°è®¡ç®—å‡½æ•°ã€‚ å½“æœ€çŸ­çš„å¯è¿­ä»£ç”¨å°½æ—¶åœæ­¢ã€‚ mapå‡½æ•°æœ‰ä¸¤ä¸ªå‚æ•°ï¼Œç¬¬ä¸€ä¸ªä¸ºæŸç§è§„åˆ™çš„å‡½æ•°ï¼Œç¬¬äºŒä¸ªä½å¤šä¸ªå¯è¿­ä»£å¯¹è±¡ã€‚ 12345def func(x): return x * 2lis = [1, 2, 3, 4, 5, 6]print(type(map(func, lis)))print(list(map(func, lis))) mapå‡½æ•°æŠŠå¯è¿­ä»£å¯¹è±¡ä¸­çš„å…ƒç´ è‡ªåŠ¨ä¼ ç»™funcï¼Œé€šè¿‡funcçš„åŠ å·¥ï¼Œå¾—åˆ°ä¸€ä¸ªç”Ÿæˆå™¨å¯¹è±¡ï¼Œé€šè¿‡listå‡½æ•°è½¬åŒ–ä¸ºä¸€ä¸ªåˆ—è¡¨ã€‚ å½“ç„¶ï¼Œmapå‡½æ•°å¯ä»¥æŽ¥æ”¶å¤šä¸ªå¯è¿­ä»£å¯¹è±¡ï¼Œæ¯”å¦‚ 123456def func(x, y): return x + ylis1 = [1,2,3,4,5,6]lis2 = [2,3,4,5,6,7,8,9,10,11]print(list(map(func, lis1,lis2)))# ç»“æžœä¸º[3, 5, 7, 9, 11, 13] mapå‡½æ•°ä¼šæŠŠåŽé¢è¿­ä»£å™¨å¯¹è±¡ä¸­çš„å…ƒç´ è¿­ä»£å‡ºæ¥ç»è¿‡funcåŠ å·¥ï¼Œå½“æœ€çŸ­çš„å¯è¿­ä»£ç”¨å°½æ˜¯åœæ­¢ï¼Œæ‰€ä»¥åªè¿›è¡Œåˆ°6+7å°±ç»“æŸäº†ã€‚ reducereduceæ˜¯å‡å°‘ã€åˆå¹¶çš„æ„æ€ï¼Œä¼šæŠŠå¯è¿­ä»£å¯¹è±¡ä¸­çš„å…ƒç´ ç»è¿‡å‡½æ•°çš„åŠ å·¥è¿›è€Œäº§ç”Ÿæ–°çš„ç»“æžœã€‚ ç¿»è¯‘è¿‡æ¥å°±æ˜¯ï¼šä»Žå·¦åˆ°å³ç´¯åŠ ä¸¤ä¸ªå‚æ•°çš„å‡½æ•°åˆ°åºåˆ—çš„é¡¹ç›®ï¼Œä»¥ä¾¿å°†åºåˆ—å‡å°‘ä¸ºå•ä¸ªå€¼ã€‚ä¾‹å¦‚ï¼Œreduceï¼ˆlambda xï¼Œyï¼šx + yï¼Œ[1,2,3] ï¼Œ4,5]è®¡ç®—ï¼ˆï¼ˆï¼ˆï¼ˆï¼ˆ1 + 2ï¼‰+3ï¼‰+4ï¼‰+5ï¼‰ã€‚å¦‚æžœå­˜åœ¨åˆå§‹å€¼ï¼Œåˆ™å°†å…¶æ”¾ç½®åœ¨è®¡ç®—ä¸­åºåˆ—çš„é¡¹ä¹‹å‰ï¼Œå¹¶åœ¨åºåˆ—ä¸ºç©ºæ—¶ç”¨ä½œé»˜è®¤å€¼ã€‚ reduceå‡½æ•°æœ‰ä¸‰ä¸ªå‚æ•°ï¼Œå‡½æ•°å’Œåºåˆ—éƒ½æ˜¯å¿…é¡»å‚æ•°ï¼Œåˆå§‹å€¼ä¸ºå¯é€‰å‚æ•°ã€‚ åº”ç”¨ï¼šæ¯”å¦‚æ±‚1-100çš„å’Œ 12345from functools import reducedef func(x, y): return x+yprint(reduce(func, [i for i in range(1,101)]))# ç»“æžœä¸º 5050 filterfilterçš„æ„æ€ä¸ºè¿‡æ»¤ï¼Œé€šè¿‡å‡½æ•°çš„è¿”å›žå€¼å¯¹åºåˆ—è¿›è¡Œè¿‡æ»¤ã€‚ ç¿»è¯‘è¿‡æ¥ï¼šè¿”å›žä¸€ä¸ªè¿­ä»£å™¨ï¼Œäº§ç”Ÿå‡½æ•°ï¼ˆitemï¼‰ä¸ºçœŸçš„è¿­ä»£é¡¹ã€‚ å¦‚æžœå‡½æ•°ä¸ºNoneï¼Œåˆ™è¿”å›žç»“æžœä¸ºçœŸçš„é¡¹ã€‚ 12345def func(x): return x.isdigit()lis = ['12', 'ad', '34', 'bc', '46']print(list(filter(func, lis)))# ç»“æžœä¸º ['12', '34', '46'] filterè¿‡æ»¤ç»“æžœä¸ºçœŸçš„å€¼æ”¾è¿›è¿­ä»£å™¨ä¸­ã€‚ é«˜é˜¶å‡½æ•°å’ŒåŒ¿åå‡½æ•°mapå’ŒåŒ¿åå‡½æ•°åœ¨ä¹‹å‰mapå‡½æ•°ä¸­çš„funcå‚æ•°éƒ½æ˜¯å®šä¹‰äº†ä¸€ä¸ªæœ‰åå‚æ•°ï¼Œç„¶åŽç”¨å‡½æ•°åä¼ å…¥mapå‡½æ•°çš„ï¼Œæœ‰äº†åŒ¿åå‡½æ•°å°±ä¸ç”¨è¿™ä¹ˆéº»çƒ¦äº†ã€‚ 123lis = [1, 2, 3, 4, 5, 6]print(list(map(lambda x: x*2, lis)))# ç»“æžœä¸º [2, 4, 6, 8, 10, 12] reduceå’ŒåŒ¿åå‡½æ•°12print(reduce(lambda x, y: x + y, [i for i in range(101)], 100))# è¾“å‡ºç»“æžœä¸º 5050 filterå’ŒåŒ¿åå‡½æ•°12345678sala = &#123; 'MAC': 30000, 'iPhone': 9000, 'lenovo': 10000, 'xiaomi': 3000&#125;print(list(filter(lambda x: sala[x] &gt; 5000, sala)))# è¾“å‡ºç»“æžœä¸º [â€˜iPhone', 'lenovo'] åŒ¿åå‡½æ•°çš„ä½¿ç”¨åœºæ™¯è¾ƒä¸ºå•ä¸€ï¼Œä¸€æ¬¡æ€§ä½¿ç”¨ï¼Œéšç”¨éšæ—¶å®šä¹‰ã€‚åœ¨æŸäº›åœºæ™¯ä¸‹å’Œé«˜é˜¶å‡½æ•°ç»“åˆä¼šæå‡æ•ˆçŽ‡ï¼ŒåŒæ—¶ä½¿ä»£ç æ›´åŠ ç®€æ´ã€‚ é€’å½’ä¸€ é€’å½’è°ƒç”¨çš„å®šä¹‰é€’å½’è°ƒç”¨æ—¶å‡½æ•°åµŒå¥—è°ƒç”¨çš„ä¸€ç§ç‰¹æ®Šå½¢å¼ï¼Œå‡½æ•°åœ¨è°ƒç”¨æ—¶ï¼Œç›´æŽ¥æˆ–é—´æŽ¥åœ°è°ƒç”¨äº†è‡ªèº«ï¼Œå°±æ˜¯é€’å½’è°ƒç”¨ã€‚ 1234567891011121314151617181920# ç›´æŽ¥è°ƒç”¨è‡ªèº«def f1(): print('from f1') f1()f1()# é—´æŽ¥è°ƒç”¨è‡ªèº«def f1(): print('from f1') f2()def f2(): print('from f1') f1()f2()# è°ƒç”¨å‡½æ•°ä¼šäº§ç”Ÿå±€éƒ¨çš„åç§°ç©ºé—´ï¼Œå ç”¨å†…å­˜ï¼Œå› ä¸ºä¸Šè¿°è¿™ç§è°ƒç”¨ä¼šæ— é™è°ƒç”¨è‡ªèº«ï¼Œpythonè§£é‡Šå™¨çš„å†…å­˜ç®¡ç†æœºåˆ¶ä¸ºäº†é˜²æ­¢æ— é™å ç”¨å†…å­˜ï¼Œå¯¹å‡½æ•°çš„é€’å½’è°ƒç”¨åšäº†å±‚çº§é™åˆ¶ï¼Œå¯ä»¥é€šè¿‡ä»£ç ä¿®æ”¹æœ€å¤§å±‚çº§é™åˆ¶ã€‚import syssys.setrecursionlimit(100000) äºŒ é€’å½’è°ƒç”¨çš„ä¸¤ä¸ªé˜¶æ®µé€’å½’è°ƒç”¨åŒ…å«ä¸¤ä¸ªæ˜Žç¡®çš„é˜¶æ®µï¼šå›žæº¯ï¼Œé€’æŽ¨ å›žæº¯å°±æ˜¯ä»Žå¤–å‘é‡Œä¸€å±‚ä¸€å±‚é€’å½’è°ƒç”¨ä¸‹åŽ»ï¼Œå›žæº¯é˜¶æ®µå¿…é¡»è¦æœ‰ä¸€ä¸ªæ˜Žç¡®çš„ç»“æŸæ¡ä»¶ï¼ˆä¸ç„¶ä¼šæˆä¸ºæ­»å¾ªçŽ¯ï¼‰ï¼Œæ¯è¿›å…¥ä¸‹ä¸€æ¬¡é€’å½’æ—¶ï¼Œé—®é¢˜çš„è§„æ¨¡éƒ½åº”è¯¥æœ‰æ‰€å‡å°‘ã€‚ é€’æŽ¨å°±æ˜¯ä»Žé‡Œå‘å¤–ä¸€å±‚å±‚ç»“æŸé€’å½’ã€‚ é€’å½’æ•ˆçŽ‡ä¸é«˜ï¼Œé€’å½’å±‚æ¬¡è¿‡å¤šä¼šå¯¼è‡´æ ˆæº¢å‡ºï¼ˆåœ¨è®¡ç®—æœºä¸­ï¼Œå‡½æ•°è°ƒç”¨æ˜¯é€šè¿‡æ ˆå®žçŽ°çš„ï¼Œæ¯å½“è¿›å…¥ä¸€ä¸ªå‡½æ•°è°ƒç”¨ï¼Œåœ¨æ ˆä¸‹é¢ä¼šåŠ ä¸€å±‚æ ˆå¸§ï¼Œæ¯å½“å‡½æ•°è¿”å›žï¼Œæ ˆå°±ä¼šå‡ä¸€å±‚æ ˆå¸§ã€‚ç”±äºŽæ ˆçš„å¤§å°ä¸æ˜¯æ— é™çš„ï¼Œæ‰€ä»¥é€’å½’è°ƒç”¨æ¬¡æ•°è¿‡å¤šï¼Œä¼šå¯¼è‡´æ ˆæº¢å‡ºï¼‰ ä¸‰ äºŒåˆ†æ³•ä»Žä¸€ä¸ªæŽ’åºçš„æ•°å­—åˆ—è¡¨ä¸­æ‰¾åˆ°æŒ‡å®šçš„æ•°å­—ï¼Œä½¿ç”¨éåŽ†çš„æ•ˆçŽ‡å¤ªä½Žï¼Œä½¿ç”¨äºŒåˆ†æ³•å¯ä»¥æžå¤§åœ°ç¼©å°é—®é¢˜è§„æ¨¡ã€‚ å®žçŽ°inçš„æ•ˆæžœ 123456789101112131415nums = [1,5,12,23,34,46,59,99,443]def fucn(num, nums): if len(nums) == 0: return mid_index = len(nums) // 2 if num &gt; nums[mid_index]: nums = nums[mid_index+1:] fucn(num, nums) elif num &lt; nums[mid_index]: nums = nums[:mid_index] fucn(num,nums) else: print('not exis') å®žçŽ°indexçš„æ•ˆæžœ 1234567891011121314151617181920212223nums = [1, 13, 15, 23, 27, 31, 33, 57, 73, 81, 93, 94, 97, 101] # ä»Žå°åˆ°å¤§æŽ’åˆ—çš„æ•°å­—åˆ—è¡¨def binary_search(find_num,nums): print(nums) if len(nums) == 0: print('not exists') return # åŠŸèƒ½ mid_index = len(nums) // 2 if find_num &gt; nums[mid_index]: # in the right nums=nums[mid_index+1:] # é‡æ–°è¿è¡ŒåŠŸèƒ½,ä¼ å…¥æ–°åˆ—è¡¨ binary_search(find_num,nums) elif find_num &lt; nums[mid_index]: # in the left nums=nums[:mid_index] # é‡æ–°è¿è¡ŒåŠŸèƒ½,ä¼ å…¥æ–°åˆ—è¡¨ binary_search(find_num,nums) else: print('find it') binary_search(95,nums)]]></content>
      <categories>
        <category>Python</category>
      </categories>
  </entry>
  <entry>
    <title><![CDATA[å­—ç¬¦ç¼–ç ]]></title>
    <url>%2F2018%2F10%2F08%2F%E5%AD%97%E7%AC%A6%E7%BC%96%E7%A0%81%2F</url>
    <content type="text"><![CDATA[æœ¬æ¥éƒ½ä»¥ä¸ºè‡ªå·±å®Œå…¨å¼„æ‡‚å­—ç¬¦ç¼–ç äº†ï¼Œæ˜¨å¤©ä¸€ä¸ªå°é—®é¢˜ç»™éš¾å€’äº†ï¼Œæ€è€ƒäº†å¾ˆä¹…æ‰å¾—å‡ºç­”æ¡ˆï¼Œæƒ­æ„§ å­—ç¬¦ç¼–ç çš„ç®€ä»‹å­—ç¬¦ç¼–ç å¯ä»¥è¯´æ¯ä¸€ç§ç¼–ç¨‹è¯­è¨€éƒ½ä¼šé‡åˆ°çš„é—®é¢˜ï¼Œä¸ºä»€ä¹ˆä¼šæœ‰è¿™ä¹ˆå¤šçš„é—®é¢˜å‘¢ï¼Œå°±æ˜¯å› ä¸ºè®¡ç®—æœºå‘å±•é€Ÿåº¦å¤ªå¿«äº†ï¼Œä¸ä»…è®¡ç®—æœºçš„è¯žç”Ÿå›½è¦ä½¿ç”¨ï¼Œç¬¬ä¸‰ä¸–ç•Œå›½å®¶ä¹Ÿè¦ä½¿ç”¨ï¼Œæ‰€ä»¥äººå’Œè®¡ç®—æœºçš„äº¤æµæ–¹å¼å°±å˜å¾—å¤æ‚èµ·æ¥ã€‚åƒè‹±è¯­å›½å®¶æœ€ç®€å•ï¼Œç›´æŽ¥ç”¨ä¸€ä¸ªå­—èŠ‚ä¹Ÿå°±æ˜¯7bitï¼Œæ€»å…±128ç§çŠ¶æ€å°±å¯ä»¥æ»¡è¶³äº¤æµéœ€æ±‚ï¼›ä½†æ˜¯åƒä¸­å›½ç­‰ä¸ä»¥è‹±è¯­ä¸ºç¬¬ä¸€æ¯è¯­çš„å›½å®¶å°±ä¼šå‡ºå¾ˆå¤šé—®é¢˜äº†ï¼Œä½†ä¸­æ–‡å°±æœ‰60000+ä¸ªï¼Œé‚£ä¹ˆå¾ˆæ˜¾ç„¶ï¼Œ7bitæ»¡è¶³ä¸äº†éœ€æ±‚ï¼Œæ‰€ä»¥ä¸ºäº†æ»¡è¶³éœ€æ±‚ï¼Œä¸­å›½å‡ºäº†gb2312ç¼–ç ï¼Œä¸è¿‡gb2312ä¹Ÿä¸èƒ½æ»¡è¶³éœ€æ±‚ï¼Œæ‰€ä»¥åˆå‡ºæ¥äº†gbkç¼–ç ï¼Œå¯ä»¥è¡¨ç¤º60000+æ±‰å­ã€‚ è™½ç„¶å¯ä»¥é€šè¿‡è‡ªå·±å›½å®¶åŽ»è§„å®šæœ¬å›½çš„å­—ç¬¦ç¼–ç æ–¹å¼ï¼Œå¯æ˜¯è¿™ä¹ˆå¤šå›½å®¶ï¼Œæ¯ä¸ªå›½å®¶éƒ½æœ‰è‡ªå·±çš„ç¼–ç æ–¹å¼ï¼Œé‚£ä¹ˆè·¨è¿‡äº¤æµä¼šå˜å¾—å›°éš¾èµ·æ¥ã€‚ä¸ºäº†è§£å†³è¿™ç§é—®é¢˜ï¼Œåœ¨1990å¹´å¼€å§‹èµ·è‰unicodeç ï¼Œç®€ç§°ä¸‡å›½ç ã€‚é‡Œé¢æ˜¯ä¸€å¼ è¶…çº§å¤§çš„å¯¹ç…§è¡¨ï¼ŒåŒ…å«äº†æ‰€æœ‰çš„ç¼–ç é›†ï¼Œæ¯”å¦‚ï¼šutf-8ã€shiftjisã€gbkã€iso-8859-1ã€‚æ—¢ç„¶åŒ…å«è¿™ä¹ˆå¤šçš„å¯¹ç…§è¡¨ï¼Œé‚£ä¹ˆæ¯ä¸ªå›½å®¶éƒ½ç»§ç»­ç”¨è‡ªå·±çš„ç¼–ç æ“ä½œæ–‡ä»¶ï¼Œä½†æ˜¯åœ¨å†…å­˜ä¸­éƒ½ç”¨unicodeç ï¼Œå­˜çš„æ—¶å€™åˆæ ¹æ®unicodeå¯¹ç…§æ˜ å°„æˆè‡ªå·±å›½å®¶çš„ç¼–ç æ–¹å¼å­˜å‚¨ä¸å°±å¯ä»¥è§£å†³è·¨å›½äº¤æµçš„é—®é¢˜äº†å˜›ã€‚ æ–‡æœ¬ç¼–è¾‘å™¨æ‰“å¼€æ–‡ä»¶æ–‡æœ¬ç¼–è¾‘å™¨æ‰“å¼€æ–‡ä»¶é€šå¸¸åˆ†ä¸ºä¸‰æ­¥ï¼š é¦–å…ˆå¯åŠ¨æ–‡æœ¬ç¼–è¾‘å™¨ æ–‡æœ¬ç¼–è¾‘å™¨å°†å­˜å‚¨åœ¨ç¡¬ç›˜ä¸­çš„æ–‡ä»¶è¯»å…¥å†…å­˜ æ–‡æœ¬ç¼–è¾‘å™¨è¯†åˆ«å†…å­˜ä¸­æ–‡ä»¶çš„ç¼–ç æ–¹å¼è¿›è€Œè§£ç  ç¬¬ä¸€æ­¥ä¸ç”¨å¤šè§£é‡Šäº†ï¼Œé‡è¦åœ¨ç¬¬äºŒæ­¥å’Œç¬¬ä¸‰æ­¥ã€‚ ç¡¬ç›˜ä¸­çš„æ–‡ä»¶ä¼šæœ‰ä¸€ç§ç¼–ç æ–¹å¼ï¼Œå¦‚ä¸‹å›¾ å¯ä»¥çœ‹å‡ºæ¥æœ‰ASCIIå’ŒUTF-8ä¸¤ç§ç¼–ç æ–¹å¼ï¼Œæ‰€ä»¥å½“æ–‡æœ¬ç¼–è¾‘å™¨å°†å®ƒä»¬è¯»å…¥å†…å­˜ä¸­æ—¶ï¼Œéœ€è¦æŒ‰ç…§ASCIIå’ŒUTF-8åˆ†åˆ«è§£ç æˆunicodeç ï¼ˆå†…å­˜ä¸­é»˜è®¤ç¼–ç éƒ½ä¸ºunicodeï¼‰ï¼Œç¬¬ä¸‰æ­¥éœ€è¦åœ¨æ˜¾ç¤ºå±ä¸Šæ˜¾ç¤ºå‡ºæ¥ï¼Œé‚£ä¹ˆéœ€è¦å°†å†…å­˜ä¸­çš„unicodeç è§£ç å‡ºæ¥ï¼Œé‚£ä¹ˆè¿™æ—¶å€™æŒ‰ç…§ä»€ä¹ˆè§£ç æ–¹å¼å‘¢ï¼Ÿå¦‚æžœæˆ‘ä»¬æ²¡æŒ‡å®šçš„è¯æŒ‰ç…§å½“å‰çŽ¯å¢ƒçš„ç¼–ç æ–¹å¼ï¼Œæ¯”å¦‚windowsç³»ç»Ÿé»˜è®¤ç¼–ç æ–¹å¼ä¸ºgbkï¼Œç±»linuxç³»ç»Ÿé»˜è®¤ç¼–ç æ–¹å¼ä¸ºutf-8ã€‚æ‰€ä»¥è¿™å°±ä¼šå‡ºçŽ°é—®é¢˜äº†ï¼Œå‡å¦‚åœ¨windowsç³»ç»Ÿä¸­è¯»å–utf-8ç¼–ç æ–¹å¼çš„æ–‡ä»¶æ—¶ åœ¨windowsä¸‹ä½¿ç”¨python2è¿›è¡Œè¯•éªŒï¼Œå®šä¹‰äº†ä¸€ä¸ªå˜é‡ï¼Œå¹¶ä¸”æ˜¯unicodeç¼–ç çš„ï¼Œå½“æˆ‘åˆ†åˆ«æ˜¯ç”¨utf-8å’Œgbkå¯¹unicodeç¼–ç æ—¶ï¼Œç„¶åŽæ‰“å°å‘çŽ°utf-8ç ä¹±ç äº†ï¼Œè¿™å°±è¯´æ˜Žåœ¨æ‰“å°çš„æ—¶å€™ä¼šæ ¹æ®å½“å‰çŽ¯å¢ƒçš„ç¼–ç æ–¹å¼è¿›è¡Œè§£ç ï¼Œè¿™å’Œwindowsé»˜è®¤ç¼–ç ä¸ºgbkæ˜¯ç›¸ç¬¦çš„ã€‚ pythonä¸­çš„ç¼–ç åœ¨pythonä¸­æœ‰ä¸¤ç§ç¼–ç ï¼šåˆ†åˆ«ä¸ºæ–‡ä»¶ç¼–ç ä»¥åŠè¿è¡Œä»£ç æ—¶å®šä¹‰å­—ç¬¦ä¸²çš„ç¼–ç  ç¬¬ä¸€ç§åœ¨å‰é¢è§£é‡Šäº†ï¼Œæ€»çš„æ¥è¯´ä¸€ä¸ªæ–‡æœ¬ç¼–è¾‘å™¨ä»Žç¡¬ç›˜ä¸­è¯»å…¥æ–‡ä»¶æ—¶ï¼Œç¬¬ä¸€æ­¥æŒ‰ç…§æ–‡ä»¶å­˜å‚¨çš„ç¼–ç è§£ç ä¸ºunicodeç å­˜å…¥å†…å­˜ï¼Œç„¶åŽæ ¹æ®æ–‡ä»¶å¤´å£°æ˜Žçš„ç¼–ç è§£ç ï¼ˆå¦‚æžœæœ‰æ–‡ä»¶å¤´å£°æ˜Žç¼–ç æ–¹å¼çš„è¯ï¼‰ï¼Œå¦åˆ™å°±æŒ‰ç…§çŽ¯å¢ƒé»˜è®¤ç¼–ç è¿›è¡Œè§£ç ã€‚ è€Œpython2å’Œpython3æœ‰å¾ˆå¤§çš„ä¸åŒï¼Œpython2é»˜è®¤ç¼–ç ä¸ºasciiï¼Œpython3é»˜è®¤ç¼–ç ä¸ºutf-8ï¼Œå³python2ç¼–å†™çš„æ–‡ä»¶é»˜è®¤ä¸ºASCIIç¼–ç ï¼Œpython3ç¼–å†™çš„æ–‡ä»¶é»˜è®¤ä¸ºutf-8ç¼–ç ï¼Œä½†æ˜¯è¯»å…¥å†…å­˜ä¸­éƒ½éœ€è¦è§£ç ä¸ºunicodeã€‚ ç¬¬äºŒç§çš„è¯ï¼Œåœ¨ä¸Šå¹…å›¾ä¸­ä¸ºäº†æ¼”ç¤ºï¼ŒæŠŠå­—ç¬¦ä¸²å®šä¹‰ä¸ºunicodeç ï¼Œé‚£ä¹ˆå­—ç¬¦ä¸²å‰é¢ä¸åŠ â€™uâ€™å‘¢ï¼Ÿ æŒ‰ç…§æˆ‘ä»¬ä¹‹å‰çš„è®¤è¯†ï¼ŒASCIIè¯†åˆ«ä¸äº†ä¸­æ–‡ï¼Œæ‰€ä»¥åœ¨print(a)æ—¶åº”è¯¥ä¼šæŠ¥é”™æ‰å¯¹å•Šï¼Œä¸ºä»€ä¹ˆä¸æŠ¥é”™å‘¢ï¼Ÿè¿™ä¸ªåº”è¯¥æ˜¯python2åšçš„æ”¹å˜ï¼Œå½“è¯†åˆ«ä¸äº†ä¸­æ–‡æ—¶ï¼Œä½¿ç”¨å½“å‰ç³»ç»Ÿé»˜è®¤ç¼–ç è¿›è¡Œç¼–ç å’Œè§£ç ï¼Œæ¥è¯æ˜Žä¸€ä¸‹ï¼Œæˆ‘ä½¿ç”¨linuxåšä¸ªè¯•éªŒå°±çŸ¥é“äº†ã€‚ çœŸç›¸å¤§ç™½äº†ï¼Œpython2è¿™ä¸ªæ”¹è¿›ä¸å¾—ä¸è¯´æŒºæœºæ™ºçš„ï¼Œå› ä¸ºåŽ†å²é—ç•™é—®é¢˜æ‰å¯¼è‡´python2çš„ç¼–ç é—®é¢˜ç»è¿‡è¿™æ ·ç®—æ˜¯ä¸€ç§æ¯”è¾ƒå®Œç¾Žçš„è§£å†³æ–¹å¼ã€‚è€Œå®Œç¾Žçš„python3ä¼šæœ‰è¿™ç§é—®é¢˜å—ï¼Ÿæ€Žä¹ˆå¯èƒ½ã€‚python3æ˜¯å®Œç¾Žçš„ã€‚]]></content>
      <categories>
        <category>Computer Basics</category>
      </categories>
  </entry>
  <entry>
    <title><![CDATA[sshå…é’¥ç™»é™†github]]></title>
    <url>%2F2018%2F10%2F01%2Fgit-ssh%E9%85%8D%E7%BD%AE%E5%92%8C%E4%BD%BF%E7%94%A8%2F</url>
    <content type="text"><![CDATA[è®¾ç½®Gitçš„user nameå’Œemaiï¼šï¼ˆå¦‚æžœæ˜¯ç¬¬ä¸€æ¬¡çš„è¯ï¼‰$ git config --global user.name &#39;musibii&#39;$ git config --global user.email &#39;shaozuanzuan@gmail.com&#39; ç”Ÿæˆç§˜é’¥$ ssh-keygen -t rsa -C &#39;shaozuanzuan@gmail.com&#39;ä»Žå›¾ä¸Šå¯ä»¥çœ‹åˆ°ç”Ÿæˆç§˜é’¥ä¿å­˜çš„åœ°å€ï¼Œé€šå¸¸éƒ½ä¼šé»˜è®¤ä¿å­˜åœ¨å®¶ç›®å½•ä¸‹é¢çš„.sshä¸‹ï¼Œå‰é¢åŠ ç‚¹è¡¨ç¤ºæ˜¯ä¸ªéšè—ç›®å½•ã€‚ æ·»åŠ ç§˜é’¥åˆ°ssh-agentssh-agentæ˜¯ä¸€ä¸ªå¸®åŠ©ç¨‹åºï¼Œç”¨äºŽè·Ÿè¸ªç”¨æˆ·çš„èº«ä»½å¯†é’¥åŠå…¶å¯†ç ã€‚ ç„¶åŽï¼Œä»£ç†å¯ä»¥ä½¿ç”¨å¯†é’¥ç™»å½•å…¶ä»–æœåŠ¡å™¨ï¼Œè€Œæ— éœ€ç”¨æˆ·å†æ¬¡é”®å…¥å¯†ç æˆ–å¯†ç .è¿è¡Œssh-agentä¹‹åŽï¼Œä½¿ç”¨ssh-agentå°†ç§é’¥äº¤ç»™ssh-agentä¿ç®¡ï¼Œå…¶ä»–ç¨‹åºéœ€è¦èº«ä»½éªŒè¯çš„æ—¶å€™å°±å¯ä»¥å°†éªŒè¯ç”³è¯·äº¤ç»™ssh-agentæ¥å®Œæˆæ•´ä¸ªè®¤è¯è¿‡ç¨‹ã€‚æ·»åŠ ç”Ÿæˆçš„ssh keyåˆ°ssh-agent$ ssh-add ~/.ssh/id_rsa ç™»å½•githubï¼Œæ·»åŠ sshç§˜é’¥å¯ä»¥çœ‹åˆ°æˆ‘æœ‰ä¸¤ä¸ªå¯†é’¥ï¼Œä¸€ä¸ªæ˜¯macOSçš„ï¼Œä¸€ä¸ªæ˜¯Ubuntuçš„ã€‚ æµ‹è¯•æ˜¯å¦æˆåŠŸ$ ssh -T git@github.comä¸‡ä¸‡æ²¡æƒ³åˆ°ï¼ŒæŠ¥é”™äº†ã€‚ã€‚ã€‚æŠ¥é”™åŽŸå› å±…ç„¶æ˜¯æ²¡è”ç½‘ã€‚ã€‚ã€‚é åŒ—ï¼ï¼ï¼é‡æ–°è”ç½‘æˆåŠŸäº†ã€‚ã€‚]]></content>
      <categories>
        <category>GitHub</category>
      </categories>
  </entry>
  <entry>
    <title><![CDATA[macä¸‹é…ç½®githubä¸ªäººåšå®¢]]></title>
    <url>%2F2018%2F09%2F29%2FMac%E4%BD%BF%E7%94%A8Hexo%E9%85%8D%E7%BD%AEGItHub%E5%8D%9A%E5%AE%A2%2F</url>
    <content type="text"><![CDATA[ä¸€ å‰è¨€æœ¬æ¥ä¸€ç›´ç”¨åšå®¢å›­å†™åšå®¢çš„ï¼Œå¥ˆä½•åšå®¢å›­ç•Œé¢æƒ¨ä¸å¿ç¹ï¼Œè€Œä¸”è‡ªå¸¦çš„markdownç¼–è¾‘å™¨æ›´æ˜¯çƒ‚çš„å¯ä»¥ï¼ŒäºŽæ˜¯åœ¨å®¤å‹makeupstoriesçš„å»ºè®®ä¸‹å¼€å§‹å°è¯•æ­å»ºè‡ªå·±çš„githubåšå®¢ï¼ŒçœŸæ˜¯ä¸€è·¯å¿ƒé…¸å•Šï¼ä¸è¿‡æˆå°±æ„Ÿä¹Ÿæ˜¯å¤§å¤§æ»´ã€‚ äºŒ å‡†å¤‡å·¥ä½œåˆ›å»ºGithubåŸŸåå’Œæ”¾åšå®¢çš„åº“ é¦–å…ˆéœ€è¦æ³¨å†Œä¸€ä¸ªGithubè´¦å·ã€‚ æ³¨å†Œä¹‹åŽéœ€è¦æ–°å»ºä¸€ä¸ªåº“(repository)æ¥å­˜å‚¨ç½‘ç«™ï¼Œç‚¹å‡»é¦–é¡µä»»æ„ä½ç½®å‡ºçŽ°çš„New repositoryæŒ‰é’®åˆ›å»ºä»“åº“ï¼Œæ³¨æ„è¿™ä¸ªä»“åº“åä¸èƒ½éšä¾¿å†™ã€‚ä¾‹å¦‚æˆ‘çš„Githubè´¦å·ä¸ºmusibiiï¼Œé‚£ä¹ˆåº“åä¸ºmusibii.github.ioã€‚ å®‰è£…Gitã€Nodejså’ŒHexoHexoå¯ä»¥è¯´æ˜¯æœ€æµè¡Œçš„åšå®¢æ¡†æž¶äº†ï¼ŒåŸºäºŽNodejsï¼Œæƒ³è¦æ­å»ºå¥½ï¼Œéœ€è¦å®‰è£…Gitã€Nodejså’ŒHexoã€‚ å®‰è£…Gitå¯ä»¥ç›´æŽ¥åœ¨å‘½ä»¤è¡Œä½¿ç”¨brewæ¥å®‰è£…Git$ brew install git å› ä¸ºæˆ‘ä¹‹å‰å·²ç»å®‰è£…äº†Gitï¼Œæ‰€ä»¥è¿™æ¬¡ç»™æˆ‘å®‰è£…äº†ä¸¤ä¸ªæ‰©å±•åŒ…ã€‚ å®‰è£…Nodejsä¸ºäº†ä¾¿äºŽç®¡ç†Nodejsç‰ˆæœ¬ï¼Œé¦–å…ˆå®‰è£…nvmï¼Œè¿™æ˜¯Nodejsç‰ˆæœ¬ç®¡ç†å™¨ï¼Œå¯ä»¥å®žçŽ°Nodejså¤šç‰ˆæœ¬åˆ‡æ¢ã€‚$ curl -o- [https://raw.githubusercontent.com/creationix/nvm/v0.33.11/install.sh](https://raw.githubusercontent.com/creationix/nvm/v0.33.11/install.sh) | bashå®‰è£…å®ŒæˆåŽï¼Œé‡å¯ç»ˆç«¯å¹¶æ‰§è¡Œä¸‹åˆ—å‘½ä»¤å³å¯å®‰è£…Node.js$ nvm install \dåŽé¢è·Ÿçš„æ˜¯Node.jsçš„ç‰ˆæœ¬ï¼Œä»Šå¤©å°±æ˜¯è¢«è¿™ä¸ªç»™å‘äº†ï¼Œåº”è¯¥å®‰è£…è¾ƒæ–°çš„ç‰ˆæœ¬ï¼Œä¹‹å‰å®‰è£…çš„ä¸º 4ï¼Œç„¶åŽä¸€ç›´æŠ¥é”™ã€‚$ nvm install 8å®‰è£…åŽåœ¨ç»ˆç«¯è¾“å…¥$ nvm use nodeå°±ä¼šä½¿ç”¨æœ€æ–°çš„nodejsç‰ˆæœ¬äº†ã€‚ å®‰è£…Hexo$ sudo npm install hexo-cli -gæ³¨æ„éœ€è¦sudoæƒé™ï¼Œä¸ç„¶ä¼šå‡ºé”™ é…ç½®åšå®¢æŽ¥ä¸‹æ¥éœ€è¦ä½¿ç”¨Hexoæ¥åˆå§‹åŒ–ä¸€ä¸ªåšå®¢ï¼Œç„¶åŽæ ¹æ®è‡ªå·±çš„éœ€æ±‚æ›´æ”¹ä¸€äº›è‡ªå®šä¹‰é…ç½®ï¼Œæ¯”å¦‚å­—ä½“ã€åŠ¨ç”»æ•ˆæžœã€ä¸»é¢˜ç­‰ç­‰ã€‚ åˆ›å»ºåšå®¢ä¸ºè‡ªå·±çš„åšå®¢åˆ›å»ºä¸€ä¸ªæ–‡ä»¶å¤¹ï¼Œç„¶åŽcd æ–‡ä»¶å¤¹ï¼Œå¹¶æ‰§è¡Œä¸‹é¢çš„ä»£ç ã€‚$ hexo init username.github.io æ›´æ”¹ä¸»é¢˜ åŸºç¡€é…ç½®ç„¶åŽéœ€è¦çš„å°±æ˜¯åœ¨_config.ymlé‡Œé¢ä¿®æ”¹ä¸ªäººä¿¡æ¯ï¼Œæ¯”å¦‚åšå®¢çš„ä¸»é¢˜ã€ä½œè€…è¿˜æœ‰è¯­è¨€ä»¥åŠä¿®æ”¹çš„ä¸»é¢˜åï¼Œæœ€é‡è¦çš„æ˜¯è¦å’Œä½ çš„githubä»“åº“å…³è”èµ·æ¥ã€‚å…¶ä»–çš„å¯ä»¥æ ¹æ®è‡ªå·±çš„éœ€æ±‚é…Œæƒ…æ›´æ”¹ï¼Œæ¯”å¦‚æˆ‘å°±å¢žåŠ äº†é¡µé¢çš„åŠ¨ç”»æ•ˆæžœNextä¸»é¢˜åŠ¨ç”»æ•ˆæžœ ä½ çš„ç¬¬ä¸€ç¯‡åšå®¢ $ hexo new &#39;ä½ çš„åšå®¢åå­—&#39;æ‰§è¡Œå®ŒåŽä¼šåœ¨â€˜username.github.io/source/_posts/â€˜ç›®å½•ä¸‹å‡ºçŽ°ä½ çš„åšå®¢åå­— åšå®¢ä½¿ç”¨markdownæ ¼å¼ï¼Œç¼–å†™å®ŒåŽæ‰§è¡Œ$ hexo serverå¦‚æžœå‡ºçŽ°ä¸‹é¢çš„é¡µé¢ åœ¨æµè§ˆå™¨é¡µé¢è¾“å…¥http://localhost:4000æˆ‘çš„ç•Œé¢ä¼šå’Œä½ ä»¬çš„ä¸ä¸€æ ·ï¼Œå‡ºçŽ°äº† Helloå°±è¯´æ˜ŽæˆåŠŸäº†ã€‚ å®‰è£…hexo-deployer-git â€“saveè‡ªåŠ¨éƒ¨ç½²å‘å¸ƒå·¥å…·$ npm install hexo-deployer-git --save å‘å¸ƒåšå®¢$ hexo deployç»“æŸåŽè¿›å…¥åšå®¢å°±å¯ä»¥çœ‹è§äº†ï¼]]></content>
      <categories>
        <category>Python</category>
      </categories>
  </entry>
  <entry>
    <title><![CDATA[Hello World]]></title>
    <url>%2F2018%2F09%2F29%2Fhello-world%2F</url>
    <content type="text"><![CDATA[Welcome to Hexo! This is your very first post. Check documentation for more info. If you get any problems when using Hexo, you can find the answer in troubleshooting or you can ask me on GitHub.Hello,my name is musibii! Quick StartCreate a new post1$ hexo new "My New Post" More info: Writing Run server1$ hexo server More info: Server Generate static files1$ hexo generate More info: Generating Deploy to remote sites1$ hexo deploy More info: Deployment]]></content>
  </entry>
</search>
