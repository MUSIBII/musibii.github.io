<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title><![CDATA[å¹¶å‘ç¼–ç¨‹(ä¸‰)]]></title>
    <url>%2F2018%2F11%2F16%2F%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B-%E4%B8%89%2F</url>
    <content type="text"><![CDATA[å‰è¨€ç»è¿‡å‰ä¸€ç¯‡åšå®¢çš„å­¦ä¹ äº†è§£äº† Unix å’Œ Windows ç³»ç»Ÿåˆ›å»ºè¿›ç¨‹çš„æ–¹å¼äº†,å¯¹äº Unixç³»ç»Ÿæ¥è¯´,ä¼šæŠŠçˆ¶è¿›ç¨‹çš„æ•°æ®ç›´æ¥æ‹·è´ä¸€ä»½åˆ°å­è¿›ç¨‹çš„å†…å­˜ç©ºé—´;è€Œ Windows ç³»ç»Ÿä¼šé‡æ–°åŠ è½½ä¸€éçˆ¶è¿›ç¨‹çš„ä»£ç . é‚£ä¹ˆåœ¨ python ä¸­æ€ä¹ˆåˆ›å»ºè¿›ç¨‹å‘¢?å…¶å®ä¹Ÿæ˜¯è°ƒç”¨äº†æ“ä½œç³»ç»Ÿæä¾›çš„æ¥å£,åƒ Unix æ˜¯ fork æ¥å£, Windows æ˜¯ CreateProcess æ¥å£. python è¿›ç¨‹Process æºç æ¢æé¦–å…ˆä¸ç®¡æ€ä¹ˆåˆ›å»ºè¿›ç¨‹éƒ½æ˜¯è°ƒç”¨äº†ä¸€ä¸ªmultiprocessingæ¨¡å—é‡Œé¢çš„ Process ç±»,å­¦ä¹ ä¸€ä¸ªæ¨¡å—ç¬¬ä¸€ä»¶äº‹å°±æ˜¯æŸ¥çœ‹æºç .(ps: å¯¹æˆ‘æ¥è¯´çœ‹æºç å¾ˆçˆ½ğŸ˜‹)å› ä¸º python3çœ‹ä¸åˆ°æºç ,æ‰€ä»¥ç”¨ python2å¯ä»¥çœ‹åˆ°: ç¿»è¯‘ Process ç±»çš„æ³¨é‡Š:è¿›ç¨‹å¯¹è±¡è¡¨ç¤ºåœ¨éš”å¼€çš„è¿›ç¨‹ä¸­è¿è¡Œçš„æ´»åŠ¨,è¿™ä¸ªç±»å’Œ threading.Thread åŒä¹‰.(å› ä¸ºæœ€å¼€å§‹çš„è®¡ç®—æœºéƒ½æ˜¯å•æ ¸,å¤šè¿›ç¨‹æ˜¯åé¢æ‰å‡ºæ¥çš„) é‚£ä¹ˆå¾ˆæ˜¾ç„¶,å› ä¸º Process æ˜¯ä¸ªç±»,é‚£ä¹ˆæƒ³è¦åˆ›å»ºä¸€ä¸ªè¿›ç¨‹å°±æ˜¯å®ä¾‹åŒ–ä¸€ä¸ª Process ç±»çš„å¯¹è±¡.æŸ¥çœ‹ initæ–¹æ³•: å“‡,å‚æ•°å¥½å¤šå•Š,ä¸è¿‡å¤§éƒ¨åˆ†éƒ½å¯ä»¥ä½¿ç”¨é»˜è®¤å€¼,ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯ group, çœ‹åé¢æœ‰ä¸€å¥æ³¨é‡Š: group å‚æ•°å½“å‰å¿…é¡»ä¸º None, å¥½äº†å¯ä»¥ä¸ç”¨ç†ä¼šäº†;ç¬¬äºŒä¸ªå‚æ•°å¾ˆé‡è¦,è¡¨ç¤ºåˆ›å»ºçš„è¿›ç¨‹å°†è¦è¿›è¡Œçš„ä»»åŠ¡,å¿…é¡»è¦ä¼ å‚æ•°(å‡½æ•°å);ç¬¬ä¸‰ä¸ªæ˜¯åå­—,å¯ä»¥è‡ªå®šä¹‰è¿›ç¨‹å;ç¬¬å››ä¸ªæ˜¯å¯å˜é•¿å‚æ•°,å‚æ•°ä¼šåœ¨åˆ›å»ºè¿›ç¨‹çš„æ—¶å€™ä¼ è¿› target ä¸­;ç¬¬äº”ä¸ªä¸ºå…³é”®è¯å‚æ•°,ä¹Ÿæ˜¯ç»™ target ä¼ çš„. 1assert group is None æ–­è¨€,åªæœ‰è¯¥è¡¨è¾¾å¼å€¼ä¸º True æ‰ä¼šè¿è¡Œä¸‹é¢çš„ä»£ç .å¾ˆæ˜¾ç„¶ä¸ç”¨ç®¡å°±è¡Œ. ç„¶åä¸‹é¢çš„éƒ½æ˜¯ä¸€äº›ç±»å±æ€§,éœ€è¦å…³æ³¨çš„æ˜¯ self._target,sekf._popen. æŸ¥çœ‹ process æ¨¡å—çš„æ³¨é‡Š: ç¿»è¯‘å¯çŸ¥: æ¨¡å—æä¾› Process ç±»æ˜¯æ¨¡æ‹Ÿäºâ€™ threading.Threadâ€™ å†åˆ†é…å’Œä½¿ç”¨çš„æºä»£ç å’ŒäºŒè¿›åˆ¶å½¢å¼ï¼Œæ— è®ºæœ‰æ— ä¿®æ”¹,ä½†å¿…é¡»ç¬¦åˆä¸‹åˆ—çš„æƒ…å†µ: 1.æºä»£ç çš„å†åˆ†å‘å¿…é¡»ä¿ç•™ä¸Šè¿°ç‰ˆæƒå£°æ˜ï¼Œæ­¤æ¡ä»¶åˆ—è¡¨å’Œä»¥ä¸‹å…è´£å£°æ˜ã€‚ 2.äºŒè¿›åˆ¶å½¢å¼çš„å†åˆ†å‘å¿…é¡»åœ¨éšåˆ†å‘æä¾›çš„æ–‡æ¡£å’Œ/æˆ–å…¶ä»–ææ–™ä¸­å¤åˆ¶ä¸Šè¿°ç‰ˆæƒå£°æ˜ï¼Œæ­¤æ¡ä»¶åˆ—è¡¨å’Œä»¥ä¸‹å…è´£å£°æ˜ã€‚ 3.æœªç»äº‹å…ˆä¹¦é¢è®¸å¯ï¼Œä¸å¾—ä½¿ç”¨ä½œè€…å§“åæˆ–ä»»ä½•è´¡çŒ®è€…çš„å§“åæ¥è®¤å¯æˆ–å®£ä¼ æœ¬è½¯ä»¶è¡ç”Ÿçš„äº§å“ã€‚(ps: è¿™æ³¨é‡Šæ€ä¹ˆå’Œ process ä¸€ç‚¹å…³ç³»æ²¡æœ‰ğŸ˜²) å¼€å¯è¿›ç¨‹çš„ä¸¤ç§æ–¹å¼ å®ä¾‹åŒ– Process ç±» åˆ›å»ºä¸€ä¸ªå­è¿›ç¨‹çš„ demo å¦‚ä¸‹: 123456789from multiprocessing import Process,current_processdef task(): print('å­', current_process) if __name__ == '__main__': p = Process(target=task) p.start() # å¯åŠ¨ä¸€ä¸ªè¿›ç¨‹ print('ä¸»', current_process) æ³¨æ„:åˆ›å»ºè¿›ç¨‹çš„ä»£ç ä¸ºä»€ä¹ˆè¦æ”¾åœ¨ mian ä¸‹é¢? è¿™æ˜¯å› ä¸ºåœ¨ windows ç³»ç»Ÿä¸‹åˆ›å»ºè¿›ç¨‹ä¼šé‡æ–°åŠ è½½ä¸€éçˆ¶è¿›ç¨‹çš„ä»£ç ,å¦‚æœä¸æ”¾åœ¨ main åˆ¤æ–­ä¸‹é¢çš„è¯ä¼šé‡å¤æ‰§è¡Œåˆ›å»ºè¿›ç¨‹çš„ä»£ç .åœ¨ ç±»linux ç³»ç»Ÿä¸‹å°±ä¸ç”¨äº†.åˆ›å»ºè¿›ç¨‹åæ‰§è¡Œstartæ–¹æ³•å…¶å®å°±æ˜¯è¿è¡Œä¼ å…¥çš„ task å‡½æ•°: è¿™ä¸ªç±»æ–¹æ³•çš„æ³¨é‡Šå«ä¹‰ä¸º:è¿è¡Œåœ¨å­è¿›ç¨‹ä¸­çš„æ–¹æ³•,å¯ä»¥åœ¨å­ç±»ä¸­é‡å†™. çœ‹çœ‹åˆ›å»ºçš„å­è¿›ç¨‹çš„è¿è¡Œç»“æœ: ç»“æœä¼šæ‰“å°å‡ºä¸»è¿›ç¨‹å’Œå­è¿›ç¨‹. æ–°å»ºä¸€ä¸ªç»§æ‰¿è‡ª Process ç±»çš„å­ç±»å¹¶æ”¹å†™ run æ–¹æ³• demo å¦‚ä¸‹: 1234567891011from multiprocessing import Process,current_processclass MyProcess(Process): def run(self): print('å­', current_process())if __name__ == '__main__': p = MyProcess() p.start() print('ä¸»', current_process()) è¿è¡Œç»“æœ: è¿›ç¨‹ä¹‹é—´å†…å­˜ç©ºé—´äº’ç›¸éš”ç¦»123456789101112from multiprocessing import Processx = 100def task(): global x x = 1 print('å­', x) if __name__ == '__main__': p = Process(target=task) p.start() print('ä¸»', x) è¿è¡Œç»“æœ: å¯ä»¥å¾—å‡ºå³ä½¿åœ¨å­è¿›ç¨‹ä¸­global xäº†,ä¿®æ”¹çš„ä¹Ÿæ˜¯å­è¿›ç¨‹å†…å­˜ç©ºé—´é‡Œé¢çš„åç§°,è¿™å’Œä¹‹å‰è®²çš„å­è¿›ç¨‹å°†çˆ¶è¿›ç¨‹çš„ä»£ç é‡æ–°åŠ è½½äº†ä¸€é,æ‰€ä»¥è¿™é‡Œé¢çš„ x æ˜¯ä¸¤ä¸ªä¸åŒçš„ x. ä¸ºä»€ä¹ˆè¿›ç¨‹çš„å†…å­˜ç©ºé—´éœ€è¦åˆ‡å¿…é¡»è¦äº’ç›¸éš”ç¦»å‘¢? è¿›ç¨‹éš”ç¦»æ˜¯ä¸ºä¿æŠ¤æ“ä½œç³»ç»Ÿä¸­è¿›ç¨‹äº’ä¸å¹²æ‰°è€Œè®¾è®¡çš„ä¸€ç»„ä¸åŒç¡¬ä»¶å’Œè½¯ä»¶çš„æŠ€æœ¯.è¿™ä¸ªæŠ€æœ¯æ˜¯ä¸ºäº†é¿å…A è¿›ç¨‹å†™å…¥ B è¿›ç¨‹çš„æƒ…å†µå‘ç”Ÿ.è¿›ç¨‹çš„éš”ç¦»å®ç°,ä½¿ç”¨äº†è™šæ‹Ÿåœ°å€ç©ºé—´.è¿›ç¨‹ A çš„è™šæ‹Ÿåœ°å€å’Œè¿›ç¨‹ B çš„è™šæ‹Ÿåœ°å€ä¸åŒ,è¿™æ ·å°±é˜²æ­¢è¿›ç¨‹ A å°†æ•°æ®ä¿¡æ¯å†™å…¥è¿›ç¨‹ B,æ€»çš„æ¥è¯´å°±æ˜¯ä¸ºäº†æ•°æ®å®‰å…¨,ä½†ä¹Ÿæœ‰åŠæ³•å¯ä»¥å®ç°è¿›ç¨‹é—´é€šä¿¡,ç¨åå†è°ˆ. çˆ¶å­è¿›ç¨‹æ‰§è¡Œé¡ºåºä¸ join æ–¹æ³•åœ¨ä¸Šé¢çš„ä»£ç ä¸­å®ä¾‹ä¸€ä¸ªè¿›ç¨‹å¯¹è±¡ç„¶åæ‰§è¡Œ start æ–¹æ³•,ä¼šåˆ›å»ºå‡ºä¸€ä¸ªå­è¿›ç¨‹ç„¶åå»æ‰§è¡Œä»»åŠ¡,å…¶å® python åªæ˜¯è°ƒç”¨äº†æ“ä½œç³»ç»Ÿæä¾›çš„æ¥å£,åœ¨ä¸Šä¸€ç¯‡åšå®¢è¯´åˆ°,ç±» Unix æ˜¯è°ƒç”¨äº†æ“ä½œç³»ç»Ÿçš„ fork å‡½æ•°, windows æ˜¯ CreateProcess å‡½æ•°,æ‰€ä»¥æ˜¯é€šè¿‡æ“ä½œç³»ç»Ÿæ¥è°ƒç”¨å¹¶åˆ›å»ºä¸€ä¸ªè¿›ç¨‹çš„,è€Œåˆ›å»ºè¿›ç¨‹éœ€è¦ä¸€äº›å¿…è¦çš„èµ„æº,é‚£ä¹ˆåœ¨æ“ä½œç³»ç»Ÿåˆ†é…è¿™äº›èµ„æºçš„è¿‡ç¨‹ä¸­,ä¸»è¿›ç¨‹ä»£ç çš„æ‰§è¡Œåº”è¯¥è¿›è¡Œå®Œæˆäº†,æ‰€ä»¥è¿è¡Œç»“æœä¼šå…ˆå‡ºç°ä¸»è¿›ç¨‹ä»£ç æ‰§è¡Œå®Œ,åå­è¿›ç¨‹çš„ä»£ç æ‰§è¡Œå®Œ. åˆ›å»ºè¿›ç¨‹çš„å…·ä½“æ—¶é—´ 123456789101112131415161718from multiprocessing import Processimport timedef task(): start_time = time.time() print('å­è¿›ç¨‹è¿è¡Œæ—¶é—´') print(time.time() - start_time)if __name__ == '__main__': start_time = time.time() p = Process(target=task) p.start() print('åˆ›å»ºå­è¿›ç¨‹', time.time() - start_time) print('ä¸»', time.time() - start_time) è¿è¡Œç»“æœ: å¯ä»¥å¾—å‡ºåˆ›å»ºå­è¿›ç¨‹å‡ ä¹èŠ±äº†æ€»ç¨‹åºè¿è¡Œæ—¶é—´çš„90%ä»¥ä¸Š,æ‰€ä»¥ä¸»è¿›ç¨‹å…ˆè¿è¡Œç»“æŸå°±å¾ˆæ­£å¸¸äº†. join æ–¹æ³• é‚£ä¹ˆå¦‚ä½•å¯ä»¥è®©ä¸»è¿›ç¨‹ç­‰å¾…å­è¿›ç¨‹è¿è¡Œç»“æŸä¸»è¿›ç¨‹æ‰ç»“æŸå‘¢? 12345678910111213141516171819from multiprocessing import Processimport timedef task(): start_time = time.time() print('å­è¿›ç¨‹è¿è¡Œæ—¶é—´') print(time.time() - start_time)if __name__ == '__main__': start_time = time.time() p = Process(target=task) p.start() print('åˆ›å»ºå­è¿›ç¨‹', time.time() - start_time) p.join() print('ä¸»', time.time() - start_time) è¿è¡Œç»“æœ: è¿™æ ·ä¸»è¿›ç¨‹å°±ä¼šç­‰å¾…å­è¿›ç¨‹è¿è¡Œç»“æŸæ‰ä¼šç»“æŸ. join æ–¹æ³•:ä¸»è¿›ç¨‹ç­‰å¾…å­è¿›ç¨‹è¿è¡Œå®Œæ¯•,å³ä¸»è¿›ç¨‹åœ¨åŸåœ°é˜»å¡è€Œä¸å½±å“å­è¿›ç¨‹çš„è¿è¡Œ. è¿›ç¨‹å¯¹è±¡ç›¸å…³å±æ€§å’Œæ–¹æ³•12345678910111213141516171819from multiprocessing import Processimport os,timedef task(name): print('start', name) time.sleep(5) print('stop', name) if __name__ == '__main__': p = Process(target=task, args=('musibii',), name='musibii_Process') p.start() print(p.name) # è·å–è¿›ç¨‹å,å¯ä»¥è‡ªå®šä¹‰ print(p.pid) # è·å–è¿›ç¨‹ pid p.terminate() # ç»“æŸå­è¿›ç¨‹ print(p.is_alive()) # åˆ¤æ–­è¿›ç¨‹æ˜¯å¦å­˜æ´»,å¸ƒå°”å€¼ print(os.getpid()) # å½“å‰ä¸»è¿›ç¨‹ pid print(os.getppid()) # æ‰§è¡Œ py æ–‡ä»¶çš„è¿›ç¨‹,å½“å‰ä¸º pycharm è¿›ç¨‹pid è¿è¡Œç»“æœ: ä¸ºä»€ä¹ˆåœ¨ terminate ä¹‹ååˆ¤æ–­å­è¿›ç¨‹æ˜¯å¦å­˜æ´»,ç»“æœä¸º True å‘¢? å› ä¸ºåœ¨æ‰§è¡Œç»ˆç»“å­è¿›ç¨‹å‘½ä»¤åéœ€è¦æ“ä½œç³»ç»Ÿæ¥ç»“æŸå­è¿›ç¨‹,è€Œå®Œå…¨ç»ˆç»“å­è¿›ç¨‹éœ€è¦ä¸€å®šçš„æ—¶é—´,è€Œä»£ç æ‰§è¡Œé€Ÿåº¦å¾ˆå¿«,æ‰€ä»¥ä¼šæ˜¯ True. åƒµå°¸è¿›ç¨‹ä¸å­¤å„¿è¿›ç¨‹ä»¥åŠå®ˆæŠ¤è¿›ç¨‹åƒµå°¸è¿›ç¨‹åœ¨ç±» Unix ç³»ç»Ÿä¸­,åƒµå°¸è¿›ç¨‹æ˜¯æŒ‡å®Œæˆæ‰§è¡Œ(é€šè¿‡ exit ç³»ç»Ÿè°ƒç”¨,æˆ–è¿è¡Œæ—¶å‘ç”Ÿè‡´å‘½é”™è¯¯æˆ–æ”¶åˆ°ç»ˆæ­¢ä¿¡å·æ‰€è‡´)ä½†åœ¨æ“ä½œç³»ç»Ÿçš„è¿›ç¨‹è¡¨ä¸­ä»ç„¶æœ‰ä¸€ä¸ªè¡¨é¡¹(è¿›ç¨‹æ§åˆ¶å— PCB),å¤„äºâ€™ç»ˆæ­¢çŠ¶æ€â€™çš„è¿›ç¨‹. å­¤å„¿è¿›ç¨‹åœ¨æ“ä½œç³»ç»Ÿä¸­,å­¤å„¿è¿›ç¨‹æŒ‡çš„æ˜¯åœ¨å…¶çˆ¶è¿›ç¨‹æ‰§è¡Œå®Œæˆæˆ–è¢«ç»ˆæ­¢åä»ç»§ç»­è¿è¡Œçš„ä¸€ç±»è¿›ç¨‹,è¿™ç±»è¿›ç¨‹ç”±æ“ä½œç³»ç»Ÿè¿›è¡Œç®¡ç†å’Œå›æ”¶. å®ˆæŠ¤è¿›ç¨‹åœ¨ä¸€ä¸ªå¤šå·¥çš„ç”µè„‘ä½œä¸šç³»ç»Ÿä¸­,å®ˆæŠ¤è¿›ç¨‹æ˜¯ä¸€ç§åœ¨åå°æ‰§è¡Œçš„ç”µè„‘ç¨‹åº.æ­¤ç±»ç¨‹åºä¼šè¢«ä»¥è¿›ç¨‹çš„å½¢å¼åˆå§‹åŒ–.å®ˆæŠ¤è¿›ç¨‹ç¨‹åºçš„åç§°é€šå¸¸ä»¥â€™ dâ€™ç»“å°¾:ä¾‹å¦‚ syslogd å°±æ˜¯æŒ‡ç®¡ç†ç³»ç»Ÿæ—¥å¿—çš„å®ˆæŠ¤è¿›ç¨‹. è¯¦è§£: ä¸€èˆ¬æƒ…å†µä¸‹,å­è¿›ç¨‹æ˜¯ç”±çˆ¶è¿›ç¨‹åˆ›å»ºçš„,è€Œå­è¿›ç¨‹å’Œçˆ¶è¿›ç¨‹çš„é€€å‡ºæ˜¯æ— é¡ºåºçš„,ä¸¤è€…ä¹‹é—´éƒ½ä¸çŸ¥é“è°å…ˆé€€å‡º.æ­£å¸¸æƒ…å†µä¸‹çˆ¶è¿›ç¨‹å…ˆç»“æŸåˆ™ä¼šè°ƒç”¨ wait æˆ–è€… waitpid å‡½æ•°ç­‰å¾…å­è¿›ç¨‹å®Œæˆå†é€€å‡º,è€Œä¸€æ—¦çˆ¶è¿›ç¨‹ä¸ç­‰å¾…ç›´æ¥é€€å‡º,åˆ™å‰©ä¸‹çš„å­è¿›ç¨‹ä¼šè¢« init(pid=1)è¿›ç¨‹æ¥æ”¶,æˆè¢«å­¤å„¿è¿›ç¨‹.(è¿›ç¨‹æ ‘ç§é™¤äº† init éƒ½ä¼šæœ‰çˆ¶è¿›ç¨‹) å¦‚æœå­è¿›ç¨‹å…ˆé€€å‡º,çˆ¶è¿›ç¨‹è¿˜æœªç»“æŸå¹¶ä¸”æ²¡æœ‰è°ƒç”¨ wait æˆ–è€… waitpid å‡½æ•°è·å–å­è¿›ç¨‹çš„çŠ¶æ€ä¿¡æ¯,åˆ™å­è¿›ç¨‹æ®‹ç•™çš„çŠ¶æ€ä¿¡æ¯(task_struct ç»“æ„å’Œå°‘é‡ç³»ç»Ÿèµ„æºä¿¡æ¯)ä¼šå˜æˆåƒµå°¸è¿›ç¨‹. å®ˆæŠ¤è¿›ç¨‹æ˜¯æŒ‡åœ¨åå°è¿è¡Œ,æ²¡æœ‰æ§åˆ¶ç»ˆç«¯ä¸ä¹‹ç›¸è¿çš„è¿›ç¨‹.å®ƒç‹¬ç«‹äºæ§åˆ¶ç»ˆç«¯,é€šå¸¸å‘¨æœŸæ€§çš„æ‰§è¡ŒæŸç§ä»»åŠ¡.(ç‰¹åˆ«çš„,å®ˆæŠ¤è¿›ç¨‹ä¸èƒ½æœ‰å­è¿›ç¨‹)å®ˆæŠ¤è¿›ç¨‹è„±ç¦»äºç»ˆç«¯æ˜¯ä¸ºäº†é¿å…è¿›ç¨‹åœ¨æ‰§è¡Œè¿‡ç¨‹ä¸­çš„ä¿¡æ¯åœ¨ä»»ä½•ç»ˆç«¯ä¸Šæ˜¾ç¤ºå¹¶ä¸”è¿›ç¨‹ä¹Ÿä¸ä¼šè¢«ä»»ä½•ç»ˆç«¯æ‰€äº§ç”Ÿçš„ç»ˆç«¯ä¿¡æ¯æ‰€æ‰“æ–­. äº§ç”Ÿçš„å±å®³ å­¤å„¿è¿›ç¨‹ç»“æŸåä¼šè¢« init è¿›ç¨‹ç®¡ç†å¹¶å¤„ç†åäº‹,å¹¶æ²¡æœ‰å±å®³,è€Œåƒµå°¸è¿›ç¨‹åˆ™ä¼šä¸€ç›´å ç€è¿›ç¨‹å·,æ“ä½œç³»ç»Ÿçš„è¿›ç¨‹æ•°é‡æœ‰é™åˆ™ä¼šå—å½±å“. è§£å†³åŠæ³•: ä¸€èˆ¬åƒµå°¸è¿›ç¨‹çš„äº§ç”Ÿéƒ½æ˜¯å› ä¸ºçˆ¶è¿›ç¨‹çš„åŸå› ,åˆ™å¯ä»¥é€šè¿‡kill çˆ¶è¿›ç¨‹è§£å†³,è¿™æ—¶å€™åƒµå°¸è¿›ç¨‹å°±å˜æˆäº†å­¤å„¿è¿›ç¨‹,è¢« init è¿›ç¨‹ç®¡ç†.]]></content>
      <categories>
        <category>å¹¶å‘ç¼–ç¨‹</category>
      </categories>
  </entry>
  <entry>
    <title><![CDATA[å¹¶å‘ç¼–ç¨‹(äºŒ)]]></title>
    <url>%2F2018%2F11%2F16%2F%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B-%E4%BA%8C%2F</url>
    <content type="text"><![CDATA[å‰è¨€åœ¨ç¬¬ä¸‰ä»£è®¡ç®—æœºçš„å‘å±•ä¸­å› ä¸ºå‡ºç°äº†å¤šé“æŠ€æœ¯ä½¿å¾—åŒä¸€æ—¶åˆ»å¯ä»¥åœ¨å†…å­˜ä¸­åŒæ—¶è¿è¡Œå¤šä¸ªç¨‹åº,é‚£ä¹ˆè¿™æ ·å°±äº§ç”Ÿäº†è¿›ç¨‹çš„æ¦‚å¿µ. åœ¨æœ¬ç¯‡åšå®¢ä¸­å°†ä»‹ç»è¿›ç¨‹ç›¸å…³çš„ç†è®ºçŸ¥è¯†,å¯¹æ“ä½œç³»ç»Ÿè¿›ä¸€æ­¥çš„è®¤è¯†. è¿›ç¨‹ä»€ä¹ˆæ˜¯è¿›ç¨‹è¿›ç¨‹( process),æ˜¯æŒ‡è®¡ç®—æœºä¸­å·²è¿è¡Œçš„ç¨‹åº.è¿›ç¨‹æ›¾ç»æ˜¯åˆ†æ—¶ç³»ç»Ÿçš„åŸºæœ¬è¿è¡Œå•ä½.åœ¨é¢å‘è¿›ç¨‹è®¾è®¡çš„ç³»ç»Ÿ(å¦‚æ—©æœŸçš„ UNIX,Linux2.4åŠæ›´æ—©çš„ç‰ˆæœ¬)ä¸­,è¿›ç¨‹æ˜¯ç¨‹åºçš„åŸºæœ¬æ‰§è¡Œå®ä½“,æ˜¯æ“ä½œç³»ç»Ÿçš„èµ„æºå•ä½;åœ¨é¢å‘çº¿ç¨‹è®¾è®¡çš„ç³»ç»Ÿ(å¦‚å½“ä»£å¤šæ•°æ“ä½œç³»ç»Ÿ, Linux2.6åŠæ›´æ–°çš„ç‰ˆæœ¬)ä¸­,è¿›ç¨‹æœ¬èº«ä¸æ˜¯åŸºæœ¬è¿è¡Œå•ä½,è¿è¡Œå•ä½å˜ä¸ºçº¿ç¨‹,è¿›ç¨‹æ˜¯çº¿ç¨‹çš„å®¹å™¨.ç¨‹åºæœ¬èº«åªæ˜¯æŒ‡ä»¤,æ•°æ®åŠå…¶ç»„ç»‡å½¢å¼çš„æè¿°,è¿›ç¨‹æ‰æ˜¯(æŒ‡ä»¤å’Œæ•°æ®)çš„çœŸæ­£è¿è¡Œå®ä¾‹.è‹¥å¹²è¿›ç¨‹æœ‰å¯èƒ½ä¸åŒä¸€ä¸ªç¨‹åºç›¸å…³ç³»,ä¸”æ¯ä¸ªè¿›ç¨‹çš†å¯ä»¥åŒæ­¥(å¾ªåº)æˆ–å¼‚æ­¥(å¹³è¡Œ)çš„æ–¹å¼ç‹¬ç«‹è¿è¡Œ.ç°ä»£è®¡ç®—æœºç³»ç»Ÿå› ä¸ºç©ºé—´å…±äº«(ç©ºé—´å¤ç”¨)å¯åœ¨åŒä¸€æ®µæ—¶é—´å†…ä»¥è¿›ç¨‹çš„å½¢å¼å°†å¤šä¸ªç¨‹åºåŠ è½½åˆ°å­˜å‚¨å™¨ä¸­,å¹¶å€Ÿç”±æ—¶é—´å…±äº«(æ—¶é—´å¤ç”¨),ä»¥åœ¨ä¸€ä¸ªå¤„ç†å™¨ä¸Šè¡¨ç°å‡ºå¼‚æ­¥(å¹³è¡Œ)è¿è¡Œçš„æ„Ÿè§‰. ###å¼€å¯è¿›ç¨‹éœ€è¦çš„èµ„æº ç”¨æˆ·ä¸‹è¾¾è¿è¡Œç¨‹åºçš„å‘½ä»¤å,å°±ä¼šäº§ç”Ÿè¿›ç¨‹.åŒä¸€ç¨‹åºå¯äº§ç”Ÿå¤šä¸ªè¿›ç¨‹(ä¸€å¯¹å¤šçš„å…³ç³»),ä»¥å…è®¸åŒæ—¶åˆå¤šä½ç”¨æˆ·è¿è¡ŒåŒä¸€ç¨‹åº,å´ä¸ä¼šäº§ç”Ÿå†²çª. å¼€å¯è¿›ç¨‹éœ€è¦ä¸€äº›å¿…è¦çš„èµ„æºæ‰èƒ½å®Œæˆå·¥ä½œ,å¦‚ CPU ä½¿ç”¨æ—¶é—´,å­˜å‚¨å™¨,æ–‡ä»¶ä»¥åŠ I/O è®¾å¤‡,ä¸”ä¸ºä¾åºé€ä¸€è¿›è¡Œ,ä¹Ÿå°±æ˜¯æ¯ä¸ª CPU å†…æ ¸ä»»ä½•æ—¶é—´å†…ä»…èƒ½è¿è¡Œä¸€é¡¹è¿›ç¨‹. ###è¿›ç¨‹åŒ…å«çš„èµ„æº ä¸€ä¸ªè®¡ç®—æœºç³»ç»Ÿé›†æˆåŒ…æ‹¬(æˆ–è€…è¯´æ‹¥æœ‰)ä¸‹åˆ—èµ„æº: é‚£ä¸ªç¨‹åºçš„å¯æ‰§è¡Œæœºå™¨ä»£ç çš„ä¸€ä¸ªåœ¨å­˜å‚¨å™¨çš„æ˜ åƒ; åˆ†é…åˆ°çš„å­˜å‚¨å™¨(é€šå¸¸æ˜¯è™šæ‹Ÿçš„ä¸€ä¸ªå­˜å‚¨å™¨åŒºåŸŸ).å­˜å‚¨å™¨çš„å†…å®¹åŒ…æ‹¬å¯æ‰§è¡Œä»£ç ,ç‰¹å®šäºè¿›ç¨‹çš„æ•°æ®(è¾“å…¥æˆ–è¾“å‡º),è°ƒç”¨å †æ ˆ(ç”¨äºä¿å­˜è¿è¡Œæ—¶è¿è¾“ä¸­é€”äº§ç”Ÿçš„æ•°æ®); åˆ†é…ç»™è¯¥è¿›ç¨‹çš„èµ„æºçš„æ“ä½œç³»ç»Ÿæè¿°ç¬¦,è¯¸å¦‚æ–‡ä»¶æè¿°ç¬¦( UNIX æœ¯è¯­)æˆ–æ–‡ä»¶å¥æŸ„( Windows),æ•°æ®æºå’Œæ•°æ®ç»ˆç«¯; å®‰å…¨ç‰¹æ€§,è¯¸å¦‚è¿›ç¨‹æ‹¥æœ‰è€…å’Œè¿›ç¨‹çš„æƒé™é›†(å¯ä»¥å®¹è®¸çš„æ“ä½œ); å¤„ç†å™¨çŠ¶æ€,è¯¸å¦‚å¯„å­˜å™¨å†…å®¹,ç‰©ç†å­˜å‚¨å™¨å®šå€ç­‰.å½“è¿›ç¨‹æ­£åœ¨è¿è¡Œæ—¶,çŠ¶æ€é€šå¸¸ä¿å­˜åœ¨å¯„å­˜å™¨,å…¶ä»–æ•°æ®ä¿å­˜åœ¨å­˜å‚¨å™¨. ###è¿›ç¨‹çš„çŠ¶æ€ è¿›ç¨‹åœ¨è¿è¡Œä¸­,çŠ¶æ€ä¼šéšæ—¶å‘ç”Ÿæ”¹å˜.æ‰€è°“çŠ¶æ€,å°±æ˜¯æŒ‡è¿›ç¨‹ç›®å‰çš„åŠ¨ä½œ: æ–°ç”Ÿ( new):è¿›ç¨‹æ–°äº§ç”Ÿé‡; è¿è¡Œ(running):æ­£åœ¨è¿è¡Œ; ç­‰å¾…( waiting):ç­‰å¾…æŸäº‹å‘ç”Ÿ,ä¾‹å¦‚ç­‰å¾…ç”¨æˆ·è¾“å…¥å®Œæˆ.ä¹Ÿç§°ä¹‹ä¸ºé˜»å¡; å°±ç»ª( ready):ç­‰å¾… CPU; ç»“æŸ( terminated):å®Œæˆè¿è¡Œ. å„çŠ¶æ€åç§°å¯èƒ½è™½ä¸åŒçš„æ“ä½œèƒ½å¤Ÿç³»ç»Ÿè€Œä¸åŒ,å¯¹äºå•æ ¸ç³»ç»Ÿ( UP),ä»»ä½•æ—¶é—´å¯èƒ½æœ‰å¤šä¸ªè¿›ç¨‹ä¸ºç­‰å¾…,å°±ç»ª,ä½†å¿…å®šä»…æœ‰ä¸€ä¸ªè¿›ç¨‹åœ¨è¿è¡Œ. ###è¿›ç¨‹è¡¨ å¯¹äºä¸€ä¸ªè¿›ç¨‹æ¥è¯´,æ“ä½œç³»ç»Ÿä¸ºäº†èƒ½å¤Ÿåœ¨CPUç¦»å¼€åç»§ç»­æ‰§è¡Œè¯¥è¿›ç¨‹,ä¼šæŠŠæ­¤æ—¶è¿›ç¨‹è¿è¡Œçš„æ‰€æœ‰çŠ¶æ€ä¿å­˜ä¸‹æ¥,ä¸ºæ­¤,æ“ä½œç³»ç»Ÿå’Œä¼šç»´æŠ¤ä¸€å¼ è¡¨æ ¼,å³è¿›ç¨‹è¡¨( process table),æ¯ä¸ªè¿›ç¨‹å ç”¨ä¸€ä¸ªè¿›ç¨‹è¡¨é¡¹(ä¹Ÿç§°ä¹‹ä¸ºè¿›ç¨‹æ§åˆ¶å—). å¯¹äºä¸Šå›¾ä¸­é‡è¦é¡¹çš„è§£é‡Šå¦‚ä¸‹: å¯„å­˜å™¨:å¦‚ç´¯åŠ å™¨,å˜å€å¯„å­˜å™¨,å †æ ˆæŒ‡é’ˆä»¥åŠä¸€èˆ¬ç”¨é€”å¯„å­˜å™¨,çŠ¶å†µä»£ç ç­‰,ä¸»è¦ç”¨é€”åœ¨äºä¸­æ–­ è¿›ç¨‹æ—¶æš‚æ—¶å­˜å‚¨æ•°æ®,ä»¥ä¾¿ç¨åç»§ç»­åˆ©ç”¨;å…¶æ•°é‡åŠç±»åˆ«å› è®¡ç®—æœºä½“ç³»ç»“æ„æœ‰æ‰€å·®å¼‚; ç¨‹åºè®¡æ•°å™¨:æ¥ä¸‹æ¥è¦è¿è¡Œçš„æŒ‡ä»¤åœ°å€; è¿›ç¨‹çŠ¶æ€:å¯ä»¥æ˜¯ new,ready,running,waiting,blockedæˆ– terminated; ä¼˜å…ˆçº§( CPU æ’ç­æ³•):ä¼˜å…ˆçº§,æ’ç­é˜Ÿåˆ—ç­‰æŒ‡é’ˆä»¥åŠå…¶ä»–å‚æ•°; å­˜å‚¨ç®¡ç†:å¦‚æ ‡ç­¾é¡µè¡¨,æ­£æ–‡æ®µæŒ‡é’ˆ,æ•°æ®æ®µæŒ‡é’ˆä»¥åŠå †æ ˆæŒ‡é’ˆç­‰; ä¼šè®¡ä¿¡æ¯:å¦‚ CPU é‡å®é™…æ—¶é—´å€¼ä½¿ç”¨æ•°é‡,æ—¶é™,è´¦å·,å·¥ä½œæˆ–è¿›ç¨‹å·; è¾“å…¥è¾“å‡ºçŠ¶æ€:é…ç½®è¿›ç¨‹ä½¿ç”¨ I/O è®¾å¤‡,å¦‚ç£å¸¦æœº. Unixè¿›ç¨‹ç±» Unix ç³»ç»Ÿè¿›ç¨‹æ¦‚å¿µUnixè¿›ç¨‹PIDåœ¨ç±» Unix ç³»ç»Ÿä¸­å¯ä»¥ä½¿ç”¨ ps å‘½ä»¤æŸ¥è¯¢æ­£åœ¨è¿è¡Œçš„è¿›ç¨‹,æ¯”å¦‚ ps -eo pid,comm,cmd,ä¸‹å›¾ä¸ºæ‰§è¡Œç»“æœ:(-e è¡¨ç¤ºåˆ—å‡ºå…¨éƒ¨è¿›ç¨‹, -o pis,comm,cmd è¡¨ç¤ºæˆ‘ä»¬éœ€è¦ PID,COMMAND,CMD ä¿¡æ¯) æ¯ä¸€è¡Œä»£è¡¨ä¸€ä¸ªè¿›ç¨‹.æ¯ä¸€è¡Œåˆ†ä¸ºä¸‰åˆ—.ç¬¬ä¸€åˆ—ä¸º PID(Process IDentity)æ˜¯ä¸€ä¸ªæ•´æ•°,æ¯ä¸€ä¸ªè¿›ç¨‹éƒ½æœ‰ä¸€ä¸ªå”¯ä¸€çš„ PID æ¥è¡¨ç¤ºè‡ªå·±çš„èº«ä»½,è¿›ç¨‹ä¹Ÿå¯ä»¥æ ¹æ® PID æ¥è¯†åˆ«å…¶ä»–çš„è¿›ç¨‹.ç¬¬äºŒåˆ— COMMAND æ˜¯è¯¥è¿›ç¨‹çš„ç®€ç§°.ç¬¬ä¸‰åˆ— CMD æ˜¯è¿›ç¨‹æ‰€å¯¹åº”çš„ç¨‹åºä»¥åŠè¿è¡Œæ—¶æ‰€å¸¦çš„å‚æ•°.(ç¬¬ä¸‰åˆ—æœ‰ä¸€äº›ç”±[]æ‹¬èµ·æ¥çš„,å®ƒä»¬æ˜¯å†…æ ¸çš„ä¸€éƒ¨åˆ†åŠŸèƒ½) åœ¨ç¬¬ä¸€è¡Œçš„ PID ä¸º1,åå­—ä¸º systemd(18.04,ç‰ˆæœ¬ä¸º16.04è¯¥åå­—ä¸º init).è¿™ä¸ªè¿›ç¨‹æ˜¯æ‰§è¡Œ/sbin/init è¿™ä¸€æ–‡ä»¶(ç¨‹åº)äº§ç”Ÿçš„(ä¸çŸ¥é“æˆ‘çš„ä¸ºä»€ä¹ˆä¸æ˜¯,æŸ¥çœ‹äº†æœ‹å‹çš„æ˜¯/sbin/initğŸ˜­).å½“ Linux å¯åŠ¨çš„æ—¶å€™, systemd æ˜¯ç³»ç»Ÿåˆ›å»ºçš„ç¬¬ä¸€ä¸ªè¿›ç¨‹,è¿™ä¸€è¿›ç¨‹ä¼šä¸€ç›´å­˜åœ¨,ç›´åˆ°å…³é—­è®¡ç®—æœº. å®é™…ä¸Š,å½“è®¡ç®—æœºå¼€æœºæ—¶,å†…æ ¸( kernel)åªå»ºç«‹äº†ä¸€ä¸ªsystemd è¿›ç¨‹. Linux å†…æ ¸å¹¶ä¸æä¾›ç›´æ¥å»ºç«‹æ–°è¿›ç¨‹çš„ç³»ç»Ÿè°ƒç”¨.å‰©ä¸‹çš„æ‰€æœ‰è¿›ç¨‹éƒ½æ˜¯ systemd è¿›ç¨‹é€šè¿‡fork æœºåˆ¶å»ºç«‹çš„.æ–°çš„è¿›ç¨‹è¦é€šè¿‡è€çš„è¿›ç¨‹å¤åˆ¶è‡ªèº«å¾—åˆ°,è¿™å°±æ˜¯fork.fork æ˜¯ä¸€ä¸ªç³»ç»Ÿè°ƒç”¨.è¿›ç¨‹å­˜æ´»äºå†…å­˜ä¸­.æ¯ä¸ªè¿›ç¨‹éƒ½åœ¨å†…å­˜ä¸­åˆ†é…æœ‰å±äºè‡ªå·±çš„ä¸€ç‰‡ç©ºé—´(address space).å½“è¿›ç¨‹fork çš„æ—¶å€™, Linux åœ¨å†…å­˜ä¸­å¼€è¾Ÿå‡ºä¸€ç‰‡æ–°çš„å†…å­˜ç©ºé—´ç»™æ–°çš„è¿›ç¨‹,å¹¶å°†è€çš„è¿›ç¨‹ç©ºé—´ä¸­çš„å†…å®¹å¤åˆ¶åˆ°æ–°çš„ç©ºé—´ä¸­,æ­¤åä¸¤ä¸ªè¿›ç¨‹åŒæ—¶è¿è¡Œ. è€è¿›ç¨‹æˆä¸ºæ–°è¿›ç¨‹çš„çˆ¶è¿›ç¨‹(parent process),è€Œç›¸åº”çš„,æ–°è¿›ç¨‹å°±æ˜¯è€è¿›ç¨‹çš„å­è¿›ç¨‹(child process).ä¸€ä¸ªè¿›ç¨‹é™¤äº†æœ‰ä¸€ä¸ª PID ä¹‹å¤–,è¿˜ä¼šæœ‰ä¸€ä¸ª PPID(parent PID)æ¥å­˜å‚¨çˆ¶è¿›ç¨‹çš„ PID. å¦‚æœæˆ‘ä»¬å¾ªç€ PPID ä¸æ–­å‘ä¸Šè¿½æº¯çš„è¯,æ€»ä¼šå‘ç°å…¶æºå¤´æ˜¯ systemd è¿›ç¨‹.æ‰€ä»¥è¯´,æ‰€æœ‰çš„è¿›ç¨‹ä¹Ÿæ„æˆä¸€ä¸ªä»¥ systemd ä¸ºæ ¹çš„æ ‘çŠ¶ç»“æ„. è¿›ç¨‹æ ‘ä½¿ç”¨ pstreeå‘½ä»¤æŸ¥çœ‹è¿›ç¨‹æ ‘: å¯ä»¥çœ‹åˆ° systemd è¿›ç¨‹æ˜¯æ•´ä¸ªè¿›ç¨‹æ ‘çš„æ ¹. fork é€šå¸¸ä½œä¸ºä¸€ä¸ªå‡½æ•°è°ƒç”¨,è¿™ä¸ªå‡½æ•°ä¼šæœ‰ä¸¤æ¬¡è¿”å›,å°†å­è¿›ç¨‹çš„ PID è¿”å›ç»™çˆ¶è¿›ç¨‹,0è¿”å›ç»™å­è¿›ç¨‹.å®é™…ä¸Š,å­è¿›ç¨‹æ€»å¯ä»¥æŸ¥è¯¢è‡ªå·±çš„ PPID æ¥çŸ¥é“è‡ªå·±çš„çˆ¶è¿›ç¨‹æ˜¯è°,è¿™æ ·,ä¸€å¯¹çˆ¶å­è¿›ç¨‹å°±å¯ä»¥éšæ—¶æŸ¥è¯¢å¯¹æ–¹.åœ¨è°ƒç”¨fork å‡½æ•°å,ç¨‹åºä¼šè®¾è®¡ä¸€ä¸ª if é€‰æ‹©ç»“æ„.å½“ PID ç­‰äº0æ—¶,è¯´æ˜è¯¥è¿›ç¨‹ä¸ºå­è¿›ç¨‹,é‚£ä¹ˆè®©å®ƒæ‰§è¡ŒæŸäº›æŒ‡ä»¤;è€Œå½“ PID ä¸ºä¸€ä¸ªæ­£æ•´æ•°æ—¶,è¯´æ˜ä¸ºçˆ¶è¿›ç¨‹,åˆ™æ‰§è¡Œå¦å¤–ä¸€äº›æŒ‡ä»¤.ç”±æ­¤,å°±å¯ä»¥åœ¨å­è¿›ç¨‹å»ºç«‹ä¹‹å,è®©å®ƒæ‰§è¡Œä¸çˆ¶è¿›ç¨‹ä¸åŒçš„åŠŸèƒ½. å­è¿›ç¨‹çš„ç»ˆç»“å½“å­è¿›ç¨‹ç»ˆç»“æ—¶,å®ƒä¼šé€šçŸ¥çˆ¶è¿›ç¨‹,æ¸…ç©ºè‡ªå·±æ‰€å æ®çš„å†…å­˜,å¹¶åœ¨å†…æ ¸é‡Œç•™ä¸‹è‡ªå·±çš„é€€å‡ºä¿¡æ¯( exit code, å¦‚æœé¡ºåˆ©è¿è¡Œ,è¿”å›0;å¦‚æœæœ‰é”™è¯¯æˆ–å¼‚å¸¸çŠ¶å†µ,ä¸º&gt;0çš„æ•´æ•°).åœ¨è¿™ä¸ªä¿¡æ¯é‡Œ,ä¼šè§£é‡Šè¯¥è¿›ç¨‹ä¸ºä»€ä¹ˆé€€å‡º.çˆ¶è¿›ç¨‹åœ¨å¾—çŸ¥å­è¿›ç¨‹ç»ˆç»“æ—¶,æœ‰è´£ä»»å¯¹è¯¥å­è¿›ç¨‹ä½¿ç”¨ wait ç³»ç»Ÿè°ƒç”¨.è¿™ä¸ª wait å‡½æ•°èƒ½ä»å†…æ ¸ä¸­å–å‡ºå­è¿›ç¨‹çš„é€€å‡ºä¿¡æ¯,æ¸…ç©ºè¯¥ä¿¡æ¯åœ¨å†…æ ¸ä¸­æ‰€å æ®çš„ç©ºé—´.ä½†æ˜¯,å¦‚æœçˆ¶è¿›ç¨‹æ—©äºå­è¿›ç¨‹ç»ˆç»“,å­è¿›ç¨‹å°±ä¼šæˆä¸ºä¸€ä¸ªå­¤å„¿(orphand)è¿›ç¨‹.å­¤å„¿è¿›ç¨‹ä¼šè¿‡ç»§ç»™ systemd è¿›ç¨‹, systemd è¿›ç¨‹ä¹Ÿå°±æˆäº†è¯¥è¿›ç¨‹çš„çˆ¶è¿›ç¨‹. systemd è¿›ç¨‹è´Ÿè´£è¯¥å­è¿›ç¨‹ç»ˆç»“æ—¶è°ƒç”¨ wait å‡½æ•°, ä¸€ä¸ªç³Ÿç³•çš„ç¨‹åºä¹Ÿå®Œå…¨å¯èƒ½é€ æˆå­è¿›ç¨‹çš„é€€å‡ºä¿¡æ¯æ»ç•™åœ¨å†…æ ¸ä¸­çš„çŠ¶å†µ(çˆ¶è¿›ç¨‹ä¸å¯¹å­è¿›ç¨‹è°ƒç”¨ wait å‡½æ•°),è¿™æ ·çš„æƒ…å†µä¸‹,å­è¿›ç¨‹æˆä¸ºåƒµå°¸( zombie)è¿›ç¨‹.å½“å¤§é‡åƒµå°¸è¿›ç¨‹ç§¯ç´¯æ—¶,å†…å­˜ç©ºé—´ä¼šè¢«æŒ¤å . ç±» UNIX ç³»ç»Ÿè¿›ç¨‹å’Œçº¿ç¨‹çš„åŒºåˆ«å°½ç®¡åœ¨ UNIX ä¸­,è¿›ç¨‹ä¸çº¿ç¨‹æ˜¯æœ‰è”ç³»ä½†ä¸åŒçš„ä¸¤ä¸ªä¸œè¥¿,ä½†åœ¨ Linux ä¸­,çº¿ç¨‹åªæ˜¯ä¸€ç§ç‰¹æ®Šçš„è¿›ç¨‹.å¤šä¸ªçº¿ç¨‹ä¹‹é—´å¯ä»¥å…±äº«å†…å­˜ç©ºé—´å’Œ IO æ¥å£.æ‰€ä»¥,è¿›ç¨‹æ˜¯ Linux ç¨‹åºçš„å”¯ä¸€å®ç°æ–¹å¼. Linuxåˆ›å»ºè¿›ç¨‹ä»ç³»ç»Ÿè°ƒç”¨fork ä¸­è¿”å›æ—¶,ä¸¤ä¸ªè¿›ç¨‹é™¤äº†è¿”å›å€¼ PID ä¸åŒå¤–,å…·æœ‰å®Œå…¨ä¸€æ ·çš„ç”¨æˆ·çº§ä¸Šä¸‹æ–‡.åœ¨å­è¿›ç¨‹ä¸­, PIDçš„å€¼ä¸º0.åœ¨ç³»ç»Ÿå¯åŠ¨æ—¶æœ‰å†…æ ¸åˆ›å»ºçš„è¿›ç¨‹1æ˜¯å”¯ä¸€ä¸é€šè¿‡ç³»ç»Ÿè°ƒç”¨fork è€Œåˆ›å»ºçš„è¿›ç¨‹.ä¹Ÿå°±æ˜¯ä¸Šå›¾çš„ systemdè¿›ç¨‹. å†…æ ¸ä¸ºç³»ç»Ÿè°ƒç”¨fork å®Œæˆä¸‹åˆ—æ“ä½œ: ä¸ºæ–°è¿›ç¨‹åœ¨è¿›ç¨‹è¡¨ä¸­åˆ†é…ä¸€ä¸ªç©ºé¡¹; ä¸ºå­è¿›ç¨‹èµ‹ä¸€ä¸ªæƒŸä¸€çš„è¿›ç¨‹æ ‡è¯†å· PID; åšä¸€ä¸ªçˆ¶è¿›ç¨‹ä¸Šä¸‹æ–‡çš„é€»è¾‘å‰¯æœ¬.ç”±äºè¿›ç¨‹çš„æŸäº›éƒ¨åˆ†,å¦‚æ­£æ–‡åŒº,å¯èƒ½è¢«å‡ ä¸ªè¿›ç¨‹æ‰€å…±äº«,æ‰€ä»¥å†…æ ¸æœ‰æ—¶åªè¦å¢åŠ æŸä¸ªåŒºçš„å¼•ç”¨æ•°å³å¯,è€Œä¸æ˜¯çœŸçš„å°†è¯¥åŒºæ‹·è´åˆ°ä¸€ä¸ªæ–°çš„å†…å­˜ç‰©ç†åŒº; å¢åŠ ä¸è¯¥è¿›ç¨‹ç›¸å…³è”çš„æ–‡ä»¶è¡¨å’Œç´¢å¼•èŠ‚ç‚¹è¡¨çš„å¼•ç”¨æ•°; å¯¹çˆ¶è¿›ç¨‹è¿”å›å­è¿›ç¨‹çš„è¿›ç¨‹å·,å¯¹å­è¿›ç¨‹è¿”å›é›¶. ä¸‹é¢æ˜¯ç³»ç»Ÿè°ƒç”¨fork çš„ç®—æ³•.å†…æ ¸é¦–å…ˆç¡®ä¿¡æœ‰è¶³å¤Ÿçš„èµ„æºæ¥å®Œæˆfork. å¦‚æœèµ„æºä¸æ»¡è¶³è¦æ±‚,åˆ™ç³»ç»Ÿè°ƒç”¨fork å¤±è´¥.å¦‚æœèµ„æºæ»¡è¶³è¦æ±‚,å†…æ ¸åœ¨è¿›ç¨‹è¡¨ä¸­æ‰¾ä¸€ä¸ªç©ºé¡¹,å¹¶å¼€å§‹æ„é€ å­è¿›ç¨‹çš„ä¸Šä¸‹æ–‡. 12345678910111213141516171819202122232425262728293031323334353637383940414243444546è¾“å…¥:æ— è¾“å‡º:å¯¹çˆ¶è¿›ç¨‹æ˜¯å­è¿›ç¨‹çš„ PID, å¯¹å­è¿›ç¨‹æ˜¯0&#123; æ£€æŸ¥å¯ç”¨çš„å†…æ ¸èµ„æº å–ä¸€ä¸ªç©ºé—²çš„è¿›ç¨‹è¡¨é¡¹å’Œå”¯ä¸€çš„ PID å· æ£€æŸ¥ç”¨æˆ·æ²¡æœ‰è¿‡å¤šçš„è¿è¡Œè¿›ç¨‹ å°†å­è¿›ç¨‹çš„çŠ¶æ€è®¾ç½®ä¸º'åˆ›å»º'çŠ¶æ€ å°†çˆ¶è¿›ç¨‹çš„è¿›ç¨‹è¡¨ä¸­çš„æ•°æ®æ‹·è´åˆ°å­è¿›ç¨‹è¡¨ä¸­ å½“å‰ç›®å½•çš„ç´¢å¼•èŠ‚ç‚¹å’Œæ”¹å˜çš„æ ¹ç›®å½•(å¦‚æœå¯ä»¥)çš„å¼•ç”¨æ•°åŠ 1 æ–‡ä»¶è¡¨ä¸­çš„æ‰“å¼€æ–‡ä»¶çš„å¼•ç”¨æ•°åŠ 1 åœ¨å†…å­˜ä¸­åšçˆ¶è¿›ç¨‹ä¸Šä¸‹æ–‡çš„æ‹·è´ åœ¨å­è¿›ç¨‹çš„ç³»ç»Ÿçº§ä¸Šä¸‹æ–‡ä¸­å‹å…¥è™šè®¾ç³»ç»Ÿçº§ä¸Šä¸‹æ–‡å±‚ /* è™šè®¾ä¸Šä¸‹æ–‡å±‚ä¸­å«æœ‰ä½¿å­è¿›ç¨‹èƒ½ /* è¯†åˆ«è‡ªå·±çš„æ•°æ®,ä½¿å­è¿›ç¨‹è¢«è°ƒåº¦æ—¶ /* ä»è¿™é‡Œå¼€å§‹è¿è¡Œif (æ­£åœ¨æ‰§è¡Œçš„è¿›ç¨‹æ˜¯çˆ¶è¿›ç¨‹)&#123; å°†å­è¿›ç¨‹çš„çŠ¶æ€è®¾ç½®ä¸º'å°±ç»ª'çŠ¶æ€ return (å­è¿›ç¨‹çš„ PID) //ä»ç³»ç»Ÿåˆ°ç”¨æˆ· &#125; else &#123; åˆå§‹åŒ–è®¡æ—¶åŒº return 0; &#125;&#125; æ¥çœ‹ä¸‹é¢çš„ä¾‹å­.è¯¥ç¨‹åºè¯´æ˜çš„æ˜¯ç»è¿‡ç³»ç»Ÿè°ƒç”¨fork ä¹‹å,å¯¹æ–‡ä»¶çš„å…±äº«å­˜å–.ç”¨æˆ·è°ƒç”¨æ”¹ç¨‹åºæ—¶åº”æœ‰ä¸¤ä¸ªå‚æ•°,ä¸€ä¸ªæ˜¯å·²ç»æœ‰çš„æ–‡ä»¶å;å¦ä¸€ä¸ªæ˜¯è¦åˆ›å»ºçš„æ–°æ–‡ä»¶å.è¯¥è¿›ç¨‹æ‰“å¼€å·²æœ‰çš„æ–‡ä»¶,åˆ›å»ºä¸€ä¸ªæ–°æ–‡ä»¶,ç„¶åå‡å®šæ²¡æœ‰é‡è§é”™è¯¯,å®ƒè°ƒç”¨fork æ¥åˆ›å»ºä¸€ä¸ªå­è¿›ç¨‹.å­è¿›ç¨‹å¯ä»¥é€šè¿‡ä½¿ç”¨ç›¸åŒçš„æ–‡ä»¶æè¿°ç¬¦æ¥ç»§æ‰¿çš„å­˜å–çˆ¶è¿›ç¨‹çš„æ–‡ä»¶(å³çˆ¶è¿›ç¨‹å·²ç»æ‰“å¼€å’Œåˆ›å»ºçš„æ–‡ä»¶). å½“ç„¶,çˆ¶è¿›ç¨‹å’Œå­è¿›ç¨‹è¦åˆ†åˆ«ç‹¬ç«‹çš„è°ƒç”¨rdwrt å‡½æ•°å¹¶æ‰§è¡Œä¸€ä¸ªå¾ªç¯,å³ä»æºæ–‡ä»¶ä¸­è¯»ä¸€ä¸ªå­—èŠ‚,ç„¶åå†™ä¸€ä¸ªå­—èŠ‚åˆ°ç›®æ ‡æ–‡ä»¶ä¸­å».å½“ç³»ç»Ÿè°ƒç”¨ read é‡è§æ–‡ä»¶å°¾æ—¶,å‡½æ•°rdwrt ç«‹å³è¿”å›. 1234567891011121314151617181920212223242526272829303132#include &lt;fcntl.h&gt;int fdrd, fdwt;char c;main(int argc, char *argv[])&#123; if (argc != 3) &#123; exit(1); &#125; if ((fdrd = open(argv[1], O_RDONLY)) == -1) &#123; exit(1); &#125; if ((fdwt = creat(argv[2], 0666)) == -1) &#123; exit(1); &#125; fork(); // ä¸¤ä¸ªè¿›ç¨‹æ‰§è¡ŒåŒæ ·çš„ä»£ç  rdwrt(); exit(0);&#125;rdwrt()&#123; for (;;) &#123; if (read(fdrd, &amp;c, 1) != 1) &#123; return ; &#125; write(fdwt, &amp;c, 1); &#125;&#125; åœ¨è¿™ä¸ªä¾‹å­ä¸­,ä¸¤ä¸ªè¿›ç¨‹çš„æ–‡ä»¶æè¿°ç¬¦éƒ½æŒ‡å‘ç›¸åŒçš„æ–‡ä»¶è¡¨é¡¹.è¿™ä¸¤ä¸ªè¿›ç¨‹æ°¸è¿œä¸ä¼šè¯»æˆ–å†™åˆ°ç›¸åŒçš„æ–‡ä»¶åç§»é‡,å› ä¸ºå†…æ ¸åœ¨æ¯æ¬¡ read å’Œ write è°ƒç”¨å,éƒ½è¦å¢åŠ æ–‡ä»¶çš„åç§»é‡.å°½ç®¡ä¸¤ä¸ªè¿›ç¨‹ä¼¼ä¹æ˜¯å°†æºæ–‡ä»¶æ‹·è´äº†ä¸¤æ¬¡,ä½†å› ä¸ºå®ƒä»¬åˆ†æ‹…äº†å·¥ä½œä»»åŠ¡,å› æ­¤,ç›®æ ‡æ–‡ä»¶çš„å†…å®¹ä¾èµ–äºå†…æ ¸è°ƒåº¦ä¸¤ä¸ªè¿›ç¨‹çš„æ¬¡åº.å¦‚æœå†…æ ¸è¿™æ ·è°ƒåº¦ä¸¤ä¸ªè¿›ç¨‹:æ˜¯å®ƒä»¬äº¤æ›¿çš„æ‰§è¡Œå®ƒä»¬çš„ç³»ç»Ÿè°ƒç”¨,ç”šè‡³ä½¿å®ƒä»¬äº¤æ›¿çš„æ‰§è¡Œæ¯å¯¹ read å’Œ write è°ƒç”¨,åˆ™ç›®æ ‡æ–‡ä»¶çš„å†…å®¹å’Œæºæ–‡ä»¶çš„å†…å®¹å®Œå…¨ä¸€è‡´.ä½†è€ƒè™‘è¿™æ ·çš„æƒ…å†µ:ä¸¤ä¸ªè¿›ç¨‹æ­£è¦è¯»æºæ–‡ä»¶ä¸­çš„è¿ç»­çš„å­—ç¬¦â€™abâ€™.å‡å®šçˆ¶è¿›ç¨‹è¯»äº†å­—ç¬¦â€™aâ€™,è¿™æ—¶,å†…æ ¸åœ¨çˆ¶è¿›ç¨‹write ä¹‹å‰,åšäº†ä¸Šä¸‹æ–‡åˆ‡æ¢æ¥æ‰§è¡Œå­è¿›ç¨‹ã€‚å¦‚æœå­è¿›ç¨‹ è¯»åˆ°å­—ç¬¦ â€œbâ€ï¼Œå¹¶åœ¨çˆ¶è¿›ç¨‹è¢«è°ƒåº¦å‰ï¼Œå°†å®ƒå†™åˆ°ç›®æ ‡æ–‡ä»¶ï¼Œé‚£ä¹ˆç›®æ ‡æ–‡ä»¶å°†ä¸å†å«æœ‰ å­—ç¬¦ä¸² â€œabâ€ï¼Œè€Œæ˜¯å«æœ‰ â€œbaâ€äº†ã€‚å†…æ ¸å¹¶ä¸ä¿è¯è¿›ç¨‹æ‰§è¡Œçš„ç›¸å¯¹é€Ÿç‡ã€‚ å¦ä¸€ä¸ªä¾‹å­: 123456789101112131415161718192021222324252627282930313233343536373839404142434445#include &lt;string.h&gt;char string[] = "Hello, world";main()&#123; int count, i; int to_par[2], to_chil[2]; // åˆ°çˆ¶ã€å­è¿›ç¨‹çš„ç®¡é“ char buf[256]; pipe(to_par); pipe(to_chil); if (fork() == 0) &#123; // å­è¿›ç¨‹åœ¨æ­¤æ‰§è¡Œ close(0); // å…³é—­è€çš„æ ‡å‡†è¾“å…¥ dup(to_child[0]); // å°†ç®¡é“çš„è¯»å¤åˆ¶åˆ°æ ‡å‡†è¾“å…¥ close(1); // å…³é—­è€çš„æ ‡å‡†è¾“å‡º dup(to_par[1]); // å°†ç®¡é“çš„å†™å¤åˆ¶åˆ°æ ‡å‡†è¾“å‡º close(to_par[1]); // å…³é—­ä¸å¿…è¦çš„ç®¡é“æè¿°ç¬¦ close(to_chil[0]); close(to_par[0]); close(to_chil[1]); for (;;) &#123; if ((count = read(0, buf, sizeof(buf)) == 0) exit(); write(1, buf, count); &#125; &#125; // çˆ¶è¿›ç¨‹åœ¨æ­¤æ‰§è¡Œ close(1); // é‡æ–°è®¾ç½®æ ‡å‡†è¾“å…¥ã€è¾“å‡º dup(to_chil[1]); close(0); dup(to_par[0]); close(to_chil[1]); close(to_par[0]); close(to_chil[0]); close(to_par[1]); for (i = 0; i &lt; 15; i++) &#123; write(1, string, strlen(string)); read(0, buf, sizeof(buf)); &#125;&#125; å­è¿›ç¨‹ä»çˆ¶è¿›ç¨‹ç»§æ‰¿äº†æ–‡ä»¶æè¿°ç¬¦0å’Œ1(æ ‡å‡†è¾“å…¥å’Œæ ‡å‡†è¾“å‡º)ã€‚ä¸¤æ¬¡æ‰§è¡Œç³»ç»Ÿè°ƒç”¨ pipe åˆ†åˆ«åœ¨æ•°ç»„ to_par å’Œ to_chil ä¸­åˆ†é…äº†ä¸¤ä¸ªæ–‡ä»¶æè¿°ç¬¦ã€‚ç„¶åè¯¥è¿›ç¨‹ æ‰§è¡Œç³»ç»Ÿè°ƒç”¨ forkï¼Œå¹¶å¤åˆ¶è¿›ç¨‹ä¸Šä¸‹æ–‡ï¼šè±¡å‰ä¸€ä¸ªä¾‹å­ä¸€æ ·ï¼Œæ¯ä¸ªè¿›ç¨‹å­˜å– è‡ªå·±çš„ç§æœ‰æ•°æ®ã€‚çˆ¶è¿›ç¨‹å…³é—­ä»–çš„æ ‡å‡†è¾“å‡ºæ–‡ä»¶(æ–‡ä»¶æè¿°ç¬¦1)ï¼Œå¹¶å¤åˆ¶(dup)ä»ç®¡é“ çº¿ to_chil è¿”å›çš„å†™æ–‡ä»¶æè¿°ç¬¦ã€‚å› ä¸ºåœ¨çˆ¶è¿›ç¨‹æ–‡ä»¶æè¿°ç¬¦è¡¨ä¸­çš„ç¬¬ä¸€ä¸ªç©ºæ§½æ˜¯åˆšåˆš ç”±å…³é—­è…¾å‡ºæ¥çš„ï¼Œæ‰€ä»¥å†…æ ¸å°†ç®¡é“çº¿å†™æ–‡ä»¶æè¿°ç¬¦å¤åˆ¶åˆ°äº†æ–‡ä»¶æè¿°ç¬¦è¡¨ä¸­çš„ç¬¬ä¸€ é¡¹ä¸­ï¼Œè¿™æ ·ï¼Œæ ‡å‡†è¾“å‡ºæ–‡ä»¶æè¿°ç¬¦å˜æˆäº†ç®¡é“çº¿ to_chil çš„å†™æ–‡ä»¶æè¿°ç¬¦ã€‚ çˆ¶è¿›ç¨‹ä»¥ç±»ä¼¼çš„æ“ä½œå°†æ ‡å‡†è¾“å…¥æ–‡ä»¶æè¿°ç¬¦æ›¿æ¢ä¸ºç®¡é“çº¿ to_par çš„è¯»æ–‡ä»¶ æè¿°ç¬¦ã€‚ä¸æ­¤ç±»ä¼¼ï¼Œå­è¿›ç¨‹å…³é—­ä»–çš„æ ‡å‡†è¾“å…¥æ–‡ä»¶(æ–‡ä»¶æè¿°ç¬¦0)ï¼Œç„¶åå¤åˆ¶ (dup) ç®¡é“ çº¿ to_chil çš„è¯»æ–‡ä»¶æè¿°ç¬¦ã€‚ç”±äºæ–‡ä»¶æè¿°ç¬¦è¡¨çš„ç¬¬ä¸€ä¸ªç©ºé¡¹æ˜¯åŸå…ˆçš„æ ‡å‡† è¾“å…¥é¡¹ï¼Œæ‰€ä»¥å­è¿›ç¨‹çš„æ ‡å‡†è¾“å…¥å˜æˆäº†ç®¡é“çº¿ to_chil çš„è¯»æ–‡ä»¶æè¿°ç¬¦ã€‚ å­è¿›ç¨‹åšä¸€ç»„ç±»ä¼¼çš„æ“ä½œä½¿ä»–çš„æ ‡å‡†è¾“å‡ºå˜æˆç®¡é“çº¿ to_par çš„å†™æ–‡ä»¶æè¿° ç¬¦ã€‚ç„¶åä¸¤ä¸ªè¿›ç¨‹å…³é—­ä» pipe è¿”å›çš„æ–‡ä»¶æè¿°ç¬¦ã€‚ä¸Šè¿°æ“ä½œçš„ç»“æœæ˜¯ï¼šå½“ çˆ¶è¿›ç¨‹å‘æ ‡å‡†è¾“å‡ºå†™ä¸œè¥¿çš„æ—¶å€™ï¼Œä»–å®é™…ä¸Šæ˜¯å†™å‘ to_chilâ€“å‘å­è¿›ç¨‹å‘é€ æ•°æ®ï¼Œè€Œå­è¿›ç¨‹åˆ™ä»ä»–çš„æ ‡å‡†è¾“å…¥è¯»ç®¡é“çº¿ã€‚å½“å­è¿›ç¨‹å‘ä»–çš„æ ‡å‡†è¾“å‡ºå†™çš„æ—¶å€™ï¼Œ ä»–å®é™…ä¸Šæ˜¯å†™å…¥ to_parâ€“å‘çˆ¶è¿›ç¨‹å‘é€æ•°æ®ï¼Œè€Œçˆ¶è¿›ç¨‹åˆ™ä»ä»–çš„æ ‡å‡†è¾“å…¥ æ¥æ”¶æ¥è‡ªç®¡é“çº¿çš„æ•°æ®ã€‚ä¸¤ä¸ªè¿›ç¨‹é€šè¿‡ä¸¤æ¡ç®¡é“çº¿äº¤æ¢æ¶ˆæ¯ã€‚ æ— è®ºä¸¤ä¸ªè¿›ç¨‹æ‰§è¡Œçš„é¡ºåºå¦‚ä½•ï¼Œè¿™ä¸ªç¨‹åºæ‰§è¡Œçš„ç»“æœæ˜¯ä¸å˜çš„ã€‚ä»–ä»¬å¯èƒ½å»æ‰§è¡Œç¡çœ  å’Œå”¤é†’æ¥ç­‰å¾…å¯¹æ–¹ã€‚çˆ¶è¿›ç¨‹åœ¨15æ¬¡å¾ªç¯åé€€å‡ºã€‚ç„¶åå­è¿›ç¨‹å› ç®¡é“çº¿æ²¡æœ‰å†™è¿›ç¨‹è€Œè¯» åˆ°â€œæ–‡ä»¶å°¾â€æ ‡å¿—ï¼Œå¹¶é€€å‡ºã€‚ Windowsè¿›ç¨‹è¿›ç¨‹ PIDwindows ä¹Ÿæ˜¯ä½¿ç”¨ PID æ¥å”¯ä¸€æ ‡è¯†ä¸€ä¸ªè¿›ç¨‹. åœ¨ä¸€ä¸ªè¿›ç¨‹å†…éƒ¨,ä½¿ç”¨è¿›ç¨‹å¥æŸ„æ¥æ ‡è¯†å…³æ³¨çš„æ¯ä¸ªè¿›ç¨‹.ä½¿ç”¨ Windows API ä»è¿›ç¨‹ PID è·å–è¿›ç¨‹å¥æŸ„: 1OpenProcess(PROCESS_ALL_ACCESS, TRUE, procId); //æˆ–è€…PROCESS_QUERY_INFORMATION ä½¿ç”¨ API å‡½æ•°: GETModuleFileNameEx æˆ– GetProcessImageFileName æˆ–QUeryFullProcessImageName æŸ¥è¯¢è¿›ç¨‹çš„ exe æ–‡ä»¶å,ä½¿ç”¨ API å‡½æ•° GetCurrentProcesså¯ä»¥è·å–æœ¬è¿›ç¨‹çš„ä¼ªå¥æŸ„(å€¼ä¸º-1),åªèƒ½ç”¨äºæœ¬è¿›ç¨‹çš„ API å‡½æ•°è°ƒç”¨;ä¸èƒ½è¢«å…¶ä»–è¿›ç¨‹ç»§æ‰¿æˆ–å¤åˆ¶.å¯ç”¨ API å‡½æ•° DuplicateHandle è·å¾—è¿›ç¨‹çš„çœŸå¥æŸ„. Windowsåˆ›å»ºè¿›ç¨‹Windows ç³»ç»Ÿä½¿ç”¨ CreateProcess åˆ›å»ºè¿›ç¨‹, WaitForSingleObject å¯ç­‰å¾…å­è¿›ç¨‹çš„ç»“æŸ.ä¾‹å¦‚: 12345678910111213141516171819202122232425262728293031#include &lt;windows.h&gt;#include &lt;stdio.h&gt;#include &lt;tchar.h&gt;void main() &#123; STARTUPINFO si; PROCESS_INFORMATION pi; ZeroMemory(&amp;si, sizeof(si)); si.cb = sizeof(si); ZeroMemory(&amp;pi, sizeof(pi)); // Start the child process. if (!CreateProcess(NULL, // No module name (use command line) "demo.exe arg1", // Command line NULL, // Process handle not inheritable NULL, // Thread handle not inheritable FALSE, // Set handle inheritance to FALSE 0, // No creation flags NULL, // Use parent's environment block NULL, // Use parent's starting directory &amp;si, // Pointer to STARTUPINFO structure &amp;pi) // Pointer to PROCESS_INFORMATION structure,ç”¨äºç»™å‡ºå­è¿›ç¨‹ä¸»çª—å£çš„å±æ€§ ) &#123; printf("CreateProcess failed (%d).\n", GetLastError()); return; &#125; // Wait until child process exits. WaitForSingleObject(pi.hProcess, INFINITE); // Close process and thread handles. CloseHandle(pi.hProcess); CloseHandle(pi.hThread);&#125; çˆ¶å­è¿›ç¨‹å…³ç³»åˆ›å»ºçš„å­è¿›ç¨‹å¯ä»¥ç»§æ‰¿çˆ¶è¿›ç¨‹çš„: CreateFile è¿”å›çš„æ‰“å¼€å¥æŸ„,åŒ…æ‹¬æ–‡ä»¶,æ§åˆ¶å°è¾“å…¥ç¼“å†²åŒº,æ§åˆ¶å°å±å¹•ç¼“å†²åŒº,å‘½åç®¡é“,ä¸²å£é€šä¿¡è®¾å¤‡,é‚®æ§½; æ‰“å¼€çš„å¥æŸ„,åŒ…æ‹¬:è¿›ç¨‹,çº¿ç¨‹,äº’æ–¥é”,äº‹ä»¶å¯¹è±¡,ä¿¡å·é‡,å‘½åç®¡é“,åŒ¿åç®¡é“,æ–‡ä»¶æ˜ å°„å¯¹è±¡; ç¯å¢ƒå˜é‡; å½“å‰ç›®å½•; æ§åˆ¶å°,é™¤éè¿›ç¨‹è„±ç¦»( detach)æˆ–åˆ›å»ºäº†æ–°çš„æ§åˆ¶å°; é”™è¯¯æ¨¡å¼,ä½¿ç”¨ API å‡½æ•° SetErrorMode è®¾ç½®; è¿›ç¨‹äº²å’Œæ©ç ( affinity mask),ç”¨ä»¥æŒ‡ç¤ºæœŸæœ›ä½¿ç”¨ CPU çš„å“ªäº›æ ¸; åœ¨å“ªä¸ªä»»åŠ¡ä¸­. å­è¿›ç¨‹ä¸èƒ½ç»§æ‰¿: ä¼˜å…ˆçº§ç±»åˆ« Priority class; å¥æŸ„,æœ‰ LocalAlloc,GlobalAlloc,HeapCreate,HeapAlloc è¿”å›; ä¼ªå¥æŸ„,æœ‰ GetCurrentProcessæˆ– GetCurrentThread è¿”å›; DLL æ¨¡å—å¥æŸ„,ç”± LoadLibrary è¿”å›; GDI å¯¹è±¡å¥æŸ„æˆ– USER å¯¹è±¡å¥æŸ„,å¦‚ HBITMAP æˆ– HMENU. ä¸ºç»§æ‰¿å¥æŸ„,çˆ¶è¿›ç¨‹åœ¨åˆ›å»º(æˆ–è€…ä»£å¼€,å¤åˆ¶)å„ç§å¯ç»§æ‰¿å¯¹è±¡å¥æŸ„æ—¶,åœ¨ SECURITY_ATTRIBUTES ç»“æ„çš„ blnheritHandle æˆå‘˜ä¸º TRUE. åœ¨ CreateProcess çš„blnheritHandles å‚æ•°ä¸º TRUE; å¦‚æœè¦ç»§æ‰¿æ ‡å‡†è¾“å…¥,æ ‡å‡†è¾“å‡º,æ ‡å‡†é”™è¯¯çš„å¥æŸ„, STARTUPINFO ç»“æ„çš„ dwFlags æˆå‘˜åŒ…å« STARTF_USESTDHANDLES æ ‡å¿—ä½. è·å–è¿›ç¨‹ä¿¡æ¯çš„ç›¸å…³å‡½æ•° GetCommandLineï¼šå½“å‰è¿›ç¨‹çš„å‘½ä»¤è¡Œå­—ç¬¦ä¸² GetStartupInfoï¼šå½“å‰è¿›ç¨‹è¢«åˆ›å»ºæ—¶çš„STARTUPINFOç»“æ„ GetProcessVersionï¼šè·å–å¯æ‰§è¡Œå¤´çš„ç‰ˆæœ¬ä¿¡æ¯ GetModuleFileNameï¼šè·å–åŒ…å«äº†è¿›ç¨‹ä»£ç çš„å¯æ‰§è¡Œæ–‡ä»¶çš„å…¨è·¯å¾„ä¸æ–‡ä»¶å GetGuiResourcesï¼šè·å–ä½¿ç”¨ä¸­çš„GUIå¯¹è±¡çš„å¥æŸ„æ•°é‡ IsDebuggerPresentï¼šç¡®å®šè¿›ç¨‹æ˜¯å¦è¢«è°ƒè¯• GetProcessIoCountersï¼šè·å–è¿›ç¨‹æ‰§è¡Œçš„æ‰€æœ‰I/Oæ“ä½œçš„è–„è®°ä¿¡æ¯ã€‚ GetProcessMemoryInfoï¼šè·å–è¿›ç¨‹çš„å·¥ä½œé›†å†…å­˜çš„ä¿¡æ¯ GetProcessWorkingSetSizeï¼šè·å–è¿›ç¨‹çš„å·¥ä½œé›†å†…å­˜è¢«å…è®¸çš„ä¸‹é™ä¸ä¸Šé™ SetProcessWorkingSetSizeï¼šè®¾ç½®è¿›ç¨‹çš„å·¥ä½œé›†å†…å­˜çš„ä¸‹é™ä¸ä¸Šé™ è¿›ç¨‹ç»ˆç»“å­è¿›ç¨‹ç»ˆæ­¢æ—¶,æ‰€æœ‰æ‰“å¼€çš„å¥æŸ„è¢«å…³é—­,è¿›ç¨‹å¯¹è±¡è¢«å¤„ç½š( signaled).è¿›ç¨‹çš„é€€å‡ºç ( exit code)æˆ–è€… ExitProcess,TerminateProcess å‡½æ•°ä¸­æŒ‡å‡º,æˆ–è€…æ˜¯ main,WinMain å‡½æ•°è¿”å›å€¼.å¦‚æœè¿›ç¨‹ç”±äºä¸€ä¸ªè‡´å‘½å¼‚å¸¸(fatal exception)è€Œç»ˆæ­¢,é€€å‡ºç æ˜¯è¿™ä¸ªå¼‚å¸¸å€¼,åŒæ—¶è¿›ç¨‹çš„æ‰€æœ‰æ‰§è¡Œä¸­çš„çº¿ç¨‹çš„é€€å‡ºç ä¹Ÿæ˜¯è¿™ä¸ªå¼‚å¸¸å€¼. ä¼˜é›…çš„å…³é—­å…¶ä»–è¿›ç¨‹çš„æ–¹æ³•ä½¿ç”¨RegisterWindowMessage ç™»è®°ç§æœ‰æ¶ˆæ¯,ç”¨ BroadcastSystemMessage æ’­æ”¾æ¶ˆæ¯,æ”¶åˆ°æ¶ˆæ¯çš„è¿›ç¨‹ç”¨ExitProcesså…³é—­. è·å–ç‰¹å®šåå­—çš„è¿›ç¨‹ PIDå¦‚æœæƒ³è¦è·å–ç‰¹å®šåå­—çš„è¿›ç¨‹çš„IDï¼Œéœ€è¦æšä¸¾æ‰€æœ‰è¿›ç¨‹ã€‚ä¼ ç»ŸåŠæ³•æ˜¯CreateToolhelp32Snapshotã€Process32Firstã€Process32Nextå‡½æ•°ï¼›ä¹Ÿå¯ä»¥ä½¿ç”¨EnumProcessesã€EnumProcessModuleså‡½æ•°æ¥è·å–æ‰€æœ‰çš„è¿›ç¨‹IDï¼Œä¸€ä¸ªè¿›ç¨‹çš„æ‰€æœ‰æ¨¡å—çš„å¥æŸ„ã€‚ç¤ºä¾‹å¦‚ä¸‹: 1234567891011121314151617181920212223242526272829303132333435363738394041424344PROCESSENTRY32 pe32;HANDLE hSnaphot;HANDLE hApp;DWORD dProcess;hSnaphot = CreateToolhelp32Snapshot(TH32CS_SNAPPROCESS, 0); // è·å–è¿›ç¨‹å¿«ç…§Process32First(hSnaphot, &amp;pe32); // æšä¸¾ç¬¬ä¸€ä¸ªè¿›ç¨‹do &#123; if (lstrcmpi(pe32.szExeFile, _T("NotePad.exe")) == 0) &#123; // æŸ¥æ‰¾è¿›ç¨‹åç§°ä¸º NotePad.exe dProcess = pe32.th32ProcessID; break; &#125;&#125; while (Process32Next(hSnaphot, &amp;pe32)); // ä¸æ–­å¾ªç¯ç›´åˆ°æšä¸¾ä¸åˆ°è¿›ç¨‹hApp = OpenProcess(PROCESS_VM_OPERATION | SYNCHRONIZE, FALSE, dProcess); // æ ¹æ®è¿›ç¨‹ ID è·å–ç¨‹åºçš„å¥æŸ„if (!WaitForSingleObject(hApp, INFINITE)) // ç­‰å¾…è¿›ç¨‹å…³é—­ AfxMessageBox(" è®°äº‹æœ¬å·²ç»å…³é—­ï¼");// å¦ä¸€ç§æ–¹æ³•DWORD aProcId[1024], dwProcCnt, dwModCnt;HMODULE hMod[1000];TCHAR szPath[MAX_PATH];// æšä¸¾å‡ºæ‰€æœ‰è¿›ç¨‹IDif (!EnumProcesses(aProcId, sizeof(aProcId), &amp;dwProcCnt)) &#123; //cout &lt;&lt; "EnumProcesses error: " &lt;&lt; GetLastError() &lt;&lt; endl; return 0;&#125;// éä¾‹æ‰€æœ‰è¿›ç¨‹for (DWORD i = 0; i &lt; dwProcCnt; ++i) &#123; // æ‰“å¼€è¿›ç¨‹ï¼Œå¦‚æœæ²¡æœ‰æƒé™æ‰“å¼€åˆ™è·³è¿‡ HANDLE hProc = OpenProcess(PROCESS_ALL_ACCESS, FALSE, aProcId[i]); if (NULL != hProc) &#123; // æ‰“å¼€è¿›ç¨‹çš„ç¬¬1ä¸ªModuleï¼Œå¹¶æ£€æŸ¥å…¶åç§°æ˜¯å¦ä¸ç›®æ ‡ç›¸ç¬¦ if (EnumProcessModules(hProc, &amp;hMod, 1000, &amp;dwModCnt)) &#123; GetModuleBaseName(hProc, hMod, szPath, MAX_PATH); if (0 == lstrcmpi(szPath, lpName)) &#123; CloseHandle(hProc); return aProcId[i]; &#125; &#125; CloseHandle(hProc); &#125;&#125;return 0;]]></content>
      <categories>
        <category>å¹¶å‘ç¼–ç¨‹</category>
      </categories>
  </entry>
  <entry>
    <title><![CDATA[ç½‘ç»œç¼–ç¨‹(å…­)]]></title>
    <url>%2F2018%2F11%2F11%2F%E7%BD%91%E7%BB%9C%E7%BC%96%E7%A8%8B-%E5%85%AD%2F</url>
    <content type="text"><![CDATA[å‰è¨€åœ¨ä¸Šç¯‡æ–‡ç« è§£å†³äº† TCP å’Œ UDP å¹¶å‘çš„é—®é¢˜,æ˜¯é€šè¿‡ä¸€ä¸ª socketserveræ¨¡å—å®ç°çš„,é‚£ä¹ˆè¿™ä¸ªæ¨¡å—åˆ°åº•åšäº†ä»€ä¹ˆå¯ä»¥å®ç°å¹¶å‘çš„æ•ˆæœå‘¢? socketserver æºç åˆ†æè¿›å…¥ socketserver ä¸­æŸ¥çœ‹æ³¨é‡Š: ç¿»è¯‘å¦‚ä¸‹: é€šç”¨å¥—æ¥å­—æœåŠ¡ç±» è¯¥æ¨¡å—è¯•å›¾æ•è·å®šä¹‰æœåŠ¡å™¨çš„å„ä¸ªæ–¹é¢ åŸºäºå¥—æ¥å­—çš„æœåŠ¡å™¨ åŸºäºè¯·æ±‚çš„æœåŠ¡å™¨ åœ¨è¿›ä¸€æ­¥æŸ¥çœ‹è¯·æ±‚ä¹‹å‰è¿›è¡Œå®¢æˆ·åœ°å€éªŒè¯,(è¿™å®é™…ä¸Šæ˜¯ä¸€ä¸ªé’©å­,ç”¨äºä»»ä½•éœ€è¦åœ¨è¿›è¡Œå…¶ä»–æ“ä½œä¹‹å‰æŸ¥çœ‹è¯·æ±‚çš„å¤„ç†) å¦‚ä½•å¤„ç†å¤šä¸ªè¯·æ±‚: â€‹ åŒæ­¥(ä¸€æ¬¡å¤„ç†ä¸€ä¸ªè¯·æ±‚) â€‹ åˆ†å‰(æ¯ä¸ªè¯·æ±‚ç”±ä¸€ä¸ªæ–°è¿›ç¨‹å¤„ç†) â€‹ çº¿ç¨‹åŒ–(æ¯ä¸ªè¯·æ±‚ç”±ä¸€ä¸ªæ–°çº¿ç¨‹å¤„ç†) è¿™ä¸ªæ¨¡å—çš„ç±»å–œæ¬¢ç¼–å†™æœ€ç®€å•çš„æœåŠ¡å™¨ç±»å‹:ä¸€ä¸ªåŒæ­¥çš„ TCP/IP æœåŠ¡å™¨.è¿™æ˜¯ç³Ÿç³•çš„è®¾è®¡,ä½†æ˜¯èŠ‚çœäº†ä¸€äº›è¾“å…¥.(è¿˜æœ‰ä¸€ä¸ªé—®é¢˜æ˜¯,æ·±åº¦ç±»å±‚æ¬¡ç»“æ„ä¼šå‡æ…¢æ–¹æ³•æŸ¥æ‰¾çš„é€Ÿåº¦) åœ¨ç»§æ‰¿å…³ç³»å›¾ä¸­æœ‰äº”ä¸ªç±»,å…¶ä¸­å››ä¸ªè¡¨ç¤ºå››ç§ç±»å‹çš„åŒæ­¥æœåŠ¡å™¨: æ³¨æ„UnixDatagramServer ç»§æ‰¿äº UDPServer, è€Œä¸æ˜¯ UnixStreamServerâ€“IP å’Œ Unix æœåŠ¡å™¨ä¹‹é—´çš„å”¯ä¸€åŒºåˆ«æ˜¯åœ°å€æ—,è¿™åœ¨ä¸¤ä¸ª Unix æœåŠ¡å™¨ç±»ä¸­éƒ½æ˜¯é‡å¤çš„. å¯ä»¥ä½¿ç”¨FrokingMixIn å’ŒThreadingMixIn æ··åˆç±»åˆ›å»ºæ¯ç§ç±»å‹æœåŠ¡å™¨çš„è¿›ç¨‹å’Œçº¿ç¨‹ç‰ˆæœ¬.ä¾‹å¦‚,åˆ›å»ºä¸€ä¸ªçº¿ç¨‹ UDP æœåŠ¡å™¨å¦‚ä¸‹æ‰€ç¤º: 12class ThreadingUDPServer(ThreadingMixIn, UDPServer): pass æ··åˆç±»å¿…é¡»é¦–å…ˆå‡ºç°,å› ä¸ºå®ƒè¦†ç›–äº† UDPServer ä¸­å®šä¹‰çš„æ–¹æ³•,è®¾ç½®å„ç§æˆå‘˜å˜é‡è¿˜ä¼šæ”¹å˜åº•å±‚æœåŠ¡å™¨æœºåˆ¶çš„è¡Œä¸º. è¦å®ç°æœåŠ¡,å¿…é¡»ä» BaseRequestHandler æ´¾ç”Ÿä¸€ä¸ªç±»,å¹¶é‡æ–°å®šä¹‰å®ƒçš„ handle() æ–¹æ³•.ç„¶å,ä½ å¯ä»¥é€šè¿‡å°†ä¸€ä¸ªæœåŠ¡å™¨ç±»ä¸è¯·æ±‚å¤„ç†ç¨‹åºç±»ç»„åˆåœ¨ä¸€èµ·æ¥è¿è¡ŒæœåŠ¡çš„ä¸åŒç‰ˆæœ¬. å¯¹äºæ•°æ®æŠ¥æˆ–æµå¼æœåŠ¡å™¨,è¯·æ±‚å¤„ç†ç¨‹åºç±»å¿…é¡»æ˜¯ä¸åŒçš„.è¿™å¯ä»¥é€šè¿‡ä½¿ç”¨è¯·æ±‚å¤„ç†ç¨‹åºå­ç±» StreamRequestHandler æˆ– DatagramRequestHandler ç±»æ¥éšè—. å½“ç„¶,ä½ è¿˜å¾—åŠ¨åŠ¨è„‘å­. ä¾‹å¦‚,å¦‚æœæœåŠ¡åœ¨å†…å­˜ä¸­åŒ…å«å¯ä»¥ç”±è¯·æ±‚ä¿®æ”¹çš„çŠ¶æ€,é‚£ä¹ˆä½¿ç”¨è¿›ç¨‹æœåŠ¡å™¨æ˜¯æ²¡æœ‰æ„ä¹‰çš„(å› ä¸ºå­è¿›ç¨‹ä¸­çš„ä¿®æ”¹æ°¸è¿œä¸ä¼šè¾¾åˆ°çˆ¶è¿›ç¨‹ä¸­ä¿ç•™å¹¶ä¼ é€’ç»™æ¯ä¸ªå­è¿›ç¨‹çš„åˆå§‹çŠ¶æ€).åœ¨è¿™ç§æƒ…å†µä¸‹,ä½ å¯ä»¥ä½¿ç”¨çº¿ç¨‹åŒ–æœåŠ¡å™¨,ä½†æ˜¯ä½ å¯èƒ½å¿…é¡»ä½¿ç”¨é”æ¥é¿å…å‡ ä¹åŒæ—¶å‡ºç°çš„ä¸¤ä¸ªè¯·æ±‚,ä»¥å¯¹æœåŠ¡å™¨çŠ¶æ€åº”ç”¨å†²çªæ›´æ”¹. å¦ä¸€æ–¹é¢,å¦‚æœä½ æ­£åœ¨æ„å»ºä¸€ä¸ª HTTP æœåŠ¡å™¨,å…¶ä¸­æ‰€æœ‰æ•°æ®éƒ½å­˜å‚¨åœ¨å¤–éƒ¨(ä¾‹å¦‚æ–‡ä»¶ç³»ç»Ÿä¸­),åŒæ­¥ç±»æœ¬è´¨ä¸Šæ˜¯åœ¨å¤„ç†ä¸€ä¸ªè¯·æ±‚æ—¶ä½¿æœåŠ¡â€™å¬ä¸è§â€™,å¦‚æœå®¢æˆ·ç«¯è¯»å–å…¶è¯·æ±‚çš„æ‰€æœ‰æ•°æ®å¾ˆæ…¢,é‚£ä¹ˆè¿™ç§æƒ…å†µå¯èƒ½ä¼šæŒç»­å¾ˆé•¿æ—¶é—´,åœ¨è¿™é‡Œ,çº¿ç¨‹æˆ–è¿›ç¨‹æœåŠ¡å™¨æ˜¯åˆé€‚çš„. åœ¨æŸäº›æƒ…å†µä¸‹,åŒæ­¥çš„å¤„ç†è¯·æ±‚çš„ä¸€éƒ¨åˆ†å¯èƒ½æ˜¯åˆé€‚çš„,ä½†æ ¹æ®è¯·æ±‚æ•°æ®åœ¨è¿›ç¨‹å­èŠ‚ç‚¹ä¸­å®Œæˆå¤„ç†å¯èƒ½æ˜¯åˆé€‚çš„.è¿™å¯ä»¥é€šè¿‡ä½¿ç”¨åŒæ­¥æœåŠ¡å™¨å’Œåœ¨è¯·æ±‚å¤„ç†ç¨‹åºç±» handle() æ–¹æ³•ä¸­æ‰§è¡Œæ˜¾å¼è¿›åŸæ¥å®ç°. å¤„ç†å¤šä¸ªåŒæ—¶è¯·æ±‚çš„å¦ä¸€ç§æ–¹æ³•æ—¢ä¸æ”¯æŒçº¿ç¨‹ä¹Ÿä¸æ”¯æŒè¿›ç¨‹çš„ç¯å¢ƒ(è¿™äº›ç¯å¢ƒå¤ªæ˜‚è´µæˆ–ä¸é€‚åˆæœåŠ¡)æ˜¯ç»´æŒä¸€ä¸ªéƒ¨åˆ†å®Œæˆçš„è¯·æ±‚çš„æ˜¾å¼è¡¨å’Œä½¿ç”¨é€‰æ‹©å™¨å†³å®šä¸‹ä¸€ä¸ªè¦å¤„ç†çš„è¯·æ±‚(æˆ–è€…æ˜¯å¦å¤„ç†æ–°çš„è¯·æ±‚)å¯¹å¯¹æµæœåŠ¡å°¤ä¸ºé‡è¦.æ¯ä¸ªå®¢æˆ·ç«¯å¯èƒ½é•¿æ—¶é—´è¿æ¥çš„åœ°æ–¹.(å¦‚æœçº¿ç¨‹æˆ–å­çº¿ç¨‹ä¸èƒ½ä½¿ç”¨) æœªæ¥çš„å·¥ä½œ: â€‹ Sun RPC çš„æ ‡å‡†ç±»(ä½¿ç”¨ TCP æˆ– UDP) â€‹ æ ‡å‡†æ··åˆç±»å®ç°å„ç§èº«ä»½éªŒè¯ æ€»ç»“: ä¸Šé¢çš„ç¿»è¯‘æ˜¯ socketserver çš„æ³¨é‡Šç¿»è¯‘,èƒ½å¤Ÿæ˜¯æˆ‘ä»¬å¤§è‡´äº†è§£è¯¥æ¨¡å—çš„å·¥ä½œæµç¨‹.é‚£ä¹ˆå½“æˆ‘ä»¬è‡ªå®šä¹‰è‡ªå·±çš„ç±»æ˜¯å¦‚ä½•è¿›è¡Œå®ä¾‹åŒ–å¾—å‘¢? ç»“åˆæºç æŸ¥çœ‹è‡ªå®šä¹‰ç±»çš„æ­¥éª¤è¯¥æ¨¡å—åˆ†ä¸ºä¸¤å¤§ç±»: server ç±»(è§£å†³è¿æ¥é—®é¢˜)å’Œ request ç±»(è§£å†³é€šä¿¡é—®é¢˜) server ç±»ç»§æ‰¿å…³ç³»: request ç±»ç»§æ‰¿å…³ç³»: æ€»ç»“ç»§æ‰¿å…³ç³»: ä»¥ä¸‹è¿°ä»£ç ä¸ºä¾‹,åˆ†æ socketserver æºç : æœåŠ¡ç«¯ 12345678910111213141516171819202122232425262728293031323334353637383940414243import socketserverimport jsonimport structimport osclass FtpServer(socketserver.BaseRequestHandler): coding = 'utf-8' server_dir = 'file_upload' max_packet_size = 1024 BASE_DIR = os.path.dirname(os.path.abspath(__file__)) def handle(self): print(self.request) while True: data = self.request.recv(4) data_len = struct.unpack('i', data)[0] head_json = self.request.recv(data_len).decode(self.coding) head_dic = json.loads(head_json) cmd = head_dic['cmd'] if hasattr(self, cmd): func = getattr(self, cmd) func(head_dic) def put(self, args): file_path = os.path.normpath(os.paht.join( self.BASE_DIR, self.server_dir, args['filename'])) filesize = args['filesize'] recv_size = 0 print('----&gt;', file_path) with open(file_path, 'wb') as f: while recv_size &lt; filesize: recv_data = self.request.recv(self.max_packet_size) f.write(recv_data) recv_size += len(recv_size) print('recvsize: %s filessize: %s' % (recv_size, filesize))ftpserver = socketserver.ThreadingTCPServer(('', 8080), FtpServer)ftpserver.serve_forever() å®¢æˆ·ç«¯ 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667686970import socketimport structimport jsonimport osclass MyTCPClient: address_family = socket.AF_INET socket_type = socket.SOCK_STREAM allow_reuse_address = False max_packet_size = 8192 coding = 'utf-8' request_queue_size = 5 def __init__(self, server_address, connect=True): self.server_address = server_address self.socket = socket.socket(self.address_family, self.socket_type) if connect: try: self.client_connect() except: self.client_close() raise def client_connect(self): self.socket.connect(self.server_address) def client_close(self): self.socket.close() def run(self): while True: inp = input('&gt;&gt;&gt;:').strip() if not inp: continue l = inp.split() cmd = l[0] if hasattr(self, cmd): func = getattr(self, cmd) func(l) def put(self, args): cmd = args[0] filename = args[1] if not os.path.isfile(filename): print('file: %s is not exist' % filenam) return else: filesize = os.path.getsize(filename) head_dic = &#123;'cmd': cmd, 'filename': os.path.basename(filename), 'filesize': filesize&#125; print(head_dic) head_json = json.dumps(head_dic) head_json_bytes = bytes(head_json, encoding=self.coding) head_struct = struct.pack('i', len(head_json_bytes)) self.scoket.send(head_struct) self.socket.send(head_json_bytes) send_size = 0 with open(filename, 'rb') as f: for line im f: self.socket.send(line) send_size += len(line) print(send_size) else: print('upload successful') client = MyTCPClient(('', 8080))client.run() ä»¥ä¸Šè¿°ä»£ç ä¸ºä¾‹,åˆ†æ socketserveræºç : 12ftpserver = socketserver.ThreadingTCPServer(('', 8080))ftpserver.serve_forever() æŸ¥æ‰¾å±æ€§çš„é¡ºåºå¯ä»¥ä»ä¸Šé¢ç¬¬ä¸‰ä¸ªç»§æ‰¿å›¾å¾—åˆ°ç­”æ¡ˆ: 1ThreadingTCPServer-&gt;ThreadingMixIn-&gt;TCPServer-&gt;BaseServer å®ä¾‹åŒ–å¾—åˆ° ftpserver, å…ˆæŸ¥æ‰¾ ThreadingTCPServer çš„åˆå§‹åŒ–æ–¹æ³•,å‘ç°å·¦ç»§æ‰¿çš„ ThreadingMixIn æ²¡æœ‰åˆå§‹åŒ–æ–¹æ³•,äºæ˜¯åœ¨ TCPServer ä¸­æ‰¾åˆ°,ç„¶åæ‰§è¡Œself.server_bindå’Œ self.server_activate æ–¹æ³•; åˆå§‹åŒ–æˆåŠŸåæ‰§è¡Œftpserver.serve_forever,å‘ç°åœ¨ ThreadingMixInå’Œ TCPServer ä¸­éƒ½æ²¡æœ‰,äºæ˜¯åªå¥½å» BaseServer ä¸­æ‰¾åˆ°å¹¶æ‰§è¡Œ serve_forever,è¿›è€Œæ‰§è¡Œ self._handle_request_noblock(),è¯¥æ–¹æ³•åŒæ ·åœ¨ BaseServer ä¸­ æ‰§è¡Œself_handle_request_noblock()è¿›è€Œæ‰§è¡Œ request,client_address = self.get_request(),åœ¨è¿™é‡Œå‘ç°åœ¨ TCPServer ä¸­æœ‰è¯¥æ–¹æ³•,äºæ˜¯æ‰§è¡Œè¿™ä¸ªæ–¹æ³• æ‰§è¡Œ self.socket.accept(),å‘ç°è¯¥æ–¹æ³•åœ¨ socket ä¸­,ç„¶åæ‰§è¡Œ self.process_address(request, client_address) åœ¨ ThreadingMixIn ä¸­æ‰¾åˆ°process_request, å¼€å¯å¤šçº¿ç¨‹åº”å¯¹å¹¶å‘,è¿›è€Œæ‰§è¡Œprocess_request_thread,æ‰§è¡Œ self.finish_request(request, client_address) ä¸Šè¿°å››éƒ¨åˆ†å®Œæˆäº†è¿æ¥å¾ªç¯,æ¥ä¸‹æ¥è¿›å…¥å¤„ç†é€šä¿¡éƒ¨åˆ†,åœ¨ BaseServer ä¸­æ‰¾åˆ° finish_request,è§¦å‘æˆ‘ä»¬å®šä¹‰çš„ç±»çš„å®ä¾‹åŒ–å¹¶åˆå§‹åŒ–ä¸€ä¸ªå¯¹è±¡,å› ä¸ºè‡ªå·±å®šä¹‰çš„ç±»ä¸­ä¸­æ²¡æœ‰è¯¥æ–¹æ³•,åˆ™ä¾æ®ç»§æ‰¿å…³ç³»è®¡ç®—å‡ºçš„ MRO åˆ—è¡¨æŸ¥æ‰¾å±æ€§ æºç åˆ†ææ€»ç»“: åŸºäº TCP çš„ socketserver å®šä¹‰å‡ºçš„ç±»: self.server å³å¥—æ¥å­—å¯¹è±¡; self.request å³ä¸€ä¸ªè¿æ¥; self.client_addresså³å®¢æˆ·ç«¯åœ°å€ åŸºäº UDP çš„ socketserver å®šä¹‰å‡ºçš„ç±»: self.request æ˜¯ä¸€ä¸ªå…ƒç¥–(ç¬¬ä¸€ä¸ªå…ƒç´ æ˜¯å®¢æˆ·ç«¯å‘æ¥çš„æ•°æ®,ç¬¬äºŒéƒ¨åˆ†æ˜¯æœåŠ¡ç«¯çš„ udp å¥—æ¥å­—å¯¹è±¡),å¦‚(bâ€™musibiiâ€™, &lt;socket.socket fd=200, family=AddressFamily.AF_INET, type=SocketKind.SOCK_DGRAM, proto=0, laddr=(â€˜127.0.0.1â€™, 8080)&gt;); self.client_address å³å®¢æˆ·ç«¯åœ°å€. æ€»ç»“æœ¬æ–‡æŸ¥çœ‹äº†ä¸€ä¸‹ socketserver æ¨¡å—çš„æºç ,å¤§è‡´çš„å®ä¾‹åŒ–å¯¹è±¡çš„æ­¥éª¤å’Œä¸»è¦è¿è¡Œæµç¨‹å·®ä¸å¤šææ¸…æ¥šäº†,ä½†æ˜¯æœ‰äº›åœ°æ–¹è¿˜æ˜¯éœ€è¦ä»”ç»†ç¢ç£¨çš„,æ¯”å¦‚ç¬¬äº”æ­¥æ€ä¹ˆä¸€ä¸‹å°±åˆ°å¼€å¯å¤šçº¿ç¨‹å®ç°å¹¶å‘äº†. æ€»çš„æ¥è¯´,æŸ¥çœ‹æºç è¿˜æ˜¯æœ‰ç‚¹ç”¨çš„,è€Œä¸”è¯¥æ¨¡å—çš„ç»§æ‰¿ä¹Ÿå¯¹ä¹‹å‰å­¦ä¹ çš„ç»§æ‰¿çŸ¥è¯†è¿›è¡Œäº†è¡¥å……,ç‰¹åˆ«æ˜¯æ ¹æ®ç»§æ‰¿è§£æå‡ºæ¥çš„( MRO)åˆ—è¡¨,è¿™ä¸ªåˆ—è¡¨æ˜¯ç±»ä¸­å±æ€§çš„æŸ¥æ‰¾é¡ºåºè¡¨,å’Œæ˜¯å¦ç›´æ¥ç»§æ‰¿æ²¡æœ‰å…³ç³».]]></content>
      <categories>
        <category>socketserveræºç æ¢æ</category>
      </categories>
  </entry>
  <entry>
    <title><![CDATA[å¹¶å‘ç¼–ç¨‹(ä¸€)]]></title>
    <url>%2F2018%2F11%2F11%2F%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B-%E4%B8%80%2F</url>
    <content type="text"><![CDATA[å‰è¨€è¯¥ç³»åˆ—ä¸ºå¹¶å‘ç¼–ç¨‹,åœ¨å‡ ä¹æ‰€æœ‰çš„ç¼–ç¨‹è¯­è¨€ä¸­,å¹¶å‘å§‹ç»ˆæ˜¯ç»•ä¸å¼€çš„å,å¯ä»¥è¯´å­¦ä¹ ä¸€é—¨ç¼–ç¨‹è¯­è¨€,å­¦å¥½äº†å¹¶å‘å°±è¯´æ˜è¿™é—¨è¯­è¨€ä½ å­¦çš„è¿˜å¯ä»¥.æ‰€ä»¥æ¥ä¸‹æ¥å°±è®©æˆ‘ä»¬å¥½å¥½çœ‹çœ‹ python çš„å¹¶å‘æ˜¯æ€ä¹ˆå®ç°çš„å§. åœ¨å­¦ä¹ å¹¶å‘ä¹‹å‰,æœ‰å¿…è¦å­¦ä¹ ä¸€ä¸‹è®¡ç®—æœºæ“ä½œç³»ç»Ÿå‘å±•å²,å› ä¸ºå¯ä»¥å®ç°å¹¶å‘å¯æ“ä½œç³»ç»Ÿçš„å‘å±•æ˜¯åˆ†ä¸å¼€çš„. æ“ä½œç³»ç»Ÿå‘å±•å²æ“ä½œç³»ç»Ÿçš„å‘å±•å²åœ¨æŸç§æ„ä¹‰ä¸Šæ¥è¯´ä¹Ÿæ˜¯è®¡ç®—æœºçš„å‘å±•å².æ“ä½œç³»ç»Ÿæä¾›å¯¹ç¡¬ä»¶æ§åˆ¶çš„è°ƒç”¨å’Œåº”ç”¨ç¨‹åºæ‰€å¿…éœ€çš„åŠŸèƒ½. èƒŒæ™¯æ—©æœŸçš„è®¡ç®—æœºæ²¡æœ‰æ“ä½œç³»ç»Ÿ.åªæœ‰å•ç‹¬çš„æœºå™¨,æ“ä½œè€…ä¼šå¸¦ç€è®°å½•æœ‰ç¨‹åºå’Œæ•°æ®çš„å¡ç‰‡æˆ–è¾ƒåæœŸçš„æ‰“å­”çº¸å¸¦å»æ“ä½œæœºå™¨.ç¨‹åºè¯»å…¥æœºå™¨å,æœºå™¨å°±å¼€å§‹å·¥ä½œç›´åˆ°ç¨‹åºåœæ­¢.ç”±äºç¨‹åºéš¾å…æœ‰è¯¯,æ‰€ä»¥æœºå™¨é€šå¸¸éƒ½ä¼šä¸­é€”å´©æºƒ.ç¨‹åºä¸€èˆ¬é€šè¿‡æ§åˆ¶æ¿çš„å¼€å…³å’ŒçŠ¶æ€ç¯æ¥è°ƒè¯•. åæ¥,æœºå™¨å¼•å…¥å¸®åŠ©ç¨‹åºè¾“å…¥è¾“å‡ºç­‰å·¥ä½œçš„ä»£ç åº“.è¿™æ˜¯ç°ä»£æ“ä½œç³»ç»Ÿçš„èµ·æº.ç„¶è€Œ,æœºå™¨æ¯æ¬¡åªèƒ½æ‰§è¡Œä¸€ä¸ªä»»åŠ¡.åœ¨è‹±å›½å‰‘æ¡¥å¤§å­¦,è¿™äº›ä»»åŠ¡çš„ç£ä»å‰æ˜¯æ’æˆä¸€æ’æŒ‚åœ¨è¡£é’©ä¸Šçš„,è¡£é’©çš„é¢œè‰²ä»£è¡¨ä»»åŠ¡çš„ä¼˜å…ˆçº§. æ¦‚å¿µæ„ä¹‰ä¸Šçš„æ“ä½œç³»ç»Ÿå’Œé€šä¿—æ„ä¹‰ä¸Šçš„æ“ä½œç³»ç»Ÿå·®è·è¶Šæ¥è¶Šå¤§.é€šä¿—æ„ä¹‰ä¸Šçš„æ“ä½œç³»ç»Ÿä¸ºäº†æ–¹ä¾¿è€ŒæŠŠæœ€æ™®é€šçš„åŒ…å’Œåº”ç”¨ç¨‹åºçš„é›†åˆåŒ…æ‹¬åœ¨æ“ä½œç³»ç»Ÿå†….éšç€æ“ä½œç³»ç»Ÿçš„å‘å±•,ä¸€äº›åŠŸèƒ½æ›´å¼ºçš„â€™ç¬¬äºŒç±»â€™æ“ä½œç³»ç»Ÿè½¯ä»¶ä¹Ÿè¢«åŒ…æ‹¬è¿›å».åœ¨ä»Šå¤©,æ²¡æœ‰å›¾å½¢ç•Œé¢å’Œå„ç§æ–‡ä»¶æµè§ˆå™¨å·²ç»ä¸èƒ½ç§°ä¹‹ä¸ºä¸€ä¸ªçœŸæ­£çš„é€šä¿—æ„ä¹‰ä¸Šçš„æ“ä½œç³»ç»Ÿ,ä½†äº‹å®ä¸Š,è¿è¡Œåœ¨æ•°æ®ä¸­å¿ƒå’ŒæœåŠ¡å™¨ç­‰é¢†åŸŸçš„æ“ä½œç³»ç»Ÿå¾€å¾€æ˜¯æ²¡æœ‰å›¾å½¢ç•Œé¢çš„. ç¬¬ä¸€ä»£è®¡ç®—æœº(1940~1955):çœŸç©ºç®¡å’Œç©¿å­”å¡ç‰‡ç¬¬ä¸€ä»£ä¹‹å‰äººç±»æ˜¯æƒ³ç”¨æœºæ¢°å–ä»£äººåŠ›ï¼Œç¬¬ä¸€ä»£è®¡ç®—æœºçš„äº§ç”Ÿæ˜¯è®¡ç®—æœºç”±æœºæ¢°æ—¶ä»£è¿›å…¥ç”µå­æ—¶ä»£çš„æ ‡å¿—ï¼Œä»Babbageå¤±è´¥ä¹‹åä¸€ç›´åˆ°ç¬¬äºŒæ¬¡ä¸–ç•Œå¤§æˆ˜ï¼Œæ•°å­—è®¡ç®—æœºçš„å»ºé€ å‡ ä¹æ²¡æœ‰ä»€ä¹ˆè¿›å±•ï¼Œç¬¬äºŒæ¬¡ä¸–ç•Œå¤§æˆ˜åˆºæ¿€äº†æœ‰å…³è®¡ç®—æœºç ”ç©¶çš„çˆ†ç‚¸æ€§è¿›å±•ã€‚ lowaå·ç«‹å¤§å­¦çš„john Atanasoffæ•™æˆå’Œä»–çš„å­¦ç”ŸClifford Berryå»ºé€ äº†æ®è®¤ä¸ºæ˜¯ç¬¬ä¸€å°å¯å·¥ä½œçš„æ•°å­—è®¡ç®—æœºã€‚è¯¥æœºå™¨ä½¿ç”¨300ä¸ªçœŸç©ºç®¡ã€‚å¤§çº¦åœ¨åŒæ—¶ï¼ŒKonrad Zuseåœ¨æŸæ—ç”¨ç»§ç”µå™¨æ„å»ºäº†Z3è®¡ç®—æœºï¼Œè‹±æ ¼å…°å¸ƒè±åˆ‡åˆ©å›­çš„ä¸€ä¸ªå°ç»„åœ¨1944å¹´æ„å»ºäº†Colossusï¼ŒHoward Aikenåœ¨å“ˆä½›å¤§å­¦å»ºé€ äº†Mark 1ï¼Œå®¾å¤•æ³•å°¼äºšå¤§å­¦çš„William Mauchleyå’Œä»–çš„å­¦ç”ŸJ.Presper Eckertå»ºé€ äº†ENIACã€‚è¿™äº›æœºå™¨æœ‰çš„æ˜¯äºŒè¿›åˆ¶çš„ï¼Œæœ‰çš„ä½¿ç”¨çœŸç©ºç®¡ï¼Œæœ‰çš„æ˜¯å¯ç¼–ç¨‹çš„ï¼Œä½†éƒ½éå¸¸åŸå§‹ï¼Œè®¾ç½®éœ€è¦èŠ±è´¹æ•°ç§’é’Ÿæ—¶é—´æ‰èƒ½å®Œæˆæœ€ç®€å•çš„è¿ç®—ã€‚ åœ¨è¿™ä¸ªæ—¶æœŸï¼ŒåŒä¸€ä¸ªå°ç»„é‡Œçš„å·¥ç¨‹å¸ˆä»¬ï¼Œè®¾è®¡ã€å»ºé€ ã€ç¼–ç¨‹ã€æ“ä½œåŠç»´æŠ¤åŒä¸€å°æœºå™¨ï¼Œæ‰€æœ‰çš„ç¨‹åºè®¾è®¡æ˜¯ç”¨çº¯ç²¹çš„æœºå™¨è¯­è¨€ç¼–å†™çš„ï¼Œç”šè‡³æ›´ç³Ÿç³•ï¼Œéœ€è¦é€šè¿‡æˆåƒä¸Šä¸‡æ ¹ç”µç¼†æ¥åˆ°æ’ä»¶æ¿ä¸Šè¿æˆç”µè·¯æ¥æ§åˆ¶æœºå™¨çš„åŸºæœ¬åŠŸèƒ½ã€‚æ²¡æœ‰ç¨‹åºè®¾è®¡è¯­è¨€ï¼ˆæ±‡ç¼–ä¹Ÿæ²¡æœ‰ï¼‰ï¼Œæ“ä½œç³»ç»Ÿåˆ™æ˜¯ä»æ¥éƒ½æ²¡å¬è¯´è¿‡ã€‚ ç¬¬äºŒä»£è®¡ç®—æœº(1955~1965):æ™¶ä½“ç®¡å’Œæ‰¹å¤„ç†ç³»ç»Ÿç”±äºå½“æ—¶çš„è®¡ç®—æœºéå¸¸æ˜‚è´µ,è‡ªè®¤å¾ˆè‡ªç„¶çš„æƒ³åŠæ³•å‡å°‘è®¡ç®—æœºè¿è¡Œæ—¶é—´çš„æµªè´¹.é€šå¸¸é‡‡ç”¨çš„å°±æ˜¯æ‰¹å¤„ç†ç³»ç»Ÿ. ç‰¹ç‚¹:è®¾è®¡äººå‘˜ã€ç”Ÿäº§äººå‘˜ã€æ“ä½œäººå‘˜ã€ç¨‹åºäººå‘˜å’Œç»´æŠ¤äººå‘˜ç›´æ¥æœ‰äº†æ˜ç¡®çš„åˆ†å·¥ï¼Œè®¡ç®—æœºè¢«é”åœ¨ä¸“ç”¨ç©ºè°ƒæˆ¿é—´ä¸­ï¼Œç”±ä¸“ä¸šæ“ä½œäººå‘˜è¿è¡Œï¼Œè¿™ä¾¿æ˜¯â€˜å¤§å‹æœºâ€™,æœ‰äº†æ“ä½œç³»ç»Ÿçš„æ¦‚å¿µ. æœ‰äº†ç¨‹åºè®¾è®¡è¯­è¨€ï¼šFORTRANè¯­è¨€æˆ–æ±‡ç¼–è¯­è¨€ï¼Œå†™åˆ°çº¸ä¸Šï¼Œç„¶åç©¿å­”æ‰“æˆå¡ç‰‡ï¼Œå†è®²å¡ç‰‡ç›’å¸¦åˆ°è¾“å…¥å®¤ï¼Œäº¤ç»™æ“ä½œå‘˜ï¼Œç„¶åå–ç€å’–å•¡ç­‰å¾…è¾“å‡ºæ¥å£. å·¥ä½œè¿‡ç¨‹: ç¬¬äºŒä»£è®¡ç®—æœºè§£å†³äº†ç¬¬ä¸€ä»£è®¡ç®—æœºçš„ä¸€äº›é—®é¢˜: æŠŠä¸€ä¸ªäººçš„è¾“å…¥æ”¹ä¸ºæ‰¹é‡è¾“å…¥; ç„¶åé¡ºåºè®¡ç®—(è¿™ä¸ªä»ç„¶æœ‰é—®é¢˜); æŠŠä¸€ä¸ªäººçš„è¾“å‡ºæ”¹ä¸ºæ‰¹é‡è¾“å‡º. ä¼˜ç‚¹:å› ä¸ºæ˜¯æ‰¹å¤„ç†ç³»ç»Ÿ,èŠ‚çœäº†è®¡ç®—æœºçš„ä½¿ç”¨æ—¶é—´,å¢åŠ çš„è®¡ç®—æœºçš„ä½¿ç”¨æ•ˆç‡; ç¼ºç‚¹: æ•´ä¸ªæµç¨‹éœ€è¦äººå‚ä¸æ§åˆ¶,å°†ç£å¸¦æ¬æ¥æ¬å»; è®¡ç®—çš„è¿‡ç¨‹ä»ç„¶æ˜¯é¡ºåºè®¡ç®—-&gt;ä¸²è¡Œ; ç¨‹åºå‘˜åŸæ¥ç‹¬äº«ä¸€æ®µæ—¶é—´çš„è®¡ç®—æœº,ç°åœ¨å¿…é¡»è¢«ç»Ÿä¸€è§„åˆ’åˆ°ä¸€æ‰¹ä½œä¸šä¸­,ç­‰å¾…ç»“æœå’Œé‡æ–°è°ƒè¯•çš„è¿‡ç¨‹éƒ½éœ€è¦ç­‰åŒæ‰¹æ¬¡çš„å…¶ä»–ç¨‹åºéƒ½è¿è¡Œå®Œæ‰å¯ä»¥æ¥ç€ä½¿ç”¨. ç¬¬ä¸‰ä»£è®¡ç®—æœº(1965~1980):é›†æˆç”µè·¯èŠ¯ç‰‡å’Œå¤šé“ç¨‹åºè®¾è®¡åœ¨ç¬¬ä¸‰é“è®¡ç®—æœºçš„æ“ä½œç³»ç»Ÿå¹¿æ³›çš„åº”ç”¨äº†ç¬¬äºŒä»£è®¡ç®—æœºçš„æ“ä½œç³»ç»Ÿæ²¡æœ‰çš„å…³é”®æŠ€æœ¯:å¤šé“æŠ€æœ¯. å¤šé“ç¨‹åºè®¾è®¡æŠ€æœ¯å°±æ˜¯æŒ‡å…è®¸å¤šä¸ªç¨‹åºåŒæ—¶è¿›å…¥å†…å­˜å¹¶è¿è¡Œ.å³åŒæ—¶æŠŠå¤šä¸ªç¨‹åºæ”¾å…¥å†…å­˜,å¹¶å…è®¸ä»–ä»¬äº¤æ›¿åœ¨ CPU ä¸­è¿è¡Œ,å®ƒä»¬å…±äº«ç³»ç»Ÿä¸­çš„å„ç§ç¡¬,è½¯ä»¶èµ„æº.å½“ä¸€é“ç¨‹åºå›  I/O è¯·æ±‚è€Œæš‚åœè¿è¡Œæ—¶, CPU ä¾¿ç«‹å³è½¬å»è¿è¡Œå¦ä¸€é“ç¨‹åº. å¤šé“æŠ€æœ¯: â€‹ å¤šé“æŠ€æœ¯ä¸­çš„å¤šé“æŒ‡çš„æ˜¯å¤šä¸ªç¨‹åº,å¤šé“æŠ€æœ¯çš„å®ç°æ˜¯ä¸ºäº†è§£å†³å¤šä¸ªç¨‹åºç«äº‰æˆ–è€…è¯´å…±äº«åŒä¸€ä¸ªèµ„æº(æ¯”å¦‚ CPU)çš„æœ‰åºè°ƒåº¦é—®é¢˜,è§£å†³æ–¹å¼å³å¤šè·¯å¤ç”¨,å¤šè·¯å¤ç”¨åˆ†ä¸ºæ—¶é—´å’Œç©ºé—´çš„å¤ç”¨. ç©ºé—´å¤ç”¨: â€‹ å°†å†…å­˜åˆ†ä¸ºå‡ éƒ¨åˆ†,æ¯ä¸ªéƒ¨åˆ†æ”¾å…¥ä¸€ä¸ªç¨‹åº,è¿™æ ·,åŒä¸€æ—¶é—´å†…å†…å­˜ä¸­å°±æœ‰äº†å¤šé“ç¨‹åº. æ—¶é—´å¤ç”¨: â€‹ å½“ä¸€ä¸ªç¨‹åºåœ¨ç­‰å¾… I/O æ—¶,å¦ä¸€ä¸ªç¨‹åºå¯ä»¥ä½¿ç”¨ CPU, å¦‚æœå†…å­˜ä¸­å¯ä»¥åŒæ—¶å­˜æ”¾è¶³å¤Ÿå¤šçš„ä»»åŠ¡,åˆ™ CPU çš„åˆ©ç”¨ç‡å¯ä»¥æ¥è¿‘100%.æ“ä½œç³»ç»Ÿé‡‡ç”¨äº†å¤šé“æŠ€æœ¯å,å¯ä»¥æ§åˆ¶è¿›ç¨‹çš„åˆ‡æ¢,æˆ–è€…è¯´è¿›ç¨‹ä¹‹é—´å»äº‰æŠ¢CPU çš„æ‰§è¡Œæƒé™.è¿™ç§åˆ‡æ¢ä¸ä»…ä¼šåœ¨ä¸€ä¸ªè¿›ç¨‹é‡åˆ° I/O æ—¶è¿›è¡Œ,ä¸€ä¸ªè¿›ç¨‹å ç”¨ CPU æ—¶é—´è¿‡é•¿ä¹Ÿä¼šåˆ‡æ¢,æˆ–è€…è¯´è¢«æ“ä½œç³»ç»Ÿå¤ºèµ° CPU çš„æ‰§è¡Œæƒé™. è¯¦è§£: â€‹ ç°ä»£è®¡ç®—æœºæˆ–è€…ç½‘ç»œéƒ½æ˜¯æ”¯æŒå¤šç”¨æˆ·ç™»å½•çš„,å¤šä¸ªç”¨æˆ·ä¸ä»…å…±äº«ç¡¬ä»¶,è€Œä¸”å…±äº«æ–‡ä»¶,æ•°æ®åº“ç­‰ä¿¡æ¯,å…±äº«æ„å‘³ç€ä¼šå‘ç”Ÿå†²çªå’Œè¿è¡Œæ— åº. æ“ä½œç³»ç»Ÿçš„ä¸»è¦ä½œç”¨ä¸º: è®°å½•å“ªä¸ªç¨‹åºä½¿ç”¨ä»€ä¹ˆèµ„æº; å¯¹èµ„æºè¯·æ±‚è¿›è¡Œåˆ†é…; ä¸ºä¸åŒçš„ç¨‹åºå’Œç”¨æˆ·è°ƒè§£äº’ç›¸å†²çªçš„èµ„æºè¯·æ±‚. æˆ‘ä»¬å°†ä¸Šè¿°æ“ä½œç³»ç»Ÿçš„åŠŸèƒ½æ€»ç»“ä¸º:å¤„ç†æ¥è‡ªå¤šä¸ªç¨‹åºå‘èµ·çš„å¤šä¸ª(å¤šä¸ªå³å¤šè·¯)å…±äº«(å…±äº«å³å¤ç”¨)èµ„æºçš„è¯·æ±‚,ç®€ç§°å¤šè·¯å¤ç”¨. åœ¨ç©ºé—´å¤ç”¨ä¸Šçš„é—®é¢˜ä¸º:ç¨‹åºä¹‹é—´çš„å†…å­˜å¿…é¡»éš”ç¦»,è¿™ç§éš”ç¦»éœ€è¦åœ¨ç¡¬ä»¶å±‚é¢ä¸Šå®ç°,ç”±æ“ä½œç³»ç»Ÿæ§åˆ¶.å¦‚æœå†…å­˜å½¼æ­¤ä¸åˆ†å‰²,åˆ™ä¸€ä¸ªç¨‹åºå¯ä»¥è®¿é—®å¦å¤–ä¸€ä¸ªç¨‹åºçš„å†…å­˜,è¿™æ ·ä¸€æ¥å°±ä¼šäº§ç”Ÿåº”ç”¨ç¨‹åºçš„æ•°æ®ä¸å®‰å…¨,æ¯”å¦‚ä½ çš„ qq ç¨‹åºå¯ä»¥è®¿é—®æ“ä½œç³»ç»Ÿçš„å†…å­˜,è¿™æ„å‘³ç€ qq å¯ä»¥æ‹¿åˆ°æ“ä½œç³»ç»Ÿçš„æ‰€æœ‰æƒé™.å…¶æ¬¡ä¸§å¤±çš„æ˜¯ç¨³å®šæ€§,æŸä¸ªç¨‹åºå´©æºƒæ—¶æœ‰å¯èƒ½æŠŠå…¶ä»–çš„ç¨‹åºçš„å†…å­˜ä¸€èµ·å›æ”¶äº†,æ¯”å¦‚è¯´æŠŠæ“ä½œç³»ç»Ÿçš„å†…å­˜å›æ”¶,åˆ™æ“ä½œç³»ç»Ÿå´©æºƒ. ç¬¬å››ä»£è®¡ç®—æœº(1980~):ä¸ªäººè®¡ç®—æœºæ—¶ä»£å¾®å‹å¤„ç†å™¨çš„å‘å±•ä½¿è®¡ç®—æœºçš„åº”ç”¨æ™®åŠè‡³ä¸­å°ä¼ä¸šåŠä¸ªäººçˆ±å¥½è€…ã€‚è€Œè®¡ç®—æœºçš„æ™®åŠåˆæ¨åŠ¨äº†ç¡¬ä»¶ç»„ä»¶å…¬å…±æ¥å£çš„å‘å±•ï¼ˆå¦‚S-100,SS-50,Apple II,ISAå’ŒPCIæ€»çº¿ï¼‰ï¼Œå¹¶é€æ¸åœ°è¦æ±‚æœ‰ä¸€ç§â€œæ ‡å‡†â€çš„æ“ä½œç³»ç»Ÿå»æ§åˆ¶å®ƒä»¬ã€‚åœ¨è¿™äº›æ—©æœŸçš„è®¡ç®—æœºä¸­ï¼Œä¸»è¦çš„æ“ä½œç³»ç»Ÿæ˜¯8080/8085/Z-80 CPUç”¨çš„CP/M-80ï¼Œå®ƒåˆ›å»ºåœ¨æ•°å­—ç ”ç©¶å…¬å¸(Digital Research)å…ˆå‰å‡ ä¸ªé’ˆå¯¹PDP-11æ¶æ„çš„æ“ä½œç³»ç»Ÿçš„åŸºç¡€ä¸Šã€‚åœ¨æ­¤åŸºç¡€ä¸Šåˆäº§ç”Ÿäº†MS-DOSï¼ˆæˆ–IBMå…¬å¸çš„PC-DOSï¼‰ã€‚è¿™äº›è®¡ç®—æœºåœ¨ROMï¼ˆåªè¯»å­˜å‚¨å™¨ï¼‰éƒ½æœ‰ä¸€ä¸ªå°å°çš„å¯åŠ¨ç¨‹åºï¼Œå¯ä»¥æŠŠæ“ä½œç³»ç»Ÿä»ç£ç›˜è£…è½½åˆ°å†…å­˜ã€‚IBM-PCç³»åˆ—çš„BIOSæ˜¯è¿™ä¸€æ€æƒ³çš„å»¶ä¼¸ã€‚è‡ª1981å¹´ç¬¬ä¸€å°IBM-PCè¯ç”Ÿä»¥æ¥ï¼ŒBIOSçš„åŠŸèƒ½å¾—åˆ°ä¸æ–­åœ°å¢å¼ºã€‚ éšç€æ˜¾ç¤ºè®¾å¤‡å’Œå¤„ç†å™¨æˆæœ¬çš„é™ä½ï¼Œå¾ˆå¤šæ“ä½œç³»ç»Ÿéƒ½å¼€å§‹æä¾›å›¾å½¢ç”¨æˆ·ç•Œé¢ã€‚å¦‚ï¼šè®¸å¤šUNIXæä¾›çš„X Windowä¸€ç±»çš„ç³»ç»Ÿã€å¾®è½¯çš„Windowsç³»ç»Ÿã€è‹¹æœå…¬å¸çš„Mac OSå’ŒIBMå…¬å¸çš„OS/2ç­‰ã€‚æœ€åˆçš„å›¾å½¢ç”¨æˆ·ç•Œé¢æ˜¯ç”±Xerox Palo Altoç ”ç©¶ä¸­å¿ƒ70å¹´ä»£åˆæœŸç ”å‘å‡ºæ¥çš„ï¼Œä¹‹åè¢«è®¸å¤šå…¬å¸æ¨¡ä»¿ï¼Œç»§æ‰¿å‘å±•ã€‚ æ“ä½œç³»ç»Ÿçš„ä½œç”¨ éšè—äº†å¤æ‚çš„ç¡¬ä»¶è°ƒç”¨æ¥å£,ä¸ºåº”ç”¨ç¨‹åºå‘˜è°ƒç”¨ç¡¬ä»¶èµ„æºæä¾›æ›´å¥½,æ›´ç®€å•,æ›´æ¸…æ™°çš„æ¨¡å‹.åº”ç”¨ç¨‹åºå‘˜æœ‰äº†è¿™äº›æ¥å£å,å°±å¯ä»¥ä¸ç”¨è€ƒè™‘æ“ä½œç¡¬ä»¶çš„ç»†èŠ‚,ä¸“å¿ƒå†™ä»£ç å³å¯; å°†åº”ç”¨ç¨‹åºå¯¹ç¡¬ä»¶èµ„æºçš„ç«äº‰è¯·æ±‚å˜å¾—æœ‰åº. å¤šé“æŠ€æœ¯åœ¨ä¹‹å‰ç¬¬ä¸‰ä»£è®¡ç®—æœºçš„æ—¶å€™äº§ç”Ÿäº†å¤šé“æŠ€æœ¯,å¯ä»¥æ›´é«˜æ•ˆç‡çš„ä½¿ç”¨è®¡ç®—æœºçš„èµ„æº.äº§ç”ŸèƒŒæ™¯ä¸º:é‚£æ—¶å€™çš„è®¡ç®—æœºéƒ½æ˜¯å•æ ¸,ä¸ºäº†èƒ½å¤ŸåŒä¸€æ—¶é—´è¿è¡Œå¤šä¸ªç¨‹åºäº§ç”Ÿäº†å¤šé“æŠ€æœ¯. å¤šé“æŠ€æœ¯çš„äº§ç”Ÿç›´æ¥å½±å“äº†è®¡ç®—æœºçš„å‘å±•æ–¹å‘,å¤šé“æŠ€æœ¯å‡ºç°å,å•æ ¸å¯ä»¥å®ç°å¹¶å‘å·¥ä½œäº†.]]></content>
      <categories>
        <category>å¹¶å‘ç¼–ç¨‹</category>
      </categories>
  </entry>
  <entry>
    <title><![CDATA[ç½‘ç»œç¼–ç¨‹(äº”)]]></title>
    <url>%2F2018%2F11%2F10%2F%E7%BD%91%E7%BB%9C%E7%BC%96%E7%A8%8B-%E4%BA%94%2F</url>
    <content type="text"><![CDATA[å‰è¨€åœ¨ä¸Šä¸€ç¯‡æ–‡ç« ä¸­æˆ‘ä»¬å­¦ä¹ äº† åŸºäº TCP å¥—æ¥å­—çš„æœåŠ¡ç«¯å’Œå®¢æˆ·ç«¯é€šä¿¡,å¹¶è§£å†³äº†ç²˜åŒ…çš„é—®é¢˜,è§£å†³ç²˜åŒ…é—®é¢˜çš„æ€è·¯å¾ˆç®€å•,å°±æ˜¯ç¡®ä¿æ¥å—æ–¹èƒ½å¤ŸæŠŠæ•°æ®æ”¶å–å¹²å‡€,å‘å¤šå°‘,å°±æ”¶å¤šå°‘. å‡ºç°ç²˜åŒ…çš„é—®é¢˜:åŸå› æœ‰ä¸¤ä¸ª,ä¸€ä¸ªæ˜¯æ¥æ”¶æ•°æ®é‡å°‘äºå‘é€æ•°æ®é‡;ä¸€ä¸ªæ˜¯å› ä¸ºä¸ºäº†ä¼˜åŒ– TCP çš„ä¼ è¾“æ•ˆç‡,ä½¿ç”¨äº† Nagleç®—æ³•,å½“å®¢æˆ·ç«¯è¿ç»­å‘é€æ—¶é—´é—´éš”å¾ˆçŸ­çš„ä¸¤ä¸ªæ•°æ®åŒ…æ—¶,åœ¨æœªç¡®è®¤æ•°æ®å‘é€çš„æ—¶å€™è®©å‘é€å™¨æŠŠæ•°æ®é€åˆ°ç³»ç»Ÿç¼“å­˜é‡Œ.ä»»ä½•æ•°æ®éšåç»§ç»­ç›´åˆ°å¾—åˆ°æ˜æ˜¾çš„æ•°æ®ç¡®è®¤æˆ–è€…ç›´åˆ°æ”’åˆ°äº†ä¸€å®šæ•°é‡çš„æ•°æ®äº†å†å‘åŒ…. è¿™æ˜¯ä¸å¯é¿å…çš„,ä¸ºäº†ä¼˜åŒ–ä¼ è¾“æ•ˆç‡,å°½é‡å‘é€å¤§å—æ•°æ®,é¿å…ç½‘ç»œä¸­å……æ–¥çš„è®¸å¤šå°æ•°æ®å—.çŸ¥é“äº†è§£å†³æ–¹æ³•,é‚£ä¹ˆé¿å…ç²˜åŒ…å°±å¾ˆç®€å•äº†,åªéœ€è¦åœ¨æ¯æ¬¡å‘é€æ•°æ®ä¹‹å‰å…ˆå‘é€çœŸå®æ•°æ®çš„é•¿åº¦,ç„¶åæ¥æ”¶æ–¹å¯ä»¥æ ¹æ®æ”¶åˆ°çš„çœŸå®é•¿åº¦æ”¶å–æ•°æ®äº†. SOCKETä½¿ç”¨SOCKET AF_INETå¥—æ¥å­—ä¸»è¦æœ‰ä¸¤ç§åè®®,ç°åœ¨æ¥çœ‹ UDP åè®®æ˜¯å¦‚ä½•è¿›è¡Œç½‘ç»œé€šä¿¡çš„. åŸºäº UDP è¿æ¥çš„å¥—æ¥å­—tcp æ˜¯æ— è¿æ¥,ä¸ç¨³ç‚¹çš„å¥—æ¥å­—,ä½†æ˜¯ä¼ è¾“æ•ˆç‡è¾ƒé«˜,æ‰€ä»¥åœ¨æŸäº›åº”ç”¨ä¸Šå¦‚å®æ—¶ç›´æ’­,æ¸¸æˆ, DNS æœåŠ¡å™¨,DHCP æœåŠ¡å™¨ç­‰ç­‰. æœåŠ¡ç«¯ 12345678910from socket import *serverSock = socket(AF_INET, SOCK_DGRAM)serverSock.bind(('', 8080))while True: data, client_addr = serverSock.recvfrom(1024) print(data) serverSock.sendto(data.upper, client_addr)serverSock.close() å®¢æˆ·ç«¯ 123456789from socket import *clientSock = socket(AF_INET, SOCK_DGRAM)while True: msg = input('&gt;&gt;&gt;').strip() clientSock.sendto(msg.encode('utf-8'), ('', 8080)) data, server_addr = clientSock.recvfrom(1024) print(data) å½“æˆ‘ä»¬è¿ç»­å¼€å¤šä¸ªå®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯é€šä¿¡çš„æ—¶å€™,æ²¡æœ‰å‡ºç°é˜»å¡çš„æƒ…å†µ,å‘å‡ºå»çš„æ¶ˆæ¯éƒ½å¯ä»¥æ”¶å›æ¥,è¿™æ˜¯å› ä¸º udp æ˜¯æ— è¿æ¥çš„å¥—æ¥å­—,ä¸ç”¨å…³æ³¨ä¸€ä¸ªè¿æ¥,åªè¦ä½ ç»™æˆ‘å‘æ¶ˆæ¯æ‹¿åˆ°äº†å‘é€æ–¹çš„ ip å’Œç«¯å£,é‚£ä¹ˆå°±å¯ä»¥ç›´æ¥å’Œä½ é€šä¿¡,è€Œä¸”ä¸åƒ TCP é‚£æ ·å¿…é¡»å…ˆå¯åŠ¨æœåŠ¡ç«¯æ‰å¯ä»¥, udp åœ¨å‘é€æ•°æ®çš„æ—¶å€™,æœåŠ¡ç«¯æ²¡æœ‰å¯åŠ¨ä¹Ÿå¯ä»¥å‘é€è¿‡å»,åªä¸è¿‡æ˜¯å‘åˆ°äº†å¯¹æ–¹çš„ç³»ç»Ÿç¼“å­˜ä¸­. é‚£ä¹ˆ udp å¯ä»¥å®ç°å¤šä¸ªå®¢æˆ·ç«¯åŒæ—¶å’Œå®¢æˆ·ç«¯é€šä¿¡å—? ä¹‹å‰å‡ ä¸ªå®¢æˆ·ç«¯å¯ä»¥åŒæ—¶å’ŒæœåŠ¡ç«¯é€šä¿¡æ˜¯å› ä¸ºæœåŠ¡ç«¯çš„å¤„ç†èƒ½åŠ›å¾ˆå¤§,çœ‹èµ·æ¥æ˜¯åŒæ—¶é€šä¿¡ä¸€æ ·,ä½†æ˜¯å¦‚æœæŠŠå®¢æˆ·ç«¯åŠ åˆ° 1w, ç”šè‡³æ›´å¤šå°±ä¼šæ„Ÿè§‰åˆ°æ˜æ˜¾çš„æ—¶é—´å·®äº†. é‚£ä¹ˆå¦‚ä½•å¯ä»¥å®ç°çœŸæ­£çš„å¹¶å‘å‘¢?å…³é”®ç‚¹å°±åœ¨ä¸€ä¸ªé€šä¿¡å¾ªç¯å’Œè¿æ¥å¾ªç¯äº’ç›¸ä¸å¹²æ‰°,ä¸ç”¨å› ä¸º i/o å µå¡è€Œè€½æå¦ä¸€ä¸ªå¾ªç¯è¦åšçš„äº‹. Socketserver æ¨¡å—å®ç°å¹¶å‘åœ¨è¿™é‡Œ python æœ‰ä¸€ä¸ªæ¨¡å—ä¸º socketserver å¯ä»¥å®ç°çœŸæ­£çš„å¹¶å‘. åŸºäº TCP åè®®çš„å¹¶å‘æœåŠ¡ç«¯ 123456789101112131415161718import sockerserverclass MyTCPhandler(socketserver.BaseRequestHandler): def handler(self): while True: try: data = self.request.recv(1024) if len(data) == 0: break print('--&gt;æ”¶åˆ°å®¢æˆ·ç«¯çš„æ¶ˆæ¯:', data) self.request.send(data.upper()) except ConnectResetError: break self.request.close() if __name__ == '__main__': serverSock = socketserver.ThreadingTCPServer(('127.0.0.1', 8081), MyTCPhandler) serverSock.serve_forever() # å’Œå®¢æˆ·ç«¯è¿›è¡Œè¿æ¥ å®¢æˆ·ç«¯ 123456789101112from socket import *clientSock = socket(AF_INET, SOCK_STREAM)clientSock.connect(('127.0.0.1', 8081))# é€šä¿¡å¾ªç¯while True: clientSock.send(b'hello') data = clientSock.recv(1024) print(data) clientSock.close() è¿™æ ·å°±è§£å†³äº† TCP ä¸èƒ½å®ç°å¹¶å‘çš„é—®é¢˜äº†. åŸºäº UDP åè®®çš„å¹¶å‘æœåŠ¡ç«¯ 12345678910import socketserverclass MyUDPhandler(socketserver.BaseRequestHandler): def handler(self): data, serverSock = self.request serverSock.sendto(data.upper(), self.client_address) if __name__ == '__main__': server = socketserver.ThreadingUDPServer(('127.0.0.1', 8081), MyUDPhandler) server.serve_forever() å®¢æˆ·ç«¯ 12345678from socket import *clientSock = socket(AF_INET, SOCK_DGRAM)while True: clientSock.sendto(b'hello', ('127.0.0.1', 8081)) data, server_addr = client.recvfrom(1024) print(data) è¿™å°±æ˜¯ UDP å®ç°å¹¶å‘çš„æ¨¡æ¿. æ€»ç»“åˆ°æ­¤,ç½‘ç»œç¼–ç¨‹ç»ˆäºå‘Šä¸€æ®µè½äº†,å…¶å®æˆ‘å†™çš„æ˜¯ç½‘ç»œç¼–ç¨‹é‡Œé¢æå°‘çš„ä¹Ÿæ˜¯è¾ƒä¸ºé‡è¦çš„ä¸€éƒ¨åˆ†,è¿˜æœ‰å¾ˆå¤šåº•å±‚åè®®æ²¡äº†è§£,åƒ ping æœåŠ¡å™¨æ—¶å‘é€çš„ ICMP åŒ…,è¿˜æœ‰å¾ˆå¤š,ä¸è¿‡æˆ‘è§‰å¾—äº†è§£äº†è¿™äº›å…¶å®ä¹Ÿå°±äº†è§£äº†äº’è”ç½‘å·¥ä½œçš„åŸºæœ¬æ–¹å¼,å…¶ä½™çš„å¾…æœ‰æ—¶é—´äº†å†æ¥å­¦ä¹ . å¦‚æœ‰ä¸å¯¹çš„åœ°æ–¹,æ¬¢è¿æŒ‡æ­£.]]></content>
      <categories>
        <category>ç½‘ç»œç¼–ç¨‹</category>
      </categories>
  </entry>
  <entry>
    <title><![CDATA[ç½‘ç»œç¼–ç¨‹(å››)]]></title>
    <url>%2F2018%2F11%2F09%2F%E7%BD%91%E7%BB%9C%E7%BC%96%E7%A8%8B-%E5%9B%9B%2F</url>
    <content type="text"><![CDATA[å‰è¨€ç»è¿‡ä¹‹å‰ä¸‰ç¯‡æ–‡ç« çš„å­¦ä¹ æˆ‘ä»¬å¤§è‡´äº†è§£äº†äº’è”ç½‘æ˜¯å¦‚ä½•åŸºäºäº”å±‚åè®®è¿›è¡Œé€šä¿¡äº†,ç”±åº”ç”¨å±‚äº§ç”Ÿæ•°æ®,ç„¶åè¿›è¡Œå°è£…,ä¾æ¬¡ç»è¿‡ä¼ è¾“å±‚,ç½‘ç»œå±‚,æ•°æ®é“¾è·¯å±‚çš„å°è£…æœ€åç”±ç‰©ç†å±‚å‘é€ç”µä¿¡å·è¿›è¡Œæ•°æ®çš„ä¼ è¾“,åœ¨æ¥æ”¶ç«¯é¦–å…ˆç”±ç‰©ç†å±‚æ¥æ”¶åˆ°å­—èŠ‚å‹çš„æ•°æ®,ç„¶åæ‹†åŒ…,éªŒè¯ MAC åœ°å€, IP åœ°å€å’Œç«¯å£,æœ€åç”±ç›®æ ‡åº”ç”¨è·å–æ•°æ®å¹¶è§£ç å‡ºæ¥. é‚£ä¹ˆä¸ºäº†ä½¿ç”¨ TCP åè®®å»ºç«‹è¿æ¥,ä¸ç”¨å»ç®¡ä»€ä¹ˆä¸‰æ¬¡æ¡æ‰‹å››æ¬¡æŒ¥æ‰‹ä»¥åŠæ•°æ®åˆ°åº•æ˜¯æ€ä¹ˆåœ¨äº’è”ç½‘ä¸­ä¼ è¾“çš„,åœ¨åº”ç”¨å±‚å’Œä¼ è¾“å±‚è™šæ‹Ÿå‡ºä¸€ä¸ªæŠ½è±¡å±‚,å« socket( å¥—æ¥å­—)å±‚,è¿™æ˜¯ä¸€ä¸ªæ¨¡å—ä¸ºæˆ‘ä»¬å°è£…å¥½äº†å¾ˆå¤šåº•å±‚çš„åè®®,ä»¥ä¾¿äºæˆ‘ä»¬åªå…³æ³¨ä¸å®é™…çš„æ•°æ®ä¼ è¾“,è€Œä¸ç”¨å…³ç³»åº•å±‚çš„å®ç°. æ‰€ä»¥æˆ‘ä»¬å°±ç›´æ¥ä½¿ç”¨å¥—æ¥å­—å’Œç½‘ç»œé€šä¿¡è¿›è¡Œäº¤äº’. socketsocketæ˜¯ä»€ä¹ˆsocketæ˜¯åº”ç”¨å±‚ä¸ TCP/IPåè®®æ—é€šä¿¡çš„ä¸­é—´è½¯ä»¶æŠ½è±¡å±‚,å®ƒæ˜¯ä¸€ç»„æ¥å£.åœ¨è®¾è®¡æ¨¡å¼ä¸­, socket å°±æ˜¯ä¸€ä¸ªæ¨¡å—,å®ƒæŠŠå¤æ‚çš„ TCP/IP åè®®æ—éšè—åœ¨ socket æ¥å£åé¢,å¯¹ç”¨æˆ·æ¥è¯´,ä¸€ç»„ç®€å•çš„æ¥å£å°±æ˜¯å…¨éƒ¨,è®© socket å»ç»„ç»‡æ•°æ®,ä»¥ç¬¦åˆæŒ‡å®šçš„åè®®. ä¹Ÿæœ‰äººè¯´, socket å…¶å®å°±æ˜¯ ip å’Œ port çš„ç»„åˆ, ip ç”¨æ¥æ ‡è¯†äº’è”ç½‘ä¸­çš„ä¸€å°ä¸»æœºçš„ä½ç½®,è€Œ port æ˜¯ç”¨æ¥æ ‡è¯†è¿™å°æœºå™¨ä¸Šçš„ä¸€ä¸ªåº”ç”¨ç¨‹åº, ip åœ°å€æ˜¯é…ç½®åˆ°ç½‘å¡çš„,è€Œ port æ˜¯åº”ç”¨ç¨‹åºå¼€å¯çš„,è¿™æ · ip å’Œ port å°±æ ‡è¯†äº†äº’è”ç½‘ä¸­ç‹¬ä¸€æ— äºŒçš„ä¸€ä¸ªåº”ç”¨ç¨‹åº. å¥—æ¥å­—å‘å±•å²å³åˆ†ç±»å¥—æ¥å­—èµ·æºäº20ä¸–çºª70å¹´ä»£åŠ åˆ©ç¦å°¼äºšå¤§å­¦ä¼¯å…‹åˆ©åˆ†æ ¡ç‰ˆæœ¬çš„ Unix, å³ BSD Unix. å› æ­¤,æœ‰æ—¶äººä»¬ä¹ŸæŠŠå¥—æ¥å­—ç§°ä¸ºâ€™ä¼¯å…‹åˆ©å¥—æ¥å­—â€™æˆ–â€™ BSD å¥—æ¥å­—â€™.ä¸€å¼€å§‹,å¥—æ¥å­—è¢«è®¾è®¡ç”¨åœ¨åŒä¸€å°ä¸»æœºä¸Šçš„å¤šä¸ªåº”ç”¨ç¨‹åºä¹‹é—´çš„é€šä¿¡.è¿™ä¹Ÿè¢«ç§°ä¹‹ä¸ºè¿›ç¨‹é—´é€šä¿¡æˆ– IPC(inter-process communication).å¥—æ¥å­—æœ‰ä¸¤å¤§å®¶æ—,åˆ†åˆ«æ˜¯åŸºäºæ–‡ä»¶å‹å’ŒåŸºäºç½‘ç»œå‹.æˆ‘ä»¬ä¸»è¦å­¦ä¹ åŸºäºç½‘ç»œå‹çš„å¥—æ¥å­—. åŸºäºæ–‡ä»¶ç±»å‹çš„å¥—æ¥å­—å®¶æ—: å¥—æ¥å­—å®¶æ—åå­—: AF_UNIX UNIX å“²å­¦ä¸ºä¸€åˆ‡çš†æ–‡ä»¶(å…¶å®ä¹Ÿä¸æ˜¯æ‰€æœ‰çš„),åŸºäºæ–‡ä»¶çš„å¥—æ¥å­—è°ƒç”¨çš„å°±æ˜¯åº•å±‚çš„æ–‡ä»¶ç³»ç»Ÿæ¥å–æ•°æ®,ä¸¤ä¸ªå¥—æ¥å­—è¿›ç¨‹è¿è¡Œåœ¨åŒä¸€æœºå™¨,å¯ä»¥é€šè¿‡è®¿é—®åŒä¸€ä¸ªæ–‡ä»¶ç³»ç»Ÿé—´æ¥å®Œæˆé€šä¿¡. åŸºäºç½‘ç»œç±»å‹çš„å¥—æ¥å­—å®¶æ—: å¥—æ¥å­—å®¶æ—åå­—: AF_INET åŸºäºç½‘ç»œä¹Ÿå°±æ˜¯ OSI åè®®è¿›è¡Œæ•°æ®é€šä¿¡ å¥—æ¥å­—å·¥ä½œæµç¨‹å…¶å®å°±è·Ÿæ‰“ç”µè¯å¾ˆåƒ,æœ‰æ‹¨å·,æ¥ç”µè¯,é€šä¿¡,æŒ‚ç”µè¯ é¦–å…ˆç”±æœåŠ¡ç«¯åˆå§‹åŒ–ä¸€ä¸ªå¥—æ¥å­—å¯¹è±¡,ç„¶åä¸æœ¬æœºçš„æŸä¸ªå¤§äº1023çš„ç«¯å£ç»‘å®š( bind),æ¥ç€å¯¹è¯¥ç«¯å£è¿›è¡Œç›‘å¬(listen),è°ƒç”¨ accept æ¥å£é˜»å¡ç­‰å¾…å®¢æˆ·ç«¯çš„è¿æ¥.å¦‚æœåœ¨è¿™æ—¶å®¢æˆ·ç«¯åˆå§‹åŒ–ä¸€ä¸ªå¥—æ¥å­—å¯¹è±¡,ç„¶åè¿æ¥(connect)æœåŠ¡ç«¯çš„ ip å’Œport,å¦‚æœè¿æ¥æˆåŠŸ,è¿™æ—¶å®¢æˆ·ç«¯ä¸æœåŠ¡ç«¯çš„è¿æ¥å°±å»ºç«‹æˆåŠŸäº†. è¿™æ—¶å€™å¯èƒ½æœ‰äººå†é—®äº†,ä¸‰æ¬¡æ¡æ‰‹å‘¢? å½“å®¢æˆ·ç«¯ connect æœåŠ¡ç«¯çš„æ—¶å€™å°±è¯´æ˜ä¸‰æ¬¡æ¡æ‰‹å¼€å§‹äº†,å¦‚æœæœåŠ¡ç«¯ accept æœ‰è¿”å›å€¼,é‚£ä¹ˆå°±è¯´æ˜ä¸‰æ¬¡æ¡æ‰‹æˆåŠŸ.(å¯ä»¥ä½¿ç”¨ wireshark è¿›è¡ŒæŠ“åŒ…åˆ†æ)wireshark æ•™ç¨‹ TCP è¿æ¥å»ºç«‹æˆåŠŸåå®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯å°±å¯ä»¥è¿›è¡Œæ•°æ®äº¤äº’äº†.å®¢æˆ·ç«¯å‘é€æ•°æ®è¯·æ±‚,æœåŠ¡ç«¯æ¥æ”¶è¯·æ±‚å¹¶å¤„ç†è¯·æ±‚,ç„¶åæŠŠå›åº”æ•°æ®å‘é€ç»™å®¢æˆ·ç«¯,å®¢æˆ·ç«¯è¯»å–æ•°æ®,æœ€åå…³é—­è¿æ¥,ä¸€æ¬¡é€šä¿¡ç»“æŸ. SOCKETä½¿ç”¨å¥—æ¥å­—æœåŠ¡ç«¯é€šç”¨ä½¿ç”¨æ–¹æ³•from socket import * sct = socket(socket_family, socket_type, protocal=0) socket_family å¯ä»¥ä¸ºAF_UNIX æˆ– AF_INET,socket_type å¯ä»¥æ˜¯ SOCK_STREAM æˆ– SOCK_DGRAM.protocol ä¸€èˆ¬ä¸å¡«,ç¼ºçœå€¼ä¸º0. è·å– tcp/ip å¥—æ¥å­— tcpSock = socket(AF_INET, SOCK_STREAM) ç»‘å®š ip port tcpSock.bind((&#39;&#39;, 8080)) å¼€å§‹ç›‘å¬ tcpSock.listen(5) è¢«åŠ¨æ¥å— TCP å®¢æˆ·ç«¯è¿æ¥(é˜»å¡å¼) tcpSock.accept() è·å– udp/ip å¥—æ¥å­— udpSock = socket(AF_UNIX, SOCK_DGRAM) ç»‘å®š ip port udpSock.bind((&#39;&#39;, 8081)) å¥—æ¥å­—å®¢æˆ·ç«¯é€šç”¨æ–¹æ³•è¿æ¥æœåŠ¡ç«¯ä¸»åŠ¨åˆå§‹åŒ– TCP æœåŠ¡å™¨è¿æ¥ tcpSock.connect((&#39;&#39;, 8080)) å…¬å…±ç”¨é€”çš„å¥—æ¥å­—å‡½æ•°sock.recv() æ¥æ”¶ TCP æ•°æ® sock.send() å‘é€ TCP æ•°æ®( send åœ¨å¾…å‘é€æ•°æ®é‡å¤§äºå·²ç«¯ç¼“å­˜åŒºå‰©ä½™ç©ºé—´æ—¶,æ•°æ®å°†ä¼šä¸¢å¤±) sock.sendall() å‘é€å®Œæ•´çš„ TCP æ•°æ®(æœ¬è´¨å°±æ˜¯å¾ªç¯è°ƒç”¨ send,sendall åœ¨å¾…å‘é€æ•°æ®é‡å¤§äºå·²ç«¯ç¼“å­˜åŒºå‰©ä½™ç©ºé—´æ—¶,æ•°æ®ä¸ä¸¢å¤±,å¾ªç¯è°ƒç”¨ send çŸ¥é“å‘å®Œ) sock.recvfrom() æ¥æ”¶ UDP æ•°æ® sock.sendto() å‘é€ UDP æ•°æ® sock.getpeername() è¿æ¥åˆ°å½“å‰å¥—æ¥å­—çš„è¿œç«¯åœ°å€ sock.getsockname() è·å–å½“å‰å¥—æ¥å­—çš„åœ°å€ sock.getsockopt() è¿”å›æŒ‡å®šå¥—æ¥å­—çš„å‚æ•° sock.setsockopt() è®¾ç½®æŒ‡å®šå¥—æ¥å­—çš„å‚æ•° sock.close() å…³é—­å¥—æ¥å­— åŸºäº TCP è¿æ¥çš„å¥—æ¥å­—tcp æ˜¯åŸºäºè¿æ¥çš„,å¿…é¡»å…ˆå¯åŠ¨æœåŠ¡ç«¯,ç„¶åå†å¯åŠ¨å®¢æˆ·ç«¯å»è¿æ¥æœåŠ¡ç«¯ tcp æœåŠ¡ç«¯ 12345678910111213141516171819from socket import *# åˆ›å»ºtcpå¥—æ¥å­—å¯¹è±¡serverSock = socket(AF_INET, SOCK_STREAM)# ç»‘å®š ip å’Œç«¯å£serverSock.bind(('', 8080))# ç›‘å¬è¿æ¥serverSock.listen(5)# è¢«åŠ¨ç­‰å¾…å®¢æˆ·ç«¯çš„è¿æ¥,å¦‚æœæœ‰å®¢æˆ·ç«¯è¿æ¥ä¼šè¿”å›ä¸€ä¸ªç”¨äºå’Œå®¢æˆ·ç«¯é€šä¿¡çš„å¥—æ¥å­—ä»¥åŠå®¢æˆ·ç«¯çš„åœ°å€conn, addr = serverSock.accept()# æ¥æ”¶å®¢æˆ·ç«¯çš„æ•°æ®data = conn.recv(1024)# ç»™å®¢æˆ·ç«¯è¿”å›æ•°æ®conn.send(data2) tcp å®¢æˆ·ç«¯ 123456789101112131415161718from socket import *# åˆ›å»ºå®¢æˆ·ç«¯å¥—æ¥å­—å¯¹è±¡clientSock = socket(AF_INET, SOCK_STREAM)# è¿æ¥æœåŠ¡å™¨clientSock.connect(('', 8080))# å‘é€æ•°æ®åˆ°æœåŠ¡ç«¯data = input('&gt;&gt;&gt;').strip()clientSock.send(data.encode('utf-8'))# æ¥æ”¶æœåŠ¡ç«¯çš„æ•°æ®data = clientSock.recv(1024)print(data.decode('utf-8'))# å…³é—­å®¢æˆ·ç«¯å¥—æ¥å­—clientSock.close() åŸºäº TCP çš„é€šä¿¡å¾ªç¯å¥—æ¥å­—åœ¨ä¸Šä¸ªç‰ˆæœ¬ä¸­,æœåŠ¡ç«¯å’Œå®¢æˆ·ç«¯è¿›è¡Œäº†ä¸€æ¬¡é€šä¿¡å°±å…³é—­äº†,å¾ˆæ˜æ˜¾å’Œå®é™…åº”ç”¨ä¸ç¬¦åˆ,æ‰€ä»¥åŠ ä¸Šé€šä¿¡å¾ªç¯,ä½¿å¾—å®¢æˆ·ç«¯å¯ä»¥å’ŒæœåŠ¡ç«¯è¿›è¡Œå¤šæ¬¡é€šä¿¡. æœåŠ¡ç«¯å¿…é¡»æ»¡è¶³ä¸‰ç‚¹è¦æ±‚: ç»‘å®šä¸€ä¸ªå›ºå®šçš„ ip å’Œ port ä¸€ç›´å¯¹å¤–æä¾›ç¨³å®šçš„æœåŠ¡ èƒ½å¤Ÿæ”¯æŒå¹¶å‘(å­¦äº†å¤šè¿›ç¨‹å¤šçº¿ç¨‹å¯ä»¥æ”¯æŒ) æœåŠ¡ç«¯ 1234567891011121314151617181920212223from socket import *serverSock = socket(AF_INET, SOCK_STREAM)serverSock.bind(('', 8081))serverSock.listen(5)conn, addr = serverSock.accept()# é€šä¿¡å¾ªç¯while True: try: data = conn.recv(1024) if len(data) == 0:break # é’ˆå¯¹ linux ç³»ç»Ÿ print('--&gt;æ”¶åˆ°å®¢æˆ·ç«¯æ¶ˆæ¯:', data) conn.send(data.upper()) except ConnectionResetError: breakconn.close()serverSock.close()# åŠ ä¸Šå¼‚å¸¸å¤„ç†æ˜¯å› ä¸ºå½“å®¢æˆ·ç«¯å¼‚å¸¸æ–­å¼€è¿æ¥æ—¶,æœåŠ¡ç«¯ä¼šæŠ¥é”™ å®¢æˆ·ç«¯ 12345678910111213from socket import *clientSock = socket(AF_INET, SOCK_STREAM)client.connect(('', 8081))# é€šä¿¡å¾ªç¯while True: msg = input('&gt;&gt;&gt;:').stript() clientSock.send(msg.encode('utf-8')) data = clientSock.recv(1024) print(data)clientSock.close() åŸºäº TCP çš„è¿æ¥å¾ªç¯é€šä¿¡å¾ªç¯å¥—æ¥å­—åœ¨ä¸Šä¸€ä¸ªç‰ˆæœ¬ä¸­è§£å†³äº†å®¢æˆ·ç«¯é‡å¤å‘æ¶ˆæ¯çš„é—®é¢˜,ä½†æ˜¯ä½œä¸ºä¸€ä¸ªæœåŠ¡ç«¯ä¸å¯èƒ½åªä¸ºä¸€ä¸ªå®¢æˆ·æä¾›æœåŠ¡,æ‰€ä»¥æœåŠ¡ç«¯å¿…é¡»å¯ä»¥æ¥æ”¶å¤šä¸ªè¿æ¥(å¹¶å‘),è¿™é‡Œå®ç°çš„æ˜¯ä¼ªå¹¶å‘. æœåŠ¡ç«¯ 12345678910111213141516171819202122from socket import *serverSock = socket(AF_INET, SOCK_STREAM)serverSock.bind(('', 8082))serverSock.listen(5)# è¿æ¥å¾ªç¯while True: conn, addr = serverSock.accept() print(conn) # é€šä¿¡å¾ªç¯ while True: try: data = conn.recv(1024) if len(data) == 0: break print('--&gt;æ”¶åˆ°å®¢æˆ·ç«¯çš„æ¶ˆæ¯:', data) conn.send(data.upper()) except ConnectionResetError: break conn.close()serverSock.close() å®¢æˆ·ç«¯ 12345678910111213from socket import *clientSock = socket(AF_INET, SOCK_STREAM)client.connect(('', 8081))# é€šä¿¡å¾ªç¯while True: msg = input('&gt;&gt;&gt;:').stript() clientSock.send(msg.encode('utf-8')) data = clientSock.recv(1024) print(data)clientSock.close() è‡³æ­¤ä¸€ä¸ªå¯ä»¥æ¥å—å¤šä¸ªå®¢æˆ·ç«¯è¿æ¥çš„ C/S é€šä¿¡ç¨‹åºå°±å®Œæˆäº†,ä¸è¿‡æœåŠ¡ç«¯è¿æ¥äº†ä¸€ä¸ªå®¢æˆ·ç«¯,é‚£ä¹ˆåªèƒ½ä¸ºè¿™ä¸ªå®¢æˆ·ç«¯æœåŠ¡,åªæœ‰ç­‰è¿™ä¸ªå®¢æˆ·ç«¯æ–­å¼€è¿æ¥æ‰å¯ä»¥è¿æ¥å…¶ä»–çš„å®¢æˆ·ç«¯. TCP å¥—æ¥å­—çš„å‚æ•°ç†è§£åœ¨å†™æœåŠ¡ç«¯ä»£ç çš„æ—¶å€™,å‘ç°ç»‘å®šçš„åœ°æ–¹çš„ ip æˆ‘ç”¨äº†ç©ºçš„å­—ç¬¦ä¸²,è¿™è¡¨ç¤ºæ˜¯ç»‘å®šåˆ°æœ¬æœºçš„,ä¹Ÿå¯ä»¥ç”¨127.0.0.1æ¥ä»£æ›¿,ç„¶åè¿˜æœ‰ä¸€ä¸ªå‚æ•°ä¸º listen, é‡Œé¢å¡«çš„5. åœ¨å¯åŠ¨ä¸€ä¸ªæœåŠ¡ç«¯æ—¶,æœåŠ¡ç«¯å°±ä¼šè¿›å…¥ LISTEN çŠ¶æ€,è¡¨ç¤ºç›‘å¬å®¢æˆ·ç«¯çš„è¿æ¥,é‚£ä¹ˆè¿™ä¸ª5å°±è¡¨ç¤ºå¯ä»¥ç›‘å¬5ä¸ªè¿æ¥,åœ¨å¥—æ¥å­—é‡Œé¢æœ‰ä¸ªåè¯å«åŠè¿æ¥æ± ,å°±æ˜¯è¯´å¯åŠ¨æœåŠ¡ç«¯æ—¶,å°±è‡ªåŠ¨å¼€å¯ä¸€ä¸ªåŠè¿æ¥æ± ,å½“å®¢æˆ·ç«¯è¿æ¥æœåŠ¡ç«¯çš„æ—¶å€™,è¡¨ç¤ºä¸€ä¸ªåŠè¿æ¥è¿›å…¥åŠè¿æ¥æ± äº†,ç„¶åæ“ä½œç³»ç»Ÿå°±ä»åŠè¿æ¥æ± å–å‡ºè¿™ä¸ªè¿æ¥,å¼€å§‹å¤„ç†è¿™ä¸ªè¿æ¥,é‚£ä¹ˆåæ¥çš„è¿æ¥ä¹Ÿæ˜¯æ”¾è¿›è¿™ä¸ªåŠè¿æ¥æ± é‡Œ,å› ä¸ºå¡«çš„5,æ‰€ä»¥åŠ ä¸ŠæœåŠ¡ç«¯å¤„ç†çš„é‚£ä¸ª,ä¸€å…±å¯ä»¥è¿æ¥6ä¸ª(å¤„ç†ä¸€ä¸ª),é‚£ä¹ˆä¹‹åçš„å®¢æˆ·ç«¯è¿æ¥éƒ½ä¼šè¢«æœåŠ¡ç«¯æ‹’ç»è¿æ¥,åªæœ‰ç­‰ä¹‹å‰å¤„ç†çš„æˆ–è€…æ˜¯åŠè¿æ¥æ± é‡Œçš„å°‘äº†ä¸€ä¸ªæ‰å¯ä»¥è¿æ¥ä¸ŠæœåŠ¡ç«¯. é‚£ä¹ˆè¿™ä¸ªåŠè¿æ¥å‘ç”Ÿåœ¨ TCP ä¸‰æ¬¡æ¡æ‰‹çš„ç¬¬å‡ æ¬¡æ¡æ‰‹å‘¢?å‘ç”Ÿåœ¨å®¢æˆ·ç«¯ connect çš„æ—¶å€™,ä¹Ÿå°±æ˜¯ç¬¬ä¸€æ¬¡æ¡æ‰‹çš„æ—¶å€™,ç¬¬ä¸€æ¬¡æ¡æ‰‹æˆåŠŸ,å®¢æˆ·ç«¯è¿æ¥å°±è¿›å…¥äº†åŠè¿æ¥æ± ,é‚£ä¹ˆç­‰æœåŠ¡ç«¯ accept çš„æ—¶å€™,å°±è¯´æ˜ä¸‰æ¬¡æ¡æ‰‹è¿æ¥æˆåŠŸ. ç›®å‰æˆ‘ä»¬å®ç°äº†ä¸€ä¸ªä¸å¤ªå®Œç¾çš„ C/S ç¨‹åº,é‚£ä¹ˆæœ‰ä»€ä¹ˆåŠæ³•å¯ä»¥è®©æœåŠ¡ç«¯æ—¢å¯ä»¥è¿æ¥å¤šä¸ªå®¢æˆ·ç«¯,åˆå¯ä»¥åŒæ—¶ä¸ºå®ƒä»¬æœåŠ¡å‘¢?ç­”æ¡ˆæ˜¯è®©è¿æ¥å¾ªç¯å’Œé€šä¿¡å¾ªç¯æ”¾åœ¨ä¸¤ä¸ª py æ–‡ä»¶é‡Œé¢. æ¨¡æ‹Ÿ SSH å®ç°è¿œç¨‹æ‰§è¡Œå‘½ä»¤ç»“åˆä¹‹å‰å­¦ä¹ çš„æ¨¡å— subprocess, å¯ä»¥æ‰§è¡Œä¼ è¿‡æ¥çš„å‘½ä»¤å‚æ•°,åœ¨å‘½ä»¤è¡Œä¸­.é‚£ä¹ˆæˆ‘ä»¬ä½¿ç”¨å®¢æˆ·ç«¯ä¼ é€å‘½ä»¤,åœ¨æœåŠ¡ç«¯è¿è¡Œ subprocess æ‰§è¡Œå‘½ä»¤,å¹¶æŠŠå¾—åˆ°çš„ç»“æœä¼ è¿‡å». æœåŠ¡ç«¯ 1234567891011121314151617181920212223242526from socket import *import subprocessserverSock = socket(AF_INET, SOCK_STREAM)serverSock.bind(('', 8085))server.listen(5)while True: conn, addr = serverSock.accept() while True: try: cmd = conn.recv(1024) if len(cmd): break obj = subprocess.Popen(cmd.decode('utf-8'), shell=True, stdout=subprocess.PIPE, stderr=subprocess.PIPE) stdout = obj.stdout.read() stderr = obj.stderr.read() print(len(stdout) + len(stderr)) conn.send(stdout+stderr) except ConnectionResetError: break conn.close()serverSock.close() å®¢æˆ·ç«¯ 123456789101112131415from socket import *clientSock = socket(AF_INET, SOCK_STREAM)clientSock.connect(('', 8085))while True: cmd = input('&gt;&gt;&gt;').strip() if len(cmd) == 0: continue client.send(cmd.encode('utf-8')) client.send(cdm.encode(;utf-8)) cmd_res = clientSock.recv(1024) print(cmd_res.decode('utf-8'))clientSock.close() ç»“æœè¡¨æ˜å½“æœåŠ¡ç«¯å‘é€çš„æ•°æ®å¤§äº1024æ—¶,å®¢æˆ·ç«¯ä¸€æ¬¡æ”¶å–æ•°æ®é‡ä¼šæ”¶ä¸å®Œæ•´,é‚£ä¹ˆå½“ä½ ä¸‹æ¬¡å‘é€å‘½ä»¤çš„æ—¶å€™,æœåŠ¡ç«¯å›è¿‡æ¥çš„æ•°æ®ä¼šå’Œä¸Šæ¬¡æœªæ”¶å®Œçš„æ•°æ®ç²˜åœ¨ä¸€èµ·,è¿™æ˜¯ä¸€ç§ç²˜åŒ…æƒ…å†µ. æœ‰æ—¶å€™å‘½åå…³é—­æœåŠ¡ç«¯äº†,é‡å¯æœåŠ¡ç«¯æ˜¯ä¼šå‡ºç°è¿™ç§é—®é¢˜æ˜¯å› ä¸ºå½“TCPä¸»åŠ¨å…³é—­è¿æ¥ä¸€æ–¹å°†ç»§ç»­ç­‰å¾…ä¸€å®šæ—¶é—´,è¿™æ˜¯ TCP è¿æ¥çŠ¶æ€ä¸­çš„ TIME_WAIT çŠ¶æ€,è¯¥çŠ¶æ€çš„ä½œç”¨æ˜¯ç”¨æ¥é‡å‘å¯èƒ½ä¸¢å¤±çš„ ACK æŠ¥æ–‡,å…¶äºŒå½“ä¸€ä¸ªæœåŠ¡å™¨æ–­å¼€è¿æ¥æ—¶,è¯¥ç«¯å£å¯èƒ½è¿˜ä¼šé‡å¤ä½¿ç”¨,é‚£ä¹ˆè¯¥ç«¯å£å°±ä¸èƒ½è¢«å…¶ä»–çš„åº”ç”¨ä½¿ç”¨. Nagle ç®—æ³•1 Nagle ç®—æ³•è§„åˆ™ å½“å®¢æˆ·ç«¯è¿ç»­å‘é€æ—¶é—´é—´éš”å¾ˆçŸ­çš„ä¸¤ä¸ªæ•°æ®åŒ…æ—¶,å› ä¸º TCP åè®®ä¸ºäº†ä¼˜åŒ–ä¼ è¾“æ•ˆç‡å’Œè¾ƒå°‘èµ„æºæµªè´¹,å†…éƒ¨ä½¿ç”¨ä¸€ç§Nagle çš„ç®—æ³•.Nagle ç®—æ³•é€šå¸¸ä¼šåœ¨ TCP ç¨‹åºé‡Œæ·»åŠ ä¸¤è¡Œä»£ç ,åœ¨æœªç¡®è®¤æ•°æ®å‘é€çš„æ—¶å€™è®©å‘é€å™¨æŠŠæ•°æ®é€åˆ°ç³»ç»Ÿç¼“å­˜é‡Œ.ä»»ä½•æ•°æ®éšåç»§ç»­ç›´åˆ°å¾—åˆ°æ˜æ˜¾çš„æ•°æ®ç¡®è®¤æˆ–è€…ç›´åˆ°æ”’åˆ°äº†ä¸€å®šæ•°é‡çš„æ•°æ®äº†å†å‘åŒ…. TCP/IP åè®®ä¸­,æ— è®ºå‘é€å¤šå°‘æ•°æ®,æ€»æ˜¯è¦åœ¨æ•°æ®å‰é¢åŠ ä¸Šåè®®å¤´,åŒæ—¶,å¯¹æ–¹æ”¶åˆ°æ•°æ®,ä¹Ÿéœ€è¦å‘é€ ACK è¡¨ç¤ºç¡®è®¤.ä¸ºäº†å°½å¯èƒ½çš„åˆ©ç”¨ç½‘ç»œå¸¦å®½, TCP æ€»æ˜¯å¸Œæœ›å°½å¯èƒ½çš„å‘é€è¶³å¤Ÿå¤§çš„æ•°æ®.(ä¸€ä¸ªè¿æ¥ä¼šè®¾ç½® MSS å‚æ•°,å› æ­¤, TCP/IP å¸Œæœ›æ¯æ¬¡éƒ½èƒ½ä»¥ MSS å°ºå¯¸çš„æ•°æ®å—æ¥å‘é€æ•°æ®).Nagle ç®—æ³•å°±æ˜¯ä¸ºäº†å°½å¯èƒ½å‘é€å¤§å—æ•°æ®,é¿å…ç½‘ç»œä¸­å……æ–¥ç€è®¸å¤šå°æ•°æ®å—. Nagle ç®—æ³•çš„åŸºæœ¬å®šä¹‰æ—¶ä»»æ„æ—¶åˆ»,æœ€å¤šåªèƒ½æœ‰ä¸€ä¸ªæœªè¢«ç¡®è®¤çš„å°æ®µ.æ‰€è°“å°æ®µ,æŒ‡çš„æ˜¯å°äº MSS å°ºå¯¸çš„æ•°æ®å—,æ‰€è°“æœªè¢«ç¡®è®¤,æ˜¯æŒ‡ä¸€ä¸ªæ•°æ®å—å‘å‡ºå,æ²¡æœ‰æ”¶åˆ°å¯¹æ–¹çš„ ACK ç¡®è®¤æ•°æ®å·²è¢«æ”¶åˆ°. Nagle ç®—æ³•çš„è§„åˆ™: å¦‚æœåŒ…é•¿åº¦è¾¾åˆ° MSS, åˆ™å…è®¸å‘é€; å¦‚æœè¯¥åŒ…å«æœ‰ FIN, åˆ™å…è®¸å‘é€; è®¾ç½®äº† TCP_NODELAY é€‰é¡¹,åˆ™å…è®¸å‘é€; æœªè®¾ç½® TCP_CORK é€‰é¡¹æ—¶,å¦‚æ‰€æœ‰å‘å‡ºå»çš„å°æ•°æ®åŒ…(åŒ…é•¿åº¦å°äº MSS)å‡è¢«ç¡®è®¤,åˆ™å…è®¸å‘é€; ä¸Šè¿°æ¡ä»¶éƒ½æœªæ»¡è¶³,ä½†å‘ç”Ÿäº†è¶…æ—¶(ä¸€èˆ¬ä¸º200ms),åˆ™ç«‹å³å‘é€. Nagle ç®—æ³•åªå…è®¸ä¸€ä¸ªæœªè¢« ACKç¡®è®¤çš„åŒ…å­˜åœ¨äºç½‘ç»œ,å®ƒå¹¶ä¸ç®¡åŒ…çš„å¤§å°,å› æ­¤å®ƒäº‹å®ä¸Šå°±æ˜¯ä¸€ä¸ªæ‰©å±•çš„åœ-ç­‰åè®®,åªä¸è¿‡å®ƒæ˜¯åŸºäºåŒ…åœ-ç­‰çš„,è€Œä¸æ˜¯åŸºäºå­—èŠ‚åœ-ç­‰çš„. Nagle ç®—æ³•å®Œå…¨ç”± TCP åè®®çš„ ACK æœºåˆ¶å†³å®š,è¿™ä¼šå¸¦æ¥ä¸€äº›é—®é¢˜,æ¯”å¦‚å¦‚æœå¯¹ç«¯ ACK å›å¤å¾ˆå¿«çš„è¯, Nagle äº‹å®ä¸Šä¸ä¼šæ‹¼æ¥å¤ªå¤šçš„æ•°æ®åŒ…,è™½ç„¶é¿å…äº†ç½‘ç»œæ‹¥å¡,ç½‘ç»œæ€»ä½“çš„åˆ©ç”¨ç‡ä¾ç„¶å¾ˆä½. Nagle ç®—æ³•æ˜¯ silly window syndrome(SWS)é¢„é˜²ç®—æ³•çš„ä¸€ä¸ªåŠé›†.SWS ç®—æ³•é¢„é˜²å‘é€å°‘é‡çš„æ•°æ®, Nagle ç®—æ³•æ˜¯å…¶åœ¨å‘é€æ–¹çš„å®ç°,è€Œæ¥æ”¶æ–¹è¦åšçš„æ˜¯ä¸è¦é€šå‘Šç¼“å†²ç©ºé—´çš„å¾ˆå°å¢é•¿,ä¸é€šçŸ¥å°çª—å£,é™¤éç¼“å†²åŒºç©ºé—´æœ‰æ˜¾è‘—åœ°å¢é•¿.è¿™é‡Œæ˜¾è‘—åœ°å¢é•¿å®šä¹‰ä¸ºå®Œå…¨å¤§å°çš„æ®µ( MSS)æˆ–å¢é•¿åˆ°å¤§äºæœ€å¤§çª—å£çš„ä¸€åŠ. æ³¨æ„ï¼šBSDçš„å®ç°æ˜¯å…è®¸åœ¨ç©ºé—²é“¾æ¥ä¸Šå‘é€å¤§çš„å†™æ“ä½œå‰©ä¸‹çš„æœ€åçš„å°æ®µï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œå½“è¶…è¿‡1ä¸ªMSSæ•°æ®å‘é€æ—¶ï¼Œå†…æ ¸å…ˆä¾æ¬¡å‘é€å®Œnä¸ªMSSçš„æ•°æ®åŒ…ï¼Œç„¶åå†å‘é€å°¾éƒ¨çš„å°æ•°æ®åŒ…ï¼Œå…¶é—´ä¸å†å»¶æ—¶ç­‰å¾…ã€‚ï¼ˆå‡è®¾ç½‘ç»œä¸é˜»å¡ä¸”æ¥æ”¶çª—å£è¶³å¤Ÿå¤§ï¼‰ ä¸¾ä¸ªä¾‹å­ï¼Œclientç«¯è°ƒç”¨socketçš„writeæ“ä½œå°†ä¸€ä¸ªintå‹æ•°æ®ï¼ˆç§°ä¸ºAå—ï¼‰å†™å…¥åˆ°ç½‘ç»œä¸­ï¼Œç”±äºæ­¤æ—¶è¿æ¥æ˜¯ç©ºé—²çš„ï¼ˆä¹Ÿå°±æ˜¯è¯´è¿˜æ²¡æœ‰æœªè¢«ç¡®è®¤çš„å°æ®µï¼‰ï¼Œå› æ­¤è¿™ä¸ªintå‹æ•°æ®ä¼šè¢«é©¬ä¸Šå‘é€åˆ°serverç«¯ï¼Œæ¥ç€ï¼Œclientç«¯åˆè°ƒç”¨writeæ“ä½œå†™å…¥â€˜\r\nâ€™ï¼ˆç®€ç§°Bå—ï¼‰ï¼Œè¿™ä¸ªæ—¶å€™ï¼ŒAå—çš„ACKæ²¡æœ‰è¿”å›ï¼Œæ‰€ä»¥å¯ä»¥è®¤ä¸ºå·²ç»å­˜åœ¨äº†ä¸€ä¸ªæœªè¢«ç¡®è®¤çš„å°æ®µï¼Œæ‰€ä»¥Bå—æ²¡æœ‰ç«‹å³è¢«å‘é€ï¼Œä¸€ç›´ç­‰å¾…Aå—çš„ACKæ”¶åˆ°ï¼ˆå¤§æ¦‚40msä¹‹åï¼‰ï¼ŒBå—æ‰è¢«å‘é€ã€‚ è¿™é‡Œè¿˜éšè—äº†ä¸€ä¸ªé—®é¢˜ï¼Œå°±æ˜¯Aå—æ•°æ®çš„ACKä¸ºä»€ä¹ˆ40msä¹‹åæ‰æ”¶åˆ°ï¼Ÿè¿™æ˜¯å› ä¸ºTCP/IPä¸­ä¸ä»…ä»…æœ‰nagleç®—æ³•ï¼Œè¿˜æœ‰ä¸€ä¸ªTCPç¡®è®¤å»¶è¿Ÿæœºåˆ¶ ã€‚å½“Serverç«¯æ”¶åˆ°æ•°æ®ä¹‹åï¼Œå®ƒå¹¶ä¸ä¼šé©¬ä¸Šå‘clientç«¯å‘é€ACKï¼Œè€Œæ˜¯ä¼šå°†ACKçš„å‘é€å»¶è¿Ÿä¸€æ®µæ—¶é—´ï¼ˆå‡è®¾ä¸ºtï¼‰ï¼Œå®ƒå¸Œæœ›åœ¨tæ—¶é—´å†…serverç«¯ä¼šå‘clientç«¯å‘é€åº”ç­”æ•°æ®ï¼Œè¿™æ ·ACKå°±èƒ½å¤Ÿå’Œåº”ç­”æ•°æ®ä¸€èµ·å‘é€ï¼Œå°±åƒæ˜¯åº”ç­”æ•°æ®æå¸¦ç€ACKè¿‡å»ã€‚åœ¨æˆ‘ä¹‹å‰çš„æ—¶é—´ä¸­ï¼Œtå¤§æ¦‚å°±æ˜¯40msã€‚è¿™å°±è§£é‡Šäº†ä¸ºä»€ä¹ˆâ€™\r\nâ€™ï¼ˆBå—ï¼‰æ€»æ˜¯åœ¨Aå—ä¹‹å40msæ‰å‘å‡ºã€‚ å½“ç„¶ï¼ŒTCPç¡®è®¤å»¶è¿Ÿ40mså¹¶ä¸æ˜¯ä¸€ç›´ä¸å˜çš„ï¼ŒTCPè¿æ¥çš„å»¶è¿Ÿç¡®è®¤æ—¶é—´ä¸€èˆ¬åˆå§‹åŒ–ä¸ºæœ€å°å€¼40msï¼Œéšåæ ¹æ®è¿æ¥çš„é‡ä¼ è¶…æ—¶æ—¶é—´ï¼ˆRTOï¼‰ã€ä¸Šæ¬¡æ”¶åˆ°æ•°æ®åŒ…ä¸æœ¬æ¬¡æ¥æ”¶æ•°æ®åŒ…çš„æ—¶é—´é—´éš”ç­‰å‚æ•°è¿›è¡Œä¸æ–­è°ƒæ•´ã€‚å¦å¤–å¯ä»¥é€šè¿‡è®¾ç½®TCP_QUICKACKé€‰é¡¹æ¥å–æ¶ˆç¡®è®¤å»¶è¿Ÿã€‚ 2. TCP_NODELAY é€‰é¡¹ é»˜è®¤æƒ…å†µä¸‹ï¼Œå‘é€æ•°æ®é‡‡ç”¨Nagle ç®—æ³•ã€‚è¿™æ ·è™½ç„¶æé«˜äº†ç½‘ç»œååé‡ï¼Œä½†æ˜¯å®æ—¶æ€§å´é™ä½äº†ï¼Œåœ¨ä¸€äº›äº¤äº’æ€§å¾ˆå¼ºçš„åº”ç”¨ç¨‹åºæ¥è¯´æ˜¯ä¸å…è®¸çš„ï¼Œä½¿ç”¨TCP_NODELAYé€‰é¡¹å¯ä»¥ç¦æ­¢Nagle ç®—æ³•ã€‚ æ­¤æ—¶ï¼Œåº”ç”¨ç¨‹åºå‘å†…æ ¸é€’äº¤çš„æ¯ä¸ªæ•°æ®åŒ…éƒ½ä¼šç«‹å³å‘é€å‡ºå»ã€‚éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œè™½ç„¶ç¦æ­¢äº†Nagle ç®—æ³•ï¼Œä½†ç½‘ç»œçš„ä¼ è¾“ä»ç„¶å—åˆ°TCPç¡®è®¤å»¶è¿Ÿæœºåˆ¶çš„å½±å“ã€‚ 3. TCP_CORK é€‰é¡¹ æ‰€è°“çš„CORKå°±æ˜¯å¡å­çš„æ„æ€ï¼Œå½¢è±¡åœ°ç†è§£å°±æ˜¯ç”¨CORKå°†è¿æ¥å¡ä½ï¼Œä½¿å¾—æ•°æ®å…ˆä¸å‘å‡ºå»ï¼Œç­‰åˆ°æ‹”å»å¡å­åå†å‘å‡ºå»ã€‚è®¾ç½®è¯¥é€‰é¡¹åï¼Œå†…æ ¸ä¼šå°½åŠ›æŠŠå°æ•°æ®åŒ…æ‹¼æ¥æˆä¸€ä¸ªå¤§çš„æ•°æ®åŒ…ï¼ˆä¸€ä¸ªMTUï¼‰å†å‘é€å‡ºå»ï¼Œå½“ç„¶è‹¥ä¸€å®šæ—¶é—´åï¼ˆä¸€èˆ¬ä¸º200msï¼Œè¯¥å€¼å°šå¾…ç¡®è®¤ï¼‰ï¼Œå†…æ ¸ä»ç„¶æ²¡æœ‰ç»„åˆæˆä¸€ä¸ªMTUæ—¶ä¹Ÿå¿…é¡»å‘é€ç°æœ‰çš„æ•°æ®ï¼ˆä¸å¯èƒ½è®©æ•°æ®ä¸€ç›´ç­‰å¾…å§ï¼‰ã€‚ ç„¶è€Œï¼ŒTCP_CORKçš„å®ç°å¯èƒ½å¹¶ä¸åƒä½ æƒ³è±¡çš„é‚£ä¹ˆå®Œç¾ï¼ŒCORKå¹¶ä¸ä¼šå°†è¿æ¥å®Œå…¨å¡ä½ã€‚å†…æ ¸å…¶å®å¹¶ä¸çŸ¥é“åº”ç”¨å±‚åˆ°åº•ä»€ä¹ˆæ—¶å€™ä¼šå‘é€ç¬¬äºŒæ‰¹æ•°æ®ç”¨äºå’Œç¬¬ä¸€æ‰¹æ•°æ®æ‹¼æ¥ä»¥è¾¾åˆ°MTUçš„å¤§å°ï¼Œå› æ­¤å†…æ ¸ä¼šç»™å‡ºä¸€ä¸ªæ—¶é—´é™åˆ¶ï¼Œåœ¨è¯¥æ—¶é—´å†…æ²¡æœ‰æ‹¼æ¥æˆä¸€ä¸ªå¤§åŒ…ï¼ˆåŠªåŠ›æ¥è¿‘MTUï¼‰çš„è¯ï¼Œå†…æ ¸å°±ä¼šæ— æ¡ä»¶å‘é€ã€‚ä¹Ÿå°±æ˜¯è¯´è‹¥åº”ç”¨å±‚ç¨‹åºå‘é€å°åŒ…æ•°æ®çš„é—´éš”ä¸å¤ŸçŸ­æ—¶ï¼ŒTCP_CORKå°±æ²¡æœ‰ä¸€ç‚¹ä½œç”¨ï¼Œåè€Œå¤±å»äº†æ•°æ®çš„å®æ—¶æ€§ï¼ˆæ¯ä¸ªå°åŒ…æ•°æ®éƒ½ä¼šå»¶æ—¶ä¸€å®šæ—¶é—´å†å‘é€ï¼‰ã€‚ 4. Nagleç®—æ³•ä¸ CORKç®—æ³•åŒºåˆ« Nagleç®—æ³•å’ŒCORKç®—æ³•éå¸¸ç±»ä¼¼ï¼Œä½†æ˜¯å®ƒä»¬çš„ç€çœ¼ç‚¹ä¸ä¸€æ ·ï¼ŒNagleç®—æ³•ä¸»è¦é¿å…ç½‘ç»œå› ä¸ºå¤ªå¤šçš„å°åŒ…ï¼ˆåè®®å¤´çš„æ¯”ä¾‹éå¸¸ä¹‹å¤§ï¼‰è€Œæ‹¥å¡ï¼Œè€ŒCORKç®—æ³•åˆ™æ˜¯ä¸ºäº†æé«˜ç½‘ç»œçš„åˆ©ç”¨ç‡ï¼Œä½¿å¾—æ€»ä½“ä¸Šåè®®å¤´å ç”¨çš„æ¯”ä¾‹å°½å¯èƒ½çš„å°ã€‚å¦‚æ­¤çœ‹æ¥è¿™äºŒè€…åœ¨é¿å…å‘é€å°åŒ…ä¸Šæ˜¯ä¸€è‡´çš„ï¼Œåœ¨ç”¨æˆ·æ§åˆ¶çš„å±‚é¢ä¸Šï¼ŒNagleç®—æ³•å®Œå…¨ä¸å—ç”¨æˆ·socketçš„æ§åˆ¶ï¼Œä½ åªèƒ½ç®€å•çš„è®¾ç½®TCP_NODELAYè€Œç¦ç”¨å®ƒï¼ŒCORKç®—æ³•åŒæ ·ä¹Ÿæ˜¯é€šè¿‡è®¾ç½®æˆ–è€…æ¸…é™¤TCP_CORKä½¿èƒ½æˆ–è€…ç¦ç”¨ä¹‹ï¼Œç„¶è€ŒNagleç®—æ³•å…³å¿ƒçš„æ˜¯ç½‘ç»œæ‹¥å¡é—®é¢˜ï¼Œåªè¦æ‰€æœ‰çš„ACKå›æ¥åˆ™å‘åŒ…ï¼Œè€ŒCORKç®—æ³•å´å¯ä»¥å…³å¿ƒå†…å®¹ï¼Œåœ¨å‰åæ•°æ®åŒ…å‘é€é—´éš”å¾ˆçŸ­çš„å‰æä¸‹ï¼ˆå¾ˆé‡è¦ï¼Œå¦åˆ™å†…æ ¸ä¼šå¸®ä½ å°†åˆ†æ•£çš„åŒ…å‘å‡ºï¼‰ï¼Œå³ä½¿ä½ æ˜¯åˆ†æ•£å‘é€å¤šä¸ªå°æ•°æ®åŒ…ï¼Œä½ ä¹Ÿå¯ä»¥é€šè¿‡ä½¿èƒ½CORKç®—æ³•å°†è¿™äº›å†…å®¹æ‹¼æ¥åœ¨ä¸€ä¸ªåŒ…å†…ï¼Œå¦‚æœæ­¤æ—¶ç”¨Nagleç®—æ³•çš„è¯ï¼Œåˆ™å¯èƒ½åšä¸åˆ°è¿™ä¸€ç‚¹ã€‚ TCP ç²˜åŒ…é—®é¢˜åœ¨ä¸Šé¢çš„ TCP æœåŠ¡ç«¯å’Œå®¢æˆ·ç«¯æ”¶æ•°æ®çš„æ—¶å€™å¡«çš„éƒ½æ˜¯1024å­—èŠ‚,è¡¨ç¤ºä¸€æ¬¡ä»æ“ä½œç³»ç»Ÿçš„ç¼“å­˜åŒºåŸŸæ”¶å–æœ€å¤§1024å­—èŠ‚çš„æ•°æ®,å½“ä¸€æ¬¡å‘é€æ•°æ®é‡å°äº1924å­—èŠ‚çš„æ—¶å€™æ¯æ¬¡éƒ½å¯ä»¥æŠŠæ•°æ®æ”¶å–å¹²å‡€,è¿™å½“ç„¶æ˜¯æ²¡é—®é¢˜çš„,ä½†æ˜¯å¦‚æœæ•°æ®é‡å¤§äº1024å‘¢?ä¼šå‘ç”Ÿä»€ä¹ˆç°è±¡.ä¼šå‘ç”Ÿç²˜åŒ…, ä¸Šè¿°ä»£ç æ˜¾ç¤ºäº†ç¬¬ä¸€ä¸­ç²˜åŒ…æƒ…å†µ,å°±æ˜¯ä¸€æ–¹æ”¶å–çš„æ•°æ®é‡å°äºç¼“å­˜ä¸­çš„æ•°æ®é‡,é€ æˆç²˜åŒ…,å¦å¤–ä¸€ç§æ˜¯ç”±äº Nagleç®—æ³•å¯¼è‡´çš„,å½“å®¢æˆ·ç«¯è¿ç»­å‘é€ä¸¤ä¸ªæ•°æ®é‡è¾ƒå°çš„åŒ…æ—¶,ç®—æ³•ä¼šå°†è¿™ä¸¤ä¸ªä¸€èµ·å‘é€é€ æˆç²˜åŒ…. ç¬¬äºŒç§ç²˜åŒ…ä¾‹å­: 1234567891011121314151617181920212223# æœåŠ¡ç«¯from socket import *import subprocessserverSock = socket(AF_INET, SOCK_STREAM)serverSock.bind(('', 8086))serverSock.listen(5)conn, addr = serverSock.accept()data1 = conn.recv(5)print('ç¬¬ä¸€æ¬¡æ”¶:', data1)data2 = conn.recv(5)print('ç¬¬äºŒæ¬¡æ”¶:', data2)data3 = conn.recv(10)print('ç¬¬ä¸‰æ¬¡æ”¶:', data3)data4 = conn.recv(5)print('ç¬¬å››æ¬¡æ”¶:', data4)# ç²˜åŒ…é—®é¢˜æ˜¯ tcp åè®®æµå¼ä¼ è¾“æ•°æ®çš„æ–¹å¼å¯¼è‡´çš„# å¦‚ä½•è§£å†³ç²˜åŒ…é—®é¢˜:æ¥æ”¶ç«¯èƒ½å¤Ÿç²¾ç¡®åœ°æ”¶å¹²å‡€æ¯ä¸ªæ•°æ®åŒ…æ²¡æœ‰ä»»ä½•æ®‹ç•™ 1234567891011# å®¢æˆ·ç«¯from socket import *clientSock = socket(AF_INET, SOCK_STREAM)clientSock.connect(('', 8086))# tcp åè®®ä¼šå°†æ•°æ®é‡è¾ƒå°ä¸”å‘é€æ—¶é—´é—´éš”çš„æ•°æ®åˆå¹¶æˆä¸€ä¸ªåŒ…å‘é€clientSock.send(b'hello')clientSock.send(b'world')clientSock.send(b'musibii')clientSock.send(b'1') 12345# è¿è¡Œç»“æœç¬¬ä¸€æ¬¡æ”¶: b'hello'ç¬¬äºŒæ¬¡æ”¶: b'world'ç¬¬ä¸‰æ¬¡æ”¶: b'musibii1'ç¬¬å››æ¬¡æ”¶: b'' å¯ä»¥çœ‹å‡ºå½“ä¸¤æ¬¡å‘åŒ…é—´éš”æ—¶é—´è¾ƒçŸ­ä¸”æ•°æ®é‡è¾ƒå°‘æ—¶,ä¼šå½“æˆä¸€ä¸ªåŒ…å‘é€å‡ºå». é‚£ä¹ˆæ€ä¹ˆè§£å†³ç²˜åŒ…é—®é¢˜å‘¢? ä¸€æ˜¯å› ä¸ºæ•°æ®é‡å¤ªå¤§æ”¶å–ä¸å®Œå…¨å¯¼è‡´çš„,äºŒæ˜¯å› ä¸ºä¸¤æ¬¡å‘åŒ…é—´éš”æ—¶é—´è¾ƒçŸ­ä¸”æ•°æ®é‡è¾ƒå°å¯¼è‡´çš„,å¯¼è‡´æ”¶å–çš„ä¸€æ–¹å°†ä¸¤æ¬¡æ•°æ®ä¸€æ¬¡æ€§æ”¶å–å®Œæˆ. è§£å†³åŠæ³•ä¸€è¿˜æ˜¯ä»¥æ¨¡æ‹Ÿ ssh è¿œç¨‹æ‰§è¡Œå‘½ä»¤çš„ä»£ç ä½œä¸ºä¾‹å­: é¦–å…ˆæ ¹æœ¬åŸå› æ˜¯æ”¶å–çš„ä¸€æ–¹ä¸çŸ¥é“åˆ°åº•åº”è¯¥æ”¶å–å¤šå°‘æ•°æ®é‡å¯¼è‡´çš„,é‚£ä¹ˆæˆ‘ä»¬åœ¨æ¯æ¬¡å‘åŒ…ä¹‹å‰å°†æ•°æ®çš„é•¿åº¦å‘è¿‡å»,ç„¶ååœ¨å‘é€çœŸå®æ•°æ®,æ¥æ”¶ç«¯å…ˆæ¥æ”¶åˆ°çœŸå®æ•°æ®çš„é•¿åº¦å¤§å°,ç„¶åä¾æ®çœŸå®æ•°æ®é•¿åº¦å¤§å°æ¥æ”¶åŒ…ä¸å°±å®Œç¾è§£å†³äº†å—. çœ‹å®ä¾‹: æœåŠ¡ç«¯ 123456789101112131415161718192021222324252627282930313233from socket import *import subprocessimport struct # è¯¥æ¨¡å—ä¸“é—¨ç”¨æ¥å¤„ç†å­—èŠ‚çš„æ•°æ®ç±»å‹serverSock = socket(AF_INET, SOCK_STREAM)serverSock.bind(('', 8088))serverSock.listen(5)while True: conn, addr = serverSock.accept() while True: try: cmd = conn.recv(1024) if len(cmd) == 0: break obj = subprocess.Popen(cmd.decode('utf-8'), shell=True, stdout=subprocess.PIPE, stderr=subprocess.PIPE) stdout = obj.stdout.read() stderr = obj.stderr.read() print(len(stdout) + len(stderr)) data_len = len(stdout) + len(stderr) # 1. å…ˆåˆ¶ä½œå›ºå®šé•¿åº¦çš„æŠ¥å¤´ header = struct.pack('i', data_len) # iè¡¨ç¤ºè½¬ int å‹ # 2. å‘é€æŠ¥å¤´ conn.send(header) # 3. å‘é€çœŸå®æ•°æ® conn.send(stdout) conn.send(stderr) except ConnectionResetError: break conn.close()serverSock.close() å®¢æˆ·ç«¯ 1234567891011121314151617181920212223from socket import *import structclientSock = socket(AF_INET, SOCK_STREAM)clientSock.connect(('', 8088))while True: cmd = input('&gt;&gt;&gt;').strip() if len(cmd) == 0: continue clientSock.send(cmd.encode('utf-8')) # 1. å…ˆæ”¶æŠ¥å¤´,ä»æŠ¥å¤´é‡Œè§£å‡ºçœŸå®æ•°æ®é•¿åº¦ header = clientSock.recv(1024) total_size = struct.unpack('i', header)[0] # 2. æ¥æ”¶çœŸå®æ•°æ® cmd_res = b'' recv_size = 0 while recv_size &lt; total_size: data = clientSock.recv(1024) recv_size += len(data) cmd_res += data print(cmd_res.decode('utf-8'))clientSock.close() å¯ä»¥çœ‹å‡ºæ¥,æ•°æ®å¯ä»¥æ”¶å¹²å‡€äº†,æ‰€ä»¥ç›®å‰æ¥è®²æ˜¯ä¸å­˜åœ¨ç²˜åŒ…é—®é¢˜çš„,ä½†æ˜¯é—®é¢˜åˆæ¥äº†,åœ¨å®é™…åº”ç”¨ä¸­,æƒ³è¦ä¼ è¾“çš„æ•°æ®å¦‚æœå¾ˆå¤§æ€ä¹ˆåŠ?è¿™ç§åŠæ³•ä¹Ÿå¯ä»¥è¡Œå¾—é€šå—? å½“æˆ‘æŠŠè¦ä¼ è¾“çš„æ•°æ®å¤§å°è°ƒå¤§æ—¶: 123# demoimport structdata_len = struct.pack('1', 1111111111111111111) è¿è¡Œç»“æœ è¿™è¯´æ˜ struct è½¬åŒ– int ç±»å‹çš„æ—¶å€™æ˜¯æœ‰å¤§å°é™åˆ¶çš„,æ•°å­—å¤ªå¤§çš„è½¬ä¸äº†,é‚£ä¹ˆ struct è¿˜æœ‰ä¸€ä¸ªç±»å‹è¡¨ç¤ºé•¿æ•´å½¢çš„ä¸º q, æ¥è¯•è¯•çœ‹. 123# demoimport structdata_len = struct.pack('q', 11111111111) è¿è¡Œç»“æœ å¯ä»¥çœ‹å‡ºæ¥æ˜¯å¯ä»¥è½¬çš„,è½¬æˆäº†8ä¸ªå­—èŠ‚,é‚£ä¹ˆå¦‚æœæ•°å­—åœ¨å¤§ä¸€ç‚¹å‘¢,æ€»å½’æœ‰ä¸€ä¸ªä¸èƒ½è½¬çš„æ•°å­—,é‚£ä¹ˆè¿™å°±ä¸æ˜¯æœ€å¥½çš„è§£å†³åŠæ³•. è§£å†³åŠæ³•äºŒæˆ‘ä»¬åªæƒ³æ¥æ”¶ç«¯æ¥æ”¶åˆ°çœŸå®çš„æ•°æ®é•¿åº¦å°±å¯ä»¥äº†,é‚£ä¹ˆå¯ä¸å¯ä»¥ç”¨ä¸€ä¸ªå®¹å™¨æŠŠçœŸå®æ•°æ®é•¿åº¦ä¿å­˜ç„¶åé€šè¿‡è½¬åŒ–ä¼ è¾“å‡ºå»å‘¢. è¿™å°±æ˜¯åœ¨è‡ªå·±å¼€å‘ä¸€æ¬¾ C/S ç¨‹åºæ—¶éœ€è¦è€ƒè™‘çš„é—®é¢˜äº†,æ¶‰åŠåˆ°æ•°æ®ä¼ è¾“çš„è¯å°±éœ€è¦è‡ªå®šä¹‰æŠ¥å¤´äº†.æŠ¥å¤´å°±æ˜¯å¯ä»¥å°†çœŸå®æ•°æ®çš„ä¸€äº›ä¿¡æ¯ä¿å­˜èµ·æ¥,å…ˆäºçœŸå®æ•°æ®å‘é€å‡ºå» è‡ªå®šä¹‰æŠ¥å¤´ 123456789101112131415import structimport jsonheader_dic = &#123; 'filename': 'musibii.jpg', 'md5': '165069c8f668edb6b48f208f7a5c6a00', 'total_size': 11111111111111111111111111111111111111&#125;header_json = json.dumps(header_dic)header_bytes = header_json.encode('utf-8')print(len(header_bytes), header_bytes)data_bytes_len = struct.pack('i', len(header_bytes))print(data_bytes_len,len(data_bytes_len)) è¿è¡Œç»“æœ å¯ä»¥çœ‹å‡ºæ¥,é€šè¿‡è¿™ç§æ–¹æ³•å¯ä»¥æŠŠæ•°æ®é‡å¾ˆå¤§çš„ä¸œè¥¿å‘é€ç»™å®¢æˆ·ç«¯. å…·ä½“è§£å†³åŠæ³• æœåŠ¡ç«¯ 123456789101112131415161718192021222324252627282930313233343536373839404142434445from socket import *import json,structserverSock = socket(AF_INET, SOCK_STREAM)serverSock.bind(('', 9090))serverSock.listen(5)while True: conn, addr = serverSock.accept() while True: try: data = conn.recv(1024) if len(data) == 0: break obj = subprocess.Popen(data.decode('utf-8'), shell=True, stdout=subprocess.PIPE, stderr=subprocess.PIPE) stdout = obj.stdout.read() stderr = obj.stderr.read() data_bytes_len = len(stdout) + len(stderr) # 1. å…ˆåˆ¶ä½œæŠ¥å¤´ header_dic = &#123; 'filename': 'musibii.jpg', 'md5': '165069c8f668edb6b48f208f7a5c6a00', 'total_size': data_bytes_len &#125; header_json = json.dumps(header_dic) header_bytes = header_json.encode('utf-8') # 2. å…ˆå‘é€4ä¸ª bytes çš„å­—å…¸è½¬åŒ–åçš„å­—èŠ‚ conn.send(struct.pack('i', len(header_bytes))) # 3. å‘é€å®Œæ•´æŠ¥å¤´ conn.send(header_bytes) # 4. å‘é€çœŸå®æ•°æ® conn.send(stdout) conn.send(stderr) except ConnectionResetError as e: print(e) break conn.close()serverSock.close() å®¢æˆ·ç«¯ 12345678910111213141516171819202122232425262728293031323334from socket import *import struct,jsonclientSock = socket(AF_INET, SOCK_STREAM)clientSock.connect(('', 9090))while True: cmd = input('&gt;&gt;&gt;').strip() if len(cmd) == 0: continue clientSock.send(cmd.encode('utf-8')) # 1. å…ˆæ”¶4bytes çš„æœåŠ¡ç«¯å‘è¿‡æ¥çš„è½¬åŒ–æŠ¥å¤´ header_size = struct.unpack('i', clientSock.recv(4))[0] # 2. æ¥æ”¶å®Œæ•´çš„æŠ¥å¤´,å°±æ˜¯ header_dic header_bytes = clientSock.recv(header_size) # 3. è½¬åŒ–å¾—åˆ°å®Œæ•´çš„æŠ¥å¤´å­—å…¸ header_json = header_bytes.decode('utf-8') header_dic = json.loads(header_json) # 4. æ ¹æ® key å¾—åˆ°çœŸå®æ•°æ®é•¿åº¦ total_size = header_dic['total_size'] # 5. æ¥å—çœŸæ­£çš„æ•°æ® cmd_res = b'' recv_size = 0 while recv_size &lt; total_size: data = clientSock.recv(1024) recv_size += len(data) cmd_res += data print(cmd_res.decode('utf-8'))clientSock.close() è¿™ä¸ªç¨‹åºå°±åŠ äº†ä¸¤ä¸ªæ­¥éª¤,åœ¨å‘é€çœŸå®æ•°æ®ä¹‹å‰å‘é€äº†4ä¸ªå­—èŠ‚çš„æŠ¥å¤´,ç„¶åå‘é€äº†çœŸæ˜¯çš„æŠ¥å¤´æ•°æ®. é¦–å…ˆåœ¨æœåŠ¡ç«¯å®šä¹‰æŠ¥å¤´(å­—å…¸ç±»å‹),ç”±å­—å…¸è½¬ä¸º json æ ¼å¼,ç”± json æ ¼å¼è½¬ä¸ºäºŒè¿›åˆ¶,ç”± struct è½¬æˆå››ä¸ªå­—èŠ‚çš„æ•°æ®,å®¢æˆ·ç«¯æ”¶åˆ°4ä¸ªå­—èŠ‚struct è½¬åŒ–çš„æ•°æ®, unpack æˆäºŒè¿›åˆ¶, decode ä¸º json æ ¼å¼çš„æ•°æ®ç±»å‹,ç„¶åååºåˆ—åŒ–æˆ python å­—å…¸ç±»å‹,å¾—åˆ°é‡Œé¢çš„çœŸå®æ•°æ®é•¿åº¦.ç„¶åæœåŠ¡ç«¯å‘é€çœŸå®æ•°æ®,å®¢æˆ·ç«¯å¾ªç¯æ¥æ”¶çœŸå®æ•°æ®. åˆ°æ­¤,å°±å®Œç¾çš„è§£å†³äº†ç²˜åŒ…çš„é—®é¢˜.å¦‚æœ‰ä¸å¯¹çš„åœ°æ–¹,æ¬¢è¿æŒ‡æ­£.]]></content>
      <categories>
        <category>ç½‘ç»œç¼–ç¨‹</category>
      </categories>
  </entry>
  <entry>
    <title><![CDATA[ç½‘ç»œç¼–ç¨‹(ä¸‰)]]></title>
    <url>%2F2018%2F11%2F07%2F%E7%BD%91%E7%BB%9C%E7%BC%96%E7%A8%8B-%E4%B8%89%2F</url>
    <content type="text"><![CDATA[åœ¨ä¹‹å‰ä¸¤ç¯‡æ–‡ç« æˆ‘ä»¬å·²ç»å¤§æ¦‚äº†è§£äº†äº’è”ç½‘çš„å·¥ä½œåŸç†,çŸ¥é“äº†ä¸€ä¸ªæ•°æ®åŒ…çš„è¯ç”Ÿä¸ç»“æŸä¸­é—´ç»å†çš„è¿‡ç¨‹,é‚£ä¹ˆåœ¨è¿™ç¯‡åšå®¢æˆ‘ä»¬å°†äº†è§£ä¸€ä¸ªç¨³å®šå¯é åœ° TCP è¿æ¥æ˜¯æ€ä¹ˆäº§ç”Ÿçš„,å®ƒçš„æ•°æ®ä¼ é€æœ‰ä»€ä¹ˆä¼˜ç‚¹å’Œç¼ºç‚¹? è¯¥åšå®¢å°†é‡ç‚¹ä»‹ç» ä¼ è¾“å±‚çš„ TCP åè®®å»ºç«‹è¿æ¥å’Œæ–­å¼€è¿æ¥çš„è¿‡ç¨‹. UDP å› ä¸ºä¸æ˜¯å¯é çš„è¿æ¥æ‰€ä»¥å°±ä¸é‡ç‚¹ä»‹ç»äº†. ä»‹ç»åœ¨ä¼ è¾“å±‚é€šå¸¸éµå¾ªçš„åè®®ä¸º TCP å’Œ UDPåè®®,å¹¶ä¸”æ˜¯åŸºäºç«¯å£è¿è¡Œçš„,ä½†æ˜¯ä¸¤è€…ä¸ºåº”ç”¨å±‚æä¾›ä¸åŒçš„æœåŠ¡. TCP æä¾›çš„æ˜¯ä¸€ç§ç¨³å®š,å¯é åœ°å­—èŠ‚æµæœåŠ¡. é¢å‘è¿æ¥æ„å‘³ç€ä¸¤ä¸ªä½¿ç”¨ TCP çš„åº”ç”¨åœ¨æ•°æ®ä¼ é€ä¹‹å‰éœ€è¦å»ºç«‹ TCP è¿æ¥.è¿™ä¸€è¿‡ç¨‹å¯ä»¥ç†è§£ä¸ºæ‰“ç”µè¯,å…ˆæ‹¨å·,ç­‰å¾…æ¥é€š,ç„¶åç¨³å®šçš„é€šä¿¡. é‚£ä¹ˆ UDP æ˜¯æ— è¿æ¥,ä¸å¯é çš„æ•°æ®åŒ…æœåŠ¡,å› ä¸ºæ— è¿æ¥,æ‰€ä»¥å¯èƒ½ä¼šäº§ç”Ÿä¸¢åŒ…,ä½†æ˜¯æ•ˆç‡å´è¾ƒé«˜,å› ä¸ºä¸ç”¨å¯¹æ–¹å‘é€ç¡®è®¤åŒ…,æ‰€ä»¥ UDP å¹¿æ³›åº”ç”¨ä¸æ¸¸æˆ,ç›´æ’­ç­‰è½¯ä»¶. TCP æŠ¥æ–‡æ ¼å¼åœ¨ç½‘ç»œç¼–ç¨‹(äºŒ)ä¸­å·²ç»çŸ¥é“ TCPæ˜¯åŸºäºç«¯å£å‘é€æ•°æ®åŒ…çš„,æ‰€ä»¥ä¼šè®°å½•æœ¬æœºç«¯å£å·å’Œç›®çš„ç«¯å£å·,å…·ä½“æ ¼å¼å¦‚ä¸‹: ä¸Šå›¾æœ‰å‡ ä¸ªé‡è¦çš„å­—æ®µéœ€è¦äº†è§£: åº åˆ—å·: seq åºå·,å 32ä½,ç”¨æ¥æ ‡è¯†ä» TCP æºç«¯å‘ç›®çš„ç«¯å‘é€çš„å­—èŠ‚æµ,å‘é€æ–¹çš„å‘é€æ•°æ®æ—¶å¯¹æ¯”è¿›è¡Œæ ‡è®°; ç¡®è®¤å·: ACK åºå·,å 32ä½,åªæœ‰ ACK æ ‡å¿—ä½ä½1æ—¶,ç¡®è®¤å·å­—æ®µæ‰æœ‰æ•ˆ, ack=seq+1; æ ‡å¿—ä½:å…±6ä¸ª,å³ URG,ACK,PSH,RST,SYN,FIN ç­‰,å…·ä½“å«ä¹‰å¦‚ä¸‹: URG: ç´§æ€¥æŒ‡é’ˆæœ‰æ•ˆ; ACK: ç¡®è®¤åºå·æœ‰æ•ˆ; PSH: æ¥æ”¶æ–¹åº”è¯¥å°½å¿«å°†æŠ¥æ–‡äº¤ç»™åº”ç”¨å±‚; RST: é‡ç½®è¿æ¥; SYN: å‘èµ·ä¸€ä¸ªæ–°è¿æ¥ FIN: é‡Šæ”¾ä¸€ä¸ªè¿æ¥. ä¸¤ä¸ªå·ç  Sequene number: é¡ºåºå·ç  Acknowledge number: ç¡®è®¤å·ç  æ³¨æ„: ä¸è¦å°†ç¡®è®¤åºå· Ack ä¸æ ‡å¿—ä½ä¸­çš„ ACK ææ··äº†; ç¡®è®¤æ–¹ ack=seq+1(ä¸è®ºå“ªæ–¹å‘é€),ä¸¤ç«¯æ‰å»ºç«‹è¿æ¥. ä¸‰æ¬¡æ¡æ‰‹è¯¦è§£æ‰€è°“çš„ä¸‰æ¬¡æ¡æ‰‹( Three-Way Handshake)å³å»ºç«‹ TCP è¿æ¥,å°±æ˜¯æŒ‡å»ºç«‹ä¸€ä¸ª TCP è¿æ¥æ—¶,éœ€è¦å®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯å‘é€ä¸‰ä¸ªåŒ…ç”¨æ¥ç¡®è®¤è¿æ¥çš„å»ºç«‹.åœ¨å¥—æ¥å­—ç¼–ç¨‹ä¸­,è¿™ä¸€è¿‡ç¨‹ç”±å®¢æˆ·ç«¯æ‰§è¡Œ connect æ¥ä¸»åŠ¨è§¦å‘,æ•´ä¸ªæµç¨‹å¦‚ä¸‹: ä¸‰æ¬¡æ¡æ‰‹ ç¬¬ä¸€æ¬¡æ¡æ‰‹: å®¢æˆ·ç«¯å‘é€ SYN åŒ…( seq=x)çš„æ•°æ®åŒ…åˆ°æœåŠ¡å™¨,å¹¶è¿›å…¥ SYN_SEND çŠ¶æ€,ç­‰å¾…æœåŠ¡å™¨ç¡®è®¤; ç¬¬äºŒæ¬¡æ¡æ‰‹: æœåŠ¡å™¨æ”¶åˆ° SYN åŒ…,å¿…é¡»ç¡®è®¤å®¢æˆ·ç«¯çš„ SYN(ACK=x+1),åŒæ—¶è‡ªå·±ä¹Ÿå‘é€ä¸€ä¸ª SYN åŒ…(seq=y),å³ SYN+ACK åŒ…,æ­¤æ—¶æœåŠ¡å™¨è¿›å…¥ SYN_RCVD çŠ¶æ€; ç¬¬ä¸‰æ¬¡æ¡æ‰‹: å®¢æˆ·ç«¯æ”¶åˆ°æœåŠ¡å™¨çš„ SYN+ACK åŒ…,å‘æœåŠ¡å™¨å‘é€ç¡®è®¤åŒ… ACK(ACK=y+1),æ­¤åŒ…å‘é€å®Œæ¯•,å®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯éƒ½è¿›å…¥ ESTABLISHED çŠ¶æ€,å®Œæˆä¸‰æ¬¡æ¡æ‰‹. æ³¨æ„ æ¡æ‰‹è¿‡ç¨‹ä¼ é€çš„åŒ…ä¸åŒ…å«ä»»ä½•æ•°æ®,ä¸‰æ¬¡æ¡æ‰‹å®Œæ¯•å,å®¢æˆ·ç«¯ä¸æœåŠ¡å™¨æ‰æ­£å¼å¼€å§‹ä¼ é€æ•°æ®.ç†æƒ³çŠ¶æ€ä¸‹, TCP è¿æ¥å»ºç«‹.åœ¨é€šä¿¡åŒæ–¹ä¸­çš„ä»»ä½•ä¸€æ–¹ä¸»åŠ¨å…³é—­è¿æ¥ä¹‹å‰, TCP è¿æ¥éƒ½å°†è¢«ä¸€ç›´ä¿æŒä¸‹å».(åŒæ–¹éƒ½å¯ä»¥ä¸»åŠ¨æ–­å¼€è¿æ¥) å››æ¬¡æŒ¥æ‰‹è¯¦è§£åœ¨å»ºç«‹ TCP è¿æ¥ä¹‹å,å®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯å¼€å§‹ä¼ è¾“æ•°æ®,å› ä¸ºè¿™æ˜¯åŒå‘è¿æ¥,æ‰€ä»¥ä»»ä¸€æ–¹éƒ½å¯ä»¥ä¸»åŠ¨æ–­å¼€è¿æ¥. å››æ¬¡æŒ¥æ‰‹ ç¬¬ä¸€æ¬¡æŒ¥æ‰‹: ä¸»åŠ¨å…³é—­æ–¹å‘é€ä¸€ä¸ª FIN, ç”¨æ¥å…³é—­ä¸»åŠ¨æ–¹åˆ°è¢«åŠ¨æ–¹çš„æ•°æ®ä¼ é€,ä¹Ÿå°±æ˜¯ä¸»åŠ¨å…³é—­æ–¹å‘Šè¯‰è¢«åŠ¨å…³é—­æ–¹:æˆ‘çš„æ•°æ®ä¼ è¾“å·²ç»å®Œæˆäº†,ä¸ä¼šå†ç»™ä½ å‘é€æ•°æ®äº†(å½“ç„¶,åœ¨ FIN åŒ…ä¹‹å‰å‘é€å‡ºå»çš„æ•°æ®,å¦‚æœæ²¡æœ‰æ”¶åˆ°å¯¹åº”çš„ ACK ç¡®è®¤æŠ¥æ–‡,ä¸»åŠ¨å…³é—­æ–¹ä¾ç„¶ä¼šé‡å‘è¿™äº›æ•°æ®),ä½†æ˜¯æ­¤æ—¶ä¸»åŠ¨å…³é—­æ–¹è¿˜å¯ä»¥æ¥æ”¶æ•°æ®. ç¬¬äºŒæ¬¡æŒ¥æ‰‹: è¢«åŠ¨å…³é—­æ–¹æ”¶åˆ° FIN åŒ…å,å‘é€ä¸€ä¸ª ACK ç»™å¯¹æ–¹,ç¡®è®¤åºå·ä¸ºæ”¶åˆ°åºå·+1(ä¸ SYN ç›¸åŒ,ä¸€ä¸ª FIN å ç”¨ä¸€ä¸ªåºå·). ç¬¬ä¸‰æ¬¡æŒ¥æ‰‹: è¢«åŠ¨å…³é—­æ–¹å‘é€ä¸€ä¸ª FIN, ç”¨æ¥å…³é—­è¢«åŠ¨å…³é—­æ–¹åˆ°ä¸»åŠ¨å…³é—­æ–¹çš„æ•°æ®ä¼ é€,ä¹Ÿå°±æ˜¯å‘Šè¯‰ä¸»åŠ¨å…³é—­æ–¹,æˆ‘çš„æ•°æ®ä¹Ÿå‘é€å®Œæˆ,ä¸ä¼šå†ç»™ä½ å‘é€æ•°æ®äº†(ä½†æ˜¯åœ¨ FIN å‘é€ä¹‹å‰å‘é€çš„æ•°æ®ä»ç„¶éœ€è¦ä¸»åŠ¨å…³é—­æ–¹å‘é€ç¡®è®¤åŒ…). ç¬¬å››æ¬¡æŒ¥æ‰‹: ä¸»åŠ¨å…³é—­æ–¹æ”¶åˆ° FIn å,å‘é€ä¸€ä¸ª ACK ç»™è¢«åŠ¨å…³é—­æ–¹,ç¡®è®¤åºå·ä¸ºæ”¶åˆ°åºå·+1,è‡³æ­¤,å®Œæˆå››æ¬¡æŒ¥æ‰‹. TCP çŠ¶æ€è½¬æ¢å›¾ CLOSED: è¡¨ç¤ºåˆå§‹çŠ¶æ€ LISTEN(æœåŠ¡å™¨): è¡¨ç¤ºæœåŠ¡å™¨çš„æŸä¸ªå¥—æ¥å­—å¤„äºåšæŒºçŠ¶æ€,å¯ä»¥æ¥å—å®¢æˆ·ç«¯çš„è¿æ¥ YN_RCVD(æœåŠ¡å™¨): è¿™ä¸ªçŠ¶æ€è¡¨ç¤ºæœåŠ¡å™¨æ¥æ”¶åˆ°äº†å®¢æˆ·ç«¯çš„ SYN æŠ¥æ–‡,åœ¨æ­£å¸¸æƒ…å†µä¸‹,è¿™ä¸ªçŠ¶æ€æ˜¯æœåŠ¡ç«¯çš„ SOCKET åœ¨å»ºç«‹ TCP è¿æ¥æ—¶çš„ä¸‰æ¬¡æ¡æ‰‹ä¼šè¯è¿‡ç¨‹ä¸­çš„ä¸€ä¸ªä¸­é—´çŠ¶æ€,å¾ˆçŸ­æš‚,åŸºæœ¬ä¸Šç”¨ netstat æ˜¯å¾ˆéš¾çœ‹åˆ°è¿™ç§çŠ¶æ€çš„,å› æ­¤è¿™ç§çŠ¶æ€æ—¶,å½“æ”¶åˆ°å®¢æˆ·ç«¯çš„ ACK æŠ¥æ–‡å,ä»–ä¼šè¿›å…¥ ESTABLISHED çŠ¶æ€ SYN_SENT: è¿™ä¸ªçŠ¶æ€ä¸ SYN_RCVD ç›¸å¯¹åº”,å½“å®¢æˆ·ç«¯SOCKET æ‰§è¡Œ CONNECT è¿æ¥æ—¶,å®ƒé¦–å…ˆå‘é€ SYN æŠ¥æ–‡,å› æ­¤ä¹Ÿéšæœºä¼šè¿›å…¥ SYN_SENT, å¹¶ç­‰å¾…æœåŠ¡ç«¯å‘é€ä¸‰æ¬¡è¿æ¥ä¸­çš„ç¬¬äºŒä¸ªæŠ¥æ–‡. SYN_SENT è¡¨ç¤ºå®¢æˆ·ç«¯å·²å‘é€ SYN è¯·æ±‚è¿æ¥æŠ¥æ–‡. ESTABLISHED: è¡¨ç¤ºè¿æ¥å·²ç»å»ºç«‹ FIN_WAIT_1: å…¶å® FIN_WAIT_1å’Œ FIN_WAIT_1çŠ¶æ€çš„çœŸæ­£å«ä¹‰éƒ½æ˜¯è¡¨ç¤ºç­‰å¾…å¯¹æ–¹çš„ FIN æŠ¥æ–‡.è€Œè¿™ä¸¤ç§çŠ¶æ€çš„åŒºåˆ«æ˜¯: FIN_WAIT_1çŠ¶æ€å®é™…ä¸Šæ˜¯å½“SOCKET åœ¨ ESTABLISHED çŠ¶æ€æ—¶,å®ƒæƒ³ä¸»åŠ¨å…³é—­è¿æ¥,å‘å¯¹æ–¹å‘é€äº† FIN æŠ¥æ–‡,æ­¤æ—¶è¯¥ SOCKET å³è¿›å…¥åˆ° FIN_WAIT_1çŠ¶æ€.è€Œå½“å¯¹æ–¹å›åº”ACK æŠ¥æ–‡å,åˆ™è¿›å…¥åˆ° FIN_WAIT_2çŠ¶æ€,å½“ç„¶åœ¨å®é™…çš„æ­£å¸¸æƒ…å†µä¸‹,æ— è®ºå¯¹æ–¹åœ¨ä½•ç§æƒ…å†µ,éƒ½åº”è¯¥å›åº” ACK æŠ¥æ–‡,æ‰€ä»¥ FIN_WAIT_1çŠ¶æ€ä¸€èˆ¬æ˜¯ä¸å®¹æ˜“è§åˆ°çš„,è€Œ FIN_WAIT_2å¯ä»¥ç”¨ netstat çœ‹åˆ° FIN_WAIT_2: å®é™…ä¸Š FIN_WAIT_2çŠ¶æ€ä¸‹çš„ SOCKET, è¡¨ç¤ºåŠè¿æ¥,ä¹Ÿå³æœ‰ä¸€æ–¹è¦æ±‚ CLOSE è¿æ¥,ä½†å¦å¤–è¿˜å‘Šè¯‰å¯¹æ–¹,æˆ‘æš‚æ—¶è¿˜æœ‰ç‚¹æ•°æ®éœ€è¦ä¼ é€,ç­‰ä¼šå†å…³é—­è¿æ¥ TIME_WAIT: è¡¨ç¤ºæ”¶åˆ°äº†å¯¹æ–¹çš„ FIN æŠ¥æ–‡,å¹¶å‘é€äº† ACK æŠ¥æ–‡,å°±ç­‰2MSL åå³å¯å›åˆ° CLOSED å¯ç”¨çŠ¶æ€äº†(åˆå§‹çŠ¶æ€).å¦‚æœ FIN_WAIT_1çŠ¶æ€ä¸‹,æ”¶åˆ°äº†å¯¹æ–¹åŒæ—¶å¸¦ FINæ ‡å¿—å’Œ ACK æ ‡å¿—çš„æŠ¥æ–‡æ—¶,å¯ä»¥ç›´æ¥è¿›å…¥åˆ° TIME_WAIT çŠ¶æ€,è€Œæ— éœ€ç»è¿‡ FIN_WAIT_2çŠ¶æ€ æ³¨æ„: MSL( æœ€å¤§åˆ†æ®µç”Ÿå­˜æœŸ)æŒ‡æ˜ TCP æŠ¥æ–‡åœ¨ internet ä¸Šæœ€é•¿ç”Ÿå­˜æ—¶é—´,æ¯ä¸ªå…·ä½“çš„ TCP å®ç°éƒ½å¿…é¡»é€‰æ‹©ä¸€ä¸ªç¡®å®šçš„ MSL å€¼. RFC1122å»ºè®®ä¸º2åˆ†é’Ÿ,ä½† BSD ä¼ ç»Ÿå®ç°äº†é‡‡ç”¨30ç§’. TIME_WAIT çŠ¶æ€æœ€å¤§ä¿æŒæ—¶é—´æ˜¯2*MSL, ä¹Ÿå°±æ˜¯1-4åˆ†é’Ÿ. ç»“è®º: åœ¨ TIME_WAIT ä¸‹ç­‰å¾…2MSL, åªæ˜¯ä¸ºäº†å°½æœ€å¤§åŠªåŠ›ä¿è¯å››æ¬¡æ¡æ‰‹æ­£å¸¸å…³é—­.ç¡®ä¿è€çš„æŠ¥æ–‡æ®µåœ¨ç½‘ç»œä¸­æ¶ˆå¤±,ä¸ä¼šå½±å“æ–°å»ºç«‹çš„è¿æ¥. CLOSING: è¿™ç§çŠ¶æ€æ¯”è¾ƒç‰¹æ®Š,å®é™…æƒ…å†µä¸­å¾ˆå°‘è§.æ­£å¸¸æƒ…å†µä¸‹,å½“ä½ å‘é€ FIN æŠ¥æ–‡å,æŒ‰ç†æ¥è¯´åº”è¯¥å…ˆæ”¶åˆ°(æˆ–åŒæ—¶å—åˆ°)å¯¹æ–¹çš„ ACK æŠ¥æ–‡,å†æ”¶åˆ°å¯¹æ–¹çš„ FIN æŠ¥æ–‡.ä½†æ˜¯ CLOSING çŠ¶æ€è¡¨ç¤ºä½ å‘é€ FIN æŠ¥æ–‡å,å¹¶æ²¡æœ‰æ”¶åˆ°å¯¹æ–¹çš„ ACKæŠ¥æ–‡,åè€Œæ”¶åˆ°äº†å¯¹æ–¹çš„ FIN æŠ¥æ–‡.é‚£ä¹ˆä»€ä¹ˆæƒ…å†µä¸‹ä¼šå‡ºç°è¿™ç§æƒ…å†µ.é‚£å°±æ˜¯åŒæ–¹å‡ ä¹åœ¨åŒæ—¶ close ä¸€ä¸ª SOCKET çš„æ—¶å€™,é‚£ä¹ˆä¹…å‡ºç°äº†åŒæ–¹åŒæ—¶å‘é€ FIN æŠ¥æ–‡çš„æƒ…å†µ,ä¹Ÿå³ä¼šå‡ºç° CLOSING çŠ¶æ€,è¡¨ç¤ºåŒæ–¹éƒ½æ­£åœ¨å…³é—­ SOCKET è¿æ¥. CLOSE_WAIT: è¿™ç§çŠ¶æ€çš„å«ä¹‰å…¶å®æ˜¯åœ¨è¡¨ç¤ºç­‰å¾…å…³é—­.å½“å¯¹æ–¹ close ä¸€ä¸ª SOCKET åå‘é€ FIN æŠ¥æ–‡ç»™è‡ªå·±,ç³»ç»Ÿæ¯«æ— ç–‘é—®ä¼šå›åº”ä¸€ä¸ª ACK æŠ¥æ–‡ç»™å¯¹æ–¹,æ­¤æ—¶åˆ™è¿›å…¥ CLOSE_WAIT çŠ¶æ€.æ¥ä¸‹æ¥å°±éœ€è¦è€ƒè™‘æ˜¯å¦è¿˜æœ‰æ•°æ®éœ€è¦å‘é€ç»™å¯¹æ–¹,å¦‚æœæ²¡æœ‰çš„è¯,é‚£ä¹ˆå°±å¯ä»¥ close è¿™ä¸ª SOCKET, å‘é€ FIN æŠ¥æ–‡ç»™å¯¹æ–¹,ä¹Ÿå³å…³é—­è¿æ¥.æ‰€ä»¥åœ¨ CLOSE_WAIT çŠ¶æ€ä¸‹,éœ€è¦ç­‰å¾…ä½ å»å…³é—­è¿æ¥ LAST_ACK: å®ƒæ˜¯è¢«åŠ¨å…³é—­ä¸€æ–¹åœ¨å‘é€ FIN æŠ¥æ–‡å,æœ€åç­‰å¾…å¯¹æ–¹çš„ ACK æŠ¥æ–‡.å½“æ”¶åˆ° ACK æŠ¥æ–‡å,ä¹Ÿå³å¯ä»¥è¿›å…¥åˆ° CLOSEDå¯ç”¨çŠ¶æ€.( åˆå§‹çŠ¶æ€) è¡¥å……: é»˜è®¤æƒ…å†µä¸‹,å½“è°ƒç”¨ close æ—¶,å¦‚æœå‘é€ç¼“å†²ä¸­è¿˜æœ‰æ•°æ®, TCP ä¼šç»§ç»­æŠŠæ•°æ®å‘é€å®Œ; å‘é€äº† FIN åªæ˜¯è¡¨ç¤ºè¿™ç«¯ä¸èƒ½ç»§ç»­å‘é€æ•°æ®(åº”ç”¨å±‚ä¸èƒ½è°ƒç”¨ send å‘é€),ä½†æ˜¯ä»ç„¶å¯ä»¥æ¥æ”¶æ•°æ®; åº”ç”¨å±‚å¦‚ä½•çŸ¥é“å¯¹ç«¯å…³é—­?é€šå¸¸,åœ¨æœ€ç®€å•çš„é˜»å¡æ¨¡å‹ä¸­,å½“ä½ è°ƒç”¨ recv æ—¶,å¦‚æœè¿”å›0,åˆ™è¡¨ç¤ºå¯¹ç«¯å…³é—­.åœ¨è¿™ä¸ªæ—¶å€™é€šå¸¸çš„åšæ³•å°±æ˜¯ä¹Ÿè°ƒç”¨close, é‚£ä¹ˆä¼šå‘é€ FIN, å®Œæˆå››æ¬¡æ¡æ‰‹.å¦‚æœä¸è°ƒç”¨ close, é‚£ä¹ˆå¯¹ç«¯å°±ä¼šå¤„äº FIN_WAIT_2çŠ¶æ€,è€Œæœ¬ç«¯åˆ™ä¼šå¤„äº CLOSE_WAITçŠ¶æ€. å¾ˆå¤šæ—¶å€™, TCP è¿æ¥çš„æ–­å¼€éƒ½æ˜¯æœ‰ TCP å±‚è‡ªåŠ¨è¿›è¡Œ,ä¾‹å¦‚ä½¿ç”¨ CTRL_C ç»ˆæ­¢ç¨‹åº, TCP è¿æ¥ä¾ç„¶ä¼šæ­£å¸¸å…³é—­. é—®é¢˜: ä¸ºä»€ä¹ˆå»ºç«‹è¿æ¥åè®®æ˜¯ä¸‰æ¬¡æ¡æ‰‹,è€Œå…³é—­è¿æ¥æ˜¯å››æ¬¡æŒ¥æ‰‹å‘¢? è¿™æ˜¯å› ä¸ºæœåŠ¡ç«¯çš„ LISTEN çŠ¶æ€ä¸‹çš„ SOCKET æ”¶åˆ° SYN çš„è¯·æ±‚è¿æ¥æ—¶,å¯ä»¥æŠŠ ACKå’Œ SYN(ACKèµ·åº”ç­”ä½œç”¨,è€Œ SYN èµ·åŒæ­¥ä½œç”¨)æ”¾åœ¨ä¸€ä¸ªæŠ¥æ–‡é‡Œä¸€èµ·å‘é€.ä½†æ˜¯å…³é—­è¿æ¥æ—¶,å½“æ”¶åˆ°å¯¹æ–¹çš„ FIN æŠ¥æ–‡é€šçŸ¥æ—¶,å®ƒä»…ä»…è¡¨ç¤ºå¯¹æ–¹æ²¡æœ‰æ•°æ®å‘é€äº†,ä½†æ˜¯å¦ä¸€æ–¹æœªå¿…æ‰€æœ‰çš„æ•°æ® éƒ½å…¨éƒ¨å‘é€å®Œå…¨äº†,æ‰€ä»¥å¯èƒ½ä¸ä¼šç«‹é©¬å…³é—­ SOCKET, ä¹Ÿå³ä½ å¯èƒ½è¿˜éœ€è¦å‘é€ä¸€äº›æ•°æ®ç»™å¯¹æ–¹ä¹‹å,å†å‘é€ FIN æŠ¥æ–‡ç»™å¯¹æ–¹è¡¨ç¤ºä½ åŒæ„ç°åœ¨å…³é—­è¿æ¥äº†,æ‰€ä»¥è¿™é‡Œçš„ ACK æŠ¥æ–‡å’Œ FIN æŠ¥æ–‡æ˜¯åˆ†å¼€å‘é€çš„. ä¸ºä»€ä¹ˆä¸èƒ½ç”¨ä¸¤æ¬¡æ¡æ‰‹è¿›è¡Œè¿æ¥? åœ¨ä¸‰æ¬¡æ¡æ‰‹ä¸­,æ€»å…±éœ€è¦å®Œæˆä¸¤ä¸ªé‡è¦çš„åŠŸèƒ½,æ—¢è¦åŒæ–¹åšå¥½å‘é€æ•°æ®çš„å‡†å¤‡å·¥ä½œ(åŒæ–¹éƒ½çŸ¥é“å½¼æ­¤å·²ç»å‡†å¤‡å¥½),ä¹Ÿè¦å…è®¸åŒæ–¹å°±åˆå§‹åºåˆ—å·è¿›è¡Œåå•†,è¿™ä¸ªåºåˆ—å·åœ¨æ¡æ‰‹è¿‡ç¨‹ä¸­è¢«å‘é€å’Œç¡®è®¤. ç°åœ¨æŠŠä¸‰æ¬¡æ¡æ‰‹æ”¹æˆä»…éœ€è¦ä¸¤æ¬¡æ¡æ‰‹,æ˜¯å¯èƒ½ä¼šå‘ç”Ÿæ­»é”çš„.è€ƒè™‘è®¡ç®—æœºå®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯ä¹‹é—´çš„é€šä¿¡,å‡å®šå®¢æˆ·ç«¯ç»™æœåŠ¡ç«¯å‘é€ä¸€ä¸ªè¿æ¥è¯·æ±‚åˆ†ç»„,æœåŠ¡ç«¯æ”¶åˆ°äº†è¿™ä¸ªåˆ†ç»„,å¹¶å‘é€äº†ç¡®è®¤åº”ç­”åˆ†ç»„.æŒ‰ç…§ä¸¤æ¬¡æ¡æ‰‹çš„åå®š,æœåŠ¡ç«¯è®¤ä¸ºé“¾æ¥å·²ç»æˆåŠŸçš„å»ºç«‹äº†,å¯ä»¥å¼€å§‹å‘é€æ•°æ®åˆ†ç»„.å¯æ˜¯,å®¢æˆ·ç«¯åœ¨æœåŠ¡ç«¯çš„åº”ç­”åˆ†ç»„åœ¨ä¼ è¾“ä¸­è¢«ä¸¢å¤±çš„æƒ…å†µä¸‹,å°†ä¸ä¼šçŸ¥é“æœåŠ¡ç«¯æ˜¯å¦å·²å‡†å¤‡å¥½,ä¸çŸ¥é“æœåŠ¡ç«¯å»ºç«‹ä»€ä¹ˆæ ·çš„åºåˆ—å·,å®¢æˆ·ç«¯ç”šè‡³ä¼šæ€€ç–‘æœåŠ¡ç«¯æ˜¯å¦æ”¶åˆ°è‡ªå·±çš„è¿æ¥è¯·æ±‚åˆ†ç»„.åœ¨è¿™ç§æƒ…å†µä¸‹,å®¢æˆ·ç«¯è®¤ä¸ºè¿æ¥è¿˜æœªå»ºç«‹æˆåŠŸ,å°†å¿½ç•¥æœåŠ¡ç«¯å‘æ¥çš„ä»»ä½•æ•°æ®åˆ†ç»„,åªç­‰å¾…è¿æ¥ç¡®è®¤åº”ç­”åˆ†ç»„.è€ŒæœåŠ¡ç«¯åœ¨å‘å‡ºçš„æ•°æ®åˆ†ç»„è¶…æ—¶å,é‡å¤å‘é€åŒæ ·çš„æ•°æ®åˆ†ç»„,å°±å½¢æˆäº†æ­»é”. ä¸ºä»€ä¹ˆ TIME_WAIT çŠ¶æ€éœ€è¦ç­‰2MSL åæ‰èƒ½è¿”å›åˆ° CLOSED çŠ¶æ€? ä»€ä¹ˆæ˜¯ MSL? MSL å³Maximum Segment Lifetime, ä¹Ÿå°±æ˜¯æŠ¥æ–‡æœ€å¤§ç”Ÿå­˜æ—¶é—´.â€™MSL æ˜¯ä»»ä½•æŠ¥æ–‡æ®µè¢«ä¸¢å¼ƒå‰åœ¨ç½‘ç»œå†…çš„æœ€é•¿æ—¶é—´.â€™é‚£ä¹ˆ,2MSL ä¹Ÿå°±æ˜¯è¿™ä¸ªæ—¶é—´çš„ä¸¤å€,å½“ TCP è¿æ¥å®Œæˆå››ä¸ªæŠ¥æ–‡æ®µçš„äº¤æ¢æ—¶,ä¸»åŠ¨å…³é—­çš„ä¸€æ–¹å°†ç»§ç»­ç­‰å¾…ä¸€å®šæ—¶é—´(2-4)åˆ†é’Ÿ,å³ä½¿ä¸¤ç«¯çš„åº”ç”¨ç¨‹åºç»“æŸ. ä¸ºä»€ä¹ˆéœ€è¦2MSL å‘¢. ç¬¬ä¸€,è™½ç„¶åŒæ–¹éƒ½åŒæ„å…³é—­è¿æ¥äº†,è€Œä¸”æ¡æ‰‹çš„å››ä¸ªæŠ¥æ–‡ä¹Ÿéƒ½åè°ƒå’Œå‘é€å®Œæ¯•,æŒ‰ç†å¯ä»¥ç›´æ¥å›åˆ° CLOSED çŠ¶æ€(å°±å¥½æ¯”ä» SYN_SEND çŠ¶æ€åˆ° ESTABLISH çŠ¶æ€é‚£æ ·);ä½†æ˜¯å› ä¸ºå¯¹æ–¹å¤„äº LAST_ACK çŠ¶æ€ä¸‹çš„ SOCKET å¯èƒ½ä¼šå› ä¸ºè¶…æ—¶æœªæ”¶åˆ° ACK æŠ¥æ–‡,è€Œé‡å‘ FIN æŠ¥æ–‡,æ‰€ä»¥è¿™ä¸ª TIME_WAIT çŠ¶æ€çš„ä½œç”¨å°±æ˜¯ç”¨æ¥é‡å‘å¯èƒ½ä¸¢å¤±çš„ ACK æŠ¥æ–‡. ç¬¬äºŒ,æŠ¥æ–‡å¯èƒ½ä¼šè¢«æ··æ·†,æ„æ€æ˜¯è¯´å…¶ä»–æ—¶å€™çš„è¿æ¥å¯èƒ½ä¼šè¢«å½“åšæœ¬æ¬¡çš„è¿æ¥. å½“æŸä¸ªè¿æ¥çš„ä¸€ç«¯å¤„äº TIME_WAIT çŠ¶æ€æ—¶,è¯¥è¿æ¥å°†ä¸èƒ½å†è¢«ä½¿ç”¨.äº‹å®ä¸Š,å¯¹äºæˆ‘ä»¬æ¯”è¾ƒæœ‰ç°å®æ„ä¹‰çš„æ˜¯,è¿™ä¸ªç«¯å£å°†ä¸èƒ½å†è¢«ä½¿ç”¨.æŸä¸ªç«¯å£å¤„äº TIME_WAIT(å…¶å®åº”è¯¥æ˜¯è¿™ä¸ªè¿æ¥) çŠ¶æ€æ—¶,è¿™æ„å‘³ç€è¿™ä¸ª TCP è¿æ¥å¹¶æ²¡æœ‰æ–­å¼€(å®Œå…¨æ–­å¼€),é‚£ä¹ˆ.å¦‚æœä½  bind è¿™ä¸ªç«¯å£,å°±ä¼šå¤±è´¥.å¯¹äºæœåŠ¡å™¨è€Œè¨€,å¦‚æœæœåŠ¡å™¨çªç„¶ crash æ‰äº†,é‚£ä¹ˆä»–å°†æ— æ³•åœ¨2MSL å†…é‡æ–°å¯åŠ¨,å› ä¸º bind ä¼šå¤±è´¥.è§£å†³è¿™ä¸ªé—®é¢˜çš„ä¸€ä¸ªæ–¹æ³•å°±æ˜¯è®¾ç½® SOCKET çš„ SO_REUSEADDR é€‰é¡¹.è¿™ä¸ªé€‰é¡¹æ„å‘³ç€å¯ä»¥é‡ç”¨ä¸€ä¸ªåœ°å€. å½“å»ºç«‹ä¸€ä¸ª TCP è¿æ¥æ—¶,æœåŠ¡ç«¯ä¼šç»§ç»­ç”¨åŸæœ‰ç«¯å£ç›‘å¬,åŒæ—¶ç”¨è¿™ä¸ªç«¯å£ä¸å®¢æˆ·ç«¯é€šä¿¡.è€Œå®¢æˆ·ç«¯é»˜è®¤æƒ…å†µä¸‹ä¼šä½¿ç”¨ä¸€ä¸ªéšæœºç«¯å£ä¸æœåŠ¡ç«¯çš„ç›‘å¬ç«¯å£é€šä¿¡.æœ‰æ—¶å€™,ä¸ºäº†æœåŠ¡ç«¯çš„å®‰å…¨æ€§,æˆ‘ä»¬éœ€è¦å¯¹å®¢æˆ·ç«¯è¿›è¡ŒéªŒè¯,å³é™å®šæŸä¸ª IP çš„æŸä¸ªç‰¹å®šç«¯å£çš„å®¢æˆ·ç«¯.å®¢æˆ·ç«¯å¯ä»¥ä½¿ç”¨ bind æ¥ä½¿ç”¨ç‰¹å®šçš„ç«¯å£.å¯¹äºæœåŠ¡ç«¯,å½“è®¾ç½®äº† SO_REUSEADDR é€‰é¡¹æ—¶,å®ƒå¯ä»¥åœ¨2MSL å†…å¯åŠ¨å¹¶ listenæˆåŠŸ.ä½†æ˜¯å¯¹äºå®¢æˆ·ç«¯,å½“ä½¿ç”¨ bind å¹¶è®¾ç½® SO_REUSEADDR æ—¶,å¦‚æœåœ¨2MSL å†…å¯åŠ¨,è™½ç„¶ bind ä¼šæˆåŠŸ,ä½†æ˜¯åœ¨ windows å¹³å°ä¸Š connect ä¼šå¤±è´¥.è€Œåœ¨ linux æ˜¯å“ªä¸ªä¸å­˜åœ¨è¿™ä¸ªé—®é¢˜. è¦è§£å†³ windows å¹³å°çš„é—®é¢˜,å¯ä»¥è®¾ç½® SO_LISTEN é€‰é¡¹. SO_LINGER é€‰é¡¹å†³å®šè°ƒç”¨ close æ—¶ TCP çš„è¡Œä¸º. SO_LINGER æ¶‰åŠåˆ° linger ç»“æ„ä½“,å¦‚æœè®¾ç½®ç»“æ„ä½“ä¸­ l_onoff ä¸ºé0,l_linger ä¸º0,é‚£ä¹ˆè°ƒç”¨ close æ—¶ TCP è¿æ¥ä¼šç«‹åˆ»æ–­å¼€, TCP ä¸ä¼šå°†å‘é€ç¼“å†²ä¸­æœªå‘é€çš„æ•°æ®å‘é€,è€Œæ˜¯ç«‹å³å‘é€ä¸€ä¸ª RST æŠ¥æ–‡ç»™å¯¹æ–¹,è¿™ä¸ªæ—¶å€™ TCP è¿æ¥(å…³é—­æ—¶)å°±ä¸ä¼šè¿›å…¥ TIME_WAIT çŠ¶æ€.è¿™æ ·åšè™½ç„¶è§£å†³äº†é—®é¢˜,ä½†æ˜¯å¹¶ä¸å®‰å…¨.é€šè¿‡ä»¥ä¸Šæ–¹å¼è®¾ç½® SO_LINGER çŠ¶æ€,ç­‰åŒäºè®¾ç½® SO_DONTLINGER çŠ¶æ€. å½“ TCP è¿æ¥å‘ç”Ÿä¸€äº›ç‰©ç†ä¸Šçš„æ„å¤–æƒ…å†µæ—¶,ä¾‹å¦‚ç½‘çº¿æ–­å¼€, linux ä¸Šçš„ TCP å®ç°ä¼šä¾ç„¶è®¤ä¸ºè¯¥è¿æ¥æœ‰æ•ˆ,è€Œ windows åˆ™ä¼šåœ¨ä¸€å®šæ—¶é—´åè¿”å›é”™è¯¯ä¿¡æ¯.]]></content>
      <categories>
        <category>ç½‘ç»œç¼–ç¨‹</category>
      </categories>
  </entry>
  <entry>
    <title><![CDATA[ç½‘ç»œç¼–ç¨‹(äºŒ)]]></title>
    <url>%2F2018%2F11%2F06%2F%E7%BD%91%E7%BB%9C%E7%BC%96%E7%A8%8B-%E4%BA%8C%2F</url>
    <content type="text"><![CDATA[å…­ ç½‘ç»œç¼–ç¨‹(ä¸€)æ€»ç»“é¦–å…ˆå¯¹ç½‘ç»œç¼–ç¨‹(ä¸€)åšä¸ªæ€»ç»“:æˆ‘ä»¬ç°åœ¨çŸ¥é“äº’è”ç½‘é€šä¿¡å…¶å®å°±æ˜¯å‘é€æ•°æ®åŒ…ä¸æ¥æ”¶æ•°æ®åŒ….ç”µè„‘ A å‘ç”µè„‘ B å‘é€ä¸€ä¸ªæ•°æ®åŒ…, B æ”¶åˆ°ç„¶åå›å¤ä¸€ä¸ªæ•°æ®åŒ…,æ‰å®ç°äº†ç”µè„‘ä¹‹é—´çš„é€šä¿¡.æ•°æ®åŒ…çš„ç»“æ„,åŸºæœ¬æ˜¯ä¸‹å›¾çš„å½¢å¼: æƒ³è¦å‘é€è¿™ä¸ªæ•°æ®åŒ…éœ€è¦çŸ¥é“ä¸¤ä¸ªåœ°å€: å¯¹æ–¹çš„ MAC åœ°å€ å¯¹æ–¹çš„ IP åœ°å€ åªæœ‰å‘é€æ–¹çŸ¥é“è¿™ä¸¤ä¸ªåœ°å€,æ•°æ®åŒ…æ‰å¯ä»¥å‡†ç¡®çš„å‘é€åˆ°æ¥æ”¶æ–¹.ä¹‹å‰å·²ç»äº†è§£,å•çº¯çš„ MAC åœ°å€æ˜¯æœ‰å±€é™æ€§çš„,å°±æ˜¯åªèƒ½åœ¨ä¸€ä¸ªå±€åŸŸç½‘å†…é€šè¿‡MAC åœ°å€é€šä¿¡,å¦‚æœä¸¤å°è®¡ç®—æœºä¸åœ¨ä¸€ä¸ªå±€åŸŸç½‘,é‚£ä¹ˆåªèƒ½å‘é€ç»™ç½‘å…³( gateway),ç”±ç½‘å…³èµ°è·¯ç”±åè®®å‘é€ç»™å¯¹æ–¹. ä¸Šå›¾ä¸­,1å·ç‹„ç”µè„‘æƒ³è¦ä¸ª4å·ç”µè„‘é€šä¿¡.é¦–å…ˆéœ€è¦çŸ¥é“å¯¹æ–¹ç”µè„‘çš„ IP å’Œå­ç½‘æ©ç ,ç„¶åé€šè¿‡ ARP åè®®è®¡ç®—å‡ºè‡ªå·±å’Œå¯¹æ–¹çš„ç½‘ç»œå·,ç„¶ååˆ¤æ–­æ˜¯å¦å¤„äºåŒä¸€ä¸ªå±€åŸŸç½‘,ä¸æ˜¯çš„è¯,1å·ç”µè„‘å°†æ•°æ®åŒ…å‘ç»™ç½‘å…³ A. ç½‘å…³ A é€šè¿‡è·¯ç”±åè®®,å‘ç°4å·ç”µè„‘ä½äºç½‘ç»œ B, åˆæŠŠæ•°æ®åŒ…å‘ç»™ç½‘å…³ B, ç½‘å…³ B å†è½¬å‘ç»™4å·ç”µè„‘. 1å·ç”µè„‘æƒ³è¦æŠŠæ•°æ®åŒ…å‘ç»™ç½‘å…³ A, é¦–å…ˆå¿…é¡»çŸ¥é“ç½‘å…³ A çš„ MAC åœ°å€.æ‰€ä»¥,æ•°æ®åŒ…çš„ç›®æ ‡åœ°å€,å®é™…ä¸Šåˆ†ä¸ºä¸¤ç§æƒ…å†µ: åœºæ™¯ æ•°æ®æŠ¥åœ°å€ åŒä¸€ä¸ªå±€åŸŸç½‘ å¯¹æ–¹çš„ MAC åœ°å€,å¯¹æ–¹çš„ IP åœ°å€ éåŒä¸€ä¸ªå±€åŸŸç½‘ ç½‘å…³çš„ MAC åœ°å€,å¯¹æ–¹çš„ IP åœ°å€ å‘é€æ•°æ®åŒ…ä¹‹å‰,ç”µè„‘å¿…é¡»åˆ¤æ–­å¯¹æ–¹ä¸è‡ªå·±æ˜¯å¦å¤„äºåŒä¸€ä¸ªå±€åŸŸç½‘,ç„¶åé€‰æ‹©ç›¸åº”çš„å¤„ç†æ–¹å¼æ¥å‘é€æ•°æ®åŒ…. å›› é¦–æ¬¡è”ç½‘ç›¸å…³è®¾ç½®ä¸€ é™æ€IP è®¾ç½®å½“æˆ‘ä»¬è´­ä¹°äº†ä¸€å°æ–°ç”µè„‘æ—¶,æ’ä¸Šç½‘çº¿,å¼€æœº,è¿™æ—¶å€™ç”µè„‘èƒ½å¤Ÿä¸Šç½‘å—?è¯´åˆ°è¿™æƒ³åˆ°æˆ‘å¤§äºŒå¹²çš„ä¸€ä»¶è ¢äº‹,é‚£æ—¶å€™ä¸çŸ¥é“è·¯ç”±å™¨çš„å·¥ä½œåŸç†,ä»¥ä¸ºä¹°äº†è·¯ç”±å™¨å°±å¯ä»¥è¿æ— çº¿ç½‘ä¸Šç½‘äº†,ç„¶åå…´å†²å†²åœ¨ç½‘ä¸Šä¹°äº†ä¸€ä¸ªè·¯ç”±å™¨,æ”¶åˆ°è´§ä¹‹åæ’ä¸Šç”µ,æ’ä¸Šç½‘çº¿,å‘ç° WiFi å€’æ˜¯å‡ºç°äº†,å¯æ˜¯è¿ä¸Šå´æ²¡æœ‰ååº”,ç„¶åæˆ‘å°±æƒ³å•Š,ä¸å¯¹å•Šæ€ä¹ˆè¿ä¸ä¸Šç½‘?ä¹‹åæˆ‘æƒ³æ˜ç™½äº†,æˆ‘ TM çš„æ ¹æœ¬å°±æ²¡è£…å®½å¸¦,å“ªæ¥çš„ç½‘.å¥½åœ¨é‚£ä¸ªè·¯ç”±å™¨ä¹Ÿæ²¡é—²ç€,ç»ˆäºåœ¨å»å¹´æœå½¹äº†â€¦ å½“è´­ä¹°çš„æ–°ç”µè„‘è¿ä¸Šç½‘çº¿æ—¶,é€šå¸¸éœ€è¦åšä¸€äº›è®¾ç½®,ä¸€èˆ¬ç°åœ¨éƒ½ä¼šè‡ªåŠ¨è®¾ç½® IP, å­ç½‘æ©ç  DNS æœåŠ¡å™¨å•¦,ä½†æ˜¯ä¹Ÿæœ‰æœ‰æ‰‹åŠ¨è®¾ç½®çš„,ä¸€èˆ¬ä¼šè®¾ç½®å››ä¸ªå‚æ•°: æœ¬æœº IP åœ°å€ å­ç½‘æ©ç  ç½‘å…³ IP åœ°å€ DNS IP åœ°å€ çœ‹çœ‹ linux ç³»ç»Ÿçš„è®¾ç½® è¿™å››ä¸ªå‚æ•°ç¼ºä¸€ä¸å¯,ç”±äºè¿™æ˜¯ç»™å®šçš„,è®¡ç®—æœºæ¯æ¬¡å¼€æœºéƒ½ä¼šåˆ†åˆ°åŒæ ·çš„ IP åœ°å€,æ‰€ä»¥è¿™ç§æƒ…å†µç§°ä¸ºé™æ€ IP åœ°å€ä¸Šç½‘. ä½†æ˜¯è¿™æ ·çš„è®¾ç½®æ¯”è¾ƒä¸“ä¸š,è€Œä¸”ä¸å¤Ÿçµæ´».æ‰€ä»¥å¤§å¤šæ•°ç”¨æˆ·ä½¿ç”¨åŠ¨æ€ IP åœ°å€ä¸Šç½‘. äºŒ åŠ¨æ€ IP åœ°å€ä¸Šç½‘æ‰€è°“åŠ¨æ€ IP åœ°å€,å€¼å¾—æ˜¯è®¡ç®—æœºå¼€æœºå,ä¼šç”±æœåŠ¡å™¨è‡ªåŠ¨åˆ†é…ä¸€ä¸ª IP åœ°å€,ä¸éœ€è¦äººä¸ºè®¾ç½®.ä½¿ç”¨çš„åè®®ä¸º åŠ¨æ€ä¸»æœºè®¾ç½®åè®®(Dynamic Host Configuration Protocolï¼ŒDHCP) åè®®,æ˜¯ä¸€ä¸ªå±€åŸŸç½‘çš„ç½‘ç»œåè®®,ä½¿ç”¨ UDPåè®®å·¥ä½œ,ä¸»è¦æœ‰ä¸¤ä¸ªç”¨é€”: ç”¨äºå†…éƒ¨ç½‘æˆ–ç½‘ç»œæœåŠ¡ä¾›åº”å•†è‡ªåŠ¨åˆ†é… IP åœ°å€ç»™ç”¨æˆ·; ç”¨äºå†…éƒ¨ç½‘ç®¡ç†å‘˜ä½œä¸ºå¯¹æ‰€æœ‰è®¡ç®—æœºä½œä¸­å¤®ç®¡ç†çš„æ‰‹æ®µ. è¿™ä¸ªåè®®è§„å®š,æ¯ä¸€ä¸ªå±€åŸŸç½‘ä¸­,æœ‰ä¸€å°è®¡ç®—æœºè´Ÿè´£ç®¡ç†æœ¬ç½‘ç»œçš„æ‰€æœ‰ IP åœ°å€,å®ƒå«åšDHCP æœåŠ¡å™¨.æ–°çš„è®¡ç®—æœºåŠ å…¥ç½‘ç»œ,é¦–å…ˆå¿…é¡»å‘ DHCP æœåŠ¡å™¨å‘é€ä¸€ä¸ª DHCP è¯·æ±‚æ•°æ®åŒ…,ç”³è¯· IP åœ°å€å’Œç›¸å…³çš„ç½‘ç»œå‚æ•°. å‰é¢è¯´è¿‡,å¦‚æœä¸¤å°è®¡ç®—æœºåœ¨åŒä¸€ä¸ªå±€åŸŸç½‘,å¿…é¡»çŸ¥é“å¯¹æ–¹çš„ MAC åœ°å€å’Œ IP åœ°å€,æ‰èƒ½å‘é€æ•°æ®åŒ….ä½†æ˜¯æ–°åŠ å…¥çš„è®¡ç®—æœºå¹¶ä¸çŸ¥é“è¿™ä¸¤ä¸ªåœ°å€,æ€ä¹ˆå‘é€æ•°æ®åŒ…å‘¢?è¿™å°±æ˜¯ DHCP çš„åŠŸåŠ³äº†. ä¸‰ DHCP åè®®é¦–å…ˆ, DHCP æ˜¯åº”ç”¨å±‚åè®®,å»ºç«‹åœ¨ UDP ä¹‹ä¸Šçš„,æ•°æ®åŒ…æ˜¯è¿™æ ·çš„: æœ€å‰é¢çš„ä»¥å¤ªç½‘æ ‡å¤´,è®¾ç½®å‘é€æ–¹(æœ¬æœº)çš„ MAC åœ°å€å’Œæ¥æ”¶æ–¹( DHCP)çš„ MAC åœ°å€.å‰ç€å°±æ˜¯æœ¬æœºç½‘å¡çš„ MAC åœ°å€,åè€…è¿™æ—¶å€™å¹¶ä¸çŸ¥é“,å°±å¡«å…¥ä¸€ä¸ªå¹¿æ’­åœ°å€:FF-FF-FF-FF-FF-FF.è¿™ä¸ªåœ°å€æ˜¯å…·æœ‰ç‰¹æ®Šæ„ä¹‰çš„MAC åœ°å€. åé¢çš„ IP æ ‡å¤´,è®¾ç½®å‘é€æ–¹çš„ IP åœ°å€å’Œæ¥æ”¶æ–¹çš„ IPåœ°å€.è¿™æ—¶å€™,å¯¹äºè¿™ä¸¤è€…,æœ¬æœºéƒ½ä¸çŸ¥é“.äºæ˜¯å‘é€æ–¹çš„ IP åœ°å€å°±è®¾ä¸º0.0.0.0,æ¥æ”¶æ–¹å¾— IP åœ°å€è®¾ä¸º255.255.255.255. æœ€åçš„ UDP æ ‡å¤´,è®¾ç½®å‘é€æ–¹çš„ç«¯å£å’Œæ¥æ”¶æ–¹çš„ç«¯å£.è¿™ä¸€éƒ¨åˆ†æ˜¯ DHCP åè®®è§„å®šå¥½çš„,å‘é€æ–¹ä¸º68ç«¯å£,æ¥æ”¶æ–¹ä¸º67ç«¯å£. æ•°æ®åŒ…å†…å®¹æ„é€ å®Œæˆå,å°±å¯ä»¥å‘åŒ…äº†.ä»¥å¤ªç½‘æ˜¯åŸºäºå¹¿æ’­æ–¹å¼å‘é€çš„,åŒä¸€ä¸ªå±€åŸŸç½‘çš„æ¯ä¸ªè®¡ç®—æœºéƒ½ä¼šæ”¶åˆ°è¿™ä¸ªæ•°æ®åŒ….å› ä¸ºæ¥æ”¶æ–¹çš„ MAC åœ°å€æ˜¯FF-FF-FF-FF-FF-FF,çœ‹ä¸å‡ºæ˜¯å‘ç»™è°çš„,æ‰€ä»¥æ¯å°è®¡ç®—æœºæ”¶åˆ°æ•°æ®åŒ…åéƒ½ä¼šè¿›è¡Œæ‹†åŒ…æ‰èƒ½ç¡®å®šæ˜¯ä¸æ˜¯å‘ç»™è‡ªå·±çš„.å½“çœ‹åˆ°å‘é€æ–¹ IP åœ°å€ä¸º0.0.0.0,æ¥æ”¶æ–¹æ˜¯255.255.255.255æ—¶, DHCP æœåŠ¡å™¨çŸ¥é“,å“¦,åŸæ¥è¿™ä¸ªåŒ…æ˜¯å‘ç»™æˆ‘çš„,æ‰€ä»¥å…¶ä»–çš„è®¡ç®—æœºå°±å¯ä»¥ä¸¢å¼ƒè¿™ä¸ªåŒ…äº†. äºæ˜¯ DHCP æœåŠ¡å™¨è¯»å–æ•°æ®åŒ…å†…å®¹,åˆ†é…å¥½ IP åœ°å€,å‘é€ä¸€ä¸ª DHCP å“åº”æ•°æ®åŒ….è¿™ä¸ªæ˜¯æ•°æ®åŒ…çš„ç»“æ„å’Œä¸Šé¢æ˜¯ç±»ä¼¼çš„,ä»¥å¤ªç½‘æ ‡å¤´çš„ MAC åœ°å€æ˜¯åŒæ–¹çš„ç½‘å¡åœ°å€, IP æ ‡å¤´çš„ IP åœ°å€æ˜¯ DHCP å‰¯æ­¦å™¨çš„ IP åœ°å€(å‘é€æ–¹)å’Œ255.255.255.255(æ¥æ”¶æ–¹),UDP æ ‡å¤´çš„ç«¯å£æ˜¯67(å‘é€æ–¹)å’Œ68(æ¥æ”¶æ–¹),åˆ†é…ç»™è¯·æ±‚ç«¯çš„ IP åœ°å€å’Œæœ¬ç½‘ç»œçš„å…·ä½“å‚æ•°åˆ™åŒ…å«åœ¨ Data éƒ¨åˆ†. æ–°åŠ å…¥çš„è®¡ç®—æœºæ”¶åˆ°è¿™ä¸ªå“åº”åŒ…,äºæ˜¯å°±çŸ¥é“äº†è‡ªå·±çš„ IP åœ°å€,å­ç½‘æ©ç ,ç½‘å…³åœ°å€å’ŒDNS æœåŠ¡å™¨åœ°å€. å›› å°ç»“è¿™æ˜¯è”ç½‘çš„ç¬¬ä¸€æ­¥,ä¸ç®¡æ˜¯é™æ€ IP åœ°å€è¿˜æ˜¯åŠ¨æ€ IP åœ°å€,æƒ³è¦è¿ä¸Šäº’è”ç½‘,éœ€è¦ç¡®å®šè¿™å››ä¸ªå‚æ•°: æœ¬æœº IP åœ°å€ å­ç½‘æ©ç  ç½‘å…³ IP åœ°å€ DNS IP åœ°å€ åªæœ‰è¿™å››ä¸ªå‚æ•°ç¡®å®šäº†,æ‰å¯ä»¥æ„‰å¿«çš„è¿›è¡Œç½‘ç»œå†²æµª.é‚£ä¹ˆå½“æˆ‘ä»¬è®¿é—®ç½‘é¡µçš„æ—¶å€™,äº’è”ç½‘åè®®æ˜¯å¦‚ä½•å·¥ä½œçš„å‘¢? äº” è®¿é—®ç½‘é¡µä¸€ æœ¬æœºå‚æ•°å‡å®šç»è¿‡ä¸Šä¸€èŠ‚çš„æ­¥éª¤,ç”¨æˆ·è®¾ç½®å¥½äº†è‡ªå·±çš„ç½‘ç»œå‚æ•°: IP åœ°å€:192.168.2.238 å­ç½‘æ©ç :255.255.255.0 è·¯ç”±å™¨(ç½‘å…³åœ°å€):192.168.2.1 DNS æœåŠ¡å™¨:192.168.2.1 æ‰“å¼€æµè§ˆå™¨è®¿é—®è°·æ­Œ,åœ¨åœ°å€æ è¾“å…¥ www.google.com,è¿™æ„å‘³ç€,æµè§ˆå™¨å‘ google å‘é€ä¸€ä¸ªç½‘é¡µè¯·æ±‚çš„æ•°æ®åŒ…. äºŒ DNS åè®®æˆ‘ä»¬çŸ¥é“,å‘è°·æ­Œå‘é€ä¸€ä¸ªæ•°æ®åŒ…,å¿…é¡»è¦çŸ¥é“å¯¹æ–¹çš„ IP åœ°å€.ä½†æ˜¯ç°åœ¨åªçŸ¥é“ä¸€ä¸ªç½‘å€,å¹¶ä¸çŸ¥é“å®ƒçš„ IP åœ°å€. DNS åè®®å¯ä»¥å¸®åŠ©æˆ‘ä»¬,å°†è¿™ä¸ªç½‘å€è½¬æ¢æˆ IP åœ°å€,å·²ç»çŸ¥é“æˆ‘ä»¬çš„ DNX æœåŠ¡å™¨ä¸º192.168.2.1,äºæ˜¯å‘è¿™ä¸ªåœ°å€å‘é€ä¸€ä¸ª DNS æ•°æ®åŒ…(53ç«¯å£). ç„¶å, DNS æœåŠ¡å™¨ä½œå‡ºç›¸åº”,å‘Šè¯‰æˆ‘ä»¬è°·æ­Œçš„åœ°å€æ˜¯174.36.196.242.äºæ˜¯æˆ‘ä»¬çŸ¥é“äº†å¯¹æ–¹çš„ IP åœ°å€. ä¸‰ å­ç½‘æ©ç æ¥ä¸‹æ¥éœ€è¦åˆ¤æ–­è¯¥ IPåœ°å€å’Œæœ¬æœºæ˜¯å¦å¤„äºåŒä¸€ä¸ªå±€åŸŸç½‘,è¿™å°±éœ€è¦å­ç½‘æ©ç æ¥è¿›è¡Œ AND ä½è¿ç®—. å·²çŸ¥å­ç½‘æ©ç æ˜¯255.255.255.0,æœ¬æœºç”¨å­ç½‘æ©ç å’Œè‡ªå·±çš„ IPåœ°å€192.168.2.238,åšä¸€ä¸ªäºŒè¿›åˆ¶çš„ AND è¿ç®—,è®¡ç®—ç»“æœä¸º192.168.2.0,ç„¶åå¯¹è°·æ­Œçš„ IP åœ°å€ä¹Ÿåšä¸€ä¸ª AND è¿ç®—,è®¡ç®—ç»“æœä¸º174.36.196.0.ä¸¤ä¸ªç»“æœä¸ç›¸ç­‰,æ‰€ä»¥ç»“è®ºæ˜¯è°·æ­Œä¸æœ¬æœºä¸åœ¨ä¸€ä¸ªå±€åŸŸç½‘. å› æ­¤æˆ‘ä»¬æƒ³è¦å’Œè°·æ­Œé€šä¿¡çš„è¯éœ€è¦é€šè¿‡ç½‘å…³è½¬å‘,ç½‘å…³åœ°å€ä¸º192.168.2.1,ä¹Ÿå°±æ˜¯æ‰€æ¥æ”¶æ–¹å¾— MAC åœ°å€æ˜¯ç½‘å…³çš„ MAC åœ°å€. å›› åº”ç”¨å±‚åè®®æµè§ˆç½‘é¡µç”¨çš„æ˜¯ HTTP/HTTPS åè®®,è¿™ä¸¤ç§åè®®çš„æ•°æ®æ„é€ å·®ä¸å¤š: HTTPéƒ¨åˆ†çš„å†…å®¹,ç±»ä¼¼ä¸‹é¢è¿™æ ·: å‡å®šè¿™ä¸ªéƒ¨åˆ†çš„é•¿åº¦ä¸º4960å­—èŠ‚,å®ƒä¼šè¢«åµŒåœ¨ TCP æ•°æ®åŒ…ä¸­. äº” TCP åè®®TCP æ•°æ®åŒ…éœ€è¦è®¾ç½®ç«¯å£,æ¥æ”¶æ–¹( Google)çš„ HTTPSé»˜è®¤æ˜¯443,å‘é€æ–¹(æœ¬æœº)çš„ç«¯å£æ˜¯ä¸€ä¸ªéšæœºç”Ÿæˆçš„1024-65535ä¹‹é—´çš„æ•´æ•°,å‡å®šä¸º51775. TCP æ•°æ®åŒ…çš„æ ‡å¤´é•¿åº¦ä¸º20å­—èŠ‚,åŠ ä¸ŠåµŒå…¥ HTTPS çš„æ•°æ®åŒ…,æ€»é•¿åº¦ä¸º4980å­—èŠ‚. å…­ IP åè®®ç„¶å, TCP æ•°æ®åŒ…å†åµŒå…¥ IP æ•°æ®åŒ….IP æ•°æ®åŒ…éœ€è¦è®¾ç½®åŒæ–¹çš„ IPåœ°å€,è¿™æ˜¯å·²çŸ¥çš„,å‘é€æ–¹æ˜¯192.168.2.238(æœ¬æœº),æ¥æ”¶æ–¹ä¸º174.36.196.242( Google). IP æ•°æ®åŒ…çš„æ ‡å¤´é•¿åº¦ä¸º20å­—èŠ‚,åŠ ä¸ŠåµŒå…¥çš„ TCP æ•°æ®åŒ…,æ€»é•¿åº¦å˜ä¸º5000å­—èŠ‚. ä¸ƒ ä»¥å¤ªç½‘åè®®æœ€å, IPåœ°å€æ•°æ®åŒ…åµŒå…¥ä»¥å¤ªç½‘æ•°æ®åŒ….ä»¥å¤ªç½‘æ•°æ®åŒ…éœ€è¦è®¾ç½®åŒæ–¹çš„ MAC åœ°å€,å‘é€æ–¹ä¸ºæœ¬æœºçš„ç½‘å¡ MAC åœ°å€,æ¥æ”¶æ–¹ä¸ºç½‘å…³192.168.2.1çš„ MAC åœ°å€(é€šè¿‡ ARP åè®®è·å¾—) æœ¬æœºçš„ MAC åœ°å€: ç½‘å…³çš„ MAC åœ°å€: ä»¥å¤ªç½‘æ•°æ®åŒ…çš„æ•°æ®éƒ¨åˆ†,æœ€å¤§é•¿åº¦ä¸º1500å­—èŠ‚,è€Œç°åœ¨çš„ IP æ•°æ®åŒ…é•¿åº¦ä¸º5000å­—èŠ‚.å› æ­¤, IP æ•°æ®åŒ…å¿…é¡»åˆ†å‰²æˆå››ä¸ªåŒ….å› ä¸ºæ¯ä¸ªåŒ…éƒ½æœ‰è‡ªå·±çš„æ ‡å¤´(20å­—èŠ‚),æ‰€ä»¥å››ä¸ªåŒ…çš„ IP æ•°æ®åŒ…çš„é•¿åº¦åˆ†åˆ«ä¸º1500,1500,1500,560. å…« æœåŠ¡ç«¯å“åº”ç»è¿‡å¤šä¸ªç½‘å…³çš„è½¬å‘, google æœåŠ¡å™¨æ”¶åˆ°äº†å››ä¸ªä»¥å¤ªç½‘æ•°æ®åŒ…. æ ¹æ® IP æ ‡å¤´çš„åºå·, google å°†å››ä¸ªåŒ…æ‹¼èµ·æ¥,å–å‡ºå®Œæ•´çš„ TCP æ•°æ®åŒ…,ç„¶åè¯»å–é‡Œé¢çš„ HTTPS è¯·æ±‚,æ¥ç€åšå‡º HTTPS å“åº”,å†ç”¨ TCP åè®®å›å¤ä¸€ä¸ªæ•°æ®åŒ…. æœ¬æœºæ”¶åˆ° HTTPS å“åº”ä»¥å,å°±å¯ä»¥å°†ç½‘é¡µæ˜¾ç¤ºå‡ºæ¥,å®Œæˆä»¥ä¸€æ¬¡ç½‘ç»œé€šä¿¡.]]></content>
      <categories>
        <category>ç½‘ç»œç¼–ç¨‹</category>
      </categories>
  </entry>
  <entry>
    <title><![CDATA[ç½‘ç»œç¼–ç¨‹(ä¸€)]]></title>
    <url>%2F2018%2F11%2F02%2F%E7%BD%91%E7%BB%9C%E7%BC%96%E7%A8%8B-%E4%B8%80%2F</url>
    <content type="text"><![CDATA[ä¸€ å®¢æˆ·ç«¯/æœåŠ¡ç«¯æ¶æ„ ç¡¬ä»¶ C/S æ¶æ„ è½¯ä»¶ C/S æ¶æ„ äº’è”ç½‘å¤„å¤„æ˜¯ C/S æ¶æ„çš„ å¦‚ä¸€ä¸ªç½‘ç«™å°±æ˜¯æœåŠ¡ç«¯,æµè§ˆå™¨æ˜¯å®¢æˆ·ç«¯( B/S æ¶æ„) æœåŠ¡ç«¯éœ€è¦éµå¾ªçš„åŸåˆ™: æœåŠ¡ç«¯ä¸å®¢æˆ·ç«¯éƒ½éœ€è¦æœ‰æƒŸä¸€çš„åœ°å€,ä½†æ˜¯æœåŠ¡ç«¯çš„åœ°å€å¿…é¡»å›ºå®š/ç»‘å®š å¯¹å¤–ä¸€ç›´æä¾›æœåŠ¡,éœ€è¦ç¨³å®šè¿è¡Œ æœåŠ¡ç«¯éœ€è¦æ”¯æŒå¹¶å‘ ç½‘ç»œ ç½‘ç»œå»ºç«‹çš„ç›®çš„æ˜¯ä¸ºäº†æ•°æ®äº¤äº’(é€šä¿¡) å¦‚ä½•å®ç°é€šä¿¡: 1. å»ºç«‹å¥½åº•å±‚çš„ç‰©ç†è¿æ¥ä»‹è´¨ 2. æœ‰ä¸€å¥—ç»Ÿä¸€çš„é€šä¿¡æ ‡å‡†,ç§°ä¹‹ä¸ºäº’è”ç½‘åè®® äº’è”ç½‘åè®®:å°±æ˜¯è®¡ç®—æœºç•Œçš„æ ‡å‡†è¯­è¨€ äºŒ ä¸ƒå±‚æ¨¡å‹æ€»è§ˆäº’è”ç½‘çš„å®ç°,æ€»å…±å¯ä»¥åˆ†ä¸ºä¸ƒå±‚.æ¯ä¸€å±‚éƒ½é ä¸‹ä¸€å±‚çš„æ”¯æŒ.ç”¨æˆ·æ¥è§¦çš„æ˜¯ç¬¬ä¸ƒå±‚,ä¹Ÿå°±æ˜¯åº”ç”¨å±‚.æƒ³è¦ç†è§£äº’è”ç½‘åè®®,å¿…é¡»ä»æœ€ä¸‹å±‚å¼€å§‹,è‡ªä¸‹è€Œä¸Šç†è§£æ¯ä¸€å±‚çš„åŠŸèƒ½. OSI æ¨¡å‹å¯ä»¥åˆ†ä¸ºä¸ƒå±‚,äº”å±‚,å››å±‚,å…¶å®éƒ½æ˜¯ä¸€ä¸ªé“ç†,åªä¸è¿‡åˆå¹¶äº†å‡ å±‚è€Œå·².ä»ä¸‹è€Œä¸Šåˆ†åˆ«ä¸º:ç‰©ç†å±‚,æ•°æ®é“¾è·¯å±‚,ç½‘ç»œå±‚,ä¼ è¾“å±‚,ä¼šè¯å±‚,è¡¨ç¤ºå±‚,åº”ç”¨å±‚. æ¯å±‚è¿è¡Œå¸¸è§çš„ç‰©ç†è®¾å¤‡: ä¸‰ tcp/IP äº”å±‚æ¨¡å‹ç†è§£ä¸€èˆ¬è®²åº”ç”¨å±‚,è¡¨ç¤ºå±‚,ä¼šè¯å±‚å¹¶åšåº”ç”¨å±‚,ä» tcp/IP äº”å±‚åè®®çš„è§’åº¦æ¥é˜è¿°æ¯å±‚çš„ç”±æ¥å’ŒåŠŸèƒ½,ææ¸…æ¥šäº†æ¯å±‚çš„ä¸»è¦åè®®ä¹Ÿå°±ç†è§£äº†äº’è”ç½‘é€šä¿¡çš„åŸç†. æ¯å±‚éƒ½è¿è¡Œç‰¹å®šçš„åè®®,è¶Šå¾€ä¸Šè¶Šé è¿‘ç”¨æˆ·,è¶Šå¾€ä¸‹è¶Šé è¿‘ç¡¬ä»¶. ä¸€ ç‰©ç†å±‚ç‰©ç†å±‚ä¹Ÿå¯ä»¥ç§°ä¹‹ä¸ºå®ä½“å±‚.ç”µè„‘æƒ³è¦äº’ç›¸é€šä¿¡,ç¬¬ä¸€ä»¶äº‹å…ˆè¦æŠŠç”µè„‘è¿èµ·æ¥,å¯ä»¥ç”¨å…‰ç¼†,ç”µç¼†ç­‰æ–¹å¼å®ç°é€šä¿¡.è¿™å°±å«å®ä½“å±‚,å®ƒå°±æ˜¯æŠŠç”µè„‘è¿æ¥èµ·æ¥çš„ç‰©ç†æ‰‹æ®µ.å®ƒä¸»è¦è§„å®šäº†ç½‘ç»œçš„ä¸€äº›ç”µå™¨ç‰¹æ€§.å®ƒçš„åŠŸèƒ½å®¤åŸºäºç”µå™¨ç‰¹æ€§å‘é€é«˜ä½ç”µå‹(ç”µä¿¡å·),é«˜ç”µå‹å¯¹åº”æ•°å­—1,ä½ç”µå‹å¯¹åº”æ•°å­—0. äºŒ æ•°æ®é“¾è·¯å±‚ç‰©ç†å±‚å•çº¯çš„ä¼ è¾“ç”µä¿¡å·0å’Œ1æ²¡æœ‰ä»»ä½•æ„ä¹‰,å¿…é¡»è§„å®šç”µä¿¡å·å¤šå°‘ä½ä¸€ç»„,æ¯ç»„ä»€ä¹ˆæ„æ€. æ•°æ®é“¾è·¯å±‚çš„åŠŸèƒ½:å®šä¹‰äº†ç”µä¿¡å·çš„åˆ†ç»„æ–¹å¼,è¿™å°±æ˜¯æ•°æ®é“¾è·¯å±‚çš„åŠŸèƒ½,å®ƒåœ¨ç‰©ç†å±‚çš„ä¸Šæ–¹,ç¡®å®šäº†0å’Œ1çš„åˆ†ç»„æ–¹å¼. 1 ä»¥å¤ªç½‘åè®®æ—©æœŸçš„æ—¶å€™å„ä¸ªå…¬å¸éƒ½æœ‰è‡ªå·±çš„åˆ†ç»„æ–¹å¼,åæ¥å½¢æˆäº†ç»Ÿä¸€çš„æ ‡å‡†,å³ä»¥å¤ªç½‘åè®® Ethernet. Ethernet è§„å®š ä¸€ç»„ç”µä¿¡å·æ„æˆä¸€ä¸ªæ•°æ®åŒ…,ä¹Ÿå«æ•°æ®å¸§ æ¯ä¸€ç»„æ•°æ®å¸§åˆ†æˆ:æŠ¥å¤´ head å’Œæ•°æ® data ä¸¤éƒ¨åˆ† æŠ¥å¤´åŒ…å«æ•°æ®åŒ…çš„ä¸€äº›è¯´æ˜é¡¹,æ¯”å¦‚å‘é€è€…çš„æºåœ°å€,æ¥å—è€…çš„æºåœ°å€ä»¥åŠæ•°æ®ç±»å‹ç­‰ç­‰. å‘é€è€…/æºåœ°å€: 6ä¸ªå­—èŠ‚ æ¥å—è€…/ç›®æ ‡åœ°å€: 6ä¸ªå­—èŠ‚ æ•°æ®ç±»å‹: 6ä¸ªå­—èŠ‚ æ•°æ®åˆ™æ˜¯æ•°æ®åŒ…çš„å…·ä½“å†…å®¹ æ•°æ®åŒ…æœ€çŸ­ä¸º46å­—èŠ‚,æœ€é•¿ä¸º1500å­—èŠ‚ æ‰€ä»¥ä¸€ä¸ªæ•°æ®å¸§çš„é•¿åº¦æœ€çŸ­ä¸º64å­—èŠ‚,æœ€é•¿1518å­—èŠ‚,è¶…è¿‡æœ€å¤§é™åˆ¶å°±åˆ†ç‰‡å‘é€. 2 mac åœ°å€head ä¸­åŒ…å«çš„æºåœ°å€å’Œç›®æ ‡åœ°å€çš„ç”±æ¥: Ethernet è§„å®šæ¥å…¥ Internet çš„è®¾å¤‡éƒ½å¿…é¡»å…·å¤‡ç½‘å¡,å‘é€ç«¯å’Œæ¥æ”¶ç«¯çš„åœ°å€ä¾¿æ˜¯æŒ‡ç½‘å¡çš„åœ°å€,å³MAC åœ°å€. mac åœ°å€:æ¯å—ç½‘å¡å‡ºå‚æ—¶éƒ½è¢«çƒ§åˆ¶ä¸Šä¸–ç•Œä¸Šä¸€ä¸ªæƒŸä¸€çš„MAC åœ°å€,é•¿åº¦ä¸º48ä½2è¿›åˆ¶,é€šå¸¸ç”±12ä½16è¿›åˆ¶æ•°è¡¨ç¤º(å‰å…­ä½æ˜¯å‚å•†ç¼–å·,åå…­ä½æ˜¯æµæ°´çº¿å·) è£…äº†å¥½å¤šæ¬¡è™šæ‹Ÿæœº,æˆ‘ç°åœ¨ä¹Ÿä¸çŸ¥é“é‚£ä¸ªæ˜¯æˆ‘çš„äº†â€¦ 3 å¹¿æ’­å®šä¹‰MAC åœ°å€åªæ˜¯ç¬¬ä¸€æ­¥,åœ¨ä¸€éƒ¨ç”µè„‘ç¬¬ä¸€æ¬¡æ¥å…¥å±€åŸŸç½‘çš„æ—¶å€™,æ˜¯æ€ä¹ˆçŸ¥é“å®ƒçš„MAC åœ°å€çš„å‘¢.åœ¨å±€åŸŸç½‘å†…é€šä¿¡éƒ½æ˜¯é€šè¿‡MAC åœ°å€æ¥å‘åŒ…æ”¶åŒ…çš„,åªè¦çŸ¥é“äº†å¯¹æ–¹çš„MAC åœ°å€æ‰å¯ä»¥äº’ç›¸é€šä¿¡.è¿™å°±è¦é ARP(addres resolution protocol) åè®®æ¥è·å–MAC åœ°å€äº†,é‚£ä¹ˆ arp åè®®æ˜¯å¦‚ä½•è§£æå‡ºå¯¹æ–¹çš„MAC åœ°å€å‘¢? è¿™é‡Œç­‰åˆ°äº†ç½‘ç»œå±‚å†æ¥è§£é‡Š. æ³¨æ„:ä»¥å¤ªç½‘æ•°æ®åŒ…å¿…é¡»çŸ¥é“æ¥æ”¶æ–¹çš„MAC åœ°å€,æ‰èƒ½å‘åŒ…. é‚£ä¹ˆåœ¨åŒä¸€ä¸ªå±€åŸŸç½‘å†…,çŸ¥é“äº†å¯¹æ–¹çš„MAC åœ°å€,ç³»ç»Ÿæ€æ ·æ‰èƒ½æŠŠæ•°æ®åŒ…å‡†ç¡®é€åˆ°æ¥æ”¶æ–¹å‘¢? ä»¥å¤ªç½‘é‡‡ç”¨äº†ä¸€ç§å¾ˆâ€™åŸå§‹â€™çš„æ–¹å¼,å®ƒå¹¶ä¸æ˜¯ç›´æ¥æŠŠæ•°æ®åŒ…å‘åˆ°æ¥æ”¶æ–¹,è€Œæ˜¯å‘å±€åŸŸç½‘å†…æ‰€æœ‰çš„è®¡ç®—æœºå‘é€,è®©æ¯å°è®¡ç®—æœºè‡ªå·±æ‹†åŒ…ååˆ¤æ–­è‡ªå·±æ˜¯å¦ä¸ºæ¥æ”¶æ–¹(å‰æçŸ¥é“å¯¹æ–¹MAC åœ°å€) ä¸Šå›¾ä¸­,1å·è®¡ç®—æœºå‘2å·è®¡ç®—æœºå‘é€ä¸€ä¸ªæ•°æ®åŒ…,å±€åŸŸç½‘å†…å…¶ä»–çš„è®¡ç®—æœºéƒ½ä¼šæ”¶åˆ°è¿™ä¸ªåŒ….ä»–ä»¬è¯»å–æ•°æ®åŒ…çš„æŠ¥å¤´,æ‰¾åˆ°æ¥æ”¶æ–¹å¾—MAC åœ°å€,ç„¶åä¸è‡ªèº«çš„MAC åœ°å€ç›¸æ¯”è¾ƒ,å¦‚æœä¸¤è€…ç›¸åŒ,å°±æ¥æ”¶è¿™ä¸ªåŒ…,åšè¿›ä¸€æ­¥çš„å¤„ç†,ä¸ç›¸åŒçš„è¯å°±ä¸¢å¼ƒè¿™ä¸ªæ•°æ®åŒ….è¿™ç§å‘é€æ–¹å¼å«â€™å¹¿æ’­â€™. æœ‰äº†æ•°æ®åŒ…çš„å®šä¹‰,ç½‘å¡çš„MAC åœ°å€,å¹¿æ’­çš„å‘é€æ–¹å¼,æ•°æ®é“¾è·¯å±‚å°±å¯ä»¥åœ¨åŒä¸€å±€åŸŸç½‘å†…çš„è®¡ç®—æœºä¹‹é—´ä¼ é€æ•°æ®äº†. ä¸‰ ç½‘ç»œå±‚1 ç½‘ç»œå±‚çš„ç”±æ¥ä»¥å¤ªç½‘åè®®,ä¾é MAC åœ°å€å‘é€æ•°æ®,ä½†è¿™ä»…ä»…åªèƒ½åœ¨åŒä¸€ä¸ªå±€åŸŸç½‘å†…å‘é€æ•°æ®.ç†è®ºä¸Š,ä¾é MAC åœ°å€,æ˜¯å¯ä»¥å’Œå…¨çƒä»»ä½•ä¸€ä¸ªMAC åœ°å€å‘é€æ•°æ®çš„,å› ä¸ºMAC åœ°å€æ˜¯æƒŸä¸€çš„.ä½†æ˜¯è¿™æ ·åšæœ‰ä¸€ä¸ªè‡´å‘½çš„ç¼ºé™·. ä»¥å¤ªç½‘ä¾é å¹¿æ’­æ–¹å¼å‘é€æ•°æ®åŒ…,è€Œå¹¿æ’­å°±æ„å‘³ç€æ¯ä¸ªäººéƒ½è¦å‘é€ä¸€ä»½,é‚£ä¹ˆå…¨çƒè¿™ä¹ˆå¤šçš„è®¡ç®—æœº,åœ¨æ‰¾åˆ°å¯¹æ–¹çš„MAC åœ°å€ä¹‹å‰éƒ½è¦å‘ä¸€ä»½æ— ç–‘ä¼šé€ æˆå·¨å¤§çš„æµªè´¹,è€Œä¸”æ•ˆç‡æä½,è€Œä¸”å±€é™åœ¨å‘é€è€…çš„å±€åŸŸç½‘.ä¹Ÿå°±æ˜¯è¯´,å¦‚æœä¸¤å°è®¡ç®—æœºä¸åœ¨åŒä¸€ä¸ªå±€åŸŸç½‘,å¹¿æ’­æ˜¯ä¼ ä¸è¿‡å»çš„.è¿™ç§è®¾è®¡æ˜¯åˆç†çš„,å¦åˆ™çš„è¯äº’è”ç½‘ä¸Šæ¯ä¸€å°è®¡ç®—æœºéƒ½ä¼šæ”¶åˆ°æ‰€æœ‰åŒ…,é‚£ä¼šå¼•èµ·ç¾éš¾. äº’è”ç½‘å¯ä»¥æƒ³è±¡æˆç”±æ— æ•°ä¸ªå±€åŸŸç½‘ç»„æˆçš„ä¸€ä¸ªå·¨å‹ç½‘ç»œ,å¦‚æœæƒ³è¦è·¨å±€åŸŸç½‘é€šä¿¡å¿…é¡»æ‰¾åˆ°å¦ä¸€ç§æ–¹å¼,èƒ½å¤ŸåŒºåˆ†å“ªäº›MAC åœ°å€å±äºåŒä¸€ä¸ªå±€åŸŸç½‘,å“ªäº›ä¸å±äºåŒä¸€ä¸ªå±€åŸŸç½‘.å¦‚æœæ˜¯åŒä¸€ä¸ªå±€åŸŸç½‘çš„è¯,å°±é‡‡ç”¨å¹¿æ’­å‘é€(å¦‚ä½•çŸ¥é“å¯¹æ–¹çš„MAC åœ°å€),å¦åˆ™å°±é‡‡ç”¨â€™è·¯ç”±â€™çš„æ–¹å¼å‘é€.(â€˜è·¯ç”±â€™çš„æ„æ€,å°±æ˜¯æŒ‡å¦‚ä½•å‘ä¸åŒå±€åŸŸç½‘å‘é€æ•°æ®åŒ…) è¿™å°±å¯¼è‡´äº†â€™ç½‘ç»œå±‚â€™çš„è¯ç”Ÿ.å®ƒçš„ä½œç”¨æ˜¯å¼•è¿›ä¸€å¥—æ–°çš„åœ°å€,ä½¿å¾—æˆ‘ä»¬èƒ½å¤ŸåŒºåˆ†ä¸åŒçš„è®¡ç®—æœºæ˜¯å¦å±äºåŒä¸€ä¸ªå±€åŸŸç½‘.è¿™å¥—åœ°å€å«åšâ€™ç½‘ç»œåœ°å€â€™,ç®€ç§°â€™ç½‘å€â€™. äºæ˜¯,ç½‘ç»œå±‚å‡ºç°ä»¥å,æ¯å°è®¡ç®—æœºæœ‰äº†ä¸¤ç§åœ°å€,ä¸€ç§æ˜¯MAC åœ°å€,å¦ä¸€ç§æ˜¯ç½‘ç»œåœ°å€.ä¸¤ç§åœ°å€ä¹‹é—´æ²¡æœ‰ä»»ä½•è”ç³»,MAC åœ°å€æ˜¯ç»‘å®šåˆ°ç½‘å¡ä¸Šçš„,ç½‘ç»œåœ°å€åˆ™æ˜¯ç”±MAC æœåŠ¡å™¨åˆ†é…çš„,å½“ä¸€å°è®¡ç®—æœºç¬¬ä¸€æ¬¡è”ç½‘æ—¶,ä¼šå‘MAC æœåŠ¡å™¨å‘é€ä¸€ä¸ªåŒ…,ç„¶åMAC æœåŠ¡å™¨ä¼šåˆ†é…å¥½ç½‘ç»œåœ°å€. ç½‘ç»œåœ°å€å¸®åŠ©æˆ‘ä»¬ç¡®å®šè®¡ç®—æœºæ‰€åœ¨çš„å±€åŸŸç½‘,MAC åœ°å€åˆ™å°†æ•°æ®åŒ…å‘é€åˆ°è¯¥å±€åŸŸç½‘ä¸­çš„ç›®æ ‡MAC åœ°å€.å› æ­¤ä»é€»è¾‘ä¸Šåˆ¤æ–­,å¿…å®šæ˜¯å…ˆå¤„ç†ç½‘ç»œåœ°å€,ç„¶åå¤„ç†MAC åœ°å€. å¯ä»¥è¿™æ ·ç†è§£,äº’è”ç½‘ä¸­çš„é€šä¿¡éƒ½æ˜¯MAC åœ°å€äº’ç›¸å‘é€æ•°æ®åŒ…,è€Œç½‘ç»œåœ°å€æ˜¯ä¸ºäº†å¸®æˆ‘ä»¬ç¡®è®¤éœ€è¦å¾€å“ªä¸ªå±€åŸŸç½‘é‡Œé¢çš„ç›®æ ‡MAC åœ°å€å‘é€æ•°æ®åŒ…,ä¸¤è€…ç¼ºä¸€ä¸å¯. 2 IP åè®®è§„å®šç½‘ç»œåœ°å€çš„åè®®,å«åš IP åè®®.å®ƒå®šä¹‰çš„åœ°å€,ç§°ä¸º IP åœ°å€. ç›®å‰,å¹¿æ³›é‡‡ç”¨çš„æ˜¯ IP åè®®ç¬¬å››ç‰ˆ,ç®€ç§° IPV4.è¿™ä¸ªç‰ˆæœ¬è§„å®š,ç½‘ç»œåœ°å€ç”±32ä¸ªäºŒè¿›åˆ¶ä½ç»„æˆ. å¯ä»¥çœ‹å‡ºæˆ‘çš„ IP åœ°å€ä¸º192.168.11.95,ä¹ æƒ¯ä¸Š,ç”¨å››æ®µçš„åè¿›åˆ¶æ•°è¡¨ç¤º IP åœ°å€,ä»0.0.0.0åˆ°255.255.255.255. IP åœ°å€ä¸€èˆ¬åˆ†ä¸º5ç±»:A,B,C,D,E ç±», D å’ŒE ç±»ä¸ºå…¶ä»–ç”¨é€”çš„. å¯ä»¥çœ‹ç²—æ¥ IP åœ°å€æ˜¯æœ‰é™çš„,è€Œä¸”ç°åœ¨çš„ IPV4 åœ°å€å·²ç»åˆ†å®Œäº†,ä»¥åä½¿ç”¨çš„å°±æ˜¯ IPV6äº†,æ®è¯´ä¸–ç•Œä¸Šçš„æ¯ä¸€ç²’æ²™å­éƒ½æœ‰ä¸€ä¸ªæƒŸä¸€çš„ IP åœ°å€. äº’è”ç½‘ä¸Šçš„æ¯ä¸€å°è®¡ç®—æœº,éƒ½ä¼šåˆ†é…åˆ°ä¸€ä¸ª IP åœ°å€.è¿™ä¸ªåœ°å€åˆ†ä¸ºä¸¤éƒ¨åˆ†,å‰ä¸€éƒ¨åˆ†ä»£è¡¨ç½‘ç»œ,åä¸€éƒ¨åˆ†ä»£è¡¨ä¸»æœº.æ¯”å¦‚, æˆ‘çš„ IP åœ°å€192.168.11.95,è¿™æ˜¯ä¸€ä¸ª32ä½çš„åœ°å€,æˆ‘çš„ç½‘ç»œéƒ¨åˆ†æ˜¯å‰é¢24ä½192.168.11,é‚£ä¹ˆä¸»æœºå·å°±æ˜¯å8ä½.å¤„äºåŒä¸€ä¸ªå±€åŸŸç½‘çš„ç”µè„‘,å®ƒä»¬ IP åœ°å€çš„ç½‘ç»œéƒ¨åˆ†å¿…å®šæ˜¯ç›¸é€šçš„,ä¹Ÿå°±æ˜¯è¯´192.168.11.95ä¸192.168.11.49å¤„äºåŒä¸€ä¸ªå±€åŸŸç½‘. ä½†æ˜¯æˆ‘ä»¬å•çº¯ä» IP åœ°å€æ˜¯æ— æ³•åˆ¤æ–­ç½‘ç»œéƒ¨åˆ†çš„,æˆ‘ä¸ºä»€ä¹ˆçŸ¥é“æˆ‘çš„ IP åœ°å€çš„ç½‘ç»œå·?å…¶å®æ²¡æœ‰å¦å¤–ä¸€ä¸ªåœ°å€çš„è¯æˆ‘ä¹Ÿä¸çŸ¥é“çš„. é‚£ä¹ˆæ€æ ·ä» IP åœ°å€æ¥åˆ¤æ–­è®¡ç®—æœºæ˜¯å¦å¤„äºåŒä¸€ä¸ªå±€åŸŸç½‘å‘¢?è¿™å°±æ˜¯å¦å¤–ä¸€ä¸ªåœ°å€çš„ä½œç”¨äº†,ä¹Ÿå°±æ˜¯å­ç½‘æ©ç . æ‰€è°“å­ç½‘æ©ç ,å°±æ˜¯è¡¨ç¤ºå­ç½‘ç»œç‰¹å¾çš„ä¸€ä¸ªå‚æ•°.å®ƒåœ¨å½¢å¼ä¸Šç­‰åŒäº IP åœ°å€,ä¹Ÿæ˜¯ä¸€ä¸ª32ä½äºŒè¿›åˆ¶æ•°å­—,å®ƒçš„ç½‘ç»œéƒ¨åˆ†å…¨ä¸º1,ä¸»æœºéƒ¨åˆ†å…¨éƒ¨ä¸º0.æ¯”å¦‚æˆ‘çš„ IP192.168.11.95,å› ä¸ºæˆ‘çš„ç½‘ç»œéƒ¨åˆ†ä¸ºå‰24ä½,é‚£ä¹ˆæˆ‘çš„å­ç½‘æ©ç å°±æ˜¯255.255.255.0. çŸ¥é“äº†å­ç½‘æ©ç ,å°±å¯ä»¥åˆ¤æ–­,ä»»æ„ä¸¤ä¸ª IP åœ°å€æ˜¯å¦å¤„äºåŒä¸€ä¸ªå±€åŸŸç½‘.æ–¹æ³•æ˜¯å°†ä¸¤ä¸ª IP åœ°å€ä¸å­ç½‘æ©ç åˆ†åˆ«è¿›è¡Œ AND è¿ç®—(ä¸¤ä¸ªæ•°ä½éƒ½ä¸º1,åˆ™ä¸º1,å¦åˆ™ä¸º0),ç„¶åæ¯”è¾ƒç»“æœæ˜¯æˆ–å¦ç›¸åŒ,å¦‚æœç›¸åŒ,å°±è¡¨æ˜å¤„åœ¨åŒä¸€ä¸ªå±€åŸŸç½‘,å¦åˆ™å°±ä¸æ˜¯,å°±éœ€è¦é€šè¿‡è·¯ç”±åè®®å‘é€æ•°æ®åŒ…. IP åè®®çš„ä½œç”¨ä¸»è¦æœ‰ä¸¤ä¸ª:ä¸€ä¸ªæ˜¯ä¸ºæ¯ä¸€å°è®¡ç®—æœºåˆ†é… IP åœ°å€,å¦ä¸€ä¸ªæ˜¯å’Œå­ç½‘æ©ç ç»“åˆç¡®å®šå…ƒ IP ä¸ç›®æ ‡ IP æ˜¯å¦å¤„äºåŒä¸€ä¸ªå±€åŸŸç½‘. 3 IP æ•°æ®åŒ…æ ¹æ® IP åè®®å‘é€çš„æ•°æ®,å«åš IP æ•°æ®åŒ…,ä¸éš¾æƒ³è±¡,å…¶ä¸­å¿…å®šåŒ…æ‹¬ IP åœ°å€ä¿¡æ¯. ä½†æ˜¯å‰é¢è¯´è¿‡.ä»¥å¤ªç½‘æ•°æ®åŒ…åªåŒ…å«MAC åœ°å€,å¹¶æ²¡æœ‰ IP åœ°å€çš„ä½ç½®.é‚£ä¹ˆæ˜¯å¦éœ€è¦ä¿®æ”¹æ•°æ®å®šä¹‰åœ¨æ·»åŠ ä¸€ä¸ªä½ç½®å‘¢? æˆ‘ä»¬å¯ä»¥ç›´æ¥æŠŠ IP æ•°æ®åŒ…æ”¾è¿›ä»¥å¤ªç½‘æ•°æ®åŒ…çš„æ•°æ®éƒ¨åˆ†,å› æ­¤å®Œå…¨ä¸ç”¨ä¿®æ”¹ä»¥å¤ªç½‘çš„è§„æ ¼.è¿™å°±æ˜¯äº’è”ç½‘åˆ†å±‚ç»“æ„çš„å¥½å¤„:ä¸Šå±‚çš„å˜åŠ¨å®Œå…¨ä¸æ¶‰åŠä¸‹å±‚çš„ç»“æ„. å…·ä½“æ¥è¯´, IP æ•°æ®åŒ…ä¹Ÿåˆ†ä¸ºæŠ¥å¤´å’Œæ•°æ®ä¸¤ä¸ªéƒ¨åˆ† æŠ¥å¤´éƒ¨åˆ†ä¸»è¦åŒ…æ‹¬ç‰ˆæœ¬,é•¿åº¦, IP åœ°å€ç­‰ä¿¡æ¯,æ•°æ®éƒ¨åˆ†åˆ™æ˜¯ IP æ•°æ®åŒ…çš„å…·ä½“å†…å®¹.å®ƒæ”¾è¿›ä»¥å¤ªç½‘æ•°æ®åŒ…å,ä»¥å¤ªç½‘æ•°æ®åŒ…å°±æ‹¥æœ‰äº†ä¸¤ä¸ªæŠ¥å¤´. IP æ•°æ®åŒ…çš„æŠ¥å¤´éƒ¨åˆ†çš„é•¿åº¦ä¸º20åˆ°60ä¸ªå­—èŠ‚,æ•´ä¸ªæ•°æ®åŒ…çš„æ€»é•¿åº¦æœ€å¤§ä¸º65535å­—èŠ‚.å› æ­¤,ç†è®ºä¸Š,ä¸€ä¸ª IP æ•°æ®åŒ…çš„æ•°æ®éƒ¨åˆ†,æœ€é•¿ä¸º65515å­—èŠ‚,å‰é¢è¯´è¿‡,ä»¥å¤ªç½‘æ•°æ®åŒ…çš„æ•°æ®éƒ¨åˆ†,æœ€é•¿ä¸º1500å­—èŠ‚.å› æ­¤,å¦‚æœ IP æ•°æ®åŒ…è¶…è¿‡äº†1500å­—èŠ‚,å®ƒå°±éœ€è¦åˆ†å‰²æˆå‡ ä¸ªä»¥å¤ªç½‘æ•°æ®åŒ…,åˆ†å¼€å‘é€. 4 ARP åè®®ä»æ•°æ®é“¾è·¯å±‚å’Œç½‘ç»œå±‚æˆ‘ä»¬çŸ¥é“,æƒ³è¦å‘é€ä¸€ä¸ªæ•°æ®åŒ…,å¿…é¡»çŸ¥é“ä¸¤ä¸ªåœ°å€,ä¸€ä¸ªæ˜¯å¯¹æ–¹çš„ MAC åœ°å€,å¦ä¸€ä¸ªæ˜¯å¯¹æ–¹çš„ IP åœ°å€.é€šå¸¸æƒ…å†µä¸‹,å¯¹æ–¹çš„ IP åœ°å€æ˜¯å·²çŸ¥çš„,ä½†æ˜¯ä¸çŸ¥é“å¯¹æ–¹çš„ MAC åœ°å€. æ‰€ä»¥éœ€è¦ä¸€ç§æœºåˆ¶èƒ½å¤Ÿä» IP åœ°å€å¾—åˆ° MAC åœ°å€. è¿™é‡Œå¯ä»¥åˆ†ä¸ºä¸¤ç§æƒ…å†µ:ç¬¬ä¸€ç§æƒ…å†µ,å¦‚æœä¸¤å°ä¸»æœºä¸åœ¨åŒä¸€ä¸ªå±€åŸŸç½‘,é‚£ä¹ˆäº‹å®ä¸Šæ²¡åŠæ³•å¾—åˆ°å¯¹æ–¹çš„ MAC åœ°å€,åªèƒ½æŠŠæ•°æ®åŒ…ä¼ é€åˆ°ä¸¤ä¸ªå±€åŸŸç½‘è¿æ¥å¤„çš„ç½‘å…³â€™ gatewayâ€™,è®©ç½‘å…³å»å¤„ç†. ç¬¬äºŒç§æƒ…å†µ,å¦‚æœä¸¤å°ä¸»æœºåœ¨åŒä¸€ä¸ªå±€åŸŸç½‘,é‚£ä¹ˆå¯ä»¥ä½¿ç”¨ ARP åè®®,å¾—åˆ°å¯¹æ–¹çš„ MAC åœ°å€. ARP åè®®ä¹Ÿæ˜¯å‘é€ä¸€ä¸ªæ•°æ®åŒ…(åŒ…å«åœ¨ä»¥å¤ªç½‘æ•°æ®åŒ…ä¸­),å…¶ä¸­åŒ…å«å®ƒç´¢è¦æŸ¥è¯¢ä¸»æœºçš„IP åœ°å€,åœ¨å¯¹æ–¹ MAC åœ°å€è¿™ä¸ªä½ç½®,å¡«çš„æ˜¯ FF:FF:FF:FF:FF:FF,è¡¨ç¤ºè¿™æ˜¯ä¸€ä¸ªå¹¿æ’­åœ°å€.å®ƒæ‰€åœ¨å±€åŸŸç½‘çš„æ¯ä¸€å°è®¡ç®—æœºéƒ½ä¼šæ”¶åˆ°è¿™ä¸ªæ•°æ®åŒ…,ä»ä¸­å–å‡ºIPåœ°å€ï¼Œä¸è‡ªèº«çš„IPåœ°å€è¿›è¡Œæ¯”è¾ƒã€‚å¦‚æœä¸¤è€…ç›¸åŒï¼Œéƒ½åšå‡ºå›å¤ï¼Œå‘å¯¹æ–¹æŠ¥å‘Šè‡ªå·±çš„MACåœ°å€ï¼Œå¦åˆ™å°±ä¸¢å¼ƒè¿™ä¸ªåŒ…ã€‚ æ€»ä¹‹ï¼Œæœ‰äº†ARPåè®®ä¹‹åï¼Œæˆ‘ä»¬å°±å¯ä»¥å¾—åˆ°åŒä¸€ä¸ªå­ç½‘ç»œå†…çš„ä¸»æœºMACåœ°å€ï¼Œå¯ä»¥æŠŠæ•°æ®åŒ…å‘é€åˆ°ä»»æ„ä¸€å°ä¸»æœºä¹‹ä¸Šäº†ã€‚ å›› ä¼ è¾“å±‚1 ä¼ è¾“å±‚çš„ç”±æ¥æœ‰äº†MACåœ°å€å’ŒIPåœ°å€ï¼Œæˆ‘ä»¬å·²ç»å¯ä»¥åœ¨äº’è”ç½‘ä¸Šä»»æ„ä¸¤å°ä¸»æœºä¸Šå»ºç«‹é€šä¿¡ã€‚ æ¥ä¸‹æ¥çš„é—®é¢˜æ˜¯ï¼ŒåŒä¸€å°ä¸»æœºä¸Šæœ‰è®¸å¤šç¨‹åºéƒ½éœ€è¦ç”¨åˆ°ç½‘ç»œï¼Œæ¯”å¦‚ï¼Œä½ ä¸€è¾¹æµè§ˆç½‘é¡µï¼Œä¸€è¾¹ä¸æœ‹å‹åœ¨çº¿èŠå¤©ã€‚å½“ä¸€ä¸ªæ•°æ®åŒ…ä»äº’è”ç½‘ä¸Šå‘æ¥çš„æ—¶å€™ï¼Œä½ æ€ä¹ˆçŸ¥é“ï¼Œå®ƒæ˜¯è¡¨ç¤ºç½‘é¡µçš„å†…å®¹ï¼Œè¿˜æ˜¯è¡¨ç¤ºåœ¨çº¿èŠå¤©çš„å†…å®¹ï¼Ÿ ä¹Ÿå°±æ˜¯è¯´ï¼Œæˆ‘ä»¬è¿˜éœ€è¦ä¸€ä¸ªå‚æ•°ï¼Œè¡¨ç¤ºè¿™ä¸ªæ•°æ®åŒ…åˆ°åº•ä¾›å“ªä¸ªç¨‹åºï¼ˆè¿›ç¨‹ï¼‰ä½¿ç”¨ã€‚è¿™ä¸ªå‚æ•°å°±å«åšâ€ç«¯å£â€ï¼ˆportï¼‰ï¼Œå®ƒå…¶å®æ˜¯æ¯ä¸€ä¸ªä½¿ç”¨ç½‘å¡çš„ç¨‹åºçš„ç¼–å·ã€‚æ¯ä¸ªæ•°æ®åŒ…éƒ½å‘åˆ°ä¸»æœºçš„ç‰¹å®šç«¯å£ï¼Œæ‰€ä»¥ä¸åŒçš„ç¨‹åºå°±èƒ½å–åˆ°è‡ªå·±æ‰€éœ€è¦çš„æ•°æ®ã€‚ â€œç«¯å£â€æ˜¯0åˆ°65535ä¹‹é—´çš„ä¸€ä¸ªæ•´æ•°ï¼Œæ­£å¥½16ä¸ªäºŒè¿›åˆ¶ä½ã€‚0åˆ°1023çš„ç«¯å£è¢«ç³»ç»Ÿå ç”¨ï¼Œç”¨æˆ·åªèƒ½é€‰ç”¨å¤§äº1023çš„ç«¯å£ã€‚ä¸ç®¡æ˜¯æµè§ˆç½‘é¡µè¿˜æ˜¯åœ¨çº¿èŠå¤©ï¼Œåº”ç”¨ç¨‹åºä¼šéšæœºé€‰ç”¨ä¸€ä¸ªç«¯å£ï¼Œç„¶åä¸æœåŠ¡å™¨çš„ç›¸åº”ç«¯å£è”ç³»ã€‚ â€œä¼ è¾“å±‚â€çš„åŠŸèƒ½ï¼Œå°±æ˜¯å»ºç«‹â€ç«¯å£åˆ°ç«¯å£â€çš„é€šä¿¡ã€‚ç›¸æ¯”ä¹‹ä¸‹ï¼Œâ€ç½‘ç»œå±‚â€çš„åŠŸèƒ½æ˜¯å»ºç«‹â€ä¸»æœºåˆ°ä¸»æœºâ€çš„é€šä¿¡ã€‚åªè¦ç¡®å®šä¸»æœºå’Œç«¯å£ï¼Œæˆ‘ä»¬å°±èƒ½å®ç°ç¨‹åºä¹‹é—´çš„äº¤æµã€‚å› æ­¤ï¼ŒUnixç³»ç»Ÿå°±æŠŠä¸»æœº+ç«¯å£ï¼Œå«åšâ€å¥—æ¥å­—â€ï¼ˆsocketï¼‰ã€‚æœ‰äº†å®ƒï¼Œå°±å¯ä»¥è¿›è¡Œç½‘ç»œåº”ç”¨ç¨‹åºå¼€å‘äº†ã€‚ 2 UDP åè®®ç°åœ¨ï¼Œæˆ‘ä»¬å¿…é¡»åœ¨æ•°æ®åŒ…ä¸­åŠ å…¥ç«¯å£ä¿¡æ¯ï¼Œè¿™å°±éœ€è¦æ–°çš„åè®®ã€‚æœ€ç®€å•çš„å®ç°å«åšUDPåè®®ï¼Œå®ƒçš„æ ¼å¼å‡ ä¹å°±æ˜¯åœ¨æ•°æ®å‰é¢ï¼ŒåŠ ä¸Šç«¯å£å·ã€‚ UDPæ•°æ®åŒ…ï¼Œä¹Ÿæ˜¯ç”±â€æŠ¥å¤´â€å’Œâ€æ•°æ®â€ä¸¤éƒ¨åˆ†ç»„æˆã€‚ â€œæŠ¥å¤´â€éƒ¨åˆ†ä¸»è¦å®šä¹‰äº†å‘å‡ºç«¯å£å’Œæ¥æ”¶ç«¯å£ï¼Œâ€æ•°æ®â€éƒ¨åˆ†å°±æ˜¯å…·ä½“çš„å†…å®¹ã€‚ç„¶åï¼ŒæŠŠæ•´ä¸ªUDPæ•°æ®åŒ…æ”¾å…¥IPæ•°æ®åŒ…çš„â€æ•°æ®â€éƒ¨åˆ†ï¼Œè€Œå‰é¢è¯´è¿‡ï¼ŒIPæ•°æ®åŒ…åˆæ˜¯æ”¾åœ¨ä»¥å¤ªç½‘æ•°æ®åŒ…ä¹‹ä¸­çš„ï¼Œæ‰€ä»¥æ•´ä¸ªä»¥å¤ªç½‘æ•°æ®åŒ…ç°åœ¨å˜æˆäº†ä¸‹é¢è¿™æ ·ï¼š 3 TCP åè®®UDPåè®®çš„ä¼˜ç‚¹æ˜¯æ¯”è¾ƒç®€å•ï¼Œå®¹æ˜“å®ç°ï¼Œä½†æ˜¯ç¼ºç‚¹æ˜¯å¯é æ€§è¾ƒå·®ï¼Œä¸€æ—¦æ•°æ®åŒ…å‘å‡ºï¼Œæ— æ³•çŸ¥é“å¯¹æ–¹æ˜¯å¦æ”¶åˆ°ã€‚ ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œæé«˜ç½‘ç»œå¯é æ€§ï¼ŒTCPåè®®å°±è¯ç”Ÿäº†ã€‚è¿™ä¸ªåè®®éå¸¸å¤æ‚ï¼Œä½†å¯ä»¥è¿‘ä¼¼è®¤ä¸ºï¼Œå®ƒå°±æ˜¯æœ‰ç¡®è®¤æœºåˆ¶çš„UDPåè®®ï¼Œæ¯å‘å‡ºä¸€ä¸ªæ•°æ®åŒ…éƒ½è¦æ±‚ç¡®è®¤ã€‚å¦‚æœæœ‰ä¸€ä¸ªæ•°æ®åŒ…é—å¤±ï¼Œå°±æ”¶ä¸åˆ°ç¡®è®¤ï¼Œå‘å‡ºæ–¹å°±çŸ¥é“æœ‰å¿…è¦é‡å‘è¿™ä¸ªæ•°æ®åŒ…äº†ã€‚ å› æ­¤ï¼ŒTCPåè®®èƒ½å¤Ÿç¡®ä¿æ•°æ®ä¸ä¼šé—å¤±ã€‚å®ƒçš„ç¼ºç‚¹æ˜¯è¿‡ç¨‹å¤æ‚ã€å®ç°å›°éš¾ã€æ¶ˆè€—è¾ƒå¤šçš„èµ„æºã€‚ TCPæ•°æ®åŒ…å’ŒUDPæ•°æ®åŒ…ä¸€æ ·ï¼Œéƒ½æ˜¯å†…åµŒåœ¨IPæ•°æ®åŒ…çš„â€æ•°æ®â€éƒ¨åˆ†ã€‚TCPæ•°æ®åŒ…æ²¡æœ‰é•¿åº¦é™åˆ¶ï¼Œç†è®ºä¸Šå¯ä»¥æ— é™é•¿ï¼Œä½†æ˜¯ä¸ºäº†ä¿è¯ç½‘ç»œçš„æ•ˆç‡ï¼Œé€šå¸¸TCPæ•°æ®åŒ…çš„é•¿åº¦ä¸ä¼šè¶…è¿‡IPæ•°æ®åŒ…çš„é•¿åº¦ï¼Œä»¥ç¡®ä¿å•ä¸ªTCPæ•°æ®åŒ…ä¸å¿…å†åˆ†å‰²ã€‚ äº” åº”ç”¨å±‚åº”ç”¨ç¨‹åºæ”¶åˆ°â€ä¼ è¾“å±‚â€çš„æ•°æ®ï¼Œæ¥ä¸‹æ¥å°±è¦è¿›è¡Œè§£è¯»ã€‚ç”±äºäº’è”ç½‘æ˜¯å¼€æ”¾æ¶æ„ï¼Œæ•°æ®æ¥æºäº”èŠ±å…«é—¨ï¼Œå¿…é¡»äº‹å…ˆè§„å®šå¥½æ ¼å¼ï¼Œå¦åˆ™æ ¹æœ¬æ— æ³•è§£è¯»ã€‚ â€œåº”ç”¨å±‚â€çš„ä½œç”¨ï¼Œå°±æ˜¯è§„å®šåº”ç”¨ç¨‹åºçš„æ•°æ®æ ¼å¼ã€‚ ä¸¾ä¾‹æ¥è¯´ï¼ŒTCPåè®®å¯ä»¥ä¸ºå„ç§å„æ ·çš„ç¨‹åºä¼ é€’æ•°æ®ï¼Œæ¯”å¦‚Emailã€WWWã€FTPç­‰ç­‰ã€‚é‚£ä¹ˆï¼Œå¿…é¡»æœ‰ä¸åŒåè®®è§„å®šç”µå­é‚®ä»¶ã€ç½‘é¡µã€FTPæ•°æ®çš„æ ¼å¼ï¼Œè¿™äº›åº”ç”¨ç¨‹åºåè®®å°±æ„æˆäº†â€åº”ç”¨å±‚â€ã€‚ è¿™æ˜¯æœ€é«˜çš„ä¸€å±‚ï¼Œç›´æ¥é¢å¯¹ç”¨æˆ·ã€‚å®ƒçš„æ•°æ®å°±æ”¾åœ¨TCPæ•°æ®åŒ…çš„â€æ•°æ®â€éƒ¨åˆ†ã€‚å› æ­¤ï¼Œç°åœ¨çš„ä»¥å¤ªç½‘çš„æ•°æ®åŒ…å°±å˜æˆä¸‹é¢è¿™æ ·ã€‚ è‡³æ­¤ï¼Œæ•´ä¸ªäº’è”ç½‘çš„äº”å±‚ç»“æ„ï¼Œè‡ªä¸‹è€Œä¸Šå…¨éƒ¨è®²å®Œäº†ã€‚è¿™æ˜¯ä»ç³»ç»Ÿçš„è§’åº¦ï¼Œè§£é‡Šäº’è”ç½‘æ˜¯å¦‚ä½•æ„æˆçš„.]]></content>
      <categories>
        <category>ç½‘ç»œç¼–ç¨‹</category>
      </categories>
  </entry>
  <entry>
    <title><![CDATA[å¼‚å¸¸å¤„ç†]]></title>
    <url>%2F2018%2F11%2F01%2F%E5%BC%82%E5%B8%B8%E5%A4%84%E7%90%86%2F</url>
    <content type="text"><![CDATA[å¼‚å¸¸ä¹‹é—® ä»€ä¹ˆæ˜¯å¼‚å¸¸? å¼‚å¸¸å°±æ˜¯ç¨‹åºè¿è¡Œæ—¶å‘ç”Ÿé”™è¯¯çš„ä¿¡å·(åœ¨ç¨‹åºå‡ºç°é”™è¯¯æ—¶,åˆ™ä¼šäº§ç”Ÿä¸€ä¸ªå¼‚å¸¸,è‹¥ç¨‹åºæ²¡æœ‰å¤„ç†å®ƒ,åˆ™ä¼šæŠ›å‡ºè¯¥å¼‚å¸¸,ç¨‹åºçš„è¿è¡Œä¹Ÿéšä¹‹ç»ˆæ­¢)åœ¨Python ä¸­,é”™è¯¯è§¦å‘çš„å¼‚å¸¸å¦‚ä¸‹: Traceback ä¸ºå¼‚å¸¸çš„è¿½è¸ªä¿¡æ¯ NameError ä¸ºå¼‚å¸¸çš„ç±»å‹ name â€˜aâ€™ is not defined ä¸ºå¼‚å¸¸å€¼ åœ¨ Python ä¸­çš„é”™è¯¯åˆ†ä¸ºä¸¤ç§: è¯­æ³•é”™è¯¯:è¿™ç§é”™è¯¯,é€šè¿‡ä¸äº† python çš„è¯­æ³•æ£€æµ‹,è¿™ç§é”™è¯¯ä¹Ÿæ•æ‰ä¸äº†,å¿…é¡»åœ¨ç¨‹åºæ‰§è¡Œå‰æ”¹æ­£. é€»è¾‘å¼‚å¸¸:è¯­æ³•æ²¡é—®é¢˜,é€šè¿‡äº† Pythonçš„è¯­æ³•æ£€æµ‹,ä½†å› ä¸ºå¯¹ python æ•°æ®ç±»å‹çš„é”™è¯¯ä½¿ç”¨å¯¼è‡´å‡ºé”™. å¼‚å¸¸çš„ç§ç±» åœ¨ Python ä¸­ä¸åŒçš„å¼‚å¸¸å¯ä»¥ç”¨ä¸åŒçš„ç±»å‹( python ä¸­ç»Ÿä¸€äº†ç±»ä¸ç±»å‹,ç±»å‹å³ç±»)å»æ ‡è¯†,ä¸€ä¸ªå¼‚å¸¸æ ‡è¯†ä¸€ç§é”™è¯¯. å¸¸ç”¨å¼‚å¸¸: AttributeError è¯•å›¾è®¿é—®ä¸€ä¸ªå¯¹è±¡æ²¡æœ‰çš„å±æ€§ IOError è¾“å…¥/è¾“å‡ºå¼‚å¸¸;é€šå¸¸ä¸ºæ— æ³•æ‰“å¼€æ–‡ä»¶ ImportError æ— æ³•å¼•å…¥æ¨¡å—æˆ–åŒ…;åŸºæœ¬ä¸Šæ˜¯è·¯å¾„é—®é¢˜æˆ–åç§°é”™è¯¯ IndentationError è¯­æ³•é”™è¯¯çš„å­ç±»;ä»£ç æ²¡æœ‰æ­£ç¡®å¯¹å…¶ IndexError ä¸‹æ ‡ç´¢å¼•è¶…å‡ºåºåˆ—è¾¹ç•Œ KeyError è¯•å›¾è®¿é—®å­—å…¸ä¸­ä¸å­˜åœ¨çš„é”® KeyboardInterrupt é”®ç›˜ç»ˆæ­¢,é€šå¸¸ä¸º Ctrl+C åŒæ—¶è¢«æŒ‰ä¸‹ NameError ä½¿ç”¨ä¸€ä¸ªè¿˜æœªè¢«èµ‹äºˆå¯¹è±¡çš„å˜é‡ SyntaxError python ä»£ç éæ³•,ä»£ç ä¸èƒ½ç¼–è¯‘ TypeError ä¼ å…¥å¯¹è±¡ç±»å‹ä¸è¦æ±‚çš„ä¸ç¬¦åˆ UnboundLocalError è¯•å›¾è®¿é—®ä¸€ä¸ªè¿˜æœªè¢«èµ‹å€¼çš„å±€éƒ¨å˜é‡,åŸºæœ¬æ˜¯ç”±äºå¦æœ‰ä¸€ä¸ªåŒåçš„å…¨å±€å˜é‡,å¯¼è‡´ä½ ä»¥ä¸ºæ­£åœ¨è®¿é—®å®ƒ ValueError ä¼ å…¥ä¸€ä¸ªè°ƒç”¨è€…ä¸æœŸæœ›çš„å€¼,å³ä½¿å€¼å¾—ç±»å‹æ˜¯æ­£ç¡®çš„ æ›´å¤šå¼‚å¸¸: 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748ArithmeticErrorAssertionErrorAttributeErrorBaseExceptionBufferErrorBytesWarningDeprecationWarningEnvironmentErrorEOFErrorExceptionFloatingPointErrorFutureWarningGeneratorExitImportErrorImportWarningIndentationErrorIndexErrorIOErrorKeyboardInterruptKeyErrorLookupErrorMemoryErrorNameErrorNotImplementedErrorOSErrorOverflowErrorPendingDeprecationWarningReferenceErrorRuntimeErrorRuntimeWarningStandardErrorStopIterationSyntaxErrorSyntaxWarningSystemErrorSystemExitTabErrorTypeErrorUnboundLocalErrorUnicodeDecodeErrorUnicodeEncodeErrorUnicodeErrorUnicodeTranslateErrorUnicodeWarningUserWarningValueErrorWarningZeroDivisionError å¼‚å¸¸å¤„ç† ä¸ºäº†ä¿è¯ç¨‹åºçš„å¥å£®æ€§ä¸å®¹é”™æ€§,å³åœ¨é‡åˆ°é”™è¯¯æ—¶ç¨‹åºä¸ä¼šå´©æºƒ,æˆ‘ä»¬éœ€è¦å¯¹å¼‚å¸¸è¿›è¡Œå¤„ç†.å¦‚æœé”™è¯¯å‘ç”Ÿçš„æ¡ä»¶æ˜¯å¯é¢„çŸ¥çš„,éœ€è¦ç”¨ if è¿›è¡Œå¤„ç†:åœ¨é”™è¯¯å‘ç”Ÿä¹‹å‰è¿›è¡Œé¢„é˜²;å¦‚æœé”™è¯¯çš„å‘ç”Ÿæ¡ä»¶ä¸å¯é¢„çŸ¥,åˆ™éœ€è¦ç”¨ tryâ€¦except: åœ¨é”™è¯¯å‘ç”Ÿä¹‹åè¿›è¡Œå¤„ç†. 12345# åŸºæœ¬è¯­æ³•try: è¢«æ£€æµ‹çš„ä»£ç å—except å¼‚å¸¸ç±»å‹: try ä¸­ä¸€æ—¦æ£€æµ‹åˆ°å¼‚å¸¸,å°±æ‰§è¡Œè¿™ä¸ªä½ç½®çš„é€»è¾‘ å‡ ä¸ªæ —å­: 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667686970717273747576777879808182838485# å¼‚å¸¸ç±»åªèƒ½ç”¨æ¥å¤„ç†æŒ‡å®šçš„å¼‚å¸¸æƒ…å†µ,å¦‚æœéæŒ‡å®šå¼‚å¸¸åˆ™æ— æ³•å¤„ç†s1 = 'hello'try: int(s1)except IndexError as e: # æ•è·å¼‚å¸¸å¤±è´¥,æŠ¥é”™ print(e) # å¤šåˆ†æ”¯s1 = 'hello'try: int(s1)except IndexError as e: print(e)except KeyError as e: print(e)except ValueError as e: print(e)# ä¸‡èƒ½å¼‚å¸¸ Exceptions1 = 'hello'try: int(s1)except Exception as e: print(e) # å¤šåˆ†æ”¯å¼‚å¸¸ä¸ä¸‡èƒ½å¼‚å¸¸# å¦‚æœæƒ³è¦çš„æ•ˆæœæ˜¯:æ— è®ºå‡ºç°ä»€ä¹ˆå¼‚å¸¸,æˆ‘ä»¬ç»Ÿä¸€ä¸¢å¼ƒ,æˆ–è€…ä½¿ç”¨åŒä¸€æ®µä»£ç é€»è¾‘å»å¤„ç†å®ƒä»¬,é‚£ä¹ˆä¸€ä¸ª Exception å°±å¤Ÿäº†.# å¦‚æœæƒ³è¦å¯¹ä¸åŒçš„å¼‚å¸¸ä½¿ç”¨ä¸åŒçš„å¤„ç†é€»è¾‘,é‚£ä¹ˆå°±éœ€è¦ç”¨åˆ°å¤šåˆ†æ”¯å¼‚å¸¸.# ä¸ºäº†é˜²æ­¢å¯¹å¼‚å¸¸ç±»å‹åˆ¤æ–­é”™è¯¯,å¯ä»¥åœ¨å¤šåˆ†æ”¯åé¢è·Ÿä¸Š Exceptions1 = 'hello'try: int(s1)except IndexError as e: print(e)except KeyError as e: print(e)except ValueError as e: print(e)except Exception as e: print(e) # å¼‚å¸¸çš„å…¶ä»–ç»“æ„s1 = 'hello'try: int(s1)except IndexError as e: print(e)except KeyError as e: print(e)except ValueError as e: print(e)else: print('æ²¡æœ‰äº§ç”Ÿå¼‚å¸¸åˆ™æ‰§è¡Œ')finally: print('æ— è®ºå¼‚å¸¸ä¸å¦,éƒ½ä¼šæ‰§è¡Œè¯¥ä»£ç ') # ä¸»åŠ¨è§¦å‘å¼‚å¸¸try: raise TypeError('ç±»å‹é”™è¯¯')except Exception as e: print(e)# è‡ªå®šä¹‰å¼‚å¸¸class ExceptionMusibii(BaseException): def __init__(self, msg): self.msg = msg def __str__(self): return self.msg try: raise ExceptionMusibii('ç±»å‹é”™è¯¯')except ExceptionMusibii as e: print(e)# æ–­è¨€: assert æ¡ä»¶assert 1 == 1assert 2 == 2# æ€»ç»“:try...except# 1. æŠŠé”™è¯¯å¤„ç†å’ŒçœŸæ­£çš„å·¥ä½œåˆ†å¼€æ¥;# 2. ä»£ç æ›´æ˜“ç»„ç»‡,æ›´æ¸…æ™°,å¤æ‚çš„å·¥ä½œä»»åŠ¡æ›´å®¹æ˜“å®ç°;# 3. ä»£ç æ›´åŠ å¥å£®,ä¸æ˜“å´©æºƒ. ä»€ä¹ˆæ—¶å€™ç”¨å¼‚å¸¸å¤„ç† åªæœ‰åœ¨é”™è¯¯å‘ç”Ÿçš„æ¡ä»¶æ— æ³•é¢„çŸ¥çš„æƒ…å†µä¸‹æ‰åº”è¯¥åŠ ä¸Š tryâ€¦except]]></content>
      <categories>
        <category>Python</category>
      </categories>
  </entry>
  <entry>
    <title><![CDATA[çƒ­æ²³]]></title>
    <url>%2F2018%2F10%2F31%2F%E7%83%AD%E6%B2%B3%2F</url>
    <content type="text"><![CDATA[ã€Šçƒ­æ²³ã€‹ ä½œè¯ï¼šæå¿— ä½œæ›²ï¼šæå¿— çƒ­æ²³è·¯å°±åƒå…«åå¹´ä»£çš„é‡‘å›å¿ æ¢§æ¡ åƒåœ¾ ç°å°˜ å’Œå„å¼å„æ ·çš„æ‚è´§åº— äººä»¬æ€»æ˜¯æ—©æ—©çš„ç¦»å¼€ æ‹‰ä¸Šå·å¸˜é—¨ åœ¨å¤©é»‘å‰ç©¿ä¸Šæ¯›è¡£ ç‚¹ä¸€æ ¹çƒŸ çƒ­æ²³è·¯æœ‰ä¸€å®¶ å¼€äº†å¥½å¤šå¹´çš„ç†å‘åº— ä¸ç®¡å‰ªä»€ä¹ˆæ ·çš„å‘å‹ ä½ åªè¦ä»˜äº”å—é’± è€æ¿å’Œä»–çš„å¦¹å¦¹ååœ¨æ¤…å­ä¸Š å¯¹ç€é•œå­ä¸€è¨€ä¸å‘ ä»–ä»¬çš„è€å®¶ åœ¨èº«å åœ¨å²¸è¾¹ åœ¨å®‰å¾½å…¨æ¤’å¿ æ²¡æœ‰äººåœ¨çƒ­æ²³è·¯è°ˆæ‹çˆ± æ€»æœ‰äººåœ¨å¤©äº®æ—¶ä¼¤æ„Ÿ å¦‚æœå¹´è½»æ—¶ä½ æ²¡æ¥è¿‡çƒ­æ²³è·¯ é‚£ä½ ç°åœ¨çš„ç”Ÿæ´»æ˜¯ä¸æ˜¯å¾ˆå¹¸ç¦ çºªå¿µç¢‘æ— æœ‰ä¸€å®¶ç ´æ—§çš„ç”µå½±é™¢ å¾€åŒ—èµ°äº”ç™¾ç±³ å°±æ˜¯å—äº¬ç«è½¦è¥¿ç«™ æ¯å¤©éƒ½æœ‰å¤–åœ°äºº åœ¨ç›´çº¿å’Œæ›²çº¿ä¹‹é—´è¿·è·¯ æ°”å–˜å˜˜å˜˜çœ¼æ³ªæ¨¡ç³Š å¥”è·‘ è·Œå€’ å¥”è·‘ ç§‹æ—é¾™è™¾æ¢äº†æ–°çš„åœ°æ–¹ 32è·¯è¿˜æ˜¯ç©¿è¿‡æŒ¹æ±Ÿé—¨ é«˜æ¶æ¡¥æ‹†äº†ä¿®äº†æ–°çš„éš§é“ èµ°æ¥èµ°å»èµ°ä¸å‡ºæˆ‘çš„ç›ä»“æ¡¥ æ¥åˆ°åŸå¸‚å·²ç»å…«ç™¾ä¹åå…­å¤© çƒ­æ²³è·¯ä¸€ç›´æ˜¯ç›¸åŒçš„å®¹é¢œ å¶å°”æœ‰å¹²å‡€çš„æ½˜è¥¿è·¯è¿‡ å¥¹ä¸ä¼šè¯´ ä½ å¥½å†è§ æ²¡æœ‰äººåœ¨çƒ­æ²³è·¯è°ˆæ‹çˆ± æ€»æœ‰äººåœ¨å¤©é»‘æ—¶ä¼¤æ„Ÿ å¦‚æœå¹´è½»æ—¶ä½ æ¥è¿‡çƒ­æ²³è·¯ é‚£ä½ ç°åœ¨æ˜¯ä¸æ˜¯å·²ç»è¢«ä»–ä»¬æ·¹æ²¡ æ²¡æœ‰æ–°çš„è¡£æœèƒ½è®©ä½ çˆ±æ‹ æ€»æœ‰ä¸€ç§å¤©æ°”è®©æˆ‘æ€€å¿µ é†’æ¥æˆ–è€…åƒé¥±åˆæ˜¯ä¸€å¹´ ç›¸é‡ç„¶ååˆ†åˆ«å°±åœ¨ä¸€å¤© æ²¡æœ‰äººåœ¨çƒ­æ²³è·¯è°ˆæ‹çˆ± æ€»æœ‰äººåœ¨å¤©é»‘æ—¶ä¼¤æ„Ÿ å¦‚æœå¹´è½»æ—¶ä½ æ¥è¿‡çƒ­æ²³è·¯ é‚£ä½ ç°åœ¨æ˜¯ä¸æ˜¯å·²ç»è¢«ä»–ä»¬æ·¹æ²¡ æ²¡æœ‰æ–°çš„è¡£æœèƒ½è®©æˆ‘çˆ±æ‹ æ€»æœ‰ä¸€ç§å¤©æ°”è®©æˆ‘æ€€å¿µ é†’æ¥æˆ–è€…åƒé¥±åˆæ˜¯ä¸€å¹´ ç›¸é‡ç„¶ååˆ†åˆ«å°±åœ¨ä¸€å¤©]]></content>
      <categories>
        <category>Music</category>
      </categories>
      <tags>
        <tag>æå¿—</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[æ²§æµ·ä¸€å£°ç¬‘]]></title>
    <url>%2F2018%2F10%2F30%2F%E6%B2%A7%E6%B5%B7%E4%B8%80%E5%A3%B0%E7%AC%91%2F</url>
    <content type="text"><![CDATA[ã€Šæ²§æµ·ä¸€å£°ç¬‘ã€‹ ä½œè¯ï¼šé»„éœ‘ ä½œæ›²ï¼šé»„éœ‘ æ²§æµ·ç¬‘æ»”æ»”ä¸¤å²¸æ½® æµ®æ²‰éšæµªè®°ä»Šæœ è‹å¤©ç¬‘çº·çº·ä¸–ä¸Šæ½® è°è´Ÿè°èƒœå‡ºå¤©çŸ¥æ™“ æ±Ÿå±±ç¬‘çƒŸé›¨é¥ æ¶›æµªæ·˜å°½çº¢å°˜ä¿—äº‹çŸ¥å¤šå°‘ æ¸…é£ç¬‘ç«Ÿæƒ¹å¯‚å¯¥ è±ªæƒ…è¿˜å‰©äº†ä¸€è¥Ÿæ™šç…§ è‹ç”Ÿç¬‘ä¸å†å¯‚å¯¥ è±ªæƒ…ä»åœ¨ç—´ç—´ç¬‘ç¬‘ å•¦â€¦å•¦â€¦å•¦â€¦ â€‹ è®°é‡‘åº¸å¤§ä¾ ï¼ˆæŸ¥è‰¯é•›ï¼‰ â€‹ ä¸å¤æ¢¦åŒä¸€å¤©å½’è¥¿ â€‹ 2018å¹´10æœˆ30æ—¥]]></content>
      <categories>
        <category>Music</category>
      </categories>
      <tags>
        <tag>None</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[python æ¨¡å—ä¸åŒ…çš„å¯¼å…¥é—®é¢˜]]></title>
    <url>%2F2018%2F10%2F27%2Fpython-%E6%A8%A1%E5%9D%97%E4%B8%8E%E5%8C%85%E7%9A%84%E5%AF%BC%E5%85%A5%E9%97%AE%E9%A2%98%2F</url>
    <content type="text"></content>
  </entry>
  <entry>
    <title><![CDATA[ç±»çš„å†…ç½®æ–¹æ³•]]></title>
    <url>%2F2018%2F10%2F25%2F%E7%B1%BB%E7%9A%84%E5%86%85%E7%BD%AE%E6%96%B9%E6%B3%95%2F</url>
    <content type="text"><![CDATA[ç±»çš„å†…ç½®æ–¹æ³•éƒ½æ˜¯ç»§æ‰¿objectåŸºç±»çš„,å†…ç½®æ–¹æ³•é€šå¸¸ä¸ºåŒä¸‹åˆ’çº¿çš„æ–¹æ³•,æ¯”å¦‚__init__æ–¹æ³•,è€Œç±»çš„å†…ç½®æ–¹æ³•ä¹Ÿå«åšé­”æœ¯æ–¹æ³•,å› ä¸ºå¤ªå¼ºå¤§äº†. åœ¨ä»‹ç»é­”æœ¯æ–¹æ³•ä¹‹å‰å…ˆçœ‹ä¸€äº›åˆ¤æ–­å¯¹è±¡å’Œç±»çš„ç»§æ‰¿å…³ç³»çš„æ–¹æ³•: isinstance(obj, A_tuple):åˆ¤æ–­æŸä¸ªå¯¹è±¡æ˜¯å¦å±äºæŸä¸€ä¸ªé›†åˆç±»çš„å¯¹è±¡ issubclass(x, A_tuple): åˆ¤æ–­æŸä¸ªç±»æ˜¯å¦æ˜¯æŸä¸€ä¸ªé›†åˆç±»çš„å­ç±» 1 __str__æ–¹æ³•ä¼šåœ¨å¯¹è±¡è¢«æ‰“å°çš„æ—¶å€™è‡ªåŠ¨è§¦å‘,ç„¶åå°†è¿”å›å€¼å½“åšæ‰“å°çš„ç»“æœ ä½¿ç”¨ä¾‹å­: 123456789101112class People: de __init__(self, name, age): self.name = name self.age = age def __str__(self): return '&lt;%s : %s&gt;' % (self.name, self.age) peo = People('musibii', 18)print(peo) # print(peo.__str__())# è¿è¡Œç»“æœ&lt;musibii : 18&gt; 2 __del__æ–¹æ³•ä¼šåœ¨å¯¹è±¡è¢«åˆ é™¤æ—¶è‡ªåŠ¨è§¦å‘æ‰§è¡Œ,ç”¨æ¥åœ¨å¯¹è±¡è¢«åˆ é™¤å‰å›æ”¶èµ„æº ä½¿ç”¨ä¾‹å­: 123456789101112class Bar: def __init__(self, x, y, filepath): self.x = x self.y = y self.f = open(filepath, 'r', encoding='utf-8') def __del__(self): # å†™å›æ”¶ç³»ç»Ÿèµ„æºç›¸å…³çš„ä»£ç  self.f.close() obj = Bar(10, 20)del obj æœªå®Œå¾…ç»­]]></content>
      <categories>
        <category>Python</category>
      </categories>
      <tags>
        <tag>é¢å‘å¯¹è±¡</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[é€šè¿‡å­—ç¬¦ä¸²æ¥æ“ä½œç±»æˆ–å¯¹è±¡çš„å±æ€§]]></title>
    <url>%2F2018%2F10%2F25%2F%E9%80%9A%E8%BF%87%E5%AD%97%E7%AC%A6%E4%B8%B2%E6%9D%A5%E6%93%8D%E4%BD%9C%E7%B1%BB%E6%88%96%E5%AF%B9%E8%B1%A1%E7%9A%84%E5%B1%9E%E6%80%A7%2F</url>
    <content type="text"><![CDATA[é€šè¿‡å­—ç¬¦ä¸²æ¥æŸ¥çœ‹è·å–ä¿®æ”¹åˆ é™¤ç±»æˆ–å¯¹è±¡çš„å±æ€§çš„ä½¿ç”¨åœºæ™¯ä¸ºè·å–ç”¨æˆ·çš„è¾“å…¥,å› ä¸ºå¾—åˆ°çš„å€¼éƒ½æ˜¯å­—ç¬¦ä¸²ç±»å‹,é‚£ä¹ˆå°±å¯ä»¥ç›´æ¥é€šè¿‡å­—ç¬¦ä¸²æ¥æ“ä½œå±æ€§è€Œä¸ç”¨æŠŠå­—ç¬¦ä¸²ä¿®æ”¹ä¸ºå¯ä»¥é€šè¿‡å¥ç‚¹æ³•è®¿é—®çš„å½¢å¼äº†. é‚£ä¹ˆæœ‰å››ä¸ªæ–¹æ³•å¯ä»¥é€šè¿‡å­—ç¬¦ä¸²æ¥æ“ä½œå±æ€§: hasattr:æ˜¯å¦å…·æœ‰è¯¥å±æ€§,è¿”å›å¸ƒå°”å€¼ getattr:è·å–å±æ€§å€¼,æ²¡æœ‰è¯¥å±æ€§çš„è¯ä¼šæŠ¥é”™,è®¾ç½®ä¸€ä¸ªé»˜è®¤å€¼ None setattr:ä¿®æ”¹å±æ€§å€¼, æœ‰å°±ä¿®æ”¹,æ²¡æœ‰å°±æ·»åŠ  delattr:åˆ é™¤å±æ€§,æœ‰å°±åˆ é™¤,æ²¡æœ‰ä¼šæŠ¥é”™,åº”è¯¥åŠ ä¸ªåˆ¤æ–­ ä¸€ hasattræ–¹æ³•æŸ¥çœ‹æºç å¯çŸ¥: 1234567def hasattr(*args, **kwargs): # real signature unknown """ Return whether the object has an attribute with the given name. This is done by calling getattr(obj, name) and catching AttributeError. """ pass ç¿»è¯‘è¿‡æ¥å°±æ˜¯:è¿”å›å¯¹è±¡æ˜¯å¦å…·æœ‰ç»™å®šåç§°çš„å±æ€§ã€‚è¿™æ˜¯é€šè¿‡è°ƒç”¨getattrå‡½æ•°å’Œæ•è·AttributeErroré”™è¯¯æ¥å®Œæˆçš„. ä½¿ç”¨ä¾‹å­ 1234567class Foo: def __init__(self, name, age): self.name = name self.age = age def tell_info(self): print('%s : %s' % (self.name, self.age)) 123456789# hasattrobj = Foo('musibii', 18)print(hasattr(obj, 'name'))print(hasattr(obj, 'age'))print(hasattr(obj, 'gender'))# è¿è¡Œç»“æœTrueTrueFalse äºŒ getattræ–¹æ³•æŸ¥çœ‹æºç å¯çŸ¥: 123456789def getattr(object, name, default=None): # known special case of getattr """ getattr(object, name[, default]) -&gt; value Get a named attribute from an object; getattr(x, 'y') is equivalent to x.y. When a default argument is given, it is returned when the attribute doesn't exist; without it, an exception is raised in that case. """ pass å®é™…è¯¥æ–¹æ³•æ˜¯è°ƒç”¨çš„ä¼ å…¥å¯¹è±¡çš„é­”æœ¯æ–¹æ³•__getattribute__,æŸ¥çœ‹objectçš„æºç ,ä»é­”æœ¯æ–¹æ³•__getattribute__çš„æ³¨é‡Šå‘ç°â€™â€™â€™return getattr(self, name)â€™â€™â€™,å½“å¯¹å¯¹è±¡è°ƒç”¨getattræ–¹æ³•æ˜¯,å°±ä¼šè§¦å‘__getattribute__æ–¹æ³•.åªæœ‰å¯¹è±¡å…·æœ‰__getattribute__é­”æœ¯æ–¹æ³•,æ‰å¯ä»¥ä½¿ç”¨getattræ–¹æ³•,ä¸€èˆ¬æ¥è¯´é™¤éå®šä¹‰ç±»çš„æ—¶å€™æ”¹å†™äº†è¯¥æ–¹æ³•,æœ‰ä¸åŒçš„ç»“æœ. ä½¿ç”¨ä¾‹å­ 12345678# getattrprint(getattr(obj, 'name'))print(getattr(obj, 'age'))print(getattr(obj, 'gender', None)) # å¦‚æœæ²¡æœ‰è¦è·å–çš„å±æ€§çš„è¯,åº”è¯¥å®šä¹‰é»˜è®¤å€¼,å¦åˆ™ä¼šæŠ¥é”™# è¿è¡Œç»“æœmusibii18None ä¸‰ setattræ–¹æ³•æŸ¥çœ‹æºç å¯çŸ¥: 1234567def setattr(x, y, v): # real signature unknown; restored from __doc__ """ Sets the named attribute on the given object to the specified value. setattr(x, 'y', v) is equivalent to ``x.y = v'' """ pass è®¾ç½®æ‰€ç»™å¯¹è±¡çš„å±æ€§ä¸€ä¸ªç»™å®šçš„å€¼. å’Œgetatträ¸€æ ·,è¯¥æ–¹æ³•ä¼ å…¥çš„å¯¹è±¡éœ€è¦æœ‰__setattr__é­”æœ¯æ–¹æ³•æ‰å¯ä»¥è°ƒç”¨getattræ–¹æ³•. ä½¿ç”¨ä¾‹å­: 1234567891011# setattrprint(obj.__dict__)setattr(obj, 'name', 'maffia')print(obj.__dict__)setattr(obj, 'gender', 'male')print(obj,__dict__)# è¿è¡Œç»“æœ&#123;'name': 'musibii', 'age': 18&#125;&#123;'name': 'maffia', 'age': 18&#125;&#123;'name': 'maffia', 'age': 18, 'gender': 'male'&#125;# å¦‚æœè®¾ç½®çš„å±æ€§å¯¹è±¡é‡Œé¢æ²¡æœ‰çš„è¯ä¼šæ–°å¢å±æ€§ å›› delattræ–¹æ³•æŸ¥çœ‹æºç å¯çŸ¥: 1234567def delattr(x, y): # real signature unknown; restored from __doc__ """ Deletes the named attribute from the given object. delattr(x, 'y') is equivalent to ``del x.y'' """ pass ä»æ‰€ç»™å¯¹è±¡åˆ é™¤å±æ€§. å’Œgetatträ¸€æ ·,è¯¥æ–¹æ³•ä¼ å…¥çš„å¯¹è±¡éœ€è¦æœ‰__delattr__é­”æœ¯æ–¹æ³•æ‰å¯ä»¥è°ƒç”¨delattræ–¹æ³•. ä½¿ç”¨ä¾‹å­: 12345# delattr# åˆ é™¤å±æ€§çš„æ—¶å€™,å¦‚æœæ²¡æœ‰æ‰€ç»™çš„å±æ€§å,é‚£ä¹ˆä¼šæŠ¥é”™,æ‰€ä»¥åœ¨ä½¿ç”¨delattrçš„æ—¶å€™åŠ ä¸Šifåˆ¤æ–­delattr(obj, 'gender')if hasattr(obj, 'xxx'): delattr(obj, 'xxx')]]></content>
      <categories>
        <category>Python</category>
      </categories>
      <tags>
        <tag>é¢å‘å¯¹è±¡</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ç±»æ–¹æ³•ä¹‹ç»‘å®šæ–¹æ³•å’Œéç»‘å®šæ–¹æ³•]]></title>
    <url>%2F2018%2F10%2F25%2F%E7%B1%BB%E6%96%B9%E6%B3%95%E4%B9%8B%E7%BB%91%E5%AE%9A%E6%96%B9%E6%B3%95%E5%92%8C%E9%9D%9E%E7%BB%91%E5%AE%9A%E6%96%B9%E6%B3%95%2F</url>
    <content type="text"><![CDATA[åœ¨ç±»ä¸­å®šä¹‰çš„å‡½æ•°æ€»å…±å¯ä»¥åˆ†ä¸ºä¸¤å¤§ç±»: ç»‘å®šæ–¹æ³• ç»‘å®šæ–¹æ³• ç‰¹æ®Šä¹‹å¤„:ç»‘å®šç»™è°å°±åº”è¯¥ç”±è°æ¥è°ƒç”¨,è°æ¥è°ƒç”¨å°±ä¼šå°†è°å½“åšç¬¬ä¸€ä¸ªå‚æ•°è‡ªåŠ¨ä¼ å…¥ ç»‘å®šç»™å¯¹è±¡çš„æ–¹æ³•:åœ¨ç±»ä¸­å®šä¹‰å‡½æ•°æ²¡æœ‰è¢«ä»»ä½•è£…é¥°å™¨è£…é¥°çš„æƒ…å†µä¸‹,é»˜è®¤å°±æ˜¯ç»‘å®šå¯¹è±¡çš„. ç»‘å®šç»™ç±»çš„æ–¹æ³•:ä¸ºç±»ä¸­å®šä¹‰å‡½æ•°æ·»åŠ ä¸€ä¸ªclassmethodè£…é¥°å™¨,å°±æ˜¯ç»‘å®šç»™ç±»çš„. éç»‘å®šæ–¹æ³• ç‰¹æ®Šä¹‹å¤„:éç»‘å®šæ–¹æ³•å°±æ˜¯ä¸€ä¸ªæ™®é€šå‡½æ•°,æ—¢ä¸ä¸ç±»ç»‘å®šåˆä¸ä¸å¯¹è±¡ç»‘å®š,æ„å‘³ç€ç±»å’Œå¯¹è±¡éƒ½å¯ä»¥è°ƒç”¨,ä½†æ˜¯æ— è®ºè°æ¥è°ƒç”¨éƒ½æ˜¯ä¸€ä¸ªæ™®é€šå‡½æ•°,æ²¡æœ‰è‡ªåŠ¨ä¼ å€¼çš„æ•ˆæœ. éç»‘å®šæ–¹æ³•:ä¸ºç±»ä¸­å®šä¹‰å‡½æ•°æ·»åŠ ä¸€ä¸ªstaticmethodè£…é¥°å™¨,å°±æ˜¯éç»‘å®šæ–¹æ³•. ç±»ä¸­çš„ç»‘å®šæ–¹æ³•é€šå¸¸æ¥è¯´æ˜¯é»˜è®¤ç»™å¯¹è±¡æ˜¯ç”¨çš„,åŠ äº†classmethodè£…é¥°å™¨æ‰æ˜¯ç»™ç±»ä½¿ç”¨çš„,é‚£ä¹ˆè¿™ä¸‰ç§æ–¹æ³•çš„ä½¿ç”¨åœºæ™¯æ˜¯ä»€ä¹ˆå‘¢? é»˜è®¤ç»‘å®šç»™å¯¹è±¡çš„æ²¡ä»€ä¹ˆå¥½è¯´çš„, ç»‘å®šç»™ç±»çš„æ–¹æ³•:ä¸€èˆ¬ç”¨æ¥è‡ªåŠ¨å®ä¾‹åŒ–å¯¹è±¡(ä¼ å…¥æŸäº›ç‰¹æ®Šçš„é…ç½®æ–‡ä»¶å¯¹è±¡), éç»‘å®šæ–¹æ³•:éç»‘å®šæ–¹æ³•ä¸ç”¨ä¼ å…¥å¯¹è±¡,ä¹Ÿä¸ç”¨ä¼ å…¥ç±»,ç”¨åœ¨å•çº¯çš„è¿”å›æˆ–å¾—åˆ°æŸäº›å€¼. 123456789101112131415161718192021222324252627282930313233343536373839404142class Foo: def func1(self): print('func1', self) @classmethod def func2(cls): print('func2', cls) @staticmethod def func3(x, y): print('func3', x, y) obj = Foo()# ç»‘å®šç»™å¯¹è±¡çš„æ–¹æ³•# ç»‘å®šç»™å¯¹è±¡çš„,åº”è¯¥ç”±å¯¹è±¡æ¥è°ƒç”¨obj.func1()print(obj)# è¿è¡Œç»“æœfunc1 &lt;__main__.Foo object at 0x107e8c6d8&gt;&lt;__main__.Foo object at 0x107e8c6d8&gt;# ç»‘å®šç»™ç±»çš„æ–¹æ³•# ç»‘å®šç»™ç±»çš„æ–¹æ³•åº”è¯¥ç”±ç±»æ¥è°ƒç”¨print(Foo.func2)print(obj.func2) # ç”±å¯¹è±¡æ¥è°ƒç”¨çš„ç»“æœä¸€æ ·# è¿è¡Œç»“æœ&lt;bound method Foo.func2 of &lt;class '__main__.Foo'&gt;&gt;&lt;bound method Foo.func2 of &lt;class '__main__.Foo'&gt;&gt;# éç»‘å®šæ–¹æ³•print(obj.func3)print(Foo.func3)obj.func3(1, 2)obj.func3(1, 2)# è¿è¡Œç»“æœ&lt;function Foo.func3 at 0x1063e3bf8&gt;&lt;function Foo.func3 at 0x1063e3bf8&gt;func3 1 2func3 1 2 å®é™…ä½¿ç”¨çš„ä¾‹å­:ä¸»è¦æ˜¯ç»‘å®šç»™ç±»çš„ä½¿ç”¨åœºæ™¯; 123# settings.pyIP='1.1.2.2'PORT=3306 1234567891011121314151617181920212223242526272829303132333435# main.pyimport settingsclass MySQL: def __init__(self, ip, port): self.id = self.creat_id() self.ip = ip self.port = port def tell_info(self): print('&lt;%s : %s : %s' % (self.id, self.ip, self.port)) @staticmethod def creat_id(self): import uuid return uuid.uuid4() @classmethod def from_conf(cls): return cls(settings.IP, settings.PORT) obj = MySQL('1.1.1.1', 3306)obj.tell_info()# è¿è¡Œç»“æœ&lt;86044651-cea8-4d93-99dc-46a02e169d6d : 1.1.1.1 : 3306&gt;a = obj.from_conf() # äº§ç”Ÿä¸€ä¸ªæ–°çš„å¯¹è±¡a.tell_info()# è¿è¡Œç»“æœ&lt;efec5e5f-4bfc-4534-8e60-940824532506 : 1.1.1.2 : 3306&gt;obj1 = MySQL.from_conf()obj1.tell_info()# è¿è¡Œç»“æœ&lt;9463911a-ebcf-416a-9332-54282f3f3cba : 1.1.1.2 : 3306&gt;]]></content>
      <categories>
        <category>Python</category>
      </categories>
      <tags>
        <tag>é¢å‘å¯¹è±¡</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[è£…é¥°å™¨çš„è¿›ä¸€æ­¥å­¦ä¹ ]]></title>
    <url>%2F2018%2F10%2F24%2F%E8%A3%85%E9%A5%B0%E5%99%A8%E7%9A%84%E8%BF%9B%E4%B8%80%E6%AD%A5%E5%AD%A6%E4%B9%A0%2F</url>
    <content type="text"><![CDATA[ä»Šå¤©åœ¨è°ƒç”¨è¢«è£…é¥°å™¨è£…é¥°çš„å‡½æ•°çš„æ—¶å€™å®é™…è°ƒç”¨å‡½æ•°è¿”å›çš„å€¼å’Œè‡ªå·±é¢„æƒ³çš„ä¸ä¸€æ ·,ç»è¿‡æœ‹å‹çš„æŒ‡ç‚¹å‘ç°é—®é¢˜åœ¨è¿”å›è¢«è£…é¥°å™¨è£…é¥°çš„å‡½æ•°çš„è¿è¡Œç»“æœä¸Š. 12345678910111213141516def auth_login(func): def wrapper(*args, **kwargs): func(*args, **kwargs) return wrapper@auth_logindef paymoney(total): if total &gt; 0: return True else: return False if paymoney(10): print('æ•°é¢å……è¶³')else: print('æ•°é¢ä¸è¶³') è¿™ä¸ªç®€å•çš„è£…é¥°å™¨åº”è¯¥å¾ˆå®¹æ˜“åˆ†æå‡ºç»“æœ,é¢„æƒ³ä¸­çš„ç»“æœåº”è¯¥æ˜¯æ‰“å°:æ•°é¢å……è¶³,ç„¶è€Œç»“æœå´æ˜¯ä»€ä¹ˆéƒ½æ²¡æ‰“å°,å…¶å®æ˜¯å› ä¸ºè£…é¥°å™¨æœ‰é—®é¢˜,å› ä¸ºå¹¶æ²¡æœ‰æŠŠè¢«è£…é¥°çš„å‡½æ•°è¿è¡Œç»“æœè¿”å›,é‚£ä¹ˆè£…é¥°å™¨çš„è¿è¡Œç»“æœå°±ä¸ºNone,è‡ªç„¶ä»€ä¹ˆéƒ½ä¸ä¼šæ‰“å°. æ­£ç¡®çš„è£…é¥°å™¨å¦‚ä¸‹: 12345def auth_login(func): def wrapper(*args, **kwargs): res = func(*args, **kwargs) return res return wrapper]]></content>
      <categories>
        <category>Python</category>
      </categories>
      <tags>
        <tag>å‘ç°</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ç±»çš„ä¸‰å¤§ç‰¹æ€§ä¹‹å¤šæ€]]></title>
    <url>%2F2018%2F10%2F24%2F%E7%B1%BB%E7%9A%84%E4%B8%89%E5%A4%A7%E7%89%B9%E6%80%A7%E4%B9%8B%E5%A4%9A%E6%80%81%2F</url>
    <content type="text"><![CDATA[å¤šæ€ä¸‰é—® ä»€ä¹ˆæ˜¯å¤šæ€? å¤šæ€æŒ‡çš„æ˜¯åŒä¸€ç§äº‹ç‰©çš„å¤šç§å½¢æ€,ä¸¾ä¸ªä¾‹å­:æ¯ä¸ªäººéƒ½ä¼šç¡è§‰,ä½†æ˜¯æ¯ä¸ªäººçš„ç¡è§‰å§¿åŠ¿,ç¡çœ è´¨é‡éƒ½ä¸ä¸€æ ·,å†è¯´,æ¯ä¸ªäººçš„ç¥–å®—éƒ½æ˜¯çŒ¿ç±»,ä½†æ˜¯ç°åœ¨å‡ ä¹æ²¡æœ‰ä¸€æ¨¡ä¸€æ ·çš„ä¸¤ä¸ªäºº,æœ‰å¥è¯è¯´ä¸–ç•Œä¸Šæ²¡æœ‰ä¸¤ç‰‡ç›¸åŒçš„å¶å­,è¿™å°±æ˜¯å¤šæ€,è¿™ä¹Ÿæ˜¯ä¸ºä»€ä¹ˆè¿™ä¸ªä¸–ç•Œå¤šå§¿å¤šå½©,å› ä¸ºæˆ‘ä»¬ä¸€æ ·,æˆ‘ä»¬ä¹Ÿä¸ä¸€æ ·. ä¸ºä½•è¦ç”¨å¤šæ€? æˆ‘è§‰å¾—ä¸æ˜¯ç”¨ä¸ç”¨å¤šæ€çš„é—®é¢˜,pythonçš„å“²å­¦æ˜¯ä¸€åˆ‡çš†å¯¹è±¡,é‚£ä¹ˆå¯¹è±¡å…¶å®å¯ä»¥æƒ³è±¡æˆç°å®ç”Ÿæ´»ä¸­çš„ä¸ªä½“,è¿™å°±è‡ªç„¶è€Œç„¶æœ‰äº†å¤šæ€çš„æ¦‚å¿µäº†,å¤šä¸ªå¯¹è±¡çš„æŸä¸€ä¸ªç›¸åŒçš„æ–¹æ³•,å´æœ‰ä¸ä¸€æ ·çš„è¡¨ç°å½¢å¼.é‚£ä¹ˆåœ¨Pythonä¸­æ€ä¹ˆå®šä¹‰å¤šæ€å‘¢? 123456789101112131415import abcclass Animal(metaclass=abc.ABCMeta): @abc.abstractmethod def speak(self): pass # Animal() çˆ¶ç±»ä¸èƒ½å®ä¾‹åŒ–,å› ä¸ºçˆ¶ç±»æœ¬èº«å°±æ˜¯ç”¨æ¥åˆ¶å®šæ ‡å‡†çš„# speakæ–¹æ³•è¢«ä¸€ä¸ªè£…é¥°è£…é¥°äº†,æ„å‘³ç€åªè¦æ˜¯ç»§æ‰¿Animalç±»çš„å­ç±»éƒ½å¿…é¡»å®ç°speakæ–¹æ³•,å¼ºåˆ¶å®è¡Œçš„class People(Animal): def speak(self): pass #åªæœ‰è¿™æ ·,æ‰å¯ä»¥ç»§æ‰¿Animalç±» pythonæ˜¯ä¸€é—¨è‡ªç”±åº¦å¾ˆé«˜çš„è¯­è¨€,å‡ ä¹æ²¡æœ‰ä»€ä¹ˆå¼ºåˆ¶è¦åšçš„äº‹æƒ…,è¿™æœ‰å¥½å¤„ä¹Ÿæœ‰åå¤„.å¥½å¤„æ˜¯ä¸€é—¨è¯­è¨€è¶Šè‡ªç”±é‚£ä¹ˆå¼€å‘è€…çš„åˆ›æ–°æ€§å°±è¶Šå¼º,æ‰€ä»¥æ‰æœ‰äº†è¶Šæ¥è¶Šå¤šçš„ç¬¬ä¸‰æ–¹åº“,ä½¿å¾—pythonçš„ç”Ÿæ€ç¯å¢ƒæ„ˆå‘å®Œå–„,åƒè‘—åçš„requestsåº“,å”¯ä¸€çš„ä¸€ä¸ªéè½¬åŸºå› çš„python HTTPåº“,äººç±»å¯ä»¥å®‰å…¨äº«ç”¨.(æ‰¯è¿œäº†â€¦),è¶Šæ¥è¶Šå¤šçš„å¼€å‘è€…ä½¿ç”¨python,å¼€å‘æ–°çš„ç‰¹æ€§å’Œæ–°çš„åº“,é‚£ä¹ˆåå¤„å°±æ˜¯pythonå¾ˆè‡ªç”±,æ‰€ä»¥æ²¡æœ‰ä»€ä¹ˆæ ‡å‡†,ä½ å¯ä»¥æœ‰ä½ çš„æ ‡å‡†,æˆ‘å¯ä»¥æœ‰æˆ‘çš„æ ‡å‡†,æŒ‰ç†è¯´pythonæ˜¯ä¸ç¦æ­¢çš„,é‚£ä¹ˆæ€ä¹ˆè§£å†³è¿™ä¸ªé—®é¢˜å‘¢? pythonçš„å¼€å‘è€…éƒ½çº¦å®šæˆä¿—çš„æ‰§è¡Œä¸€äº›äº‹æƒ…,æ¯”å¦‚å¸¸é‡å…¨å¤§å†™,å‡½æ•°åå°å†™æˆ–è€…åŠ ä¸‹åˆ’çº¿,ç±»å‘¢,å°±ä½¿ç”¨é©¼å³°æ³•å‘½å,é‚£ä¹ˆæˆ‘ä»¬ä¸€çœ‹åˆ°å˜é‡åå°±å¯ä»¥çŸ¥é“è¿™æ˜¯ä¸ªä»€ä¹ˆç±»å‹çš„å˜é‡äº†,åŒç†,åœ¨pythonçš„ç±»ä¸­,ä¹Ÿçº¦å®šæˆä¿—äº†ç”¨åŒæ ·çš„åå­—æ”¹å†™è‡ªå·±çš„æ–¹æ³•,æŸ¥çœ‹åŸºç±»objectçš„æºç å¯çŸ¥: 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110class object: """ The most base type """ def __delattr__(self, *args, **kwargs): # real signature unknown """ Implement delattr(self, name). """ pass def __dir__(self): # real signature unknown; restored from __doc__ """ __dir__() -&gt; list default dir() implementation """ return [] def __eq__(self, *args, **kwargs): # real signature unknown """ Return self==value. """ pass def __format__(self, *args, **kwargs): # real signature unknown """ default object formatter """ pass def __getattribute__(self, *args, **kwargs): # real signature unknown """ Return getattr(self, name). """ pass def __ge__(self, *args, **kwargs): # real signature unknown """ Return self&gt;=value. """ pass def __gt__(self, *args, **kwargs): # real signature unknown """ Return self&gt;value. """ pass def __hash__(self, *args, **kwargs): # real signature unknown """ Return hash(self). """ pass def __init_subclass__(self, *args, **kwargs): # real signature unknown """ This method is called when a class is subclassed. The default implementation does nothing. It may be overridden to extend subclasses. """ pass def __init__(self): # known special case of object.__init__ """ Initialize self. See help(type(self)) for accurate signature. """ pass def __le__(self, *args, **kwargs): # real signature unknown """ Return self&lt;=value. """ pass def __lt__(self, *args, **kwargs): # real signature unknown """ Return self&lt;value. """ pass @staticmethod # known case of __new__ def __new__(cls, *more): # known special case of object.__new__ """ Create and return a new object. See help(type) for accurate signature. """ pass def __ne__(self, *args, **kwargs): # real signature unknown """ Return self!=value. """ pass def __reduce_ex__(self, *args, **kwargs): # real signature unknown """ helper for pickle """ pass def __reduce__(self, *args, **kwargs): # real signature unknown """ helper for pickle """ pass def __repr__(self, *args, **kwargs): # real signature unknown """ Return repr(self). """ pass def __setattr__(self, *args, **kwargs): # real signature unknown """ Implement setattr(self, name, value). """ pass def __sizeof__(self): # real signature unknown; restored from __doc__ """ __sizeof__() -&gt; int size of object in memory, in bytes """ return 0 def __str__(self, *args, **kwargs): # real signature unknown """ Return str(self). """ pass @classmethod # known case def __subclasshook__(cls, subclass): # known special case of object.__subclasshook__ """ Abstract classes can override this to customize issubclass(). This is invoked early on by abc.ABCMeta.__subclasscheck__(). It should return True, False or NotImplemented. If it returns NotImplemented, the normal algorithm is used. Otherwise, it overrides the normal algorithm (and the outcome is cached). """ pass __class__ = None # (!) forward: type, real value is '' __dict__ = &#123;&#125; __doc__ = '' __module__ = '' è¿™é‡Œé¢çš„åŒä¸‹åˆ’çº¿çš„æ–¹æ³•,æ˜¯åŸºç±»å·²ç»å®šä¹‰å¥½äº†çš„æ–¹æ³•,é‚£ä¹ˆç»§æ‰¿åŸºç±»çš„ç±»,å¦‚æœæ²¡æœ‰å°±ç”¨æˆ‘çš„,å¦‚æœæœ‰çš„è¯,ä½ ä¹Ÿç”¨ç›¸åŒçš„åå­—,è¿™æ ·çš„è¯ä¸ç®¡ä»€ä¹ˆå¯¹è±¡,éƒ½æœ‰åŒæ ·çš„æ–¹æ³•æ‰§è¡Œç±»ä¼¼çš„äº‹æƒ…,è¿™å°±æ˜¯å¤šæ€,è¿™ä¹Ÿæ˜¯pythonè¯­è¨€çš„é­…åŠ›. å…·ä½“ç‚¹æ¥è¯´,åƒlinuxçš„å“²å­¦æ˜¯ä¸€åˆ‡çš†æ–‡ä»¶,é‚£ä¹ˆé€šå¸¸æ¥è¯´æ–‡ä»¶åªæœ‰ä¸¤ä¸ªå±æ€§,è¯»å’Œå†™,é‚£ä¹ˆlinuxå·²ç»æŠŠå„ç§å¤æ‚çš„æ–¹æ³•å°è£…ä¸ºäº†è¯»å’Œå†™ä¸¤ä¸ªæ–¹æ³•,é‚£ä¹ˆå°±ç®—æˆ‘ä»¬ä¸äº†è§£linuxé‡Œé¢çš„æŸäº›ç¡¬ä»¶,æˆ‘ä»¬ä¹Ÿå¯ä»¥ä½¿ç”¨åŒæ ·çš„æ–¹æ³•æ¥æ“ä½œç¡¬ä»¶.]]></content>
      <categories>
        <category>Python</category>
      </categories>
      <tags>
        <tag>é¢å‘å¯¹è±¡</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ç±»çš„ä¸‰å¤§ç‰¹æ€§ä¹‹å°è£…]]></title>
    <url>%2F2018%2F10%2F24%2F%E7%B1%BB%E7%9A%84%E4%B8%89%E5%A4%A7%E7%89%B9%E6%80%A7%E4%B9%8B%E5%B0%81%E8%A3%85%2F</url>
    <content type="text"><![CDATA[å°è£…ä¸‰é—® ä»€ä¹ˆæ˜¯å°è£…? è£…æŒ‡çš„æ˜¯æŠŠå±æ€§è£…è¿›ä¸€ä¸ªå®¹å™¨ å°æŒ‡çš„æ˜¯éšè—çš„æ„æ€,ä½†æ˜¯è¿™ç§éšè—æ˜¯å¯¹å¤–ä¸å¯¹å†…çš„ ä¸ºä»€ä¹ˆè¦å°è£…? å°è£…ä¸æ˜¯å•çº¯æ„ä¹‰çš„éšè—; â€‹ å°è£…æ•°æ®çš„ç›®çš„:å°†æ•°æ®å±æ€§å°è£…èµ·æ¥,ç±»å¤–éƒ¨çš„ä½¿ç”¨å°±æ— æ³•ç›´æ¥æ“ä½œè¯¥æ•°æ®å±æ€§ â€‹ æƒ³è¦åœ¨å†…éƒ¨æ“ä½œå±æ€§çš„è¯éœ€è¦åœ¨ç±»å†…éƒ¨æä¾›ä¸€ä¸ªæ¥å£ç»™ä½¿ç”¨è€…,ç±»çš„è®¾è®¡è€…å¯ä»¥åœ¨æ¥å£ä¹‹ä¸Šé™„åŠ ä»»æ„é€»è¾‘,ä»è€Œä¸¥æ ¼æ§åˆ¶ä½¿ç”¨è€…å¯¹å±æ€§çš„æ“ä½œ â€‹ å°è£…å‡½æ•°å±æ€§çš„ç›®çš„:éš”ç¦»å¤æ‚åº¦ å¦‚ä½•å°è£…? åªéœ€è¦åœ¨å±æ€§å‰åŠ ä¸Š__å¼€å¤´,è¯¥å±æ€§å°±ä¼šè¢«éšè—èµ·æ¥,è¯¥éšè—å…·å¤‡çš„ç‰¹ç‚¹: 1. åªæ˜¯ä¸€ç§è¯­æ³•æ„ä¹‰ä¸Šçš„å˜å½¢,å³__å¼€å¤´çš„å±æ€§ä¼šåœ¨æ£€æµ‹è¯­æ³•æ—¶å‘ç”Ÿå˜å½¢,å˜ä¸º\_ç±»å\_\_å±æ€§å; 2. è¿™ç§éšè—æ˜¯å¯¹å¤–ä¸å¯¹å†…çš„,å› ä¸ºåœ¨ç±»å†…éƒ¨æ£€æµ‹è¯­æ³•æ—¶æ‰€æœ‰çš„ä»£ç ç»Ÿä¸€éƒ½å‘ç”Ÿå˜å½¢; 3. è¿™ç§å˜å½¢åªåœ¨æ£€æµ‹è¯­æ³•æ—¶å‘ç”Ÿä¸€æ¬¡,åœ¨ç±»å®šä¹‰ä¹‹åæ–°å¢çš„__å¼€å¤´çš„å±æ€§å¹¶ä¸ä¼šå‘ç”Ÿå˜å½¢; 4. å¦‚æœçˆ¶ç±»ä¸æƒ³è®©å­ç±»è¦†ç›–è‡ªå·±çš„å±æ€§,å¯ä»¥åœ¨å±æ€§å‰åŠ ä¸Š__å¼€å¤´. ä¸€ å°è£…çš„æ„å›¾ä¸€ å°è£…æ•°æ®å±æ€§çš„çœŸå®æ„å›¾123456789101112131415161718192021222324252627282930313233343536# coding: utf-8# @Time : 2018/10/24 6:39 PM# @Author : MUSIBII# @Email : shaozuanzuan@gmail.com# @File : å°è£…æ•°æ®å±æ€§çš„çœŸå®æ„å›¾.pyclass People: def __init__(self, name, age): self.__name = name self.__age = age def tell_info(self): print('name: %s age:%s' % (self.__name, self.__age)) def set_info(self, new_name, new_age): if type(new_name) is not str: print('åå­—å¿…é¡»æ˜¯strç±»å‹') return if type(new_age) is not int: print('å¹´é¾„å¿…é¡»æ˜¯intç±»å‹') return self.__name = new_name self.__age = new_age def clear_info(self): del self.__name del self.__ageobj = People('musibii', 18)obj.tell_info()obj.set_info('maffia', 23) äºŒ å°è£…å‡½æ•°å±æ€§çš„çœŸå®æ„å›¾123456789101112131415161718192021222324252627282930313233# coding: utf-8# @Time : 2018/10/24 6:53 PM# @Author : MUSIBII# @Email : shaozuanzuan@gmail.com# @File : å°è£…å‡½æ•°å±æ€§çš„çœŸå®æ„å›¾.pyclass ATM: def __card(self): print('æ’å¡') def __auth(self): print('ç”¨æˆ·è®¤è¯') def __input(self): print('è¾“å…¥æå–é‡‘é¢') def __print_bill(self): print('æ‰“å°è´¦å•') def __take_money(self): print('å–æ¬¾') def withdraw(self): self.__card() self.__auth() self.__input() self.__print_bill() self.__take_money()a = ATM()a.withdraw() æˆ‘ä»¬è‡ªå·±è®¾ç½®çš„ç§æœ‰å±æ€§å¹¶ä¸æ˜¯ä¸è®©ç”¨,è€Œæ˜¯ä¸ºäº†å‡å°‘å¤æ‚åº¦ä»¥åŠä¿æŠ¤æ•°æ®,åœ¨ç±»é‡Œé¢å®šä¹‰çš„ç§æœ‰å±æ€§åº”è¯¥æ€ä¹ˆè®¿é—®å‘¢? 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647# coding: utf-8# @Time : 2018/10/24 6:39 PM# @Author : MUSIBII# @Email : shaozuanzuan@gmail.com# @File : å°è£…æ•°æ®å±æ€§çš„çœŸå®æ„å›¾.pyclass People: def __init__(self, name, age, x): self.__name = name self.__age = age self.x = x def tell_info(self): print('name: %s age:%s' % (self.__name, self.__age)) def set_info(self, new_name, new_age): if type(new_name) is not str: print('åå­—å¿…é¡»æ˜¯strç±»å‹') return if type(new_age) is not int: print('å¹´é¾„å¿…é¡»æ˜¯intç±»å‹') return self.__name = new_name self.__age = new_age def clear_info(self): del self.__name del self.__ageobj = People('musibii', 18, 13)obj.tell_info()obj.set_info('maffia', 23)print(obj.x)print(obj.__dict__)print(obj._People__name)# è¿è¡Œç»“æœname: musibii age:1813&#123;'_People__name': 'maffia', '_People__age': 23, 'x': 13&#125;maffia è™½ç„¶é€šè¿‡ç›´æ¥è®¿é—®æ²¡ç”¨,æŸ¥çœ‹å¯¹è±¡çš„åç§°ç©ºé—´å¯ä»¥çœ‹åˆ°,åŸæœ¬çš„__nameå˜å½¢ä¸ºäº†_People__name,é‚£ä¹ˆå¯ä»¥é€šè¿‡è¿™ä¸ªåå­—è®¿é—®åˆ°å¯¹è±¡ä¸­çš„ç§æœ‰å±æ€§,åŒç†å‡½æ•°ä¹Ÿæ˜¯ä¸€æ ·çš„æ–¹æ³•è®¿é—®. è¿™ç§å˜å½¢éœ€è¦æ³¨æ„çš„é—®é¢˜æ˜¯: è¿™ç§æœºåˆ¶å¹¶æ²¡æœ‰çœŸæ­£æ„ä¹‰ä¸Šé™åˆ¶æˆ‘ä»¬ä»å¤–éƒ¨ç›´æ¥è®¿é—®å±æ€§,çŸ¥é“äº†ç±»åå’Œå±æ€§åå°±å¯ä»¥æ‹¼å‡ºåå­—:_ç±»å__å±æ€§,ç„¶åå°±å¯ä»¥è®¿é—®äº†,å¦‚a._A__N,å³è¿™ç§æ“ä½œå¹¶ä¸æ˜¯ä¸¥æ ¼æ„ä¹‰ä¸Šçš„é™åˆ¶å¤–éƒ¨è®¿é—®,ä»…ä»…åªæ˜¯ä¸€ç§è¯­æ³•æ„ä¹‰ä¸Šçš„å˜å½¢,ä¸»è¦ç”¨æ¥é™åˆ¶å¤–éƒ¨çš„ç›´æ¥è®¿é—®; å˜å½¢è¿‡ç¨‹åªåœ¨ç±»çš„å®šä¹‰æ—¶å‘ç”Ÿä¸€æ¬¡,åœ¨å®šä¹‰åçš„èµ‹å€¼æ“ä½œ,ä¸ä¼šå˜å½¢. åœ¨ç»§æ‰¿ä¸­,çˆ¶ç±»å¦‚æœä¸æƒ³è®©å­ç±»è¦†ç›–è‡ªå·±çš„æ–¹æ³•,å¯ä»¥å°†æ–¹æ³•å®šä¹‰ä¸ºç§æœ‰å±æ€§. 1234567891011121314151617181920212223242526272829303132# å­ç±»ç»§æ‰¿çˆ¶ç±»çš„éç§æœ‰å±æ€§class A: def fa(self): print('from A') def test(self): self.fa()class B(A): def fa(self): print('from B')b=B()b.test()# è¿è¡Œç»“æœfrom B# å­ç±»å’Œçˆ¶ç±»å…·æœ‰åŒåçš„ç§æœ‰å±æ€§,é‚£ä¹ˆåœ¨çˆ¶ç±»è°ƒç”¨ç§æœ‰å±æ€§çš„è¯å°±ä»¥çˆ¶ç±»çš„ä¸ºå‡†class A: def __fa(self): #åœ¨å®šä¹‰æ—¶å°±å˜å½¢ä¸º_A__fa print('from A') def test(self): self.__fa() #åªä¼šä¸è‡ªå·±æ‰€åœ¨çš„ç±»ä¸ºå‡†,å³è°ƒç”¨_A__faclass B(A): def __fa(self): print('from B')b = B()b.test()# è¿è¡Œç»“æœfrom A äºŒ å°è£…ä¸æ˜¯å•çº¯æ„ä¹‰çš„éšè—å°è£…çš„çœŸè°›åœ¨äºæ˜ç¡®çš„åŒºåˆ†å†…å¤–,å°è£…çš„å±æ€§å¯ä»¥åœ¨å†…éƒ¨ç›´æ¥ä½¿ç”¨,è€Œä¸èƒ½è¢«å¤–éƒ¨ç›´æ¥ä½¿ç”¨,ç„¶è€Œå®šä¹‰çš„å±æ€§çš„ç›®çš„ç»ˆå½’æ˜¯è¦ä½¿ç”¨çš„,å¤–éƒ¨è¦æƒ³ç”¨ç±»éšè—çš„å±æ€§,éœ€è¦å†…éƒ¨æä¾›æ¥å£,è®©å¤–éƒ¨èƒ½å¤Ÿé—´æ¥åœ°ç”¨åˆ°æˆ‘ä»¬éšè—èµ·æ¥çš„å±æ€§,é‚£è¿™ä¹ˆåšçš„æ„ä¹‰ä½•åœ¨? å°è£…æ•°æ®: å°†æ•°æ®éšè—èµ·æ¥ä¸æ˜¯ç›®çš„.éšè—èµ·æ¥ç„¶åå¯¹å¤–æä¾›æ“ä½œè¯¥æ•°æ®çš„æ¥å£,ç„¶åæˆ‘ä»¬å¯ä»¥åœ¨æ¥å£é™„åŠ ä¸Šå¯¹è¯¥æ•°æ®æ“ä½œçš„é™åˆ¶,ä»¥æ­¤å®Œæˆå¯¹æ•°æ®å±æ€§æ“ä½œçš„ä¸¥æ ¼æ§åˆ¶. å°è£…æ–¹æ³•: å°è£…æ–¹æ³•çš„ç›®çš„æ˜¯éš”ç¦»å¤æ‚åº¦,åœ¨ç¼–ç¨‹è¯­è¨€é‡Œ,å¯¹å¤–æä¾›çš„æ¥å£(æ¥å£å¯ä»¥ç†è§£ä¸ºä¸€ä¸ªå…¥å£),å¯ä»¥æ˜¯å‡½æ•°,æˆä¸ºæ¥å£å‡½æ•°,è¿™ä¸æ¥å£çš„æ¦‚å¿µä¸ä¸€æ ·,æ¥å£ä»£è¡¨ä¸€ç»„æ¥å£å‡½æ•°çš„é›†åˆä½“. äº†è§£ pythonå¹¶ä¸ä¼šçœŸçš„é˜»æ­¢ä½ è®¿é—®ç§æœ‰å±æ€§,æ¨¡å—ä¹Ÿéµå¾ªè¿™ç§çº¦å®š,å¦‚æœæ¨¡å—åä»¥å•ä¸‹åˆ’çº¿å¼€å¤´,é‚£ä¹ˆfrom import æ—¶ä¸èƒ½è¢«å¯¼å…¥,ä½†æ˜¯ä½ from module import _private_moduleä¾ç„¶å¯ä»¥å¯¼å…¥. ä¸‰ ç‰¹æ€§å±æ€§ä»€ä¹ˆæ˜¯ç‰¹æ€§? propertyæ˜¯ä¸€ç§ç‰¹æ®Šçš„å±æ€§,è®¿é—®å®ƒæ—¶ä¼šæ‰§è¡Œä¸€æ®µåŠŸèƒ½(å‡½æ•°)ç„¶åè¿”å›å€¼.ç±»ä¸­å¯èƒ½ä¼šæœ‰æŸäº›å‡½æ•°è¿è¡Œåçš„å€¼æ˜¯ç‰¹å®šçš„æˆ–è€…å°±å•çº¯çš„è®¡ç®—å‡ºæŸç§ç‰¹å®šçš„å€¼,é‚£ä¹ˆè¿™ç§æƒ…å†µä¸‹,å¯ä»¥æŠŠè¯¥å‡½æ•°å˜ä¸ºç‰¹æ€§. ä¸ºä»€ä¹ˆè¦ç”¨property? å°†ä¸€ä¸ªç±»çš„å‡½æ•°å®šä¹‰ä¸ºç‰¹æ€§å,å¯¹è±¡å†å»ä½¿ç”¨çš„æ—¶å€™,å¯ä»¥æ˜¯è®¿é—®æ•°æ®å±æ€§ä¸€æ ·è®¿é—®,å°±å¥½åƒè£…é¥°å™¨ä¸€æ ·,å…¶å®ä½ æ ¹æœ¬ä¸çŸ¥é“å¤–é¢åšäº†ä»€ä¹ˆæ“ä½œ,è€Œpropertyä¹Ÿæ˜¯ä¸€ä¸ªè£…é¥°å™¨. 123456789101112131415161718class People: def __init__(self, name, weight, height): self.name = name self.weight = weight self.height = height # @property def bmi(self): return self.weight / (self.height ** 2) obj = People('musibii', 60, 1.73)obj.weight = 65print(obj.bmi())# è¿è¡Œç»“æœ21.71806608974573# æŠŠæ³¨é‡Šå»æ‰å,è°ƒç”¨æ–¹æ³•bmi()å°±å¯ä»¥åƒè®¿é—®å±æ€§ä¸€æ ·è¿›è¡Œè®¿é—®äº†.print(obj.bmi) å¦å¤–ä¸€ç§æ–¹æ³•ä¹Ÿå¯ä»¥å®ç°è¿™ç§æ–¹æ³•: 12345678910111213141516171819202122class People: def __init__(self, name): self.__name = name def yyy_name(self, new_name): if type(new_name) is not str: print('åå­—å¿…é¡»æ˜¯strç±»å‹') return self.__name = new_name def zzz_name(self): del self.__name def xxx_name(self): return '&lt;name:%s&gt;' % self.__name name = property(xxx_name, yyy_name, zzz_name)obj = People('musibii')print(obj.name) è¿™ç§æ–¹æ³•ç¨æ˜¾å¥‡æ€ª,å…¶å®ä½œç”¨æ˜¯ä¸€æ ·çš„,ä½†æ˜¯è¿™ç§æ–¹æ³•æœ‰ä¸€ä¸ªéœ€è¦æ³¨æ„çš„åœ°æ–¹,é‚£å°±æ˜¯propertyç±»çš„__init__æ–¹æ³•çš„å‚æ•°æ˜¯ä½ç½®å‚æ•°,æ‰€ä»¥ä¸¥æ ¼æŒ‰ç…§æ¯ä¸ªæ–¹æ³•çš„ä½ç½®ä¼ å€¼.æŸ¥çœ‹__init__æºç å¯å¾—: æƒ³è¦å¯¹è¯¥æ–¹æ³•æ“ä½œçš„æ•°æ®å±æ€§å®ç°åˆ é™¤,ä¿®æ”¹,æŸ¥çœ‹æ˜¯å’Œpropertyè£…é¥°å™¨ç»“åˆèµ·æ¥ä½¿ç”¨çš„: 123456789101112131415161718192021222324252627class People: def __init__(self,name): self.__name=name @property def name(self): return '&lt;name:%s&gt;' %self.__name @name.setter def name(self,new_name): if type(new_name) is not str: print('åå­—å¿…é¡»æ˜¯strç±»å‹') return self.__name=new_name @name.deleter def name(self): del self.__nameobj=People('musibii')print(obj.name)# obj.name=123# print(obj.name)del obj.nameprint(obj.__dict__) è¿™æ ·æ‰çœŸæ­£å®ç°äº†åœ¨ä¸æ”¹å˜æ“ä½œæ•°æ®å½¢å¼çš„åŸºç¡€ä¸Šä¿®æ”¹äº†æ•°æ®å±æ€§çš„å€¼. ç»è¿‡æœ¬ç¯‡åšå®¢å¯çŸ¥:å°è£…å…¶å®æ˜¯æ›´é«˜å±‚æ¬¡çš„ä¸€ä¸ªå‡½æ•°å½¢å¼,æˆ‘è§‰å¾—ç±»åŒç†,å¼€è¾Ÿè‡ªå·±çš„åç§°ç©ºé—´,å‡å°‘ä»£ç çš„è€¦åˆæ€§,æ›´ä¸€æ­¥è¯´,æ“ä½œæ•°æ®å°±æ˜¯æ“ä½œå†…å­˜ä¸­çš„æ•°æ®,å…¶å®åœ¨å†…å­˜ä¸­æœ‰ä»€ä¹ˆå‡½æ•°,ç±»å’Œå¯¹è±¡å—?ä»¥æˆ‘ç°åœ¨çš„çŸ¥è¯†è§‰å¾—åº”è¯¥æ²¡æœ‰,å†…å­˜ä¸­å°±æ˜¯ä¸€å †å†·å†°å†°çš„æ•°æ®,é‚£ä¹ˆé™¤äº†äº§ç”Ÿæ–°çš„å¯¹è±¡(å¯å˜ä¸å¯å˜),å…¶å®å†…å­˜ä¸­çš„å€¼å¾—å†…å­˜åœ°å€éƒ½æ²¡æœ‰å˜,åªæ˜¯ä¸€ä¸€ä¸ªæŒ‡å‘å¼•ç”¨å…³ç³»,å…¶å®pythonä¸­ä¹Ÿæœ‰æŒ‡é’ˆæ¦‚å¿µçš„,åªæ˜¯æ²¡æœ‰cé‚£æ ·éœ€è¦è‡ªå·±ç»´æŠ¤ç½¢äº†,pythonçš„å˜é‡åå’Œå˜é‡åæŒ‡å‘çš„å¯¹è±¡çš„å…³ç³»å°±æ˜¯æˆ¿å­å’Œé—¨ç‰Œå·çš„å…³ç³»,æœ‰åå­—ä¾¿äºæ‰¾åˆ°æˆ¿å­,é‚£ä¹ˆæ²¡æœ‰åå­—çš„æˆ¿å­ä¸åƒç°å®ç”Ÿæ´»ä¸­è¿˜å¯ä»¥å­˜åœ¨,æ²¡æœ‰åå­—å¯¹è¯¥æˆ¿å­çš„å¼•ç”¨,é‚£ä¹ˆpythonçš„å†…å­˜ç®¡ç†æœºåˆ¶å°±ä¼šæŠŠè¯¥æˆ¿å­æ‘§æ¯ä»¥ä¾¿å»ºä¸‹ä¸€ä¸ªæˆ¿å­. åœ¨pythonä¸­çš„ç±»å’Œè¯¥ç±»äº§ç”Ÿçš„å¯¹è±¡æ˜¯å¦‚ä½•ä¿å­˜çš„å‘¢? ç±»ä»¥åŠç±»ä¸­çš„æ–¹æ³•åœ¨å†…å­˜ä¸­åªæœ‰ä¸€ä»½,è€Œé€šè¿‡ç±»åˆ›å»ºçš„æ¯ä¸€ä¸ªå¯¹è±¡éƒ½éœ€è¦åœ¨å†…å­˜ä¸­ä¿å­˜ä¸€ä»½,é‚£ä¹ˆå¯¹è±¡ä¿å­˜çš„æ˜¯ä»€ä¹ˆå‘¢?å…¶å®å°±åªä¿å­˜äº†æˆ¿å­çš„åœ°å€(ä¹Ÿå°±æ˜¯ç±»å¯¹è±¡æŒ‡é’ˆ),è¯¥å€¼æŒ‡å‘å½“å‰å¯¹è±¡çš„ç±». å½“é€šè¿‡å¯¹è±¡æ‰§è¡Œæ–¹æ³•æ—¶,è¿‡ç¨‹å¦‚ä¸‹: æ ¹æ®å½“å‰å¯¹è±¡ä¸­çš„ç±»å¯¹è±¡æŒ‡é’ˆ,æ‰¾åˆ°ç±»ä¸­çš„æ–¹æ³•; å°†å¯¹è±¡å½“åšå‚æ•°ä¼ ç»™æ–¹æ³•çš„ç¬¬ä¸€ä¸ªå‚æ•°(self),è¿™ä¸ªselfå°±æ˜¯é«˜åº¦å°è£…çš„ä¸€ä¸ªå¯¹è±¡(å’Œç±»çš„ç‰¹æ€§å°è£…ä¸ä¸€æ ·),ä¸€ä¸ªselféª‘å£«å¯ä»¥å®¹çº³ä¸‡ç‰©,åªè¦å†…å­˜å¯ä»¥è£…å¾—ä¸‹. pythonçš„é¢å‘å¯¹è±¡é‡Œé¢çš„å°è£…æ€æƒ³å¤ªå‰å®³äº†.]]></content>
      <categories>
        <category>Python</category>
      </categories>
      <tags>
        <tag>é¢å‘å¯¹è±¡</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[pythonçš„åç§°ç©ºé—´]]></title>
    <url>%2F2018%2F10%2F23%2Fpython%E7%9A%84%E5%91%BD%E5%90%8D%E7%A9%BA%E9%97%B4%2F</url>
    <content type="text"><![CDATA[æœ€å¼€å§‹å¯¹åç§°ç©ºé—´çš„äº†è§£æ˜¯åœ¨å­¦ä¹ å‡½æ•°çš„æ—¶å€™,é‚£æ—¶å€™çŸ¥é“äº†ä½œç”¨åŸŸçš„æŸ¥æ‰¾é¡ºåº,ä»¥åŠå…¨å±€åç§°ç©ºé—´å’Œå±€éƒ¨åç§°ç©ºé—´,äº§ç”Ÿç–‘æƒ‘çš„æ—¶å€™ä¸ºå­¦é€’å½’çš„æ—¶å€™,é‚£æ—¶å€™è¿˜æ²¡æœ‰åç§°ç©ºé—´è¿™ä¸ªæ¦‚å¿µ,åªçŸ¥é“é€’å½’æœ‰ä¸ªæœ€å¤§æ·±åº¦,é‚£æ—¶å€™ä»¥åé€’å½’äº§ç”Ÿçš„åç§°ç©ºé—´æ˜¯ä¸€å±‚å¥—ä¸€å±‚çš„,ä»¥åŠç±»é‡Œé¢çš„åç§°ç©ºé—´,æ‰€ä»¥äº§ç”Ÿäº†æ·±ç©¶åç§°ç©ºé—´çš„æƒ³æ³•,è¿™æ‰è¯ç”Ÿäº†è¿™ç¯‡åšå®¢,æœ¬ç¯‡åšå®¢å€Ÿé‰´äº†pythonçš„å‘½åç©ºé—´çš„å†…å®¹,æœ¬äººå¯¹é‡Œé¢çš„ä¾‹å­éƒ½è¯•éªŒäº†å¹¶å‘ç°äº†ä¸€ä¸ªé”™è¯¯,åœ¨ç±»ä¸­å®šä¹‰çš„åˆ—è¡¨ç”Ÿæˆå¼äº§ç”Ÿçš„å‘½åç©ºé—´ä¹Ÿå¯ä»¥è®¿é—®åˆ°ç±»å±æ€§. ä¾‹å­12345678910111213141516171819# a.pylis = ['musibii', 'thales']print('lis1', id(name))class A: def __init__(self): pass def func(self): global lis lis.append('maffia') print('lis', id(lis)) return lis print('lis2', lis)# b.pyfrom a import Aprint('b', A) æ‰§è¡Œ b æ–‡ä»¶çš„ç»“æœä¸º: 123lis1 4421146632lis2 ['musibii', 'thales']b &lt;class 'a.A'&gt; å¯ä»¥å‘ç°,è™½ç„¶ b åªæ˜¯å¯¼å…¥äº† a ä¸­çš„ class A, ä½†å¯¼å…¥è¿™ä¸ªè¿‡ç¨‹æ‰§è¡Œäº†æ•´ä¸ª a æ–‡ä»¶,é‚£ä¹ˆæ˜¯å¦èƒ½å¤Ÿåœ¨ b ä¸­è®¿é—® a ä¸­çš„å…¨å±€å˜é‡ lis å‘¢? ä½¿ç”¨ from a import A çš„å½¢å¼åªæ˜¯æŠŠ A äº§ç”Ÿçš„åç§°ç©ºé—´å¤åˆ¶äº†ä¸€ä»½åˆ° b äº§ç”Ÿçš„åç§°ç©ºé—´ä¸­. Pythonçš„ä¸€äº›åŸºæœ¬æ¦‚å¿µå¯¹è±¡åœ¨Python ä¸­ä¸€åˆ‡çš†å¯¹è±¡,é‚£ä¹ˆå¯¹è±¡åˆ°åº•ä»£è¡¨ä»€ä¹ˆå‘¢?æˆ‘çš„ç†è§£æ˜¯åœ¨æ‰§è¡Œ py æ–‡ä»¶æ—¶äº§ç”Ÿçš„ä¸€åˆ‡å˜é‡éƒ½ç§°ä¸ºå¯¹è±¡,å¦‚æœæŠŠå†…å­˜æ¯”ä½œä¸€åº§è¶…å¤§çš„æˆ¿å­çš„è¯,é‚£ä¹ˆå¯¹è±¡å°±æ˜¯è¿™åº§æˆ¿å­é‡Œçš„ç§Ÿå®¢,é‚£ä¹ˆè¿™ä¸ªç§Ÿå®¢éšèº«æºå¸¦çš„ä¸œè¥¿å°±æ˜¯è¿™ä¸ªå¯¹è±¡çš„ä¸€åˆ‡äº†,å¯¹è±¡éƒ½å…·æœ‰å”¯ä¸€çš„ id( å†…å­˜åœ°å€),ç±»å‹( python3ä¸­ç»Ÿä¸€äº†ç±»å’Œç±»å‹çš„æ¦‚å¿µ),ä»¥åŠå¯¹è±¡çš„å€¼,å¯¹è±¡ä¸€æ—¦å»ºç«‹, id ä¾¿ä¸ä¼šæ”¹å˜, id å°±æ˜¯å¯¹è±¡åœ¨å†…å­˜ä¸­çš„åœ°å€. ç”¨å¸¸è§çš„å¯¹è±¡æ¥ç±»æ¯”ä¸€ä¸‹è¿™ä¸‰ä¸ªæ¦‚å¿µ: å¸¸é‡ 123456789NAME = 'musibii'print(id(NAME))print(type(NAME))print(globals()) # æŸ¥çœ‹å…¨å±€åç§°ç©ºé—´# è¿è¡Œç»“æœ4374978776&lt;class 'str'&gt;&#123;'__name__': '__main__', '__doc__': None, '__package__': None, '__loader__': &lt;_frozen_importlib_external.SourceFileLoader object at 0x104c45fd0&gt;, '__spec__': None, '__annotations__': &#123;&#125;, '__builtins__': &lt;module 'builtins' (built-in)&gt;, '__file__': '/Users/jingxing/PycharmProjects/pythonå…¨æ ˆ/ä½œä¸š/day27/duixiang.py', '__cached__': None, 'NAME': 'musibii'&#125; å‡ºæ¥çš„ç»“æœåˆ†åˆ«æ˜¯ id,ç±»å‹ä»¥åŠå­—å…¸é‡Œé¢æœ€åä¸€ä¸ªé”®å€¼å¯¹å¯¹åº”çš„å°±æ˜¯ NAME çš„å€¼. å‡½æ•° 1234567891011121314151617def func(): name = 'musibii' def inner(): age = 18 print('age', age) inner() print(locals()) # æƒ³è¦æŸ¥çœ‹å‡½æ•°é‡Œé¢çš„å€¼,å¿…é¡»åœ¨å‡½æ•°å†…éƒ¨æŸ¥çœ‹,å› ä¸ºå‡½æ•°æ‰§è¡Œå®Œæˆä¼šé‡Šæ”¾å†…å­˜èµ„æºprint(id(func))print(type(func))func()# è¿è¡Œç»“æœ4529634840&lt;class 'function'&gt;age 18&#123;'inner': &lt;function func.&lt;locals&gt;.inner at 0x10e1cac80&gt;, 'name': 'musibii'&#125; id å’Œç±»å‹ä¸å¿…å¤šè¯´,å‡½æ•°å¯¹åº”çš„å±æ€§å€¼é‡Œé¢ä¸åŒ…æ‹¬åµŒå¥—å‡½æ•°é‡Œé¢çš„å±æ€§(è¯´æ˜:åç§°ç©ºé—´æ˜¯ç›¸äº’ç‹¬ç«‹çš„) ç±» 123456789101112131415161718class Cls: school = 'hashangda' def __init__(self, name, age): self.name = name self.age = age def tell_info(self): print('%s : %s' % (self.name, self.age))print(id(Cls))print(type(Cls))print(Cla.__dict__)# è¿è¡Œç»“æœ140390381504248&lt;class 'type'&gt;&#123;'__module__': '__main__', 'school': 'hashangda', '__init__': &lt;function Cls.__init__ at 0x10648eae8&gt;, 'tell_info': &lt;function Cls.tell_info at 0x10648ebf8&gt;, '__dict__': &lt;attribute '__dict__' of 'Cls' objects&gt;, '__weakref__': &lt;attribute '__weakref__' of 'Cls' objects&gt;, '__doc__': None&#125; ç±»çš„ id ä¸ºå†…å­˜åœ°å€,ç±»å‹ä¸ºtypeç±»å‹,åœ¨ type é‡Œé¢ type å°±æ˜¯ç±»å‹çš„æ„æ€,æ‰€ä»¥è¯´ python é‡Œæ‰€æœ‰çš„ç±»çš„ç±»å‹éƒ½æ˜¯ç±»å‹,è€Œç±»é‡Œé¢çš„å±æ€§å°±æ˜¯ç±»çš„å€¼äº†. python é‡Œé¢æ‰€æœ‰çš„å¯¹è±¡éƒ½å…·æœ‰çš„å¹¶ä¸”æ ¹ç¡®å®šèº«ä»½æœ‰å…³çš„å€¼ä¸º id, ç±»å‹å’Œå€¼äº†.åç§°ä¸æ˜¯å¯¹è±¡çš„å±æ€§,åç§°åªæ˜¯æŒ‡å‘å¯¹è±¡,å› ä¸ºå¯ä»¥å¤šä¸ªåç§°æŒ‡å‘åŒä¸€ä¸ªå¯¹è±¡. æ ‡è¯†ç¬¦åœ¨å¯¹è±¡é‡ŒæŠŠå˜é‡åå«ä¸ºåç§°å…¶å®æ˜¯ä¸å‡†ç¡®çš„,è¿™äº›åç§°éƒ½æœ‰ä¸€ä¸ªå…±åŒçš„åå­—: identifier(å’Œ id æ˜¯ä¸¤ä¸ªæ„æ€),ä¸­æ–‡åä¸ºâ€™æ ‡è¯†ç¬¦â€™. æ ‡è¯†ç¬¦:åœ¨ Pythonä¸­,å„ç±»å¯¹è±¡çš„åç§°,æ¯”å¦‚å‡½æ•°å,æ–¹æ³•å,ç±»å,å˜é‡å.å¸¸é‡åéƒ½ç§°ä¸ºæ ‡è¯†ç¬¦. åœ¨ Python ä¸­èµ‹å€¼å¹¶ä¸ä¼šç›´æ¥å¤åˆ¶æ•°æ®,è€Œåªæ˜¯å°†åç§°ç»‘å®šåˆ°å¯¹è±¡,å¯¹è±¡æœ¬èº«ä¸éœ€è¦çŸ¥é“å’Œå…³å¿ƒè‡ªå·±çš„æ ‡è¯†ç¬¦å«ä»€ä¹ˆ,ä¸€ä¸ªå¯¹è±¡ç”šè‡³å¯ä»¥æŒ‡å‘ä¸åŒçš„æ ‡è¯†ç¬¦.çœŸæ­£ç®¡ç†è¿™äº›æ ‡è¯†ç¬¦çš„äº‹ç‰©æ˜¯â€™åç§°ç©ºé—´â€™. åç§°ç©ºé—´åç§°ç©ºé—´(NameSpace):åå­—(æ ‡è¯†ç¬¦)åˆ°å¯¹è±¡çš„æ˜ å°„. ç®€å•æ¥è¯´,åç§°ç©ºé—´å¯ä»¥ç†è§£ä¸ºè®°å½•å¯¹è±¡å’Œå¯¹è±¡åå­—å¯¹åº”å…³ç³»çš„ç©ºé—´,åœ¨å¯¹è±¡é‚£é‡ŒæŸ¥çœ‹çš„å¯¹è±¡çš„å€¼å°±æ˜¯åç§°ç©ºé—´,è¿™æ˜¯ä¸€ä¸ªå­—å…¸,ä¸€ä¸ªå‘½åç©ºé—´å°±æ˜¯åå­—åˆ°å¯¹è±¡çš„æ˜ å°„,æ ‡è¯†ç¬¦æ˜¯é”®,å¯¹è±¡åˆ™æ˜¯å€¼. ä½œç”¨åŸŸä¸åç§°ç©ºé—´ç›¸å¯¹çš„ä¸€ä¸ªæ¦‚å¿µå°±æ˜¯â€™ä½œç”¨åŸŸâ€™,ä½œç”¨åŸŸæœ¬è´¨æ˜¯ä¸€å—æ–‡æœ¬åŒºåŸŸ, Python é€šè¿‡è¯¥æ–‡æœ¬åŒºåŸŸå¯ä»¥ç›´æ¥è®¿é—®ç›¸åº”çš„åç§°ç©ºé—´. Python ä¸­ä¸åŠ  . çš„è®¿é—®ä¸ºç›´æ¥è®¿é—®,åä¹‹ä¸ºå±æ€§è®¿é—®. å› æ­¤å¯ä»¥ç®€å•çš„å°†ä½œç”¨åŸŸç†è§£ä¸ºç›´æ¥è®¿é—®åç§°ç©ºé—´çš„ä¸€ç§å®ç°,å…·ä½“è€Œè¨€: ä½œç”¨åŸŸå†…ç›¸åº”çš„åç§°ç©ºé—´å¯ä»¥è¢«ç›´æ¥è®¿é—®; åªæœ‰ä½œç”¨åŸŸå†…çš„åç§°ç©ºé—´æ‰å¯ä»¥è¢«ç›´æ¥è®¿é—®(å› æ­¤å¹¶ä¸æ˜¯æ‰€æœ‰çš„åç§°ç©ºé—´éƒ½å¯ä»¥è¢«ç›´æ¥è®¿é—®). LEGBLEGB åç§°ç©ºé—´è¿™å››ç±»åç§°ç©ºé—´å¯ä»¥ç®€è®°ä¸º LEGB: å±€éƒ¨åç§°ç©ºé—´( local): æŒ‡çš„æ˜¯ä¸€ä¸ªå‡½æ•°æˆ–è€…ä¸€ä¸ªç±»æ‰€å®šä¹‰çš„åç§°ç©ºé—´:åŒ…æ‹¬å‡½æ•°çš„å‚æ•°,å±€éƒ¨å˜é‡,ç±»çš„å±æ€§ç­‰; é—­åŒ…åç§°ç©ºé—´(enclosing function):é—­åŒ…å‡½æ•°çš„åç§°ç©ºé—´( python3å¼•å…¥); å…¨å±€åç§°ç©ºé—´( global):è¯»å…¥ä¸€ä¸ªæ¨¡å—(ä¹Ÿå³ä¸€ä¸ª. py æ–‡ä»¶)åäº§ç”Ÿçš„åç§°ç©ºé—´; å†…å»ºåç§°ç©ºé—´(builtin):Python è§£é‡Šå™¨å¯åŠ¨æ—¶è‡ªåŠ¨è½½å…¥__builtin__ æ¨¡å—åå½¢æˆçš„åç§°ç©ºé—´;åƒ str/list/dictâ€¦ ç­‰å†…ç½®å¯¹è±¡çš„åç§°å°±å¤„äºè¿™é‡Œ. ä¸¾ä¾‹: 123456789# test.pyv1 = 'global var'def func(v1): v2 = 'local var' def inner(): v3 = v2 + v return v3 return inner å†…å»ºçš„åæ­£æ¯æ¬¡éƒ½ä¸€æ ·,åœ¨è¿™é‡Œçš„ä¸‰ä¸ªåç§°ç©ºé—´é‡Œé¢çš„åç§°ä¸º: â€˜v1â€™ ä¸ºå…¨å±€å˜é‡ v1 çš„åå­—,å…¶æ‰€å¤„çš„åç§°ç©ºé—´ä¸ºå…¨å±€åç§°ç©ºé—´;éœ€è¦æ³¨æ„çš„æ˜¯å…¨å±€åç§°ç©ºé—´åŒ…æ‹¬ â€˜funcâ€™ ä½†ä¸åŒ…æ‹¬ func çš„å‚æ•°å’Œå†…éƒ¨å˜é‡; func åŒ…æ‹¬ â€˜vâ€™, â€˜v2â€™, å’Œ â€˜innerâ€™åç§°çš„å±€éƒ¨åç§°ç©ºé—´; æ‰§è¡Œ func å, func çš„ä½œç”¨åŸŸé‡Šæ”¾,å¹¶è¿”å›ç»‘å®šäº† v å’Œ v2å˜é‡çš„é—­åŒ…å‡½æ•° inner, æ­¤æ—¶é—­åŒ…å‡½æ•°çš„åç§°ç©ºé—´å³ä¸ºé—­åŒ…åç§°ç©ºé—´,å› æ­¤å±€éƒ¨åç§°ç©ºé—´å’Œé—­åŒ…åç§°ç©ºé—´æ˜¯ç›¸å¯¹è€Œè¨€çš„,å¯¹äºçˆ¶å‡½æ•° func è€Œè¨€,ä¸¤è€…å…·æœ‰äº§ç”Ÿæ—¶é—´ä¸Šçš„å·®å¼‚. LEGB è®¿é—®è§„åˆ™é€šè¿‡ä¸Šé¢çš„ä¾‹å­,å‘ç° LEGB å››ç±»åç§°ç©ºé—´æœ¬èº«å…·æœ‰æ˜æ˜¾çš„å†…å¤–å±‚çº§æ¦‚å¿µ,è€Œè¿™ç§å±‚çº§æ¦‚å¿µæ­£æ˜¯æ„å»ºä½œç”¨åŸŸçš„å‰æ:ä½œç”¨åŸŸä¾æ®è¿™ç§å±‚çº§æ¦‚å¿µå°†ä¸åŒç±»å‹çš„åç§°ç©ºé—´ç»„ç»‡èµ·æ¥å¹¶åˆ’å½’åˆ°ä¸åŒå±‚çº§çš„ä½œç”¨åŸŸ,ç„¶åå®šä¹‰å¥½ä¸åŒå±‚çº§ä½œç”¨åŸŸä¹‹é—´çš„è®¿é—®è§„åˆ™,ä»è€Œå®ç°åç§°ç©ºé—´çš„ç›´æ¥è®¿é—®. LEGB çš„è®¿é—®è§„åˆ™:**åŒæ ·çš„æ ‡è¯†ç¬¦åœ¨å„å±‚åç§°ç©ºé—´å¯ä»¥è¢«é‡å¤ä½¿ç”¨è€Œä¸ä¼šå‘ç”Ÿå†²çª,ä½† Python å¯»æ‰¾ä¸€ä¸ªæ ‡è¯†ç¬¦çš„è¿‡ç¨‹æ€»æ˜¯ä»å½“å‰å±‚å¼€å§‹é€å±‚ç½‘ä¸Šæ‰¾,ç›´åˆ°é¦–æ¬¡æ‰¾åˆ°è¿™ä¸ªæ ‡è¯†ç¬¦ä¸ºæ­¢. 123456789101112131415# main.pyv1 = 1v2 = 3def func(): v1 = 2 print(v1) print(v2) func()print(v1)# è¿è¡Œç»“æœ231 å…¨å±€å˜é‡å’Œå‡½æ•° func éƒ½å®šä¹‰äº†å˜é‡ v1,åœ¨å‡½æ•°å†…éƒ¨ä¼šä¼˜å…ˆé€‰æ‹©è‡ªå·±å±€éƒ¨åç§°ç©ºé—´å†…çš„å˜é‡ v1,å¯¹äº func ä¸­æœªå®šä¹‰çš„å˜é‡ v2,Python ä¼šå‘ä¸ŠæŸ¥æ‰¾å…¨å±€åç§°ç©ºé—´,è¯»å–å…¨å±€å˜é‡åæ‰“å°è¾“å‡º. global å’Œ nonlocal è¯­å¥global å’Œ nonlocal çš„ä½œç”¨å¯¹äºä¸Šå±‚åç§°ç©ºé—´é‡Œçš„å˜é‡, python å…è®¸ç›´æ¥è¯»å–,ä½†æ˜¯ä¸å¯ä»¥åœ¨å†…å±‚ä½œç”¨åŸŸç›´æ¥æ”¹å†™ä¸Šå±‚å˜é‡,åœ¨è¿™æ–¹é¢å¾ˆæ˜æ˜¾çš„åŒºåˆ«å°±æ˜¯åœ¨é—­åŒ…å‡½æ•°é‡Œ. 1234567891011# e.pygv = ['a', 'global', 'var']def func(v): gv = ['gv'] + gv lv = [] def inner(): lv = lv + [v] gv.insert(1, lv[0]) return return inner å®é™…è°ƒç”¨ func å‡½æ•°å,ä¸Šé¢ä¸¤å¤„å¯¹ gv å’Œ lv è¿›è¡Œèµ‹å€¼çš„æ“ä½œéƒ½ä¼šå‘ç”ŸUnboundLocalError:å› ä¸º python åœ¨æ‰§è¡Œå‡½æ•°å‰,ä¼šé¦–å…ˆç”Ÿæˆå„å±‚åç§°ç©ºé—´å’Œä½œç”¨åŸŸ,å› æ­¤ python ä¼šåœ¨æ‰§è¡Œèµ‹å€¼å‰å°† func å†…çš„ gv å’Œ lv å†™å…¥å±€éƒ¨åç§°ç©ºé—´å’Œé—­åŒ…åç§°ç©ºé—´,å½“ python æ‰§è¡Œèµ‹å€¼è¯­å¥çš„æ—¶å€™,ä¼šå‘ç°åœ¨å±€éƒ¨ä½œç”¨åŸŸ,é—­åŒ…ä½œç”¨åŸŸå†…å‘ç°å±€éƒ¨åç§°ç©ºé—´å’Œé—­åŒ…åç§°ç©ºé—´å†…å·²ç»å…·æœ‰ gv å’Œ lv æ ‡è¯†ç¬¦,ä½†æ˜¯è¿™ä¸¤ä¸ªéå…¨å±€æ ‡è¯†ç¬¦åœ¨èµ‹å€¼è¯­å¥æ‰§è¡Œä¹‹å‰å¹¶æ²¡æœ‰è¢«èµ‹å€¼,ä¹Ÿå³æ²¡æœ‰å¯¹è±¡ä¸æ ‡è¯†ç¬¦å…³è”,å› æ­¤æ— æ³•å‚ä¸èµ‹å€¼è¿ç®—,ä»è€Œè§¦å‘åœ¨å¼•ç”¨ä¹‹å‰æœªèµ‹å€¼çš„é”™è¯¯;ä½†è¿™æ®µç¨‹åºçš„æœ¬æ„æ˜¯ä¸ºäº†è®©å…¨å±€å˜é‡ gv å’Œå±€éƒ¨å˜é‡ lv å‚ä¸è¿ç®—,ä¸ºäº†é¿å…ç±»ä¼¼çš„æƒ…å†µå‘ç”Ÿ,Python å¼•å…¥äº†globalå’Œnonlocalè¯­å¥æ¥è¯´æ˜å±€éƒ¨åç§°ç©ºé—´å’Œé—­åŒ…åç§°ç©ºé—´ä½¿ç”¨çš„æ ‡è¯†ç¬¦åˆ†åˆ«æ¥è‡ªå…¨å±€åç§°ç©ºé—´å’Œå±€éƒ¨åç§°ç©ºé—´,å£°æ˜ä¹‹åå°±å¯ä»¥åœ¨ func å’Œ inner åç§°ç©ºé—´é‡Œç›´æ¥æ”¹å†™ä¸Šå±‚åç§°ç©ºé—´å†…çš„gvå’Œlvçš„å€¼äº†. 123456789101112131415# f.pygv = ['a', 'global', 'var']def func(v): global gv gv = ['gv'] + gv lv = [] print(id(lv)) def inner(): nonlocal lv lv = lv + [v] print(id(lv)) gv.insert(1, lv[0]) return return inner è¿™æ ·å°±å¯ä»¥æ­£å¸¸ä¿®æ”¹äº†.åŸåšå®¢è¯´ lv çš„ id éƒ½æ˜¯ä¸€æ ·çš„,åœ¨ mac ä¸Šç‰ˆæœ¬ä¸º3..6.6æµ‹è¯•å‘ç°ä¸æ˜¯ä¸€æ ·çš„. 1234# è¿è¡Œç»“æœ44166001364416615624# ç¡®å®æ˜¯ä½¿ç”¨äº†ä¸Šå±‚åç§°ç©ºé—´çš„å˜é‡,ä½†æ˜¯é‡æ–°èµ‹å€¼å, gv å’Œä¸Šå±‚çš„ gv å·²ç»ä¸æ˜¯åŒä¸€ä¸ªäº†, lv ä¹Ÿä¸€æ ·,æ‰€ä»¥å†…å­˜åœ°å€éƒ½å‘ç”Ÿå˜åŒ–äº†. å€Ÿå£³é‚£ä¹ˆä¸ç”¨ global å’Œnonlocal å¯ä»¥è¾¾åˆ°ä¸Šé¢çš„ç›®çš„å—? 12345678910111213# g.pygv = ['a', 'global', 'var']def func(v): gv.insert(0, 'gv') lv = [] print(id(lv)) def inner(): lv.append(v) print(id(lv)) gv.insert(1, lv[0]) return gv return inner çœ‹ä½œè€…çš„è¿™ä¸ªè§£é‡Šä¸ºå€Ÿå£³,æ„Ÿè§‰å¾ˆå½¢è±¡,è¿™ä¸ªåŸå› åº”è¯¥ç”¨åˆ—è¡¨å¼å¯å˜ç±»å‹æ¥è§£é‡Šæ¯”è¾ƒå¥½, insert å’Œ append çš„æ“ä½œå¹¶æ²¡æœ‰å¯¹åˆ—è¡¨è¿›è¡Œèµ‹å€¼æ“ä½œ,è€Œæ˜¯å¯¹åˆ—è¡¨è¿™ä¸ªå®¹å™¨é‡Œé¢çš„ä¸œè¥¿ä¿®æ”¹äº†å¹¶ä¸æ˜¯ä¿®æ”¹åˆ—è¡¨,æˆ‘ä»¬éƒ½çŸ¥é“ç”µè„‘å†…çš„å†…å­˜æ°¸è¿œéƒ½ä¸ä¼šæ”¹å˜,ä»–å°±æ˜¯ä¸ªè¶…å¤§çš„å®¹å™¨,ç”¨æ¥è£…ä¸œè¥¿çš„,å‡å¦‚ç°åœ¨æœ‰ä¸ªåˆ—è¡¨,å®ƒçš„å®¹é‡å’Œå†…å­˜ä¸€æ ·å¤§,é‚£ä¹ˆæ˜¯ä¸æ˜¯å¥½ç†è§£ç‚¹,æˆ‘ä»¬åœ¨å’Œå†…å­˜ä¸€æ ·çš„åˆ—è¡¨é‡Œæ“ä½œä¼šæ”¹å˜è¿™ä¸ªåˆ—è¡¨å—?ä¸ä¼š. åœ¨ global å’Œ nonlocal çš„ä½œç”¨å°±æ˜¯æŠŠä¸Šå±‚æœ‰çš„æ ‡è¯†ç¬¦å’Œå¯¹è±¡å¤åˆ¶ä¸€ä»½åˆ°ä¸‹å±‚åç§°ç©ºé—´ ä¸ºä»€ä¹ˆåœ¨ä¸‹å±‚ä½œç”¨åŸŸå¯ä»¥ä½¿ç”¨è¯»å–ä¸Šå±‚ä½œç”¨åŸŸçš„å€¼è€Œä¸å¯ä»¥ä½¿ç”¨å®ƒçš„å€¼å‘¢? è¿™æ˜¯å› ä¸º python çš„ä¸¤ä¸ªæ¦‚å¿µä¸åŒçš„åŸå› ,ä½œç”¨åŸŸå’Œåç§°ç©ºé—´çš„åŒºåˆ«å¯¼è‡´çš„.æ ‡è¯†ç¬¦çš„æŸ¥æ‰¾é¡ºåºæ˜¯ä»å½“å‰å±‚ä¸€å±‚å±‚å‘å¤–æŸ¥æ‰¾çš„,è¿™æ˜¯æ ¹æ®ä½œç”¨åŸŸæ¥æŸ¥æ‰¾çš„,é‚£ä¹ˆåç§°ç©ºé—´å‘¢?ä½œç”¨åŸŸå’Œåç§°ç©ºé—´çš„åœ¨æ‰§è¡Œ py æ–‡ä»¶å°±å·²ç»äº§ç”Ÿäº†,å…¶å®å¯ä»¥ç†è§£è¿™æ˜¯ä¸€ä¸ªä¸œè¥¿,å…¶å®é‡Œé¢ä¿å­˜çš„ä¿¡æ¯(é™¤äº†æŸäº›å¯èƒ½æœ‰ç‰¹æ®Šå«ä¹‰çš„å€¼ä¸ä¸€æ ·å¤–)éƒ½ä¸€æ ·,ä¸ä¸€æ ·çš„æ˜¯ä½œç”¨äºé‡Œé¢åªä¿å­˜äº†æ ‡è¯†ç¬¦,è€Œåç§°ç©ºé—´é‡Œä¸ä»…ä¿å­˜äº†æ ‡è¯†ç¬¦è¿˜ä¿å­˜äº†æ ‡è¯†ç¬¦å¯¹åº”çš„å¯¹è±¡.æŸ¥æ‰¾å€¼çš„é¡ºåºæ˜¯æ ¹æ®ä½œç”¨åŸŸæ¥çš„,ä½¿ç”¨å€¼å°±åªèƒ½ä½¿ç”¨è‡ªå·±åç§°ç©ºé—´é‡Œçš„å€¼,åç§°ç©ºé—´é‡Œä¿å­˜çš„æ˜¯æ ‡è¯†ç¬¦å’Œæ ‡è¯†ç¬¦å¯¹åº”çš„å¯¹è±¡,åªæœ‰æœ¬å±‚åç§°ç©ºé—´é‡Œæœ‰è¿™ä¸ªæ ‡è¯†ç¬¦å’Œæ ‡è¯†ç¬¦å¯¹åº”çš„å¯¹è±¡æ‰å¯ä»¥ä½¿ç”¨(è¯»,ä½¿ç”¨). é‚£ä¹ˆç°åœ¨å¾ˆæ˜ç™½ä¸ºä»€ä¹ˆä¸èƒ½ç›´æ¥åœ¨ä¸‹å±‚åç§°ç©ºé—´ç›´æ¥ä½¿ç”¨ä¸Šå±‚åç§°ç©ºé—´é‡Œçš„åç§°äº†. global å’Œ nonlocal è¯­å¥å¯¹æ ‡è¯†ç¬¦åˆ›å»ºçš„ä¸åŒå½±å“éœ€è¦æ³¨æ„çš„æ˜¯: global è¯­å¥åªæ˜¯å£°æ˜è¯¥æ ‡è¯†ç¬¦å¼•ç”¨çš„å˜é‡æ¥è‡ªäºå…¨å±€å˜é‡,ä½†å¹¶ä¸èƒ½ç›´æ¥åœ¨å½“å‰å±‚åˆ›å»ºè¯¥æ ‡è¯†ç¬¦;nonlocal è¯­å¥åˆ™ä¼šåœ¨å­å‡½æ•°åç§°ç©ºé—´åˆ›å»ºä¸çˆ¶å‡½æ•°å˜é‡åŒåçš„æ ‡è¯†ç¬¦. 123456789101112131415# j.pygv = ['a global var']def func(): global lv = 'a local var' print(locals()) def inner(): nonlocal lv global gv print(locals()) return inner# è¿è¡Œç»“æœ&#123;'lv': 'a local var'&#125;&#123;'lv': 'a local var'&#125; è¿è¡Œ func å‡½æ•°å global è¯­å¥å¹¶æœªå°† â€˜ gv â€˜å˜é‡å¼•å…¥å±€éƒ¨åç§°ç©ºé—´,æ‰§è¡Œé—­åŒ…å‡½æ•°å,â€™ localâ€™è¯­å¥å°†çˆ¶å‡½æ•°å˜é‡â€™lvâ€™å¼•å…¥é—­åŒ…åç§°ç©ºé—´. ä¹‹æ‰€ä»¥ nonlocal å’Œ global è¯­å¥çš„å¤„ç½®ä¸åŒ,åœ¨äºå…¨å±€å˜é‡çš„ä½œç”¨åŸŸç”Ÿå­˜æœŸå¾ˆé•¿,åœ¨æ¨¡å—å†…éšæ—¶éƒ½å¯ä»¥è®¿é—®,è€Œçˆ¶ç±»å‡½æ•°çš„å±€éƒ¨ä½œç”¨åŸŸåœ¨çˆ¶å‡½æ•°æ‰§è¡Œå®Œæ¯•åä¾¿ä¼šç›´æ¥é‡Šæ”¾,å› æ­¤ nonlocal è¯­å¥å¿…é¡»å°†çˆ¶å‡½æ•°å˜é‡çš„æ ‡è¯†ç¬¦å†™å…¥é—­åŒ…åç§°ç©ºé—´. åç§°ç©ºé—´çš„ç”Ÿå‘½å‘¨æœŸåˆ›å»ºè§„åˆ™è¿˜æœ‰ä¸€ä¸ªé‡è¦çš„é—®é¢˜æ²¡æœ‰è§£å†³:â€™æ ‡è¯†ç¬¦ä¸æ˜¯ä¸€å¼€å§‹å°±å­˜åœ¨åç§°ç©ºé—´çš„,åç§°ç©ºé—´ä¹Ÿä¸æ˜¯å¹³ç™½æ— æ•…äº§ç”Ÿçš„,é‚£ä¹ˆåç§°ç©ºé—´æ˜¯åœ¨ä»€ä¹ˆæ—¶å€™è¢«åˆ›å»º?åˆæ˜¯ä»€ä¹ˆæ—¶å€™è¢«åˆ é™¤çš„å‘¢?â€™ åç§°ç©ºé—´äº§ç”Ÿé¡ºåº: å†…å»ºåç§°ç©ºé—´åœ¨ Python è§£é‡Šå™¨å¯åŠ¨æ—¶åˆ›å»º,ä¹‹åä¼šä¸€ç›´å­˜åœ¨; æ¨¡å—çš„å…¨å±€åç§°ç©ºé—´åœ¨æ¨¡å—å®šä¹‰æ—¶è¢«è¯»å…¥åˆ›å»º,é€šå¸¸æ¨¡å—åç§°ç©ºé—´ä¹Ÿä¼šä¿æŒåˆ°è§£é‡Šå™¨é€€å‡º; å‡½æ•°è°ƒç”¨æ—¶äº§ç”Ÿæ–°çš„å±€éƒ¨åç§°ç©ºé—´,å‡½æ•°è¿”å›ç»“æœ,æŠ›å‡ºå¼‚å¸¸æ—¶é‡Šæ”¾åç§°ç©ºé—´,æ¯ä¸€æ¬¡é€’å½’éƒ½äº§ç”Ÿä¸€ä¸ªåç§°ç©ºé—´; æ ‡è¯†ç¬¦äº§ç”Ÿåœ°ç‚¹å†³å®šæ ‡è¯†ç¬¦æ‰€å¤„çš„åç§°ç©ºé—´. ç±»çš„åç§°ç©ºé—´é¦–æ¬¡,å‡½æ•°å’Œç±»æ‰§è¡Œæ—¶éƒ½ä¼šäº§ç”Ÿå±€éƒ¨åç§°ç©ºé—´,ä½†ç±»çš„æ‰§è¡Œæœºåˆ¶ä¸åŒäºå‡½æ•°; 123456789101112131415# i.pydef a(): print('function')class A(): print(1) class B(): print(2) class C(): print(3) # è¿è¡Œç»“æœ123 å¦‚ä¸Š,ç±»å°±æ˜¯ä¸€ä¸ªå¯æ‰§è¡Œçš„ä»£ç å—,åªè¦è¯¥ç±»è¢«åŠ è½½,å°±ä¼šè¢«æ‰§è¡Œ,è¿™ä¸€ç‚¹ä¸åŒäºå‡½æ•°. ç±»ä¹‹æ‰€ä»¥è¿™æ ·è®¾è®¡çš„åŸå› åœ¨äº:ç±»æ˜¯åˆ›å»ºå…¶ä»–å®ä¾‹(å£°ç§°å…¶ä»–çš„ç±»æˆ–è€…å…·ä½“çš„å¯¹è±¡)çš„å¯¹è±¡,å› æ­¤å¿…é¡»åœ¨å®ä¾‹ä¹‹å‰è¢«åˆ›å»º,è€Œç±»åˆå¯èƒ½æ¶‰åŠåˆ°ä¸å…¶ä»–ç±»çš„ç»§æ‰¿,é‡è½½ç­‰ä¸€ç³»åˆ—é—®é¢˜,æ•…åœ¨ä»£ç åŠ è½½æ—¶å°±è¢«åˆ›å»ºåˆ©äºæé«˜æ•ˆç‡å’Œé™ä½é€»è¾‘å¤æ‚åº¦. å…¶æ¬¡,ä¸å‡½æ•°ä¸åŒçš„æ˜¯,ç±»çš„å±€éƒ¨åç§°ç©ºé—´å¹¶éä½œç”¨äº; 123456class A(): a = 1 b = [a + i for i in range(3)] # è¿è¡Œç»“æœNameError: name 'a' is not defined æ‰§è¡Œä¸Šæ®µä»£ç ,å¯ä»¥å‘ç°ç±» A å†…åˆ—è¡¨æ¨å¯¼å¼æ— æ³•è°ƒå– a çš„å€¼,ä½†å‡½æ•°å¯ä»¥. 123456def func(): a = 1 b = [a + i for i in range(3)] print(b)func() #[1, 2, 3] å› æ­¤, A ä¸­çš„ a ä¸åŒäº func ä¸­çš„ a åœ¨å±€éƒ¨åç§°ç©ºé—´å¯ä»¥è¢«ä»»æ„è¯»å–,ä¹‹æ‰€ä»¥è¯´æ˜¯â€™ä¸å¯ä»¥è¢«ä»»æ„â€™è¯»å–è€Œä¸æ˜¯â€™ä¸å¯è¢«è¯»å–â€™,åŸå› åœ¨äºåœ¨ç±» A çš„å±€éƒ¨åç§°ç©ºé—´å†…, a å…¶å®åœ¨ä¸€å®šç¨‹åº¦ä¸Šå¯ä»¥è¢«è¯»å–çš„: 123456class A(): a = 1 c = a + 2# è¿è¡Œç»“æœ3 è€Œä¸Šä¾‹ä¸­ b çš„èµ‹å€¼æ“ä½œä¸èƒ½è¢«æ‰§è¡Œ,åŸå› åœ¨äºåˆ—è¡¨æ¨å¯¼å¼ä¼šåˆ›å»ºè‡ªå·±çš„å±€éƒ¨åç§°ç©ºé—´,å› æ­¤éš¾ä»¥è®¿é—®åˆ° a??????? ä¸ºä»€ä¹ˆè®¿é—®ä¸åˆ° a??? ç¼–è¯‘ä¸å±€éƒ¨åç§°ç©ºé—´Python æ˜¯åŠ¨æ€è¯­è¨€,å¾ˆå¤šè¡Œä¸ºæ˜¯åŠ¨æ€å‘ç”Ÿçš„,ä½† Python è‡ªèº«ä¹Ÿåœ¨ä¸æ–­è¿›æ­¥,æ¯”å¦‚ä¸ºäº†æé«˜æ•ˆç‡,æœ‰äº›è¡Œä¸ºä¼šåœ¨ç¼–è¯‘æ—¶å€™å®Œæˆ,å±€éƒ¨å˜é‡çš„åˆ›å»ºå°±æ˜¯å¦‚æ­¤. 123456def func(): a = 1 def inner(): print(a) # error a = 2 # error inner() ä¸Šæ®µç¨‹åºè¿˜æœªæ‰§è¡Œ,å°±æç¤ºå­˜åœ¨è¯­æ³•é”™è¯¯,åŸå› åœ¨äº Python è§£é‡Šå™¨å‘ç° inner å†…å­˜åœ¨è‡ªèº«çš„ a å˜é‡,ä½†åœ¨å£°æ˜ä¹‹å‰å°±è¢« print äº†. æ€»ç»“1ã€ä¸ºä»€ä¹ˆ b.py åªæ˜¯å¯¼å…¥ a.py ä¸­çš„ class A,å´æ‰§è¡Œäº†æ•´ä¸ª a.py æ–‡ä»¶?ç­”ï¼šå› ä¸º Python å¹¶ä¸çŸ¥é“ class A åœ¨ a.py æ–‡æ¡£çš„ä½•å¤„ï¼Œä¸ºäº†èƒ½å¤Ÿæ‰¾åˆ° class Aï¼ŒPython éœ€è¦æ‰§è¡Œæ•´ä¸ªæ–‡æ¡£ã€‚2ã€ä¸ºä»€ä¹ˆ b.py çš„å¯¼å…¥æ‰§è¡Œäº†æ•´ä¸ª a.py æ–‡æ¡£ï¼Œå´åœ¨ b ä¸­éš¾ä»¥è°ƒç”¨ a çš„å…¨å±€å˜é‡ vaï¼Ÿç­”ï¼šPython çš„å…¨å±€å˜é‡æŒ‡çš„æ˜¯æ¨¡å—å…¨å±€ï¼Œå› æ­¤ä¸å¯ä»¥è·¨æ–‡æ¡£ï¼Œå› æ­¤ global è¯­å¥ä¹Ÿæ˜¯ä¸å¯ä»¥è·¨æ–‡æ¡£çš„ã€‚å¦å¤–ï¼Œ b åªæ˜¯å¯¼å…¥äº† a çš„ class Aï¼Œå› æ­¤å¹¶ä¸ä¼šå¯¼å…¥ a ä¸­æ‰€æœ‰çš„æ ‡è¯†ç¬¦ï¼Œæ‰€ä»¥ ç±»ä¼¼a.va è¿™æ ·çš„è°ƒç”¨ä¹Ÿæ˜¯ä¸èµ·ä½œç”¨çš„ã€‚ å…³äºå‘½åç©ºé—´ï¼š1ã€èµ‹å€¼ã€å®šä¹‰ç±»å’Œå‡½æ•°éƒ½ä¼šäº§ç”Ÿæ–°çš„æ ‡è¯†ç¬¦ï¼›2ã€å…¨å±€å˜é‡çš„æ ‡è¯†ç¬¦ä¸èƒ½è·¨æ–‡æ¡£ï¼›3ã€å„çº§å‘½åç©ºé—´ç›¸äº’ç‹¬ç«‹äº’ä¸å½±å“ï¼›4ã€Python æ€»æ˜¯ä»å½“å‰å±‚é€æ¸å‘ä¸Šå¯»æ‰¾æ ‡è¯†ç¬¦ï¼›5ã€å†…å±‚ä½œç”¨åŸŸè‹¥æƒ³ç›´æ¥ä¿®æ”¹ä¸Šå±‚å˜é‡ï¼Œéœ€è¦é€šè¿‡ global nonlocal è¯­å¥å…ˆå£°æ˜ï¼›6ã€å•çº¯çš„ global è¯­å¥å¹¶ä¸èƒ½ä¸ºæ‰€åœ¨å±‚çº§åˆ›å»ºç›¸åº”æ ‡è¯†ç¬¦ï¼Œä½† nonlocal è¯­å¥å¯ä»¥åœ¨é—­åŒ…ç©ºé—´ä¸­åˆ›å»ºç›¸åº”æ ‡è¯†ç¬¦ï¼›7ã€ç±»çš„å±€éƒ¨å‘½åç©ºé—´ä¸æ˜¯ä½œç”¨åŸŸã€‚]]></content>
      <categories>
        <category>Python</category>
      </categories>
      <tags>
        <tag>NameSpace</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ç±»çš„ä¸‰å¤§ç‰¹æ€§ä¹‹ç»§æ‰¿]]></title>
    <url>%2F2018%2F10%2F23%2F%E7%B1%BB%E7%9A%84%E4%B8%89%E5%A4%A7%E7%89%B9%E6%80%A7%E4%B9%8B%E7%BB%A7%E6%89%BF%2F</url>
    <content type="text"><![CDATA[ä¸€ åˆè¯†ç»§æ‰¿ä¸€ ä»€ä¹ˆæ˜¯ç»§æ‰¿?ç»§æ‰¿æ˜¯ä¸€ç§åˆ›å»ºæ–°ç±»çš„æ–¹å¼,æ–°å»ºçš„ç±»å¯ä»¥ç»§æ‰¿ä¸€ä¸ªæˆ–å¤šä¸ªçˆ¶ç±»(pythonæ”¯æŒå¤šç»§æ‰¿),çˆ¶ç±»åˆå¯æˆä¸ºåŸºç±»æˆ–è¶…ç±»,æ–°å»ºçš„ç±»ç§°ä¸ºæ´¾ç”Ÿç±»æˆ–å­ç±». å­ç±»ä¼šç»§æ‰¿çˆ¶ç±»çš„å±æ€§,ä»è€Œè§£å†³ä»£ç é‡ç”¨é—®é¢˜. pythonä¸­ç±»çš„ç»§æ‰¿åˆ†ä¸º:å•ç»§æ‰¿å’Œå¤šç»§æ‰¿ 1234567891011class Parent1: passclass Parent2: passclass Sub1(Parent1): # å•ç»§æ‰¿,åŸºç±»æ˜¯Parent1,æ´¾ç”Ÿç±»æ˜¯Sub passclass Sub2(Parent1,Parent2): # å¤šç»§æ‰¿,ç”¨é€—å·åˆ†éš”å¼€å¤šä¸ªç»§æ‰¿çš„ç±» pass æŸ¥çœ‹ç»§æ‰¿ 1print(sub2.__bases__) # __base__åªæŸ¥çœ‹ç»§æ‰¿çš„ç¬¬ä¸€ä¸ªå­ç±»,__bases__åˆ™æ˜¯æŸ¥çœ‹æ‰€æœ‰ç»§æ‰¿çš„çˆ¶ç±» ç»å…¸ç±»ä¸æ–°å¼ç±» åªæœ‰åœ¨python2ä¸­æ‰åˆ†æ–°å¼ç±»å’Œç»å…¸ç±»,python3ç»Ÿä¸€éƒ½æ˜¯æ–°å¼ç±» åœ¨python2ä¸­,æ²¡æœ‰æ˜¾å¼çš„ç»§æ‰¿objectç±»çš„ç±»,ç±»ä¸è¯¥ç±»çš„å­ç±»,éƒ½æ˜¯ç»å…¸ç±» åœ¨python2ä¸­,æ˜¾å¼çš„å£°æ˜ç»§æ‰¿objectçš„ç±»,ç±»ä¸è¯¥ç±»çš„å­ç±»,éƒ½æ˜¯æ–°å¼ç±» åœ¨python3ä¸­,æ— è®ºæ˜¯å¦ç»§æ‰¿object,éƒ½é»˜è®¤ç»§æ‰¿object,å³python3ä¸­æ‰€æœ‰çš„ç±»å‡ä¸ºæ–°å¼ç±» python3ä¸­å¦‚æœæ²¡æœ‰æŒ‡å®šåŸºç±»,pythonçš„ç±»ä¼šé»˜è®¤ç»§æ‰¿objectç±»,objectç±»æ˜¯æ‰€æœ‰pythonç±»çš„åŸºç±»,å®ƒå†…ç½®äº†ä¸€äº›æ–¹æ³•. äºŒ ç»§æ‰¿ä¸æŠ½è±¡ç»§æ‰¿æè¿°çš„æ˜¯å­ç±»ä¸çˆ¶ç±»çš„ç»§æ‰¿å…³ç³»,æƒ³è¦æ‰¾å‡ºè¿™ç§å…³ç³»,å¿…é¡»å…ˆæŠ½è±¡å†ç»§æ‰¿. æŠ½è±¡:å³æŠ½å–ç±»ä¼¼æˆ–è€…ç›¸ä¼¼çš„éƒ¨åˆ† ç»§æ‰¿:æ˜¯åŸºäºæŠ½è±¡çš„ç»“æœ,é€šè¿‡ç¼–ç¨‹è¯­è¨€å»å®ç°å®ƒ,è‚¯å®šæ˜¯å…ˆç»å†æŠ½è±¡è¿™ä¸ªè¿‡ç¨‹,æ‰èƒ½é€šè¿‡ç»§æ‰¿çš„æ–¹å¼å»è¡¨è¾¾å‡ºæŠ½è±¡çš„ç»“æ„ äºŒ ç»§æ‰¿çš„ä½¿ç”¨åœºæ™¯ä¸‰ ç»§æ‰¿ä¸é‡ç”¨æ€§åœ¨å¼€å‘ç¨‹åºçš„è¿‡ç¨‹ä¸­,å¦‚æœæˆ‘ä»¬é¦–å…ˆå®šä¹‰äº†ä¸€ä¸ªAç±»,ç„¶ååˆæƒ³æ–°å»ºä¸€ä¸ªBç±»,ä½†æ˜¯Bç±»çš„å¤§éƒ¨åˆ†å†…å®¹ä¸Aç±»ä»£ç ç›¸åŒæ—¶,å¯ä»¥é€šè¿‡ç»§æ‰¿çš„æ–¹æ³•æ¥å®ç°ä»£ç é‡ç”¨. Bç»§æ‰¿Aä¼šè·å¾—Açš„æ‰€æœ‰å±æ€§(æ•°æ®å±æ€§ä¸å‡½æ•°å±æ€§),æ‰€ä»¥Bä¸­æ²¡æœ‰è€ŒAä¸­å…·æœ‰çš„å±æ€§å¯ä»¥è¢«Bç”¨æ¥ä½¿ç”¨,è€ŒBä¸­æœ‰çš„å°±ä½¿ç”¨è‡ªå·±çš„: 12345678910111213141516171819202122232425class A: a = 123 print(a) def func1(self): print('A, func1') def func2(self): print('A, func2') self.func1() class B(A): a = 134 def func1(self): print('B, func1') b = B()print(b.a)b.func2()# è¿è¡Œç»“æœ123 # Aä¸ºBçš„çˆ¶ç±»,åœ¨ç»§æ‰¿çš„æ—¶å€™ä¼šé¦–å…ˆæ‰§è¡ŒAç±»ä¸­çš„ä»£ç 134A, func2B, func1 å›› æ´¾ç”Ÿç±»è™½ç„¶å­ç±»æ˜¯ç»§æ‰¿äº†çˆ¶ç±»çš„çš„å±æ€§,ä½†æ˜¯å­ç±»ä¹Ÿå¯ä»¥æ·»åŠ è‡ªå·±æ–°çš„å±æ€§æˆ–è€…å¯¹å­ç±»ç”Ÿæˆçš„å¯¹è±¡å®šä¹‰è‡ªå·±çš„å±æ€§(ä¸ä¼šå½±å“åˆ°çˆ¶ç±»),éœ€è¦æ³¨æ„çš„æ˜¯,ä¸€æ—¦é‡æ–°å®šä¹‰äº†è‡ªå·±çš„å±æ€§ä¸”ä¸çˆ¶ç±»åŒåæ—¶,é‚£ä¹ˆè°ƒç”¨æ–°çš„å±æ€§æ—¶ä»¥å­ç±»çš„ä¸ºå‡†. 123456789101112131415161718class A: a = 123 print(a) def func1(self): print('A, func1') def func2(self): print('A, func2') self.func1() class B(A): a = 134 def func1(self): print('B, func1') def func3(self): print('B, func3') Bå®šä¹‰äº†è‡ªå·±æ–°çš„å±æ€§func3,è€Œä¸”è¯¥å‡½æ•°å’ŒAç±»æ²¡æœ‰å…³ç³». äº” ç»„åˆä¸é‡ç”¨æ€§è½¯ä»¶é‡ç”¨çš„é‡è¦æ–¹å¼é™¤äº†ç»§æ‰¿ä¹‹å¤–è¿˜æœ‰å¦å¤–ä¸€ç§æ–¹å¼,å³:ç»„åˆ ç»„åˆæŒ‡çš„æ˜¯,åœ¨ä¸€ä¸ªç±»ä¸­ä»¥å¦å¤–ä¸€ä¸ªç±»çš„å¯¹è±¡ä½œä¸ºæ•°æ®å±æ€§,ç§°ä¸ºç±»çš„ç»„åˆ 12345678910111213class Equip: #æ­¦å™¨è£…å¤‡ç±» def fire(self): print('release Fire skill') class Riven: #è‹±é›„Rivençš„ç±»,ä¸€ä¸ªè‹±é›„éœ€è¦æœ‰è£…å¤‡,å› è€Œéœ€è¦ç»„åˆEquipç±» camp='Noxus' def __init__(self,nickname): self.nickname=nickname self.equip=Equip() #ç”¨Equipç±»äº§ç”Ÿä¸€ä¸ªè£…å¤‡,èµ‹å€¼ç»™å®ä¾‹çš„equipå±æ€§ r1=Riven('é”é›¯é›¯')r1.equip.fire() #å¯ä»¥ä½¿ç”¨ç»„åˆçš„ç±»äº§ç”Ÿçš„å¯¹è±¡æ‰€æŒæœ‰çš„æ–¹æ³•# è¿è¡Œç»“æœrelease Fire skill ç»„åˆä¸ç»§æ‰¿éƒ½æ˜¯æœ‰æ•ˆçš„åˆ©ç”¨å·²æœ‰ç±»çš„èµ„æºçš„é‡è¦æ–¹å¼.ä½†æ˜¯äºŒè€…çš„æ¦‚å¿µå’Œä½¿ç”¨åœºæ™¯çš†ä¸åŒ. ç»§æ‰¿çš„æ–¹å¼ é€šè¿‡ç»§æ‰¿å»ºç«‹äº†æ´¾ç”Ÿç±»å’Œçˆ¶ç±»ä¹‹é—´çš„å…³ç³»,å®ƒæ˜¯ä¸€ç§ä»å±å…³ç³». å½“ç±»ä¹‹é—´æœ‰å¾ˆå¤šç›¸åŒçš„åŠŸèƒ½,æå–è¿™äº›å…±åŒçš„åŠŸèƒ½åšæˆåŸºç±»,ç”¨ç»§æ‰¿æ¯”è¾ƒå¥½ ç»„åˆçš„æ–¹å¼ ç”¨ç»„åˆçš„æ–¹å¼å»ºç«‹äº†ç±»ä¸ç»„åˆçš„ç±»ä¹‹é—´çš„å…³ç³»,å®ƒæ˜¯ä¸€ç§é™„å¸¦å…³ç³». å…­ æŠ½è±¡ç±» ä»€ä¹ˆæ˜¯æŠ½è±¡ç±»? ä¸javaä¸€æ ·,pythonä¹Ÿæœ‰æŠ½è±¡ç±»çš„æ¦‚å¿µä½†æ˜¯åŒæ ·éœ€è¦å€ŸåŠ©æ¨¡å—å®ç°,æŠ½è±¡ç±»æ˜¯ä¸€ä¸ªç‰¹æ®Šçš„ç±»,å®ƒçš„ç‰¹æ®Šä¹‹å¤„åœ¨äºåªèƒ½è¢«ç»§æ‰¿,ä¸èƒ½è¢«å®ä¾‹åŒ–. ä¸ºä»€ä¹ˆè¦æœ‰æŠ½è±¡ç±»? å¦‚æœè¯´ç±»æ˜¯ä»ä¸€å †å¯¹è±¡ä¸­æŠ½å–ç›¸åŒçš„å†…å®¹å¾—æ¥çš„,é‚£ä¹ˆæŠ½è±¡ç±»å°±æ˜¯ä»ä¸€å †ç±»ä¸­æŠ½å–ç›¸åŒçš„å†…å®¹è€Œæ¥çš„,å†…å®¹åŒ…æ‹¬æ•°æ®å±æ€§å’Œå‡½æ•°å±æ€§. ä»è®¾è®¡è§’åº¦çœ‹,æŠ½è±¡ç±»ä¸æ™®é€šç±»çš„ä¸åŒä¹‹å¤„åœ¨äº:æŠ½è±¡ç±»ä¸­åªèƒ½æŠ½è±¡æ–¹æ³•(æ²¡æœ‰å®ç°åŠŸèƒ½),è¯¥ç±»ä¸èƒ½è¢«å®ä¾‹åŒ–,åªèƒ½è¢«ç»§æ‰¿,ä¸”å­ç±»å¿…é¡»å®ç°æŠ½è±¡æ–¹æ³•. ä¸‰ ç»§æ‰¿å®ç°çš„åŸç†ä¸€ ç»§æ‰¿é¡ºåºåœ¨pythonä¸­å¯ä»¥åŒæ—¶ç»§æ‰¿å¤šä¸ªçˆ¶ç±»,å¦‚A(B,C,D) å¦‚æœç»§æ‰¿å…³ç³»ä¸ºéè±å½¢ç»“æ„,åˆ™ä¼šæŒ‰ç…§å…ˆæ‰¾Bè¿™ä¸€æ¡åˆ†æ”¯,ç„¶åå†æ‰¾Cè¿™ä¸€æ¡åˆ†æ”¯,æœ€åæ‰¾Dè¿™ä¸€æ¡åˆ†æ”¯çš„é¡ºåºç›´åˆ°æ‰¾åˆ°è¦æ‰¾çš„å±æ€§,æ‰¾å®Œäº†è¿˜æ²¡æœ‰çš„è¯ä¼šæŠ¥å±æ€§ä¸å­˜åœ¨çš„é”™è¯¯. å¦‚æœç»§æ‰¿å…³ç³»ä¸ºè±å½¢ç»“æ„,é‚£ä¹ˆå±æ€§çš„æŸ¥æ‰¾æ–¹å¼æœ‰ä¸¤ç§,åˆ†åˆ«æ˜¯:æ·±åº¦ä¼˜å…ˆå’Œå¹¿åº¦ä¼˜å…ˆ. 12345678910111213141516171819202122232425262728293031class A(object): def test(self): print('from A')class B(A): def test(self): print('from B')class C(A): def test(self): print('from C')class D(B): def test(self): print('from D')class E(C): def test(self): print('from E')class F(D,E): # def test(self): # print('from F') passf1=F()f1.test()print(F.__mro__) #åªæœ‰æ–°å¼æ‰æœ‰è¿™ä¸ªå±æ€§å¯ä»¥æŸ¥çœ‹çº¿æ€§åˆ—è¡¨ï¼Œç»å…¸ç±»æ²¡æœ‰è¿™ä¸ªå±æ€§#æ–°å¼ç±»ç»§æ‰¿é¡ºåº:F-&gt;D-&gt;B-&gt;E-&gt;C-&gt;A#ç»å…¸ç±»ç»§æ‰¿é¡ºåº:F-&gt;D-&gt;B-&gt;A-&gt;E-&gt;C#python3ä¸­ç»Ÿä¸€éƒ½æ˜¯æ–°å¼ç±»#pyhon2ä¸­æ‰åˆ†æ–°å¼ç±»ä¸ç»å…¸ç±» äºŒ ç»§æ‰¿åŸç†pythonæ˜¯å¦‚ä½•å®ç°ç»§æ‰¿å¹¶æŸ¥æ‰¾å±æ€§çš„,å¯¹äºä½ å®šä¹‰çš„æ¯ä¸€ä¸ªç±»,pythonä¼šè®¡ç®—å‡ºä¸€ä¸ªæ–¹æ³•è§£æé¡ºåº(MRO)åˆ—è¡¨,è¿™ä¸ªMROåˆ—è¡¨å°±æ˜¯ä¸€ä¸ªç®€å•çš„æ‰€æœ‰åŸºç±»çš„çº¿æ€§é¡ºåºåˆ—è¡¨. ä¸ºäº†å®ç°ç»§æ‰¿,pythonä¼šåœ¨MROåˆ—è¡¨ä¸­ä»å·¦åˆ°å³å¼€å§‹æŸ¥æ‰¾åŸºç±»,ç›´åˆ°æ‰¾åˆ°ç¬¬ä¸€ä¸ªåŒ¹é…è¿™ä¸ªå±æ€§çš„ç±»ä¸ºæ­¢.è€Œè¿™ä¸ªMROåˆ—è¡¨çš„æ„é€ æ˜¯é€šè¿‡ä¸€ä¸ªC3çº¿æ€§åŒ–ç®—æ³•æ¥å®ç°çš„.å®ƒå®é™…ä¸Šå°±æ˜¯åˆå¹¶æ‰€æœ‰çˆ¶ç±»çš„MROåˆ—è¡¨å¹¶éµå¾ªå¦‚ä¸‹ä¸‰æ¡å‡†åˆ™: å­ç±»ä¼šå…ˆäºçˆ¶ç±»è¢«æ£€æŸ¥ å¤šä¸ªçˆ¶ç±»ä¼šæ ¹æ®å®ƒä»¬åœ¨åˆ—è¡¨ä¸­çš„é¡ºåºè¢«æ£€æŸ¥ å¦‚æœå¯¹ä¸‹ä¸€ä¸ªç±»å­˜åœ¨ä¸¤ä¸ªåˆæ³•çš„é€‰æ‹©,é€‰æ‹©ç¬¬ä¸€ä¸ªçˆ¶ç±» æŸ¥æ‰¾å±æ€§æ—¶,å³ä½¿æ²¡æœ‰ç›´æ¥ç»§æ‰¿å…³ç³»,ä¹Ÿä¼šæŒ‰ç…§MROåˆ—è¡¨ç»§ç»­å¾€åæŸ¥æ‰¾,å½“ä½¿ç”¨super()å‡½æ•°æ—¶,pythonä¼šåœ¨MROåˆ—è¡¨ä¸Šç»§ç»­æœç´¢ä¸‹ä¸€ä¸ªç±».åªè¦æ¯ä¸ªé‡å®šä¹‰çš„æ–¹æ³•ç»Ÿä¸€ä½¿ç”¨super()å¹¶åªè°ƒç”¨å®ƒä¸€æ¬¡,é‚£ä¹ˆæ§åˆ¶æµæœ€ç»ˆä¼šéå†å®Œæ•´ä¸ªMROåˆ—è¡¨,æ¯ä¸ªæ–¹æ³•ä¹Ÿåªä¼šè¢«è°ƒç”¨ä¸€æ¬¡ æ³¨æ„:ä½¿ç”¨superè°ƒç”¨çš„æ‰€æœ‰å±æ€§,éƒ½æ˜¯ä»MROåˆ—è¡¨å½“å‰çš„ä½ç½®å¾€åæ‰¾,ä¸è¦åœ¨æ„ç»§æ‰¿å…³ç³»,çœ‹MROåˆ—è¡¨å°±å¥½ ä¸‰ superçš„ä½¿ç”¨BaseTherç±»çš„åˆ›å»º 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455# coding: utf-8# @Time : 2018/10/23 11:40 PM# @Author : MUSIBII# @Email : shaozuanzuan@gmail.com# @File : father_type.pyimport os, sysimport pickleimport hashlibsys.path.append(os.path.dirname(os.path.dirname(__file__)))import db_file''' 11ã€æŠ½è±¡è€å¸ˆç±»ä¸å­¦ç”Ÿç±»å¾—åˆ°çˆ¶ç±»ï¼Œç”¨ç»§æ‰¿çš„æ–¹å¼å‡å°‘ä»£ç å†—ä½™'''import timeclass BaseTher: def __init__(self, name, age, gender): self.name = name self.age = age self.gender = gender self.time = time.time() # self.id_hash = self.create_id() # åˆ›å»ºå”¯ä¸€çš„id def create_id(self): # timenow = str(time.time()).split('.')[0] key = self.name + str(self.age) + self.gender + str(self.time) m = hashlib.md5(key.encode('utf-8')) self.id_hash = m.hexdigest() # print(m.hexdigest()) # return m.hexdigest() def tell_info(self): data = self.get_obj_by_id() for item in data: print('%-10s: %-20s' % (item, data[item])) # print(data) # å°†ä¿¡æ¯åºåˆ—åŒ–åä¿å­˜åˆ°æ–‡ä»¶ def save(self): user_data = &#123;'name': self.name, 'age': self.age, 'gender': self.gender, 'id_hash': self.id_hash&#125; with open('db_file/%s' % self.id_hash, 'wb') as f: pickle.dump(user_data, f) # é€šè¿‡idååºåˆ—åŒ–ä¿¡æ¯ def get_obj_by_id(self): with open('db_file/%s' % self.id_hash, 'rb') as f: return pickle.load(f) å­ç±»é€šè¿‡super().init(*args)ä½¿ç”¨çˆ¶ç±»çš„initæ–¹æ³• 1234567891011121314151617181920212223242526272829303132class Teacher(BaseTher): def __init__(self, name, age, gender, level, salary): super().__init__(name, age, gender) self.level = level self.salary = salary # self.id_hash = self.create_id() # åˆ›å»ºå”¯ä¸€çš„id def create_id(self): # timenow = str(time.time()).split('.')[0] key = self.name + str(self.age) + self.gender + str(self.level) + str(self.salary) m = hashlib.md5(key.encode('utf-8')) self.id_hash = m.hexdigest() # print(m.hexdigest()) # return m.hexdigest() # def tell_info(self): # data = self.get_obj_by_id() # for item in data: # print('%-10s: %-20s' % (item, data[item])) # # print(data) # å°†è€å¸ˆä¿¡æ¯åºåˆ—åŒ–åä¿å­˜åˆ°æ–‡ä»¶ def save(self): user_data = &#123;'name': self.name, 'age': self.age, 'gender': self.gender, 'level': self.level, 'salary': self.salary, 'id_hash': self.id_hash&#125; with open('db_file/%s'%self.id_hash, 'wb') as f: pickle.dump(user_data, f) # # é€šè¿‡idååºåˆ—åŒ–è€å¸ˆä¿¡æ¯ # def get_obj_by_id(self): # with open('db_file/%s'%self.id_hash, 'rb') as f: # return pickle.load(f) åœ¨Python3ä¸­,super()æ‹¬å·é‡Œé¢å¯ä»¥ä¸ºç©º,ä¸è¿‡ä¹Ÿå¯ä»¥å†™æˆsuper(æœ¬ç±»çš„åå­—,self) åƒä¸Šé¢çš„super().init(name, age, gender), å¯ä»¥å†™æˆsuper(Teacher,self).init(name, age, gender) å›› ç»„åˆçš„ä½¿ç”¨ ä»€ä¹ˆæ˜¯ç»„åˆ? ä¸€ä¸ªå¯¹è±¡çš„å±æ€§æ˜¯æ¥è‡ªå¦å¤–ä¸€ä¸ªç±»çš„å¯¹è±¡,ç§°ä¹‹ä¸ºç»„åˆ ä¸ºä½•ç”¨ç»„åˆ? ç»„åˆä¹Ÿæ˜¯ç”¨æ¥è§£å†³ç±»ä¸ç±»ä»£ç å†—ä½™çš„é—®é¢˜ ç»„åˆçš„ç”¨æ³•å¦‚ä¸‹ä»£ç : 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051# coding: utf-8# @Time : 2018/10/24 10:27 AM# @Author : MUSIBII# @Email : shaozuanzuan@gmail.com# @File : zuhe.pyclass OldboyPeople: school = 'Oldboy' def __init__(self, name, age, gender): self.name = name self.age = age self.gender = genderclass OldboyStudent(OldboyPeople): def __init__(self, name, age, gender): super().__init__(name, age, gender) def choose_course(self): print('%s is choosing course' % self.name)class OldboyTeacher(OldboyPeople): def __init__(self, name, age, gender, level, salary): OldboyPeople.__init__(self, name, age, gender) self.level = level self.salary = salary def score(self, stu, num): stu.num = num print('è€å¸ˆ%sç»™å­¦ç”Ÿ%sæ‰“åˆ†%s' % (self.name, stu.name, num))class Course: def __init__(self, course_name, course_price, course_period): self.course_name = course_name self.course_price = course_price self.course_period = course_period def tell_course(self): print('è¯¾ç¨‹å:&lt;%s&gt; ä»·é’±:[%s] å‘¨æœŸ:[%s]' % (self.course_name, self.course_price, self.course_period))course = Course('python', 3000, '5months')stu1 = OldboyStudent('musibii', 18, 'male')stu1.course = courseprint(stu1)]]></content>
      <categories>
        <category>Python</category>
      </categories>
      <tags>
        <tag>é¢å‘å¯¹è±¡</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[pythonæ•°æ®ç±»å‹ä¸ç±»çš„æ€»ç»“]]></title>
    <url>%2F2018%2F10%2F23%2Fpython%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B%E4%B8%8E%E7%B1%BB%E7%9A%84%E6%80%BB%E7%BB%93%2F</url>
    <content type="text"></content>
      <categories>
        <category>Python</category>
      </categories>
      <tags>
        <tag>é¢å‘å¯¹è±¡</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[é¢å‘å¯¹è±¡ç¼–ç¨‹]]></title>
    <url>%2F2018%2F10%2F22%2F%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1%E7%BC%96%E7%A8%8B%2F</url>
    <content type="text"><![CDATA[ä¸€ é¢å‘å¯¹è±¡ç¼–ç¨‹ä¸é¢å‘è¿‡ç¨‹ç¼–ç¨‹1 é¢å‘è¿‡ç¨‹ç¼–ç¨‹æ€æƒ³è¯¥æ€æƒ³æ ¸å¿ƒæ˜¯è¿‡ç¨‹ï¼ŒæŒ‡çš„æ˜¯è§£å†³é—®é¢˜çš„æ­¥éª¤ï¼Œå³å…ˆå¹²ä»€ä¹ˆç„¶åå¹²ä»€ä¹ˆï¼Œå°±åƒæµæ°´çº¿ä¸€æ ·ï¼Œå¿…é¡»ä¸€æ­¥ä¸€æ­¥æ¥ï¼ŒåŸºäºé¢å‘è¿‡ç¨‹ç¼–ç¨‹çš„æ˜¯ä¸€ç§æœºæ¢°åŒ–çš„æ€ç»´æ–¹å¼ã€‚ ä¼˜ç‚¹ï¼š å¤æ‚é—®é¢˜æµç¨‹åŒ–ï¼Œç®€å•åŒ–ï¼› ç¼ºç‚¹ï¼šå¯æ‰©å±•æ€§è¾ƒå·®ã€‚ åº”ç”¨åœºæ™¯ï¼šä¸€æ—¦å®Œæˆå‡ ä¹ä¸ä¼šæ”¹å˜ï¼ŒåƒLinuxå†…æ ¸ã€gitä»¥åŠApache HTTP Serverç­‰ 2 é¢å‘å¯¹è±¡ç¼–ç¨‹æ€æƒ³éšç€ç¡¬ä»¶çš„å¿«é€Ÿå‘å±•ï¼Œä¸šåŠ¡éœ€æ±‚è¶Šæ¥è¶Šå¤æ‚ï¼Œä»¥åŠç¼–ç¨‹åº”ç”¨é¢†åŸŸè¶Šæ¥è¶Šå¹¿æ³›ï¼Œé¢å‘è¿‡ç¨‹ç¼–ç¨‹å·²ç»ä¸èƒ½æ»¡è¶³éœ€æ±‚äº†ï¼Œäºæ˜¯å¦ä¸€ç§ç¼–ç¨‹æ€æƒ³å¼€å§‹å…´èµ·ï¼Œå°±æ˜¯é¢å‘å¯¹è±¡ç¼–ç¨‹ã€‚ è¯¥æ€æƒ³æ ¸å¿ƒæ˜¯å¯¹è±¡ï¼Œå¯¹è±¡æ˜¯ç‰¹å¾ä¸æŠ€èƒ½çš„ç»“åˆä½“ï¼ŒåŸºäºé¢å‘å¯¹è±¡è®¾è®¡ç¨‹åºå°±å¥½æ¯”è‡ªå·±æ˜¯é€ ç‰©ä¸»ä¸€æ ·ï¼Œæƒ³è¦åˆ›é€ ä»€ä¹ˆå°±åˆ›é€ ä»€ä¹ˆï¼Œä¸é¢å‘è¿‡ç¨‹æœºæ¢°å¼çš„æ€ç»´æ–¹å¼å½¢æˆé²œæ˜å¯¹æ¯”ï¼Œé¢å‘å¯¹è±¡æ›´åŠ æ³¨é‡å¯¹ç°å®ä¸–ç•Œçš„æŠ½è±¡åŒ–ã€‚ ä¼˜ç‚¹ï¼šè§£å†³äº†ç¨‹åºçš„æ‰©å±•æ€§ã€‚å¯¹æŸä¸€ä¸ªå¯¹è±¡å•ç‹¬ä¿®æ”¹ï¼Œä¼šç«‹åˆ»ååº”åˆ°æ•´ä¸ªä½“ç³»ä¸­ã€‚ ç¼ºç‚¹ï¼š1. ç¼–ç¨‹çš„å¤æ‚åº¦é«˜äºé¢å‘è¿‡ç¨‹ç¼–ç¨‹ï¼Œä¸äº†è§£é¢å‘å¯¹è±¡è€Œç«‹å³ä¸Šæ‰‹åŸºäºå¯¹è±¡è®¾è®¡ç¨‹åºï¼Œå®¹æ˜“å‡ºç°è¿‡åº¦è®¾è®¡çš„é—®é¢˜ã€‚ä¸€äº›æ‰©å±•æ€§è¦æ±‚ä½çš„åœºæ™¯ä½¿ç”¨é¢å‘å¯¹è±¡ä¼šå¢åŠ ç¼–ç¨‹éš¾åº¦ã€‚ æ— æ³•å‘é¢å‘è¿‡ç¨‹çš„ç¨‹åºè®¾è®¡æµæ°´å¼çš„å¯ä»¥å¾ˆç²¾å‡†çš„é¢„æµ‹é—®é¢˜çš„å¤„ç†æµç¨‹ä¸ç»“æœï¼Œé¢å‘å¯¹è±¡çš„ç¨‹åºä¸€æ—¦å¼€å§‹å°±ç”±å¯¹è±¡ä¹‹é—´çš„äº¤äº’è§£å†³é—®é¢˜ã€‚ åº”ç”¨åœºæ™¯ï¼šéœ€æ±‚ç»å¸¸å˜åŒ–çš„è½¯ä»¶ï¼Œä¸€èˆ¬éœ€æ±‚çš„å˜åŒ–éƒ½é›†ä¸­åœ¨ç”¨æˆ·å±‚ï¼Œäº’è”ç½‘åº”ç”¨ï¼Œä¼ä¸šå†…éƒ¨è½¯ä»¶ï¼Œæ¸¸æˆç­‰ é¢å‘å¯¹è±¡çš„ç¨‹åºè®¾è®¡å¹¶ä¸æ˜¯å…¨éƒ¨ã€‚å¯¹äºä¸€ä¸ªè½¯ä»¶è´¨é‡æ¥è¯´ï¼Œé¢å‘å¯¹è±¡çš„ç¨‹åºè®¾è®¡åªæ˜¯ç”¨æ¥è§£å†³æ‰©å±•æ€§ã€‚ ä¸€ä¸ªå¥½çš„åº”ç”¨è½¯ä»¶åº”åŒ…æ‹¬çš„ç‰¹æ€§ï¼š äºŒ ç±»ä¸å¯¹è±¡ä¸€ ç±»çš„å®šä¹‰ç±»å³ç±»åˆ«ã€ç§ç±»ï¼Œæ˜¯é¢å‘å¯¹è±¡è®¾è®¡æœ€é‡è¦çš„æ¦‚å¿µï¼Œå¯¹è±¡æ˜¯ç‰¹å¾ä¸æŠ€èƒ½çš„ç»“åˆä½“ï¼Œè€Œç±»åˆ™æ˜¯ä¸€ç³»åˆ—å…·æœ‰ç›¸ä¼¼ç‰¹å¾ä¸æŠ€èƒ½çš„æŠ½è±¡æ¦‚å¿µã€‚ åœ¨ç°å®ä¸­æ˜¯å…ˆå‡ºç°å¯¹è±¡ï¼Œç„¶åæ ¹æ®ä¸€ç³»åˆ—å…·æœ‰ç›¸åŒç‰¹å¾çš„å¯¹è±¡å®šä¹‰ä¸åŒçš„ç±»ï¼Œå¯¹è±¡æ˜¯å…·ä½“çš„å­˜åœ¨ï¼Œè€Œç±»ä»…ä»…åªæ˜¯ä¸€ä¸ªæ¦‚å¿µï¼Œå¹¶ä¸çœŸå®å­˜åœ¨ã€‚ åœ¨ç¨‹åºä¸­æ˜¯å…ˆå®šä¹‰ç±»ï¼Œç„¶åæ ¹æ®ç±»äº§ç”Ÿå¯¹è±¡ï¼Œè¿™ä¸å‡½æ•°çš„ä½¿ç”¨æ˜¯ç±»ä¼¼çš„ï¼Œå…ˆå®šä¹‰å‡½æ•°ï¼Œç±»åŒç†ï¼Œåœ¨ç¨‹åºä¸­éœ€è¦å…ˆå®šä¹‰ç±»ï¼Œåè°ƒç”¨ç±»ï¼Œä¸å‡½æ•°ä¸ä¸€æ ·çš„æ˜¯ï¼Œè°ƒç”¨å‡½æ•°ä¼šæ‰§è¡Œå‡½æ•°ä½“ä»£ç è¿”å›çš„æ˜¯å‡½æ•°çš„æ‰§è¡Œç»“æœï¼Œè€Œè°ƒç”¨ç±»ä¼šäº§ç”Ÿå¹¶è¿”å›ä¸€ä¸ªå¯¹è±¡ã€‚ åœ¨ç¨‹åºä¸­ï¼ŒåŠ¡å¿…ä¿è¯ï¼Œå…ˆå®šä¹‰ç±»ï¼Œåä½¿ç”¨å¯¹è±¡ã€‚ åœ¨ç¨‹åºä¸­ç‰¹å¾ä½¿ç”¨å˜é‡æ ‡è¯†ï¼ŒæŠ€èƒ½ä½¿ç”¨å‡½æ•°æ ‡è¯†ã€‚ å› è€Œç±»ä¸­æœ€å¸¸è§çš„æ˜¯ï¼šå˜é‡å’Œå‡½æ•°çš„å®šä¹‰ã€‚ 1234567891011# å®šä¹‰ä¸€ä¸ªç±»class something: school = 'hashangda' def learn(self): print('something is learning') def eat(self): print('something is eating') def sleep(self): print('something is sleeping') æ³¨æ„: ç±»ä¸­å¯ä»¥ä¸ºä»»æ„pythonä»£ç ,è¿™äº›ä»£ç åœ¨ç±»å®šä¹‰é˜¶æ®µä¾¿ä¼šæ‰§è¡Œ; å› è€Œä¼šäº§ç”Ÿæ–°çš„åç§°ç©ºé—´,ç”¨æ¥å­˜æ”¾ç±»çš„å˜é‡åä¸å‡½æ•°å,å¯ä»¥é€šè¿‡something.dictæŸ¥çœ‹; å¯¹äºç»å…¸ç±»æ¥è¯´å¯ä»¥é€šè¿‡è¯¥å­—å…¸æ“ä½œç±»åç§°ç©ºé—´çš„åå­—(æ–°å¼ç±»æœ‰é™åˆ¶),ä½†pythonä¸ºæˆ‘ä»¬æä¾›äº†ä¸“é—¨çš„è¯­æ³•è¿›è¡Œè®¿é—®; ç‚¹äº‹è®¿é—®å±æ€§çš„è¯­æ³•,ç±»ä¸­å®šä¹‰çš„åå­—,éƒ½æ˜¯ç±»çš„å±æ€§(å˜é‡å’Œå‡½æ•°). äºŒ ç¨‹åºä¸­ç±»çš„ç”¨æ³•åœ¨ç¨‹åºä¸­ç”¨.æ¥è®¿é—®ç±»çš„å±æ€§,æœ¬è´¨æ“ä½œä¸ºdict 1234something.school # ç­‰äºç»å…¸ç±» something.__dict__['school']something.school = 'oldboy' # ç­‰äºç»å…¸ç±» something.__dict__['school'] = 'oldboy'something.name = 'musibii' # ç­‰äºç»å…¸ç±» something.__dict__['name'] = 'musibii'del something.name # ç­‰äºç»å…¸ç±» something.__dict__.pop('name') åœ¨ç¨‹åºä¸­è°ƒç”¨ç±»(å®ä¾‹åŒ–å¯¹è±¡),äº§ç”Ÿå¹¶è¿”å›ä¸€ä¸ªå¯¹è±¡,äº§ç”Ÿçš„å¯¹è±¡ä¼šå…·æœ‰ç±»é‡Œé¢çš„å±æ€§,å¹¶ä¸”å¯ä»¥é€šè¿‡å¥ç‚¹æ³•è¿›è¡Œè®¿é—®. æ€»ç»“: ç±»æœ¬è´¨æ˜¯ä¸€ä¸ªåç§°ç©ºé—´,æˆ–è€…è¯´æ˜¯ä¸€ä¸ªç”¨æ¥å­˜æ”¾å˜é‡ä¸å‡½æ•°çš„å®¹å™¨; ç±»çš„ç”¨é€”ä¹‹ä¸€å°±æ˜¯å½“åšåç§°ç©ºé—´ä»å…¶å†…éƒ¨å–å‡ºåå­—æ¥ä½¿ç”¨; ç±»çš„ä¸»è¦ç”¨é€”æ˜¯è°ƒç”¨ç±»äº§ç”Ÿå¯¹è±¡. ä¸‰ å¯¹è±¡çš„ä½¿ç”¨é€šè¿‡è°ƒç”¨ç±»äº§ç”Ÿçš„å¯¹è±¡æˆä¸ºç±»çš„å®ä¾‹åŒ–,è°ƒç”¨ç±»çš„è¿”å›å€¼ç§°ä¹‹ä¸ºç±»çš„ä¸€ä¸ªå¯¹è±¡/å®ä¾‹. 123some = something() # äº§ç”Ÿä¸€ä¸ªå®ä¾‹å¯¹è±¡,å¯¹è±¡å¯ä»¥é€šè¿‡å¥ç‚¹æ³•è®¿é—®ç±»ä¸­çš„å±æ€§()print(some.school)# ç»“æœ hashangda ç±»ä¸­å®šä¹‰çš„å±æ€§æ˜¯ç”±è¯¥ç±»äº§ç”Ÿçš„æ‰€æœ‰å¯¹è±¡å…±æœ‰çš„å±æ€§,é‚£ä¹ˆæ¯ä¸ªå¯¹è±¡è‡ªå·±ç‰¹æœ‰çš„å±æ€§åº”è¯¥æ€ä¹ˆå®šä¹‰çš„? 1234567class something: school = 'hashangda' def __init__(self, name, age, gender): self.name = name self.age = age self.gender = gender ç±»ä¸­çš„initæ–¹æ³•æ˜¯ç”¨æ¥åˆå§‹åŒ–ä¸€ä¸ªå®ä¾‹å¯¹è±¡çš„,å¹¶ä¸”ä¼šæ‰§è¡Œä¸‹é¢çš„ä»£ç ,æ‰€ä»¥è¿™æ—¶å€™è¦å®ä¾‹åŒ–å¯¹è±¡æ˜¯éœ€è¦ä¼ å…¥åé¢çš„å‚æ•°. 123some1 = something('musibii', 18, 'male')some2 = something('thales', 20, 'female')some3 = something('maffia', 22, 'male') è¿™æ ·å®ä¾‹åŒ–å‡ºæ¥çš„å¯¹è±¡é™¤äº†schoolå±æ€§å€¼ä¸€æ ·,å…¶ä»–éƒ½æ˜¯è‡ªå·±ç‹¬æœ‰çš„å±æ€§å€¼. è°ƒç”¨ç±»äº§ç”Ÿäº† å…ˆäº§ç”Ÿä¸€ä¸ªç©ºå¯¹è±¡some1,ç„¶åè¿”å›; è§¦å‘ç±»ä¸­å‡½æ•°initçš„æ‰§è¡Œ,å°†å¯¹è±¡è”é€šè°ƒç”¨ç±»æ‹¬å·å†…æŒ‡å®šçš„å‚æ•°ä¸€åŒä¼ å…¥init. æ€»ç»“:initçš„åŠŸèƒ½,åœ¨å®ä¾‹åŒ–æ—¶ä¸ºå¯¹è±¡åˆå§‹åŒ–è‡ªå·±ç‹¬æœ‰çš„ç‰¹å¾(ä¸èƒ½æœ‰è¿”å›å€¼) å›› å±æ€§æŸ¥æ‰¾å±æ€§æŸ¥æ‰¾å’Œä¹‹å‰å­¦çš„åç§°ç©ºé—´æŸ¥æ‰¾é¡ºåºé€»è¾‘ä¸€æ ·,é¦–å…ˆåœ¨å¯¹è±¡çš„åç§°ç©ºé—´é‡Œé¢æŸ¥æ‰¾,æ²¡æœ‰çš„è¯å»ç±»åç§°ç©ºé—´æŸ¥æ‰¾,ä½†æ˜¯ä¸ä¼šå»å…¨å±€åç§°ç©ºé—´æŸ¥æ‰¾å¯¹è±¡çš„å±æ€§. ç±»ä¸­å®šä¹‰çš„å˜é‡æ˜¯æ‰€æœ‰å¯¹è±¡å…±äº«çš„,å¯¹è±¡å¯ä»¥ä½¿ç”¨,ç±»ä¹Ÿå¯ä»¥ä½¿ç”¨,ç±»ä¸€æ—¦æ”¹å˜è‡ªå·±çš„å±æ€§çš„å€¼,æ‰€æœ‰çš„å¯¹è±¡ä¹Ÿä¼šéšä¹‹æ”¹å˜. äº” ç»‘å®šæ–¹æ³•ç±»ä¸­å®šä¹‰çš„å˜é‡æ˜¯ç±»çš„æ•°æ®å±æ€§,ç±»å’Œå¯¹è±¡éƒ½å¯ä»¥ä½¿ç”¨,å¹¶ä¸”å±æ€§çš„å€¼éƒ½æŒ‡å‘ä¸€ä¸ªå†…å­˜åœ°å€; ç±»ä¸­å®šä¹‰çš„å‡½æ•°æ˜¯ç±»çš„å‡½æ•°å±æ€§,ç±»å’Œå¯¹è±¡éƒ½å¯ä»¥è°ƒç”¨,ç±»æ¥è°ƒç”¨çš„å°±æ˜¯ä¸€ä¸ªæ™®é€šçš„å‡½æ•°,ä½†ç±»ä¸­å®šä¹‰çš„å‡½æ•°éƒ½æ˜¯ç”¨æ¥ç»™å¯¹è±¡ç”¨çš„,è€Œä¸”æ˜¯ç»‘å®šç»™å¯¹è±¡çš„. ç±»çš„å‡½æ•°:è¯¥ä¼ å‡ ä¸ªå‚æ•°å°±ä¼ å‡ ä¸ª ç»‘å®šæ–¹æ³•,æŒ‡å‘ç±»çš„å‡½æ•°:ç‰¹æ®Šä¹‹å¤„æ˜¯ç»‘å®šç»™å“ªä¸ªå¯¹è±¡å°±åº”è¯¥ç”±å“ªä¸ªå¯¹è±¡æ¥è°ƒç”¨,è°ƒç”¨çš„æ—¶å€™å°±ä¼šæŠŠå¯¹è±¡æœ¬èº«å½“åšç¬¬ä¸€ä¸ªå‚æ•°è‡ªåŠ¨ä¼ å…¥. å…­ ä¸€åˆ‡çš†å¯¹è±¡åœ¨python3ä¸­ç»Ÿä¸€äº†ç±»å’Œç±»å‹çš„æ¦‚å¿µ,å°±æ˜¯è¯´ä¸€ä¸ªç±»ç­‰äºä¸€ç§ç±»å‹,æ¯”å¦‚pythonä¸­çš„æ•°æ®ç±»å‹,æˆ‘ä»¬ä¹Ÿå¯ä»¥å®šä¹‰å±äºè‡ªå·±çš„ç±» 12345class muSibii: passmusibii = muSibii()print(type(musibii))# ç»“æœ &lt;class '__main__.muSibii'&gt;]]></content>
      <categories>
        <category>Python</category>
      </categories>
      <tags>
        <tag>é¢å‘å¯¹è±¡</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ä¸€é¦–æ²‰ä¸‹æ¥ç‰¹åˆ«å¥½å¬çš„æ­Œ]]></title>
    <url>%2F2018%2F10%2F19%2F%E4%B8%80%E9%A6%96%E6%B2%89%E4%B8%8B%E6%9D%A5%E7%89%B9%E5%88%AB%E5%A5%BD%E5%90%AC%E7%9A%84%E6%AD%8C%2F</url>
    <content type="text"><![CDATA[æœ€è¿‘ä¸€ç›´åœ¨å•æ›²å¾ªç¯ è…°ä¹é˜Ÿçš„ã€Šä¸€ä¸ªçŸ­ç¯‡ã€‹ ã€Šä¸€ä¸ªçŸ­ç¯‡ã€‹ ä½œè¯ï¼šåˆ˜å¼¢ ä½œæ›²ï¼šæ¨ç»æ˜† æ—‹è½¬ è·³è·ƒå–” ä»–æ„Ÿåˆ°æ¯æ¡è·¯éƒ½åœ¨å¤´ç—› æ–°é²œçš„å¸•ç‰¹é‡Œå…‹æ»¡è„‘å­ éƒ½æ˜¯å¼€æ‹“çš„è‡ªæ…°å™¨ é‚£äº›ç”·äººçˆ±çš„ç”·äººçˆ±å¸‚æ”¿ å¸‚æ”¿çˆ±å¸‚æ°‘ å¸‚æ°‘çˆ±æµè¿ æ—‹è½¬ è·³è·ƒå–” ä»–æ„Ÿåˆ°é£é¸Ÿä»¬ä¹Ÿåœ¨å¤´ç—› å†’ç‰Œçš„å¸•ç‰¹é‡Œå…‹æ»¡è„‘å­ éƒ½æ˜¯ç¨³å¦¥çš„ç‹¬è§’æˆ é‚£äº›ç”·å­©çˆ±çš„ç”·äººçˆ±æœºå™¨ æœºå™¨çˆ±æ³•å¾‹ æ³•å¾‹æ˜¯ä½  æ·±å¤œé‡Œè¾›è’‚è•¾æ‹‰ä»¬å€’ä¸‹çš„åœ°æ–¹ ä¿ƒæˆæ•´ç‰‡è¡€çº¢çš„é«˜æ¥¼ åœ¨æä¸ä¸æä¹‹é—´æ³›èµ·æ·¡æ·¡çš„å“€ä¼¤ ä»–çš„æ¥å¤´å·²ç»è…æœ½ åˆ«æ‹…å¿ƒæ²¡æœ‰å“ªä¸€é¦–æ­Œèƒ½å¤Ÿ æŠŠè¿™ä¸ªç°å®å”±åˆ°åœ°ç‹±å» å½“ä½ è¿˜èƒ½äº«æœ‰è¿™ç§é™é»˜æˆ‘çš„è€çˆ· è¿™çƒ‚æ‘Šå°±ä¸ä¼šæ”¶åœº æ—‹è½¬ è·³è·ƒå§ ä»–æ„Ÿåˆ°è¿æ™šé£ä¹Ÿåœ¨å¤´ç—› ç‹—å¨˜å…»çš„å¸•ç‰¹é‡Œå…‹æ»¡è„‘å­ å…³äºä½“æ€çš„æ»‘ç¿”æœº ä»–è¯´è¿‡é‚£äº›å¥³äººçˆ±çš„ç”·äººçˆ±èè‰ èè‰çˆ±åŒ…åŒ… åŒ…åŒ…çˆ±è´§å¸ ä»–åœ¨é«˜çº§å ¡å’çš„æ–¹é’ˆé‡Œèµ°å‡º å¸¦æ¥å¤§ä¼šçš„æ¶ˆæ¯ åœ¨å¹¼çŠ¬å’Œåœ°çš®å•†çš„å¾ç¨‹é‡Œ ä»–æ˜¯å‘è¾¾çš„è‚¯å®šå¥ ç­‰ä»–å’Œä»–ä»¬ ä»–ä»¬å’Œæ‰€æœ‰äººä¹‹é—´ éƒ½æä¸æ¥ä¿¡ä»»çš„æ—¶å€™ åªè¦å†¬å’Œå¥¹çš„å§¨å¦ˆ ä»æ²¡æœ‰ç†„ç¯çš„çª—å£ æ— å£°çœºæœ› è¿™å¤œæ´¾å¯¹ å°±è¦æ•£åœº è¿™å¤œæ´¾å¯¹ å°±è¦æ•£åœº è¿™å¤œæ´¾å¯¹ å°±è¦æ•£åœº è¿™å¤œæ´¾å¯¹ å°±è¦æ•£åœº å¹½æš—çš„æœ€é«˜é¢‘é“è¿˜åœ¨ ä¸ºå…¨åŸé®ç›–ä¸‹ä¸€ç™¾å¹´çš„æ˜‚è´µè°œåº• ä»–å€šé åœ¨ä»¤äººå®³ç¾çš„ç¤¼å“å †é‡Œ å†‰å†‰ç¡å» å¹½æš—çš„æœ€é«˜é¢‘é“è¿˜åœ¨ ä¸ºå…¨åŸé®ç›–ä¸‹ä¸€ç™¾å¹´çš„æ˜‚è´µè°œåº• ä»–ä¾é åœ¨ä»¤äººå®³ç¾çš„ç¤¼å“å †é‡Œ å†‰å†‰ç¡å» å¹½æš—çš„æœ€é«˜é¢‘é“è¿˜åœ¨ ä¸ºå…¨åŸé®ç›–ä¸‹ä¸€ç™¾å¹´çš„æ˜‚è´µè°œåº• ä»–ä¾é åœ¨ä»¤äººå®³ç¾çš„ç¤¼å“å †é‡Œ å†‰å†‰ç¡å»]]></content>
      <categories>
        <category>Music</category>
      </categories>
      <tags>
        <tag>å‘å–Š</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[è®¡ç®—æœºç¡¬ä»¶åŸºç¡€]]></title>
    <url>%2F2018%2F10%2F19%2F%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%A1%AC%E4%BB%B6%E5%9F%BA%E7%A1%80%2F</url>
    <content type="text"><![CDATA[ä¸€ è®¡ç®—æœºåŸºæœ¬ç»„æˆç›®å‰å¸‚é¢ä¸Šçš„è®¡ç®—æœºå‡ ä¹éƒ½æ˜¯å†¯è¯ºä¾æ›¼ä½“ç³»è®¡ç®—æœºï¼Œå†¯Â·è¯ºä¾æ›¼è®¡ç®—æœºä½¿ç”¨å†¯è¯ºä¾æ›¼ä½“ç³»æœºæ„çš„ç”µå­æ•°å­—è®¡ç®—æœºã€‚1945å¹´6æœˆï¼Œå†¯Â·è¯ºä¾æ›¼æå‡ºäº†åœ¨æ•°å­—è®¡ç®—æœºå†…éƒ¨çš„å­˜å‚¨å™¨ä¸­å­˜æ”¾ç¨‹åºçš„æ¦‚å¿µï¼Œè¿™æ˜¯æ‰€æœ‰ç°ä»£ç”µå­è®¡ç®—æœºçš„æœ«ç­ï¼Œè¢«ç§°ä¸ºâ€œå†¯Â·è¯ºä¾æ›¼ç»“æ„â€ï¼ŒæŒ‰ç…§è¿™ç§ç»“æ„æ„é€ çš„ç”µè„‘ç§°ä¸ºå­˜å‚¨ç¨‹åºè®¡ç®—æœºï¼Œåˆç§°ä¸ºé€šç”¨è®¡ç®—æœºã€‚ å†¯Â·è¯ºä¾æ›¼ä½“ç³»çš„è®¡ç®—æœºçš„ç‰¹ç‚¹æ˜¯ï¼šç¨‹åºä»¥äºŒè¿›åˆ¶ä»£ç çš„å½¢å¼å­˜æ”¾åœ¨å­˜å‚¨å™¨ä¸­ï¼›æ‰€æœ‰çš„æŒ‡ä»¤éƒ½æ˜¯ç”±æ“ä½œç å’Œåœ°å€ç ç»„æˆï¼›æŒ‡ä»¤åœ¨å…¶å­˜å‚¨è¿‡ç¨‹ä¸­æŒ‰ç…§æ‰§è¡Œçš„é¡ºåºè¿›è¡Œå­˜å‚¨ï¼›ä»¥è¿ç®—å™¨å’Œæ§åˆ¶å™¨ä½œä¸ºè®¡ç®—æœºç»“æ„çš„ä¸­å¿ƒç­‰ã€‚å†¯è¯ºä¾æ›¼è®¡ç®—æœºå¹¿æ³›åº”ç”¨äºæ•°æ®çš„å¤„ç†å’Œæ§åˆ¶æ–¹é¢ã€‚ å†¯è¯ºä¾æ›¼ç†è®ºçš„è¦ç‚¹æ˜¯ï¼šæ•°å­—è®¡ç®—æœºçš„æ•°åˆ¶é‡‡ç”¨äºŒè¿›åˆ¶ï¼›è®¡ç®—æœºåº”è¯¥æŒ‰ç…§ç¨‹åºé¡ºåºæ‰§è¡Œã€‚ æ ¹æ®å†¯è¯ºä¾æ›¼ä½“ç³»ç»“æ„ç»„æˆçš„è®¡ç®—æœºï¼Œå¿…é¡»å…·æœ‰å¦‚ä¸‹åŠŸèƒ½ï¼š æŠŠéœ€è¦çš„ç¨‹åºå’Œæ•°æ®é€è‡³è®¡ç®—æœºä¸­ã€‚ å¿…é¡»å…·æœ‰é•¿æœŸè®°å¿†ç¨‹åºã€æ•°æ®ã€ä¸­é—´ç»“æœåŠæœ€ç»ˆè¿ç®—ç»“æœçš„èƒ½åŠ›ã€‚ èƒ½å¤Ÿå®Œæˆå„ç§ç®—æœ¯ã€é€»è¾‘è¿ç®—å’Œæ•°æ®ä¼ é€ç­‰æ•°æ®åŠ å·¥å¤„ç†çš„èƒ½åŠ›ã€‚ èƒ½å¤Ÿæ ¹æ®éœ€è¦æ§åˆ¶ç¨‹åºèµ°å‘ï¼Œå¹¶èƒ½æ ¹æ®æŒ‡ä»¤æ§åˆ¶æœºå™¨çš„å„éƒ¨ä»¶åè°ƒæ“ä½œã€‚ èƒ½å¤ŸæŒ‰ç…§è¦æ±‚å°†å¤„ç†ç»“æœè¾“å‡ºç»™ç”¨æˆ·ã€‚ ä¸ºäº†å®Œæˆä»¥ä¸ŠåŠŸèƒ½ï¼Œè®¡ç®—æœºå¿…é¡»å…·å¤‡ä»¥ä¸‹äº”å¤§åŸºæœ¬ç»„æˆéƒ¨ä»¶ï¼š æ§åˆ¶å™¨ï¼šè®¡ç®—æœºçš„æŒ‡æŒ¥ç³»ç»Ÿã€‚æ§åˆ¶å™¨é€šè¿‡æ•°æ®åœ°å€æ¥è®¿é—®å­˜å‚¨å™¨ï¼Œä»å­˜å‚¨å™¨ä¸­å–å‡ºæŒ‡ä»¤ï¼Œç»è¿‡ç¼–è¯‘å™¨ç¼–è¯‘æˆ–è§£é‡Šå™¨è§£é‡Šåï¼Œæ ¹æ®ç»“æœå¾—å‡ºç›¸åº”çš„æ“ä½œä¿¡å·å¹¶ä½œç”¨äºå…¶ä»–éƒ¨ä»¶ï¼Œä½¿å¾—å„éƒ¨ä»¶åœ¨æ§åˆ¶å™¨çš„ä¸¥æ ¼æ§åˆ¶ä¸‹äº’ç›¸åè°ƒçš„å·¥ä½œã€‚ è¿ç®—å™¨ï¼šå®ç°ç®—æœ¯è¿ç®—å’Œé€»è¾‘è¿ç®—çš„éƒ¨ä»¶ã€‚ å­˜å‚¨å™¨ï¼šè®¡ç®—æœºç”¨æ¥å­˜å‚¨æ‰€æœ‰æ•°æ®å’Œç¨‹åºçš„è®°å¿†éƒ¨ä»¶ã€‚å®ƒçš„åŸºæœ¬åŠŸèƒ½æ˜¯æŒ‰ç…§æŒ‡å®šçš„å­˜å‚¨åœ°å€å­˜ï¼ˆå†™ï¼‰å…¥æˆ–å–ï¼ˆè¯»ï¼‰å‡ºæ•°æ®ã€‚ è¾“å…¥è®¾å¤‡ï¼šæ˜¯å‘è®¡ç®—æœºä¸­è¾“å…¥ä¿¡æ¯ï¼ˆç¨‹åºã€æ•°æ®ã€å£°éŸ³ã€æ–‡å­—ã€å›¾å½¢ã€å›¾åƒç­‰ï¼‰çš„è®¾å¤‡ã€‚å¸¸è§çš„è¾“å…¥è®¾å¤‡æœ‰ï¼šé”®ç›˜ã€é¼ æ ‡ã€å›¾å½¢æ‰«æä»ªã€è§¦æ‘¸å±ç­‰ã€‚ è¾“å‡ºè®¾å¤‡ï¼šä¸»è¦æœ‰æ˜¾ç¤ºå™¨ã€æ‰“å°æœºå’Œç»˜å›¾ä»ªç­‰ã€‚ ç°ä»£è®¡ç®—æœºå°†ä¸Šè¿°äº”å¤§éƒ¨åˆ†åˆ†ä¸ºä¸‰å¤§æ ¸å¿ƒéƒ¨ä»¶ï¼š CPUï¼ˆæ§åˆ¶å•å…ƒ+ç®—æ•°é€»è¾‘å•å…ƒï¼‰ ä¸»å­˜å‚¨å™¨ è¾“å…¥è¾“å‡ºè®¾å¤‡ è¿™å‡ ä¸ªéƒ¨ä»¶çš„ç›¸å…³æ€§å¦‚ä¸‹ï¼š äºŒ ç¼–ç¨‹ä¸è®¡ç®—æœºç¡¬ä»¶çš„å…³ç³»ä¸ºäº†ä½¿è®¡ç®—æœºèƒ½å¤Ÿç†è§£äººçš„æ„å›¾ï¼Œäººç±»å°±å¿…é¡»å°†éœ€è¦è§£å†³çš„é—®é¢˜çš„æ€è·¯ã€æ–¹æ³•å’Œæ‰‹æ®µé€šè¿‡è®¡ç®—æœºèƒ½å¤Ÿç†è§£çš„å½¢å¼å‘Šè¯‰è®¡ç®—æœºï¼Œä½¿å¾—è®¡ç®—æœºèƒ½å¤Ÿæ ¹æ®äººçš„æŒ‡ä»¤ä¸€æ­¥ä¸€æ­¥å»å·¥ä½œï¼Œå®ŒæˆæŸç§ç‰¹å®šçš„ä»»åŠ¡ã€‚è¿™ç§äººä¸è®¡ç®—æœºä½“ç³»ä¹‹é—´äº¤æµçš„è¿‡ç¨‹å°±æ˜¯ç¼–ç¨‹ã€‚ ç¼–å†™çš„ç¨‹åºç»è¿‡è¯‘ç å™¨åˆ†æåå¾—åˆ°çš„æ˜¯ä¸€å¤§å †çš„äºŒè¿›åˆ¶æŒ‡ä»¤ï¼Œè¿™äº›æŒ‡ä»¤é€šè¿‡CPUè¯»å–ä»è€Œäº§ç”Ÿç›¸åº”çš„æ“ä½œæ§åˆ¶ä¿¡å·ä½œç”¨äºå…¶ä»–çš„ç¡¬ä»¶ä¸Šï¼Œä»è€Œå®Œæˆç›¸åº”çš„åŠŸèƒ½ã€‚ ä¸‰ å†…å­˜å®¹é‡å•ä½çš„æ¢ç®—1Byte=8bit 1KB=1024Bytes 1MB=1024KB 1GB=1024MB æœ‰çš„ç”Ÿäº§å‚å®¶çš„æ¢ç®—å•ä½ä¸º1000ã€‚ å›› CPUä½æ•°å…³ç³»ç°åœ¨å¸‚é¢ä¸Šçš„è®¡ç®—æœºä¸»è¦åˆ†ä¸º32ä½å’Œ64ä½ä¸¤ç§è§„æ ¼ï¼Œä»–ä»¬ä¹‹é—´çš„åŒºåˆ«ä¸»è¦ä¸ºä»¥ä¸‹å››ç‚¹ï¼š å¤„ç†æ•°æ®èƒ½åŠ›ä¸åŒ æ”¯æŒçš„å†…å­˜ä¸åŒï¼ˆå¯»å€ä¸åŒï¼‰ æ¶æ„ä¸åŒ å¯¹é…ç½®çš„è¦æ±‚ä¸åŒ äº” æ“ä½œç³»ç»ŸåŸºç¡€ æ“ä½œç³»ç»Ÿæ˜¯ä»€ä¹ˆï¼Ÿ æ“ä½œç³»ç»Ÿï¼ˆOperating Systemï¼Œç®€ç§°OSï¼‰æ˜¯ç®¡ç†å’Œæ§åˆ¶è®¡ç®—æœºç¡¬ä»¶ä¸è½¯ä»¶èµ„æºçš„è®¡ç®—æœºç¨‹åºï¼Œæ˜¯ç›´æ¥è¿è¡Œåœ¨â€˜è£¸æœºâ€™ä¸Šçš„æœ€åŸºæœ¬çš„ç³»ç»Ÿè½¯ä»¶ï¼Œä»»ä½•å…¶ä»–è½¯ä»¶éƒ½å¿…é¡»åœ¨æ“ä½œç³»ç»Ÿçš„æ”¯æŒä¸‹æ‰èƒ½è¿è¡Œã€‚æ“ä½œç³»ç»Ÿæ˜¯ä¸€ä¸ªåè°ƒ\ç®¡ç†\æ§åˆ¶è®¡ç®—æœºç¡¬ä»¶èµ„æºä¸è½¯ä»¶èµ„æºçš„ä¸€ä¸ªæ§åˆ¶ç¨‹åºã€‚ ä¸ºä»€ä¹ˆè¦æœ‰æ“ä½œç³»ç»Ÿï¼Ÿ æ“ä½œç³»ç»Ÿæ˜¯ç”¨æˆ·å’Œè®¡ç®—æœºç¡¬ä»¶çš„æ¥å£ï¼ŒåŒæ—¶ä¹Ÿæ˜¯è®¡ç®—æœºç¡¬ä»¶å’Œå…¶ä»–è½¯ä»¶çš„æ¥å£ã€‚æ“ä½œç³»ç»Ÿçš„åŠŸèƒ½åŒ…æ‹¬ç®¡ç†è®¡ç®—æœºç³»ç»Ÿçš„ç¡¬ä»¶ã€è½¯ä»¶åŠæ•°æ®èµ„æºï¼Œæ§åˆ¶ç¨‹åºè¿è¡Œï¼Œæ”¹å–„äººæœºç•Œé¢ï¼Œä¸ºå…¶ä»–åº”ç”¨è½¯ä»¶æä¾›æ”¯æŒï¼Œè®©è®¡ç®—æœºç³»ç»Ÿæ‰€æœ‰èµ„æºæœ€å¤§é™åº¦çš„å‘æŒ¥ä½œç”¨ï¼Œæä¾›å„ç§å½¢å¼çš„ç”¨æˆ·ç•Œé¢ï¼Œä½¿ç”¨æˆ·æœ‰ä¸€ä¸ªå¥½çš„å·¥ä½œç¯å¢ƒï¼Œä¸ºå…¶ä»–è½¯ä»¶çš„å¼€å‘æä¾›å¿…è¦çš„æœåŠ¡å’Œç›¸åº”çš„æ¥å£ç­‰ã€‚å®é™…ä¸Šï¼Œç”¨æˆ·æ˜¯ä¸ç”¨æ¥è§¦æ“ä½œç³»ç»Ÿçš„ï¼Œæ“ä½œç³»ç»Ÿç®¡ç†ç€è®¡ç®—æœºçš„ç¡¬ä»¶èµ„æºï¼ŒåŒæ—¶æŒ‰ç…§åº”ç”¨ç¨‹åºçš„èµ„æºè¯·æ±‚æ¥åˆ†é…èµ„æºï¼Œå¦‚ï¼šåˆ’åˆ†CPUæ—¶é—´ã€å†…å­˜ç©ºé—´çš„å¼€è¾Ÿã€è°ƒç”¨æ‰“å°æœºç­‰ã€‚ æ“ä½œç³»ç»Ÿå°±æ˜¯ä¸ºäº†è®©ä½¿ç”¨è€…æ›´åŠ æ–¹ä¾¿çš„ä½¿ç”¨è®¡ç®—æœºç¡¬ä»¶èµ„æºå’Œè½¯ä»¶èµ„æºçš„ä¸€ä¸ªå·¥å…·ã€‚]]></content>
      <categories>
        <category>Computer Basics</category>
      </categories>
  </entry>
  <entry>
    <title><![CDATA[pythonæ¨¡å—ä¹‹re]]></title>
    <url>%2F2018%2F10%2F19%2Fpython%E6%A8%A1%E5%9D%97%E4%B9%8Bre%2F</url>
    <content type="text"><![CDATA[re æ¨¡å—åœ¨ Python ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨å†…ç½®çš„ re æ¨¡å—æ¥ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼ã€‚ æœ‰ä¸€ç‚¹éœ€è¦ç‰¹åˆ«æ³¨æ„çš„æ˜¯ï¼Œæ­£åˆ™è¡¨è¾¾å¼ä½¿ç”¨ \ å¯¹ç‰¹æ®Šå­—ç¬¦è¿›è¡Œè½¬ä¹‰ï¼Œæ¯”å¦‚ï¼Œä¸ºäº†åŒ¹é…å­—ç¬¦ä¸² â€˜python.orgâ€™ï¼Œæˆ‘ä»¬éœ€è¦ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼ &#39;python\.org&#39;ï¼Œè€Œ Python çš„å­—ç¬¦ä¸²æœ¬èº«ä¹Ÿç”¨ \ è½¬ä¹‰ï¼Œæ‰€ä»¥ä¸Šé¢çš„æ­£åˆ™è¡¨è¾¾å¼åœ¨ Python ä¸­åº”è¯¥å†™æˆ &#39;python\\.org&#39;ï¼Œè¿™ä¼šå¾ˆå®¹æ˜“é™·å…¥ \ çš„å›°æ‰°ä¸­ï¼Œå› æ­¤ï¼Œæˆ‘ä»¬å»ºè®®ä½¿ç”¨ Python çš„åŸå§‹å­—ç¬¦ä¸²ï¼Œåªéœ€åŠ ä¸€ä¸ª r å‰ç¼€ï¼Œä¸Šé¢çš„æ­£åˆ™è¡¨è¾¾å¼å¯ä»¥å†™æˆï¼š 1r&apos;python\.org&apos; re æ¨¡å—æä¾›äº†ä¸å°‘æœ‰ç”¨çš„å‡½æ•°ï¼Œç”¨ä»¥åŒ¹é…å­—ç¬¦ä¸²ï¼Œæ¯”å¦‚ï¼š compile å‡½æ•° match å‡½æ•° search å‡½æ•° findall å‡½æ•° finditer å‡½æ•° split å‡½æ•° sub å‡½æ•° subn å‡½æ•° re æ¨¡å—çš„ä¸€èˆ¬ä½¿ç”¨æ­¥éª¤å¦‚ä¸‹ï¼š ä½¿ç”¨ compile å‡½æ•°å°†æ­£åˆ™è¡¨è¾¾å¼çš„å­—ç¬¦ä¸²å½¢å¼ç¼–è¯‘ä¸ºä¸€ä¸ª Pattern å¯¹è±¡ é€šè¿‡ Pattern å¯¹è±¡æä¾›çš„ä¸€ç³»åˆ—æ–¹æ³•å¯¹æ–‡æœ¬è¿›è¡ŒåŒ¹é…æŸ¥æ‰¾ï¼Œè·å¾—åŒ¹é…ç»“æœï¼ˆä¸€ä¸ª Match å¯¹è±¡ï¼‰ æœ€åä½¿ç”¨ Match å¯¹è±¡æä¾›çš„å±æ€§å’Œæ–¹æ³•è·å¾—ä¿¡æ¯ï¼Œæ ¹æ®éœ€è¦è¿›è¡Œå…¶ä»–çš„æ“ä½œ compile å‡½æ•°compile å‡½æ•°ç”¨äºç¼–è¯‘æ­£åˆ™è¡¨è¾¾å¼ï¼Œç”Ÿæˆä¸€ä¸ª Pattern å¯¹è±¡ï¼Œå®ƒçš„ä¸€èˆ¬ä½¿ç”¨å½¢å¼å¦‚ä¸‹ï¼š 1re.compile(pattern[, flag]) å…¶ä¸­ï¼Œpattern æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²å½¢å¼çš„æ­£åˆ™è¡¨è¾¾å¼ï¼Œflag æ˜¯ä¸€ä¸ªå¯é€‰å‚æ•°ï¼Œè¡¨ç¤ºåŒ¹é…æ¨¡å¼ï¼Œæ¯”å¦‚å¿½ç•¥å¤§å°å†™ï¼Œå¤šè¡Œæ¨¡å¼ç­‰ã€‚ ä¸‹é¢ï¼Œè®©æˆ‘ä»¬çœ‹çœ‹ä¾‹å­ã€‚ 1234import re# å°†æ­£åˆ™è¡¨è¾¾å¼ç¼–è¯‘æˆ Pattern å¯¹è±¡ pattern = re.compile(r'\d+') åœ¨ä¸Šé¢ï¼Œæˆ‘ä»¬å·²å°†ä¸€ä¸ªæ­£åˆ™è¡¨è¾¾å¼ç¼–è¯‘æˆ Pattern å¯¹è±¡ï¼Œæ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å°±å¯ä»¥åˆ©ç”¨ pattern çš„ä¸€ç³»åˆ—æ–¹æ³•å¯¹æ–‡æœ¬è¿›è¡ŒåŒ¹é…æŸ¥æ‰¾äº†ã€‚Pattern å¯¹è±¡çš„ä¸€äº›å¸¸ç”¨æ–¹æ³•ä¸»è¦æœ‰ï¼š match æ–¹æ³• search æ–¹æ³• findall æ–¹æ³• finditer æ–¹æ³• split æ–¹æ³• sub æ–¹æ³• subn æ–¹æ³• match æ–¹æ³•match æ–¹æ³•ç”¨äºæŸ¥æ‰¾å­—ç¬¦ä¸²çš„å¤´éƒ¨ï¼ˆä¹Ÿå¯ä»¥æŒ‡å®šèµ·å§‹ä½ç½®ï¼‰ï¼Œå®ƒæ˜¯ä¸€æ¬¡åŒ¹é…ï¼Œåªè¦æ‰¾åˆ°äº†ä¸€ä¸ªåŒ¹é…çš„ç»“æœå°±è¿”å›ï¼Œè€Œä¸æ˜¯æŸ¥æ‰¾æ‰€æœ‰åŒ¹é…çš„ç»“æœã€‚å®ƒçš„ä¸€èˆ¬ä½¿ç”¨å½¢å¼å¦‚ä¸‹ï¼š 1match(string[, pos[, endpos]]) å…¶ä¸­ï¼Œstring æ˜¯å¾…åŒ¹é…çš„å­—ç¬¦ä¸²ï¼Œpos å’Œ endpos æ˜¯å¯é€‰å‚æ•°ï¼ŒæŒ‡å®šå­—ç¬¦ä¸²çš„èµ·å§‹å’Œç»ˆç‚¹ä½ç½®ï¼Œé»˜è®¤å€¼åˆ†åˆ«æ˜¯ 0 å’Œ len (å­—ç¬¦ä¸²é•¿åº¦)ã€‚å› æ­¤ï¼Œå½“ä½ ä¸æŒ‡å®š pos å’Œ endpos æ—¶ï¼Œmatch æ–¹æ³•é»˜è®¤åŒ¹é…å­—ç¬¦ä¸²çš„å¤´éƒ¨ã€‚ å½“åŒ¹é…æˆåŠŸæ—¶ï¼Œè¿”å›ä¸€ä¸ª Match å¯¹è±¡ï¼Œå¦‚æœæ²¡æœ‰åŒ¹é…ä¸Šï¼Œåˆ™è¿”å› Noneã€‚ çœ‹çœ‹ä¾‹å­ã€‚ 12345678910111213141516171819&gt;&gt;&gt; import re&gt;&gt;&gt; pattern = re.compile(r'\d+') # ç”¨äºåŒ¹é…è‡³å°‘ä¸€ä¸ªæ•°å­—&gt;&gt;&gt; m = pattern.match('one12twothree34four') # æŸ¥æ‰¾å¤´éƒ¨ï¼Œæ²¡æœ‰åŒ¹é…&gt;&gt;&gt; print mNone&gt;&gt;&gt; m = pattern.match('one12twothree34four', 2, 10) # ä»'e'çš„ä½ç½®å¼€å§‹åŒ¹é…ï¼Œæ²¡æœ‰åŒ¹é…&gt;&gt;&gt; print mNone&gt;&gt;&gt; m = pattern.match('one12twothree34four', 3, 10) # ä»'1'çš„ä½ç½®å¼€å§‹åŒ¹é…ï¼Œæ­£å¥½åŒ¹é…&gt;&gt;&gt; print m # è¿”å›ä¸€ä¸ª Match å¯¹è±¡&lt;_sre.SRE_Match object at 0x10a42aac0&gt;&gt;&gt;&gt; m.group(0) # å¯çœç•¥ 0'12'&gt;&gt;&gt; m.start(0) # å¯çœç•¥ 03&gt;&gt;&gt; m.end(0) # å¯çœç•¥ 05&gt;&gt;&gt; m.span(0) # å¯çœç•¥ 0(3, 5) åœ¨ä¸Šé¢ï¼Œå½“åŒ¹é…æˆåŠŸæ—¶è¿”å›ä¸€ä¸ª Match å¯¹è±¡ï¼Œå…¶ä¸­ï¼š group([group1, â€¦]) æ–¹æ³•ç”¨äºè·å¾—ä¸€ä¸ªæˆ–å¤šä¸ªåˆ†ç»„åŒ¹é…çš„å­—ç¬¦ä¸²ï¼Œå½“è¦è·å¾—æ•´ä¸ªåŒ¹é…çš„å­ä¸²æ—¶ï¼Œå¯ç›´æ¥ä½¿ç”¨ group() æˆ– group(0)ï¼› start([group]) æ–¹æ³•ç”¨äºè·å–åˆ†ç»„åŒ¹é…çš„å­ä¸²åœ¨æ•´ä¸ªå­—ç¬¦ä¸²ä¸­çš„èµ·å§‹ä½ç½®ï¼ˆå­ä¸²ç¬¬ä¸€ä¸ªå­—ç¬¦çš„ç´¢å¼•ï¼‰ï¼Œå‚æ•°é»˜è®¤å€¼ä¸º 0ï¼› end([group]) æ–¹æ³•ç”¨äºè·å–åˆ†ç»„åŒ¹é…çš„å­ä¸²åœ¨æ•´ä¸ªå­—ç¬¦ä¸²ä¸­çš„ç»“æŸä½ç½®ï¼ˆå­ä¸²æœ€åä¸€ä¸ªå­—ç¬¦çš„ç´¢å¼•+1ï¼‰ï¼Œå‚æ•°é»˜è®¤å€¼ä¸º 0ï¼› span([group]) æ–¹æ³•è¿”å› (start(group), end(group))ã€‚ å†çœ‹çœ‹ä¸€ä¸ªä¾‹å­ï¼š 1234567891011121314151617181920212223&gt;&gt;&gt; import re&gt;&gt;&gt; pattern = re.compile(r'([a-z]+) ([a-z]+)', re.I) # re.I è¡¨ç¤ºå¿½ç•¥å¤§å°å†™&gt;&gt;&gt; m = pattern.match('Hello World Wide Web')&gt;&gt;&gt; print m # åŒ¹é…æˆåŠŸï¼Œè¿”å›ä¸€ä¸ª Match å¯¹è±¡&lt;_sre.SRE_Match object at 0x10bea83e8&gt;&gt;&gt;&gt; m.group(0) # è¿”å›åŒ¹é…æˆåŠŸçš„æ•´ä¸ªå­ä¸²'Hello World'&gt;&gt;&gt; m.span(0) # è¿”å›åŒ¹é…æˆåŠŸçš„æ•´ä¸ªå­ä¸²çš„ç´¢å¼•(0, 11)&gt;&gt;&gt; m.group(1) # è¿”å›ç¬¬ä¸€ä¸ªåˆ†ç»„åŒ¹é…æˆåŠŸçš„å­ä¸²'Hello'&gt;&gt;&gt; m.span(1) # è¿”å›ç¬¬ä¸€ä¸ªåˆ†ç»„åŒ¹é…æˆåŠŸçš„å­ä¸²çš„ç´¢å¼•(0, 5)&gt;&gt;&gt; m.group(2) # è¿”å›ç¬¬äºŒä¸ªåˆ†ç»„åŒ¹é…æˆåŠŸçš„å­ä¸²'World'&gt;&gt;&gt; m.span(2) # è¿”å›ç¬¬äºŒä¸ªåˆ†ç»„åŒ¹é…æˆåŠŸçš„å­ä¸²(6, 11)&gt;&gt;&gt; m.groups() # ç­‰ä»·äº (m.group(1), m.group(2), ...)('Hello', 'World')&gt;&gt;&gt; m.group(3) # ä¸å­˜åœ¨ç¬¬ä¸‰ä¸ªåˆ†ç»„Traceback (most recent call last): File "&lt;stdin&gt;", line 1, in &lt;module&gt;IndexError: no such group search æ–¹æ³•search æ–¹æ³•ç”¨äºæŸ¥æ‰¾å­—ç¬¦ä¸²çš„ä»»ä½•ä½ç½®ï¼Œå®ƒä¹Ÿæ˜¯ä¸€æ¬¡åŒ¹é…ï¼Œåªè¦æ‰¾åˆ°äº†ä¸€ä¸ªåŒ¹é…çš„ç»“æœå°±è¿”å›ï¼Œè€Œä¸æ˜¯æŸ¥æ‰¾æ‰€æœ‰åŒ¹é…çš„ç»“æœï¼Œå®ƒçš„ä¸€èˆ¬ä½¿ç”¨å½¢å¼å¦‚ä¸‹ï¼š 1search(string[, pos[, endpos]]) å…¶ä¸­ï¼Œstring æ˜¯å¾…åŒ¹é…çš„å­—ç¬¦ä¸²ï¼Œpos å’Œ endpos æ˜¯å¯é€‰å‚æ•°ï¼ŒæŒ‡å®šå­—ç¬¦ä¸²çš„èµ·å§‹å’Œç»ˆç‚¹ä½ç½®ï¼Œé»˜è®¤å€¼åˆ†åˆ«æ˜¯ 0 å’Œ len (å­—ç¬¦ä¸²é•¿åº¦)ã€‚ å½“åŒ¹é…æˆåŠŸæ—¶ï¼Œè¿”å›ä¸€ä¸ª Match å¯¹è±¡ï¼Œå¦‚æœæ²¡æœ‰åŒ¹é…ä¸Šï¼Œåˆ™è¿”å› Noneã€‚ è®©æˆ‘ä»¬çœ‹çœ‹ä¾‹å­ï¼š 1234567891011121314&gt;&gt;&gt; import re&gt;&gt;&gt; pattern = re.compile('\d+')&gt;&gt;&gt; m = pattern.search('one12twothree34four') # è¿™é‡Œå¦‚æœä½¿ç”¨ match æ–¹æ³•åˆ™ä¸åŒ¹é…&gt;&gt;&gt; m&lt;_sre.SRE_Match object at 0x10cc03ac0&gt;&gt;&gt;&gt; m.group()'12'&gt;&gt;&gt; m = pattern.search('one12twothree34four', 10, 30) # æŒ‡å®šå­—ç¬¦ä¸²åŒºé—´&gt;&gt;&gt; m&lt;_sre.SRE_Match object at 0x10cc03b28&gt;&gt;&gt;&gt; m.group()'34'&gt;&gt;&gt; m.span()(13, 15) å†æ¥çœ‹ä¸€ä¸ªä¾‹å­ï¼š 123456789101112131415# -*- coding: utf-8 -*-import re# å°†æ­£åˆ™è¡¨è¾¾å¼ç¼–è¯‘æˆ Pattern å¯¹è±¡pattern = re.compile(r'\d+') # ä½¿ç”¨ search() æŸ¥æ‰¾åŒ¹é…çš„å­ä¸²ï¼Œä¸å­˜åœ¨åŒ¹é…çš„å­ä¸²æ—¶å°†è¿”å› None # è¿™é‡Œä½¿ç”¨ match() æ— æ³•æˆåŠŸåŒ¹é… m = pattern.search('hello 123456 789') if m: # ä½¿ç”¨ Match è·å¾—åˆ†ç»„ä¿¡æ¯ print 'matching string:',m.group() print 'position:',m.span() æ‰§è¡Œç»“æœï¼š 12matching string: 123456position: (6, 12) findall æ–¹æ³•ä¸Šé¢çš„ match å’Œ search æ–¹æ³•éƒ½æ˜¯ä¸€æ¬¡åŒ¹é…ï¼Œåªè¦æ‰¾åˆ°äº†ä¸€ä¸ªåŒ¹é…çš„ç»“æœå°±è¿”å›ã€‚ç„¶è€Œï¼Œåœ¨å¤§å¤šæ•°æ—¶å€™ï¼Œæˆ‘ä»¬éœ€è¦æœç´¢æ•´ä¸ªå­—ç¬¦ä¸²ï¼Œè·å¾—æ‰€æœ‰åŒ¹é…çš„ç»“æœã€‚ findall æ–¹æ³•çš„ä½¿ç”¨å½¢å¼å¦‚ä¸‹ï¼š 1findall(string[, pos[, endpos]]) å…¶ä¸­ï¼Œstring æ˜¯å¾…åŒ¹é…çš„å­—ç¬¦ä¸²ï¼Œpos å’Œ endpos æ˜¯å¯é€‰å‚æ•°ï¼ŒæŒ‡å®šå­—ç¬¦ä¸²çš„èµ·å§‹å’Œç»ˆç‚¹ä½ç½®ï¼Œé»˜è®¤å€¼åˆ†åˆ«æ˜¯ 0 å’Œ len (å­—ç¬¦ä¸²é•¿åº¦)ã€‚ findall ä»¥åˆ—è¡¨å½¢å¼è¿”å›å…¨éƒ¨èƒ½åŒ¹é…çš„å­ä¸²ï¼Œå¦‚æœæ²¡æœ‰åŒ¹é…ï¼Œåˆ™è¿”å›ä¸€ä¸ªç©ºåˆ—è¡¨ã€‚ çœ‹çœ‹ä¾‹å­ï¼š 12345678import repattern = re.compile(r'\d+') # æŸ¥æ‰¾æ•°å­—result1 = pattern.findall('hello 123456 789')result2 = pattern.findall('one1two2three3four4', 0, 10)print result1print result2 æ‰§è¡Œç»“æœï¼š 12[&apos;123456&apos;, &apos;789&apos;][&apos;1&apos;, &apos;2&apos;] finditer æ–¹æ³•finditer æ–¹æ³•çš„è¡Œä¸ºè·Ÿ findall çš„è¡Œä¸ºç±»ä¼¼ï¼Œä¹Ÿæ˜¯æœç´¢æ•´ä¸ªå­—ç¬¦ä¸²ï¼Œè·å¾—æ‰€æœ‰åŒ¹é…çš„ç»“æœã€‚ä½†å®ƒè¿”å›ä¸€ä¸ªé¡ºåºè®¿é—®æ¯ä¸€ä¸ªåŒ¹é…ç»“æœï¼ˆMatch å¯¹è±¡ï¼‰çš„è¿­ä»£å™¨ã€‚ çœ‹çœ‹ä¾‹å­ï¼š 12345678910111213141516171819# -*- coding: utf-8 -*-import repattern = re.compile(r'\d+')result_iter1 = pattern.finditer('hello 123456 789')result_iter2 = pattern.finditer('one1two2three3four4', 0, 10)print type(result_iter1)print type(result_iter2)print 'result1...'for m1 in result_iter1: # m1 æ˜¯ Match å¯¹è±¡ print 'matching string: &#123;&#125;, position: &#123;&#125;'.format(m1.group(), m1.span())print 'result2...'for m2 in result_iter2: print 'matching string: &#123;&#125;, position: &#123;&#125;'.format(m2.group(), m2.span()) æ‰§è¡Œç»“æœï¼š 12345678&lt;type &apos;callable-iterator&apos;&gt;&lt;type &apos;callable-iterator&apos;&gt;result1...matching string: 123456, position: (6, 12)matching string: 789, position: (13, 16)result2...matching string: 1, position: (3, 4)matching string: 2, position: (7, 8) split æ–¹æ³•split æ–¹æ³•æŒ‰ç…§èƒ½å¤ŸåŒ¹é…çš„å­ä¸²å°†å­—ç¬¦ä¸²åˆ†å‰²åè¿”å›åˆ—è¡¨ï¼Œå®ƒçš„ä½¿ç”¨å½¢å¼å¦‚ä¸‹ï¼š 1split(string[, maxsplit]) å…¶ä¸­ï¼Œmaxsplit ç”¨äºæŒ‡å®šæœ€å¤§åˆ†å‰²æ¬¡æ•°ï¼Œä¸æŒ‡å®šå°†å…¨éƒ¨åˆ†å‰²ã€‚ çœ‹çœ‹ä¾‹å­ï¼š 1234import rep = re.compile(r'[\s\,\;]+')print p.split('a,b;; c d') æ‰§è¡Œç»“æœï¼š 1[&apos;a&apos;, &apos;b&apos;, &apos;c&apos;, &apos;d&apos;] sub æ–¹æ³•sub æ–¹æ³•ç”¨äºæ›¿æ¢ã€‚å®ƒçš„ä½¿ç”¨å½¢å¼å¦‚ä¸‹ï¼š 1sub(repl, string[, count]) å…¶ä¸­ï¼Œrepl å¯ä»¥æ˜¯å­—ç¬¦ä¸²ä¹Ÿå¯ä»¥æ˜¯ä¸€ä¸ªå‡½æ•°ï¼š å¦‚æœ repl æ˜¯å­—ç¬¦ä¸²ï¼Œåˆ™ä¼šä½¿ç”¨ repl å»æ›¿æ¢å­—ç¬¦ä¸²æ¯ä¸€ä¸ªåŒ¹é…çš„å­ä¸²ï¼Œå¹¶è¿”å›æ›¿æ¢åçš„å­—ç¬¦ä¸²ï¼Œå¦å¤–ï¼Œrepl è¿˜å¯ä»¥ä½¿ç”¨ \id çš„å½¢å¼æ¥å¼•ç”¨åˆ†ç»„ï¼Œä½†ä¸èƒ½ä½¿ç”¨ç¼–å· 0ï¼› å¦‚æœ repl æ˜¯å‡½æ•°ï¼Œè¿™ä¸ªæ–¹æ³•åº”å½“åªæ¥å—ä¸€ä¸ªå‚æ•°ï¼ˆMatch å¯¹è±¡ï¼‰ï¼Œå¹¶è¿”å›ä¸€ä¸ªå­—ç¬¦ä¸²ç”¨äºæ›¿æ¢ï¼ˆè¿”å›çš„å­—ç¬¦ä¸²ä¸­ä¸èƒ½å†å¼•ç”¨åˆ†ç»„ï¼‰ã€‚ count ç”¨äºæŒ‡å®šæœ€å¤šæ›¿æ¢æ¬¡æ•°ï¼Œä¸æŒ‡å®šæ—¶å…¨éƒ¨æ›¿æ¢ã€‚ çœ‹çœ‹ä¾‹å­ï¼š 123456789101112import rep = re.compile(r'(\w+) (\w+)')s = 'hello 123, hello 456'def func(m): return 'hi' + ' ' + m.group(2)print p.sub(r'hello world', s) # ä½¿ç”¨ 'hello world' æ›¿æ¢ 'hello 123' å’Œ 'hello 456'print p.sub(r'\2 \1', s) # å¼•ç”¨åˆ†ç»„print p.sub(func, s)print p.sub(func, s, 1) # æœ€å¤šæ›¿æ¢ä¸€æ¬¡ æ‰§è¡Œç»“æœï¼š 1234hello world, hello world123 hello, 456 hellohi 123, hi 456hi 123, hello 456 subn æ–¹æ³•subn æ–¹æ³•è·Ÿ sub æ–¹æ³•çš„è¡Œä¸ºç±»ä¼¼ï¼Œä¹Ÿç”¨äºæ›¿æ¢ã€‚å®ƒçš„ä½¿ç”¨å½¢å¼å¦‚ä¸‹ï¼š 1subn(repl, string[, count]) å®ƒè¿”å›ä¸€ä¸ªå…ƒç»„ï¼š 1(sub(repl, string[, count]), æ›¿æ¢æ¬¡æ•°) å…ƒç»„æœ‰ä¸¤ä¸ªå…ƒç´ ï¼Œç¬¬ä¸€ä¸ªå…ƒç´ æ˜¯ä½¿ç”¨ sub æ–¹æ³•çš„ç»“æœï¼Œç¬¬äºŒä¸ªå…ƒç´ è¿”å›åŸå­—ç¬¦ä¸²è¢«æ›¿æ¢çš„æ¬¡æ•°ã€‚ çœ‹çœ‹ä¾‹å­ï¼š 123456789101112import rep = re.compile(r&apos;(\w+) (\w+)&apos;)s = &apos;hello 123, hello 456&apos;def func(m): return &apos;hi&apos; + &apos; &apos; + m.group(2)print p.subn(r&apos;hello world&apos;, s)print p.subn(r&apos;\2 \1&apos;, s)print p.subn(func, s)print p.subn(func, s, 1) æ‰§è¡Œç»“æœï¼š 1234(&apos;hello world, hello world&apos;, 2)(&apos;123 hello, 456 hello&apos;, 2)(&apos;hi 123, hi 456&apos;, 2)(&apos;hi 123, hello 456&apos;, 1) å…¶ä»–å‡½æ•°äº‹å®ä¸Šï¼Œä½¿ç”¨ compile å‡½æ•°ç”Ÿæˆçš„ Pattern å¯¹è±¡çš„ä¸€ç³»åˆ—æ–¹æ³•è·Ÿ re æ¨¡å—çš„å¤šæ•°å‡½æ•°æ˜¯å¯¹åº”çš„ï¼Œä½†åœ¨ä½¿ç”¨ä¸Šæœ‰ç»†å¾®å·®åˆ«ã€‚ match å‡½æ•°match å‡½æ•°çš„ä½¿ç”¨å½¢å¼å¦‚ä¸‹ï¼š 1re.match(pattern, string[, flags]): å…¶ä¸­ï¼Œpattern æ˜¯æ­£åˆ™è¡¨è¾¾å¼çš„å­—ç¬¦ä¸²å½¢å¼ï¼Œæ¯”å¦‚ \d+, [a-z]+ã€‚ è€Œ Pattern å¯¹è±¡çš„ match æ–¹æ³•ä½¿ç”¨å½¢å¼æ˜¯ï¼š 1match(string[, pos[, endpos]]) å¯ä»¥çœ‹åˆ°ï¼Œmatch å‡½æ•°ä¸èƒ½æŒ‡å®šå­—ç¬¦ä¸²çš„åŒºé—´ï¼Œå®ƒåªèƒ½æœç´¢å¤´éƒ¨ï¼Œçœ‹çœ‹ä¾‹å­ï¼š 12345678910111213import rem1 = re.match(r'\d+', 'One12twothree34four')if m1: print 'matching string:',m1.group()else: print 'm1 is:',m1m2 = re.match(r'\d+', '12twothree34four')if m2: print 'matching string:', m2.group()else: print 'm2 is:',m2 æ‰§è¡Œç»“æœï¼š 12m1 is: Nonematching string: 12 search å‡½æ•°search å‡½æ•°çš„ä½¿ç”¨å½¢å¼å¦‚ä¸‹ï¼š 1re.search(pattern, string[, flags]) search å‡½æ•°ä¸èƒ½æŒ‡å®šå­—ç¬¦ä¸²çš„æœç´¢åŒºé—´ï¼Œç”¨æ³•è·Ÿ Pattern å¯¹è±¡çš„ search æ–¹æ³•ç±»ä¼¼ã€‚ findall å‡½æ•°findall å‡½æ•°çš„ä½¿ç”¨å½¢å¼å¦‚ä¸‹ï¼š 1re.findall(pattern, string[, flags]) findall å‡½æ•°ä¸èƒ½æŒ‡å®šå­—ç¬¦ä¸²çš„æœç´¢åŒºé—´ï¼Œç”¨æ³•è·Ÿ Pattern å¯¹è±¡çš„ findall æ–¹æ³•ç±»ä¼¼ã€‚ çœ‹çœ‹ä¾‹å­ï¼š 123456import reprint re.findall(r'\d+', 'hello 12345 789')# è¾“å‡º['12345', '789'] finditer å‡½æ•°finditer å‡½æ•°çš„ä½¿ç”¨æ–¹æ³•è·Ÿ Pattern çš„ finditer æ–¹æ³•ç±»ä¼¼ï¼Œå½¢å¼å¦‚ä¸‹ï¼š 1re.finditer(pattern, string[, flags]) split å‡½æ•°split å‡½æ•°çš„ä½¿ç”¨å½¢å¼å¦‚ä¸‹ï¼š 1re.split(pattern, string[, maxsplit]) sub å‡½æ•°sub å‡½æ•°çš„ä½¿ç”¨å½¢å¼å¦‚ä¸‹ï¼š 1re.sub(pattern, repl, string[, count]) subn å‡½æ•°subn å‡½æ•°çš„ä½¿ç”¨å½¢å¼å¦‚ä¸‹ï¼š 1re.subn(pattern, repl, string[, count]) åˆ°åº•ç”¨å“ªç§æ–¹å¼ä»ä¸Šæ–‡å¯ä»¥çœ‹åˆ°ï¼Œä½¿ç”¨ re æ¨¡å—æœ‰ä¸¤ç§æ–¹å¼ï¼š ä½¿ç”¨ re.compile å‡½æ•°ç”Ÿæˆä¸€ä¸ª Pattern å¯¹è±¡ï¼Œç„¶åä½¿ç”¨ Pattern å¯¹è±¡çš„ä¸€ç³»åˆ—æ–¹æ³•å¯¹æ–‡æœ¬è¿›è¡ŒåŒ¹é…æŸ¥æ‰¾ï¼› ç›´æ¥ä½¿ç”¨ re.match, re.search å’Œ re.findall ç­‰å‡½æ•°ç›´æ¥å¯¹æ–‡æœ¬åŒ¹é…æŸ¥æ‰¾ï¼› ä¸‹é¢ï¼Œæˆ‘ä»¬ç”¨ä¸€ä¸ªä¾‹å­å±•ç¤ºè¿™ä¸¤ç§æ–¹æ³•ã€‚ å…ˆçœ‹ç¬¬ 1 ç§ç”¨æ³•ï¼š 12345678import re# å°†æ­£åˆ™è¡¨è¾¾å¼å…ˆç¼–è¯‘æˆ Pattern å¯¹è±¡pattern = re.compile(r'\d+')print pattern.match('123, 123')print pattern.search('234, 234')print pattern.findall('345, 345') å†çœ‹ç¬¬ 2 ç§ç”¨æ³•ï¼š 12345import reprint re.match(r'\d+', '123, 123')print re.search(r'\d+', '234, 234')print re.findall(r'\d+', '345, 345') å¦‚æœä¸€ä¸ªæ­£åˆ™è¡¨è¾¾å¼éœ€è¦ç”¨åˆ°å¤šæ¬¡ï¼ˆæ¯”å¦‚ä¸Šé¢çš„ \d+ï¼‰ï¼Œåœ¨å¤šç§åœºåˆç»å¸¸éœ€è¦è¢«ç”¨åˆ°ï¼Œå‡ºäºæ•ˆç‡çš„è€ƒè™‘ï¼Œæˆ‘ä»¬åº”è¯¥é¢„å…ˆç¼–è¯‘è¯¥æ­£åˆ™è¡¨è¾¾å¼ï¼Œç”Ÿæˆä¸€ä¸ª Pattern å¯¹è±¡ï¼Œå†ä½¿ç”¨è¯¥å¯¹è±¡çš„ä¸€ç³»åˆ—æ–¹æ³•å¯¹éœ€è¦åŒ¹é…çš„æ–‡ä»¶è¿›è¡ŒåŒ¹é…ï¼›è€Œå¦‚æœç›´æ¥ä½¿ç”¨ re.match, re.search ç­‰å‡½æ•°ï¼Œæ¯æ¬¡ä¼ å…¥ä¸€ä¸ªæ­£åˆ™è¡¨è¾¾å¼ï¼Œå®ƒéƒ½ä¼šè¢«ç¼–è¯‘ä¸€æ¬¡ï¼Œæ•ˆç‡å°±ä¼šå¤§æ‰“æŠ˜æ‰£ã€‚ å› æ­¤ï¼Œæˆ‘ä»¬æ¨èä½¿ç”¨ç¬¬ 1 ç§ç”¨æ³•ã€‚ åŒ¹é…ä¸­æ–‡åœ¨æŸäº›æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬æƒ³åŒ¹é…æ–‡æœ¬ä¸­çš„æ±‰å­—ï¼Œæœ‰ä¸€ç‚¹éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œä¸­æ–‡çš„ unicode ç¼–ç èŒƒå›´ ä¸»è¦åœ¨ [\u4e00-\u9fa5]ï¼Œè¿™é‡Œè¯´ä¸»è¦æ˜¯å› ä¸ºè¿™ä¸ªèŒƒå›´å¹¶ä¸å®Œæ•´ï¼Œæ¯”å¦‚æ²¡æœ‰åŒ…æ‹¬å…¨è§’ï¼ˆä¸­æ–‡ï¼‰æ ‡ç‚¹ï¼Œä¸è¿‡ï¼Œåœ¨å¤§éƒ¨åˆ†æƒ…å†µä¸‹ï¼Œåº”è¯¥æ˜¯å¤Ÿç”¨çš„ã€‚ å‡è®¾ç°åœ¨æƒ³æŠŠå­—ç¬¦ä¸² title = u&#39;ä½ å¥½ï¼Œhelloï¼Œä¸–ç•Œ&#39; ä¸­çš„ä¸­æ–‡æå–å‡ºæ¥ï¼Œå¯ä»¥è¿™ä¹ˆåšï¼š 123456789# -*- coding: utf-8 -*-import retitle = u'ä½ å¥½ï¼Œhelloï¼Œä¸–ç•Œ'pattern = re.compile(ur'[\u4e00-\u9fa5]+')result = pattern.findall(title)print result æ³¨æ„åˆ°ï¼Œæˆ‘ä»¬åœ¨æ­£åˆ™è¡¨è¾¾å¼å‰é¢åŠ ä¸Šäº†ä¸¤ä¸ªå‰ç¼€ urï¼Œå…¶ä¸­ r è¡¨ç¤ºä½¿ç”¨åŸå§‹å­—ç¬¦ä¸²ï¼Œu è¡¨ç¤ºæ˜¯ unicode å­—ç¬¦ä¸²ã€‚ æ‰§è¡Œç»“æœ: 1[u&apos;\u4f60\u597d&apos;, u&apos;\u4e16\u754c&apos;] è´ªå©ªåŒ¹é…åœ¨ Python ä¸­ï¼Œæ­£åˆ™åŒ¹é…é»˜è®¤æ˜¯è´ªå©ªåŒ¹é…ï¼ˆåœ¨å°‘æ•°è¯­è¨€ä¸­å¯èƒ½æ˜¯éè´ªå©ªï¼‰ï¼Œä¹Ÿå°±æ˜¯åŒ¹é…å°½å¯èƒ½å¤šçš„å­—ç¬¦ã€‚ æ¯”å¦‚ï¼Œæˆ‘ä»¬æƒ³æ‰¾å‡ºå­—ç¬¦ä¸²ä¸­çš„æ‰€æœ‰ div å—ï¼š 1234567import recontent = 'aa&lt;div&gt;test1&lt;/div&gt;bb&lt;div&gt;test2&lt;/div&gt;cc'pattern = re.compile(r'&lt;div&gt;.*&lt;/div&gt;')result = pattern.findall(content)print result æ‰§è¡Œç»“æœï¼š 1[&apos;&lt;div&gt;test1&lt;/div&gt;bb&lt;div&gt;test2&lt;/div&gt;&apos;] ç”±äºæ­£åˆ™åŒ¹é…æ˜¯è´ªå©ªåŒ¹é…ï¼Œä¹Ÿå°±æ˜¯å°½å¯èƒ½å¤šçš„åŒ¹é…ï¼Œå› æ­¤ï¼Œåœ¨æˆåŠŸåŒ¹é…åˆ°ç¬¬ä¸€ä¸ª &lt;/div&gt; æ—¶ï¼Œå®ƒè¿˜ä¼šå‘å³å°è¯•åŒ¹é…ï¼ŒæŸ¥çœ‹æ˜¯å¦è¿˜æœ‰æ›´é•¿çš„å¯ä»¥æˆåŠŸåŒ¹é…çš„å­ä¸²ã€‚ å¦‚æœæˆ‘ä»¬æƒ³éè´ªå©ªåŒ¹é…ï¼Œå¯ä»¥åŠ ä¸€ä¸ª ?ï¼Œå¦‚ä¸‹ï¼š 1234567import recontent = 'aa&lt;div&gt;test1&lt;/div&gt;bb&lt;div&gt;test2&lt;/div&gt;cc'pattern = re.compile(r'&lt;div&gt;.*?&lt;/div&gt;') # åŠ ä¸Š ?result = pattern.findall(content)print result ç»“æœï¼š 1[&apos;&lt;div&gt;test1&lt;/div&gt;&apos;, &apos;&lt;div&gt;test2&lt;/div&gt;&apos;] å°ç»“ re æ¨¡å—çš„ä¸€èˆ¬ä½¿ç”¨æ­¥éª¤å¦‚ä¸‹ï¼š ä½¿ç”¨ compile å‡½æ•°å°†æ­£åˆ™è¡¨è¾¾å¼çš„å­—ç¬¦ä¸²å½¢å¼ç¼–è¯‘ä¸ºä¸€ä¸ª Pattern å¯¹è±¡ï¼› é€šè¿‡ Pattern å¯¹è±¡æä¾›çš„ä¸€ç³»åˆ—æ–¹æ³•å¯¹æ–‡æœ¬è¿›è¡ŒåŒ¹é…æŸ¥æ‰¾ï¼Œè·å¾—åŒ¹é…ç»“æœï¼ˆä¸€ä¸ª Match å¯¹è±¡ï¼‰ï¼› æœ€åä½¿ç”¨ Match å¯¹è±¡æä¾›çš„å±æ€§å’Œæ–¹æ³•è·å¾—ä¿¡æ¯ï¼Œæ ¹æ®éœ€è¦è¿›è¡Œå…¶ä»–çš„æ“ä½œï¼› Python çš„æ­£åˆ™åŒ¹é…é»˜è®¤æ˜¯è´ªå©ªåŒ¹é…ã€‚ å‚è€ƒèµ„æ–™ reæ¨¡å—]]></content>
      <categories>
        <category>Python</category>
      </categories>
      <tags>
        <tag>æ¨¡å—</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[pythonæ¨¡å—ä¹‹hashlib]]></title>
    <url>%2F2018%2F10%2F19%2Fpython%E6%A8%A1%E5%9D%97%E4%B9%8Bhashlib%2F</url>
    <content type="text"><![CDATA[ä¸€ ä»€ä¹ˆæ˜¯hashlibæ¨¡å—ï¼Ÿhashlibæ¨¡å—æ˜¯pythonç”¨æ¥åŠ å¯†çš„ä¸€ä¸ªæ¨¡å—ï¼Œhashæ˜¯ä¸€ç§ç®—æ³•ï¼Œå¯ä»¥æä¾›SHA1ã€SHA224ã€SHA256ã€SHA384ã€SHA512ã€MD%ç®—æ³•ï¼Œè¯¥ç®—æ³•æ¥æ”¶ä¼ å…¥çš„å†…å®¹ï¼Œç»è¿‡è¿ç®—å¾—åˆ°ä¸€ä¸²hashå€¼ã€‚ hashæ˜¯ä¸€ç§ç®—æ³•ï¼Œæ˜¯å°†ä¸€ä¸ªä»»æ„é•¿åº¦çš„æ•°æ®ï¼Œæ ¹æ®è®¡ç®—ï¼Œå¾—åˆ°ä¸€ä¸ªå›ºå®šé•¿åº¦çš„hashå€¼ã€‚ ç»è¿‡hashç®—æ³•ä¼šå¾—åˆ°ä¸€ä¸²hashå€¼ï¼Œhashå€¼å¾—ç‰¹ç‚¹å¦‚ä¸‹ï¼š åªè¦ä¼ å…¥çš„å†…å®¹ä¸€æ ·ï¼Œå¾—åˆ°çš„hashå€¼å¿…ç„¶ä¸€æ · â€”ã€‹ã€‹è¦ç”¨æ˜æ–‡ä¼ è¾“å¯†ç æ–‡ä»¶å®Œæ•´æ€§æ ¡éªŒ æŒ‰ç†æ¥è¯´ä¸èƒ½æœ‰hashå€¼è¿”è§£å›åŸå†…å®¹ï¼Œä½†æ˜¯ç ´è§£md5ä½¿ç”¨æ’åº“åŸç†ä¹Ÿå˜å¾—ä¸å®‰å…¨èµ·æ¥ åªè¦ä½¿ç”¨çš„hashç®—æ³•ä¸å˜ï¼Œæ— è®ºæ ¡éªŒçš„å†…å®¹æœ‰å¤šå¤§ï¼Œå¾—åˆ°çš„hashå€¼é•¿åº¦æ˜¯å›ºå®šçš„ hashç®—æ³•å°±åƒä¸€åº§å·¥å‚ï¼Œå·¥å‚æ¥æ”¶ä½ é€æ¥çš„åŸææ–™ï¼Œï¼ˆå¯ä»¥ä½¿ç”¨m.update()ä¸ºå·¥å‚å¢åŠ ææ–™ï¼‰ï¼Œç»è¿‡åŠ å·¥è¿”å›çš„äº§å“å°±æ˜¯hashå€¼ã€‚ äºŒ ä½¿ç”¨åœºæ™¯ å¯†ç éªŒè¯ æ ¡éªŒæ•°æ®åŒ… æå‡å¯†ç çš„å¤æ‚åº¦ ä¸‰ hashlibæ¨¡å—çš„ä½¿ç”¨ md5ä½¿ç”¨ 123import hashlibm = hashlib.md5('musibii'.encode('utf-8'))print(m.hexdigest()) 12# è¿è¡Œç»“æœ02797a3eebd7ef3054cd5c0e3a8c3199 å…¶ä»–å‡ ç§åŠ å¯† 12345678910import hashlibh1 = hashlib.sha512("musibii".encode("utf-8"))h2 = hashlib.sha3_512("musibii".encode("utf-8"))# print(len(h.hexdigest()))print(h1.hexdigest())print(h2.hexdigest())# è¿è¡Œç»“æœ458c46307cbe022bcd948462b2160c33f0821ea7c1d4ad0a9eb473a6448a850879c23075d6898f86f0093531ee33bde7565f0321ad516894071b73a5dc77626abfb5d77e45e99c5280bc1167113fe1e3666e350c6eac9475e66edb91c247e56fb014475c92f8140e601c2238f165a5cc14d5192ae5147acee4185476b65f613e åŠ ç› 123456import hashlibm = hashlib.md5('musibii'.encode('utf-8'))m.update('thales'.encode('utf-8'))print(m.hexdigest())# è¿è¡Œç»“æœb2bb467965df30aaa14f677c3b3358d1 hmacåŠ å¯† å’ŒMD5ç­‰ç®—æ³•æ²¡ä»€ä¹ˆåŒºåˆ«,ä¸»è¦çš„åŒºåˆ«æ˜¯å¿…é¡»åŠ ç›. 123456import hmach = hmac.new('musibii'.encode('utf-8'))h.update('thales'.encode('utf-8'))print(h.hexdigest())# è¿è¡Œç»“æœe26b77208fb858f7f8f78965f8ea4f47]]></content>
      <categories>
        <category>Python</category>
      </categories>
      <tags>
        <tag>æ¨¡å—</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[pythonæ¨¡å—ä¹‹logging]]></title>
    <url>%2F2018%2F10%2F19%2Fpython%E6%A8%A1%E5%9D%97%E4%B9%8Blogging%2F</url>
    <content type="text"><![CDATA[ä¸€ æ—¥å¿—è®°å½•çš„é‡è¦æ€§â€‹ åœ¨å¼€å‘è¿‡ç¨‹ä¸­ï¼Œå¦‚æœç¨‹åºè¿è¡Œå‡ºç°äº†é—®é¢˜ï¼Œé€šå¸¸å¯ä»¥ç»è¿‡debugæ¥æ£€æµ‹åˆ°åº•æ˜¯å“ªä¸€æ­¥å‡ºç°äº†é—®é¢˜ï¼Œå¦‚æœå‡ºç°äº†é—®é¢˜çš„è¯ï¼Œæ˜¯æ¯”è¾ƒå®¹æ˜“æ’æŸ¥å‡ºé—®é¢˜çš„ã€‚ä½†æ˜¯ç¨‹åºå¼€å‘å®Œæˆä¹‹åï¼Œéƒ¨ç½²åˆ°ç”Ÿäº§ç¯å¢ƒä¸­å»ï¼Œè¿™æ—¶å€™ä»£ç ç›¸å½“äºæ˜¯åœ¨ä¸€ä¸ªé»‘ç›’ç¯å¢ƒä¸‹è¿è¡Œçš„ï¼Œæˆ‘ä»¬åªèƒ½çœ‹åˆ°å…¶è¿è¡Œçš„æ•ˆæœï¼Œæ˜¯ä¸èƒ½ç›´æ¥çœ‹åˆ°ä»£ç è¿è¡Œè¿‡ç¨‹ä¸­çš„æ¯ä¸€æ­¥çŠ¶æ€çš„ã€‚åœ¨ç”Ÿäº§ç¯å¢ƒæ—¢ä¸èƒ½é€šè¿‡debugæ¥æ’æŸ¥é—®é¢˜ï¼Œæ›´ä¸èƒ½å°†ç”Ÿäº§ç¯å¢ƒä¸‹çº¿æ¥æ’æŸ¥é—®é¢˜ï¼Œæ‰€ä»¥è¿™æ—¶å€™è®°å½•æ—¥å¿—å°±å¾ˆé‡è¦äº†ã€‚ â€‹ å¦‚æœæˆ‘ä»¬ç°åœ¨åªèƒ½å¾—çŸ¥å½“å‰é—®é¢˜çš„ç°è±¡ï¼Œè€Œæ²¡æœ‰å…¶ä»–ä»»ä½•ä¿¡æ¯çš„è¯ï¼Œå¦‚æœæƒ³è¦è§£å†³æ‰è¿™ä¸ªé—®é¢˜çš„è¯ï¼Œåªèƒ½é€šè¿‡é—®é¢˜å‡ºç°çš„å½¢å¼æ¥å°è¯•é‡ç°bugï¼Œç„¶ååœ¨ä¸€æ­¥ä¸€æ­¥çš„è°ƒè¯•ï¼Œè¿™ææ€•æ˜¯éš¾çš„ï¼Œè¿™æ ·å¾ˆå¤§çš„æ¦‚ç‡æ˜¯æ— æ³•ç²¾å‡†çš„å¤ç°è¿™ä¸ªé—®é¢˜çš„ï¼Œè€Œä¸”debugçš„è¿‡ç¨‹ä¸­ä¹Ÿä¼šè€—è´¹å·¨å¤šçš„æ—¶é—´ï¼Œè¿™æ ·å¦‚æœåœ¨ç”Ÿäº§ç¯å¢ƒä¸Šå‡ºç°äº†é—®é¢˜çš„è¯ï¼Œä¿®å¤bugå°±ä¼šå˜å¾—éå¸¸æ£˜æ‰‹ã€‚ä½†æ˜¯å¦‚æœæœ‰æ—¥å¿—è®°å½•çš„è¯ï¼Œä¸è®ºæ˜¯æ­£å¸¸è¿è¡Œè¿˜æ˜¯æŠ¥é”™ï¼Œéƒ½æœ‰ç›¸å…³çš„æ—¶é—´è®°å½•ã€çŠ¶æ€è®°å½•ã€é”™è¯¯è®°å½•ç­‰ï¼Œé‚£ä¹ˆè¿™æ ·æˆ‘ä»¬å°±å¯ä»¥æ–¹ä¾¿çš„è¿½è¸ªåˆ°åœ¨å½“æ—¶çš„è¿è¡Œè¿‡ç¨‹ä¸­å‡ºç°äº†æ€æ ·çš„çŠ¶å†µï¼Œä»è€Œå¯ä»¥å¿«é€Ÿçš„æ’æŸ¥é—®é¢˜ã€‚ â€‹ å› æ­¤ï¼Œä½œä¸ºå¼€å‘è€…è®°å½•ç”Ÿäº§ç¯å¢ƒä¸­ä»£ç è¿è¡Œçš„æ—¥å¿—æ˜¯å¾ˆæœ‰å¿…è¦çš„ï¼Œå› æ­¤å­¦å¥½æ€ä¹ˆè®°å½•æ—¥å¿—è¿‡ç¨‹æ˜¯ä¸€é—¨å¿…ä¿®è¯¾ã€‚ äºŒ æ—¥å¿—è®°å½•çš„æµç¨‹æ¡†æ¶åœ¨pythonä¸­ï¼Œæ€æ ·æ‰èƒ½ç®—åšä¸€ä¸ªæ¯”è¾ƒæ ‡å‡†çš„æ—¥å¿—è®°å½•å‘¢ï¼Ÿåƒæˆ‘ä¹‹å‰éƒ½æ˜¯ä½¿ç”¨æ§åˆ¶å°æŸ¥çœ‹ç»“æœæˆ–è€…debugæŸ¥çœ‹è¿è¡ŒçŠ¶æ€çš„ï¼Œå¯¹äºä¸€ä¸ªå°é¡¹ç›®æ¥è¯´ï¼Œdebugå·²ç»è¶³å¤Ÿäº†ï¼Œä½†æ˜¯å¯¹äºä¸€ä¸ªå¤§é¡¹ç›®æ¥è¯´ä¸€æ­¥ä¸€æ­¥è°ƒè¯•è´¹æ—¶è´¹åŠ›ï¼Œè€Œä¸”å¾—åˆ°çš„æ¶ˆæ¯ä¹Ÿä¸ä¸€å®šå…¨é¢ï¼Œå¦‚æœè‡ªå·±å¯ä»¥å®šä¹‰è¾“å‡ºçš„è°ƒè¯•ä¿¡æ¯é‚£ä¹ˆå¯¹äºè°ƒè¯•æ¥è®²æ˜¯ä»¶å¾ˆèŠ‚çœæ—¶é—´çš„äº‹ã€‚ åœ¨pythonä¸­ä¸“é—¨æœ‰ä¸€ä¸ªç”¨æ¥è®°å½•æ—¥å¿—çš„æ¨¡å—loggingï¼Œå¯ä»¥ç”¨å®ƒæ¥è¿›è¡Œæ ‡æ³¨çš„æ—¥å¿—è®°å½•ï¼Œåˆ©ç”¨å®ƒæˆ‘ä»¬å¯ä»¥æ›´æ–¹ä¾¿çš„è¿›è¡Œæ—¥å¿—è®°å½•ï¼ŒåŒæ—¶è¿˜å¯ä»¥åšæ›´æ–¹ä¾¿çš„çº§åˆ«åŒºåˆ†ä»¥åŠä¸€äº›é¢å¤–çš„æ—¥å¿—ä¿¡æ¯çš„è®°å½•ï¼Œå¦‚æ—¶é—´ã€è¿è¡Œæ¨¡å—ä¿¡æ¯ç­‰ã€‚ é‚£ä¹ˆå®Œæ•´çš„æ—¥å¿—è®°å½•æµç¨‹æ¡†æ¶æ˜¯ä»€ä¹ˆæ ·å‘¢ï¼Ÿ å¦‚å›¾æ‰€ç¤ºï¼Œæ•´ä¸ªæ—¥å¿—è®°å½•çš„æ¡†æ¶å¯ä»¥åˆ†ä¸ºè¿™ä¹ˆå‡ ä¸ªéƒ¨åˆ†ï¼š Loggerï¼šå³Logger Main Classï¼Œæ˜¯æˆ‘ä»¬è¿›è¡Œæ—¥å¿—è®°å½•æ˜¯åˆ›å»ºçš„å¯¹è±¡ï¼Œå¯ä»¥è°ƒç”¨Loggerçš„æ–¹æ³•ä¼ å…¥æ—¥å¿—æ¨¡æ¿å’Œä¿¡æ¯ï¼Œæ¥ç”Ÿæˆä¸€æ¡æ¡æ—¥å¿—è®°å½•ï¼Œç§°ä½œLog Recordã€‚ Log Recordï¼šå°±ä»£æŒ‡ç”Ÿæˆçš„ä¸€æ¡æ¡æ—¥å¿—è®°å½•ã€‚ Handlerï¼šå³ç”¨æ¥å¤„ç†æ—¥å¿—è®°å½•çš„ç±»ï¼Œå®ƒå¯ä»¥å°†Log Recordè¾“å‡ºåˆ°æˆ‘ä»¬æŒ‡å®šçš„æ—¥å¿—ä½ç½®å’Œå­˜å‚¨å½¢å¼ç­‰ï¼Œå¦‚æˆ‘ä»¬å¯ä»¥æŒ‡å®šè¾“å…¥åˆ°å…·ä½“çš„æ–‡ä»¶ã€æˆ–è€…å¯ä»¥æŒ‡å®šå°†æ—¥å¿—é€šè¿‡FTPåè®®è®°å½•åˆ°è¿œç¨‹çš„æœåŠ¡å™¨ä¸Šï¼ŒHandlerå°±ä¼šå¸®æˆ‘ä»¬å®Œæˆè¿™äº›äº‹æƒ…ã€‚ Formatterï¼šå®é™…ä¸Šç”Ÿæˆçš„Log Recordä¹Ÿæ˜¯ä¸€ä¸ªä¸ªå¯¹è±¡ï¼Œé‚£ä¹ˆæˆ‘ä»¬æƒ³è¦æŠŠå®ƒä»¬ä¿å­˜æˆä¸€æ¡æ¡æˆ‘ä»¬æƒ³è¦çš„æ—¥å¿—æ–‡æœ¬çš„è¯ï¼Œå°±éœ€è¦æœ‰ä¸€ä¸ªæ ¼å¼åŒ–çš„è¿‡ç¨‹ï¼Œé‚£ä¹ˆè¿™ä¸ªè¿‡ç¨‹å°±æœ‰Formatteræ¥å®Œæˆï¼Œè¿”å›çš„å°±æ˜¯æ—¥å¿—å­—ç¬¦ä¸²ï¼Œç„¶åä¼ å›ç»™Handleræ¥å¤„ç†ã€‚ Filterï¼šå¦å¤–ä¿å­˜æ—¥å¿—çš„æ—¶å€™æˆ‘ä»¬å¯èƒ½ä¸éœ€è¦å…¨éƒ¨ä¿å­˜ï¼Œåªéœ€è¦ä¿å­˜æˆ‘ä»¬æƒ³è¦çš„éƒ¨åˆ†å°±å¯ä»¥äº†ï¼Œæ‰€ä»¥åœ¨ä¿å­˜çš„æ—¶å€™éœ€è¦è¿›ä¸€æ­¥è¿‡æ»¤ï¼Œç•™ä¸‹æƒ³è¦çš„æ—¥å¿—ä¿¡æ¯ï¼Œå¦‚åªä¿å­˜æŸä¸ªçº§åˆ«çš„æ—¥å¿—ï¼Œé‚£ä¹ˆè¿™ä¸ªè¿‡æ»¤è¿‡ç¨‹å°±å¯ä»¥äº¤ç»™Filteræ¥å®Œæˆã€‚ Parent Handlerï¼šHandlerä¹‹é—´å¯ä»¥å­˜åœ¨åˆ†å±‚å…³ç³»ï¼Œä»¥ä½¿å¾—ä¸åŒHandlerä¹‹é—´å…±äº«æƒ³é€šåŠŸèƒ½çš„ä»£ç ã€‚ è¿™äº›å°±æ˜¯æ•´ä¸ªloggingæ¨¡å—çš„åŸºæœ¬æ¶æ„å’Œå¯¹è±¡åŠŸèƒ½ã€‚ ä¸‰ æ—¥å¿—è®°å½•çš„ç›¸å…³ç”¨æ³•loggingæ¨¡å—æœ‰å¦‚ä¸‹å‡ ä¸ªä¼˜ç‚¹ï¼š å¯ä»¥åœ¨loggingæ¨¡å—ä¸­è®¾ç½®æ—¥å¿—ç­‰çº§ï¼Œåœ¨ä¸åŒçš„ç‰ˆæœ¬ï¼ˆå¦‚å¼€å‘ç¯å¢ƒã€ç”Ÿäº§ç¯å¢ƒï¼‰ä¸Šé€šè¿‡è®¾ç½®ä¸åŒçš„è¾“å‡ºç­‰çº§æ¥è®°å½•ç›¸åº”çš„æ—¥å¿—ã€‚ loggingæ¨¡å—ä¸ä»…å¯ä»¥æŠŠè¾“å‡ºä¿¡æ¯è¾“å‡ºåˆ°æ§åˆ¶å°ï¼Œè¿˜å¯ä»¥è®¾ç½®è¾“å‡ºåˆ°ä»»æ„ä½ç½®ï¼Œå¦‚å†™å…¥æ–‡ä»¶ã€å†™å…¥è¿œç¨‹æœåŠ¡å™¨ç­‰ã€‚ loggingæ¨¡å—å…·æœ‰çµæ´»çš„é…ç½®å’Œæ ¼å¼åŒ–åŠŸèƒ½ï¼Œå¦‚é…ç½®è¾“å‡ºå½“å‰æ¨¡å—ä¿¡æ¯ã€è¿è¡Œæ—¶é—´ç­‰ï¼Œç›¸æ¯”printçš„å­—ç¬¦ä¸²æ ¼å¼åŒ–æ›´åŠ æ–¹ä¾¿æ˜“ç”¨ã€‚ å›› æ—¥å¿—è®°å½•çš„ç›¸å…³ç”¨æ³•ä¸€ æ—¥å¿—çº§åˆ«æ—¥å¿—çº§åˆ«åˆ†ä¸ºäº”ä¸ªçº§åˆ«ï¼š ç­‰çº§ æ•°å€¼ CRITICAL 50 FATAL 50 ERROR 40 WARNING 30 WARN 30 INFO 20 DEBUG 10 NOTSET 0 è¿™é‡Œæœ€é«˜çš„ç­‰çº§æ˜¯ CRITICAL å’Œ FATALï¼Œä¸¤ä¸ªå¯¹åº”çš„æ•°å€¼éƒ½æ˜¯ 50ï¼Œå¦å¤–å¯¹äº WARNING è¿˜æä¾›äº†ç®€å†™å½¢å¼ WARNï¼Œä¸¤ä¸ªå¯¹åº”çš„æ•°å€¼éƒ½æ˜¯ 30ã€‚ æˆ‘ä»¬è®¾ç½®äº†è¾“å‡º levelï¼Œç³»ç»Ÿä¾¿åªä¼šè¾“å‡º level æ•°å€¼å¤§äºæˆ–ç­‰äºè¯¥ level çš„çš„æ—¥å¿—ç»“æœï¼Œä¾‹å¦‚æˆ‘ä»¬è®¾ç½®äº†è¾“å‡ºæ—¥å¿— level ä¸º INFOï¼Œé‚£ä¹ˆè¾“å‡ºçº§åˆ«å¤§äºç­‰äº INFO çš„æ—¥å¿—ï¼Œå¦‚ WARNINGã€ERROR ç­‰ï¼ŒDEBUG å’Œ NOSET çº§åˆ«çš„ä¸ä¼šè¾“å‡ºã€‚ åœ¨loggingæ¨¡å—ä¸­æœ‰å¯¹åº”çš„å¸¸é‡ç”¨æ¥æ ‡è¯†çº§åˆ«ï¼Œé»˜è®¤æƒ…å†µä¸‹ï¼Œé»˜è®¤çš„logçº§åˆ«æ˜¯warningï¼ˆ30ï¼‰ï¼Œé»˜è®¤è¾“å‡ºåˆ°æ§åˆ¶å°ã€‚ äºŒ è‡ªå®šä¹‰æ—¥å¿—çš„é…ç½®12345678# test.pyimport logginglogging.basicConfig(level=logging.INFO, format='%(asctime)s - %(name)s - %(levelname)s - %(message)s')logger = logging.getLogger(__name__)logger.info('log info')logger.debug('log debug')logger.warning('log warning')logger.critical('log critical') åœ¨è¿™é‡Œé¦–å…ˆå¯¼å…¥loggingæ¨¡å—ï¼Œç„¶åè¿›è¡Œäº†ä¸€ä¸‹åŸºæœ¬çš„é…ç½®ï¼Œé€šè¿‡basicConfigé…ç½®äº†levelçº§åˆ«å’Œformatæ ¼å¼åŒ–ä¿¡æ¯ï¼Œlevelé…ç½®ä¸ºINFOçº§åˆ«ï¼Œåªè¾“å‡ºå¤§äºç­‰äºINFOçº§åˆ«çš„ä¿¡æ¯ï¼Œformatæ ¼å¼çš„å­—ç¬¦ä¸²ï¼ŒåŒ…æ‹¬asctimeã€nameã€levelnameã€messageå››ä¸ªå†…å®¹ï¼Œåˆ†åˆ«ä»£è¡¨è¿è¡Œæ—¶é—´ã€æ¨¡å—åç§°ã€æ—¥å¿—çº§åˆ«ã€æ—¥å¿—å†…å®¹ï¼Œè¿™æ ·è¾“å‡ºå†…å®¹ä¾¿ä¸ºè¿™å››ä¸ªå†…å®¹çš„ä¿¡æ¯äº†ï¼Œè¿™å°±æ˜¯loggingå…¨å±€é…ç½®ã€‚ æ¥ä¸‹æ¥å£°æ˜äº†ä¸€ä¸ªLoggerå¯¹è±¡ï¼Œæ˜¯æ—¥å¿—è¾“å‡ºçš„ä¸»ç±»ï¼Œè°ƒç”¨å¯¹è±¡çš„info()æ–¹æ³•å¯ä»¥è¾“å‡ºINFOçº§åˆ«çš„æ—¥å¿—ä¿¡æ¯ï¼Œè°ƒç”¨debug()æ–¹æ³•å°±å¯ä»¥è¾“å‡ºDEBUGçº§åˆ«çš„æ—¥å¿—ä¿¡æ¯ï¼Œå…¶ä»–çº§åˆ«çš„æ—¥å¿—ä¿¡æ¯åŒç†å¯ä»¥è¾“å‡ºã€‚åˆå§‹åŒ–loggeræ—¶ä¼ å…¥äº†nameæ¥ä»£æ›¿ä¼ å…¥æ¨¡å—çš„åç§°ï¼Œå¦‚æœç›´æ¥è¿è¡Œè¯¥è„šæœ¬åˆ™å€¼ä¸ºmain,å¦‚æœä½œä¸ºæ¨¡å—è¢«importçš„è¯ï¼Œåˆ™å°±æ˜¯è¢«å¯¼å…¥æ¨¡å—çš„åç§°ä¸ºtest.pyï¼Œå› ä¸ºåœ¨ä¸åŒçš„æ¨¡å—ä¸­è¯¥å€¼ä¸åŒï¼Œæ‰€ä»¥ç›´æ¥ä½¿ç”¨nameä»£æ›¿ï¼Œç„¶åè¾“å‡ºäº†å››æ¡æ—¥å¿—ä¿¡æ¯ï¼Œå…¶ä¸­æœ‰ä¸€æ¡INFOä¿¡æ¯ï¼Œä¸€æ¡DEBUGä¿¡æ¯ï¼Œä¸€æ¡WARNINGä¿¡æ¯ï¼Œä¸€æ¡CRITICALä¿¡æ¯ï¼Œå› ä¸ºè®¾ç½®çš„levelä¸ºINFOï¼Œæ‰€ä»¥ä½äºINFOçš„çº§åˆ«æ—¥å¿—ä¼šè¢«è¿‡æ»¤ï¼Œæ‰€ä»¥DEBUGæ—¥å¿—ä¿¡æ¯ä¼šè¢«è¿‡æ»¤ã€‚ ä¸‰ basicConfigçš„å…·ä½“å‚æ•°basicConfigæ˜¯ç”¨ä½œå…¨å±€çš„æ—¥å¿—é…ç½®ï¼ŒbasicConfigçš„å‚æ•°æœ‰ï¼š filenameï¼šæ—¥å¿—è¾“å‡ºçš„æ–‡ä»¶åï¼Œå¦‚æœæŒ‡å®šäº†è¿™ä¸ªä¿¡æ¯ä¹‹åï¼Œä¸ä¼šä½¿ç”¨é»˜è®¤çš„StreamHandlerï¼Œä¼šä½¿ç”¨FileHandleræ¥å°†æ—¥å¿—ä¿¡æ¯è¾“å…¥åˆ°æŒ‡å®šçš„æ–‡ä»¶ä¸­ã€‚ filemodeï¼šè¯¥å‚æ•°ä¸ºæŒ‡å®šæ—¥å¿—æ–‡ä»¶çš„å†™å…¥æ–¹å¼ï¼Œæœ‰ä¸¤ç§å½¢å¼ï¼Œä¸€ç§ä¸ºwï¼Œä¸€ç§ä¸ºaï¼Œåˆ†åˆ«ä»£è¡¨è¦†ç›–å†™å…¥å’Œè¿½åŠ å†™å…¥ã€‚ formatï¼šæŒ‡å®šæ—¥å¿—ä¿¡æ¯çš„è¾“å‡ºæ ¼å¼ï¼Œå³ä¸Šæ–‡ç¤ºä¾‹æ‰€ç¤ºçš„å‚æ•°ï¼Œéƒ¨åˆ†å‚æ•°å¦‚ä¸‹ï¼š %(levelno)sï¼šæ‰“å°æ—¥å¿—çº§åˆ«çš„å€¼ï¼› %(levelname)sï¼šæ‰“å°æ—¥å¿—çº§åˆ«çš„åç§°ï¼› %(pathname)sï¼šæ‰“å°å½“å‰æ‰§è¡Œç¨‹åºçš„è·¯å¾„ï¼Œå…¶å®å°±æ˜¯sys.argv[0]ï¼› %(filenam)sï¼šæ‰“å°å½“å‰æ‰§è¡Œç¨‹åºåï¼› %(funcName)sï¼šæ‰“å°æ—¥å¿—çš„å½“å‰å‡½æ•°ï¼› %(lineno)sï¼šæ‰“å°æ—¥å¿—çš„å½“å‰è¡Œå·ï¼› %(asctime)sï¼šæ‰“å°æ—¥å¿—çš„æ—¶é—´ï¼› %(thread)sï¼šæ‰“å°çº¿ç¨‹idï¼› %(threadName)sï¼šæ‰“å°çº¿ç¨‹åç§°ï¼› %(process)sï¼šæ‰“å°è¿›ç¨‹idï¼› %(processName)sï¼šæ‰“å°è¿›ç¨‹åç§°ï¼› %(module)sï¼šæ‰“å°æ¨¡å—åç§°ï¼› %(message)sï¼šæ‰“å°æ—¥å¿—ä¿¡æ¯ã€‚ datefmtï¼šæŒ‡å®šæ—¶é—´çš„è¾“å‡ºæ ¼å¼ã€‚ styleï¼šå¦‚æœformatå‚æ•°åˆ¶å®šäº†ï¼Œè¿™ä¸ªå‚æ•°å°±å¯ä»¥æŒ‡å®šæ ¼å¼åŒ–æ—¶çš„å ä½ç¬¦é£æ ¼ï¼Œå¦‚%ã€{ã€$ç­‰ã€‚ levelï¼šæŒ‡å®šæ—¥å¿—è¾“å‡ºçš„ç±»åˆ«ï¼Œç¨‹åºä¼šè¾“å‡ºå¤§äºç­‰äºæ­¤çº§åˆ«çš„ä¿¡æ¯ã€‚ streamï¼šåœ¨æ²¡æœ‰æŒ‡å®šfilenameçš„æ—¶å€™ä¼šé»˜è®¤ä½¿ç”¨StreamHandlerï¼Œè¿™æ—¶streamå¯ä»¥æŒ‡å®šåˆå§‹åŒ–çš„æ–‡ä»¶æµã€‚ handlersï¼šå¯ä»¥æŒ‡å®šæ—¥å¿—å¤„ç†æ—¶æ‰€ä½¿ç”¨çš„Handlersï¼Œå¿…é¡»æ˜¯å¯è¿­ä»£çš„ã€‚ å›› Formatteré…ç½®åœ¨è¿›è¡Œæ—¥å¿—æ ¼å¼åŒ–è¾“å‡ºçš„æ—¶å€™ï¼Œæˆ‘ä»¬å¯ä»¥ä¸å€ŸåŠ©äºbasicConfigæ¥å…¨å±€é…ç½®æ ¼å¼åŒ–è¾“å‡ºå†…å®¹ï¼Œå¯ä»¥å€ŸåŠ©Formatteræ¥å®Œæˆ Formatterç”¨æ³•ï¼š 123456789101112131415import logginglogger = logging.getLogger(__name__)logger.setLevel(level=logging.WARN)formatter = logging.Formatter(fmt='%(asctime)s - %(name)s - %(levelname)s - %(message)s', datefmt='%Y/%m/%d %H:%M:%S')handler = logging.StreamHandler()handler.setFormatter(formatter)logger.addHandler(handler)#loglogger.debug('debug')logger.critical('critical')logger.error('error')logger.warning('warning')logger.info('info') åœ¨è¿™é‡ŒæŒ‡å®šäº†ä¸€ä¸ªFormatterï¼Œå¹¶ä¼ å…¥fmtå’Œdatefmtå‚æ•°ï¼Œè¿™æ ·å°±æŒ‡å®šäº†æ—¥å¿—ç»“æœçš„è¾“å‡ºæ ¼å¼å’Œæ—¶é—´æ ¼å¼ï¼Œç„¶åHandleré€šè¿‡setFormatter()æ–¹æ³•è®¾ç½®æ­¤Formatterå¯¹è±¡å³å¯ï¼Œè¾“å‡ºç»“æœå¦‚ä¸‹ï¼š 1232018/10/20 00:26:25 - __main__ - CRITICAL - critical2018/10/20 00:26:25 - __main__ - ERROR - error2018/10/20 00:26:25 - __main__ - WARNING - warning è¿™æ ·å¯ä»¥ä¸ºæ¯ä¸ªHandlerå•ç‹¬é…ç½®è¾“å‡ºçš„æ ¼å¼ã€‚ äº” æ•è·Tracbackå¼‚å¸¸ä¿¡æ¯é‡åˆ°é”™è¯¯çš„æ—¶å€™ï¼Œå¸Œæœ›æŠ¥é”™æ—¶å‡ºç°è¯¦ç»†çš„Tracbackä¿¡æ¯ï¼Œä¾¿äºæˆ‘ä»¬è°ƒè¯•ï¼Œåˆ©ç”¨loggingæ¨¡å—å¯ä»¥éå¸¸æ–¹ä¾¿çš„å®ç°è¿™ç§éœ€æ±‚ã€‚ 1234567891011121314151617181920212223import logginglogger = logging.getLogger(__name__)logger.serLevel(level=logging.DEBUG)formatter = logging.Formatter('%(asctime)s - %(name)s - %(levelname)s - %(message)s')file_handler = logging.FileHandler('test.log')file_handler.setFormatter(formatter)logger.addHandler(file_handler)stream_handler = logging.StreamHandler()stream_handler.setFormatter(formatter)logger.addHandler(stream_handler)logger.info('INFO')logger.warning('WARNING')try: num = 1/0except Exception: logger.error('something wrong', exc_info=True) logger.info('end') è¿™é‡Œåœ¨error()æ–¹æ³•ä¸­æ·»åŠ äº†ä¸€ä¸ªå‚æ•°ï¼Œå°†exc_infoè®¾ç½®ä¸ºTrueï¼Œè¿™æ ·å°±å¯ä»¥è¾“å‡ºæ‰§è¡Œè¿‡ç¨‹ä¸­çš„ä¿¡æ¯äº†ï¼Œå³å¯ä»¥è¾“å‡ºå®Œæ•´çš„Tracbackä¿¡æ¯ã€‚ è¿è¡Œç»“æœå¦‚ä¸‹ï¼š 123456782018-10-20 00:36:38,007 - __main__ - INFO - INFO2018-10-20 00:36:38,007 - __main__ - WARNING - WARNING2018-10-20 00:36:38,007 - __main__ - ERROR - something wrongTraceback (most recent call last): File "/Users/jingxing/PycharmProjects/pythonå…¨æ ˆ/day22/log_test.py", line 58, in &lt;module&gt; num = 1 / 0ZeroDivisionError: division by zero2018-10-20 00:36:38,007 - __main__ - INFO - end è¿™æ ·å¯ä»¥è¯¦ç»†çš„è®°å½•æŠ¥é”™çš„ä¿¡æ¯ï¼Œä¸€æ—¦å‡ºç°äº†é”™è¯¯ï¼Œå¯ä»¥åŠæ—¶çš„å®šä½åˆ°å‡ºç°é—®é¢˜çš„ä»£ç ã€‚ å…­ é…ç½®å…±äº«åœ¨å†™é¡¹ç›®çš„æ—¶å€™ï¼Œè‚¯å®šä¼šæœ‰è®¸å¤šçš„é…ç½®ä¿¡æ¯ï¼Œå¦‚æœæ¯ä¸ªæ–‡ä»¶éƒ½æ¥é…ç½®loggingçš„è¯éå¸¸éº»çƒ¦ï¼Œè€Œä¸”å‡ ä¹å¾ˆå¤šåœ°æ–¹çš„é…ç½®å‡ ä¹å·®ä¸å¤šçš„ï¼Œå› ä¸ºæ­¤åŸå› ï¼Œloggingæ¨¡å—æä¾›äº†çˆ¶å­æ¨¡å—å…±äº«é…ç½®çš„æœºåˆ¶ï¼Œä¼šæ ¹æ®Loggerçš„åç§°æ¥è‡ªåŠ¨åŠ è½½çˆ¶æ¨¡å—çš„é…ç½®ã€‚ å®šä¹‰ä¸€ä¸ªmain.pyæ–‡ä»¶ï¼š 12345678910111213141516# main.pyimport loggingimport corelogger = logging.getLogger('main')logger.setLevel(level=logging.DEBUG)handler = logging.FileHandler('test.log')handler.setLevel(logging.INFO)formatter = logging.Formatter('%(asctime)s - %(name)s - %(levelname)s - % (message)s')handler.setFormatter(formatter)logger.addHandler(handler)logging.info('main info')logging.debug('main debug')logging.error('main error')core.run() åœ¨æ‰§è¡Œæ–‡ä»¶é…ç½®äº†æ—¥å¿—çš„è¾“å‡ºæ ¼å¼å’Œæ–‡ä»¶è·¯å¾„ï¼ŒåŒæ—¶å®šä¹‰äº†Loggerçš„åç§°ä¸ºmainï¼Œç„¶åå¼•å…¥äº†å¦å¤–ä¸€ä¸ªæ¨¡å—coreï¼Œæœ€åè°ƒç”¨äº†coreçš„run()æ–¹æ³•ã€‚ æ¥ä¸‹æ¥å®šä¹‰core.pyï¼Œå†…å®¹å¦‚ä¸‹ï¼š 12345678import logginglogger = logging.getLogger('main.core')def run(): logger.info('core info') logger.debug('core debug') logger.error('core error') åœ¨core.pyæ–‡ä»¶é‡Œå®šä¹‰äº†Loggerçš„åç§°ä¸ºmain.coreï¼Œå› ä¸ºä¹‹å‰åœ¨main.pyæ–‡ä»¶é‡Œå®šä¹‰çš„Loggeråç§°ä¸ºmainï¼Œæ‰€ä»¥core.pyé‡Œé¢çš„Loggerå°±ä¼šå¤ç”¨main.pyé‡Œé¢çš„Loggeré…ç½®ï¼Œè€Œä¸ç”¨é‡æ–°ä¸ºcoreé…ç½®æ—¥å¿—äº†ã€‚ è¿è¡Œä¹‹åtest.logç»“æœå¦‚ä¸‹ï¼š 1234562018-10-20 10:15:37,575 - main - INFO 2018-10-20 10:15:37,575 - main - DEBUG 2018-10-20 10:15:37,575 - main - ERROR 2018-10-20 10:15:37,575 - main.core - INFO 2018-10-20 10:15:37,575 - main.core - DEBUG 2018-10-20 10:15:37,575 - main.core - ERROR å¯ä»¥çœ‹å‡ºmainå’Œcoreæ¨¡å—éƒ½æ˜¯ç”¨äº†åŒæ ·çš„è¾“å‡ºé…ç½®ã€‚æ‰€ä»¥åªè¦åœ¨å…¥å£æ–‡ä»¶é‡Œå®šä¹‰å¥½loggingæ¨¡å—çš„è¾“å‡ºé…ç½®ï¼Œå­æ¨¡å—åªéœ€è¦åœ¨å®šä¹‰Loggerå¯¹è±¡æ—¶ä½¿ç”¨çˆ¶æ¨¡å—çš„åç§°å¼€å¤´å°±å¯ä»¥å…±äº«é…ç½®ï¼Œå®é™…ä¸Šç›´æ¥ä½¿ç”¨çˆ¶æ¨¡å—çš„åå­—å°±å¯ä»¥ï¼Œä½†æ˜¯ä¸ºäº†å¢åŠ è¾¨è¯†åº¦ï¼Œå¯ä»¥åœ¨çˆ¶æ¨¡å—åå­—ååŠ ä¸Šåç¼€ã€‚ æŸ¥çœ‹getLoggeræºç å¯å¾—ï¼Œåé¢çš„åå­—å¯ä»¥è‡ªå®šä¹‰ï¼Œç„¶ågetLoggeré‡Œé¢ä¼šè‡ªåŠ¨å¸®ä½ åˆ›å»ºä»¥è¯¥åå­—å‘½åçš„æ—¥å¿—ç”Ÿæˆå™¨ï¼Œå…·ä½“è§£é‡Šå¦‚ä¸‹ï¼š 1è·å–å…·æœ‰æŒ‡å®šåç§°ï¼ˆé€šé“åç§°ï¼‰çš„è®°å½•å™¨ï¼Œå¦‚æœå®ƒå°šä¸å­˜åœ¨åˆ™åˆ›å»ºå®ƒã€‚ æ­¤åç§°æ˜¯ä»¥ç‚¹åˆ†éš”çš„åˆ†å±‚åç§°ï¼Œä¾‹å¦‚â€œaâ€ï¼Œâ€œa.bâ€ï¼Œâ€œa.b.câ€æˆ–ç±»ä¼¼åç§°ã€‚å¦‚æœæŒ‡å®šåç§°å­˜åœ¨PlaceHolder [å³ loggerdidä¸å­˜åœ¨ï¼Œä½†å®ƒçš„å­èŠ‚ç‚¹å·²ç»å­˜åœ¨]ï¼Œç”¨createdloggeræ›¿æ¢å®ƒï¼Œå¹¶ä¿®å¤æŒ‡å‘å ä½ç¬¦çš„çˆ¶/å­å¼•ç”¨ï¼Œç°åœ¨æŒ‡å‘è®°å½•å™¨ã€‚ ä¸ƒ æ–‡ä»¶é…ç½®è™½ç„¶å¯ä»¥å†å…¥å£æ–‡ä»¶ä¸­å®šä¹‰å¥½é…ç½®ä¿¡æ¯ï¼Œç„¶åå­æ¨¡å—ä¹Ÿå¯ä»¥ä½¿ç”¨å¾ˆæ–¹ä¾¿ï¼Œä½†æ˜¯å› ä¸ºé…ç½®æ–‡ä»¶å¤§éƒ¨åˆ†éƒ½æ˜¯ä¸éœ€è¦æ›´æ”¹çš„ï¼Œåªæ˜¯æŸäº›éœ€è¦æ›´æ”¹ï¼Œåƒè¿™ç§ä¿¡æ¯å¯ä»¥æŠŠé…ç½®å†™å…¥é…ç½®æ–‡ä»¶é‡Œï¼Œç„¶åè¿è¡Œæ—¶è¯»å–é…ç½®æ–‡ä»¶é‡Œé¢çš„é…ç½®ï¼Œè¿™æ ·æ›´æ˜“ç»´æŠ¤å’Œä½¿ç”¨ã€‚ é¡¹ç›®ç»“æ„å¦‚ä¸‹ï¼š 123456789# bin/start.pyimport os,syssys.path.append(os.path.dirname(os.path.dirname(__file__)))import core.shopdef run(): print("welcome to here") core.shop.shopping()run() 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647# conf/settingsstandard_format = "%(name)s %(asctime)s %(levelname)s %(module)s %(funcName)s %(lineno)s %(message)s"simple_format = "%(name)s %(asctime)s %(module)s %(message)s"complete_format = "%(asctime)s %(levelname)s %(funcName)s %(lineno)s %(thread)s %(process)s %(message)s"logfile_path = r"/Users/jingxing/PycharmProjects/pythonå…¨æ ˆ/day23/log/d.log"LOGGING_DIC = &#123; 'version': 1, 'formatters': &#123; 'standard': &#123; 'format': standard_format &#125;, 'simple': &#123; 'format': simple_format &#125;, "complete":&#123; "format": complete_format &#125; &#125;, 'filters': &#123;&#125;, 'handlers': &#123; 'console': &#123; 'level': 'DEBUG', 'class': 'logging.StreamHandler', 'formatter': 'simple' &#125;, 'default': &#123; 'level': 'DEBUG', 'class': 'logging.handlers.RotatingFileHandler', 'formatter': 'standard', 'filename': logfile_path, # 'maxBytes': 1024 * 1024 * 5, # æ—¥å¿—æ–‡ä»¶çš„æœ€å¤§å¤§å°ä¸º5M è¶…å‡ºå æ¢æ–‡ä»¶ 'backupCount': 5, # æœ€å¤šç•™äº”ä¸ªæ—¥å¿—æ–‡ä»¶ 'encoding': 'utf-8', &#125;, &#125;, 'loggers': &#123; # åœ¨getLoggerçš„æ—¶å€™ å¦‚æœæŒ‡å®šçš„åç§° ä¸å­˜åœ¨ æˆ–è€…ä¸ç»™åç§° ç”¨çš„å°±æ˜¯é»˜è®¤çš„ # åœ¨è¿™é‡Œå¦‚æœkeyä¸ºç©º å®ƒå°±æ˜¯é»˜è®¤çš„ # ä½ å¯ä»¥è‡ªå·±å®šä¹‰ç”Ÿæˆå™¨çš„åç§° å¹¶ä¸”ä»–ä»¬è¿˜èƒ½ä½¿ç”¨ç›¸åŒçš„é»˜è®¤é…ç½® '': &#123; 'handlers': ['default', 'console'], 'level': 'DEBUG', 'propagate': False, &#125;, &#125;,&#125; 1234567# core/shop.pyimport lib.commonlogger = lib.common.get_logger()def shopping(): print("å¼€å§‹è´­ç‰©") logger.debug("è´­ç‰©æˆåŠŸ") 1234567# lib/common.pyimport conf.settingsimport logging.configdef get_logger(): logging.config.dictConfig(conf.settings.LOGGING_DIC) return logging.getLogger("main") åœ¨ä»£ç è¿è¡Œåï¼Œåœ¨shop.pyæ¨¡å—ä¸­å¯¼å…¥äº†lib.commonæ¨¡å—ï¼Œåœ¨common.pyæ¨¡å—ä¸­å¯¼å…¥äº†conf.settingsæ¨¡å—ï¼Œæ¥è·å–å…·ä½“çš„æ—¥å¿—é…ç½®ï¼Œå› ä¸ºgetLogger(â€˜mainâ€™)é‡Œé¢çš„mainåœ¨settingsé‡Œé¢æ²¡æœ‰ï¼Œæ‰€ä»¥ä½¿ç”¨é»˜è®¤çš„æ—¥å¿—é…ç½®ï¼Œå¦‚ä¸‹ï¼š 123456789'loggers': &#123; # åœ¨getLoggerçš„æ—¶å€™ å¦‚æœæŒ‡å®šçš„åç§° ä¸å­˜åœ¨ æˆ–è€…ä¸ç»™åç§° ç”¨çš„å°±æ˜¯é»˜è®¤çš„ # åœ¨è¿™é‡Œå¦‚æœkeyä¸ºç©º å®ƒå°±æ˜¯é»˜è®¤çš„ # ä½ å¯ä»¥è‡ªå·±å®šä¹‰ç”Ÿæˆå™¨çš„åç§° å¹¶ä¸”ä»–ä»¬è¿˜èƒ½ä½¿ç”¨ç›¸åŒçš„é»˜è®¤é…ç½® '': &#123; 'handlers': ['default', 'console'], 'level': 'DEBUG', 'propagate': False, &#125; ç„¶åé¦–å…ˆè¿›è¡Œlevel=â€™DEBUGâ€™çš„è¿‡æ»¤ï¼Œå› ä¸ºshoppingä¸­çš„æ—¥å¿—ä¿¡æ¯çº§åˆ«ä¸ºdebugï¼Œæ‰€ä»¥ä¼šé€šè¿‡è¿›å…¥handlersé‡Œé¢è¿›è¡Œç¬¬äºŒæ¬¡è¿‡æ»¤ï¼Œåœ¨handlersé‡Œé¢æœ‰ä¸¤ä¸ªé…ç½®ï¼Œä¸€ä¸ªä¸ºdefaulté…ç½®ï¼Œä¸€ä¸ªå‘³consoleé…ç½®ï¼Œåœ¨defaulté…ç½®ä¸­ï¼Œå…·ä½“é…ç½®å¦‚ä¸‹ï¼š 123456789'default': &#123; 'level': 'DEBUG', 'class': 'logging.handlers.RotatingFileHandler', 'formatter': 'standard', 'filename': logfile_path, # 'maxBytes': 1024 * 1024 * 5, # æ—¥å¿—æ–‡ä»¶çš„æœ€å¤§å¤§å°ä¸º5M è¶…å‡ºå æ¢æ–‡ä»¶ 'backupCount': 5, # æœ€å¤šç•™äº”ä¸ªæ—¥å¿—æ–‡ä»¶ 'encoding': 'utf-8', &#125; å‘ç°æ—¥å¿—çº§åˆ«ä¸ºDEBUGï¼Œæ‰€ä»¥ä»ç„¶ä¸ä¼šè¿‡æ»¤ï¼Œæ¥ä¸‹æ¥å°±æ˜¯æ ¼å¼åŒ–è¾“å‡ºåˆ°æŒ‡å®šæ–‡ä»¶äº†ï¼Œformatterä¸ºstandardæ¨¡å¼ï¼Œfilenameä¹‹å‰éƒ½å·²ç»å®šä¹‰å¥½äº†ï¼ŒåŒç†consoleåŒç†è¾“å‡ºåˆ°æ§åˆ¶å°ã€‚]]></content>
      <categories>
        <category>Python</category>
      </categories>
      <tags>
        <tag>æ¨¡å—</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[pythonæ¨¡å—ä¹‹xml]]></title>
    <url>%2F2018%2F10%2F18%2Fpython%E6%A8%A1%E5%9D%97%E4%B9%8Bxml%2F</url>
    <content type="text"><![CDATA[xmlæ¨¡å— xmlç»“æ„ xmlæ˜¯ç§å®ç°ä¸åŒè¯­è¨€æˆ–ç¨‹åºä¹‹é—´è¿›è¡Œæ•°æ®äº¤æ¢çš„åè®®ï¼Œè·Ÿjsonå·®ä¸å¤šï¼Œä½†æ²¡jsonä½¿ç”¨ç®€å•ã€‚ä½†æ˜¯å› ä¸ºå†å²é—ç•™é—®é¢˜ï¼Œè‡³ä»Šå¾ˆå¤šè¡Œä¸šä¾ç„¶ä½¿ç”¨xmlè¿™ç§æ•°æ®æ ¼å¼ã€‚ xmlçš„æ ¼å¼å¦‚ä¸‹ï¼Œæ˜¯é€šè¿‡&lt;&gt;èŠ‚ç‚¹æ¥åŒºåˆ«æ•°æ®ç»“æ„çš„ã€‚ 12345678910111213141516171819&lt;?xml version="1.0" encoding="utf-8"?&gt;&lt;friendsinfo&gt; &lt;frd age="22" name="ä»»ç›¼æ™¨"&gt; &lt;info qq="1114893928" wechat="Dmgwood" /&gt; &lt;/frd&gt; &lt;frd age="22" name="è¢é–"&gt; &lt;info qq="2410152779" wechat="wxid_2vykc0sjoiie21" /&gt; &lt;/frd&gt; &lt;frd age="22" name="å«ä¸€å¸†"&gt; &lt;info qq="97280940" wechat="oOC" /&gt; &lt;/frd&gt; &lt;frd age="22" name="èƒ¡æ–‡æ¶›"&gt; &lt;info qq="2522864970" wechat="hu2522864970" /&gt; &lt;/frd&gt;&lt;/friendsinfo&gt; è¯­æ³•ç»“æ„ ä»»ä½•çš„èµ·å§‹æ ‡ç­¾éƒ½å¿…é¡»æœ‰ä¸€ä¸ªç»“æŸæ ‡ç­¾ã€‚ &lt;&gt; &lt;/&gt; å¯ä»¥é‡‡ç”¨å¦ä¸€ç§ç®€åŒ–è¯­æ³•ï¼Œå¯ä»¥åœ¨ä¸€ä¸ªæ ‡ç­¾ä¸­åŒæ—¶è¡¨ç¤ºèµ·å§‹å’Œç»“æŸæ ‡ç­¾ã€‚è¿™ç§è¯­æ³•æ˜¯åœ¨å¤§äºå·ä¹‹å‰ç´§è·Ÿä¸€ä¸ªæ–œæ (/)ï¼Œä¾‹å¦‚ï¼Œè§£æå™¨ä¼šå°†å…¶ç¿»è¯‘æˆ æ ‡ç­¾å¿…é¡»æŒ‰åˆé€‚çš„é¡ºåºè¿›è¡ŒåµŒå¥—ï¼Œæ‰€ä»¥ç»“æŸæ ‡ç­¾å¿…é¡»æŒ‰é•œåƒé¡ºåºåŒ¹é…èµ·å§‹æ ‡ç­¾ã€‚è¿™å¥½æ¯”å°†èµ·å§‹å’Œç»“æŸæ ‡ç­¾çœ‹ä½œæ˜¯æ•°å­¦ä¸­çš„å·¦å³ç½—æµ©ï¼šåœ¨æ²¡æœ‰å…³é—­æ‰€æœ‰çš„å†…éƒ¨æ‹¬å·ä¹‹å‰ï¼Œæ˜¯ä¸èƒ½å…³é—­å¤–é¢æ‹¬å·çš„ã€‚ æ‰€æœ‰çš„ç‰¹æ€§éƒ½å¿…é¡»æœ‰å€¼ã€‚ æ‰€æœ‰çš„ç‰¹æ€§éƒ½å¿…é¡»åœ¨å€¼å¾—å‘¨å›´åŠ ä¸ŠåŒå¼•å·ã€‚ ä¸€ä¸ªæ ‡ç­¾çš„ç»„æˆéƒ¨åˆ†åŒ…æ‹¬ï¼šæ ‡ç­¾åã€å±æ€§åä»¥åŠå±æ€§å€¼ã€è¿˜æœ‰æ–‡æœ¬å†…å®¹ï¼ˆå¯ä»¥æ²¡æœ‰ï¼‰ åŒæ ‡ç­¾çš„å†™æ³•ï¼š 1&lt;tagename 'å±æ€§åç§°'="å±æ€§å€¼"&gt;æ–‡æœ¬å†…å®¹&lt;/tagname&gt; å•æ ‡ç­¾çš„å†™æ³•ï¼š 1&lt;tagename å±æ€§åç§°="å±æ€§å€¼"/&gt; æ€»ç»“ï¼šxmlä¹Ÿæ˜¯ä¸€ç§ä¸­é—´æ ¼å¼ï¼Œä¹Ÿå±äºåºåˆ—åŒ–æ–¹å¼ä¹‹ä¸€ï¼Œä¸jsonæ¯”è¾ƒï¼ŒåŒæ ·çš„æ•°æ®jsonä¼šæ›´å°ï¼Œæ•ˆç‡æ›´é«˜ï¼›xmléœ€è¦æ ¹æ®æ–‡æ¡£ç»“æ„æ‰‹åŠ¨è§£æï¼Œè€Œjsonç›´æ¥å¯ä»¥è½¬ä¸ºpythonæ•°æ®å¯¹è±¡ã€‚ xmlæ¨¡å—ç”¨æ³• 1234567891011121314151617181920212223# d.xml&lt;?xml version="1.0" encoding="utf-8"?&gt;&lt;studentinfo&gt; &lt;stu age="20" name="å¼ ä¸‰"&gt; &lt;girlfriend age="19" name="å¼ ä¸‰çš„å¥³æœ‹å‹" /&gt; &lt;/stu&gt; &lt;stu age="20" name="æå››"&gt; &lt;girlfriend age="19" name="æå››çš„å¥³æœ‹å‹" /&gt; &lt;/stu&gt; &lt;age num="1"&gt; &lt;age num="2"&gt; &lt;age num="3"&gt; &lt;/age&gt; &lt;/age&gt; &lt;/age&gt; &lt;age&gt; &lt;/age&gt;&lt;/studentinfo&gt; 1234567891011121314151617181920212223242526import xml.etree.ElementTree as ElementTreetree = ElementTree.parse('d.xml')rootTree = tree.getroot()# ä¸‰ç§è·å–æ ‡ç­¾çš„æ–¹å¼# 1. è·å–æ‰€æœ‰äººçš„å¹´é¾„ï¼Œiterç”¨äºåœ¨å…¨æ–‡èŒƒå›´è·å–æ ‡ç­¾for item in rootTree.iter('age'): # ä¸€ä¸ªæ ‡ç­¾ä¸‰ä¸ªç»„æˆéƒ¨åˆ† print(item.tag) # æ ‡ç­¾åç§° print(item.attrib) # æ ‡ç­¾çš„å±æ€§ print(item.text) # æ–‡æœ¬å†…å®¹# 2. ä»å½“å‰æ ‡ç­¾çš„å­æ ‡ç­¾ä¸­æ‰¾åˆ°ä¸€ä¸ªåç§°ä¸ºageçš„æ ‡ç­¾ï¼Œå¦‚æœæœ‰å¤šä¸ªï¼Œæ‰¾åˆ°çš„æ˜¯ç¬¬ä¸€ä¸ªprint(rootTree.find('age').attrib)# 3. ä»å½“å‰æ ‡ç­¾çš„å­æ ‡ç­¾ä¸­æ‰¾åˆ°æ‰€æœ‰åç§°ä¸ºageçš„æ ‡ç­¾print(rootTree.findall('age'))# è·å–å•ä¸ªå±æ€§stu = rootTree.find('stu')print(stu.get("age"))print(stu.get("name"))# åˆ é™¤å­æ ‡ç­¾rootTree.remove(stu)# æ·»åŠ å­æ ‡ç­¾newTag = ElementTree.Element('è¿™æ˜¯æ–°æ ‡ç­¾', &#123;'ä¸€ä¸ªå±æ€§': 'å€¼'&#125;)rootTree.append(newTag)# å†™å…¥æ–‡ä»¶tree.write('f.xml', encoding='utf-8')]]></content>
      <categories>
        <category>Python</category>
      </categories>
      <tags>
        <tag>æ¨¡å—</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[pythonæ¨¡å—ä¹‹configparseræ¨¡å—]]></title>
    <url>%2F2018%2F10%2F18%2Fpython%E4%B9%8Bconfigparser%E6%A8%A1%E5%9D%97%2F</url>
    <content type="text"><![CDATA[ä¸€ ä»€ä¹ˆæ˜¯configparserï¼Ÿconfigparseræ˜¯ç”¨äºè§£æé…ç½®æ–‡ä»¶çš„æ¨¡å—ã€‚ä»€ä¹ˆæ˜¯é…ç½®æ–‡ä»¶å‘¢ï¼ŸåŒ…å«é…ç½®ç¨‹åºä¿¡æ¯çš„æ–‡ä»¶å°±ç§°ä¸ºé…ç½®æ–‡ä»¶ã€‚ä»€ä¹ˆæ ·çš„æ•°æ®åº”è¯¥ä½œä¸ºé…ç½®ä¿¡æ¯å‘¢ï¼Ÿéœ€è¦ä¿®æ”¹ä½†æ˜¯ä¸ç»å¸¸æ”¹çš„ä¿¡æ¯å°±å¯ä»¥ä½œä¸ºé…ç½®ä¿¡æ¯ï¼Œæ¯”å¦‚æ•°æ®æ–‡ä»¶çš„è·¯å¾„ã€‚ äºŒ ä»€ä¹ˆæ˜¯é…ç½®æ–‡ä»¶ï¼Ÿé…ç½®æ–‡ä»¶ä¸­åªæœ‰ä¸¤ç§å†…å®¹ï¼š sectionï¼Œåˆ†åŒº optionï¼Œé€‰é¡¹ï¼Œæ˜¯é”®å€¼å¯¹çš„å½¢å¼ ä¸‰ configparserçš„ä½¿ç”¨wiki12345678910# useinfo.cfg[user]name1 = musibiiname2 = thalesname3 = ddd[password]password1 = woshinibabapassword2 = 123456password3 = 123 1234567891011121314151617181920212223242526import configparser# åˆ›å»ºä¸€ä¸ªè§£æå™¨config = configparser.ConfigParser()# è¯»å–å¹¶è§£æcfgæ–‡ä»¶config.read('useinfo.cfg', encoding='utf-8')# è·å–æ‰€æœ‰sectionprint(config.sections())# è·å–æŸä¸ªåˆ†åŒºä¸‹æ‰€æœ‰optionprint(config.options('user'))# è·å–æŸä¸ªé€‰é¡¹å…·ä½“çš„å€¼print(config.get('user', 'name1'))# getè¿”å›çš„éƒ½æ˜¯å­—ç¬¦ä¸²ç±»å‹ï¼Œå¦‚æœéœ€è¦è½¬æ¢ç±»å‹ï¼Œç›´æ¥ä½¿ç”¨get+å¯¹åº”çš„ç±»å‹(boolï¼Œintï¼Œfloat)print(config.getint('password', 'password1'))# æ˜¯å¦æœ‰æŸä¸ªé€‰é¡¹ï¼Œè¿”å›å¸ƒå°”å€¼config.has_option()# æ˜¯å¦æœ‰æŸä¸ªåˆ†åŒºconfig.has_section()# ä¸å¸¸ç”¨çš„ä¸€äº›æ–¹æ³•# æ·»åŠ åˆ†åŒº(å¿…é¡»å…ˆæ·»åŠ åˆ†åŒºæ‰å¯ä»¥ä¿®æ”¹åˆ†åŒºä¸‹é¢çš„å€¼)config.add_section('server')config.set('server', 'usr', '192.168.1.1')# åˆ é™¤é€‰é¡¹config.remove_option('user', 'name1')# å†™å…¥æ–‡ä»¶with open('useinfo.cfg', 'wt', encoding='ust-8') as f: config.write(f) ä½¿ç”¨ä¾‹å­: 1234# admin.cfg[admin]name=maffiapassword=woshinibaba 1234567891011121314# test.pyimport configparserconfig = configparser.ConfigParser()# è·å–è´¦å·å’Œå¯†ç ä¿¡æ¯def load_admin(): admin_info = [] config.read(admin.cfg, encoding='utf-8') sections = config.sections() for item in sections: user_dic = &#123;'name': config.get(item, 'name'), 'password': config.get(item, 'password')&#125; admin_info.append(user_dic) return admin_info]]></content>
      <categories>
        <category>Python</category>
      </categories>
      <tags>
        <tag>æ¨¡å—</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[pythonæ¨¡å—ä¹‹pickleã€shelveã€json]]></title>
    <url>%2F2018%2F10%2F17%2Fpython%E5%BA%8F%E5%88%97%E5%8C%96%E6%95%B0%E6%8D%AE%E6%A8%A1%E5%9D%97%2F</url>
    <content type="text"><![CDATA[ä¸€ ä»€ä¹ˆæ˜¯åºåˆ—åŒ–åºåˆ—åŒ–æŒ‡çš„æ˜¯å°†å†…å­˜ä¸­çš„æ•°æ®ç»“æ„è½¬åŒ–ä¸ºä¸€ç§ä¸­é—´æ ¼å¼ï¼Œå¹¶å­˜å‚¨åˆ°ç¡¬ç›˜ä¸Šã€‚ ï¼ˆååºåˆ—åŒ–ï¼šå°†ç¡¬ç›˜ä¸Šå­˜å‚¨çš„ä¸­é—´æ ¼å¼æ•°æ®å†è¿˜åŸä¸ºå†…å­˜ä¸­çš„æ•°æ®ç»“æ„ï¼‰ äºŒ ä¸ºä»€ä¹ˆè¦åºåˆ—åŒ– æŒä¹…ä¿æŒçŠ¶æ€ éœ€çŸ¥ä¸€ä¸ªè½¯ä»¶/ç¨‹åºçš„è¿è¡Œå°±æ˜¯å¤„ç†ä¸€ç³»åˆ—çŠ¶æ€çš„å˜åŒ–ï¼Œåœ¨ç¼–ç¨‹è¯­è¨€ä¸­ï¼Œâ€˜çŠ¶æ€â€˜ä¼šä»¥å„ç§æœ‰ç»“æ„çš„æ•°æ®ç±»å‹(ä¹Ÿå¯ä»¥ç§°ä¹‹ä¸ºå˜é‡)çš„å½¢å¼ä¿å­˜åœ¨å†…å­˜ä¸­ã€‚ å†…å­˜æ˜¯æ— æ³•æ°¸ä¹…ä¿å­˜æ•°æ®çš„ï¼Œå½“ç¨‹åºè¿è¡Œäº†ä¸€æ®µæ—¶é—´ï¼Œæˆ‘ä»¬æ–­ç”µæˆ–è€…é‡å¯ç¨‹åºï¼Œå†…å­˜ä¸­å…³äºè¿™ä¸ªç¨‹åºä¹‹å‰ä¸€æ®µæ—¶é—´çš„æ•°æ®éƒ½ä¼šè¢«æ¸…ç©ºã€‚ åœ¨æ–­ç”µæˆ–é‡å¯ç¨‹åºä¹‹å‰å°†ç¨‹åºå½“å‰è¿è¡Œçš„æ•°æ®ä¿å­˜ä¸‹æ¥ï¼Œä¾¿äºä¸‹æ¬¡ç¨‹åºæ‰§è¡Œèƒ½å¤Ÿä»æ–‡ä»¶ä¸­è½½å…¥ä¹‹å‰çš„æ•°æ®ï¼Œç„¶åç»§ç»­æ‰§è¡Œï¼Œè¿™å°±æ˜¯åºåˆ—åŒ–ã€‚ æ•°æ®è·¨å¹³å°äº¤äº’ åºåˆ—åŒ–æ•°æ®ä¹‹åï¼Œä¸ä»…å¯ä»¥æŠŠåºåˆ—åŒ–åçš„å†…å®¹å†™å…¥ç¡¬ç›˜ï¼Œè¿˜å¯ä»¥é€šè¿‡ç½‘ç»œä¼ è¾“åˆ°åˆ«çš„æœºå™¨ä¸Šï¼Œå¦‚æœæ”¶å‘çš„åŒæ–¹çº¦å®šéƒ½ä½¿ç”¨ä¸€ç§åºåˆ—åŒ–çš„æ ¼å¼ï¼Œé‚£ä¹ˆä¾¿æ‰“ç ´äº†å¹³å°å’Œè¯­è¨€å¸¦æ¥çš„é™åˆ¶ï¼Œå®ç°äº†è·¨å¹³å°äº¤äº’ã€‚ åè¿‡æ¥ï¼ŒæŠŠå˜é‡å†…ä»ä»åºåˆ—åŒ–çš„å¯¹è±¡é‡æ–°è¯»åˆ°å†…å­˜é‡Œç§°ä¹‹ä¸ºååºåˆ—åŒ–ï¼Œå³unpickingã€‚ ä¸‰ åºåˆ—åŒ–æ•°æ®çš„ä¸‰ä¸ªæ¨¡å—ä¸€ pickleæ¨¡å—pickleæ¨¡å—æ—¶pythonå†…ç½®çš„ç”¨æ¥åºåˆ—åŒ–pythonæ•°æ®æ ¼å¼çš„æ¨¡å—ï¼Œæ”¯æŒåºåˆ—åŒ–pythonä¸­æ‰€æœ‰çš„æ•°æ®ç±»å‹ï¼Œä¸»è¦æ–¹æ³•æœ‰å››ä¸ªï¼› dumps 12345678import picklename = 'musibii'age = 18height = 1.7user = &#123;'name': name, 'age': age, 'height': height&#125;with open('userinfo.pkl', 'ab') as f: userbytes = pickle.dumps(user) f.write(userbytes) loads 12345import picklewith open('userinfo.pkl', 'rb') as f: userbytes = f.read() user = pickle.loads(userbytes) print(user) ä¸dumpså’Œloadså¯¹åº”çš„ä¸¤ä¸ªæ–¹æ³•æ›´ç®€å•ã€‚ dump 123import picklewith open('userinfo.pkl', 'ab') as f: pickle.dump(user, f) load 1234import picklewith open('userinfo.pkl', 'rb') as f: user = pickle.load(f) print(user) äºŒ shelveæ¨¡å—shevlveæ¨¡å—ä¹Ÿç”¨äºåºåˆ—åŒ–ï¼Œå®ƒå’Œpickleæ¨¡å—ä¸åŒçš„åœ°æ–¹åœ¨äºï¼Œä¸éœ€è¦å…³å¿ƒæ–‡ä»¶æ¨¡å¼ï¼Œç›´æ¥æŠŠæ•°æ®å½“æˆå­—å…¸æ¥çœ‹å¾…ã€‚è€Œä¸”shelveæ¨¡å—å¯ä»¥ç›´æ¥å¯¹æ•°æ®è¿›è¡Œä¿®æ”¹ï¼Œè€Œä¸ç”¨è¦†ç›–ä¹‹å‰çš„æ•°æ®ï¼Œä½†pickleè¦æƒ³ä¿®æ”¹çš„è¯åªèƒ½ä½¿ç”¨wbæ¨¡å¼è¦†ç›– shelveåªæœ‰ä¸€ä¸ªæ–¹æ³•openï¼Œæ‰€ä»¥ä½¿ç”¨èµ·æ¥ä¹Ÿå¾ˆæ–¹ä¾¿ã€‚åŒæ ·çš„ï¼Œshelveä¹Ÿæ”¯æŒpythonä¸­æ‰€æœ‰çš„æ•°æ®æ ¼å¼ã€‚ 12345import shelveuser = &#123;'name': 'musibii'&#125;s = shelve.open('userdb.shv')s['user'] = users.close() ä¸‰ jsonæ¨¡å—1 jsonæ˜¯ä»€ä¹ˆJSONæ˜¯Java script object notationçš„ç¼©å†™ï¼Œç¿»è¯‘è¿‡æ¥å°±æ˜¯jså¯¹è±¡æ ‡è¯†æ³•ã€‚ å¯¹äºå¼€å‘è€…è€Œè¨€ï¼Œjsonæ˜¯ä¸€ç§é€šç”¨çš„æ•°æ®æ ¼å¼ï¼Œä»»ä½•è¯­è¨€éƒ½èƒ½è§£æï¼Œæ‰€ä»¥æ¯ç§è¯­è¨€éƒ½ä¼šæœ‰å¤„ç†jsonæ ¼å¼æ•°æ®çš„éœ€æ±‚ã€‚ jsonè¯­æ³• js ä¸­çš„æ•°æ®ç±»å‹ pythonæ•°æ®ç±»å‹ çš„å¯¹åº”å…³ç³» {} å­—å…¸ [] list string â€œâ€ str int/float int/float true/false True/False null None jsonæ ¼å¼çš„è¯­æ³•è§„èŒƒ æœ€å¤–å±‚é€šå¸¸æ˜¯ä¸€ä¸ªå­—å…¸æˆ–åˆ—è¡¨ {}or[]ï¼Œå¦‚æœæƒ³å®šä¹‰jsonæ ¼å¼çš„æ•°æ®ï¼Œé‚£ä¹ˆæœ€å¤–å±‚ç›´æ¥å†™{}ï¼Œè€Œä¸”jsonä¸­çš„å­—ç¬¦ä¸²å¿…é¡»æ˜¯åŒå¼•å·ï¼Œjsonç†è®ºä¸Šå¯ä»¥åµŒå¥—ä»»æ„å¤šçš„å±‚æ¬¡ã€‚ 2 ä¸ºä»€ä¹ˆç”¨jsonè™½ç„¶ä¹‹å‰çš„pickleå’Œshelveéƒ½å¾ˆå¼ºå¤§ï¼Œè€Œä¸”ä½¿ç”¨ä¹Ÿéå¸¸æ–¹ä¾¿ï¼Œé‚£ä¹ˆä¸ºä»€ä¹ˆè¿˜å‡ºæ¥jsonå‘¢ï¼Ÿè¿™æ˜¯å› ä¸ºpickleå’Œshevleåºåˆ—åŒ–ä¹‹åçš„æ•°æ®åªæœ‰pythonæ‰èƒ½è§£æå‡ºæ¥ï¼Œè€Œé€šå¸¸åœ¨å®é™…ç”Ÿäº§å¼€å‘ä¸­ï¼Œéƒ½æ˜¯éœ€è¦æ•°æ®å¯ä»¥è·¨å¹³å°ä½¿ç”¨çš„ã€‚ 3 jsonçš„ä½¿ç”¨jsonæ¨¡å—çš„æ ¸å¿ƒæ–¹æ³• dump dumps load loads ä¸å¸¦sçš„ç›´æ¥å°è£…äº†writeå’Œreadæ–¹æ³•ã€‚ dump 1234567891011121314import jsonjsontext = """&#123; "users": [&#123; "name": "musibii", "age": 18 &#125;, &#123; "name": "thales", "age": 23 &#125; ]&#125;"""with open('a.json', 'wt', encoding='utf-8') as f: json.dump(jsontext, f) dumps 1234567891011121314import jsonjsontext = """&#123; "users": [&#123; "name": "musibii", "age": 18 &#125;, &#123; "name": "thales", "age": 23 &#125; ]&#125;"""with open('a.json', 'wt', encoding='utf-8') as f: f.write(json.dumps(jsontext)) load 123import jsonwith open('a.json', 'rt', encoding='utf-8') as f: print(json.load(f)) loads 1234import jsonwith open('a.json', 'rt', encoding='utf-8') as f: res = json.loads(f.read()) print(res)]]></content>
      <categories>
        <category>Python</category>
      </categories>
      <tags>
        <tag>æ¨¡å—</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[pythonæ¨¡å—ä¹‹shutil]]></title>
    <url>%2F2018%2F10%2F17%2Fpython%E6%A8%A1%E5%9D%97%E4%B9%8Bshutil%2F</url>
    <content type="text"><![CDATA[shutilæ˜¯ä¸€ä¸ªç”¨äºç®€åŒ–æ–‡ä»¶æ“ä½œçš„æ¨¡å—ã€‚ å¤åˆ¶æ–‡ä»¶ï¼ˆä¼ å…¥æºæ–‡ä»¶å¯¹è±¡å’Œç›®æ ‡æ–‡ä»¶å¯¹è±¡ï¼‰ 1234import shutilf1 = open(r'/Users/jingxing/PycharmProjects/day20/test.py', 'rb')f2 = open(r'/Users/jingxing/PycharmProjects/day20/test_test.py', 'rb')shutil.copyfileobj(f1, f2) å‹ç¼©æ–‡ä»¶ 123import shutilshutil.make_archive('myzip', 'zip', r'/Users/jingxing/PycharmProjects/day20')shutil.make_archive('mytar', 'tar', r'/Users/jingxing/PycharmProjects/day20') è§£å‹æ–‡ä»¶ 123import shutilshutil.unpack_archive(r'/Users/jingxing/PycharmProjects/day20/myzip.zip')shutil.unpack_archive(r'/Users/jingxing/PycharmProjects/day20/mytar.tar') å…¶ä»–ä¸¤ä¸ªç”¨äºè§£å‹çš„æ¨¡å— zipfileä»åå­—å¯ä»¥çœ‹å‡ºæ¥æ˜¯è§£å‹zipå‹ç¼©æ–‡ä»¶çš„æ¨¡å—ã€‚ è§£å‹ 1234import zipfilez = zipfile.ZipFile(r'/Users/jingxing/PycharmProjects/day20/myzip.zip', 'r')z.extractall(path=r'/Users/jingxing/PycharmProjects/day20')z.close() å¾€å‹ç¼©åŒ…ä¸­æ·»åŠ æ–‡ä»¶ 12345import zipfilez = zipfile.ZipFile(r"/Users/jingxing/PycharmProjects/pythonå…¨æ ˆ/day20/ä»£ç /myå‹ç¼©.tar","w")z.write("1.æ˜¨æ—¥å›é¡¾")z.write("2.ä»Šæ—¥å†…å®¹")z.close() tarfile è§£å‹ 1234import tarfilet = tarfile.open(r"/Users/jingxing/PycharmProjects/pythonå…¨æ ˆ/day20/ä»£ç /myå‹ç¼©.tar","w")t.extractall(r"/Users/jingxing/PycharmProjects/pythonå…¨æ ˆ/day19")t.close() å¾€å‹ç¼©åŒ…ä¸­æ·»åŠ æ–‡ä»¶ 12345port tarfilet = tarfile.open(r"/Users/jingxing/PycharmProjects/pythonå…¨æ ˆ/day20/ä»£ç /myå‹ç¼©.tar","w")t.add("1.æ˜¨æ—¥å›é¡¾")t.add("2.ä»Šæ—¥å†…å®¹")t.close()]]></content>
      <categories>
        <category>Python</category>
      </categories>
      <tags>
        <tag>æ¨¡å—</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[pythonæ¨¡å—ä¹‹random]]></title>
    <url>%2F2018%2F10%2F17%2Fpython%E6%A8%A1%E5%9D%97%E4%B9%8Brandom%2F</url>
    <content type="text"><![CDATA[pythonçš„éšæœºæ•°æ¨¡å—ä¸ºrandomæ¨¡å—ï¼Œå¯ä»¥äº§ç”Ÿéšæœºçš„æ•´æ•°æˆ–æµ®ç‚¹æ•°ã€‚ä½†æ˜¯è¿™æ˜¯ä¼ªéšæœºæ•°ï¼Œpythonè§£é‡Šå™¨ä¼šç»´æŠ¤ä¸€äº›ç§å­æ•°ï¼Œç„¶åæ ¹æ®ç®—æ³•ç®—å‡ºéšæœºæ•°ã€‚linuxç»´æŠ¤äº†ä¸€ä¸ªç†µæ± ï¼Œè¿™ä¸ªç†µæ± æ”¶é›†å™ªéŸ³çš„ä¿¡æ¯ï¼Œæ›´æ¥è¿‘çœŸéšæœºæ•°ã€‚ random éšæœºäº§ç”Ÿ0-1çš„æµ®ç‚¹æ•°ï¼Œä¸åŒ…æ‹¬1 123import randomprint(random.random())# è¿è¡Œç»“æœ 0.8517652068795716 éšæœºäº§ç”Ÿa-bçš„æ•´æ•°ï¼ŒåŒ…æ‹¬aå’Œb 12345import randoma = 1b = 10print(random.randint(a, b))# è¿è¡Œç»“æœ 4 éšæœºäº§ç”Ÿa-bï¼Œä¸åŒ…æ‹¬aå’Œbçš„æ•´æ•° 12345import randoma = 1b = 10print(random.randrange(a, b))# è¿è¡Œç»“æœ 7 æŒ‡å®šä¸€ä¸ªèŒƒå›´å¹¶æŒ‡å®šéœ€è¦äº§ç”Ÿçš„éšæœºä¸ªæ•° 123import randomprint(random.sample(['aa', ['a', 'b'], 3, 4, 5], 2))# è¿è¡Œç»“æœ [['a', 'b'], 5] æ‰“ä¹±åˆ—è¡¨çš„é¡ºåºï¼ˆè¿”å›Noneï¼‰ 12345import randomls = [1, 2, 3, 4, 5, 9, 11]random.shuffle(ls)print(ls)# è¿è¡Œç»“æœ [1, 9, 2, 5, 4, 11, 3] ä»ç»™å®šçš„åºåˆ—ä¸­éšæœºé€‰ä¸€ä¸ª 123import randomprint(random.choice([1,2,3,4,5,6]))# è¿è¡Œç»“æœ 2 ä»ç»™å®šçš„åºåˆ—ä¸­éšæœºé€‰å¤šä¸ªï¼ˆåŒ…æ‹¬1ä¸ªï¼Œè¿”å›ä¸€ä¸ªåˆ—è¡¨ï¼‰ 123import randomprint(random.choices((1,2,3,4,5,6,7), k=3))# è¿è¡Œç»“æœ [6, 5, 5] åˆ¶ä½œéšæœºéªŒè¯ç  12345678910import randomdef get_verifycode(length): res = '' for i in range(length): a = random.randint(0, 9) b = chr(random.randint(65, 90)) c = chr(random.randint(97, 122)) s = random.choice([a, b, c]) res += s return res]]></content>
      <categories>
        <category>Python</category>
      </categories>
      <tags>
        <tag>æ¨¡å—</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[pythonæ¨¡å—ä¹‹sysä¸os]]></title>
    <url>%2F2018%2F10%2F17%2FPython%E5%B8%B8%E7%94%A8%E6%A8%A1%E5%9D%97%E4%B9%8Bsys%E4%B8%8Eos%2F</url>
    <content type="text"><![CDATA[pythonå¸¸ç”¨æ¨¡å—ç³»åˆ—ï¼ˆäºŒï¼‰ï¼šsysæ¨¡å—ä¸osæ¨¡å— sysæ¨¡å—æ˜¯pythonè§£é‡Šå™¨å’Œç¯å¢ƒæœ‰å…³çš„ä¸€ä¸ªæ¨¡å—ï¼› osæ˜¯pythonç”¨æ¥å’Œæ“ä½œç³»ç»Ÿè¿›è¡Œäº¤äº’çš„ä¸€ä¸ªæ¨¡å—ã€‚ ä¸€ sys æŸ¥çœ‹å½“å‰ç¯å¢ƒå˜é‡ æŸ¥çœ‹å·²ç»åŠ è½½çš„æ¨¡å— å¯ä»¥çœ‹å‡ºsys.modulesæ˜¯ä¸€ä¸ªå­—å…¸ï¼Œkeyä¸ºåŠ è½½æ¨¡å—çš„åå­—ï¼Œvaluesä¸ºåŠ è½½æ¨¡å—çš„è·¯å¾„ã€‚ è·å–ç»ˆç«¯è°ƒç”¨æ—¶çš„å‚æ•° ç»ˆç«¯è¾“å…¥çš„å‚æ•°ä¸ºargv[1]ï¼Œé»˜è®¤å½“å‰æ–‡ä»¶åä¸ºç¬¬ä¸€ä¸ªå‚æ•°ã€‚ è·å–è§£é‡Šå™¨çš„ç‰ˆæœ¬ä¿¡æ¯ è·å–å½“å‰è¿è¡Œå¹³å°åç§°ï¼ˆwindowsä¸ºntï¼ŒmacOSä¸ºdarwinï¼‰ é€€å‡ºä¿¡å· 123import syssys.exit(0) # æ­£å¸¸é€€å‡ºsys.exit(1) # é”™è¯¯é€€å‡º æ¥å£ç‰ˆæœ¬ 123import sysprint(sys.api_version)# è¿è¡Œç»“æœ 1013 äº†è§£ 123456import sysprint(sys.maxsize)print(sys.maxunicode)# è¿è¡Œç»“æœ# 9223372036854775807# 1114111 äºŒ os è·å–å½“å‰çš„å·¥ä½œç›®å½• 123import osprint(os.getcwd())# è¿è¡Œç»“æœ /Users/jingxing/PycharmProjects/pythonå…¨æ ˆ/day20/ä»£ç  åˆ‡æ¢å·¥ä½œç›®å½• 1234import osprint(os.chdir('/Users/jingxing/PycharmProjects/pythonå…¨æ ˆ'))print(os.getcwd())# è¿è¡Œç»“æœ /Users/jingxing/PycharmProjects/pythonå…¨æ ˆ è·å–å½“å‰ç›®å½• 123import osprint(os.curdir)# è¿è¡Œç»“æœ . è·å–ä¸Šçº§ç›®å½• 123import os print(os.pardir)# è¿è¡Œç»“æœ .. è·å–ç³»ç»Ÿçš„ç¯å¢ƒå˜é‡ 123import osprint(os.environ)# environ(&#123;'PATH': '/Users/jingxing/.nvm/versions/node/v4.9.1/bin:/Library/Frameworks/Python.framework/Versions/3.6/bin:/python_study/mongodb/bin://Volumes/python_study/mongodb/bin:/Library/Frameworks/Python.framework/Versions/3.6/bin:/usr/local/bin:/usr/bin:/bin:/usr/sbin:/sbin:/Applications/VMware Fusion.app/Contents/Public:/python_study/Applications/mongodb-osx-x86_64-3.6.3/bin::/usr/local/mysql/bin', 'COMMAND_MODE': 'unix2003', 'VERSIONER_PYTHON_VERSION': '2.7', 'LS_OPTIONS': '--color=auto', 'LOGNAME': 'jingxing', 'XPC_SERVICE_NAME': 'com.apple.xpc.launchd.oneshot.0x10000004.pycharm', 'PWD': '/Users/jingxing/PycharmProjects/pythonå…¨æ ˆ/day20/ä»£ç ', 'PYCHARM_HOSTED': '1', 'NODE_PATH': '/Users/jingxing/.nvm/versions/node/v4.9.1/lib/node_modules', 'PYCHARM_MATPLOTLIB_PORT': '49379', 'PYTHONPATH': '/Applications/PyCharm.app/Contents/helpers/pycharm_matplotlib_backend:/Users/jingxing/PycharmProjects/pythonå…¨æ ˆ', 'NVM_CD_FLAGS': '', 'NVM_DIR': '/Users/jingxing/.nvm', 'SHELL': '/bin/bash', 'LSCOLORS': 'CxfxcxdxbxegedabagGxGx', 'PYTHONIOENCODING': 'UTF-8', 'SECURITYSESSIONID': '186a7', 'VERSIONER_PYTHON_PREFER_32_BIT': 'no', 'USER': 'jingxing', 'CLICOLOR': 'Yes', 'TMPDIR': '/var/folders/yl/3drd7wf93f90sfkgpc2zg9cr0000gn/T/', 'SSH_AUTH_SOCK': '/private/tmp/com.apple.launchd.bIB1b2eyOD/Listeners', 'XPC_FLAGS': '0x0', 'PYTHONUNBUFFERED': '1', '__CF_USER_TEXT_ENCODING': '0x1F5:0x19:0x34', 'Apple_PubSub_Socket_Render': '/private/tmp/com.apple.launchd.bHuC64fYdd/Render', 'LC_CTYPE': 'zh_CN.UTF-8', 'NVM_BIN': '/Users/jingxing/.nvm/versions/node/v4.9.1/bin', 'HOME': '/Users/jingxing', '__PYVENV_LAUNCHER__': '/Library/Frameworks/Python.framework/Versions/3.6/bin/python3'&#125;) åˆ›å»ºå¤šçº§ç›®å½• 123import osos.makedirs('a/b/c')# ä¼šåœ¨å½“å‰æ–‡ä»¶è·¯å¾„åˆ›å»ºå¤šçº§ç›®å½• åˆ›å»ºä¸€ä¸ªç›®å½• 123import osos.mkdir('aa')# èƒ½ä¸”ä»…èƒ½åˆ›å»ºä¸€ä¸ªç›®å½• é€’å½’åˆ é™¤ 123import osos.removedirs('a/b/c')# é€’å½’åˆ é™¤ï¼Œåªèƒ½åˆ é™¤ç©ºç›®å½• åˆ é™¤ä¸€ä¸ªç›®å½• 123import osos.rmdir('aa')# åˆ é™¤ä¸€ä¸ªç›®å½• åˆ é™¤æ–‡ä»¶ 123import osos.remove(r'/Users/jingxing/PycharmProjects/pythonå…¨æ ˆ')# åˆ é™¤æ–‡ä»¶ åˆ—å‡ºå½“å‰ç›®å½•æ‰€æœ‰çš„æ–‡ä»¶åŠæ–‡ä»¶å¤¹ 12import osprint(os.listdir(r'/Users/jingxing/PycharmProjects/pythonå…¨æ ˆ')) è·å–å½“å‰å¹³å°è·¯å¾„åˆ†éš”ç¬¦ 123import osprint(os.seq)# è¿è¡Œç»“æœ / è·å–å½“å‰å¹³å°æ¢è¡Œç¬¦ 12import osprint(os.lineseq, end='') ä¸‰ osä¸‹çš„pathæ¨¡å— è¿”å›ç»å¯¹è·¯å¾„ 123from os import pathprint(path.abspath('a/b/c'))# è¿è¡Œç»“æœ /Users/jingxing/PycharmProjects/pythonå…¨æ ˆ/day20/ä»£ç /a/b/c å°†è·¯å¾„æ‹†åˆ†ä¸ºæ–‡ä»¶å¤¹è·¯å¾„å’Œæ–‡ä»¶åï¼ˆè¿”å›å…ƒç¥–ï¼‰ 123from os import pathprint(path.split('/Users/jingxing/PycharmProjects/pythonå…¨æ ˆ/day20/ä»£ç /5.osä¸‹pathæ¨¡å—.py'))# è¿è¡Œç»“æœ ('/Users/jingxing/PycharmProjects/pythonå…¨æ ˆ/day20/ä»£ç ', '5.osä¸‹pathæ¨¡å—.py') è·å–è·¯å¾„ä¸­çš„ä¸Šä¸€çº§ 123from os import pathprint(path.dirname(__file__))# è¿è¡Œç»“æœ /Users/jingxing/PycharmProjects/pythonå…¨æ ˆ/day20/ä»£ç  è·å–è·¯å¾„çš„æœ€åä¸€çº§åç§° 123from os import pathprint(path.basename(r'/Users/jingxing/PycharmProjects/pythonå…¨æ ˆ/day20/ä»£ç /5.osä¸‹pathæ¨¡å—.py'))# è¿è¡Œç»“æœ 5.osä¸‹pathæ¨¡å—.py åˆ¤æ–­è·¯å¾„æ˜¯å¦å­˜åœ¨ï¼ˆè¿”å›å¸ƒå°”å€¼ï¼‰ 123from os import pathprint path.exists(r'/Users/jingxing/PycharmProjects/pythonå…¨æ ˆ/day20/ä»£ç /5.osä¸‹pathæ¨¡å—.py')# è¿è¡Œç»“æœ True åˆ¤æ–­æ˜¯å¦ä¸ºç»å¯¹è·¯å¾„ï¼ˆè¿”å›å¸ƒå°”å€¼ï¼‰ 123from os import pathprint(path.isabs(r'/Users/jingxing/PycharmProjects/pythonå…¨æ ˆ/day20/ä»£ç /5.osä¸‹pathæ¨¡å—.py'))# è¿è¡Œç»“æœ True è·¯å¾„æ‹¼æ¥ 123from os import pathprint(path.join('/Users/jingxing/PycharmProjects/', 'day20'))# è¿è¡Œç»“æœ /Users/jingxing/PycharmProjects/day20 è·å–æ–‡ä»¶çš„å¤§å° 12from os import pathprint(path.getsize(r'/Users/jingxing/PycharmProjects/pythonå…¨æ ˆ')) å¤§å†™å˜å°å†™ï¼Œæ–œæ æ ¹æ®å½“å‰å¹³å°ä¿®æ”¹ 123from os import pathprint(path.normcase(r'a/\b/\c'))# è¿è¡Œç»“æœ a/\b/\c æ–œæ ä¼šä¿®æ”¹ä¸ºå½“å‰å¹³å°çš„åˆ†éš”ç¬¦ï¼Œæ‰§è¡Œ..æ¥è¿”å›ä¸Šä¸€çº§ 123from os import pathprint(path.normpath('a/b/c/../c'))# è¿è¡Œç»“æœ a/b/c]]></content>
      <categories>
        <category>Python</category>
      </categories>
      <tags>
        <tag>æ¨¡å—</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Pythonæ¨¡å—ä¹‹timeä¸datetime]]></title>
    <url>%2F2018%2F10%2F16%2FPython%E5%B8%B8%E7%94%A8%E6%A8%A1%E5%9D%97%E4%B9%8Btime%E4%B8%8Edatetime%2F</url>
    <content type="text"><![CDATA[pythonå¸¸ç”¨æ¨¡å—ç³»åˆ—ï¼ˆä¸€ï¼‰ï¼štimeæ¨¡å—ä¸datetime timeæ¨¡å—æ˜¯pythonå†…ç½®æŸ¥çœ‹å½“å‰æ—¶é—´æˆ³çš„ä¸€ä¸ªæ¨¡å—ï¼› datetimeæ¨¡å—æ˜¯ç”¨æ¥å¯¹æ—¥æœŸå’Œæ—¶é—´è¿›è¡Œæ“ä½œçš„ä¸€ä¸ªæ¨¡å—ã€‚ ä¸€ time1 è·å¾—æ—¶é—´æˆ³æ—¶é—´æˆ³ï¼šé€šå¸¸æ¥è¯´ï¼Œæ—¶é—´æˆ³è¡¨ç¤ºçš„æ˜¯ä»1970å¹´1æœˆ1æ—¥00:00:00å¼€å§‹æŒ‰ç§’è®¡ç®—çš„åç§»é‡ã€‚æˆ‘ä»¬è¿è¡Œâ€˜â€™type(time.time())â€˜â€™ï¼Œè¿”å›çš„æ˜¯floatç±»å‹ã€‚ 123import timeprint(time.time())# è¿è¡Œç»“æœ 1539678307.779871 2 ç»“æ„åŒ–æ—¶é—´å­—ç¬¦ä¸²123import timeprint(time.localtime()) # è¿”å›ä¸€ä¸ªå…ƒç¥–å¯¹è±¡ï¼Œé‡Œé¢æ˜¯æ¯ä¸ªæ—¶é—´çš„å€¼(ä¸œå…«åŒº)# è¿è¡Œç»“æœ time.struct_time(tm_year=2018, tm_mon=10, tm_mday=16, tm_hour=16, tm_min=48, tm_sec=4, tm_wday=1, tm_yday=289, tm_isdst=0) 123import timeprint(time.localtime().tm_year) # å•ç‹¬è·å–æŸä¸ªæ—¶é—´å±æ€§# è¿è¡Œç»“æœ 2018 123import timeprint(time.gmtime()) # ä¸–ç•Œç»Ÿä¸€æ—¶é—´ï¼Œæ¯”åŒ—äº¬æ—¶é—´æ™š8å°æ—¶# è¿è¡Œç»“æœ time.struct_time(tm_year=2018, tm_mon=10, tm_mday=16, tm_hour=8, tm_min=51, tm_sec=16, tm_wday=1, tm_yday=289, tm_isdst=0) 3 æ ¼å¼åŒ–çš„å­—ç¬¦ä¸²æ—¶é—´123456import time print(time.strftime('%Y-%m-%d %H:%M:%S %p'))print(time.strftime('%Y-%m-%d %X %p'))# è¿è¡Œç»“æœ # 2018-10-16 16:54:56 PM# 2018-10-16 16:54:56 PM 4 ä¸‰ç§æ ¼å¼ä¹‹é—´çš„ç›¸äº’è½¬æ¢ æ—¶é—´æˆ³è½¬ä¸ºç»“æ„åŒ– 123import timeprint(time.localtime(time.time()))# è¿è¡Œç»“æœ time.struct_time(tm_year=2018, tm_mon=10, tm_mday=16, tm_hour=16, tm_min=57, tm_sec=18, tm_wday=1, tm_yday=289, tm_isdst=0) ç»“æ„åŒ–è½¬å­—ç¬¦ä¸² 123import timeprint(time.strftime("%Y-%m-%d",time.localtime(time.time())))# è¿è¡Œç»“æœ 2018-10-16 å­—ç¬¦ä¸²è½¬ç»“æ„åŒ– 123import timeprint(time.strftime('2018-10-16', '%Y-%m-%d'))# è¿è¡Œç»“æœ time.struct_time(tm_year=2018, tm_mon=10, tm_mday=15, tm_hour=0, tm_min=0, tm_sec=0, tm_wday=0, tm_yday=288, tm_isdst=-1) ç»“æ„åŒ–è½¬æ—¶é—´æˆ³ 123import timeprint(time.mktime(time.strptime('2018-10-15', '%Y-%m-%d')))# è¿è¡Œç»“æœ 1539532800.0 æ ¼æ—å¨æ²»æ—¶é—´ 123456import timeprint(time.asctime(time.localtime()))print(time.ctime())# è¿è¡Œç»“æœ# Tue Oct 16 17:12:34 2018# Fri Jan 2 08:00:00 1970 äºŒ datetimedatetimeæ˜¯ä¸€ä¸ªåŒ…ï¼Œé‡Œé¢åŒ…å«å¯¹æ—¶é—´çš„å¤„ç†å’Œæ—¥æœŸçš„å¤„ç† è·å–å½“å‰è¯¦ç»†æ—¶é—´ 123import datetimeprint(datetime.datetime.now())# è¿è¡Œç»“æœ 2018-10-16 17:25:16.186114 è·å–æ—¶é—´çš„æŸä¸€éƒ¨åˆ† 123import datetimeprint(datetime.datetime.now().hour) # åˆ†é’Ÿã€å¹´ä»½ç­‰åŒç†# è¿è¡Œç»“æœ 17 æ›¿æ¢æ—¶é—´çš„æŸä¸€éƒ¨åˆ† 12345import datetimet1 = date.datetime.now()t1 = t1.replace(year=2019)print(t1)# è¿è¡Œç»“æœ 2019-10-16 18:36:42.166986 æ—¶é—´å·®å¯¹è±¡ 12345import datetimet2 = datetime.timedelta(weeks=1)t3 = datetime.datetime.now()print(t2 + t3)# è¿è¡Œç»“æœ 2018-10-23 18:40:10.481854]]></content>
      <categories>
        <category>Python</category>
      </categories>
      <tags>
        <tag>å†…ç½®æ¨¡å—</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[æ–‡ä»¶ç›®å½•è§„èŒƒ]]></title>
    <url>%2F2018%2F10%2F15%2F%E6%96%87%E4%BB%B6%E7%9B%AE%E5%BD%95%E8%A7%84%E8%8C%83%2F</url>
    <content type="text"><![CDATA[éšç€åŠŸèƒ½çš„å¢å¤šï¼Œä»£ç é€»è¾‘ä¹Ÿä¼šè¶Šæ¥è¶Šå¤šï¼Œå¯¼è‡´ä»£ç é€»è¾‘æ··ä¹±ä¸ä¾¿äºç®¡ç†é¡¹ç›®ã€‚ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œå¯ä»¥å°†ç›¸åŒåŠŸèƒ½çš„ä»£ç é›†åˆåœ¨ä¸€ä¸ªæ–‡ä»¶å¤¹ï¼Œè®¾ç½®ä¸€ä¸ªå…¥å£å‡½æ•°ï¼Œä¸€äº›è®¾ç½®æ–‡ä»¶æ”¾åœ¨ä¸€ä¸ªæ–‡ä»¶ï¼Œä¸»è¦é€»è¾‘ä»£ç æ”¾ä¸€ä¸ªæ–‡ä»¶å¤¹ã€‚ã€‚ã€‚ è¿™æ ·å¯¹äºæ•´ä¸ªä¸šåŠ¡æœ‰å¾ˆå¥½çš„å¯è¯»æ€§å’Œæ‰©å±•æ€§ã€‚ å¯¹äºä¹‹å‰çš„ATM+è´­ç‰©è½¦é¡¹ç›®æœ€å¼€å§‹æ‰€æœ‰çš„é€»è¾‘ä»£ç éƒ½åœ¨ä¸€ä¸ªæ–‡ä»¶ï¼Œå½“æˆ‘ä»¬éœ€è¦ä¿®æ”¹æŸäº›å‡½æ•°æ—¶ï¼Œé‡åˆ°äº†ä¸€ç‚¹å›°éš¾ï¼Œå°±æ˜¯æ•´ä¸ªé¡¹ç›®æœ‰600+è¡Œä»£ç ï¼Œè€Œä¸”ä»€ä¹ˆéƒ½åœ¨é‡Œé¢ï¼Œå¯¹äºæƒ³å¿«é€Ÿå…·ä½“çš„æ‰¾åˆ°æƒ³ä¿®æ”¹çš„åœ°æ–¹ç¡®å®éœ€è¦èŠ±è´¹ä¸€äº›æ—¶é—´ï¼Œæ•ˆç‡ä½ä¸‹ã€‚æ‰€ä»¥é‡æ–°ä¿®æ”¹åï¼Œå°†å…·ä½“åŠŸèƒ½ä»£ç æ”¾åœ¨ä¸€èµ·ï¼Œå¾ˆæ˜æ˜¾é€»è¾‘æ¸…æ™°äº†ï¼Œè€Œä¸”çœ‹çš„ä¹Ÿå¾ˆèˆ’æœã€‚ å¦‚ä¸‹ä¸ºæˆ‘çš„é¡¹ç›®ç»“æ„ä¸­çš„binæ–‡ä»¶å¤¹ï¼š binç›®å½•ä¸‹çš„start.pyæ–‡ä»¶ä¸ºå¯åŠ¨å‡½æ•°ï¼Œé¦–å…ˆåœ¨å¯åŠ¨å‡½æ•°é‡Œé¢å¯¼å…¥oså’Œsysæ¨¡å—ï¼Œç›®çš„æ˜¯ä¸ºäº†å°†å½“å‰é¡¹ç›®çš„æ ¹è·¯å¾„åŠ å…¥ç¯å¢ƒå˜é‡ï¼Œæ¥ç€å¯¼å…¥ç›¸å…³å‡½æ•°å’Œå˜é‡ã€‚è¯¥pyæ–‡ä»¶ä»…ä»…ä½œä¸ºç¨‹åºçš„å…¥å£ï¼Œé‡Œé¢æ²¡æœ‰é€»è¾‘ä»£ç ã€‚ å¦‚ä¸‹ä¸ºconfæ–‡ä»¶å¤¹ï¼š confæ˜¯configurationçš„ç¼©å†™ï¼Œä¸ºé…ç½®çš„æ„æ€ï¼Œé‡Œé¢åªæœ‰settingsæ–‡ä»¶ï¼Œå¯ä»¥çœ‹å‡ºé‡Œé¢éƒ½æ˜¯å®šä¹‰çš„ä¸€äº›å˜é‡ï¼Œï¼ˆåœ¨è¿™é‡Œçš„å˜é‡å…¶å®åº”è¯¥ä½¿ç”¨å¤§å†™çš„ï¼‰ æ¥ä¸‹æ¥æ˜¯ä¸»è¦ä¸šåŠ¡é€»è¾‘ä»£ç æ–‡ä»¶å¤¹coreï¼ˆæ ¸å¿ƒï¼‰ï¼š é‡Œé¢æœ‰ä¸‰ä¸ªpyæ–‡ä»¶ï¼Œå› ä¸ºé¡¹ç›®æœ‰ä¸‰ä¸ªä¸»è¦åŠŸèƒ½ï¼Œåˆ†åˆ«æ˜¯ATMã€SHOPPã€USERï¼Œæ‰€ä»¥åˆ†äº†ä¸‰ä¸ªï¼Œé‡Œé¢çš„ä»£ç å¤§åŒå°å¼‚ã€‚ æ¥ä¸‹æ¥æ˜¯è®°å½•ç”¨æˆ·æ¶ˆè´¹æµæ°´çš„æ–‡ä»¶å¤¹ï¼Œï¼ˆdbï¼‰é‡Œé¢ä¹ŸåŒ…æ‹¬äº†ç”¨æˆ·ä¿¡æ¯ï¼Œæ¯”å¦‚è´¦å·åã€å¯†ç ã€ä½™é¢ã€çŠ¶æ€ç­‰ä¿¡æ¯ã€‚ è¿™äº›ä¿¡æ¯æ–‡ä»¶åœ¨æ¯ä¸€ä¸ªè´¦æˆ·ç™»å½•æ—¶ï¼Œä¼šæ ¹æ®ç™»å½•ååˆ›å»ºä¸€ä¸ªæ–‡ä»¶ï¼Œæ¨¡å¼ä¸ºè¿½åŠ ï¼Œå½“é€€å‡ºæ—¶å°†æ•°æ®åˆ·å…¥æ–‡ä»¶å¹¶å…³é—­æ–‡ä»¶ã€‚ æ¥ä¸‹æ¥ä¸ºlibï¼Œlibæ˜¯libraryçš„ç¼©å†™ï¼Œè¡¨ç¤ºåº“çš„æ„æ€ã€‚é‡Œé¢åªæœ‰commonæ–‡ä»¶ï¼ˆé‡Œé¢å¯ä»¥æ”¾å…±ç”¨çš„ä¸€äº›åŠŸèƒ½ä»£ç æˆ–è€…ç¬¬ä¸‰æ–¹åº“ï¼‰ commonæ–‡ä»¶é‡Œé¢æ˜¯å‡ ä¸ªé€šç”¨çš„åŠŸèƒ½å‡½æ•°ï¼Œæ¯”å¦‚æ—¥å¿—è£…é¥°å™¨ã€è¯»å–ç”¨æˆ·æ‰€æœ‰ä¿¡æ¯çš„å‡½æ•°ã€ã€ã€ æ¥ä¸‹æ¥ä¸ºlogæ–‡ä»¶å¤¹ï¼Œè®°å½•æ—¥å¿—ï¼Œå“ªä¸ªç”¨æˆ·ç™»é™†äº†ï¼Œåšäº†ä»€ä¹ˆäº‹æƒ…éƒ½ä¼šè®°å½•ä¸‹æ¥ï¼ˆä»”ç»†æƒ³æ¥ï¼Œç”Ÿæ´»ä¸­æˆ‘ä»¬åœ¨æŸäº›åº”ç”¨ä¸­åšçš„äº‹æƒ…æ˜¯ä¸æ˜¯ä¹Ÿä¼šè®°å½•ä¸‹æ¥ï¼Ÿç­”æ¡ˆæ˜¯è‚¯å®šçš„ï¼‰ æœ€åä¸€ä¸ªæ˜¯README.mdæ–‡ä»¶ï¼Œé€šå¸¸æ˜¯ç”¨æ¥ç»™ç”¨æˆ·çœ‹çš„ï¼Œè¯´æ˜ç¨‹åºæ€ä¹ˆä½¿ç”¨ï¼Œå«åšå¸®åŠ©æ–‡æ¡£ã€‚]]></content>
      <categories>
        <category>Python</category>
      </categories>
      <tags>
        <tag>åŒ…ã€æ–‡ä»¶</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[æ¨¡å—ä¸åŒ…]]></title>
    <url>%2F2018%2F10%2F11%2F%E6%A8%A1%E5%9D%97%E4%B8%8E%E5%8C%85%2F</url>
    <content type="text"><![CDATA[ä¸€ ä»€ä¹ˆæ˜¯æ¨¡å—æ¨¡å—å°±æ˜¯ä¸€ç»„åŠŸèƒ½çš„é›†åˆä½“ï¼Œå¯ä»¥é€šè¿‡å¯¼å…¥æ¨¡å—æ¥å¤ç”¨æ¨¡å—çš„åŠŸèƒ½ã€‚ æ¯”å¦‚æˆ‘åœ¨åŒä¸€ä¸ªæ–‡ä»¶å¤¹å®šä¹‰ä¸¤ä¸ª.pyæ–‡ä»¶ï¼Œåˆ†åˆ«å‘½åä¸ºA.pyå’ŒB.pyï¼Œé‚£ä¹ˆå¯ä»¥é€šè¿‡åœ¨Aæ–‡ä»¶é‡Œé€šè¿‡import Bæ¥ä½¿ç”¨Bæ–‡ä»¶é‡Œçš„åç§°ç©ºé—´ã€‚ pythonä¸­ï¼Œæ¨¡å—çš„ä½¿ç”¨æ–¹å¼éƒ½æ˜¯ä¸€æ ·çš„ï¼Œå¯ä»¥åˆ†ä¸ºå››ä¸ªé€šç”¨ç±»åˆ«ï¼š ä½¿ç”¨pythonç¼–å†™çš„.pyæ–‡ä»¶ å·²è¢«ç¼–è¯‘ä¸ºå…±äº«åº“æˆ–DLLçš„Cæˆ–C++æ‰©å±• æŠŠä¸€ç³»åˆ—æ¨¡å—ç»„ç»‡åˆ°ä¸€èµ·çš„æ–‡ä»¶å¤¹ï¼ˆæ³¨ï¼šæ–‡ä»¶å¤¹ä¸‹æœ‰ä¸€ä¸ªinit.pyæ–‡ä»¶ï¼Œè¯¥æ–‡ä»¶å¤¹ç§°ä¹‹ä¸ºåŒ…ï¼‰ ä½¿ç”¨Cç¼–å†™å¹¶é“¾æ¥åˆ°pythonè§£é‡Šå™¨çš„å†…ç½®æ¨¡å— äºŒ ä¸ºä½•è¦ä½¿ç”¨æ¨¡å— ä»æ–‡ä»¶çº§åˆ«ç»„ç»‡ç¨‹åºï¼Œä¾¿äºç®¡ç† éšç€éœ€æ±‚çš„å¢å¤šï¼ŒåŠŸèƒ½ä¹Ÿä¼šè¶Šæ¥è¶Šå¤šï¼Œä¸ºäº†æ–¹ä¾¿ç®¡ç†ï¼Œé€šå¸¸å°†ç¨‹åºåˆ†æˆå¤šä¸ªæ–‡ä»¶ï¼Œè¿™æ ·é¡¹ç›®çš„ç»“æ„ä¼šæ›´åŠ æ¸…æ™°ï¼Œæ–¹ä¾¿ç®¡ç†ã€‚è¿™æ—¶ä¸ä»…ä»…å¯ä»¥æŠŠè¿™äº›æ–‡ä»¶å½“åšè„šæœ¬å»æ‰§è¡Œï¼Œè¿˜å¯ä»¥æŠŠä»–ä»¬å½“åšæ¨¡å—æ¥å¯¼å…¥åˆ°å…¶ä»–çš„æ¨¡å—ä¸­ï¼Œå®ç°åŠŸèƒ½å¤ç”¨ã€‚ ä½¿ç”¨åˆ«äººå†™å¥½çš„æ¨¡å—ï¼Œæé«˜å¼€å‘æ•ˆç‡ ä½¿ç”¨åˆ«äººå·²ç»å†™å¥½çš„è½®å­ï¼Œåœ¨è‡ªå·±çš„é¡¹ç›®ä¸­ä½¿ç”¨ï¼Œå¯ä»¥æå¤§åœ°æé«˜å¼€å‘æ•ˆç‡ã€‚ æ³¨æ„ï¼šå½“é€€å‡ºpythonè§£é‡Šå™¨çš„æ—¶å€™ï¼Œé‡æ–°è¿›å…¥é‚£ä¹ˆä¹‹å‰å®šä¹‰çš„å‡½æ•°å’Œå˜é‡éƒ½ä¼šä¸¢å¤±ï¼Œå› æ­¤é€šå¸¸å°†ç¨‹åºå†™åˆ°æ–‡ä»¶ä¸­ä»¥ä¾¿æ°¸ä¹…ä¿å­˜ï¼Œéœ€è¦æ—¶å¯ä»¥åœ¨å‘½ä»¤è¡Œé€šè¿‡python *.pyæ–¹æ³•æ‰§è¡Œã€‚ 1234567891011121314# test1.pyprint('from test1')money = 10def func1(): print('test1æ¨¡å—:', money) def func2(): print('test1æ¨¡å—') func1() def change(): global money money = 100 123# test2.pyimport test1test1.func1() 123# è¿è¡Œç»“æœfrom test1test1æ¨¡å—: 10 å½“åœ¨tes2tå¯¼å…¥çš„æ—¶å€™ä¼šæ‰§è¡Œtest1ä¸­çš„ä»£ç ï¼Œæ‰€ä»¥é¦–å…ˆä¼šæ‰“å°from test1æ¥ç€æ‰§è¡Œtest1ä¸­çš„func1å‡½æ•°ã€‚ ä¸‰ ä½¿ç”¨æ¨¡å—ä¹‹import1 importçš„ä½¿ç”¨æ¨¡å—å¯ä»¥åŒ…å«å¯æ‰§è¡Œçš„è¯­å¥å’Œå‡½æ•°çš„å®šä¹‰ï¼Œè¿™äº›è¯­å¥çš„ç›®çš„æ˜¯åˆå§‹åŒ–æ¨¡å—ï¼Œå®ƒä»¬åªåœ¨æ¨¡å—åç¬¬ä¸€æ¬¡å¯¼å…¥æ—¶æ‰ä¼šæ‰§è¡Œï¼ˆimportè¯­å¥å¯ä»¥åœ¨ç¨‹åºä¸­çš„ä»»æ„ä½ç½®ä½¿ç”¨çš„ï¼Œä¸”é’ˆå¯¹åŒä¸€ä¸ªæ¨¡å—å¯ä»¥importå¤šæ¬¡ï¼Œpythonä¸ºäº†é˜²æ­¢é‡å¤å¯¼å…¥ï¼Œå½“ç¬¬ä¸€æ¬¡å¯¼å…¥æ¨¡å—æ—¶å°±å°†æ¨¡å—çš„åç§°ç©ºé—´åŠ è½½åˆ°å†…å­˜äº†ï¼Œåç»­çš„importè¯­å¥ä»…æ˜¯å¯¹å·²ç»åŠ è½½åˆ°å†…å­˜ä¸­çš„æ¨¡å—å¯¹è±¡å¢åŠ äº†ä¸€æ¬¡å¼•ç”¨ï¼Œå¹¶ä¸ä¼šé‡å¤æ‰§è¡Œæ¨¡å—å†…çš„è¯­å¥ï¼‰ 12# test3print('from test3') 12345# test4import test3import test3import test3import test3 12# è¿è¡Œç»“æœfrom test3 ps:å¯ä»¥å¯¼å…¥sysæ¨¡å—ï¼Œè°ƒç”¨sys.moduleæŸ¥çœ‹å½“å‰åŠ è½½åˆ°å†…å­˜ä¸­çš„æ¨¡å—ï¼Œsys.moduleæ˜¯ä¸€ä¸ªå­—å…¸ï¼Œå†…éƒ¨åŒ…å«æ¨¡å—åå’Œæ¨¡å—åè·¯å¾„çš„å¯¹åº”å…³ç³»ã€‚è¯¥å­—å…¸å†³å®šäº†å¯¼å…¥æ¨¡å—æ—¶æ˜¯å¦éœ€è¦é‡æ–°å¯¼å…¥ã€‚ 2 å¯¼å…¥æ¨¡å—æ—¶å‘ç”Ÿäº†ä»€ä¹ˆè¿è¡Œpyæ–‡ä»¶å¯¼å…¥ä¸€ä¸ªæ¨¡å—æ—¶ï¼Œè§£é‡Šå™¨åšäº†ä¸‰ä»¶äº‹ï¼š åœ¨æ‰§è¡Œæ–‡ä»¶ä¸­ä¸ºè¢«å¯¼å…¥æ–‡ä»¶åˆ›å»ºæ–°çš„åç§°ç©ºé—´ï¼Œåœ¨è¢«å¯¼å…¥æ¨¡å—ä¸­å®šä¹‰çš„å‡½æ•°å’Œæ–¹æ³•è‹¥æ˜¯ä½¿ç”¨åˆ°äº†globalæ—¶è®¿é—®çš„å°±æ˜¯è¿™ä¸ªåç§°ç©ºé—´ã€‚ åœ¨æ–°åˆ›å»ºçš„åç§°ç©ºé—´ä¸­æ‰§è¡Œæ¨¡å—ä¸­çš„åŒ…å«çš„ä»£ç ã€‚å‡½æ•°å®šä¹‰ä¹Ÿæ˜¯â€˜â€™è¢«æ‰§è¡Œâ€˜â€™çš„è¯­å¥ï¼Œæ¨¡å—çº§åˆ«å‡½æ•°å®šä¹‰çš„æ‰§è¡Œå°†å‡½æ•°åæ”¾å…¥æ¨¡å—å…¨å±€åç§°ç©ºé—´è¡¨ï¼Œå¯ä»¥ç”¨globals()å¯ä»¥æŸ¥çœ‹ã€‚ åœ¨æ‰§è¡Œæ–‡ä»¶çš„åç§°ç©ºé—´åˆ›å»ºè¢«å¯¼å…¥æ¨¡å—çš„åç§°æ¥å¼•ç”¨è¯¥åç§°ç©ºé—´ã€‚ è¿™ä¸ªåå­—å’Œå˜é‡åæ²¡ä»€ä¹ˆåŒºåˆ«ï¼Œéƒ½æ˜¯â€˜â€™ç¬¬ä¸€ç±»â€˜â€™çš„ï¼Œä¸”ä½¿ç”¨å¥ç‚¹è¡¨ç¤ºæ³•å¯ä»¥è®¿é—®è¢«å¯¼å…¥æ¨¡å—çš„åç§°ç©ºé—´ï¼Œå¯¼å…¥çš„æ¨¡å—ä¸è¢«å¯¼å…¥çš„æ¨¡å—æ˜¯ç‹¬ç«‹çš„ä¸¤ä¸ªåç§°ç©ºé—´ã€‚ 3 è¢«å¯¼å…¥æ¨¡å—æœ‰ç‹¬ç«‹çš„åç§°ç©ºé—´æ¯ä¸ªæ¨¡å—éƒ½æ˜¯ä¸€ä¸ªç‹¬ç«‹çš„åç§°ç©ºé—´ï¼Œå®šä¹‰åœ¨è¿™ä¸ªæ¨¡å—ä¸­çš„å‡½æ•°ï¼ŒæŠŠè¿™ä¸ªæ¨¡å—çš„åç§°ç©ºé—´å½“åšå…¨å±€åç§°ç©ºé—´ï¼Œè¿™æ ·å°±ä¸ç”¨æ‹…å¿ƒå®šä¹‰åœ¨ä¸åŒçš„æ¨¡å—ä¸­å…¨å±€å˜é‡åœ¨å¯¼å…¥æ—¶ä¸ä½¿ç”¨è€…çš„å…¨å±€å˜é‡å†²çªã€‚ æµ‹è¯•1 1234# test5.pyimport test1money = 100print(test1.money) 123# è¿è¡Œç»“æœfrom test110 æµ‹è¯•2 123456# test6import test1def func1(): print('from test6 func1')test1.func1()func1() 12345# è¿è¡Œç»“æœfrom test1test1æ¨¡å—: 10from test6 func1# è¿™è¯´æ˜ test6ä¸­çš„å‡½æ•°å’Œtest1ä¸­çš„å‡½æ•°ä¸å†²çª æµ‹è¯•3 12345# test7import test1money = 1test1.change()print(money) 12345# è¿è¡Œç»“æœfrom test1test1æ¨¡å—: 101# è¿™è¯´æ˜test1ä¸­çš„changeå‡½æ•°åªæ˜¯ä¿®æ”¹äº†test1ä¸­çš„å…¨å±€å˜é‡ï¼Œå¯¹test7ä¸­çš„å˜é‡æ²¡æœ‰æ“ä½œæƒé™ å›› ä½¿ç”¨æ¨¡å—ä¹‹fromâ€¦importâ€¦1 fromâ€¦importâ€¦ä¸import â€¦çš„åŒºåˆ«åŒºåˆ«å°±æ˜¯ï¼šä½¿ç”¨fromâ€¦importâ€¦æ˜¯å°†è¢«å¯¼å…¥æ¨¡å—ä¸­çš„åå­—ç›´æ¥å¯¼å…¥åˆ°å½“å‰çš„åç§°ç©ºé—´ä¸­ï¼Œæ‰€ä»¥åœ¨å½“å‰åç§°ç©ºé—´ä¸­ï¼Œç›´æ¥ä½¿ç”¨åå­—å°±å¯ä»¥äº†ï¼Œä¸éœ€è¦åœ¨å‰é¢åŠ ä¸Šæ¨¡å—åå‰ç¼€ã€‚ fromâ€¦importâ€¦å¯¼å…¥æ–¹å¼çš„ä¼˜ç¼ºç‚¹ï¼š å¥½å¤„ï¼šä½¿ç”¨æ–¹ä¾¿ åå¤„ï¼šå®¹æ˜“ä¸å½“å‰æ‰§è¡Œæ–‡ä»¶çš„åå­—å†²çª 2 éªŒè¯ éªŒè¯1ï¼šå½“å‰ä½ç½®ç›´æ¥ä½¿ç”¨test1ä¸­çš„å‡½æ•°åï¼Œæ‰§è¡Œæ—¶ä»ç„¶ä»¥test1.pyæ–‡ä»¶ä¸ºå…¨å±€åç§°ç©ºé—´ 12345# å¯¼å…¥çš„å‡½æ•°func1ï¼Œæ‰§è¡Œæ—¶ä»ç„¶å›åˆ°test1.pyä¸­å¯»æ‰¾å…¨å±€å˜é‡money# test8from test1 import func1money = 50func1() 123# è¿è¡Œç»“æœfrom test1test1æ¨¡å—: 10 123456# å¯¼å…¥çš„å‡½æ•°func2ï¼Œæ‰§è¡Œæ—¶éœ€è¦è°ƒç”¨func1ï¼Œä»ç„¶å›åˆ°test1.pyä¸­æ‰¾func1#test9.pyfrom test1 import func2def func1(): print('-----')func2() 1234# è¿è¡Œç»“æœfrom test1test1æ¨¡å—test1æ¨¡å—: 10 éªŒè¯2ï¼šå¦‚æœå½“å‰åç§°ç©ºé—´å’Œè¢«å¯¼å…¥çš„æ¨¡å—ä¸­çš„åå­—é‡åˆï¼Œé‚£ä¹ˆä¼šè¦†ç›–æ‰å‰é¢çš„åå­— 123456# å¯¼å…¥çš„å‡½æ•°fun1,è¢«å½“å‰ä½ç½®å®šä¹‰çš„func1è¦†ç›–æ‰äº†# test10from test1 import func1def func1(): print('======')func1() 1234# è¿è¡Œç»“æœfrom test1======# è¿™è¯´æ˜func1æŠŠè¢«å¯¼å…¥åå­—func1è¦†ç›–æ‰äº† 123456# å½“å‰ä½ç½®å®šä¹‰çš„func1å¯¼å…¥func1# test11def func1(): print('======')from test1 import func1func1() 1234# è¿è¡Œç»“æœfrom test1test1æ¨¡å—: 10# è¿™è¯´æ˜åœ¨åé¢å¯¼å…¥çš„è¯ä¼šè¦†ç›–æ‰å‰é¢çš„ éªŒè¯3ï¼šè¢«å¯¼å…¥çš„æ–¹æ³•æ‰§è¡Œæ—¶ï¼Œå§‹ç»ˆä»¥æºæ–‡ä»¶ä¸ºå‡† 12345# test12from test1 import money,func1money=100 #å°†å½“å‰ä½ç½®çš„åå­—moneyç»‘å®šåˆ°äº†100print(money) #æ‰“å°å½“å‰çš„åå­—func1() #è¯»å–spam.pyä¸­çš„åå­—money,ä»ç„¶ä¸º1000 12345# è¿è¡Œç»“æœfrom the test100test1æ¨¡å—: 10# å¯ä»¥çœ‹å‡ºè¿è¡Œfunc1çš„æ—¶å€™ä¾ç„¶ä»åŸåç§°ç©ºé—´æŸ¥æ‰¾çš„ 3 from â€¦ import *from â€¦ import * æ˜¯æŠŠè¢«å¯¼å…¥æ–‡ä»¶ä¸­æ‰€æœ‰ä¸æ˜¯ä»¥ä¸‹åˆ’çº¿(_)å¼€å¤´çš„åå­—éƒ½å¯¼å…¥åˆ°å½“å‰åç§°ç©ºé—´ã€‚ å¤§éƒ¨åˆ†æƒ…å†µä¸‹ä¸åº”è¯¥ä»¥è¿™ç§å¯¼å…¥æ–¹å¼ï¼Œå› ä¸ºä¸çŸ¥é“è¢«å¯¼å…¥åŒ…ä¸­çš„åå­—æ˜¯å¦ä¼šå’Œå½“å‰åç§°ç©ºé—´ä¸­çš„åå­—é‡åˆé€ æˆåå­—è¦†ç›–ã€‚ è§£å†³æ–¹æ³•æ˜¯åœ¨è¢«å¯¼å…¥æ–‡ä»¶ä¸­ä½¿ç”¨all = []æ¥æ§åˆ¶è¢«å¯¼å…¥çš„åå­—ï¼Œåªæœ‰åœ¨allé‡Œé¢çš„æ‰ä¼šè¢«å¯¼å…¥ã€‚ 4 æ¨¡å—å¾ªç¯å¯¼å…¥é—®é¢˜æ¨¡å—å¾ªç¯/åµŒå¥—å¯¼å…¥æŠ›å‡ºå¼‚å¸¸çš„æ ¹æœ¬åŸå› æ˜¯ç”±äºåœ¨pythonä¸­æ¨¡å—è¢«å¯¼å…¥ä¸€æ¬¡ä¹‹åï¼Œå°±ä¸ä¼šé‡æ–°å¯¼å…¥ã€‚ 1234# test1.pyprint('æ­£åœ¨å¯¼å…¥1')from test2 import yx = '1' 1234# test2.pyprint('æ­£åœ¨å¯¼å…¥2')from test1 import xy = '2' 12# run.pyimport test1 1234567891011# è¿è¡Œç»“æœæ­£åœ¨å¯¼å…¥1æ­£åœ¨å¯¼å…¥2Traceback (most recent call last): File "/Users/jingxing/PycharmProjects/pythonå…¨æ ˆ/day18/pack/run.py", line 6, in &lt;module&gt; import test1 File "/Users/jingxing/PycharmProjects/pythonå…¨æ ˆ/day18/pack/test1.py", line 7, in &lt;module&gt; from test2 import y File "/Users/jingxing/PycharmProjects/pythonå…¨æ ˆ/day18/pack/test2.py", line 8, in &lt;module&gt; from test1 import xImportError: cannot import name 'x' åˆ†æï¼šåœ¨runæ–‡ä»¶ä¸­æ‰§è¡Œå¯¼å…¥test1ï¼Œè¿è¡Œtest1çš„ä»£ç ï¼Œæ‰“å°å¹¶ä¸”ä»test2ä¸­å¯¼å…¥yï¼Œå›åˆ°test2ï¼Œæ‰“å°å¹¶ä¸”ä»test1ä¸­å¯¼å…¥ï¼Œå› ä¸ºå·²ç»å¯¼å…¥test1äº†ï¼ˆæ²¡å¯¼å…¥å®Œå…¨ï¼Œå› ä¸ºä»£ç æ²¡æ‰§è¡Œå®Œï¼‰ï¼Œæ‰€ä»¥ç›´æ¥æ‰¾â€™xâ€™ï¼Œä½†å› ä¸ºåœ¨test1ä¸­çš„ä»£ç æ‰§è¡Œä¸ä¸‹å»ï¼Œæ‰€ä»¥æŠ¥é”™ã€‚æ‰§è¡Œæ–‡ä»¶ä¸ç­‰äºå°±å®Œå…¨å¯¼å…¥æ–‡ä»¶äº†ã€‚ è§£å†³æ–¹æ³•1ï¼šå¯¼å…¥è¯­å¥æ”¾åœ¨æœ€å è§£å†³æ–¹æ³•2ï¼šå¯¼å…¥è¯­å¥æ”¾åœ¨å‡½æ•°ä¸­ï¼ˆå› ä¸ºåœ¨å¯¼å…¥æ¨¡å—æ—¶ï¼Œå‡½æ•°å†…çš„ä»£ç å¹¶ä¸ä¼šæ‰§è¡Œï¼Œåªä¼šåˆ¤æ–­è¯­æ³•é”™è¯¯ï¼Œæ‰€ä»¥è¿™æ—¶å€™å¯¼å…¥æ¨¡å—å¯ä»¥å®Œå…¨å¯¼å…¥ï¼‰ 5 æ¨¡å—çš„é‡è½½è€ƒè™‘åˆ°æ€§èƒ½çš„åŸå› ï¼Œæ¯ä¸ªæ¨¡å—åªè¢«å¯¼å…¥ä¸€æ¬¡ï¼Œæ”¾å…¥å­—å…¸sys.moduleä¸­ï¼Œå¦‚æœä½ æ”¹å˜äº†æ¨¡å—çš„å†…å®¹ï¼Œå¿…é¡»é‡å¯ç¨‹åºï¼ˆpythonä¸æ”¯æŒé‡æ–°åŠ è½½æˆ–å¸è½½ä¹‹å‰å¯¼å…¥çš„æ¨¡å—ï¼‰ å°±ç®—åœ¨ä¿®æ”¹å·²ç»å¯¼å…¥çš„æ¨¡å—é‡Œé¢çš„ä»£ç å¯¹è¿è¡Œç»“æœä¹Ÿæ²¡å½±å“ã€‚ 6 pyæ–‡ä»¶åŒºåˆ†ä¸¤ç§ç”¨é€”ï¼šæ¨¡å—ä¸è„šæœ¬ è„šæœ¬ï¼Œä¸€ä¸ªæ–‡ä»¶å°±æ˜¯æ•´ä¸ªç¨‹åºï¼Œç”¨æ¥è¢«æ‰§è¡Œ æ¨¡å—ï¼Œæ–‡ä»¶ä¸­å­˜æ”¾ç€ä¸€å †åŠŸèƒ½ï¼Œç”¨æ¥è¢«å¯¼å…¥ä½¿ç”¨ pythonå†…ç½®äº†å…¨å±€å˜é‡name, å½“æ–‡ä»¶è¢«å½“åšè„šæœ¬æ‰§è¡Œæ—¶ï¼šnameç­‰äºâ€™mainâ€˜ å½“æ–‡ä»¶è¢«å½“åšæ¨¡å—å¯¼å…¥æ—¶ï¼šnameç­‰äºæ¨¡å—å ä½œç”¨ï¼šç”¨æ¥æ§åˆ¶.pyæ–‡ä»¶åœ¨ä¸åŒçš„åº”ç”¨åœºæ™¯ä¸‹æ‰§è¡Œä¸åŒçš„é€»è¾‘ 12if __name__ == '__main__': pass 7 æ¨¡å—æœç´¢è·¯å¾„æ¨¡å—çš„æŸ¥æ‰¾é¡ºåºæ˜¯ï¼šå†…å­˜ä¸­å·²ç»åŠ è½½çš„æ¨¡å—â€“ã€‹å†…ç½®æ¨¡å—â€“ã€‹sys.pathè·¯å¾„ä¸­åŒ…å«çš„æ¨¡å— è¯¦ç»†ï¼šåœ¨ç¬¬ä¸€æ¬¡å¯¼å…¥æŸä¸ªæ¨¡å—å¼ï¼Œä¼šå…ˆæ£€æŸ¥è¯¥æ¨¡å—æ˜¯å¦å·²ç»è¢«åŠ è½½åˆ°å†…å­˜ä¸­ï¼ˆå½“å‰æ‰§è¡Œæ–‡ä»¶çš„åç§°ç©ºå¯¹åº”çš„å†…å­˜ï¼‰ï¼Œå¦‚æœæœ‰åˆ™ç›´æ¥å¼•ç”¨ï¼› ps:pythonè§£é‡Šå™¨ä¼šåœ¨å¯åŠ¨æ—¶è‡ªåŠ¨åŠ è½½ä¸€äº›æ¨¡å—åˆ°å†…å­˜ä¸­ï¼Œå¯ä»¥ä½¿ç”¨sys.moduleæŸ¥çœ‹ã€‚ å¦‚æœåœ¨å†…å­˜ä¸­æ²¡æœ‰ï¼Œè§£é‡Šå™¨ä¼šæŸ¥æ‰¾åŒåçš„å†…å»ºæ¨¡å—ï¼› å¦‚æœè¿˜æ²¡æœ‰åˆ™å»sys.pathç»™å‡ºçš„ç›®å½•åˆ—è¡¨ä¸­æŸ¥æ‰¾ã€‚ äº†è§£ï¼šsys.pathçš„åˆå§‹åŒ–çš„å€¼æ¥è‡ªäºï¼š The directory containing the input script (or the current diretory whrn no files is specified). PYTHONPATH (a list of directory names, with the same syntax as the shell variable PATH). The installation-dependent default. åœ¨åˆå§‹åŒ–åï¼Œpythonç¨‹åºå¯ä»¥ä¿®æ”¹sys.pathï¼Œè·¯å¾„æ”¾åœ¨å‰é¢çš„ä¼˜äºæ ‡å‡†åº“è¢«åŠ è½½ã€‚ æœç´¢æ—¶æŒ‰ç…§sys.pathä¸­ä»å·¦åˆ°å³çš„é¡ºåºæŸ¥æ‰¾ï¼Œä½äºå‰é¢çš„ä¼˜å…ˆè¢«æŸ¥æ‰¾ï¼Œsys.pathä¸­è¿˜å¯èƒ½åŒ…å«.zipå½’æ¡£æ–‡ä»¶å’Œ.eggæ–‡ä»¶ï¼Œpythonä¼šæŠŠ.zipå½’æ¡£æ–‡ä»¶å½“æˆä¸€ä¸ªç›®å½•å»å¤„ç†ã€‚ .eggæ–‡ä»¶æ˜¯setuptoolsåˆ›å»ºçš„åŒ…ï¼Œè¿™æ˜¯æŒ‰ç…§ç¬¬ä¸‰æ–¹pythonåº“å’Œæ‰©å±•æ—¶ä½¿ç”¨çš„ä¸€ç§å¸¸è§æ ¼å¼ï¼Œ.eggæ–‡ä»¶å®é™…ä¸Šåªæ˜¯æ·»åŠ äº†é¢å¤–å…ƒæ•°æ®ï¼ˆå¦‚ç‰ˆæœ¬å·ï¼Œä¾èµ–é¡¹ç­‰ï¼‰çš„.zipæ–‡ä»¶ã€‚ åªèƒ½ä».zipæ–‡ä»¶ä¸­å¯¼å…¥.pyï¼Œ.pycç­‰æ–‡ä»¶ã€‚ä½¿ç”¨Cç¼–å†™çš„å…±äº«åº“å’Œæ‰©å±•å—æ— æ³•ç›´æ¥ä».zipæ–‡ä»¶ä¸­åŠ è½½ï¼ˆæ­¤æ—¶setuptoolsç­‰æ‰“åŒ…ç³»ç»Ÿæœ‰æ—¶èƒ½æä¾›ä¸€ç§è§„é¿æ–¹æ³•ï¼‰ï¼Œä¸”ä».zipä¸­åŠ è½½æ–‡ä»¶ä¸ä¼šåˆ›å»º.pycæˆ–è€….pyoæ–‡ä»¶ï¼Œå› æ­¤ä¸€å®šè¦äº‹å…ˆåˆ›å»ºä»–ä»¬ï¼Œæ¥é¿å…åŠ è½½æ¨¡å—æ˜¯æ€§èƒ½ä¸‹é™ã€‚ 8 ç¼–è¯‘pythonæ–‡ä»¶ä¸ºäº†æé«˜åŠ è½½æ¨¡å—çš„é€Ÿåº¦ï¼Œå¼ºè°ƒå¼ºè°ƒå¼ºè°ƒï¼šæé«˜çš„æ˜¯åŠ è½½é€Ÿåº¦è€Œç»éè¿è¡Œé€Ÿåº¦ã€‚pythonè§£é‡Šå™¨ä¼šåœ¨pycacheç›®å½•ä¸­ä¸‹ç¼“å­˜æ¯ä¸ªæ¨¡å—ç¼–è¯‘åçš„ç‰ˆæœ¬ï¼Œæ ¼å¼ä¸ºï¼šmodule.version.pycã€‚é€šå¸¸ä¼šåŒ…å«pythonçš„ç‰ˆæœ¬å·ã€‚ä¾‹å¦‚ï¼Œåœ¨CPython3.3ç‰ˆæœ¬ä¸‹ï¼Œspam.pyæ¨¡å—ä¼šè¢«ç¼“å­˜æˆpycache/spam.cpython-33.pycã€‚è¿™ç§å‘½åè§„èŒƒä¿è¯äº†ç¼–è¯‘åçš„ç»“æœå¤šç‰ˆæœ¬å…±å­˜ã€‚ Pythonæ£€æŸ¥æºæ–‡ä»¶çš„ä¿®æ”¹æ—¶é—´ä¸ç¼–è¯‘çš„ç‰ˆæœ¬è¿›è¡Œå¯¹æ¯”ï¼Œå¦‚æœè¿‡æœŸå°±éœ€è¦é‡æ–°ç¼–è¯‘ã€‚è¿™æ˜¯å®Œå…¨è‡ªåŠ¨çš„è¿‡ç¨‹ã€‚å¹¶ä¸”ç¼–è¯‘çš„æ¨¡å—æ˜¯å¹³å°ç‹¬ç«‹çš„ï¼Œæ‰€ä»¥ç›¸åŒçš„åº“å¯ä»¥åœ¨ä¸åŒçš„æ¶æ„çš„ç³»ç»Ÿä¹‹é—´å…±äº«ï¼Œå³pycä½¿ä¸€ç§è·¨å¹³å°çš„å­—èŠ‚ç ï¼Œç±»ä¼¼äºJAVAç«.NET,æ˜¯ç”±pythonè™šæ‹Ÿæœºæ¥æ‰§è¡Œçš„ï¼Œä½†æ˜¯pycçš„å†…å®¹è·Ÿpythonçš„ç‰ˆæœ¬ç›¸å…³ï¼Œä¸åŒçš„ç‰ˆæœ¬ç¼–è¯‘åçš„pycæ–‡ä»¶ä¸åŒï¼Œ2.5ç¼–è¯‘çš„pycæ–‡ä»¶ä¸èƒ½åˆ°3.5ä¸Šæ‰§è¡Œï¼Œå¹¶ä¸”pycæ–‡ä»¶æ˜¯å¯ä»¥åç¼–è¯‘çš„ï¼Œå› è€Œå®ƒçš„å‡ºç°ä»…ä»…æ˜¯ç”¨æ¥æå‡æ¨¡å—çš„åŠ è½½é€Ÿåº¦çš„ï¼Œä¸æ˜¯ç”¨æ¥åŠ å¯†çš„ã€‚ äº” åŒ…1 ä»€ä¹ˆæ˜¯åŒ…ï¼ŸåŒ…æ˜¯ä¸€ç§é€šè¿‡â€™.æ¨¡å—åâ€™æ¥ç»„ç»‡pythonæ¨¡å—åç§°çš„æ–¹å¼ã€‚ å…·ä½“çš„ï¼šåŒ…å°±æ˜¯ä¸€ä¸ªåŒ…å«æœ‰init.pyæ–‡ä»¶çš„æ–‡ä»¶å¤¹ï¼Œæ‰€ä»¥å…¶å®æˆ‘ä»¬åˆ›å»ºåŒ…çš„ç›®çš„å°±æ˜¯ä¸ºäº†ç”¨æ–‡ä»¶å¤¹å°†æ–‡ä»¶/æ¨¡å—ç»„ç»‡èµ·æ¥ã€‚ 2 ä¸ºä½•ä½¿ç”¨åŒ…ï¼ŸåŒ…çš„æœ¬è´¨å°±æ˜¯ä¸€ä¸ªæ–‡ä»¶å¤¹ï¼Œæ–‡ä»¶å¤¹çš„åŠŸèƒ½å°±æ˜¯å°†åŒç±»å‹çš„æ–‡ä»¶ç»„ç»‡èµ·æ¥ã€‚ å…¶å®ä½¿ç”¨åŒ…çš„åŸå› å’Œä½¿ç”¨æ¨¡å—çš„åŸå› æ˜¯ä¸€æ ·çš„ï¼Œéƒ½æ˜¯ä¸ºäº†æé«˜ç¨‹åºçš„ç»“æ„æ€§å’Œå¯ç»´æŠ¤æ€§ã€‚ 3 æ³¨æ„äº‹é¡¹ å…³äºåŒ…ç›¸å…³çš„å¯¼å…¥è¯­å¥ä¹Ÿåˆ†ä¸ºimportå’Œfrom â€¦ import â€¦ä¸¤ç§ï¼Œä½†æ˜¯æ— è®ºå“ªç§ï¼Œæ— è®ºåœ¨ä»€ä¹ˆä½ç½®ï¼Œåœ¨å¯¼å…¥æ—¶éƒ½å¿…é¡»éµå¾ªä¸€ä¸ªåŸåˆ™ï¼šå‡¡æ˜¯åœ¨å¯¼å…¥æ—¶å¸¦ç‚¹çš„ï¼Œç‚¹çš„å·¦è¾¹éƒ½å¿…é¡»æ˜¯ä¸€ä¸ªåŒ…ï¼Œå¦åˆ™éæ³•ã€‚å¯ä»¥å¸¦æœ‰ä¸€è¿ä¸²çš„ç‚¹ï¼Œä½†éƒ½å¿…é¡»éµå¾ªè¿™ä¸ªåŸåˆ™ã€‚ä½†å¯¹äºå¯¼å…¥åï¼Œåœ¨ä½¿ç”¨æ—¶å°±æ²¡æœ‰è¿™ç§é™åˆ¶äº†ï¼Œç‚¹çš„å·¦è¾¹å¯ä»¥æ˜¯åŒ…,æ¨¡å—ï¼Œå‡½æ•°ï¼Œç±»(å®ƒä»¬éƒ½å¯ä»¥ç”¨ç‚¹çš„æ–¹å¼è°ƒç”¨è‡ªå·±çš„å±æ€§)ã€‚ importå¯¼å…¥æ–‡ä»¶æ—¶ï¼Œäº§ç”Ÿåç§°ç©ºé—´ä¸­çš„åå­—æ¥æºäºæ–‡ä»¶ï¼Œimport åŒ…ï¼Œäº§ç”Ÿçš„åç§°ç©ºé—´çš„åå­—åŒæ ·æ¥æºäºæ–‡ä»¶ï¼Œå³åŒ…ä¸‹çš„init.pyï¼Œå¯¼å…¥åŒ…æœ¬è´¨å°±æ˜¯åœ¨å¯¼å…¥è¯¥æ–‡ä»¶ åŒ…Aå’ŒåŒ…Bä¸‹å¦‚æœæœ‰åŒåæ¨¡å—ä¹Ÿä¸ä¼šå†²çªï¼Œå› ä¸ºä»–ä»¬çš„åç§°ç©ºé—´æ˜¯ç‹¬ç«‹çš„ã€‚ 4 ç»å¯¹å¯¼å…¥å’Œç›¸å¯¹å¯¼å…¥åŒ…æ˜¯å†™ç»™åˆ«äººç”¨çš„ï¼Œç„¶è€Œåœ¨åŒ…çš„å†…éƒ¨ä¹Ÿä¼šæœ‰å½¼æ­¤ä¹‹é—´äº’ç›¸å¯¼å…¥çš„éœ€æ±‚ï¼Œè¿™æ—¶å€™å°±æœ‰ç»å¯¹å¯¼å…¥å’Œç›¸å¯¹å¯¼å…¥ä¸¤ç§æ–¹å¼ï¼š ç»å¯¹å¯¼å…¥ï¼šä»¥åŒ…ä½œä¸ºèµ·ç‚¹ ç›¸å¯¹å¯¼å…¥ï¼šä»¥.æˆ–..çš„æ–¹å¼ä½œä¸ºèµ·ç‚¹ï¼ˆåªèƒ½åœ¨ä¸€ä¸ªåŒ…ä¸­ä½¿ç”¨ï¼Œä¸èƒ½ç”¨äºä¸åŒç›®å½•å†…ï¼‰ **åŒ…ä»¥åŠåŒ…æ‰€åŒ…å«çš„æ¨¡å—éƒ½æ˜¯ç”¨æ¥è¢«å¯¼å…¥çš„ï¼Œè€Œä¸æ˜¯ç›´æ¥æ‰§è¡Œçš„ã€‚è€Œç¯å¢ƒå˜é‡éƒ½æ˜¯ä»¥æ‰§è¡Œæ–‡ä»¶ä¸ºå‡†ã€‚ 5 ç»å¯¹å¯¼å…¥ä¸ç›¸å¯¹å¯¼å…¥æ€»ç»“12345678910111213ç»å¯¹å¯¼å…¥ä¸ç›¸å¯¹å¯¼å…¥# ç»å¯¹å¯¼å…¥: ä»¥æ‰§è¡Œæ–‡ä»¶çš„sys.pathä¸ºèµ·å§‹ç‚¹å¼€å§‹å¯¼å…¥,ç§°ä¹‹ä¸ºç»å¯¹å¯¼å…¥# ä¼˜ç‚¹: æ‰§è¡Œæ–‡ä»¶ä¸è¢«å¯¼å…¥çš„æ¨¡å—ä¸­éƒ½å¯ä»¥ä½¿ç”¨# ç¼ºç‚¹: æ‰€æœ‰å¯¼å…¥éƒ½æ˜¯ä»¥sys.pathä¸ºèµ·å§‹ç‚¹,å¯¼å…¥éº»çƒ¦# ç›¸å¯¹å¯¼å…¥: å‚ç…§å½“å‰æ‰€åœ¨æ–‡ä»¶çš„æ–‡ä»¶å¤¹ä¸ºèµ·å§‹å¼€å§‹æŸ¥æ‰¾,ç§°ä¹‹ä¸ºç›¸å¯¹å¯¼å…¥# ç¬¦å·: .ä»£è¡¨å½“å‰æ‰€åœ¨æ–‡ä»¶çš„æ–‡ä»¶åŠ ,..ä»£è¡¨ä¸Šä¸€çº§æ–‡ä»¶å¤¹,...ä»£è¡¨ä¸Šä¸€çº§çš„ä¸Šä¸€çº§æ–‡ä»¶å¤¹# ä¼˜ç‚¹: å¯¼å…¥æ›´åŠ ç®€å•# ç¼ºç‚¹: åªèƒ½åœ¨å¯¼å…¥åŒ…ä¸­çš„æ¨¡å—æ—¶æ‰èƒ½ä½¿ç”¨ #æ³¨æ„: 1. ç›¸å¯¹å¯¼å…¥åªèƒ½ç”¨äºåŒ…å†…éƒ¨æ¨¡å—ä¹‹é—´çš„ç›¸äº’å¯¼å…¥,å¯¼å…¥è€…ä¸è¢«å¯¼å…¥è€…éƒ½å¿…é¡»å­˜åœ¨äºä¸€ä¸ªåŒ…å†… 2. attempted relative import beyond top-level package # è¯•å›¾åœ¨é¡¶çº§åŒ…ä¹‹å¤–ä½¿ç”¨ç›¸å¯¹å¯¼å…¥æ˜¯é”™è¯¯çš„,è¨€å¤–ä¹‹æ„,å¿…é¡»åœ¨é¡¶çº§åŒ…å†…ä½¿ç”¨ç›¸å¯¹å¯¼å…¥,æ¯å¢åŠ ä¸€ä¸ª.ä»£è¡¨è·³åˆ°ä¸Šä¸€çº§æ–‡ä»¶å¤¹,è€Œä¸Šä¸€çº§ä¸åº”è¯¥è¶…å‡ºé¡¶çº§åŒ…]]></content>
      <categories>
        <category>Python</category>
      </categories>
      <tags>
        <tag>python</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[åŒ¿åå‡½æ•°pythonå†…ç½®é«˜é˜¶å‡½æ•°ä»¥åŠé€’å½’]]></title>
    <url>%2F2018%2F10%2F10%2F%E5%8C%BF%E5%90%8D%E5%87%BD%E6%95%B0python%E5%86%85%E7%BD%AE%E9%AB%98%E9%98%B6%E5%87%BD%E6%95%B0%E4%BB%A5%E5%8F%8A%E9%80%92%E5%BD%92%2F</url>
    <content type="text"><![CDATA[åŒ¿åå‡½æ•°pythonå®šä¹‰ä¸€ä¸ªå‡½æ•°é€šå¸¸ä½¿ç”¨defå…³é”®è¯ï¼Œåé¢è·Ÿå‡½æ•°åï¼Œç„¶åæ˜¯æ³¨é‡Šã€ä»£ç å—ç­‰ã€‚ 123def func(): '''æ³¨é‡Š''' print('from func') è¿™æ ·å°±åœ¨å…¨å±€å‘½åç©ºé—´å®šä¹‰äº†ä¸€ä¸ªå«funcçš„å‡½æ•°ï¼Œfuncè¡¨ç¤ºå‡½æ•°ä½“çš„å†…å­˜åœ°å€ï¼Œå› ä¸ºfuncæŒ‡å‘å‡½æ•°ä½“å†…å­˜åœ°å€ï¼Œæ‰€ä»¥å¯ä»¥é€šè¿‡funcæ¥è°ƒç”¨å‡½æ•°ã€‚ é‚£ä¹ˆåŒ¿åå‡½æ•°å‘¢ï¼Ÿä»åå­—å°±å¯çœ‹å‡ºï¼ŒåŒ¿åã€‚æƒ³æƒ³å°±æœ‰ç‚¹åƒä»¥å‰å°æ—¶å€™çš„ä½šåä¸€æ ·ï¼Œå¸¦ç‚¹è¯´ä¸æ¸…æ¥šçš„ç¥ç§˜è‰²å½©ï¼Œç°åœ¨æƒ³æ¥ä¹‹æ‰€ä»¥æ„Ÿè§‰ç¥ç§˜å¯èƒ½æ˜¯å› ä¸ºé‚£æ—¶å€™ä¸è®¤è¯†â€˜â€™ä½šâ€˜â€™è¿™ä¸ªå­—ã€‚ã€‚ã€‚ 1234å¼ºè°ƒ: åŒ¿åå‡½æ•°çš„å®šä¹‰å°±ç›¸å½“äºåªäº§ç”Ÿä¸€ä¸ªå˜é‡åœ¨å€¼,è€Œæ²¡æœ‰ç»‘å®šä»»ä½•åå­—, æ‰€ä»¥ä¼šåœ¨å®šä¹‰å®Œä¹‹åå°±è¢«å›æ”¶,æ— æ³•é‡å¤ä½¿ç”¨,åªèƒ½åœ¨å®šä¹‰æ—¶ä½¿ç”¨ä¸€æ¬¡åº”ç”¨:å½“æŸä¸€ä¸ªåŠŸèƒ½ä»…ä½¿ç”¨ä¸€æ¬¡å°±æ²¡æœ‰å†é‡å¤ä½¿ç”¨çš„å¿…è¦äº†,å°±åº”è¯¥å®šä¹‰æˆåŒ¿åå‡½æ•° è¨€å½’æ­£ä¼ ï¼ŒåŒ¿åå’Œä½šåä¸€æ ·æ²¡æœ‰åå­—æˆ–è€…ä¸éœ€è¦çŸ¥é“åå­—ï¼Œå¯¹å°±æ˜¯è¿™ä¹ˆé…·ã€‚ å®šä¹‰ä¸€ä¸ªåŒ¿åå‡½æ•°ä½¿ç”¨lambdaå…³é”®è¯ï¼Œå’Œdefæ¯”è¾ƒçš„è¯ä¼šå‘ç°å…¶å®å®šä¹‰é€»è¾‘å¾ˆåƒã€‚ 1lambda x: x**2 å®šä¹‰çš„åŒ¿åå‡½æ•°çš„æ„æ€æ˜¯å‚æ•°ä¸ºxï¼Œè¿”å›xçš„å¹³æ–¹ï¼Œè¿”å›ï¼Ÿæ€ä¹ˆæ²¡çœ‹åˆ°returnï¼Ÿå› ä¸ºlambdå¼•å·åé¢çš„å€¼é»˜è®¤è¿”å›ï¼Œæ‰€ä»¥æ²¡å¿…è¦åŠ returnäº†ï¼Œä½†æ˜¯æˆ‘ä¸€å®šè¦åŠ å‘¢ï¼Ÿå°±æ˜¯è¿™ä¹ˆä¸è®²é“ç†ã€‚é‚£ä¹ˆè§£é‡Šå™¨åªå¥½æŠ¥é”™äº†ï¼Œå› ä¸ºä½ ä¸è®¤åŒæˆ‘çš„è¯­æ³•ï¼Œé‚£æˆ‘ä¹Ÿæ²¡å¿…è¦æƒ¯ç€ä½ äº†ã€‚å°±æ˜¯è¿™ä¹ˆæ‹½ã€‚ åŒ¿åå‡½æ•°çš„ä½¿ç”¨åœºæ™¯é€šå¸¸ä¸ºä½¿ç”¨ä¸€æ¬¡å°±ç»“æŸäº†ï¼Œä¸ä¼šé¢‘ç¹çš„ä½¿ç”¨ã€‚è€Œä¸”åŒ¿åå‡½æ•°é€šå¸¸å’Œpythoné‡Œé¢è‡ªå¸¦çš„é«˜é˜¶å‡½æ•°ç»“åˆä½¿ç”¨ï¼Œåœ¨æŸäº›åº”ç”¨åœºæ™¯ä¸‹ä¼šè¾¾åˆ°äº‹å€åŠŸåŠçš„æ•ˆæœå“¦ã€‚ é«˜é˜¶å‡½æ•°mapmapçš„æ„æ€æ˜¯åœ°å›¾çš„æ„æ€ï¼Œç”±æ­¤å¼•ç”³å‡ºæ˜ å°„è¡¨ç¤ºä¸€ä¸€å¯¹åº”ã€‚ ç¿»è¯‘è¿‡æ¥çš„æ„æ€æ˜¯ï¼šåˆ›å»ºä¸€ä¸ªè¿­ä»£å™¨ï¼Œä½¿ç”¨æ¯ä¸ªè¿­ä»£çš„å‚æ•°è®¡ç®—å‡½æ•°ã€‚ å½“æœ€çŸ­çš„å¯è¿­ä»£ç”¨å°½æ—¶åœæ­¢ã€‚ mapå‡½æ•°æœ‰ä¸¤ä¸ªå‚æ•°ï¼Œç¬¬ä¸€ä¸ªä¸ºæŸç§è§„åˆ™çš„å‡½æ•°ï¼Œç¬¬äºŒä¸ªä½å¤šä¸ªå¯è¿­ä»£å¯¹è±¡ã€‚ 12345def func(x): return x * 2lis = [1, 2, 3, 4, 5, 6]print(type(map(func, lis)))print(list(map(func, lis))) mapå‡½æ•°æŠŠå¯è¿­ä»£å¯¹è±¡ä¸­çš„å…ƒç´ è‡ªåŠ¨ä¼ ç»™funcï¼Œé€šè¿‡funcçš„åŠ å·¥ï¼Œå¾—åˆ°ä¸€ä¸ªç”Ÿæˆå™¨å¯¹è±¡ï¼Œé€šè¿‡listå‡½æ•°è½¬åŒ–ä¸ºä¸€ä¸ªåˆ—è¡¨ã€‚ å½“ç„¶ï¼Œmapå‡½æ•°å¯ä»¥æ¥æ”¶å¤šä¸ªå¯è¿­ä»£å¯¹è±¡ï¼Œæ¯”å¦‚ 123456def func(x, y): return x + ylis1 = [1,2,3,4,5,6]lis2 = [2,3,4,5,6,7,8,9,10,11]print(list(map(func, lis1,lis2)))# ç»“æœä¸º[3, 5, 7, 9, 11, 13] mapå‡½æ•°ä¼šæŠŠåé¢è¿­ä»£å™¨å¯¹è±¡ä¸­çš„å…ƒç´ è¿­ä»£å‡ºæ¥ç»è¿‡funcåŠ å·¥ï¼Œå½“æœ€çŸ­çš„å¯è¿­ä»£ç”¨å°½æ˜¯åœæ­¢ï¼Œæ‰€ä»¥åªè¿›è¡Œåˆ°6+7å°±ç»“æŸäº†ã€‚ reducereduceæ˜¯å‡å°‘ã€åˆå¹¶çš„æ„æ€ï¼Œä¼šæŠŠå¯è¿­ä»£å¯¹è±¡ä¸­çš„å…ƒç´ ç»è¿‡å‡½æ•°çš„åŠ å·¥è¿›è€Œäº§ç”Ÿæ–°çš„ç»“æœã€‚ ç¿»è¯‘è¿‡æ¥å°±æ˜¯ï¼šä»å·¦åˆ°å³ç´¯åŠ ä¸¤ä¸ªå‚æ•°çš„å‡½æ•°åˆ°åºåˆ—çš„é¡¹ç›®ï¼Œä»¥ä¾¿å°†åºåˆ—å‡å°‘ä¸ºå•ä¸ªå€¼ã€‚ä¾‹å¦‚ï¼Œreduceï¼ˆlambda xï¼Œyï¼šx + yï¼Œ[1,2,3] ï¼Œ4,5]è®¡ç®—ï¼ˆï¼ˆï¼ˆï¼ˆï¼ˆ1 + 2ï¼‰+3ï¼‰+4ï¼‰+5ï¼‰ã€‚å¦‚æœå­˜åœ¨åˆå§‹å€¼ï¼Œåˆ™å°†å…¶æ”¾ç½®åœ¨è®¡ç®—ä¸­åºåˆ—çš„é¡¹ä¹‹å‰ï¼Œå¹¶åœ¨åºåˆ—ä¸ºç©ºæ—¶ç”¨ä½œé»˜è®¤å€¼ã€‚ reduceå‡½æ•°æœ‰ä¸‰ä¸ªå‚æ•°ï¼Œå‡½æ•°å’Œåºåˆ—éƒ½æ˜¯å¿…é¡»å‚æ•°ï¼Œåˆå§‹å€¼ä¸ºå¯é€‰å‚æ•°ã€‚ åº”ç”¨ï¼šæ¯”å¦‚æ±‚1-100çš„å’Œ 12345from functools import reducedef func(x, y): return x+yprint(reduce(func, [i for i in range(1,101)]))# ç»“æœä¸º 5050 filterfilterçš„æ„æ€ä¸ºè¿‡æ»¤ï¼Œé€šè¿‡å‡½æ•°çš„è¿”å›å€¼å¯¹åºåˆ—è¿›è¡Œè¿‡æ»¤ã€‚ ç¿»è¯‘è¿‡æ¥ï¼šè¿”å›ä¸€ä¸ªè¿­ä»£å™¨ï¼Œäº§ç”Ÿå‡½æ•°ï¼ˆitemï¼‰ä¸ºçœŸçš„è¿­ä»£é¡¹ã€‚ å¦‚æœå‡½æ•°ä¸ºNoneï¼Œåˆ™è¿”å›ç»“æœä¸ºçœŸçš„é¡¹ã€‚ 12345def func(x): return x.isdigit()lis = ['12', 'ad', '34', 'bc', '46']print(list(filter(func, lis)))# ç»“æœä¸º ['12', '34', '46'] filterè¿‡æ»¤ç»“æœä¸ºçœŸçš„å€¼æ”¾è¿›è¿­ä»£å™¨ä¸­ã€‚ é«˜é˜¶å‡½æ•°å’ŒåŒ¿åå‡½æ•°mapå’ŒåŒ¿åå‡½æ•°åœ¨ä¹‹å‰mapå‡½æ•°ä¸­çš„funcå‚æ•°éƒ½æ˜¯å®šä¹‰äº†ä¸€ä¸ªæœ‰åå‚æ•°ï¼Œç„¶åç”¨å‡½æ•°åä¼ å…¥mapå‡½æ•°çš„ï¼Œæœ‰äº†åŒ¿åå‡½æ•°å°±ä¸ç”¨è¿™ä¹ˆéº»çƒ¦äº†ã€‚ 123lis = [1, 2, 3, 4, 5, 6]print(list(map(lambda x: x*2, lis)))# ç»“æœä¸º [2, 4, 6, 8, 10, 12] reduceå’ŒåŒ¿åå‡½æ•°12print(reduce(lambda x, y: x + y, [i for i in range(101)], 100))# è¾“å‡ºç»“æœä¸º 5050 filterå’ŒåŒ¿åå‡½æ•°12345678sala = &#123; 'MAC': 30000, 'iPhone': 9000, 'lenovo': 10000, 'xiaomi': 3000&#125;print(list(filter(lambda x: sala[x] &gt; 5000, sala)))# è¾“å‡ºç»“æœä¸º [â€˜iPhone', 'lenovo'] åŒ¿åå‡½æ•°çš„ä½¿ç”¨åœºæ™¯è¾ƒä¸ºå•ä¸€ï¼Œä¸€æ¬¡æ€§ä½¿ç”¨ï¼Œéšç”¨éšæ—¶å®šä¹‰ã€‚åœ¨æŸäº›åœºæ™¯ä¸‹å’Œé«˜é˜¶å‡½æ•°ç»“åˆä¼šæå‡æ•ˆç‡ï¼ŒåŒæ—¶ä½¿ä»£ç æ›´åŠ ç®€æ´ã€‚ é€’å½’ä¸€ é€’å½’è°ƒç”¨çš„å®šä¹‰é€’å½’è°ƒç”¨æ—¶å‡½æ•°åµŒå¥—è°ƒç”¨çš„ä¸€ç§ç‰¹æ®Šå½¢å¼ï¼Œå‡½æ•°åœ¨è°ƒç”¨æ—¶ï¼Œç›´æ¥æˆ–é—´æ¥åœ°è°ƒç”¨äº†è‡ªèº«ï¼Œå°±æ˜¯é€’å½’è°ƒç”¨ã€‚ 1234567891011121314151617181920# ç›´æ¥è°ƒç”¨è‡ªèº«def f1(): print('from f1') f1()f1()# é—´æ¥è°ƒç”¨è‡ªèº«def f1(): print('from f1') f2()def f2(): print('from f1') f1()f2()# è°ƒç”¨å‡½æ•°ä¼šäº§ç”Ÿå±€éƒ¨çš„åç§°ç©ºé—´ï¼Œå ç”¨å†…å­˜ï¼Œå› ä¸ºä¸Šè¿°è¿™ç§è°ƒç”¨ä¼šæ— é™è°ƒç”¨è‡ªèº«ï¼Œpythonè§£é‡Šå™¨çš„å†…å­˜ç®¡ç†æœºåˆ¶ä¸ºäº†é˜²æ­¢æ— é™å ç”¨å†…å­˜ï¼Œå¯¹å‡½æ•°çš„é€’å½’è°ƒç”¨åšäº†å±‚çº§é™åˆ¶ï¼Œå¯ä»¥é€šè¿‡ä»£ç ä¿®æ”¹æœ€å¤§å±‚çº§é™åˆ¶ã€‚import syssys.setrecursionlimit(100000) äºŒ é€’å½’è°ƒç”¨çš„ä¸¤ä¸ªé˜¶æ®µé€’å½’è°ƒç”¨åŒ…å«ä¸¤ä¸ªæ˜ç¡®çš„é˜¶æ®µï¼šå›æº¯ï¼Œé€’æ¨ å›æº¯å°±æ˜¯ä»å¤–å‘é‡Œä¸€å±‚ä¸€å±‚é€’å½’è°ƒç”¨ä¸‹å»ï¼Œå›æº¯é˜¶æ®µå¿…é¡»è¦æœ‰ä¸€ä¸ªæ˜ç¡®çš„ç»“æŸæ¡ä»¶ï¼ˆä¸ç„¶ä¼šæˆä¸ºæ­»å¾ªç¯ï¼‰ï¼Œæ¯è¿›å…¥ä¸‹ä¸€æ¬¡é€’å½’æ—¶ï¼Œé—®é¢˜çš„è§„æ¨¡éƒ½åº”è¯¥æœ‰æ‰€å‡å°‘ã€‚ é€’æ¨å°±æ˜¯ä»é‡Œå‘å¤–ä¸€å±‚å±‚ç»“æŸé€’å½’ã€‚ é€’å½’æ•ˆç‡ä¸é«˜ï¼Œé€’å½’å±‚æ¬¡è¿‡å¤šä¼šå¯¼è‡´æ ˆæº¢å‡ºï¼ˆåœ¨è®¡ç®—æœºä¸­ï¼Œå‡½æ•°è°ƒç”¨æ˜¯é€šè¿‡æ ˆå®ç°çš„ï¼Œæ¯å½“è¿›å…¥ä¸€ä¸ªå‡½æ•°è°ƒç”¨ï¼Œåœ¨æ ˆä¸‹é¢ä¼šåŠ ä¸€å±‚æ ˆå¸§ï¼Œæ¯å½“å‡½æ•°è¿”å›ï¼Œæ ˆå°±ä¼šå‡ä¸€å±‚æ ˆå¸§ã€‚ç”±äºæ ˆçš„å¤§å°ä¸æ˜¯æ— é™çš„ï¼Œæ‰€ä»¥é€’å½’è°ƒç”¨æ¬¡æ•°è¿‡å¤šï¼Œä¼šå¯¼è‡´æ ˆæº¢å‡ºï¼‰ ä¸‰ äºŒåˆ†æ³•ä»ä¸€ä¸ªæ’åºçš„æ•°å­—åˆ—è¡¨ä¸­æ‰¾åˆ°æŒ‡å®šçš„æ•°å­—ï¼Œä½¿ç”¨éå†çš„æ•ˆç‡å¤ªä½ï¼Œä½¿ç”¨äºŒåˆ†æ³•å¯ä»¥æå¤§åœ°ç¼©å°é—®é¢˜è§„æ¨¡ã€‚ å®ç°inçš„æ•ˆæœ 123456789101112131415nums = [1,5,12,23,34,46,59,99,443]def fucn(num, nums): if len(nums) == 0: return mid_index = len(nums) // 2 if num &gt; nums[mid_index]: nums = nums[mid_index+1:] fucn(num, nums) elif num &lt; nums[mid_index]: nums = nums[:mid_index] fucn(num,nums) else: print('not exis') å®ç°indexçš„æ•ˆæœ 1234567891011121314151617181920212223nums = [1, 13, 15, 23, 27, 31, 33, 57, 73, 81, 93, 94, 97, 101] # ä»å°åˆ°å¤§æ’åˆ—çš„æ•°å­—åˆ—è¡¨def binary_search(find_num,nums): print(nums) if len(nums) == 0: print('not exists') return # åŠŸèƒ½ mid_index = len(nums) // 2 if find_num &gt; nums[mid_index]: # in the right nums=nums[mid_index+1:] # é‡æ–°è¿è¡ŒåŠŸèƒ½,ä¼ å…¥æ–°åˆ—è¡¨ binary_search(find_num,nums) elif find_num &lt; nums[mid_index]: # in the left nums=nums[:mid_index] # é‡æ–°è¿è¡ŒåŠŸèƒ½,ä¼ å…¥æ–°åˆ—è¡¨ binary_search(find_num,nums) else: print('find it') binary_search(95,nums)]]></content>
      <categories>
        <category>Python</category>
      </categories>
  </entry>
  <entry>
    <title><![CDATA[å­—ç¬¦ç¼–ç ]]></title>
    <url>%2F2018%2F10%2F08%2F%E5%AD%97%E7%AC%A6%E7%BC%96%E7%A0%81%2F</url>
    <content type="text"><![CDATA[æœ¬æ¥éƒ½ä»¥ä¸ºè‡ªå·±å®Œå…¨å¼„æ‡‚å­—ç¬¦ç¼–ç äº†ï¼Œæ˜¨å¤©ä¸€ä¸ªå°é—®é¢˜ç»™éš¾å€’äº†ï¼Œæ€è€ƒäº†å¾ˆä¹…æ‰å¾—å‡ºç­”æ¡ˆï¼Œæƒ­æ„§ å­—ç¬¦ç¼–ç çš„ç®€ä»‹å­—ç¬¦ç¼–ç å¯ä»¥è¯´æ¯ä¸€ç§ç¼–ç¨‹è¯­è¨€éƒ½ä¼šé‡åˆ°çš„é—®é¢˜ï¼Œä¸ºä»€ä¹ˆä¼šæœ‰è¿™ä¹ˆå¤šçš„é—®é¢˜å‘¢ï¼Œå°±æ˜¯å› ä¸ºè®¡ç®—æœºå‘å±•é€Ÿåº¦å¤ªå¿«äº†ï¼Œä¸ä»…è®¡ç®—æœºçš„è¯ç”Ÿå›½è¦ä½¿ç”¨ï¼Œç¬¬ä¸‰ä¸–ç•Œå›½å®¶ä¹Ÿè¦ä½¿ç”¨ï¼Œæ‰€ä»¥äººå’Œè®¡ç®—æœºçš„äº¤æµæ–¹å¼å°±å˜å¾—å¤æ‚èµ·æ¥ã€‚åƒè‹±è¯­å›½å®¶æœ€ç®€å•ï¼Œç›´æ¥ç”¨ä¸€ä¸ªå­—èŠ‚ä¹Ÿå°±æ˜¯7bitï¼Œæ€»å…±128ç§çŠ¶æ€å°±å¯ä»¥æ»¡è¶³äº¤æµéœ€æ±‚ï¼›ä½†æ˜¯åƒä¸­å›½ç­‰ä¸ä»¥è‹±è¯­ä¸ºç¬¬ä¸€æ¯è¯­çš„å›½å®¶å°±ä¼šå‡ºå¾ˆå¤šé—®é¢˜äº†ï¼Œä½†ä¸­æ–‡å°±æœ‰60000+ä¸ªï¼Œé‚£ä¹ˆå¾ˆæ˜¾ç„¶ï¼Œ7bitæ»¡è¶³ä¸äº†éœ€æ±‚ï¼Œæ‰€ä»¥ä¸ºäº†æ»¡è¶³éœ€æ±‚ï¼Œä¸­å›½å‡ºäº†gb2312ç¼–ç ï¼Œä¸è¿‡gb2312ä¹Ÿä¸èƒ½æ»¡è¶³éœ€æ±‚ï¼Œæ‰€ä»¥åˆå‡ºæ¥äº†gbkç¼–ç ï¼Œå¯ä»¥è¡¨ç¤º60000+æ±‰å­ã€‚ è™½ç„¶å¯ä»¥é€šè¿‡è‡ªå·±å›½å®¶å»è§„å®šæœ¬å›½çš„å­—ç¬¦ç¼–ç æ–¹å¼ï¼Œå¯æ˜¯è¿™ä¹ˆå¤šå›½å®¶ï¼Œæ¯ä¸ªå›½å®¶éƒ½æœ‰è‡ªå·±çš„ç¼–ç æ–¹å¼ï¼Œé‚£ä¹ˆè·¨è¿‡äº¤æµä¼šå˜å¾—å›°éš¾èµ·æ¥ã€‚ä¸ºäº†è§£å†³è¿™ç§é—®é¢˜ï¼Œåœ¨1990å¹´å¼€å§‹èµ·è‰unicodeç ï¼Œç®€ç§°ä¸‡å›½ç ã€‚é‡Œé¢æ˜¯ä¸€å¼ è¶…çº§å¤§çš„å¯¹ç…§è¡¨ï¼ŒåŒ…å«äº†æ‰€æœ‰çš„ç¼–ç é›†ï¼Œæ¯”å¦‚ï¼šutf-8ã€shiftjisã€gbkã€iso-8859-1ã€‚æ—¢ç„¶åŒ…å«è¿™ä¹ˆå¤šçš„å¯¹ç…§è¡¨ï¼Œé‚£ä¹ˆæ¯ä¸ªå›½å®¶éƒ½ç»§ç»­ç”¨è‡ªå·±çš„ç¼–ç æ“ä½œæ–‡ä»¶ï¼Œä½†æ˜¯åœ¨å†…å­˜ä¸­éƒ½ç”¨unicodeç ï¼Œå­˜çš„æ—¶å€™åˆæ ¹æ®unicodeå¯¹ç…§æ˜ å°„æˆè‡ªå·±å›½å®¶çš„ç¼–ç æ–¹å¼å­˜å‚¨ä¸å°±å¯ä»¥è§£å†³è·¨å›½äº¤æµçš„é—®é¢˜äº†å˜›ã€‚ æ–‡æœ¬ç¼–è¾‘å™¨æ‰“å¼€æ–‡ä»¶æ–‡æœ¬ç¼–è¾‘å™¨æ‰“å¼€æ–‡ä»¶é€šå¸¸åˆ†ä¸ºä¸‰æ­¥ï¼š é¦–å…ˆå¯åŠ¨æ–‡æœ¬ç¼–è¾‘å™¨ æ–‡æœ¬ç¼–è¾‘å™¨å°†å­˜å‚¨åœ¨ç¡¬ç›˜ä¸­çš„æ–‡ä»¶è¯»å…¥å†…å­˜ æ–‡æœ¬ç¼–è¾‘å™¨è¯†åˆ«å†…å­˜ä¸­æ–‡ä»¶çš„ç¼–ç æ–¹å¼è¿›è€Œè§£ç  ç¬¬ä¸€æ­¥ä¸ç”¨å¤šè§£é‡Šäº†ï¼Œé‡è¦åœ¨ç¬¬äºŒæ­¥å’Œç¬¬ä¸‰æ­¥ã€‚ ç¡¬ç›˜ä¸­çš„æ–‡ä»¶ä¼šæœ‰ä¸€ç§ç¼–ç æ–¹å¼ï¼Œå¦‚ä¸‹å›¾ å¯ä»¥çœ‹å‡ºæ¥æœ‰ASCIIå’ŒUTF-8ä¸¤ç§ç¼–ç æ–¹å¼ï¼Œæ‰€ä»¥å½“æ–‡æœ¬ç¼–è¾‘å™¨å°†å®ƒä»¬è¯»å…¥å†…å­˜ä¸­æ—¶ï¼Œéœ€è¦æŒ‰ç…§ASCIIå’ŒUTF-8åˆ†åˆ«è§£ç æˆunicodeç ï¼ˆå†…å­˜ä¸­é»˜è®¤ç¼–ç éƒ½ä¸ºunicodeï¼‰ï¼Œç¬¬ä¸‰æ­¥éœ€è¦åœ¨æ˜¾ç¤ºå±ä¸Šæ˜¾ç¤ºå‡ºæ¥ï¼Œé‚£ä¹ˆéœ€è¦å°†å†…å­˜ä¸­çš„unicodeç è§£ç å‡ºæ¥ï¼Œé‚£ä¹ˆè¿™æ—¶å€™æŒ‰ç…§ä»€ä¹ˆè§£ç æ–¹å¼å‘¢ï¼Ÿå¦‚æœæˆ‘ä»¬æ²¡æŒ‡å®šçš„è¯æŒ‰ç…§å½“å‰ç¯å¢ƒçš„ç¼–ç æ–¹å¼ï¼Œæ¯”å¦‚windowsç³»ç»Ÿé»˜è®¤ç¼–ç æ–¹å¼ä¸ºgbkï¼Œç±»linuxç³»ç»Ÿé»˜è®¤ç¼–ç æ–¹å¼ä¸ºutf-8ã€‚æ‰€ä»¥è¿™å°±ä¼šå‡ºç°é—®é¢˜äº†ï¼Œå‡å¦‚åœ¨windowsç³»ç»Ÿä¸­è¯»å–utf-8ç¼–ç æ–¹å¼çš„æ–‡ä»¶æ—¶ åœ¨windowsä¸‹ä½¿ç”¨python2è¿›è¡Œè¯•éªŒï¼Œå®šä¹‰äº†ä¸€ä¸ªå˜é‡ï¼Œå¹¶ä¸”æ˜¯unicodeç¼–ç çš„ï¼Œå½“æˆ‘åˆ†åˆ«æ˜¯ç”¨utf-8å’Œgbkå¯¹unicodeç¼–ç æ—¶ï¼Œç„¶åæ‰“å°å‘ç°utf-8ç ä¹±ç äº†ï¼Œè¿™å°±è¯´æ˜åœ¨æ‰“å°çš„æ—¶å€™ä¼šæ ¹æ®å½“å‰ç¯å¢ƒçš„ç¼–ç æ–¹å¼è¿›è¡Œè§£ç ï¼Œè¿™å’Œwindowsé»˜è®¤ç¼–ç ä¸ºgbkæ˜¯ç›¸ç¬¦çš„ã€‚ pythonä¸­çš„ç¼–ç åœ¨pythonä¸­æœ‰ä¸¤ç§ç¼–ç ï¼šåˆ†åˆ«ä¸ºæ–‡ä»¶ç¼–ç ä»¥åŠè¿è¡Œä»£ç æ—¶å®šä¹‰å­—ç¬¦ä¸²çš„ç¼–ç  ç¬¬ä¸€ç§åœ¨å‰é¢è§£é‡Šäº†ï¼Œæ€»çš„æ¥è¯´ä¸€ä¸ªæ–‡æœ¬ç¼–è¾‘å™¨ä»ç¡¬ç›˜ä¸­è¯»å…¥æ–‡ä»¶æ—¶ï¼Œç¬¬ä¸€æ­¥æŒ‰ç…§æ–‡ä»¶å­˜å‚¨çš„ç¼–ç è§£ç ä¸ºunicodeç å­˜å…¥å†…å­˜ï¼Œç„¶åæ ¹æ®æ–‡ä»¶å¤´å£°æ˜çš„ç¼–ç è§£ç ï¼ˆå¦‚æœæœ‰æ–‡ä»¶å¤´å£°æ˜ç¼–ç æ–¹å¼çš„è¯ï¼‰ï¼Œå¦åˆ™å°±æŒ‰ç…§ç¯å¢ƒé»˜è®¤ç¼–ç è¿›è¡Œè§£ç ã€‚ è€Œpython2å’Œpython3æœ‰å¾ˆå¤§çš„ä¸åŒï¼Œpython2é»˜è®¤ç¼–ç ä¸ºasciiï¼Œpython3é»˜è®¤ç¼–ç ä¸ºutf-8ï¼Œå³python2ç¼–å†™çš„æ–‡ä»¶é»˜è®¤ä¸ºASCIIç¼–ç ï¼Œpython3ç¼–å†™çš„æ–‡ä»¶é»˜è®¤ä¸ºutf-8ç¼–ç ï¼Œä½†æ˜¯è¯»å…¥å†…å­˜ä¸­éƒ½éœ€è¦è§£ç ä¸ºunicodeã€‚ ç¬¬äºŒç§çš„è¯ï¼Œåœ¨ä¸Šå¹…å›¾ä¸­ä¸ºäº†æ¼”ç¤ºï¼ŒæŠŠå­—ç¬¦ä¸²å®šä¹‰ä¸ºunicodeç ï¼Œé‚£ä¹ˆå­—ç¬¦ä¸²å‰é¢ä¸åŠ â€™uâ€™å‘¢ï¼Ÿ æŒ‰ç…§æˆ‘ä»¬ä¹‹å‰çš„è®¤è¯†ï¼ŒASCIIè¯†åˆ«ä¸äº†ä¸­æ–‡ï¼Œæ‰€ä»¥åœ¨print(a)æ—¶åº”è¯¥ä¼šæŠ¥é”™æ‰å¯¹å•Šï¼Œä¸ºä»€ä¹ˆä¸æŠ¥é”™å‘¢ï¼Ÿè¿™ä¸ªåº”è¯¥æ˜¯python2åšçš„æ”¹å˜ï¼Œå½“è¯†åˆ«ä¸äº†ä¸­æ–‡æ—¶ï¼Œä½¿ç”¨å½“å‰ç³»ç»Ÿé»˜è®¤ç¼–ç è¿›è¡Œç¼–ç å’Œè§£ç ï¼Œæ¥è¯æ˜ä¸€ä¸‹ï¼Œæˆ‘ä½¿ç”¨linuxåšä¸ªè¯•éªŒå°±çŸ¥é“äº†ã€‚ çœŸç›¸å¤§ç™½äº†ï¼Œpython2è¿™ä¸ªæ”¹è¿›ä¸å¾—ä¸è¯´æŒºæœºæ™ºçš„ï¼Œå› ä¸ºå†å²é—ç•™é—®é¢˜æ‰å¯¼è‡´python2çš„ç¼–ç é—®é¢˜ç»è¿‡è¿™æ ·ç®—æ˜¯ä¸€ç§æ¯”è¾ƒå®Œç¾çš„è§£å†³æ–¹å¼ã€‚è€Œå®Œç¾çš„python3ä¼šæœ‰è¿™ç§é—®é¢˜å—ï¼Ÿæ€ä¹ˆå¯èƒ½ã€‚python3æ˜¯å®Œç¾çš„ã€‚]]></content>
      <categories>
        <category>Computer Basics</category>
      </categories>
  </entry>
  <entry>
    <title><![CDATA[sshå…é’¥ç™»é™†github]]></title>
    <url>%2F2018%2F10%2F01%2Fgit-ssh%E9%85%8D%E7%BD%AE%E5%92%8C%E4%BD%BF%E7%94%A8%2F</url>
    <content type="text"><![CDATA[è®¾ç½®Gitçš„user nameå’Œemaiï¼šï¼ˆå¦‚æœæ˜¯ç¬¬ä¸€æ¬¡çš„è¯ï¼‰$ git config --global user.name &#39;musibii&#39;$ git config --global user.email &#39;shaozuanzuan@gmail.com&#39; ç”Ÿæˆç§˜é’¥$ ssh-keygen -t rsa -C &#39;shaozuanzuan@gmail.com&#39;ä»å›¾ä¸Šå¯ä»¥çœ‹åˆ°ç”Ÿæˆç§˜é’¥ä¿å­˜çš„åœ°å€ï¼Œé€šå¸¸éƒ½ä¼šé»˜è®¤ä¿å­˜åœ¨å®¶ç›®å½•ä¸‹é¢çš„.sshä¸‹ï¼Œå‰é¢åŠ ç‚¹è¡¨ç¤ºæ˜¯ä¸ªéšè—ç›®å½•ã€‚ æ·»åŠ ç§˜é’¥åˆ°ssh-agentssh-agentæ˜¯ä¸€ä¸ªå¸®åŠ©ç¨‹åºï¼Œç”¨äºè·Ÿè¸ªç”¨æˆ·çš„èº«ä»½å¯†é’¥åŠå…¶å¯†ç ã€‚ ç„¶åï¼Œä»£ç†å¯ä»¥ä½¿ç”¨å¯†é’¥ç™»å½•å…¶ä»–æœåŠ¡å™¨ï¼Œè€Œæ— éœ€ç”¨æˆ·å†æ¬¡é”®å…¥å¯†ç æˆ–å¯†ç .è¿è¡Œssh-agentä¹‹åï¼Œä½¿ç”¨ssh-agentå°†ç§é’¥äº¤ç»™ssh-agentä¿ç®¡ï¼Œå…¶ä»–ç¨‹åºéœ€è¦èº«ä»½éªŒè¯çš„æ—¶å€™å°±å¯ä»¥å°†éªŒè¯ç”³è¯·äº¤ç»™ssh-agentæ¥å®Œæˆæ•´ä¸ªè®¤è¯è¿‡ç¨‹ã€‚æ·»åŠ ç”Ÿæˆçš„ssh keyåˆ°ssh-agent$ ssh-add ~/.ssh/id_rsa ç™»å½•githubï¼Œæ·»åŠ sshç§˜é’¥å¯ä»¥çœ‹åˆ°æˆ‘æœ‰ä¸¤ä¸ªå¯†é’¥ï¼Œä¸€ä¸ªæ˜¯macOSçš„ï¼Œä¸€ä¸ªæ˜¯Ubuntuçš„ã€‚ æµ‹è¯•æ˜¯å¦æˆåŠŸ$ ssh -T git@github.comä¸‡ä¸‡æ²¡æƒ³åˆ°ï¼ŒæŠ¥é”™äº†ã€‚ã€‚ã€‚æŠ¥é”™åŸå› å±…ç„¶æ˜¯æ²¡è”ç½‘ã€‚ã€‚ã€‚é åŒ—ï¼ï¼ï¼é‡æ–°è”ç½‘æˆåŠŸäº†ã€‚ã€‚]]></content>
      <categories>
        <category>GitHub</category>
      </categories>
  </entry>
  <entry>
    <title><![CDATA[macä¸‹é…ç½®githubä¸ªäººåšå®¢]]></title>
    <url>%2F2018%2F09%2F29%2FMac%E4%BD%BF%E7%94%A8Hexo%E9%85%8D%E7%BD%AEGItHub%E5%8D%9A%E5%AE%A2%2F</url>
    <content type="text"><![CDATA[ä¸€ å‰è¨€æœ¬æ¥ä¸€ç›´ç”¨åšå®¢å›­å†™åšå®¢çš„ï¼Œå¥ˆä½•åšå®¢å›­ç•Œé¢æƒ¨ä¸å¿ç¹ï¼Œè€Œä¸”è‡ªå¸¦çš„markdownç¼–è¾‘å™¨æ›´æ˜¯çƒ‚çš„å¯ä»¥ï¼Œäºæ˜¯åœ¨å®¤å‹makeupstoriesçš„å»ºè®®ä¸‹å¼€å§‹å°è¯•æ­å»ºè‡ªå·±çš„githubåšå®¢ï¼ŒçœŸæ˜¯ä¸€è·¯å¿ƒé…¸å•Šï¼ä¸è¿‡æˆå°±æ„Ÿä¹Ÿæ˜¯å¤§å¤§æ»´ã€‚ äºŒ å‡†å¤‡å·¥ä½œåˆ›å»ºGithubåŸŸåå’Œæ”¾åšå®¢çš„åº“ é¦–å…ˆéœ€è¦æ³¨å†Œä¸€ä¸ªGithubè´¦å·ã€‚ æ³¨å†Œä¹‹åéœ€è¦æ–°å»ºä¸€ä¸ªåº“(repository)æ¥å­˜å‚¨ç½‘ç«™ï¼Œç‚¹å‡»é¦–é¡µä»»æ„ä½ç½®å‡ºç°çš„New repositoryæŒ‰é’®åˆ›å»ºä»“åº“ï¼Œæ³¨æ„è¿™ä¸ªä»“åº“åä¸èƒ½éšä¾¿å†™ã€‚ä¾‹å¦‚æˆ‘çš„Githubè´¦å·ä¸ºmusibiiï¼Œé‚£ä¹ˆåº“åä¸ºmusibii.github.ioã€‚ å®‰è£…Gitã€Nodejså’ŒHexoHexoå¯ä»¥è¯´æ˜¯æœ€æµè¡Œçš„åšå®¢æ¡†æ¶äº†ï¼ŒåŸºäºNodejsï¼Œæƒ³è¦æ­å»ºå¥½ï¼Œéœ€è¦å®‰è£…Gitã€Nodejså’ŒHexoã€‚ å®‰è£…Gitå¯ä»¥ç›´æ¥åœ¨å‘½ä»¤è¡Œä½¿ç”¨brewæ¥å®‰è£…Git$ brew install git å› ä¸ºæˆ‘ä¹‹å‰å·²ç»å®‰è£…äº†Gitï¼Œæ‰€ä»¥è¿™æ¬¡ç»™æˆ‘å®‰è£…äº†ä¸¤ä¸ªæ‰©å±•åŒ…ã€‚ å®‰è£…Nodejsä¸ºäº†ä¾¿äºç®¡ç†Nodejsç‰ˆæœ¬ï¼Œé¦–å…ˆå®‰è£…nvmï¼Œè¿™æ˜¯Nodejsç‰ˆæœ¬ç®¡ç†å™¨ï¼Œå¯ä»¥å®ç°Nodejså¤šç‰ˆæœ¬åˆ‡æ¢ã€‚$ curl -o- [https://raw.githubusercontent.com/creationix/nvm/v0.33.11/install.sh](https://raw.githubusercontent.com/creationix/nvm/v0.33.11/install.sh) | bashå®‰è£…å®Œæˆåï¼Œé‡å¯ç»ˆç«¯å¹¶æ‰§è¡Œä¸‹åˆ—å‘½ä»¤å³å¯å®‰è£…Node.js$ nvm install \dåé¢è·Ÿçš„æ˜¯Node.jsçš„ç‰ˆæœ¬ï¼Œä»Šå¤©å°±æ˜¯è¢«è¿™ä¸ªç»™å‘äº†ï¼Œåº”è¯¥å®‰è£…è¾ƒæ–°çš„ç‰ˆæœ¬ï¼Œä¹‹å‰å®‰è£…çš„ä¸º 4ï¼Œç„¶åä¸€ç›´æŠ¥é”™ã€‚$ nvm install 8å®‰è£…ååœ¨ç»ˆç«¯è¾“å…¥$ nvm use nodeå°±ä¼šä½¿ç”¨æœ€æ–°çš„nodejsç‰ˆæœ¬äº†ã€‚ å®‰è£…Hexo$ sudo npm install hexo-cli -gæ³¨æ„éœ€è¦sudoæƒé™ï¼Œä¸ç„¶ä¼šå‡ºé”™ é…ç½®åšå®¢æ¥ä¸‹æ¥éœ€è¦ä½¿ç”¨Hexoæ¥åˆå§‹åŒ–ä¸€ä¸ªåšå®¢ï¼Œç„¶åæ ¹æ®è‡ªå·±çš„éœ€æ±‚æ›´æ”¹ä¸€äº›è‡ªå®šä¹‰é…ç½®ï¼Œæ¯”å¦‚å­—ä½“ã€åŠ¨ç”»æ•ˆæœã€ä¸»é¢˜ç­‰ç­‰ã€‚ åˆ›å»ºåšå®¢ä¸ºè‡ªå·±çš„åšå®¢åˆ›å»ºä¸€ä¸ªæ–‡ä»¶å¤¹ï¼Œç„¶åcd æ–‡ä»¶å¤¹ï¼Œå¹¶æ‰§è¡Œä¸‹é¢çš„ä»£ç ã€‚$ hexo init username.github.io æ›´æ”¹ä¸»é¢˜ åŸºç¡€é…ç½®ç„¶åéœ€è¦çš„å°±æ˜¯åœ¨_config.ymlé‡Œé¢ä¿®æ”¹ä¸ªäººä¿¡æ¯ï¼Œæ¯”å¦‚åšå®¢çš„ä¸»é¢˜ã€ä½œè€…è¿˜æœ‰è¯­è¨€ä»¥åŠä¿®æ”¹çš„ä¸»é¢˜åï¼Œæœ€é‡è¦çš„æ˜¯è¦å’Œä½ çš„githubä»“åº“å…³è”èµ·æ¥ã€‚å…¶ä»–çš„å¯ä»¥æ ¹æ®è‡ªå·±çš„éœ€æ±‚é…Œæƒ…æ›´æ”¹ï¼Œæ¯”å¦‚æˆ‘å°±å¢åŠ äº†é¡µé¢çš„åŠ¨ç”»æ•ˆæœNextä¸»é¢˜åŠ¨ç”»æ•ˆæœ ä½ çš„ç¬¬ä¸€ç¯‡åšå®¢ $ hexo new &#39;ä½ çš„åšå®¢åå­—&#39;æ‰§è¡Œå®Œåä¼šåœ¨â€˜username.github.io/source/_posts/â€˜ç›®å½•ä¸‹å‡ºç°ä½ çš„åšå®¢åå­— åšå®¢ä½¿ç”¨markdownæ ¼å¼ï¼Œç¼–å†™å®Œåæ‰§è¡Œ$ hexo serverå¦‚æœå‡ºç°ä¸‹é¢çš„é¡µé¢ åœ¨æµè§ˆå™¨é¡µé¢è¾“å…¥http://localhost:4000æˆ‘çš„ç•Œé¢ä¼šå’Œä½ ä»¬çš„ä¸ä¸€æ ·ï¼Œå‡ºç°äº† Helloå°±è¯´æ˜æˆåŠŸäº†ã€‚ å®‰è£…hexo-deployer-git â€“saveè‡ªåŠ¨éƒ¨ç½²å‘å¸ƒå·¥å…·$ npm install hexo-deployer-git --save å‘å¸ƒåšå®¢$ hexo deployç»“æŸåè¿›å…¥åšå®¢å°±å¯ä»¥çœ‹è§äº†ï¼]]></content>
      <categories>
        <category>Python</category>
      </categories>
  </entry>
  <entry>
    <title><![CDATA[Hello World]]></title>
    <url>%2F2018%2F09%2F29%2Fhello-world%2F</url>
    <content type="text"><![CDATA[Welcome to Hexo! This is your very first post. Check documentation for more info. If you get any problems when using Hexo, you can find the answer in troubleshooting or you can ask me on GitHub.Hello,my name is musibii! Quick StartCreate a new post1$ hexo new "My New Post" More info: Writing Run server1$ hexo server More info: Server Generate static files1$ hexo generate More info: Generating Deploy to remote sites1$ hexo deploy More info: Deployment]]></content>
  </entry>
</search>
